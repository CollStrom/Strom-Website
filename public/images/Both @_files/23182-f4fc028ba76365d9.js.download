(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23182],{153737:function(e,t,n){"use strict";n.d(t,{Gi:function(){return g},b6:function(){return p},MP:function(){return u},LO:function(){return l},OK:function(){return c},kq:function(){return d},JL:function(){return R},bb:function(){return B},FS:function(){return f},kv:function(){return h},O2:function(){return P},fB:function(){return I},jK:function(){return S},D5:function(){return D},wN:function(){return T},QH:function(){return A},g2:function(){return E},Vh:function(){return m},B:function(){return o},wo:function(){return M},MM:function(){return N},bs:function(){return v},lb:function(){return s},ib:function(){return F},Gq:function(){return b},$I:function(){return C},fT:function(){return j},JO:function(){return y},mY:function(){return w},WD:function(){return k},_N:function(){return x},xe:function(){return a},sE:function(){return r}});var i=n(827378);let o=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(32474),n.e(38126),n.e(42612),n.e(8172),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(99353),n.e(38754),n.e(53006),n.e(80508),n.e(41780),n.e(94071),n.e(20441)]).then(n.bind(n,475796))),a=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(32474),n.e(24851),n.e(38126),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(87734),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(99353),n.e(38754),n.e(53006),n.e(80508),n.e(41780),n.e(43222),n.e(94071),n.e(28360),n.e(25877)]).then(n.bind(n,128360))),r=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(32474),n.e(65674),n.e(24851),n.e(19592),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(87734),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(99353),n.e(38754),n.e(53006),n.e(80508),n.e(41780),n.e(43222),n.e(48410)]).then(n.bind(n,781114))),s=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(3660),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(32474),n.e(65674),n.e(87928),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(99353),n.e(38754),n.e(53006),n.e(80508),n.e(41780),n.e(16178)]).then(n.bind(n,604985))),l=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(65674),n.e(38126),n.e(83614),n.e(1892),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(98155)]).then(n.bind(n,103775))),d=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(65674),n.e(38126),n.e(83614),n.e(87073),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(44517),n.e(38228)]).then(n.bind(n,522054))),c=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(65674),n.e(38126),n.e(83614),n.e(87073),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(44517),n.e(64957)]).then(n.bind(n,364957))),u=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(38126),n.e(87073),n.e(8578),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(59413),n.e(20844),n.e(21918),n.e(44517),n.e(26177)]).then(n.bind(n,288924))),p=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(38126),n.e(87073),n.e(33849),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(59413),n.e(20844),n.e(21918),n.e(44517),n.e(50289)]).then(n.bind(n,670599))),h=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(26263),n.e(33091),n.e(48437),n.e(89502),n.e(65674),n.e(83614),n.e(157),n.e(93537),n.e(23387),n.e(96999),n.e(24606),n.e(91499),n.e(39889),n.e(83734),n.e(16847),n.e(32763),n.e(91501)]).then(n.bind(n,691501))),m=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(22826),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(63791),n.e(23357),n.e(65674),n.e(42612),n.e(7799),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(42419),n.e(21918),n.e(80508),n.e(68169)]).then(n.bind(n,73847))),g=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(26263),n.e(33091),n.e(48437),n.e(89502),n.e(65674),n.e(83614),n.e(62381),n.e(23387),n.e(96999),n.e(24606),n.e(91499),n.e(39889),n.e(83734),n.e(16847),n.e(43396)]).then(n.bind(n,685966))),x=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33091),n.e(48437),n.e(89502),n.e(12636),n.e(65674),n.e(83614),n.e(157),n.e(23387),n.e(96999),n.e(24606),n.e(91499),n.e(39889),n.e(83734),n.e(16847),n.e(32763),n.e(41481)]).then(n.bind(n,670239))),f=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(26263),n.e(33091),n.e(48437),n.e(89502),n.e(65674),n.e(83614),n.e(157),n.e(75061),n.e(23387),n.e(96999),n.e(24606),n.e(91499),n.e(39889),n.e(83734),n.e(16847),n.e(32763),n.e(14888)]).then(n.bind(n,514888))),v=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(65674),n.e(38126),n.e(83614),n.e(94069),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(87734),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(91631)]).then(n.bind(n,818122))),b=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(32474),n.e(24851),n.e(38126),n.e(87423),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(87734),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(99353),n.e(38754),n.e(53006),n.e(80508),n.e(41780),n.e(43222),n.e(94071),n.e(28360),n.e(12389)]).then(n.bind(n,219910))),y=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(859),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(22826),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(63791),n.e(23357),n.e(54430),n.e(78951),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(42419),n.e(62279),n.e(21918),n.e(16168),n.e(79446)]).then(n.bind(n,279446))),w=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(22826),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(63791),n.e(23357),n.e(65674),n.e(54430),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(42419),n.e(62279),n.e(21918),n.e(16168),n.e(66362)]).then(n.bind(n,766362))),j=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(65674),n.e(38126),n.e(44260),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(24754)]).then(n.bind(n,86651))),k=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(65674),n.e(38126),n.e(832),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(48078)]).then(n.bind(n,443778))),C=i.lazy(()=>Promise.all([n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(13959),n.e(90321),n.e(94087),n.e(8960),n.e(22826),n.e(63791),n.e(8807),n.e(12185),n.e(33956),n.e(23698),n.e(42419),n.e(62279),n.e(36700)]).then(n.bind(n,216415))),A=i.lazy(()=>Promise.all([n.e(77493),n.e(11642),n.e(82178),n.e(75095),n.e(56461),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(79913),n.e(21890),n.e(83026),n.e(29582),n.e(49529),n.e(33091),n.e(48437),n.e(89502),n.e(63662),n.e(65674),n.e(51910),n.e(73210),n.e(37278),n.e(98530),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(91499),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(95878),n.e(76753)]).then(n.bind(n,830621))),T=i.lazy(()=>Promise.all([n.e(77493),n.e(11642),n.e(82178),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(29582),n.e(49529),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(51910),n.e(73210),n.e(37278),n.e(55689),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(95878),n.e(3466)]).then(n.bind(n,347061))),S=i.lazy(()=>Promise.all([n.e(77493),n.e(11642),n.e(82178),n.e(75095),n.e(56461),n.e(29497),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(21890),n.e(83026),n.e(29582),n.e(49529),n.e(33091),n.e(94087),n.e(48437),n.e(8960),n.e(14524),n.e(89502),n.e(12636),n.e(63662),n.e(3258),n.e(23357),n.e(32474),n.e(51910),n.e(73210),n.e(37278),n.e(55689),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(39889),n.e(83734),n.e(71174),n.e(16847),n.e(59413),n.e(20844),n.e(21918),n.e(38754),n.e(53006),n.e(95878),n.e(3466),n.e(46643),n.e(39703)]).then(n.bind(n,299561))),I=i.lazy(()=>Promise.all([n.e(77493),n.e(11642),n.e(82178),n.e(75095),n.e(56461),n.e(24292),n.e(95023),n.e(8704),n.e(79913),n.e(21890),n.e(83026),n.e(29582),n.e(49529),n.e(33091),n.e(48437),n.e(65674),n.e(51910),n.e(73210),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(91499),n.e(71174),n.e(16847),n.e(95878),n.e(46643),n.e(17475),n.e(32846)]).then(n.bind(n,246643))),P=i.lazy(()=>Promise.all([n.e(77493),n.e(11642),n.e(82178),n.e(75095),n.e(56461),n.e(24292),n.e(95023),n.e(8704),n.e(79913),n.e(21890),n.e(83026),n.e(29582),n.e(49529),n.e(33091),n.e(48437),n.e(65674),n.e(51910),n.e(73210),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(91499),n.e(71174),n.e(16847),n.e(95878),n.e(35258)]).then(n.bind(n,401771))),D=i.lazy(()=>Promise.all([n.e(77493),n.e(11642),n.e(82178),n.e(75095),n.e(56461),n.e(24292),n.e(95023),n.e(8704),n.e(79913),n.e(21890),n.e(83026),n.e(29582),n.e(49529),n.e(33091),n.e(48437),n.e(65674),n.e(51910),n.e(73210),n.e(81719),n.e(32938),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(91499),n.e(71174),n.e(16847),n.e(95878),n.e(17475),n.e(60254)]).then(n.bind(n,896316))),N=i.lazy(()=>Promise.all([n.e(77493),n.e(82178),n.e(75095),n.e(56461),n.e(26263),n.e(24292),n.e(33548),n.e(80389),n.e(33091),n.e(48437),n.e(89502),n.e(63662),n.e(65674),n.e(42612),n.e(53478),n.e(23387),n.e(96999),n.e(24606),n.e(91499),n.e(39889),n.e(87734),n.e(83734),n.e(16847),n.e(22884)]).then(n.bind(n,739137))),R=i.lazy(()=>Promise.all([n.e(77493),n.e(68143),n.e(11642),n.e(82178),n.e(75095),n.e(56461),n.e(16732),n.e(53362),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(54402),n.e(36407),n.e(53830),n.e(51505),n.e(29582),n.e(74470),n.e(49529),n.e(33091),n.e(35045),n.e(63778),n.e(82746),n.e(94087),n.e(48437),n.e(8960),n.e(92222),n.e(22826),n.e(85829),n.e(63662),n.e(63791),n.e(57381),n.e(10961),n.e(42279),n.e(91627),n.e(40399),n.e(89400),n.e(56434),n.e(27353),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(87734),n.e(16847),n.e(42419),n.e(16693),n.e(62279),n.e(33703),n.e(70125),n.e(22869),n.e(41682),n.e(63181)]).then(n.bind(n,563181))),B=i.lazy(()=>Promise.all([n.e(77493),n.e(75095),n.e(56461),n.e(63832),n.e(42132),n.e(36147),n.e(13208),n.e(12874),n.e(38444),n.e(64790),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(19010),n.e(48437),n.e(14524),n.e(85829),n.e(30284),n.e(46181),n.e(32474),n.e(91627),n.e(14123),n.e(23387),n.e(96999),n.e(24606),n.e(38754),n.e(53006),n.e(37221)]).then(n.bind(n,854527))),M=i.lazy(()=>Promise.all([n.e(77493),n.e(68143),n.e(11642),n.e(82178),n.e(75095),n.e(56461),n.e(16732),n.e(53362),n.e(26263),n.e(24292),n.e(95023),n.e(8704),n.e(33548),n.e(80389),n.e(19010),n.e(79913),n.e(13959),n.e(90321),n.e(54402),n.e(36407),n.e(53830),n.e(51505),n.e(29582),n.e(74470),n.e(49529),n.e(33091),n.e(35045),n.e(63778),n.e(82746),n.e(94087),n.e(48437),n.e(8960),n.e(92222),n.e(22826),n.e(63662),n.e(63791),n.e(57381),n.e(10961),n.e(42279),n.e(40399),n.e(89400),n.e(56434),n.e(23387),n.e(96999),n.e(33956),n.e(24606),n.e(23698),n.e(91499),n.e(64769),n.e(87734),n.e(16847),n.e(42419),n.e(16693),n.e(62279),n.e(33703),n.e(70125),n.e(22869),n.e(41682),n.e(27239)]).then(n.bind(n,338160))),F=i.lazy(()=>n.e(35636).then(n.bind(n,335636))),E=i.lazy(()=>n.e(91207).then(n.bind(n,491207)))},492615:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var i=n(824246),o=n(674721),a=n.n(o),r=n(792739),s=n(614720),l=n(384077),d=n(924364),c=n(167469),u=n(626199),p=n(151102),h=n(599789),m=n(160337),g=n(60042),x=n.n(g),f=n(701245),v=n.n(f),b=n(320280),y=n(165168),w=n(298784),j=n.n(w),k=n(747063),C=n(827378),A=n(261415),T=n(939554),S=n(352991),I=n(279220),P=n(161320),D=n.n(P),N=n(118811),R=n(640504),B=n(548729);let PermissionsForProject=e=>{let{permissions:t,tasker:n,setPermissionsModalOpen:o,permissionsModalOpen:a}=e,r=t.length&&t[0].permissionGroup._id;return(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"5px"},children:[(0,i.jsx)(N.Z,{loggedUserIsAdmin:!0,isModalOpen:a,hideModal:()=>o(!1),scaler:n,filter:{permissionGroup:r}}),(0,i.jsx)(b.zx,{type:"primary",onClick:()=>o(!0),children:"Edit project permissions"})]})};var Task_TaskerContextPane=e=>{var t,n,o;let{attempt:r,projectId:s,hideLifetimeEarnings:l,taskMetadata:d,hideTaskerInfo:c}=e,[u,p]=(0,C.useState)(!1),m=(0,C.useRef)(null),[g,x]=(0,C.useState)(),[f,v]=(0,C.useState)(!1),y="tasker-context-head",w=(0,C.useCallback)(e=>{let t=e.target;for(;t&&![...t.classList||[]].includes(y);)t=t.parentElement;t&&(p(e=>!e),x(t.getBoundingClientRect()),e.stopPropagation())},[p,x]),{value:j,loading:k,error:A}=(0,I.Z)(async()=>c?null:(0,S.ZP)(null,"corp-api/attemptAudit/taskerForProject/".concat(s,"/").concat(r.attemptedBy)));return(0,i.jsxs)("div",{className:"jsx-64e25c99a7fe5eaf tasker-context",children:[(0,i.jsx)(a(),{id:"64e25c99a7fe5eaf",children:".tasker-context.jsx-64e25c99a7fe5eaf{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-right:10px}.tasker-context-head.jsx-64e25c99a7fe5eaf{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:5px;border:1px solid#ccc;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.tasker-context-head__icon.jsx-64e25c99a7fe5eaf{color:#888}.tasker-context-head.jsx-64e25c99a7fe5eaf:hover{cursor:pointer}.tasker-context-head.jsx-64e25c99a7fe5eaf:hover .tasker-context-head__icon.jsx-64e25c99a7fe5eaf{color:black}.tasker-pane.jsx-64e25c99a7fe5eaf{position:absolute;border:1px solid#ccc;opacity:.95;padding:10px;-webkit-box-shadow:3px 3px 3px#eee;-moz-box-shadow:3px 3px 3px#eee;box-shadow:3px 3px 3px#eee;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;cursor:default;color:black;width:auto;background:white;z-index:9999}.stats.jsx-64e25c99a7fe5eaf{}.stats.jsx-64e25c99a7fe5eaf>div.jsx-64e25c99a7fe5eaf{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.stats.jsx-64e25c99a7fe5eaf>div.jsx-64e25c99a7fe5eaf>strong.jsx-64e25c99a7fe5eaf{min-width:200px;text-align:right;margin-right:10px}"}),(0,i.jsxs)("div",{ref:m,className:"jsx-64e25c99a7fe5eaf "+(y||""),children:[d&&(0,i.jsx)(B.Z,{fromReviewHeader:!1,taskMetadata:d}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginRight:"10px"},onClick:w,className:"jsx-64e25c99a7fe5eaf",children:[(0,i.jsx)("span",{style:{color:"gray",fontSize:"smaller",fontWeight:100,textAlign:"right",marginBottom:"-5px"},className:"jsx-64e25c99a7fe5eaf",children:"About this tasker"}),(j||c)&&(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},className:"jsx-64e25c99a7fe5eaf",children:[(0,i.jsx)(b.Af,{color:"primary",label:(o=r.attemptedAtReviewLevel)===h.ReviewLevel.Attempt?"Attempt":"L"+o}),(0,i.jsx)("span",{style:{marginLeft:"10px"},className:"jsx-64e25c99a7fe5eaf",children:c?r.attemptedBy:j.tasker.email})]}),k&&(0,i.jsx)("span",{style:{marginRight:"10px"},className:"jsx-64e25c99a7fe5eaf",children:"Getting tasker information..."}),A&&(0,i.jsx)("span",{style:{marginRight:"10px"},className:"jsx-64e25c99a7fe5eaf",children:"Sorry, there was an error."})]})]}),j&&u&&g&&(0,i.jsx)(T.Z,{onOutsideClick:()=>{f||p(!1)},children:(0,i.jsxs)("div",{style:g?{top:g.bottom+"px",right:window.innerWidth-g.right+"px"}:{},className:"jsx-64e25c99a7fe5eaf tasker-pane",children:[(0,i.jsxs)("div",{className:"jsx-64e25c99a7fe5eaf stats",children:[!!r.attemptedAt&&(0,i.jsxs)("div",{className:"jsx-64e25c99a7fe5eaf",children:[(0,i.jsx)("strong",{className:"jsx-64e25c99a7fe5eaf",children:"Task attempted at"}),(0,i.jsx)(b.u,{placement:"top",title:new Date(r.attemptedAt).toLocaleString(),children:(0,i.jsx)("span",{className:"jsx-64e25c99a7fe5eaf",children:D()(r.attemptedAt).fromNow()})})]}),!!j.tasker.createdDate&&(0,i.jsxs)("div",{className:"jsx-64e25c99a7fe5eaf",children:[(0,i.jsx)("strong",{className:"jsx-64e25c99a7fe5eaf",children:"Tasker Joined"}),(0,i.jsx)(b.u,{placement:"top",title:new Date(j.tasker.createdDate).toLocaleString(),children:(0,i.jsx)("span",{className:"jsx-64e25c99a7fe5eaf",children:D()(j.tasker.createdDate).fromNow()})})]}),!l&&!!(null===(t=j.tasker.cachedStats)||void 0===t?void 0:t.estTotalPayoutCents)&&(0,i.jsxs)("div",{className:"jsx-64e25c99a7fe5eaf",children:[(0,i.jsx)("strong",{className:"jsx-64e25c99a7fe5eaf",children:"Lifetime earnings"})," $",((null===(n=j.tasker.cachedStats)||void 0===n?void 0:n.estTotalPayoutCents)/100).toFixed(2)]})]}),(0,i.jsx)(PermissionsForProject,{permissions:j.permissions,tasker:j.tasker,permissionsModalOpen:f,setPermissionsModalOpen:v}),(0,i.jsxs)("div",{style:{display:"flex",marginTop:"5px",justifyContent:"flex-end"},className:"jsx-64e25c99a7fe5eaf",children:[(0,i.jsx)(R.Z,{target:"_blank",href:"/lookup/"+j.tasker._id,children:(0,i.jsx)(b.zx,{style:{marginRight:"5px"},children:"Tasker Lookup"})}),(0,i.jsx)(R.Z,{target:"_blank",href:"/lookup/"+r._id,children:(0,i.jsx)(b.zx,{children:"About This Attempt"})})]})]})})]})},M=n(99562),F=n(946975),E=n(107873),Util_RapidDraggableSwitch=function(e){let{id:t,values:n,currentValue:o,onSwitch:a,draggingOptions:s}=e,valueToItem=e=>j().find(n,t=>t.value===e),[l,d]=(0,C.useState)(void 0),[c,u]=(0,C.useState)(!1),p=L(),draggerSelect=e=>{d(e)},draggerDrop=e=>{if(!l)return;let t=e.currentTarget.value;if(l!==t){let e=valueToItem(l),n=valueToItem(t);e&&n&&s.dropAction(e.order,n.order)}d(void 0)},renderDraggableButtons=e=>(0,i.jsxs)("div",{className:x()(p.buttons),children:[(0,i.jsx)("div",{className:x()(p.sortingIndicator),children:"Best"}),n.slice(s.draggableIndexStart).sort((e,t)=>e.order-t.order).map(t=>{let{id:n,value:s,display:l}=t,d=o===s;return(0,i.jsxs)("button",{id:n,value:s,className:x()(p.switchButton,{[p.selected]:d}),draggable:e,onClick:()=>{a(s)},onDragStart:()=>draggerSelect(s),onDragOver:e=>e.preventDefault(),onDrop:draggerDrop,children:[e?(0,i.jsx)(r.FontAwesomeIcon,{className:x()(p.dragIcon),icon:"grip-vertical"}):void 0,(0,i.jsx)(F.x,{medium:!0,children:l})]},"".concat(s,"_").concat(l))}),(0,i.jsx)("div",{className:x()(p.sortingIndicator),children:"Worst"})]});return(0,i.jsxs)("div",{id:t,className:x()(p.outerWrapper),children:[(0,i.jsxs)("div",{className:x()(p.staticSection),children:[(0,i.jsx)("div",{className:x()(p.sectionTitle),children:s.staticHeader}),(0,i.jsx)("div",{className:x()(p.buttons),children:n.slice(0,s.draggableIndexStart).map(e=>{let{id:t,value:n,display:r}=e,s=o===n;return(0,i.jsx)("button",{id:t,className:x()(p.switchButton,{[p.selected]:s,[p.noPointerEvents]:s}),onClick:()=>{a(n)},children:(0,i.jsx)(F.x,{medium:!0,children:r})},"".concat(n,"_").concat(r))})})]}),(0,i.jsxs)("div",{className:x()(p.draggableSection),children:[(0,i.jsx)("div",{className:x()(p.sectionTitle),children:s.draggableHeader}),c?(0,i.jsxs)("div",{className:x()(p.draggableBody),children:[s.draggableDescription&&(0,i.jsx)("div",{children:s.draggableDescription}),(0,i.jsx)("div",{style:{margin:"16px 0",display:"flex",flexDirection:"row",justifyContent:"center"},children:renderDraggableButtons(!0)}),(0,i.jsxs)("div",{style:{float:"right"},children:[(0,i.jsx)(E.zx,{className:x()(p.generalButton),onClick:()=>u(!1),children:"Collapse"}),(0,i.jsx)(E.zx,{className:x()(p.generalButton),onClick:s.resetAction,children:"Reset"}),(0,i.jsx)(E.zx,{className:x()(p.generalButton,p.primaryButton),onClick:s.buttonAction,disabled:!!s.buttonDisabled,children:s.buttonTextPostToggle})]})]}):(0,i.jsxs)("div",{style:{display:"flex"},children:[renderDraggableButtons(!1),(0,i.jsx)(E.zx,{className:x()(p.generalButton,p.primaryButton),onClick:()=>u(!0),children:s.buttonTextPreToggle})]})]})]})};let L=(0,M.ZL)(e=>({outerWrapper:{display:"flex",flexDirection:"row"},staticSection:{display:"flex",flexDirection:"column"},draggableSection:{flexGrow:1,paddingLeft:"30px",display:"flex",flexDirection:"column"},sectionTitle:{fontWeight:"bold",color:e.colors.gray50,marginBottom:"10px"},buttons:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",background:e.colors.white,padding:2,borderRadius:e.spacing(1),boxShadow:e.containers.elevation1},draggableBody:{background:e.colors.white,padding:20,borderRadius:e.spacing(1),boxShadow:e.containers.elevation1,marginRight:e.containers.marginRightForElevation},sortingIndicator:{display:"inline-table",padding:"0 ".concat(e.spacing(2),"px")},switchButton:{display:"inline-table",color:e.colors.gray50,background:"transparent",minHeight:e.spacing(3.5),padding:"0 ".concat(e.spacing(2),"px"),borderRadius:e.spacing(1),border:"1px transparent solid",cursor:"pointer",boxSizing:"border-box","&:not(:last-child)":{marginRight:2}},selected:{color:e.palette.primary.main,borderColor:e.palette.primary.main},noPointerEvents:{pointerEvents:"none"},dragIcon:{color:e.colors.gray50,padding:"0 4px"},generalButton:{marginLeft:"12px"},primaryButton:{backgroundColor:e.colors.periwinkle100,color:e.colors.white}}));var Z=n(838877);let MultiTaskResponse=class MultiTaskResponse extends C.Component{componentDidMount(){!this.props.subtask.disableShortcuts&&this.props.responses&&(this.combokeys=new(v())(document.documentElement),this.updateComboKeys())}componentDidUpdate(e){e.responses.length!==this.props.responses.length&&this.updateComboKeys()}shouldComponentUpdate(e,t){return e.subtask.id===this.props.subtask.id||void 0===t.initialFrame||(this.setState({initialFrame:void 0}),!1)}componentWillUnmount(){this.combokeys&&this.combokeys.detach()}updateComboKeys(){if(this.combokeys){this.combokeys.reset();for(let e=0;e<this.props.responses.length;e++)this.combokeys.bind((e+1).toString(),()=>this.handleResponseIndexSelect(e))}}getCurAttempt(){var e;let t=this.props.responses[this.state.selectedIndex],n=null!==(e=this.props.subtask.attempts.find(e=>e._id===t.id))&&void 0!==e?e:this.props.subtask.attempts.slice(-1)[0];return"string"==typeof n?{_id:n,attemptedBy:n}:n}renderNav(){var e;return(0,i.jsxs)("div",{className:"jsx-63e7fdfb1cc67e17 nav-container",children:[this.state.openInstructionsModal&&(0,i.jsx)(A.Z,{subtask:this.props.subtask.id,openModal:this.state.openInstructionsModal,onClose:()=>this.setState({openInstructionsModal:!1}),labels:[],setSubmit:()=>{},readOnly:!0}),(0,i.jsx)("div",{className:"jsx-63e7fdfb1cc67e17 response-header",children:this.props.draggingOptions?(0,i.jsx)("div",{className:"jsx-63e7fdfb1cc67e17 nucleus-nav",children:(0,i.jsx)(Util_RapidDraggableSwitch,{values:this.props.responses.map((e,t)=>({id:t.toString(),display:e.displayName||e.name,value:t.toString(),order:e.order})),currentValue:this.state.selectedIndex.toString(),onSwitch:e=>this.handleResponseIndexSelect(parseInt(e)),draggingOptions:this.props.draggingOptions})}):(0,i.jsxs)("div",{className:"jsx-63e7fdfb1cc67e17 responses-nav",children:[j().map(this.props.responses,(e,t)=>{var n;return(0,i.jsxs)("div",{onClick:()=>this.handleResponseIndexSelect(t),className:"jsx-63e7fdfb1cc67e17 "+(x()("responses-nav-item",{isActive:this.state.selectedIndex===t,isInactive:this.state.selectedIndex!==t})||""),children:[e.name===m.DiffView.ProblemZones?this.renderProblemZonesTooltip():e.displayName||e.name,!this.props.subtask.disableShortcuts&&(0,i.jsx)(s.Z,{children:+t+1})]},null!==(n=e.name)&&void 0!==n?n:t)}),this.props.onRunValidators&&(0,i.jsx)(k.Z,{secondary:!0,className:"validator-icon",tooltipText:this.props.runningValidators?null:"Run Validators",onClick:this.props.onRunValidators,children:this.props.runningValidators?(0,i.jsx)(b.D8,{size:16}):(0,i.jsx)(r.FontAwesomeIcon,{icon:"play"})}),this.props.showCalibrationFeedback&&(0,i.jsx)(b.zx,{onClick:()=>this.setState({openInstructionsModal:!this.state.openInstructionsModal}),children:"Instruction feedback"}),(0,i.jsx)("div",{style:{flexGrow:1},className:"jsx-63e7fdfb1cc67e17"}),this.props.showTaskerPane&&this.props.subtask.attempts.length>0&&(0,i.jsx)(Task_TaskerContextPane,{attempt:this.getCurAttempt(),projectId:this.props.subtask.projectId,hideLifetimeEarnings:this.props.hideLifetimeEarnings,taskMetadata:this.props.subtask.taskMetadata,hideTaskerInfo:this.props.hideTaskerInfo},null===(e=this.getCurAttempt())||void 0===e?void 0:e.id)]})}),this.props.responseShortcuts&&(0,i.jsx)("div",{className:"jsx-63e7fdfb1cc67e17 response-shortcut-list",children:this.props.responseShortcuts.map((e,t)=>(0,i.jsxs)("a",{onClick:()=>e.onClick(),className:"jsx-63e7fdfb1cc67e17 "+(x()("response-shortcut")||""),children:[(0,i.jsx)(r.FontAwesomeIcon,{icon:e.faIcon})," \xa0",e.title]},t))}),(0,i.jsx)(a(),{id:"63e7fdfb1cc67e17",children:'.validator-icon: {margin-left:8,\n            min-width: 48,}.nav-container.jsx-63e7fdfb1cc67e17{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.response-header.jsx-63e7fdfb1cc67e17{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.response-shortcut-list.jsx-63e7fdfb1cc67e17{-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0;padding-right:16px}.response-shortcut.jsx-63e7fdfb1cc67e17{margin-left:8px}.nucleus-nav.jsx-63e7fdfb1cc67e17{margin-bottom:16px}.responses-nav.jsx-63e7fdfb1cc67e17{overflow:hidden;background:white;border-bottom:1px solid var(--color-RemoGray01);font-size:15px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;padding:0;height:52px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto}.responses-nav-item.jsx-63e7fdfb1cc67e17{position:relative;margin-right:12px;padding:0 8px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;min-width:100px}.responses-nav-item.isInactive.jsx-63e7fdfb1cc67e17{opacity:.5}.responses-nav-item.isActive.jsx-63e7fdfb1cc67e17{font-weight:bold;cursor:default}.responses-nav-item.isActive.jsx-63e7fdfb1cc67e17:after{z-index:1;top:100%;left:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none;border-color:rgba(255,255,255,0);border-top-color:#fff;border-width:16px;margin-left:-16px}'})]})}renderResponse(){var e,t,n,o,r,s;let m=null!==(e=this.props.responses[this.state.selectedIndex])&&void 0!==e?e:{};if(null==m?void 0:m.binary)return(0,i.jsxs)("div",{className:"jsx-84d33c5681f05097 binary",children:[(0,i.jsx)("strong",{className:"jsx-84d33c5681f05097 outcome",children:m.binary.outcome}),(0,i.jsx)(a(),{id:"84d33c5681f05097",children:".binary.jsx-84d33c5681f05097{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:var(--bg-gray-light-1)}.outcome.jsx-84d33c5681f05097{opacity:.25;font-size:24px}"})]});if(null==m?void 0:m.feedbackCommentMarkdown)return(0,i.jsxs)("div",{className:"jsx-295b9bdcbaf3a25e feedback",children:[(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:d.ZP.render(null==m?void 0:m.feedbackCommentMarkdown)},className:"jsx-295b9bdcbaf3a25e"}),(0,i.jsx)(a(),{id:"295b9bdcbaf3a25e",children:".feedback.jsx-295b9bdcbaf3a25e{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border-top:1px solid var(--color-RemoGray01);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:0;overflow:scroll;padding:32px}"})]});let g=(0,u.Hz)(this.props.subtask);m&&(g.fixResponse=m.response,g.lintResults=null===(t=m.confidenceScores)||void 0===t?void 0:t.lintResults,g.graderResponse=m.graderResponse,g.graderDiffResponse=m.graderDiffResponse,g.isFrameRejected=m.isFrameRejected,g.isAnswerKey=m.isAnswerKey,g.isCustomer=this.props.isCustomer,g.prepopulatedBreakdownColors=m.prepopulatedBreakdownColors,g.prepopulatedAttributeDefinitions=m.prepopulatedAttributeDefinitions,g.diffState=m.diffState),this.props.responses.length>0&&(g.taskerResponseInFeedback=this.props.responses[0].response),g.readOnly=j().get(this.props,"readOnly",!0),g.handleResponseSelect=this.handleResponseSelect,g.handleIdSelect=this.props.handleIdSelect,g.benchmarkPage=this.props.benchmarkPage,g.initializeInAdvancedView=!0,g.isReviewMode=!0,g.isPreviewMode=!0,g.showHeader=!1,g.config=g.config||this.props.config,g.auditCorruptions=this.props.auditCorruptions,g.multiTaskResponse=!0,g.previousGraderParams=this.props.subtask.graderParams,g.customDivHeight=this.props.customDivHeight,g.hideLabels=this.props.hideLabels,g.standalone=!1,g.isRealCustomerAudit=this.props.isRealCustomerAudit,g.isSpeedAudit=this.props.isSpeedAudit,this.props.taskTypeOverride&&(g.type=this.props.taskTypeOverride);let x=this.props.taskTypeOverride||this.props.subtask.type||this.props.subtask.taskType;if(g.forceLoadFromSnapshot=!0,g.cuboidPathSceneName=null==m?void 0:m.id,g.auditPerAnnotation=this.props.auditPerAnnotation,this.props.isSpeedAudit&&!this.props.readOnly&&(g.isPreviewMode=!1,g.onSubmit=this.props.onSubmit,g.setAutosaveRef=this.props.setAutosaveRef,g.fixable=!0,g.canReturnToQueue=!0,g.hideHeader=!0,g.attemptId=null===(n=this.getCurAttempt())||void 0===n?void 0:n.id),g.initialFrame=this.state.initialFrame,g.setInitialFrame=this.setInitialFrame,x===c.TaskType.MultiModalTranscription&&(g.showNER=this.state.showNER,g.setShowNER=e=>this.setState({showNER:e})),g.model_results_detail=this.props.subtask.model_results_detail,g.document_pages=this.props.subtask.attachmentS3Downloads?this.props.subtask.attachmentS3Downloads.filter(e=>e.isConvertedImage).map(e=>({height:e.metadata.height,width:e.metadata.width})):[],this.props.auditHeaderFooterInfo&&(g.auditHeaderFooterInfo={...this.props.auditHeaderFooterInfo,navBar:this.renderNav()}),this.props.taskTypeOverride===c.TaskType.TextCollection&&"fixed"===j().get(g,"customer_review_status")){let e=j().get(g,"responseHistory[0].response.annotations"),t=j().get(g,"fixResponse.annotations");if(e&&t){let n=[];for(let i of Object.keys(t))j().isEqualWith(null===(o=e[i])||void 0===o?void 0:o.response[0],null===(r=t[i])||void 0===r?void 0:r.response[0],(e,t,n)=>"signedUrl"===n||void 0)||n.push(i);for(let e of n)m.response.annotations[e].isFixed=!0}}x===c.TaskType.Chat&&g.params&&(g.params.defaultExpand=!0),m&&[c.TaskType.Chat,c.TaskType.ChatExperimental,c.TaskType.ChatV2,c.TaskType.TextCollection,c.TaskType.MultiChat].includes(x)&&(j().isNil(m.id)||(g.attemptId=m.id),j().isNil(m.attemptedAtReviewLevel)||(this.props.subtask.reviewLevel=m.attemptedAtReviewLevel),j().isNil(m.taskParamsFromV3Node)||(g.params=m.taskParamsFromV3Node));let f=(0,p.Z)(this.props.subtask,!!this.props.isRealCustomerAudit,m),v=!(0,h.isTaskType2D)(x)&&!(0,h.isVideoPlayback)(x)||x===c.TaskType.SegmentAnnotation,b="".concat(null!==(s=this.props.renderKey)&&void 0!==s?s:"").concat(v?j().get(m,"name"):"responseKey"),y=this.props.taskRef||null;return(0,i.jsxs)("div",{style:this.props.customDivHeight?{height:this.props.customDivHeight}:{},className:"jsx-becf2976f10d5183 responses__body",children:[(0,i.jsx)(C.Suspense,{fallback:null,children:(0,i.jsx)(Z.q,{assignment:f,render:e=>(0,i.jsx)(l.Z,{responseKey:b,taskType:x,taskProps:{...g,assignment:e,taskComponentClassName:this.props.taskComponentClassName},compact:!0,taskRef:y,hideLeftSidebar:this.props.hideLeftSidebar,isDocumentAIGo:this.props.isDocumentAIGo})})}),(0,i.jsx)(a(),{id:"becf2976f10d5183",children:".responses__body,.responses__body .task{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:0;overflow:auto;position:relative}"})]})}render(){return(0,i.jsxs)("div",{className:"jsx-d87537049d3b61e8 responses",children:[!this.props.auditHeaderFooterInfo&&this.renderNav(),this.renderResponse(),(0,i.jsx)(a(),{id:"d87537049d3b61e8",children:".responses.jsx-d87537049d3b61e8{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border-top:1px solid var(--color-RemoGray01);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:0;overflow:auto}"})]})}constructor(e){super(e),this.handleResponseIndexSelect=e=>{this.setState({selectedIndex:e}),this.props.onNavChange&&this.props.onNavChange(this.props.responses[e],e)},this.handleResponseSelect=e=>{let t=j().findIndex(this.props.responses,t=>t.name===e);t>-1&&this.handleResponseIndexSelect(t)},this.toggleProblemZonesInfo=()=>{this.setState({showingProblemZonesInfo:!this.state.showingProblemZonesInfo})},this.setInitialFrame=e=>{this.setState({initialFrame:e})},this.renderProblemZonesTooltip=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(y.u_,{maxWidth:"400px",isOpen:this.state.showingProblemZonesInfo,onRequestClose:this.toggleProblemZonesInfo,children:[(0,i.jsx)(y.xB,{onRequestClose:this.toggleProblemZonesInfo,children:"Problem Zones Info"}),(0,i.jsx)(y.fe,{children:"Show annotation errors. Extraneous annotations are blue, missing annotations are green, and annotations with incorrect labels/attributes/position are red."})]}),"Problem Zones"," ",(0,i.jsx)("div",{onClick:this.toggleProblemZonesInfo,style:{cursor:"pointer",paddingLeft:"5px"},children:(0,i.jsx)(r.FontAwesomeIcon,{icon:"info-circle"})})]}),this.state={selectedIndex:e.initialSelected||0,showingProblemZonesInfo:!1,initialFrame:void 0,showNER:!1,openInstructionsModal:!1}}};var z=MultiTaskResponse},838877:function(e,t,n){"use strict";n.d(t,{q:function(){return SupplementedMultiTaskResponseAssignmentWrapper}}),n(827378);var i=n(120440);let SupplementedMultiTaskResponseAssignmentWrapper=e=>{let{assignment:t,render:n}=e,o=(0,i.Z)(t);return n(o)}},384077:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(824246),o=n(827378),a=n(945530),r=n(588634),s=n(293030),l=n(167469),d=n(153737),c=n(401451),u=n(650963),p=n(318308),AudioCollectionAlpha_AudioCollectionPlayback=e=>{let[t,n]=(0,o.useState)(""),fetchAudioData=async()=>{if(!e.audioData)return;let t=await fetch(e.audioData),i=await t.blob(),o=URL.createObjectURL(i);n(o)};(0,o.useEffect)(()=>{fetchAudioData()},[]);let a=(0,i.jsx)("audio",{controls:!0,src:t});return(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("em",{children:"Text to read:"})," ",e.utterance||"!! Nothing given !!"]}),t?a:(0,i.jsx)("p",{children:"No response yet."})]})},h=n(659533),m=n(106525);let TaskComponent=e=>{let t=(0,o.useMemo)(()=>{let t={...e.taskProps};return t.scale_internal_attachment&&(t.params.attachment=t.scale_internal_attachment),t.scale_internal_attachments&&(t.params.attachments=t.scale_internal_attachments),t},[e]);return(0,i.jsx)(a.Z,{theme:r.Z,children:(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(s.Z,{style:{paddingBottom:"16px"}}),children:(()=>{var n,a,r,s;switch(e.taskType){case l.TaskType.AudioTranscription:return(0,i.jsx)(d.Gi,{...t,ref:e.taskRef});case l.TaskType.Categorization:if(t.params.binarySceneUrl)return(0,o.createElement)(FakeSensorFusionTask,{...t,key:e.responseKey});if(t.params.taxonomies){if((t.multiTaskResponse||e.isTaxonomyDisplay)&&!t.benchmarkPage)return(0,i.jsx)(d.b6,{...t,ref:e.taskRef,shouldShowFeedback:t.isAnswerKey});if(t.isReviewMode&&!t.benchmarkPage)return(0,i.jsx)(d.OK,{...t,ref:e.taskRef});if(e.responseKey&&!t.benchmarkPage)return(0,o.createElement)(d.MP,{...t,ref:e.taskRef,key:e.responseKey});return(0,o.createElement)(d.kq,{...t,key:e.taskProps._id,ref:e.taskRef,compact:e.compact})}return(0,i.jsx)(d.LO,{...t,ref:e.taskRef,responseKey:e.responseKey});case l.TaskType.Comparison:return(0,i.jsx)(d.FS,{...t,ref:e.taskRef});case l.TaskType.DataCollection:return(0,i.jsx)(d.kv,{...t,ref:e.taskRef});case l.TaskType.GenericDataCollection:return(0,i.jsx)(d.Vh,{...t,ref:e.taskRef});case l.TaskType.ImageAnnotation:case l.TaskType.PointAnnotation:case l.TaskType.LineAnnotation:case l.TaskType.Annotation:case l.TaskType.CuboidAnnotation:case l.TaskType.PolygonAnnotation:return(0,o.createElement)(d.B,{...t,ref:e.taskRef,key:e.taskProps._id,responseKey:e.responseKey,useMultiView:e.useMultiView,multiViewIndex:e.multiViewIndex,setMultiViewIndex:e.setMultiViewIndex,canSwitchMultiModal:e.canSwitchMultiModal});case l.TaskType.VideoAnnotation:case l.TaskType.VideoBoxAnnotation:case l.TaskType.VideoCuboidAnnotation:case l.TaskType.VideoPolygonAnnotation:return(0,o.createElement)(d.xe,{...t,ref:e.taskRef,key:e.responseKey});case l.TaskType.VideoPlaybackAnnotation:return(0,o.createElement)(d.sE,{...t,ref:e.taskRef,key:e.responseKey,responseKey:e.responseKey,useMultiView:e.useMultiView,setMultiViewIndex:e.setMultiViewIndex,canSwitchMultiModal:e.canSwitchMultiModal});case l.TaskType.SegmentAnnotation:return(0,o.createElement)(d.lb,{...t,ref:e.taskRef,key:e.responseKey});case l.TaskType.Transcription:return(0,i.jsx)(d._N,{...t,ref:e.taskRef});case l.TaskType.NamedEntityRecognition:if(e.isTaxonomyDisplay)return(0,i.jsx)(d.bs,{...t,ref:e.taskRef,responseKey:e.responseKey,showFooter:!1,compact:e.compact});return(0,i.jsx)(d.bs,{...t,ref:e.taskRef,responseKey:e.responseKey,compact:e.compact});case l.TaskType.TextCollection:if(t.fixResponse=(null===(n=t.fixResponse)||void 0===n?void 0:n.response)||t.fixResponse,e.isTaxonomyDisplay)return(0,o.createElement)(d.$I,{...t,ref:e.taskRef,key:e.responseKey,responseKey:"taxonomyDisplay",hideTextCollectionForm:e.hideTextCollectionForm,showResponseJson:e.showResponseJson});if(t.graderDiffResponse){let n={attachments:t.params.attachments,fields:t.params.fields};return(0,i.jsx)(u.Z,{params:n,responseKey:e.responseKey,graderDiffResponse:t.graderDiffResponse})}if(t.isReviewMode)return(0,o.createElement)(d.mY,{...t,ref:e.taskRef,key:e.responseKey,responseKey:e.responseKey,useMultiView:e.useMultiView,setMultiViewIndex:e.setMultiViewIndex,canSwitchMultiModal:e.canSwitchMultiModal});if(e.responseKey)return(0,o.createElement)(d.$I,{...t,ref:e.taskRef,key:e.responseKey,responseKey:e.responseKey,showResponseJson:e.showResponseJson});else if(t.isScaleStudio||t.isAuditMode||t.isWorkquests)return(0,o.createElement)(d.JO,{...t,projectConfig:null===(a=t.assignment)||void 0===a?void 0:a.config,ref:e.taskRef,key:e.responseKey,responseKey:e.responseKey});break;case l.TaskType.DocumentTranscription:if(t.isReviewMode&&!t.isCustomer)return(0,o.createElement)(d.wN,{...t,ref:e.taskRef,responseKey:e.responseKey,key:e.responseKey});if(t.isCustomer||t.isTaxonomyDisplay)return(0,o.createElement)(d.jK,{...t,ref:e.taskRef,responseKey:e.responseKey,key:e.responseKey,isDocumentAIGo:e.isDocumentAIGo});if(e.responseKey)return(0,i.jsx)(d.D5,{...t,ref:e.taskRef,responseKey:e.responseKey,attemptNum:e.attemptNum});if(t.isScaleStudio)return(0,o.createElement)(d.QH,{...t,ref:e.taskRef,key:e.responseKey,responseKey:e.responseKey});break;case l.TaskType.DocumentModel:{let{internal_task_params:{resultOutputEnabled:n=!1}={}}=t;if(n)return(0,o.createElement)(d.O2,{...t,ref:e.taskRef,responseKey:e.responseKey,key:e.responseKey,isModelAudit:!0});if(t.isCustomer)return(0,o.createElement)(d.jK,{...t,ref:e.taskRef,responseKey:e.responseKey,key:e.responseKey,isModelAudit:!0});return(0,o.createElement)(d.fB,{...t,ref:e.taskRef,responseKey:e.responseKey,key:e.responseKey})}case l.TaskType.LidarAnnotation:case l.TaskType.LidarSegmentation:case l.TaskType.MultiStage:case l.TaskType.SensorFusion:return(0,o.createElement)(FakeSensorFusionTask,{...t,key:e.responseKey});case l.TaskType.VideoCaptioning:return(0,o.createElement)(FakeVideoCaptioningTask,{...t,key:e.responseKey});case l.TaskType.AudioCollection:{let e=null===(r=t.fixResponse)||void 0===r?void 0:r.audioData;return(0,i.jsx)(AudioCollectionAlpha_AudioCollectionPlayback,{utterance:t.params.attachment,audioData:e})}case l.TaskType.MultiModalTranscription:return(0,o.createElement)(d.MM,{...t,ref:e.taskRef,key:e.responseKey,responseKey:e.responseKey});case l.TaskType.Chat:return(0,i.jsx)(d.JL,{...t,ref:e.taskRef,responseKey:e.responseKey});case l.TaskType.ChatExperimental:case l.TaskType.ChatV2:return(0,i.jsx)(m.Z,{children:(0,i.jsx)(d.bb,{...t,ref:e.taskRef,responseKey:e.responseKey})});case l.TaskType.MultiChat:return(0,i.jsx)(d.wo,{...t,ref:e.taskRef,responseKey:e.responseKey});case l.TaskType.SweAgent:return(0,i.jsx)(d.ib,{...t,ref:e.taskRef});case l.TaskType.DataCollectionV2:if((null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.application)===l.GDCTaskApplication.LidarLite)return(0,i.jsx)(FakeSensorFusionTask,{...t});return(0,i.jsx)(FakeDataCollectionV2Task,{...t,ref:e.taskRef});case l.TaskType.FrontierData:return(0,i.jsx)(c.Z,{params:t.params,previewParams:{type:"task",taskId:t._id}});default:{let n=(0,p.Z)(e.taskType,{workerFacing:!t.isCustomer});return(0,i.jsxs)("div",{style:{padding:"16px"},children:["No details available for ",(0,i.jsx)("strong",{children:n})," tasks."]})}}})()})})};TaskComponent.defaultProps={readOnly:!0};var g=TaskComponent;function FakeSensorFusionTask(e){if(o.useEffect(()=>{let t="",n=Object.fromEntries(new URLSearchParams(window.location.search).entries());e.task_id&&"subtask"!==e.assignmentType?t=(0,h.vI)({...n,taskId:e.task_id}):e.assignment&&e.assignment.assignmentId&&(t=(0,h.vI)({...n,sceneId:e.assignment.assignmentId})),t&&(window.location.href=t)},[]),e.currentAuditWorkId){let t=Object.fromEntries(new URLSearchParams(window.location.search).entries()),n=(0,h.vI)({...t,sceneId:e.currentAuditWorkId});return(0,i.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:"Open work in a new tab"})}return(0,i.jsx)("div",{children:"Loading lidar lite..."})}function FakeDataCollectionV2Task(e){let t="",n=Object.fromEntries(new URLSearchParams(window.location.search).entries());if(n.taskId){var o;t=(0,h.pc)({...n,...(null===(o=e.assignment)||void 0===o?void 0:o.isAudit)?{mode:"audit"}:{}})}return t&&(window.location.href=t),(0,i.jsx)("div",{children:"Loading data collection v2 tool..."})}function FakeVideoCaptioningTask(e){return o.useEffect(()=>{let t=Object.fromEntries(new URLSearchParams(window.location.search).entries()),n=(0,h.PS)({...t,taskId:e.task_id});n&&(window.location.href=n)},[]),(0,i.jsx)("div",{children:"Loading video captioning tool..."})}},614720:function(e,t,n){"use strict";n.d(t,{Z:function(){return design_system_Kbd}});var i=n(824246),o=n(674721),a=n.n(o);n(827378);var design_system_Kbd=e=>(0,i.jsxs)("kbd",{style:e.style,className:"jsx-bf0fad026d3b48ff kbd",children:[e.children,(0,i.jsx)(a(),{id:"bf0fad026d3b48ff",children:".kbd.jsx-bf0fad026d3b48ff{background-color:var(--color-RemoGray05);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;display:inline-block;margin:0 2px;padding:0 4px;min-width:20px;color:var(--color-RemoGray75);text-align:center;font-family:var(--font-family-code);font-weight:500;font-size:11px;text-transform:capitalize;line-height:20px;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.kbd.jsx-bf0fad026d3b48ff:hover{background-color:var(--color-RemoGray10);color:black}"})]})},731283:function(e,t,n){"use strict";n.d(t,{$Q:function(){return Bar},Sl:function(){return BarTrack},ZN:function(){return ProgressBarWrapper},ZP:function(){return d}});var i=n(824246),o=n(674721),a=n.n(o),r=n(827378),s=n(60042),l=n.n(s);let ProgressBarWrapper=class ProgressBarWrapper extends r.Component{render(){let{total:e,height:t}=this.props;return(0,i.jsxs)("div",{className:a().dynamic([["8e78d5814e51fb8",[t]]])+" progress-container",children:[r.Children.map(this.props.children,t=>t?r.cloneElement(t,{total:e}):null),(0,i.jsx)(a(),{id:"8e78d5814e51fb8",dynamic:[t],children:".progress-container.__jsx-style-dynamic-selector{width:100%;position:relative;height:".concat(t,"px}")})]})}};ProgressBarWrapper.defaultProps={total:1,height:8};let Bar=class Bar extends r.Component{render(){let{completed:e,total:t,fillColor:n,animation:o,icon:s}=this.props,d=Math.max(100*Math.min(e/t,1),.5);return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("div",{style:{width:"".concat(d,"%")},className:a().dynamic([["dc147bc1441236ac",[n]]])+" "+(l()("progress-fill",{animation:o})||"")}),s&&(0,i.jsx)("div",{style:{position:"absolute",left:"".concat(d+10,"%"),transition:"left 1s ease-in-out",transform:"translateX(-50%)"},className:a().dynamic([["dc147bc1441236ac",[n]]])+" "+(l()("icon-container",{animation:o})||""),children:s}),(0,i.jsx)(a(),{id:"dc147bc1441236ac",dynamic:[n],children:".progress-fill.__jsx-style-dynamic-selector{position:absolute;top:0;bottom:0;left:0;background:".concat(n,";-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;width:0;min-height:8px;min-width:8px}.progress-fill.animation.__jsx-style-dynamic-selector{-webkit-transition:width 1s ease-in-out;-moz-transition:width 1s ease-in-out;-o-transition:width 1s ease-in-out;transition:width 1s ease-in-out}.icon-container.__jsx-style-dynamic-selector{top:-50%}.icon-container.animation.__jsx-style-dynamic-selector{-webkit-animation:tilt 1s ease-in-out infinite;-moz-animation:tilt 1s ease-in-out infinite;-o-animation:tilt 1s ease-in-out infinite;animation:tilt 1s ease-in-out infinite}@-webkit-keyframes tilt{0%{-webkit-transform:translatex(-50%)rotate(0deg);transform:translatex(-50%)rotate(0deg)}25%{-webkit-transform:translatex(-50%)rotate(15deg);transform:translatex(-50%)rotate(15deg)}50%{-webkit-transform:translatex(-50%)rotate(-15deg);transform:translatex(-50%)rotate(-15deg)}75%{-webkit-transform:translatex(-50%)rotate(15deg);transform:translatex(-50%)rotate(15deg)}100%{-webkit-transform:translatex(-50%)rotate(0deg);transform:translatex(-50%)rotate(0deg)}}@-moz-keyframes tilt{0%{-moz-transform:translatex(-50%)rotate(0deg);transform:translatex(-50%)rotate(0deg)}25%{-moz-transform:translatex(-50%)rotate(15deg);transform:translatex(-50%)rotate(15deg)}50%{-moz-transform:translatex(-50%)rotate(-15deg);transform:translatex(-50%)rotate(-15deg)}75%{-moz-transform:translatex(-50%)rotate(15deg);transform:translatex(-50%)rotate(15deg)}100%{-moz-transform:translatex(-50%)rotate(0deg);transform:translatex(-50%)rotate(0deg)}}@-o-keyframes tilt{0%{-o-transform:translatex(-50%)rotate(0deg);transform:translatex(-50%)rotate(0deg)}25%{-o-transform:translatex(-50%)rotate(15deg);transform:translatex(-50%)rotate(15deg)}50%{-o-transform:translatex(-50%)rotate(-15deg);transform:translatex(-50%)rotate(-15deg)}75%{-o-transform:translatex(-50%)rotate(15deg);transform:translatex(-50%)rotate(15deg)}100%{-o-transform:translatex(-50%)rotate(0deg);transform:translatex(-50%)rotate(0deg)}}@keyframes tilt{0%{-webkit-transform:translatex(-50%)rotate(0deg);-moz-transform:translatex(-50%)rotate(0deg);-o-transform:translatex(-50%)rotate(0deg);transform:translatex(-50%)rotate(0deg)}25%{-webkit-transform:translatex(-50%)rotate(15deg);-moz-transform:translatex(-50%)rotate(15deg);-o-transform:translatex(-50%)rotate(15deg);transform:translatex(-50%)rotate(15deg)}50%{-webkit-transform:translatex(-50%)rotate(-15deg);-moz-transform:translatex(-50%)rotate(-15deg);-o-transform:translatex(-50%)rotate(-15deg);transform:translatex(-50%)rotate(-15deg)}75%{-webkit-transform:translatex(-50%)rotate(15deg);-moz-transform:translatex(-50%)rotate(15deg);-o-transform:translatex(-50%)rotate(15deg);transform:translatex(-50%)rotate(15deg)}100%{-webkit-transform:translatex(-50%)rotate(0deg);-moz-transform:translatex(-50%)rotate(0deg);-o-transform:translatex(-50%)rotate(0deg);transform:translatex(-50%)rotate(0deg)}}")})]})}};Bar.defaultProps={completed:0,total:1,fillColor:"var(--color-RemoGreen)",animation:!0};let BarTrack=class BarTrack extends r.Component{render(){let{backgroundColor:e,backgroundOpacity:t}=this.props;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)("div",{className:a().dynamic([["e1f8512eee68f1fc",[e,t]]])+" progress-track"}),(0,i.jsx)(a(),{id:"e1f8512eee68f1fc",dynamic:[e,t],children:".progress-track.__jsx-style-dynamic-selector{position:absolute;top:0;right:0;bottom:0;left:0;background:".concat(e,";opacity:").concat(t,";-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px}")})]})}};BarTrack.defaultProps={backgroundColor:"var(--color-RemoGray05)",backgroundOpacity:1};let ProgressBar=class ProgressBar extends r.Component{render(){let{completed:e,total:t,height:n,backgroundColor:o,backgroundOpacity:a,fillColor:r,animation:s,icon:l}=this.props;return(0,i.jsxs)(ProgressBarWrapper,{total:t,height:n,children:[(0,i.jsx)(BarTrack,{backgroundColor:o,backgroundOpacity:a}),(0,i.jsx)(Bar,{animation:s,fillColor:r,completed:e,icon:l})]})}};var d=ProgressBar},53326:function(e,t,n){"use strict";var i=n(824246);n(827378),t.Z=e=>(0,i.jsx)("svg",{viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{d:"M33.408 43.43a2 2 0 0 1-2.83 0L15.575 28.418a2 2 0 1 1 2.83-2.83l13.59 13.597 13.59-13.597a2.001 2.001 0 1 1 2.828 2.83z",fillRule:"evenodd"})})},133621:function(e,t,n){"use strict";var i=n(824246);n(827378),t.Z=e=>(0,i.jsx)("svg",{viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{d:"M45.617 38.454l-13.59-13.597-13.59 13.597a2 2 0 0 1-2.828-2.83l15.004-15.012a2 2 0 0 1 2.829 0l15.005 15.012a2 2 0 0 1-2.83 2.83z",fillRule:"evenodd"})})},36711:function(e,t,n){"use strict";n.d(t,{B:function(){return ProjectDisableReasonPicker}});var i=n(824246),o=n(827378),a=n(298784),r=n.n(a),s=n(165168),l=n(596956),d=n(925270),c=n(599789);let ProjectDisableReasonPicker=e=>{let{show:t,disabled:n,onClose:a,onConfirm:u}=e,[p,h]=(0,o.useState)(null);return(0,i.jsxs)(s.u_,{isOpen:t,children:[(0,i.jsx)(s.xB,{children:"Pick the project disable reason"}),(0,i.jsx)(s.fe,{children:(0,i.jsx)("div",{style:{textAlign:"center"},children:(0,i.jsxs)(d.Z,{disabled:n,onChange:e=>h(e.target.value),children:[(0,i.jsx)("option",{selected:!0,disabled:!0,value:"",children:"Select a reason"},0),r().values(c.ProjectDisableReason).map(e=>(0,i.jsx)("option",{value:e,children:c.ProjectDisableReasonFriendlyName[e]},e))]})})}),(0,i.jsxs)(s.mz,{children:[(0,i.jsx)(l.zx,{style:{margin:"0 10px"},disabled:n||!p,type:"primary",onClick:()=>u(p),children:"Confirm"}),(0,i.jsx)(l.zx,{style:{margin:"0 10px"},disabled:n,type:"secondary",onClick:()=>a(),children:"Cancel"})]})]})}},118811:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var i=n(824246),o=n(827378),a=n(723615),r=n.n(a),s=n(298784),l=n.n(s),d=n(206359),c=n(352991),u=n(165168),p=n(596956),h=n(674721),m=n.n(h),g=n(161320),x=n.n(g),f=n(824156),v=n(501561),b=n(268367),y=n(741173);let PermissionsTable=e=>{let t=e.data.filter(e=>e.job&&e.job.permissionGroup).map(e=>e.job.permissionGroup.name),renderCell=(e,t,n)=>{let i=e.column.readOnly&&e.column.readOnly(e);return"saved"===e.original.type&&!e.original.editable||i?n&&n(e.original,e.value)||e.value:t(e)},findCustomer=async e=>{try{if(e){let{users:t}=await (0,c.ZP)(null,"corp-api/find/customers",{query:{search:e}});return{options:t}}}catch(e){(0,c.vj)(e,{handleHttp:!0})}return{options:[]}},findTaskTypes=t=>e.taskTypes.filter(e=>e.value.match(t)),findGroup=async(e,n)=>{try{var i;let o=(await (0,c.ZP)(null,"internal/permissions/groups?name_prefix=".concat(e,"&task_type=").concat(n.taskType||"","&task_customer_id=").concat((null===(i=n.taskCustomer)||void 0===i?void 0:i.id)||"","&limit=100"))).filter(e=>!l().includes(t,e.name));return{options:o}}catch(e){return(0,c.vj)(e,{handleHttp:!0}),{options:[]}}},renderEditableSelect=(t,n)=>(o=>{let a=n.selectedValue?n.selectedValue(o.value):o.value,r={multi:!1,cache:null,value:a,className:n.required&&!a?"invalid":"",selectedValue:a,valueKey:n.value,labelKey:n.label,onChange:t=>{e.updatePermission(o.index,n.path||o.column.id,n.save?t[n.save]:t)}};return n.async?(0,i.jsx)(v.Z,{...r,autoload:void 0===n.autoload||n.autoload,loadOptions:e=>t(e,o.original.job)}):(0,i.jsx)(v.Z,{...r,options:t("",o.original.job)})}).bind(void 0),renderNumberInput=t=>(n=>(0,i.jsx)(p.oH,{type:"number",style:{minWidth:"100%"},...t,value:n.value,onChange:t=>{let i=t.target.value;e.updatePermission(n.index,n.column.id,i)}})).bind(void 0),CheckboxCell=t=>{let{index:n,value:o,original:a,column:r}=t;return(0,i.jsx)(p.o2,{checked:o,disabled:"saved"===a.type&&(void 0===a.editable||!a.editable),onClick:()=>e.updatePermission(n,r.id,!o),type:"checkbox",name:"empty"})},n=[{Header:"Enabled",accessor:"job.disabled",midWidth:10,Cell:e=>e.original.job.disabled?"NO":"yes"},{Header:"Task Type",accessor:"job.taskType",minWidth:150,filterable:!0,Cell:t=>t.original.job.permissionGroup||!e.loggedUserIsAdmin?t.original.job.permissionGroup&&t.original.job.permissionGroup.taskType||t.original.job.taskType:renderCell(t,renderEditableSelect(findTaskTypes,{label:"label",value:"value",save:"value",required:!0})),readOnly:e=>{let{original:t}=e;return"new"!==t.type||t.permissionGroup}},{Header:"Customer Email",show:e.loggedUserIsAdmin,accessor:"job.taskCustomer.email",width:280,filterable:!0,Cell:e=>e.original.job.permissionGroup?e.original.job.permissionGroup.taskCustomer.email||e.original.job.taskCustomer.email:renderCell(e,renderEditableSelect(findCustomer,{label:"email",value:"email",path:"job.taskCustomer",async:!0,selectedValue:e=>({email:e})}),(e,t)=>t||"(all)"),readOnly:e=>{let{original:t}=e;return"new"!==t.type||t.permissionGroup}},{Header:"Attempter",accessor:"job.canAttempt",filterable:!0,Cell:CheckboxCell,maxWidth:80,style:{textAlign:"center"}},{Header:"Reviewer",accessor:"job.canReview",filterable:!0,Cell:CheckboxCell,maxWidth:80,style:{textAlign:"center"}},{id:"job.taskCustomer.id",Header:"Customer Id",accessor:e=>e.job.taskCustomer&&e.job.taskCustomer.id||e.job.permissionGroup&&(e.job.permissionGroup.taskCustomer._id||e.job.permissionGroup.taskCustomer)||"(all)",filterable:!0,minWidth:180},{Header:"Review Level",accessor:"job.reviewLevel",filterable:!0,Cell:e=>renderCell(e,renderNumberInput({min:"0",max:"12"})),minWidth:80},{Header:"Review Sample Rate",show:e.loggedUserIsAdmin,accessor:"job.corpReviewSampleRate",filterable:!0,Cell:e=>renderCell(e,renderNumberInput({min:"0",max:"1",step:"0.01"})),minWidth:80},{Header:"Permission Group",accessor:"job.permissionGroup.name",filterable:!0,Cell:e=>{let t=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.R,{name:e.value,searchButton:!0}),renderCell(e,renderEditableSelect(findGroup,{label:"name",value:"name",autoload:!1,path:"job.permissionGroup",async:!0,selectedValue:e=>({name:e})}))]});return t},readOnly:e=>{let{original:t}=e;return"new"!==t.type},minWidth:180},{Header:"Last Use",show:!e.loggedUserIsAdmin,accessor:"job.lastActive",Cell:e=>{let{value:t}=e;return x().utc(t).format("MMM Do YY, h:mm:ss a")},minWidth:130},{Header:"Actions",sortable:!1,Cell:t=>{let{original:n,index:o}=t,a=[];return n.job.disabled?n.job.disabled&&a.push([n.enable?(0,i.jsx)(p.zx,{onClick:()=>e.cancelEnable(o),children:"Cancel Enable"},"cancelEnable"):(0,i.jsx)(p.zx,{onClick:()=>e.enablePermission(o),children:"Enable"},"enable")]):a.push([n.remove?(0,i.jsx)(p.zx,{onClick:()=>e.cancelRemove(o),children:"Cancel Disable"},"cancelRemove"):!n.editable&&(0,i.jsx)(p.zx,{onClick:()=>"new"===n.type?e.removeNew(o):e.removePermission(o),children:"new"===n.type?"Remove":"Disable"},"remove")]),(e.loggedUserIsAdmin||!n.job.disabled)&&a.push("new"!==n.type&&(n.editable?(0,i.jsx)(p.zx,{onClick:()=>e.cancelEditPermission(o),children:"Cancel Edit"},"cancelEdit"):!n.remove&&(0,i.jsx)(p.zx,{onClick:()=>e.editPermission(o),children:"Edit"},"edit"))),a},minWidth:150}];return(0,i.jsxs)("div",{className:"jsx-7aff4167e04bd27",children:[(0,i.jsx)(f.Z,{id:"".concat(e.scalerId,"PermissionTable"),loading:e.loading,data:e.data,resolveData:e=>e.map(e=>e),columns:n,pageSize:e.pageSize,className:"-striped -highlight",page:e.page,onPageChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,defaultFilterMethod:b.p,onFilteredChange:()=>e.onPageChange(0),getTrProps:(t,n,i)=>{let o=[];return n&&"new"===n.original.type&&o.push("new-job"),n&&n.original.remove&&o.push("to-remove"),n&&n.original.job.disabled&&o.push("disabled"),n&&n.original.enable&&o.push("to-enable"),n&&n.original.editable&&o.push("editable"),Object.assign({className:o.join(" ")},e.getTrProps&&e.getTrProps(t,n,i)||{})}}),(0,i.jsx)(m(),{id:"7aff4167e04bd27",children:".ReactTable{width:auto;height:auto}.Select{width:100%}.rt-tr.new-job .rt-td,.rt-tr.editable .rt-td{overflow:visible}.rt-tr.new-job,.rt-tr.new-job:hover{background-color:#f0ffe9!important}.rt-tr.to-remove,.rt-tr.to-remove:hover{background-color:#ffb9b4!important}.rt-tr.editable,.rt-tr.editable:hover{background-color:#feffd7!important}.rt-tr.disabled,.rt-tr.disabled:hover{background-color:#fb9!important}.rt-tr.to-enable,.rt-tr.to-enable:hover{background-color:#cff!important}.invalid .Select-control{border-color:red}"})]})};PermissionsTable.propTypes={scalerId:r().string.isRequired,loading:r().bool,data:r().array.isRequired,pageSize:r().number.isRequired,onPageChange:r().func.isRequired,onPageSizeChange:r().func.isRequired,getTrProps:r().func,taskTypes:r().array.isRequired,groups:r().array,updatePermission:r().func.isRequired,removeNew:r().func.isRequired,cancelRemove:r().func.isRequired,removePermission:r().func.isRequired,editPermission:r().func.isRequired,cancelEditPermission:r().func.isRequired};var w=n(36711);let TaskerPermissionsModal=class TaskerPermissionsModal extends o.Component{resetState(){this.setState({permissions:[],loading:!0,newJobs:[],toRemove:[],toEnable:[],edited:0,table:{page:0,pageSize:10},taskTypes:[],closingModalOpen:!1,savingModalOpen:!1,projectDisableReasonModalOpen:!1,currentDisableProjectIndex:null})}async fetchTasks(){let e=await (0,c.ZP)(null,"internal/permissions/jobs?worker_id=".concat(this.props.scaler.id)),t=e[0].enabledTaskPermissions.map(e=>({job:e,type:"saved"}));return this.props.filter&&(t=t.filter(e=>{var t;return!this.props.filter.permissionGroup||this.props.filter.permissionGroup===(null===(t=e.job.permissionGroup)||void 0===t?void 0:t._id)})),t}async componentDidMount(){await this.loadComponent()}async componentDidUpdate(e){!e.isModalOpen&&this.props.isModalOpen&&await this.loadComponent()}async loadComponent(){try{let e=await this.fetchTasks();this.setState({permissions:e,taskTypes:(0,d.Z)()})}catch(e){(0,c.vj)(e,{handleHttp:!0})}finally{this.setState({loading:!1})}}updatePermission(e,t,n){let i=e>=this.state.permissions.length,o=[...i?this.state.newJobs:this.state.permissions],a=i?e-this.state.permissions.length:e;l().set(o[a],t,n);let r={};r[i?"newJobs":"permissions"]=o,this.setState(r)}cancelRemove(e){let t=[...this.state.permissions];t.splice(e,1,{...t[e],remove:!1});let n={...this.state.toRemove};delete n["".concat(e)],this.setState({toRemove:n,permissions:t})}cancelEnable(e){let t=[...this.state.permissions];t.splice(e,1,{...t[e],enable:!1});let n={...this.state.toEnable};delete n["".concat(e)],this.setState({toEnable:n,permissions:t})}editPermission(e){let t=[...this.state.permissions];t.splice(e,1,{...t[e],editable:!0}),t[e].original={...t[e].job},this.setState({permissions:t,edited:this.state.edited+1})}cancelEditPermission(e){let t=[...this.state.permissions];t.splice(e,1,{...t[e],editable:!1}),t[e].job={...t[e].original},this.setState({permissions:t,edited:this.state.edited-1})}removeNew(e){let t=e-this.state.permissions.length,n=[...this.state.newJobs];n.splice(t,1),this.setState({newJobs:n})}removePermission(e){let t=[...this.state.permissions];t.splice(this.state.currentDisableProjectIndex,1,{...t[this.state.currentDisableProjectIndex],remove:!0,disableReason:e});let n={};n["".concat(this.state.currentDisableProjectIndex)]={...t[this.state.currentDisableProjectIndex]},this.setState({toRemove:{...this.state.toRemove,...n},permissions:t,projectDisableReasonModalOpen:!1,currentDisableProjectIndex:null})}enablePermission(e){let t=[...this.state.permissions];t.splice(e,1,{...t[e],enable:!0});let n={};n["".concat(e)]=t[e],this.setState({toEnable:{...this.state.toEnable,...n},permissions:t})}handleNewJob(){let e=this.state.newJobs.concat({job:{taskType:null,taskCustomer:{},canReview:!1,permissionGroup:null},type:"new"}),t=Math.floor((this.state.permissions.length+e.length-1)/this.state.table.pageSize);this.setState({newJobs:e,table:Object.assign(this.state.table,{page:t})})}hasChanges(){return!!this.state.edited||!!this.state.newJobs.length||!!Object.keys(this.state.toRemove).length||!!Object.keys(this.state.toEnable).length}handleClose(e){let t=this.hasChanges();if(e||!t)return this.resetState(),this.props.hideModal();this.setState({closingModalOpen:!e&&t})}async handleSave(e){if(!e)return this.setState({savingModalOpen:!0});this.setState({saving:!0});try{let formatPermissions=e=>e.map(e=>{let t={...e.job};return t.permissionGroup=t.permissionGroup&&t.permissionGroup._id||null,t.taskCustomer=t.taskCustomer&&t.taskCustomer.id||null,t.worker=this.props.scaler.id,t.disableReason=e.disableReason,l().pick(t,["worker","taskType","taskCustomer","permissionGroup","canAttempt","canReview","reviewLevel","corpReviewSampleRate","disableReason"])});await (0,c.ZP)(null,"internal/permissions/update",{method:"POST",body:{addPermissions:formatPermissions([...this.state.newJobs,...this.state.permissions.filter(e=>e.editable)]),enablePermissions:formatPermissions(l().values(this.state.toEnable)),removePermissions:formatPermissions(l().values(this.state.toRemove))}}),alert("Changes applied successfully!"),this.handleClose(!0)}catch(e){(0,c.vj)(e,{handleHttp:!0})}this.setState({saving:!1,savingModalOpen:!1})}render(){return(0,i.jsxs)(u.u_,{isOpen:this.props.isModalOpen,contentLabel:"Scaler Permission Modal",onRequestClose:()=>this.handleClose(),maxWidth:"1500px",children:[(0,i.jsxs)(u.xB,{onRequestClose:()=>this.handleClose(),children:["Enabled tasks for"," ","".concat(this.props.scaler.firstName||"-"," ").concat(this.props.scaler.lastName||"-"," (").concat(this.props.scaler.email,")")]}),(0,i.jsx)(u.fe,{children:(0,i.jsx)(PermissionsTable,{loggedUserIsAdmin:this.props.loggedUserIsAdmin||!1,scalerId:this.props.scaler.id,loading:this.state.loading,data:this.state.permissions.concat(this.state.newJobs),pageSize:this.state.table.pageSize,onPageChange:e=>this.setState({table:Object.assign(this.state.table,{page:e})}),page:this.state.table.page,onPageSizeChange:e=>this.setState({table:Object.assign(this.state.table,{pageSize:e})}),taskTypes:this.state.taskTypes,updatePermission:this.updatePermission.bind(this),removeNew:this.removeNew.bind(this),cancelRemove:this.cancelRemove.bind(this),removePermission:e=>this.setState({projectDisableReasonModalOpen:!0,currentDisableProjectIndex:e}),cancelEnable:this.cancelEnable.bind(this),enablePermission:this.enablePermission.bind(this),editPermission:this.editPermission.bind(this),cancelEditPermission:this.cancelEditPermission.bind(this)})}),(0,i.jsxs)(u.mz,{children:[(0,i.jsx)(p.zx,{type:"button",onClick:this.handleNewJob.bind(this),children:"Add New"}),(0,i.jsx)(p.zx,{type:"button",onClick:()=>this.handleSave(),disabled:!this.hasChanges()||!this.state.newJobs.reduce((e,t)=>e&&(!!t.job.taskType||!!t.job.permissionGroup),!0),children:"Save and Close"}),(0,i.jsx)(p.zx,{type:"button",onClick:()=>this.handleClose(),children:"Close"})]}),(0,i.jsx)(w.B,{show:this.state.projectDisableReasonModalOpen,disabled:!1,onConfirm:e=>this.removePermission(e),onClose:()=>this.setState({projectDisableReasonModalOpen:!1,currentDisableProjectReason:"",currentDisableProjectIndex:null})},this.state.currentDisableProjectIndex),(0,i.jsxs)(u.u_,{isOpen:this.state.closingModalOpen,contentLabel:"Scaler Permission Modal",onRequestClose:this.props.hideModal,maxWidth:"1280px",children:[(0,i.jsx)(u.xB,{onRequestClose:()=>this.setState({closingModalOpen:!1}),children:"You're about to close without saving changes"}),(0,i.jsxs)(u.fe,{children:[(0,i.jsx)(p.__,{children:"You're about to close this permission without saving your pending changes:"}),(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:["New Items: ",this.state.newJobs.length]}),(0,i.jsxs)("li",{children:["Updated Items: ",this.state.edited]}),(0,i.jsxs)("li",{children:["To Disable: ",Object.keys(this.state.toRemove).length]}),(0,i.jsxs)("li",{children:["To Enable: ",Object.keys(this.state.toEnable).length]})]}),(0,i.jsx)(p.__,{children:"Are you sure to lose your changes?"})]}),(0,i.jsxs)(u.mz,{children:[(0,i.jsx)(p.zx,{type:"button",onClick:()=>this.handleClose(!0),children:"Yes, I'm Sure"}),(0,i.jsx)(p.zx,{type:"button",onClick:()=>this.setState({closingModalOpen:!1}),children:"No"})]})]}),(0,i.jsxs)(u.u_,{isOpen:this.state.savingModalOpen,contentLabel:"Scaler Permission Modal",onRequestClose:this.props.hideModal,maxWidth:"1280px",children:[(0,i.jsx)(u.xB,{onRequestClose:()=>this.setState({savingModalOpen:!1}),children:"You're about to save your changes"}),(0,i.jsxs)(u.fe,{children:[(0,i.jsx)(p.__,{children:"This is a brief of your changes:"}),(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:["New Items: ",this.state.newJobs.length]}),(0,i.jsxs)("li",{children:["Updated Items: ",this.state.edited]}),(0,i.jsxs)("li",{children:["To Disable: ",Object.keys(this.state.toRemove).length]}),(0,i.jsxs)("li",{children:["To Enable: ",Object.keys(this.state.toEnable).length]})]}),(0,i.jsx)(p.__,{children:"Do you want to continue and save it?"})]}),(0,i.jsxs)(u.mz,{children:[(0,i.jsx)(p.zx,{type:"button",disabled:this.state.saving,onClick:()=>this.handleSave(!0),children:"Yes, Go ahead"}),(0,i.jsx)(p.zx,{type:"button",disabled:this.state.saving,onClick:()=>this.setState({savingModalOpen:!1}),children:"No"})]})]})]})}constructor(...e){super(...e),this.state={permissions:[],loading:!0,newJobs:[],toRemove:[],toEnable:[],edited:0,table:{page:0,pageSize:10},taskTypes:[],closingModalOpen:!1,savingModalOpen:!1,projectDisableReasonModalOpen:!1,currentDisableProjectIndex:null}}};TaskerPermissionsModal.propTypes={isModalOpen:r().bool.isRequired,hideModal:r().func.isRequired,scaler:r().object,filter:r().object};var j=TaskerPermissionsModal},749323:function(e,t,n){"use strict";n.d(t,{Z:function(){return Attachment}});var i=n(824246),o=n(674721),a=n.n(o),r=n(298784),s=n.n(r),l=n(827378),d=n(599789),c=n(320280),u=n(60042),p=n.n(u);let h=(0,c.ZL)({wrapperOriginalDimensions:{overflow:"auto",position:"relative"},imageOriginalDimensions:{maxWidth:"none"},wrapperDefaultDimensions:{paddingRight:36}});var task_attachment_image=e=>{let{imageUrl:t,imageDesc:n="",onLoadOrError:o,keepOriginalDimensions:a=!0,children:r}=e,s=h();return a?(0,i.jsxs)("div",{className:p()(s.wrapperOriginalDimensions,"task-attachment__item branded-scroll"),children:[(0,i.jsx)("div",{children:n}),(0,i.jsx)("img",{className:s.imageOriginalDimensions,onLoad:()=>{o(!0)},onError:()=>{o(!1)},src:t}),r]}):(0,i.jsxs)("div",{className:s.wrapperDefaultDimensions,children:[(0,i.jsx)("div",{children:n}),(0,i.jsx)("img",{className:"task-attachment__item",onLoad:()=>{o(!0)},onError:()=>{o(!1)},src:t}),r]})},m=n(924364);let g=(0,c.ZL)({attachmentMarkdown:{"& tr":{border:"1px solid rgba(0, 0, 0, 0.3)"},"& tr:nth-child(even)":{backgroundColor:"#f2f2f2"},"& th":{border:"1px solid rgba(255, 255, 255, 0.3)",padding:"6px 10px",backgroundColor:"#222",color:"white"},"& td":{border:"1px solid rgba(0, 0, 0, 0.3)",padding:"10px"}}});var task_attachment_text=e=>{let{text:t,onLoadOrError:n}=e,o=g();return(0,l.useEffect)(()=>{if(n)return n(!0)}),(0,i.jsx)("div",{className:o.attachmentMarkdown,dangerouslySetInnerHTML:{__html:m.ZP.render(t)}})},x=n(554616),f=n(692975),audio=e=>{let{audioUrl:t,onLoadOrError:n}=e;return(0,i.jsx)(f.Z,{onError:()=>{n(!1)},onReady:()=>{n(!0)},height:24,className:"task-attachment__item",url:t,playing:!0,controls:!0})},v=n(107873);let b=(0,c.ZL)({attachmentWebsite:{flex:"0 0 100%",height:"70vh"},websiteToolbar:{display:"flex",width:"100%",marginBottom:"20px"},websiteInstruction:{width:"100%",height:"100%"},instructionsMarkdown:{"& iframe":{width:"100%",height:"100%",minHeight:"700px"}},divider:{margin:"12px 0",borderTop:"3px solid gray"}});var website=e=>{let{startingUrl:t,instruction:n,onOpenWebsite:o}=e,a=b(),r=(0,l.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e;return 0===t.indexOf("http://")&&n&&(i=e.replace("http://","https://")),-1===t.indexOf("http://")&&-1===t.indexOf("https://")&&(i=n?"https://".concat(i):"http://".concat(i)),i},[t]),[s,d]=(0,l.useState)(r(t,!1));return(0,l.useEffect)(()=>{d(r(t,!1))},[t,r]),(0,i.jsxs)("div",{className:a.attachmentWebsite,children:[(0,i.jsx)("div",{className:a.websiteToolbar,children:(0,i.jsx)(v.zx,{onClick:()=>{window.open(s,"_blank"),o&&o()},children:"Open in new tab"})}),n&&(0,i.jsxs)("div",{className:a.websiteInstruction,children:[(0,i.jsx)("br",{}),(0,i.jsx)("div",{className:a.divider}),(0,i.jsx)("br",{}),(0,i.jsx)("h1",{children:"Instruction"}),(0,i.jsx)("div",{className:a.instructionsMarkdown,dangerouslySetInnerHTML:{__html:m.ZP.render(n)}})]})]})};let y=(0,c.ZL)({wrapper:{flex:"0 0 100%",height:"70vh"}});var mesh=function(e){var t,n,o;let a=y(),r=null===(o=e.assignment)||void 0===o?void 0:null===(n=o.params)||void 0===n?void 0:null===(t=n.context)||void 0===t?void 0:t.referenceWebsite;return(0,i.jsxs)("div",{className:a.wrapper,children:[(0,i.jsx)("h2",{children:"Mesh Annotation"}),(0,i.jsxs)("p",{children:["View the mesh by opening the following link:"," ",(0,i.jsx)("a",{href:"/lidarlite/?qaMeshId=".concat(e.id),target:"_blank",rel:"noopener noreferrer",children:"Open Mesh View"})]}),r&&(0,i.jsxs)("p",{children:["Open the"," ",(0,i.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:"reference website"})," ","to get an idea of what the mesh should look like"]}),(0,i.jsx)("p",{children:"Then, answer the questions about the mesh, and how it relates to the reference images"})]})},pdf=e=>{let{pdfUrl:t,onLoadOrError:n}=e;return(0,i.jsx)("object",{onLoad:()=>{n(!0)},onError:()=>{n(!1)},className:"task-attachment__item task-attachment__item--embed",type:"application/pdf",data:t})},w=n(781601),pinterest=e=>{let t,{attachmentJson:n}=e,[o,r]=l.useState(null),[d,c]=l.useState(null),u=l.useRef(null),p=l.useMemo(()=>{try{return JSON.parse(n)}catch(e){return null}},[n]),h=l.useMemo(()=>Math.random(),[p]);if(l.useEffect(()=>{let e=document.createElement("script");return e.src="//assets.pinterest.com/js/pinit.js",e.async=!0,document.body.appendChild(e),()=>{s().keys(window).forEach(e=>{e.startsWith("PIN_")&&delete window[e]});let t=e.parentElement;t&&t.removeChild(e)}},[p]),l.useEffect(()=>{let e=u.current,t=e&&e.querySelector("#pinterest-image");t&&(t.naturalWidth&&t.naturalHeight?r({width:t.naturalWidth,height:t.naturalHeight}):t.onload=()=>{r({width:t.naturalWidth,height:t.naturalHeight})})},[p,u.current]),l.useEffect(()=>{let e=u.current;c(e&&{width:e.clientWidth,height:e.clientHeight})},[o,u.current]),!p)return null;let m=!!p.bounding_box&&s().some(s().values(p.bounding_box)),g=0,x=0,f=0,v=0;!m&&o?(f=o.width-6,v=o.height-6,g=3,x=3):m&&(g=p.bounding_box.x,x=p.bounding_box.y,f=p.bounding_box.width,v=p.bounding_box.height);let b=o&&d&&d.width/o.width;return b&&b*o.height>d.height&&(t=(b=d.height/o.height)*o.width),(0,i.jsxs)("div",{className:a().dynamic([["689e19c49a72695b",[t&&"min-width: ".concat(t.toString()).concat("px;"),t&&"max-width: ".concat(t.toString()).concat("px;")]],["a26a3bf97e53fe1c",[o?"inherit":"hidden","red"]]])+" container",children:[(0,i.jsxs)("div",{className:a().dynamic([["689e19c49a72695b",[t&&"min-width: ".concat(t.toString()).concat("px;"),t&&"max-width: ".concat(t.toString()).concat("px;")]],["a26a3bf97e53fe1c",[o?"inherit":"hidden","red"]]]),children:[(0,i.jsxs)("div",{className:a().dynamic([["689e19c49a72695b",[t&&"min-width: ".concat(t.toString()).concat("px;"),t&&"max-width: ".concat(t.toString()).concat("px;")]],["a26a3bf97e53fe1c",[o?"inherit":"hidden","red"]]])+" label-text",children:["Image with ",(0,i.jsx)("span",{className:a().dynamic([["689e19c49a72695b",[t&&"min-width: ".concat(t.toString()).concat("px;"),t&&"max-width: ".concat(t.toString()).concat("px;")]],["a26a3bf97e53fe1c",[o?"inherit":"hidden","red"]]])+" box-text",children:"highlighted area"}),":"]}),(0,i.jsxs)("div",{id:"image-container",ref:u,className:a().dynamic([["689e19c49a72695b",[t&&"min-width: ".concat(t.toString()).concat("px;"),t&&"max-width: ".concat(t.toString()).concat("px;")]],["a26a3bf97e53fe1c",[o?"inherit":"hidden","red"]]]),children:[(0,i.jsx)(w.Z,{className:"magnifier-wrapper",id:"pinterest-image",src:"".concat(p.image_url,"?").concat(h)}),o&&b&&(0,i.jsx)("svg",{width:"100%",style:{position:"relative",pointerEvents:"none",minHeight:o.height*b,minWidth:o.width*b,top:-o.height*b},className:a().dynamic([["689e19c49a72695b",[t&&"min-width: ".concat(t.toString()).concat("px;"),t&&"max-width: ".concat(t.toString()).concat("px;")]],["a26a3bf97e53fe1c",[o?"inherit":"hidden","red"]]]),children:(0,i.jsx)("rect",{width:f*b,height:v*b,x:g*b,y:x*b,style:{fill:"rgba(0,0,0,0)",stroke:"red",strokeWidth:3},className:a().dynamic([["689e19c49a72695b",[t&&"min-width: ".concat(t.toString()).concat("px;"),t&&"max-width: ".concat(t.toString()).concat("px;")]],["a26a3bf97e53fe1c",[o?"inherit":"hidden","red"]]])})})]})]}),(0,i.jsxs)("div",{className:a().dynamic([["689e19c49a72695b",[t&&"min-width: ".concat(t.toString()).concat("px;"),t&&"max-width: ".concat(t.toString()).concat("px;")]],["a26a3bf97e53fe1c",[o?"inherit":"hidden","red"]]])+" pin-container",children:[(0,i.jsx)("div",{className:a().dynamic([["689e19c49a72695b",[t&&"min-width: ".concat(t.toString()).concat("px;"),t&&"max-width: ".concat(t.toString()).concat("px;")]],["a26a3bf97e53fe1c",[o?"inherit":"hidden","red"]]])+" label-text",children:"Pin:"}),(0,i.jsx)("a",{"data-pin-do":"embedPin","data-pin-width":"medium",href:"https://www.pinterest.com/pin/".concat(p.pin_id,"/"),className:a().dynamic([["689e19c49a72695b",[t&&"min-width: ".concat(t.toString()).concat("px;"),t&&"max-width: ".concat(t.toString()).concat("px;")]],["a26a3bf97e53fe1c",[o?"inherit":"hidden","red"]]])})]}),(0,i.jsx)(a(),{id:"a26a3bf97e53fe1c",dynamic:[o?"inherit":"hidden","red"],children:".pin-container.__jsx-style-dynamic-selector{width:400px}.container.__jsx-style-dynamic-selector{visibility:".concat(o?"inherit":"hidden",";display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}#image-container.__jsx-style-dynamic-selector{min-width:400px;max-width:800px;margin-right:40px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;max-height:-webkit-calc(100vh - 104px - 140px);max-height:-moz-calc(100vh - 104px - 140px);max-height:calc(100vh - 104px - 140px)}.box-text.__jsx-style-dynamic-selector{color:").concat("red","}.label-text.__jsx-style-dynamic-selector{margin-bottom:8px;font-weight:500}")}),(0,i.jsx)(a(),{id:"689e19c49a72695b",dynamic:[t&&"min-width: ".concat(t.toString()).concat("px;"),t&&"max-width: ".concat(t.toString()).concat("px;")],children:".magnifier-wrapper{position:relative}#pinterest-image{position:relative;".concat(t&&"min-width: ".concat(t.toString()).concat("px;"),"\n          ").concat(t&&"max-width: ".concat(t.toString()).concat("px;"),"\n          border-radius: 5px;max-height:-webkit-calc(100vh - 104px - 140px);max-height:-moz-calc(100vh - 104px - 140px);max-height:calc(100vh - 104px - 140px)}")})]})},j=n(137131),k=n.n(j);let C=["www.youtube.com"];var iframe=e=>{let{iframeUrl:t}=e;if(!t)return null;let n=k().parse(t).hostname,o=!n||!C.includes(n);return(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("iframe",{width:"560",height:"315",src:t,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:o?"":void 0})})};let Attachment=class Attachment extends l.Component{render(){var e;let t=this.props.attachmentType,n=s().includes([d.AttachmentType.Text,d.AttachmentType.Pinterest],t)?this.props.attachment:-1===((e=this.props.attachment)||"").indexOf("://")?"http://"+e:e,o={[d.AttachmentType.Image]:(0,i.jsx)(task_attachment_image,{keepOriginalDimensions:this.props.keepOriginalDimensions,imageDesc:this.props.attachmentDesc,imageUrl:n,onLoadOrError:this.props.onLoadOrError,children:this.props.children},n),[d.AttachmentType.Text]:(0,i.jsx)(task_attachment_text,{text:n,onLoadOrError:this.props.onLoadOrError},n),[d.AttachmentType.Video]:(0,i.jsx)(x.Z,{videoUrl:n,onLoadOrError:this.props.onLoadOrError},n),[d.AttachmentType.Audio]:(0,i.jsx)(audio,{audioUrl:n,onLoadOrError:this.props.onLoadOrError},n),[d.AttachmentType.Website]:(0,i.jsx)(website,{startingUrl:n,instruction:this.props.instruction,onOpenWebsite:this.props.onOpenWebsite},n),[d.AttachmentType.PDF]:(0,i.jsx)(pdf,{pdfUrl:n,onLoadOrError:this.props.onLoadOrError},n),[d.AttachmentType.Pinterest]:(0,i.jsx)(pinterest,{attachmentJson:n}),[d.AttachmentType.IFrame]:(0,i.jsx)(iframe,{iframeUrl:n}),[d.AttachmentType.Mesh]:(0,i.jsx)(mesh,{...this.props.task})}[t];if(!o)return(0,i.jsxs)("div",{children:["Attachment type ",t," not supported!"]});let r=null;return s().includes([d.AttachmentType.Text,d.AttachmentType.Website,d.AttachmentType.Pinterest,d.AttachmentType.IFrame,d.AttachmentType.JSON,d.AttachmentType.Mesh],t)||(r=(0,i.jsx)("div",{className:"task-attachment__header",children:(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:n,children:"Open attachment link in new window"})})),(0,i.jsxs)("div",{className:"jsx-5f1ce5140337cc24 task-attachment",children:[(0,i.jsx)(a(),{id:"5f1ce5140337cc24",children:".task-attachment__item{width:100%}.task-attachment{margin:24px;min-width:200px;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;width:100%;height:100%}.task-attachment__item--embed{min-height:600px}.task-attachment__item--video{max-width:920px}.task-attachment__header{padding:12px 0}"}),o,r]})}}},554616:function(e,t,n){"use strict";var i=n(824246),o=n(674721),a=n.n(o),r=n(827378),s=n(692975),l=n(330754),d=n.n(l),c=n(293030),u=n(279220),p=n(138944),h=n(436878),m=n(320280);let g={topbar:{position:"absolute",left:"40px",top:"12px",display:"flex",flexDirection:"row"},caption:{background:"#FFFFFF",boxShadow:"0px 3px 12px rgba(0, 0, 0, 0.15)",borderRadius:"4px",textAlign:"center",paddingLeft:"8px",paddingRight:"8px",paddingTop:"4px",paddingBottom:"4px",margin:"4px"},spinner:{position:"absolute",height:"100%",width:"100%"},copyButton:{position:"absolute",left:"12px",top:"12px"}};t.Z=e=>{let{srcVideoUrl:t,onLoadOrError:n,caption:o="",onEnded:l,onPlay:x=()=>{},onPause:f=null,allowFileDownload:v=!1,allowPlaybackRate:b=!1,forceFullscreen:y=!1,onlyVisibleOnLoadComplete:w=!1,preventSkip:j=!1,maximumExtraPlayingTime:k,disableThumbnail:C=!1,playing:A=!1,skipSourceVideoLoadingCheck:T=!1,onlyPlayWhenFullscreen:S=!1,disableVideoScaling:I=!1,showCopyCurrentTimeButton:P=!1}=e,D={file:{attributes:{controlsList:"".concat(!v&&"nodownload"," ").concat(!b&&"noplaybackrate")}}},N=(0,r.useRef)(),[R,B]=(0,r.useState)(0),[M,F]=(0,r.useState)(!1),[E,L]=(0,r.useState)(0),[Z,z]=(0,r.useState)(!1),{loading:O,value:H,error:V}=(0,u.Z)(async()=>{if(!w&&T)return t;let e=await fetch(t);if(!e.ok)throw await l(),Error("Failed to load src content");if(!w)return t;{let t=await e.blob();return URL.createObjectURL(t)}},[t]),[U,W]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(U){let e=setTimeout(()=>W(!1),1e3);return()=>clearTimeout(e)}},[U]),(0,i.jsxs)("div",{className:a().dynamic([["a7e6d4532a7d3598",[h.Et]]])+" task-attachment__item task-attachment__item--video",children:[O&&(0,i.jsx)("div",{style:g.spinner,className:a().dynamic([["a7e6d4532a7d3598",[h.Et]]]),children:(0,i.jsx)(c.Z,{})}),!O&&!V&&(0,i.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",visibility:"visible"},className:a().dynamic([["a7e6d4532a7d3598",[h.Et]]])+" "+((0,p.default)(I&&"player-container")||""),children:(0,i.jsx)(s.Z,{ref:N,style:{position:"absolute",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center"},width:"100%",height:"100%",light:!!C&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mPM+w8AAeEBb2u5MeEAAAAASUVORK5CYII=",playing:!Z&&(C||A),onStart:()=>{L(Math.round(Date.now()/1e3)),n(!0)},onPlay:()=>{z(!1),x&&x(),y&&d().isEnabled&&!d().isFullscreen&&d().request(N.current.wrapper)},onPause:()=>{f&&f(),y&&d().isEnabled&&d().isFullscreen&&d().toggle()},onError:function(){F(!1),n(!1),l()},onSeek:()=>{if(j&&!M){let e=N.current.getCurrentTime()-R;e>.01&&N.current.seekTo(R,"seconds")}},onProgress:e=>{let{playedSeconds:t}=e;if(j&&!M){let e=N.current.getCurrentTime()-R;e>3||S&&!d().isFullscreen?(N.current.seekTo(R,"seconds"),z(!0)):B(t)}else S&&!d().isFullscreen?(N.current.seekTo(R,"seconds"),z(!0)):B(t)},onEnded:()=>{if(C&&N.current.showPreview(),y&&d().isEnabled&&!S&&d().toggle(),k){let e=Math.round(Date.now()/1e3)-E+k;if(R>e){alert("Playback of this video took significantly longer than its duration.\n Please close other tabs and processes, then refresh the task.");return}}F(!0),l()},url:H,controls:!0,config:D})}),P&&(0,i.jsx)(m.zx,{type:U?"success":"primary",style:g.copyButton,onClick:()=>{var e;let t=null===(e=N.current)||void 0===e?void 0:e.getCurrentTime();t||(t=R),navigator.clipboard.writeText(t.toString()),W(!0)},children:U?"Copied":"Copy current time"}),V&&(0,i.jsx)("div",{style:g.topbar,className:a().dynamic([["a7e6d4532a7d3598",[h.Et]]]),children:(0,i.jsx)("div",{style:g.caption,className:a().dynamic([["a7e6d4532a7d3598",[h.Et]]]),children:"Failed to load video. Please try refreshing."})}),Z&&(0,i.jsx)("div",{style:g.topbar,className:a().dynamic([["a7e6d4532a7d3598",[h.Et]]]),children:(0,i.jsx)("div",{style:g.caption,className:a().dynamic([["a7e6d4532a7d3598",[h.Et]]]),children:"You have to go fullscreen to view this video."})}),!!o&&(0,i.jsx)("div",{style:g.topbar,className:a().dynamic([["a7e6d4532a7d3598",[h.Et]]]),children:(0,i.jsx)("div",{style:g.caption,className:a().dynamic([["a7e6d4532a7d3598",[h.Et]]]),children:o})}),(0,i.jsx)(a(),{id:"a7e6d4532a7d3598",dynamic:[h.Et],children:".player-container.__jsx-style-dynamic-selector video{width:unset!important;height:unset!important;max-width:100%;max-height:100%}@media(max-width:".concat(h.Et,"){.task-attachment__item--video.__jsx-style-dynamic-selector{height:400px}}")})]})}},401451:function(e,t,n){"use strict";var i=n(824246);n(827378);var o=n(93988),a=n(759276),r=n(359183),s=n(893836);t.Z=e=>{let{params:t,previewParams:n}=e,l=(0,s.S)({externalAppName:t.externalAppName});return(0,i.jsx)("div",{className:"h-full flex justify-center items-center",children:(0,i.jsx)(o.Z,{children:(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:["pipelinev3humannode"===n.type&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.xv,{size:"2",color:"neutral",children:["Node ID: ",n.nodeId]}),(0,i.jsx)(r.z,{asChild:!0,size:"2",children:(0,i.jsx)(a.rU,{href:"".concat(l,"/review/").concat(n.nodeId),target:"_blank",children:"View in external app"})})]}),"task"===n.type&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.xv,{size:"2",color:"neutral",children:["Task ID: ",n.taskId]}),(0,i.jsx)(r.z,{asChild:!0,size:"2",children:(0,i.jsx)(a.rU,{href:"".concat(l,"/task/").concat(n.taskId),target:"_blank",children:"View in external app"})})]})]})})})}},893836:function(e,t,n){"use strict";n.d(t,{S:function(){return useExternalAppBaseUrl},V:function(){return useExternalAppUrl}});let i="app.outlier.ai",useExternalAppUrl=e=>{let{externalAppName:t,assignmentId:n}=e;return function(e){let{externalAppName:t,hostname:n,assignmentId:i}=e,o=getExternalAppBaseUrl({externalAppName:t,hostname:n});return"".concat(o,"/assignment/").concat(i)}({externalAppName:t,hostname:location.hostname,assignmentId:n})};function getExternalAppBaseUrl(e){let{externalAppName:t,hostname:n}=e,o="localhost"===location.hostname;if(o&&(n=i),!["dashboard.scale.com","remotasks.com",i].includes(n))throw Error("Unknown hostname for external app: ".concat(t));return"https://".concat(t,".").concat(n)}let useExternalAppBaseUrl=e=>{let{externalAppName:t}=e;return getExternalAppBaseUrl({externalAppName:t,hostname:location.hostname})}},660725:function(e,t,n){"use strict";n.d(t,{SC:function(){return MultipartFileUpload},ZP:function(){return Uploader},m0:function(){return validateUploadedData}});var i=n(824246),o=n(298784),a=n.n(o),r=n(731283),s=n(433536),l=n(827378),d=n(242095),c=n(711719),u=n.n(c),p=n(320280),h=n(272966),m=n(829389),g=n(963494),x=n(9983),f=n(153279),v=n(161320),b=n.n(v);n(606023);var y=n(148339),w=n.n(y),j=n(514206),k=n.n(j),C=n(715456),A=n.n(C),T=n(5575),hooks_useCDSMultipartUpload=(e,t)=>{let n=(0,l.useCallback)(async n=>{let{file:i,onProgress:o,onComplete:a,onError:r}=n,s=i.size,l=i.type,{cdsUrl:c,partUrls:u,uploadId:p}=await (0,d.fetchApi)("/multipartupload/startCDSMultipartUpload",{body:{attachmentSize:s,contentType:l,subtaskId:e},maxRetries:3,method:"POST",parseAndHandle:!0,redirectOnUnauthorized:!0}),h=[];for(let e=0;e<u.length;e++){let t=20971520*e,n=(e+1)*20971520;h.push(i.slice(t,n))}let m={"content-type":"application/octet-stream"},g=0,x=await A()(u,async(n,i)=>{let a=n,s=i+1;for(let n=0;n<20;n++)try{let e=await k().put(a,h[i],{headers:m,maxBodyLength:1/0,maxContentLength:1/0});if(e.status<200||e.status>299)throw Error("Response for upload of partUrl ".concat(a," was not successful, status code: ").concat(e.status));let t=e.headers.etag;return g+=1/u.length,o&&o(g),{eTag:t,partNumber:s}}catch(o){console.warn("Attempt ".concat(n," to upload ").concat(a," failed with ").concat(JSON.stringify(o),", retrying...")),(0,T.dO)(Error("Error occurred during frontend CDS GenericDataCollectionAttempt uploading, try number ".concat(n,". Error is: ").concat(JSON.stringify(o))),"genericdatacollection",{subtaskId:e,userId:t,e:o}),new Promise(e=>setTimeout(e,1e3));let{partUrl:i}=await (0,d.fetchApi)("/multipartupload/retrieveCDSPartUrl",{body:{cdsUrl:c,partNumber:s,uploadId:p,subtaskId:e},maxRetries:3,method:"POST",parseAndHandle:!0,redirectOnUnauthorized:!0});a=i;continue}throw r&&r("Failed upload. Please retry."),Error("Failed upload. Please retry.")},{concurrency:100});return await (0,d.fetchApi)("/multipartupload/completeCDSMultipartUpload",{body:{uploadId:p,parts:x,subtaskId:e},maxRetries:3,method:"POST",parseAndHandle:!0,redirectOnUnauthorized:!0}),a&&a(c),c},[e]),i=(0,l.useCallback)(async e=>{let{name:t,file:i,onProgress:o,onComplete:a,onError:r}=e;if(!t||!i)throw Error("Name and file must be provided to upload a file");return n({file:i,onProgress:o,onComplete:a,onError:r})},[n]);return{upload:i}},S=n(350344),I=n.n(S),GenericDataCollection_GenericDataCollectionAudioRecorder=e=>{let[t,n]=(0,l.useState)(!1),[o,a]=(0,l.useState)(!1),r=(0,l.useRef)([]),[s,c]=(0,l.useState)(0),p=(0,l.useRef)(null),[h,m]=(0,l.useState)("Start Recording"),[g,v]=(0,l.useState)([]),[y,j]=(0,l.useState)(0),k=hooks_useCDSMultipartUpload(e.assignmentId,e.userId);(0,l.useEffect)(()=>{let e=null;return t?e=setInterval(()=>{j(e=>e+1)},1e3):t||clearInterval(e),()=>clearInterval(e)},[t]);let setErrMsg=e=>{v(t=>[...t,e])},recordAudioFromUserMedia=()=>{let e=["audio/webm","audio/mp4"],t={};if(window.MediaRecorder){if(!MediaRecorder.isTypeSupported){setErrMsg("No MediaRecorder.isTypeSupported function");return}}else setErrMsg("No MediaRecorder!");let n="";for(let t of e)if(MediaRecorder.isTypeSupported(t)){n=t;break}if(!n){setErrMsg("Unsupported types for MediaRecorder: ".concat(e));return}t.mimeType=n;try{navigator.mediaDevices?navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e=>{let n=new MediaRecorder(e,t);n.onstart=()=>{m("Start Recording")},n.ondataavailable=e=>{m("Recording In Progress - Getting Data"),e.data.size>0&&r.current.push(e.data)},n.onstop=()=>{m("Stopped Recording - Press to Upload"),c(r.current.length),e.getTracks().forEach(e=>e.stop())},p.current=n,p.current.start(200)}).catch(e=>{setErrMsg("Error during getUserMedia Promise then: ".concat(e))}):setErrMsg("No getUserMedia function"):setErrMsg("No navigator.mediaDevices")}catch(e){setErrMsg("Error during getUserMedia: ".concat(e))}};(0,l.useEffect)(()=>{t?(m("Getting Devices"),recordAudioFromUserMedia()):r.current.length&&(p.current?"recording"===p.current.state&&p.current.stop():setErrMsg("Missing MediaRecorder when trying to stop"))},[t]);let onProgress=t=>{e.setUploadProgress(100*t)},validateAndFetchSignedUrl=async t=>{e.setUploadProgress(100);let n=await (0,d.fetchApi)("/multipartupload/getSignedCDSUrl",{body:{cdsUrl:t,subtaskId:e.assignmentId},maxRetries:3,method:"POST",parseAndHandle:!0,redirectOnUnauthorized:!0});return n.signedDataUrl},onError=t=>{j(0),e.setUploadProgress(0),e.setSignedDataUrl(""),m("Audio Recording Upload Failed")},C=e.getPreprocessFn(e.dataToCollect),handleSubmitAudio=async()=>{a(!0);let t=await (0,f.H)(r.current),n=await w()(t),i=new File([n],u().v4(),{type:"audio"});C(i,async t=>{let n=i.name,o=await k.upload({name:n,file:t,onProgress,onComplete:I(),onError});e.onUploadComplete({signedDataUrl:await validateAndFetchSignedUrl(o),unsignedDataUrl:o,unsignedS3DataUrl:"",fileId:n,contentType:t.type,dataIndex:e.fileIndex,dataChunkIndex:e.dataToCollect.data_chunks?e.fileChunkIndex:void 0})}),j(0),m("Validating Requirements, Restart if Pop-up"),r.current=[],c(0),a(!1)};return(0,i.jsxs)(l.Fragment,{children:[(0,i.jsx)(x.Z,{isRecording:t,isSubmitting:o,blobLength:s,recordedChunks:r,handleToggleRecording:()=>{n(!t)},handleDeleteAudio:()=>{m("Deleting Audio, Please Record Again"),j(0),r.current=[],c(0)},handleSubmitAudio:handleSubmitAudio}),h&&(0,i.jsxs)("p",{children:["Recording Status: ",h]}),(0,i.jsxs)("p",{children:["Time Elapsed: ",b().duration(y,"seconds").format("HH:mm:ss",{trim:!1})]}),g.length>0&&g.map((e,t)=>(0,i.jsx)("p",{style:{background:"tomato",color:"white"},children:e},t))]})},P=n(792739),D=n(837553),N=n(973645),R=n.n(N),B=n(232337),M=n(830816),F=n(459025),E=n(352991),L=n(204864),Z=n(642830),hooks_useMultipartUpload=(e,t)=>{let[n,i]=(0,l.useState)(""),[o,a]=(0,l.useState)(null),[r,s]=(0,l.useState)(""),d=(0,l.useCallback)(e=>(t,n,i,o,a)=>{let r=decodeURIComponent(i),s=r.split("\n")[2],[l,d]=s.split("/");return new Promise(function(t){let n=["AWS4".concat(e),l,d,"s3","aws4_request",r].reduce((e,t)=>{let n=B.createHmac("sha256",e).update(t);return t===r?n.digest("hex"):n.digest()});t(n)})},[]),c=(0,l.useCallback)(()=>{if(!e||!t)throw Z.Z.warn("subtaskId and userId must be provded for useMultipartUpload"),Error("subtaskId and userId must be provded for useMultipartUpload");return(0,E.ZP)(null,"internal/multipartupload/getAwsCreds",{method:"GET",query:{subtaskId:e}})},[e,t]),u=(0,l.useCallback)(async()=>{try{var e;let t=await c();i(t.awsSessionToken);let n=await R().create({aws_key:t.awsAccessKey,bucket:t.awsBucket,awsRegion:t.awsRegion,partSize:6291456,logging:!1,customAuthMethod:d(t.awsSecretKey),awsSignatureVersion:"4",computeContentMd5:!0,cryptoMd5Method:e=>B.createHash("md5").update(M.Buffer.from(e)).digest("base64"),cryptoHexEncodedHash256:e=>B.createHash("sha256").update(M.Buffer.from(e)).digest("hex"),signHeaders:{"X-CSRF-Token":null!==(e=F.get("_csrf"))&&void 0!==e?e:"blank"}});return a(n),s(t.awsBucket),n}catch(e){a(null)}},[d,c]);(0,l.useEffect)(()=>{u()},[e,u]);let p=(0,l.useCallback)(i=>{let{name:a,file:s,onProgress:l,onComplete:d,onError:c}=i;if(!a||!s)throw Error("Name and file must be provided to upload a file");if(!o)throw Error("Multipart Upload hook is not initialized");let u={"x-amz-security-token":n},p="".concat(e,"/dc_uploads/").concat(t,"/").concat(a);o.add({name:p,file:s,xAmzHeadersCommon:u,xAmzHeadersAtInitiate:u,progress:l,complete:d,error:c});let h=(0,L.toS3Url)(r,p);return h},[o,r,n,e,t]);return{initialized:!!o,upload:p}};let z={[g.TextCollectionAttachmentType.Image]:"image/*",[g.TextCollectionAttachmentType.Video]:"video/*",[g.TextCollectionAttachmentType.Audio]:"audio/*",[g.TextCollectionAttachmentType.Text]:"text/*"},MultipartFileUpload=e=>{var t;let n=(0,l.useRef)(null),[r,s]=(0,l.useState)(!1),[c,h]=(0,l.useState)(!1);(0,m.Z)(0!==e.uploadProgress&&100!==e.uploadProgress,"Are you sure you want to leave the page? Your data has not finished uploading.");let x=(0,D.ZP)("dc-use-s3-multipart-upload",{projectId:e.projectId},!1),f=(0,D.ZP)("files-upload-shared-bucket",{userId:e.userId},!1),v=hooks_useCDSMultipartUpload(e.assignmentId,e.userId),b=hooks_useMultipartUpload(e.assignmentId,e.userId),y=getPreprocessFn(e.dataToCollect),onS3UploadComplete=async(t,n)=>{if(!await validatePostUploadRequirements(n)){onError("");return}e.setUploadProgress(100);let i=await (0,d.fetchApi)("/multipartupload/getSignedUrl",{body:{awsObjectKey:n,subtaskId:e.assignmentId},maxRetries:3,method:"POST",parseAndHandle:!0,redirectOnUnauthorized:!0});e.setSignedDataUrl(i.signedDataUrl)},onProgress=t=>{e.setUploadProgress(100*t)},validateAndFetchSignedUrl=async t=>{if(!await validatePostUploadRequirements(t)){onError("");return}e.setUploadProgress(100);let n=await (0,d.fetchApi)("/multipartupload/getSignedCDSUrl",{body:{cdsUrl:t,subtaskId:e.assignmentId},maxRetries:3,method:"POST",parseAndHandle:!0,redirectOnUnauthorized:!0});return n.signedDataUrl},onError=t=>{e.setUploadProgress(0),e.setSignedDataUrl(""),alert(t)},validatePostUploadRequirements=async e=>{s(!0);let t=await validateFPSRequirement(e);return s(!1),t},validateFPSRequirement=async t=>{var n,i;if(e.dataToCollect.type!==g.TextCollectionAttachmentType.Video)return!0;let o=null===(i=e.dataToCollect)||void 0===i?void 0:null===(n=i.requirements)||void 0===n?void 0:n.frames_per_second;if(!o)return!0;let r=await (0,d.fetchApi)("/genericdatacollection/get_attachment_metadata",{body:{cdsUrlOrS3KeySuffix:t,subtaskId:e.assignmentId},maxRetries:3,method:"POST",parseAndHandle:!0,redirectOnUnauthorized:!0}),s=r.attachmentMetadata;if(!s)return alert("Video metadata unable to be determined."),!1;let l=s.video.fps,{min:c,max:u}=o,p=(a().isNil(c)||c<=l)&&(a().isNil(u)||u>=l);return p||alert("FPS of uploaded video does not satisfy requirements. ".concat(c?"Min FPS Req: ".concat(c," |"):""," ").concat(u?"Max FPS Req: ".concat(u," |"):""," Uploaded Video FPS: ").concat(l)),p};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{ref:n,type:"file",accept:null!==(t=z[e.dataToCollect.type])&&void 0!==t?t:"",onChange:()=>{var t,i;(null===(i=n.current)||void 0===i?void 0:null===(t=i.files)||void 0===t?void 0:t[0])&&y(n.current.files[0],async t=>{var n,i;let a=(null===(n=e.fileInfo)||void 0===n?void 0:n.fileId)||u().v4();h(!0);try{if(x){let n=b.upload({name:a,file:t,onProgress,onComplete:onS3UploadComplete,onError});e.setFileInfo({unsignedDataUrl:n,unsignedS3DataUrl:"",fileId:a,contentType:t.type})}else if(f){let n=new FormData;n.append("asset",t),n.append("assignmentId",null!==(i=e.assignmentId)&&void 0!==i?i:"");let o=await (0,E.ZP)(null,"internal/contentUnderstanding/fileUpload/".concat("test"),{method:"POST",body:n});if("error"===o.type)throw Error(o.errors.join(", "));let{url:r,s3Url:s}=o;e.setFileInfo({unsignedDataUrl:r,unsignedS3DataUrl:s,fileId:a,contentType:t.type})}else{let n=await v.upload({name:a,file:t,onProgress,onComplete:o.noop,onError});e.onUploadComplete({signedDataUrl:await validateAndFetchSignedUrl(n),unsignedDataUrl:n,unsignedS3DataUrl:"",fileId:a,contentType:t.type,dataIndex:e.fileIndex,dataChunkIndex:e.isCollectedInChunks?e.fileChunkIndex:void 0})}}catch(t){onError("Error occured while uploading - please try again. If the problem persists, contact support. Error is ".concat(t)),(0,T.dO)(Error("Error occurred during frontend GenericDataCollectionAttempt uploading."),"genericdatacollection",{subtaskId:e.assignmentId,userId:e.userId,e:t})}finally{h(!1)}})},disabled:!!x&&!b.initialized}),(r||c)&&(0,i.jsx)(p.D8,{})]})},getPreprocessFn=e=>(t,n)=>validateUploadedData(e,t,n,!0,()=>{}),validateUploadedData=(e,t,n,i,o)=>{let r=[],s=e.requirements;if(!s)return n(t),o(!0);let validateSize=(t,n,i,o)=>{if(i){let{min:n,max:o}=i;(!a().isNil(n)&&n>t||!a().isNil(o)&&o<t)&&r.push(constructValidationMessage(e.name,"width","px",t,n,o))}if(o){let{min:t,max:i}=o;(!a().isNil(t)&&t>n||!a().isNil(i)&&i<n)&&r.push(constructValidationMessage(e.name,"height","px",n,t,i))}},validateDuration=(t,n)=>{if(n){let{min:i,max:o}=n;(!a().isNil(i)&&i>t||!a().isNil(o)&&o<t)&&r.push(constructValidationMessage(e.name,"length","seconds",t,i,o))}},validateOrientation=(t,n,i)=>{if(i){let{require_portrait:o,require_landscape:a}=i;(o&&t>n||a&&t<n)&&r.push(constructOrientationValidationMessage(e.name,o&&t>n?"portrait":"landscape",n,t))}},alertOrUpload=()=>{let e=r.join("\n");a().isEmpty(e)?(n(t),o(!0)):(i&&alert(e),o(!1,e))};(t=>{let{filename:n}=s;if(n){let{regex:i,display_regex:o,extension:s}=n;if(i&&!new RegExp(i).test(t.name)&&r.push(constructFilenameValidationMessage(e.name,t.name,i,o)),s){let n=a().last(t.name.split("."));if(n!==s){let t="The file extension of the upload for ".concat(e.name," needs to be ").concat(s," but was ").concat(n,".");r.push(t)}}}})(t),e.type===g.TextCollectionAttachmentType.Video?(t=>{if(!t.type.startsWith("video")){alert("Selected file is not a video file!");return}let n=document.createElement("video");n.src=window.URL.createObjectURL(t),n.onloadedmetadata=o=>{window.URL.revokeObjectURL(n.src);let{videoWidth:a,videoHeight:r,duration:l}=n,{width_pixels:d,height_pixels:c,duration_seconds:u,orientation:p}=s;0===a&&0===r&&i?alert("The following message is NOT an error.\nIf you think your video is correct, please ignore this message :)\n\nVideo ".concat(t.name," (the upload for ").concat(e.name,") is encoded in HEVC format so we are not able to validate the video upload - please make sure that you're recording with the correct settings (full HD if required, for example).\n\nRefer to https://apple.stackexchange.com/questions/409977/where-to-view-photo-and-movie-metadata-on-ios/409992#409992 (iPhone), https://thetechhacker.com/2018/10/29/how-to-check-video-resolution-and-frame-rate-on-windows-10/ (Windows computer), or https://www.wikihow.com/Check-the-Quality-of-a-Video(Mac) (Mac computer) to find out how to check the width/height of the video before uploading.")):validateSize(a,r,d,c),validateDuration(l,u),validateOrientation(a,r,p),alertOrUpload()}})(t):e.type===g.TextCollectionAttachmentType.Audio?(e=>{if(!e.type.startsWith("audio")){alert("Selected file is not an audio file!");return}let t=document.createElement("audio");t.src=window.URL.createObjectURL(e),t.onloadedmetadata=e=>{window.URL.revokeObjectURL(t.src);let{duration:n}=t,{duration_seconds:i}=s;validateDuration(n,i),alertOrUpload()}})(t):e.type===g.TextCollectionAttachmentType.Image?(e=>{if(!e.type.startsWith("image")){alert("Selected file is not an image file!");return}let t=document.createElement("img");t.src=window.URL.createObjectURL(e),t.onload=e=>{window.URL.revokeObjectURL(t.src);let{width:n,height:i}=t,{width_pixels:o,height_pixels:a,orientation:r}=s;validateSize(n,i,o,a),validateOrientation(n,i,r),alertOrUpload()}})(t):alertOrUpload()},constructValidationMessage=(e,t,n,i,o,r)=>"The ".concat(t," of the upload for ").concat(e," is ").concat(i).concat(n,", but ").concat(a().isNil(o)?"":"a min ".concat(t," of ").concat(o).concat(n)).concat(a().isNil(o)||a().isNil(r)?"":" and ").concat(a().isNil(r)?"":"a max ".concat(t," of ").concat(r).concat(n)," is required."),constructOrientationValidationMessage=(e,t,n,i)=>"The orientation of the upload for ".concat(e," needs to be ").concat(t,", but the height of ").concat(n,"px is ").concat("landscape"===t?"greater than":"less than"," the width of ").concat(i,"px."),constructFilenameValidationMessage=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return"The filename ".concat(t," of the upload for ").concat(e," ").concat(i?"needs to match the following format but does not: "+n:"is invalid",".")},O=(0,s.ZL)({hidden:{display:"none"},visible:{},header:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"8px 16px"},headerTitle:{fontSize:"16px",fontWeight:500},uploadField:{paddingLeft:16,paddingRight:32},fileField:{display:"flex",justifyContent:"space-between"},successMessage:{color:"#00cc00"},inProgressMessage:{color:"#ff9900"},failureMessage:{color:"#ff0000"},auxiliaryRecordingMethods:{paddingTop:20},uploadDisabled:{pointerEvents:"none",color:"grey",paddingRight:12},uploadEnabled:{pointerEvents:"auto",paddingRight:12}});var Uploader=e=>{let t=O(),[n,o]=(0,l.useState)(""),sendSamlRequest=async t=>{let n=new URL(window.location.href),i="https://www.remotasks.com";"localhost"===n.hostname&&(i="http://localhost:3000"),window.location.href="".concat(i,"/internal/dc-saml-auth?fileIndex=").concat(t,"&subtaskId=").concat(e.subtaskId)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:t.header,children:(0,i.jsxs)("h3",{className:t.headerTitle,children:["Upload ",e.attachments[e.currentAttachmentIndex].type," (",e.attachments[e.currentAttachmentIndex].caption,")",a().isEmpty(e.objectCategory)?"":"of ".concat(e.objectCategory)]})}),(0,i.jsx)("div",{className:t.uploadField,children:e.dataToCollect.map((s,l)=>{var d,c,u,m,x,f;let v=l!==e.currentAttachmentIndex,b=!!s.data_chunks,y=null===(d=s.deep_link)||void 0===d?void 0:d.collectorSuppliedVrsTaskIdRegex,w=!1;y&&new RegExp(y).test(n)&&(w=!0);let j=s.samlConfig,k=j&&e.currentAttachmentIndex===l&&(0,i.jsx)("div",{children:(0,i.jsxs)(p.zx,{style:{marginLeft:10},onClick:()=>sendSamlRequest(l),type:"secondary",children:[(0,i.jsx)("span",{style:{marginRight:3},children:" Click to Record "}),(0,i.jsx)(P.FontAwesomeIcon,{icon:"eye",size:"lg"})]})}),C=(null===(c=s.deep_link)||void 0===c?void 0:c.collectorSuppliedVrsTaskIdRegex)&&!w,A=e.generateDeepLink&&e.currentAttachmentIndex===l&&s.deep_link&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"Upload with deep link"}),e.isAttachmentUploadComplete(l)&&(0,i.jsx)("span",{children:(0,i.jsxs)(p.zx,{style:{marginLeft:10},onClick:()=>e.fetchExternalAttachmentsOnComplete(l),type:"secondary",children:[(0,i.jsx)("span",{style:{marginRight:3},children:" Click to load your videos! "}),(0,i.jsx)(P.FontAwesomeIcon,{icon:"eye",size:"lg"})]})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("a",{href:e.generateDeepLink(l,s.deep_link,n),className:C?t.uploadDisabled:t.uploadEnabled,children:"Click To Record"}),s.deep_link.collectorSuppliedVrsTaskIdRegex&&(0,i.jsx)(h.Z,{onChange:e=>{o(e.target.value)},rows:1,value:n,disabled:!1,helperText:a().isEmpty(n)?"Paste the recording ID":w?"":"Invalid recording ID, paste again",error:!w})]})]}),T=(0,i.jsxs)("div",{className:v?t.hidden:t.visible,children:[A,k,(null!==(f=null===(u=e.fileInfos[l])||void 0===u?void 0:u.dataChunkInfo)&&void 0!==f?f:[null===(m=e.fileInfos)||void 0===m?void 0:m[l]]).map((n,o)=>{var d,c,u,h,m,x;let f=null!==(x=null!==(m=null===(d=s.data_chunks)||void 0===d?void 0:d[o])&&void 0!==m?m:null===(c=s.data_chunks)||void 0===c?void 0:c[0])&&void 0!==x?x:s,v=a().get(e.uploadProgresses[l],o),y=(null!=v?v:0).toFixed(4),setDataChunkInfo=t=>{if(b){let n=a().cloneDeep(e.fileInfos[l]);n||(n={unsignedDataUrl:"",fileId:"",contentType:""}),n.dataChunkInfo||(n.dataChunkInfo=a().times(s.data_chunks.length,a().constant(void 0))),n.dataChunkInfo[o]=t,e.setFileInfo(n,l)}else e.setFileInfo(t,l)},setSignedDataUrl=t=>{b?e.setSignedDataUrl(t,l,o):e.setSignedDataUrl(t,l)},setUploadProgress=t=>{e.setUploadProgress(t,l,o)},w=null===(h=e.ingestionActionProgresses)||void 0===h?void 0:null===(u=h[l])||void 0===u?void 0:u[o];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{padding:"8px",paddingTop:"16px"},children:[b&&(0,i.jsx)("div",{children:(0,i.jsxs)(p.zx,{type:"info",onClick:()=>{var t,n,i,a,r,s;let d=b?null===(a=e.fileInfos)||void 0===a?void 0:null===(i=a[l])||void 0===i?void 0:null===(n=i.dataChunkInfo)||void 0===n?void 0:null===(t=n[o])||void 0===t?void 0:t.signedDataUrl:null===(s=e.fileInfos)||void 0===s?void 0:null===(r=s[l])||void 0===r?void 0:r.signedDataUrl;e.setSignedDataUrl(null!=d?d:"",l,b?o:void 0)},children:["Show ","".concat(f.name," - #").concat(o+1)]})}),!s.deep_link&&(0,i.jsx)(MultipartFileUpload,{projectId:e.projectId,dataToCollect:f,userId:e.userId,assignmentId:e.assignmentId,setSignedDataUrl:setSignedDataUrl,setFileInfo:setDataChunkInfo,fileInfo:n,uploadProgress:v,setUploadProgress:setUploadProgress,onUploadComplete:e.onUploadComplete,fileIndex:l,fileChunkIndex:o,isCollectedInChunks:b},"".concat(l,"-").concat(o))]}),(0,i.jsx)("div",{children:(0,i.jsx)(r.ZP,{completed:v,total:100,animation:!0})}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("b",{children:" Progress: "})," ",(0,i.jsxs)("i",{children:[" ",y," / 100.0000 "]})]}),w&&(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:" Details: "}),(0,i.jsx)("span",{className:w.success?w.stage===w.maxStages?t.successMessage:t.inProgressMessage:t.failureMessage,children:(0,i.jsx)("b",{children:w.message})})]}),(0,i.jsx)("div",{className:t.auxiliaryRecordingMethods,children:s.type===g.TextCollectionAttachmentType.Audio&&(0,i.jsx)(GenericDataCollection_GenericDataCollectionAudioRecorder,{userId:e.userId,assignmentId:e.assignmentId,dataToCollect:f,setSignedDataUrl:setSignedDataUrl,setFileInfo:setDataChunkInfo,uploadProgress:v,setUploadProgress:setUploadProgress,getPreprocessFn:getPreprocessFn,onUploadComplete:e.onUploadComplete,fileIndex:l,fileChunkIndex:o})})]})}),s.concatenate_chunks&&s.data_chunks&&(null===(x=e.fileInfos[l])||void 0===x?void 0:x.dataChunkInfo)&&(0,i.jsxs)("div",{style:{padding:"4px",paddingTop:"12px"},children:[(0,i.jsx)("span",{style:{padding:"4px"},children:(0,i.jsxs)(p.zx,{onClick:()=>{let t=a().cloneDeep(e.fileInfos[l]);(null==t?void 0:t.dataChunkInfo)&&(t.dataChunkInfo=[...a().cloneDeep(t.dataChunkInfo),void 0],e.setFileInfo(t,l),e.adjustUploadProgress(l,"append"))},type:"primary",children:["Add ",s.data_chunks[0].type]})}),e.fileInfos[l].dataChunkInfo.length>1&&(0,i.jsx)("span",{style:{padding:"4px"},children:(0,i.jsxs)(p.zx,{onClick:()=>{if(!window.confirm("Are you sure you want to delete this ".concat(s.data_chunks[0].type,"?")))return;let t=a().cloneDeep(e.fileInfos[l]);(null==t?void 0:t.dataChunkInfo)&&(t.dataChunkInfo=a().cloneDeep(t.dataChunkInfo).slice(0,t.dataChunkInfo.length-1),e.setFileInfo(t,l),e.adjustUploadProgress(l,"remove"))},type:"error",children:["Delete last ",s.data_chunks[0].type]})})]})]},"".concat(l));return T})})]})}},548729:function(e,t,n){"use strict";var i=n(824246);n(827378);var o=n(99562),a=n(437175),r=n(578899);t.Z=e=>{let{taskMetadata:t,fromReviewHeader:n}=e,s=n?(0,i.jsx)("a",{style:{textDecoration:"underline"},children:(0,i.jsx)("strong",{children:"Metadata"})}):(0,i.jsx)("a",{style:{color:o.ZP.colors.periwinkle100},children:(0,i.jsx)("strong",{children:"Metadata"})});return(0,i.jsx)("div",{style:{marginRight:o.ZP.spacing(2)},children:(0,i.jsx)(a.Z,{className:"",popover:(0,i.jsx)("div",{style:{width:450,padding:12},children:(0,i.jsx)(r.X,{src:t,enableClipboard:!1,name:!1,displayDataTypes:!1,displayObjectSize:!1})}),targetOpen:s,targetClosed:s})})}},470908:function(e,t,n){"use strict";var i=n(824246),o=n(792739),a=n(827378),r=n(749449),s=n(720227),l=n(722030),d=n(713222),c=n(349596),u=n(89916),p=n(257770),h=n(961661),m=n(424727),g=n(445820),x=n(813306),f=n(232337),v=n(63275),b=n(99562),y=n(60042),w=n.n(y);let getReadableLanguage=e=>u.fullLanguageMap[e]||e.toUpperCase(),j=(0,a.memo)(e=>{var t,n;let{code:b,languageMatch:y,languageOverride:j,codeBlocksInMarkdownText:C,codeBlockIndex:A,autoRunDependenciesComplete:T,loading:S,defaultExpanded:I=!0}=e,P=k(),[D,N]=(0,a.useState)(I),R=null!==(n=null!=j?j:null==y?void 0:y[1].toLowerCase())&&void 0!==n?n:"",B=(0,a.useContext)(x.p),M=null==B?void 0:null===(t=B.codingConfig)||void 0===t?void 0:t.customCodeEnvironments,F=(null==M?void 0:M.length)===1||(!M||0===M.length)&&!!u.LANGUAGE_OPTIONS.find(e=>{let{id:t}=e;return t===R}),E=(0,a.useMemo)(()=>S?"":f.createHash("sha256").update("".concat(b,"-").concat(R,"-executableCodeBlock")).digest("hex"),[b,R,S]),{getScratchpadOpenState:L,setScratchpadOpenState:Z}=(0,v.U)(),[z,O]=[L(E),e=>Z(E,e)],{outputTabOpen:H,outputValue:V,tab:U,isFetching:W,fetchError:G,loadingTaskIdForLogging:q,handleExecuteCode:K,setOutputTabOpen:J,setTab:Q}=(0,g.Z)({storeKey:E,code:b,language:R,customCodeEnvironment:null==M?void 0:M[0]}),toggleExpand=e=>{e.stopPropagation(),N(!D)};(0,a.useEffect)(()=>{var e,t,n;let i=null!==(n=null===(e=B.codingConfig)||void 0===e?void 0:e.autoRunExecutableCodeBlocks)&&void 0!==n?n:null===(t=B.generalMarkdownConfig)||void 0===t?void 0:t.autoRunExecutableCodeBlocks;T&&F&&i&&K()},[T,B.codingConfig,B.generalMarkdownConfig,F]);let Y=b.split(/\r\n|\r|\n/).length;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:(0,s.m)("group bg-transparent relative px-0 py-0 scale-theme",D?"overflow-auto":"overflow-hidden"),children:[(0,i.jsxs)("div",{className:"text-white text-xs font-medium font-mono px-3 flex items-center justify-between bg-neutral-800 rounded-t-md py-1.5",children:[(0,i.jsx)("span",{className:"text-neutral-0",children:getReadableLanguage(R)}),(0,i.jsxs)("div",{className:"flex items-center justify-end",children:[!S&&F&&(0,i.jsx)("div",{className:"pr-1",children:W?(0,i.jsx)(l.$,{className:"pr-2",size:"xs",variant:"primary"}):(0,i.jsx)(d.J,{icon:["far","play"],className:"hover:bg-neutral-700/40",variant:"white",onClick:e=>{e.stopPropagation(),K()},disabled:W||q,tooltip:"Run Code",tooltipProps:{side:"top",delayDuration:100},"data-testid":"run-code-button"})}),!S&&M&&(null==M?void 0:M.length)>1&&(0,i.jsx)(d.J,{icon:["far","exclamation-circle"],className:"hover:bg-neutral-800",variant:"white",tooltip:"Please use the coding scratchpad (click on the pencil icon to the right) to execute and test your code.",tooltipProps:{side:"top",delayDuration:100}}),!S&&(0,i.jsx)("div",{className:"pr-1",children:(0,i.jsx)(d.J,{icon:["far","pen"],className:"hover:bg-neutral-700/40",variant:"white",onClick:e=>{e.stopPropagation(),e.preventDefault(),O(!0)},tooltip:"Scratchpad (changes made are not saved)",tooltipProps:{side:"top",delayDuration:100}})}),(0,i.jsx)("div",{className:"pl-2 pr-3 pt-1",children:(0,i.jsx)(h.f,{code:b})}),Y>15&&D&&(0,i.jsxs)("button",{onClick:e=>toggleExpand(e),className:"border ml-1 rounded-md py-1.5 px-2 text-xs flex items-center justify-center bg-neutral-600 border-neutral-500 text-neutral-0",children:["Collapse",(0,i.jsx)(o.FontAwesomeIcon,{icon:"chevron-up",className:"ml-1"})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:w()("p-3 bg-neutral-900",D?"max-h-[900px] overflow-auto rounded-b-md":"max-h-[290px] overflow-hidden",P.codeblockStyle),children:(0,i.jsx)(r.Z,{children:b,style:c.Q,language:R,PreTag:"div",CodeTag:"div",showLineNumbers:!0})}),Y>15&&!D&&(0,i.jsx)("div",{className:"flex items-center justify-center py-2 text-white text-xs font-medium font-mono bg-neutral-900 rounded-b-md",children:(0,i.jsxs)("button",{onClick:e=>toggleExpand(e),className:"border ml-1 text-white rounded-md py-1.5 px-2 text-xs flex items-center justify-center bg-neutral-600 border-neutral-500 text-neutral-0",children:["Expand",(0,i.jsx)(o.FontAwesomeIcon,{icon:"chevron-down",className:"ml-1"})]})})]}),"text"!==R&&H&&(0,i.jsx)("div",{className:"border-none pt-4",onClick:e=>e.stopPropagation(),children:(0,i.jsx)(p.Z,{className:"w-full h-40 p-0 whitespace-pre-line",outputValue:null!=V?V:"",setOutputTabOpen:J,tab:U,setTab:Q,fetchError:G,fullScreenEnabled:!1,fullWidthEnabled:!0})}),z&&(0,i.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-utility-black/50 flex flex-col justify-center items-center z-[100]",children:(0,i.jsx)(m.Q,{rawCode:b,originalLanguage:R,codeBlocksInMarkdownText:C,setOpen:O,codeBlockIndex:A,customCodeEnvironments:M})})]})})});j.displayName="ExecutableCodeBlock",t.Z=j;let k=(0,b.ZL)(()=>({codeblockStyle:{'& div[class*="language-"]':{color:"rgb(248, 248, 242)",background:"none",fontFamily:'"Fira Code", Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace',textAlign:"left",whiteSpace:"pre-wrap !important",wordSpacing:"normal",wordBreak:"normal",overflowWrap:"normal",lineHeight:"1.5",tabSize:4,hyphens:"none",fontSize:"10px",width:"800px !important"},"& div":{scrollbarColor:"rgba(248, 248, 242, 0.5) rgba(0, 0, 0, 0)",scrollbarWidth:"thin"}}}))},137337:function(e,t,n){"use strict";n.d(t,{L8:function(){return P},uV:function(){return replaceWithDoubleDollarSign}});var i=n(824246),o=n(742435),a=n(787989),r=n(171810),s=n(885701),l=n(720227),d=n(929228),c=n(470908),u=n(298784),p=n.n(u),h=n(827378),m=n(327113),g=n(847901),x=n(278119),f=n(391089),v=n(179843),b=n(479553),y=n(837553),w=n(813306),j=n(28590),k=n(15905),C=n(480244),A=n(427562),T=n(165218),S=n.n(T);let I=S()(()=>Promise.all([n.e(8807),n.e(72415)]).then(n.bind(n,572415)).then(e=>e.ChatAudioEditor),{loadableGenerated:{webpack:()=>[572415]},ssr:!1}),TableCell=e=>{let{as:t,...n}=e;return(0,i.jsx)(t,{...n,children:h.Children.map(n.children,e=>"<br>"===e?(0,i.jsx)("br",{}):e)})},LegacyChatMarkdownUnmemoized=e=>{let{markdown:t,className:n,autoRunDependenciesComplete:a,enableMath:u,enableSingleDollarTextMath:y,enableHtml:w,enableSoftBreaks:j,enableExecutableCodeBlocks:k,disableRehypeSanitize:C=!0,loading:A=!1,defaultExpandCodeBlocks:T=!0,enableRTL:S}=e,P=(0,h.useMemo)(()=>p().compact([w?g.default:null,w&&!C?x.Z:null,u?m.Z:null]),[w,u,C]),D=(0,h.useMemo)(()=>{let e=[v.Z];return u&&e.push([b.Z,{singleDollarTextMath:!!y}]),j&&e.push(f.Z),e},[u,y,j]);u&&(t=replaceWithDoubleDollarSign(t),t=(0,r.h)(t));let N=(0,d.LQ)(t);return(0,i.jsxs)("div",{dir:null!=S&&S?"rtl":void 0,className:S?"text-right":void 0,children:[(0,i.jsx)("style",{children:"\n  li pre {\n    padding: 0 !important;\n    border-radius: 0.5rem !important;\n  }\n"}),(0,i.jsx)(o.D,{remarkPlugins:D,rehypePlugins:P,children:t,className:(0,l.m)("prose prose-neutral prose-sm max-w-none break-words [&>pre]:p-0 [&>pre]:rounded-lg",n,u?"text-neutral-700":""),components:{table:e=>(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsx)("table",{...e})}),th:e=>(0,i.jsx)(TableCell,{as:"th",className:"text-neutral-700",...e}),td:e=>(0,i.jsx)(TableCell,{as:"td",className:"text-neutral-600",...e}),p:e=>(0,i.jsx)("p",{className:"text-neutral-700",...e}),h1:e=>(0,i.jsx)("h1",{className:"text-neutral-700",...e}),h2:e=>(0,i.jsx)("h2",{className:"text-neutral-700",...e}),h3:e=>(0,i.jsx)("h3",{className:"text-neutral-700",...e}),h4:e=>(0,i.jsx)("h4",{className:"text-neutral-700",...e}),h5:e=>(0,i.jsx)("h5",{className:"text-neutral-700",...e}),h6:e=>(0,i.jsx)("h6",{className:"text-neutral-700",...e}),ul:e=>(0,i.jsx)("ul",{className:"text-neutral-700",...e}),ol:e=>(0,i.jsx)("ol",{className:"text-neutral-700",...e}),li:e=>(0,i.jsx)("li",{className:"text-neutral-700",...e}),strong:e=>(0,i.jsx)("strong",{className:"text-neutral-700",...e}),a:e=>(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",...e,className:(0,l.m)("text-neutral-700",e.className)}),code(e){let{children:t,className:n="",node:o,inline:r,...d}=e,u=/language-(\w+)/.exec(n),p=N.findIndex(e=>e.code===String(t).replace(/\n$/,""));return!r&&k?(0,i.jsx)(c.Z,{code:String(t).replace(/\n$/,""),languageMatch:u,codeBlocksInMarkdownText:N,codeBlockIndex:p,autoRunDependenciesComplete:a,loading:A,defaultExpanded:T}):r?(0,i.jsx)("code",{...d,className:(0,l.m)("text-neutral-700",n),children:t}):(0,i.jsx)(s.d,{code:String(t).replace(/\n$/,""),languageMatch:u,initCollapsed:!T})},pre:e=>k?(0,i.jsx)("div",{children:e.children}):(0,i.jsx)("pre",{...e}),audio(e){var t,n;let o=null===(t=e.children)||void 0===t?void 0:t.find(e=>h.isValidElement(e)&&"string"==typeof e.type&&"source"===e.type),a=(null==o?void 0:null===(n=o.props)||void 0===n?void 0:n.src)||e.src;return a&&"string"==typeof a?(0,i.jsx)(I,{src:a,className:"w-full",readonly:!0}):(0,i.jsx)("audio",{...e})}}})]})},replaceWithDoubleDollarSign=e=>e.replace(RegExp("\\\\\\\\\\[((?:(?!\\\\\\\\\\[).)*?)\\\\\\\\\\]","gs"),(e,t)=>"$$".concat(t,"$$")).replace(RegExp("\\\\\\\\\\(((?:(?!\\\\\\\\\\().)*?)\\\\\\\\\\)","gs"),(e,t)=>"$$".concat(t,"$$")),P=h.memo(e=>{let t=(0,h.useRef)(null),n=(0,h.useContext)(w.p),o=(0,k.U)(),{canEditComments:r}=n,s=e.enableInlineComments&&!!r,l=e.childId,{data:d,isLoading:c}=(0,y._z)("chat-preview-migration",{projectId:n.projectId},!1,!0,{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchIntervalInBackground:!1,retry:!1});if(c)return(0,i.jsx)(a.O,{className:"w-full h-12 rounded"});if(d){var u;return(0,i.jsxs)(j.u3,{className:"min-h-fit",content:e.markdown,enableMath:e.enableMath,enableHtml:e.enableHtml,enableSoftBreaks:e.enableSoftBreaks,defaultTokens:o,enableSingleDollarTextMath:e.enableSingleDollarTextMath,enableCodeExecution:e.enableExecutableCodeBlocks,defaultExpandCodeBlocks:e.defaultExpandCodeBlocks,shouldDebounceContentUpdates:e.shouldDebounceContentUpdates,children:[(0,i.jsxs)(j.Nf,{ref:t,className:"border-none",children:[(0,i.jsx)(j.Tw,{}),(0,i.jsx)(j.MB,{className:e.className,textDirection:e.enableRTL?"rtl":void 0})]}),(0,i.jsx)(j.qe,{anchorRef:t,enabled:n.enableFactChecker}),s&&null!=l&&(0,i.jsx)(C.Z,{enabled:s,childId:l}),s&&null!=l&&(0,i.jsx)(A.s,{anchorRef:null!==(u=e.cardRef)&&void 0!==u?u:t,enabled:s,childId:l,turnIndex:e.turnIndex})]})}return(0,i.jsx)(LegacyChatMarkdownUnmemoized,{...e})})},707889:function(e,t,n){"use strict";n.d(t,{YX:function(){return useAttemptBehaviorLog},fN:function(){return AttemptBehaviorLogContextProvider}});var i,o,a=n(824246),r=n(827378);n(670644);var s=n(560690),l=n(428907),d=n(298784),c=n.n(d),u=n(502872),p=n(760487);(i=o||(o={})).MouseEnter="mouseenter",i.MouseLeave="mouseleave",i.Visible="visible",i.Hidden="hidden",i.Load="load";let h=["mouseenter","visible"],m=["mouseleave","hidden"],getFieldIdWithIndex=(e,t,n)=>"".concat(e).concat(void 0!==t?"".concat("__RESPONSE_INDEX__").concat(t):"").concat(n?"".concat("__SUFFIX__").concat(n):""),useContextValue=e=>{let t=(0,r.useRef)(new u.x),{projectId:n,workerId:i,assignmentId:o,reviewLevel:a}=e,[d,g,x]=(0,p.Z)("textFieldData-".concat(i,"-").concat(o),{}),[f,v,b]=(0,p.Z)("copyEventsLog-".concat(i,"-").concat(o),[]),[y,w,j]=(0,p.Z)("pasteEventsLog-".concat(i,"-").concat(o),[]),[k,C,A]=(0,p.Z)("dragAndDropEventsLog-".concat(i,"-").concat(o),[]),[T,S,I]=(0,p.Z)("initializationState-".concat(i,"-").concat(o),{}),[P,D,N]=(0,p.Z)("presenceLog-".concat(i,"-").concat(o),[]),R=(0,r.useRef)(!1);(0,r.useEffect)(()=>{R.current=!1},[i,o]);let B=(0,r.useCallback)(e=>{let{fieldId:n,text:i,responseIndex:o,suffix:a}=e,r=getFieldIdWithIndex(n,o,a),s=Date.now();t.current.next({fieldId:r,timestamp:s,text:i})},[]);(0,r.useEffect)(()=>{let n=t.current.asObservable().pipe((0,s.r)(3e3)).subscribe(t=>{g(n=>(0,l.default)(n,n=>{let i=c().groupBy(t,"fieldId");for(let t in i){var o,a,r,s,l,d,u,p,h,m,g,x;n[t]||(n[t]={latestValue:null!==(s=null===(r=e.annotations)||void 0===r?void 0:null===(a=r[t])||void 0===a?void 0:null===(o=a.response)||void 0===o?void 0:o[0])&&void 0!==s?s:"",lengthDiffLog:[],lengthDiffTimestamps:[],activeTimeTyping:0,numAutotyperDetected:0,numMouseLeaves:0,longDiffTexts:[]});let f=i[t],v=f.map(e=>e.timestamp),b=(null!==(l=c().last(v))&&void 0!==l?l:0)-(null!==(d=c().first(v))&&void 0!==d?d:0);for(let i of(n[t].activeTimeTyping+=b,f)){let o=null!==(x=null!==(g=null===(u=n[t])||void 0===u?void 0:u.latestValue)&&void 0!==g?g:null===(m=e.annotations)||void 0===m?void 0:null===(h=m[t])||void 0===h?void 0:null===(p=h.response)||void 0===p?void 0:p[0])&&void 0!==x?x:"",a=i.text.length-o.length;a>=100&&n[t].longDiffTexts.push(i.text),n[t].latestValue=i.text,Array.isArray(n[t].lengthDiffLog)?n[t].lengthDiffLog.push(a):n[t].lengthDiffLog=[a],Array.isArray(n[t].lengthDiffTimestamps)?n[t].lengthDiffTimestamps.push(i.timestamp):n[t].lengthDiffTimestamps=[i.timestamp]}}}))});return()=>{n.unsubscribe()}},[e.annotations,g]);let M=(0,r.useCallback)(e=>{if(T()[getFieldIdWithIndex(e.fieldId,e.responseIndex)]&&!e.overrideForField)return;let{fieldId:t,text:n,responseIndex:i}=e,o=getFieldIdWithIndex(t,i);g(e=>(0,l.default)(e,e=>{e[o]={latestValue:n,lengthDiffLog:[],lengthDiffTimestamps:[],activeTimeTyping:0,numAutotyperDetected:0,numMouseLeaves:0,longDiffTexts:[]}})),S(e=>({...e,[o]:!0}))},[g,S,T]),F=(0,r.useCallback)(e=>{var t;let i=null===(t=window.getSelection())||void 0===t?void 0:t.toString();if(i&&e.target instanceof Element&&(!["textarea","input"].includes(e.target.tagName.toLowerCase())||["65a03220febeea7f87d7148f","651c671f68dd54c040f0342f"].includes(null!=n?n:""))){let e=Date.now();v(t=>[...t,{text:i,timestamp:e}])}},[v,n]),E=(0,r.useCallback)(e=>{if(e.clipboardData){let t=e.clipboardData.getData("text/plain"),n=Date.now();w(e=>[...e,{text:t,timestamp:n}])}},[w]),L=(0,r.useCallback)(e=>{if(e.dataTransfer){let t=e.dataTransfer.getData("text/plain"),n=Date.now();C(e=>[...e,{text:t,timestamp:n}])}},[C]),Z=(0,r.useCallback)(()=>{var e,t;let n=P(),i=n.reduce((e,t,i)=>{var o;if(m.includes(t.type)&&h.includes(null===(o=n[i+1])||void 0===o?void 0:o.type)){if(!n[i+1].timestamp)return e;e.push((n[i+1].timestamp-t.timestamp)/1e3)}return e},[]);return{totalOutOfPageTimeSecs:null!==(e=c().sum(i))&&void 0!==e?e:0,numOutOfPageEvents:null!==(t=i.length)&&void 0!==t?t:0,maxOutOfPageTimeSecs:c().max(i),meanOutOfPageTimeSecs:c().mean(i)}},[P]),z=(0,r.useRef)(!1),O=(0,r.useCallback)(e=>"mouseenter"===e.type?"mouseenter":"mouseleave"===e.type?"mouseleave":"visibilitychange"===e.type?document.hidden?"hidden":"visible":"mouseenter",[]),H=(0,r.useCallback)(e=>{let t=Date.now();z.current||(z.current=!0,D(e=>[...e,{type:"load",timestamp:t}]));let n=O(e);D(e=>[...e,{type:n,timestamp:t}])},[D,O]);(0,r.useEffect)(()=>(document.addEventListener("copy",F),document.addEventListener("paste",E),document.addEventListener("drop",L),document.addEventListener("mouseenter",H),document.addEventListener("mouseleave",H),document.addEventListener("visibilitychange",H),()=>{document.removeEventListener("copy",F),document.removeEventListener("paste",E),document.removeEventListener("drop",L),document.removeEventListener("mouseenter",H),document.removeEventListener("mouseleave",H),document.removeEventListener("visibilitychange",H)}),[F,E,L,H]);let V=(0,r.useCallback)(t=>{let{fieldId:n,responseIndex:i,suffix:o}=t,a=getFieldIdWithIndex(n,i,o);g(t=>(0,l.default)(t,t=>{if(!t[a]){var n,i,o,r;t[a]={latestValue:null!==(r=null===(o=e.annotations)||void 0===o?void 0:null===(i=o[a])||void 0===i?void 0:null===(n=i.response)||void 0===n?void 0:n[0])&&void 0!==r?r:"",lengthDiffLog:[],lengthDiffTimestamps:[],activeTimeTyping:0,numAutotyperDetected:0,numMouseLeaves:0,longDiffTexts:[]}}t[a].numAutotyperDetected=t[a].numAutotyperDetected+1}))},[e.annotations,g]),U=(0,r.useCallback)(t=>{let{fieldId:n,responseIndex:i,suffix:o}=t,a=getFieldIdWithIndex(n,i,o);g(t=>(0,l.default)(t,t=>{if(!t[a]){var n,i,o,r;t[a]={latestValue:null!==(r=null===(o=e.annotations)||void 0===o?void 0:null===(i=o[a])||void 0===i?void 0:null===(n=i.response)||void 0===n?void 0:n[0])&&void 0!==r?r:"",lengthDiffLog:[],lengthDiffTimestamps:[],activeTimeTyping:0,numAutotyperDetected:0,numMouseLeaves:0,longDiffTexts:[]}}t[a].numMouseLeaves=t[a].numMouseLeaves+1}))},[e.annotations,g]),W=(0,r.useCallback)(()=>{var e,t,n,i,o,a,r,s,l,u,p,h;let m,g,x;let v=d(),b=c().uniq(Object.keys(v)),w={};for(let e of b){let{latestValue:t,lengthDiffLog:n,lengthDiffTimestamps:i,numMouseLeaves:o,activeTimeTyping:a,numAutotyperDetected:r,longDiffTexts:s}=v[e],l=n.filter(e=>e<0).map(e=>-e),d=n.filter(e=>e>1);w[e]={numBackspaces:l.length,avgBackspaceLength:c().mean(l),maxBackspaceLength:c().max(l),numOfCopyPaste:d.length,avgCopyPasteLength:c().mean(d),maxCopyPasteLength:c().max(d),activeTimeTyping:a,totalChanges:n.length,numAutotyperDetected:r,numMouseLeaves:o,lengthDiffLog:n,lengthDiffTimestamps:i,charCount:t.length,wordCount:c().words(t).length,longDiffTexts:s}}let j=f();if(j&&j.length>0){let o=j.map(e=>e.text),a=j.map(e=>e.timestamp);m={copyTextLog:o,copyTimestampLog:a,maxCopyTextLength:null!==(n=null===(e=c().maxBy(o,e=>e.length))||void 0===e?void 0:e.length)&&void 0!==n?n:0,minCopyTextLength:null!==(i=null===(t=c().minBy(o,e=>e.length))||void 0===t?void 0:t.length)&&void 0!==i?i:0,avgCopyTextLength:c().meanBy(o,e=>{var t;return null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0}),numCopyEvents:o.length}}let C=y();if(C&&C.length>0){let e=C.map(e=>e.text),t=C.map(e=>e.timestamp);g={pasteTextLog:e,pasteTimestampLog:t,maxPasteTextLength:null!==(r=null===(o=c().maxBy(e,e=>e.length))||void 0===o?void 0:o.length)&&void 0!==r?r:0,minPasteTextLength:null!==(s=null===(a=c().minBy(e,e=>e.length))||void 0===a?void 0:a.length)&&void 0!==s?s:0,avgPasteTextLength:c().meanBy(e,e=>{var t;return null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0}),numPasteEvents:e.length}}let A=k();if(A&&A.length>0){let e=A.map(e=>e.text),t=A.map(e=>e.timestamp);x={pasteTextLog:e,pasteTimestampLog:t,maxPasteTextLength:null!==(p=null===(l=c().maxBy(e,e=>e.length))||void 0===l?void 0:l.length)&&void 0!==p?p:0,minPasteTextLength:null!==(h=null===(u=c().minBy(e,e=>e.length))||void 0===u?void 0:u.length)&&void 0!==h?h:0,avgPasteTextLength:c().meanBy(e,e=>{var t;return null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0}),numPasteEvents:e.length}}let T=Z();return{textFields:w,copyTextEvents:m,pasteTextEvents:g,dragAndDropEvents:x,inactivityLog:T}},[d,f,y,k,Z]),G=(0,r.useCallback)(()=>{if(R.current)return;R.current=!0;let e=W(),t={...e,projectId:n,workerId:i,assignmentId:o,reviewLevel:a};return t},[R,n,i,o,a,W]);return{emitTypingEvent:B,incAutotyperDetectedEvent:V,incMouseLeaveEvent:U,logBehaviorEvent:G,getAttemptBehaviourLog:W,setLatestValue:M,getTextFieldData:d,getCopyEventsLog:f,getPasteEventsLog:y,getDragAndDropEventsLog:k,getInitializationState:T,subscribeTextFieldData:x,subscribeCopyEventsLog:b,subscribePasteEventsLog:j,subscribeDragAndDropEventsLog:A,subscribeInitializationState:I,setTextFieldData:g,setCopyEventsLog:v,setPasteEventsLog:w,setDragAndDropEventsLog:C,setInitializationState:S,setPresenceEventsLog:D,getPresenceEventsLog:P,subscribePresenceEventsLog:N}},g=r.createContext({emitTypingEvent:e=>{},incAutotyperDetectedEvent:e=>{},incMouseLeaveEvent:e=>{},logBehaviorEvent:()=>{},getAttemptBehaviourLog:()=>({}),setLatestValue:e=>{}}),useAttemptBehaviorLog=()=>(0,r.useContext)(g),AttemptBehaviorLogContextProvider=e=>{let{children:t,...n}=e,i=useContextValue(n);return(0,a.jsx)(g.Provider,{value:i,children:t})}},427562:function(e,t,n){"use strict";n.d(t,{s:function(){return TextSelectionPopover}});var i=n(824246),o=n(827378),a=n(729205),r=n(276281),s=n(855549),l=n(206159),d=n(711719),c=n.n(d),u=n(616711),p=n(813306),h=n(266726),m=n.n(h),g=n(657097);let TextSelectionPopover=e=>{let{enabled:t,anchorRef:n,childId:d,turnIndex:h,isLeftPosition:x=!1,overrideChildId:f}=e,v=(0,o.useContext)(p.p),{workerId:b}=v,{editor:y}=(0,s.fi)(),w=(0,a.y)(e=>e.deleteSelection),j=(0,a.y)(e=>e.addWorkerComment),k=(0,a.y)(e=>e.selectWorkerComment),[C,A]=(0,o.useState)(""),[T,S]=(0,o.useState)(null),[I,P]=(0,o.useState)(null),[D,N]=(0,o.useState)(""),R=""!==D&&I&&y&&I.from>=0&&I.from<=y.view.state.doc.content.size,B=R?y.view.coordsAtPos(I.from):void 0,M=B&&n.current?B.top-n.current.getBoundingClientRect().top:0,{styles:F,attributes:E}=(0,r.D)(n.current,T,{placement:x?"left-start":"right-start",modifiers:[{name:"offset",options:{offset:[M,28]}},{name:"preventOverflow",options:{mainAxis:!1}}]});(0,o.useEffect)(()=>{if(!y)return;let e=m()(e=>{let{editor:t}=e,{range:n,content:i}=(0,g.EQ)(t);P(n),N(i)},200);return y.on("selectionUpdate",e),()=>{y.off("selectionUpdate",e)}},[y]);let L=(0,o.useCallback)(()=>{var e,t,n,i;null==y||null===(e=y.view)||void 0===e||e.dom.blur(),null==y||null===(i=y.view)||void 0===i||i.dispatch(null==y?void 0:null===(n=y.view)||void 0===n?void 0:n.state.tr.setSelection(u.Bs.create(null==y?void 0:null===(t=y.view)||void 0===t?void 0:t.state.doc,0))),w()},[w,y]),Z=(0,o.useCallback)(e=>{if(I){if(e.length){let t=c()();j({workerCommentId:t,author:b,comment:e,turn:h,childId:d,overrideChildId:f,locationStart:I.from,locationEnd:I.to}),A(""),k(t)}L()}},[I,L,j,b,h,d,f,k]);return t&&y&&""!==D&&!v.enableUnifiedFeedback&&I&&I.from!==I.to?(0,i.jsx)("div",{ref:S,style:F.popper,...E.popper,className:"z-30 flex",children:(0,i.jsx)(l.Z,{commentText:C,setCommentText:A,submitComment:Z,discardComment:L,disableAutoFocus:!0})}):null}},480244:function(e,t,n){"use strict";var i=n(827378),o=n(855549),a=n(729205),r=n(813306),s=n(204157),l=n(657097);t.Z=(0,i.memo)(function(e){let{childId:t,enabled:n}=e,d=(0,i.useContext)(r.p),{editor:c}=(0,o.fi)(),u=(0,a.y)(e=>e.selectWorkerComment),p=(0,a.y)(e=>e.selectedWorkerComment),h=(0,a.y)(e=>e.setSelection);return(0,i.useEffect)(()=>{c&&(n?c.commands.enableComments():c.commands.disableComments())},[c,n]),(0,i.useEffect)(()=>{if(!c||!n)return;let e=a.y.subscribe(e=>e.workerComments.filter(e=>e.childId===t&&void 0!==e.locationStart&&void 0!==e.locationEnd),e=>{c.commands.setComments(e.filter(e=>!e.feedbackResponse).map(e=>({id:e.workerCommentId,range:{from:e.locationStart,to:e.locationEnd}})))},{fireImmediately:!0,equalityFn:s.X});return()=>{e()}},[c,n,t]),(0,i.useEffect)(()=>{if(c&&n)return c.on("transaction",handleTransactions),()=>{c.off("transaction",handleTransactions)};function handleTransactions(e){let{transaction:t}=e,n=t.getMeta(l.Cw.CommentPositionsUpdated),i=t.getMeta(l.Cw.CommentSelected);if(i&&u(i),n){let e=n.map(e=>({id:e.id,updater:()=>[e.range.from,e.range.to]}));a.y.getState().batchUpdateWorkerCommentLocations(e)}}},[c,n,u]),(0,i.useEffect)(()=>{if(c&&n){if(p)c.commands.selectComment(p);else{c.commands.deselectComment();return}}},[p,c,n]),(0,i.useEffect)(()=>{if(c&&d.enableUnifiedFeedback)return c.on("selectionUpdate",handleSelectionChange),()=>{c.off("selectionUpdate",handleSelectionChange)};function handleSelectionChange(e){let{editor:n}=e,{range:i,content:o}=(0,l.EQ)(n);i?h({from:i.from,to:i.to,empty:!1,childId:t,text:o}):h({from:0,to:0,empty:!0,childId:""})}},[c,t,h,d.enableUnifiedFeedback]),null})},578915:function(e,t,n){"use strict";n.d(t,{Hn:function(){return l},nv:function(){return createEventBus},cW:function(){return logChatTaskEvent},v1:function(){return useEventBus}});var i=n(571085),o=n(502872),a=n(416621),r=n(280598);let EventBus=class EventBus{emit(e,t,n){this.subject.next({event:e,data:t,context:n})}on(e){return this.subject.asObservable().pipe((0,a.h)(t=>t.event===e),(0,r.U)(e=>e))}contextualize(e){return new ContextualEventBus(this,e)}constructor(){this.subject=new o.x}};let ContextualEventBus=class ContextualEventBus{emit(e,t){this.baseEventBus.emit(e,t,this.context)}on(e){return this.baseEventBus.on(e)}constructor(e,t){this.baseEventBus=e,this.context=t}};var s=n(827378);let logChatTaskEvent=async e=>{await (0,i.Kz)(i.ju.ChatTask,e)};function createEventBus(){return new EventBus}let l=(0,s.createContext)(createEventBus());function useEventBus(){return(0,s.useContext)(l)}},206159:function(e,t,n){"use strict";var i=n(824246),o=n(339389),a=n(416534);n(827378);var r=n(577997);t.Z=e=>{let{commentText:t,setCommentText:n,submitComment:s,discardComment:l,disableAutoFocus:d=!1}=e;return(0,i.jsxs)(r.p,{className:"w-80",children:[(0,i.jsx)(r.p.Header,{className:"px-3 border-b border-neutral-200",children:(0,i.jsx)(r.p.HeaderLeft,{children:(0,i.jsx)(r.p.Subtitle,{children:"Add a comment"})})}),(0,i.jsx)(r.p.Body,{className:"border-t-0",children:(0,i.jsx)(o.K,{className:"pt-1",id:"dynamic-textarea",rows:1,onFocus:e=>{let t=e.target;t.style.height="auto",t.style.height=t.scrollHeight+"px",t.style.maxHeight="16rem"},autoFocus:!d,dynamic:!0,resizable:!1,onChange:e=>{n(e.target.value)},value:t,onKeyDown:e=>{e.shiftKey&&"Enter"===e.key&&(e.preventDefault(),s(t)),"Escape"===e.key&&l()}})}),(0,i.jsxs)(r.p.Footer,{className:"flex gap-2 justify-end border-t-0",children:[(0,i.jsx)(a.zx,{onClick:l,size:"sm",variant:"neutral",children:"Cancel"}),(0,i.jsx)(a.zx,{onClick:()=>{s(t)},size:"sm",variant:"primary",children:"Comment"})]})]})}},560690:function(e,t,n){"use strict";n.d(t,{r:function(){return bufferDebounceTime}});var i=n(827378),o=n(298784),a=n.n(o),r=n(536431),s=n(716970),l=n(280598),d=n(502872);function bufferDebounceTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t=>{let n=[];return t.pipe((0,r.b)(e=>n.push(e)),(0,s.b)(e),(0,l.U)(()=>n),(0,r.b)(()=>n=[]))}}t.Z=e=>{let t=(0,i.useRef)(new d.x),n=(0,i.useCallback)(()=>{t.current.next(Date.now())},[]);return(0,i.useEffect)(()=>{let n=t.current.asObservable().pipe((0,r.b)(()=>{}),bufferDebounceTime(1e3),(0,l.U)(e=>{let t=[];for(let n=1;n<e.length;n++)t.push(e[n]-e[n-1]);let n=[],i=[];for(let e=0;e<t.length;e+=25){var o;let r=t.slice(e,e+100);if(r.length<9)continue;let s=null!==(o=a().mean(r))&&void 0!==o?o:0,l=Math.sqrt(a().mean(r.map(e=>(e-s)**2)));s>2e3||(n.push(s),i.push(l))}return{avgKeystrokeIntervalMsPerStep:n,stdKeystrokeIntervalMsPerStep:i}})).subscribe(t=>{let{avgKeystrokeIntervalMsPerStep:n,stdKeystrokeIntervalMsPerStep:i}=t;if(5>a().mean(n)||2>a().mean(i)){e();return}});return()=>{n.unsubscribe()}},[e]),{updateKeystrokeTimestamp:n}}},298115:function(e,t,n){"use strict";n.d(t,{R:function(){return c},cx:function(){return a},g7:function(){return r}});var i,o,a,r,s=n(236125),l=n(527467);(i=a||(a={})).Pinned="pinned",i.Rubric="rubric",(o=r||(r={})).Inline="inline",o.MultiColumn="multicolumn";let d={layout:null,showConfig:!1,isDrawerOpen:!1,hasDrawerBeenOpened:!1,selectedToolboxTab:"pinned",drawerWidth:800,columnWidth:640,isContentExpanded:!1},c=(0,s.Ue)()((0,l.mW)((e,t)=>({...d,setLayout:t=>{e({layout:t},!1,"setLayout")},toggleShowConfig:()=>{e(e=>({showConfig:!e.showConfig}),!1,"toggleShowConfig")},setIsDrawerOpen:t=>{t&&e({hasDrawerBeenOpened:!0,isDrawerOpen:t},!1,"setIsDrawerOpen"),e({isDrawerOpen:t},!1,"setIsDrawerOpen")},setSelectedToolboxTab:t=>{e({selectedToolboxTab:t},!1,"setSelectedToolboxTab")},setDrawerWidth:t=>{e({drawerWidth:t},!1,"setDrawerWidth")},setColumnWidth:t=>{e({columnWidth:t},!1,"setColumnWidth")},getCurrentDrawerWidth:()=>{let{isDrawerOpen:e,drawerWidth:n}=t();return e?n:0},toggleContentExpanded:()=>{e(e=>({isContentExpanded:!e.isContentExpanded}),!1,"toggleContentExpanded")},resetHasDrawerBeenOpened:()=>{e({hasDrawerBeenOpened:!1},!1,"resetHasDrawerBeenOpened")}}),{name:"chat-pin-store"}))},871189:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var i=n(236125),o=n(527467);let a=(0,i.Ue)()((0,o.mW)((e,t)=>({rubric:null,setRubric:t=>{e({rubric:t})}}),{name:"chat-field-rubrics-store"}))},15905:function(e,t,n){"use strict";n.d(t,{U:function(){return useMarkdownSyntaxOptions}});var i=n(827378),o=n(813306),a=n(938910);function useMarkdownSyntaxOptions(){var e,t,n,r;let s=(0,i.useContext)(o.p),l=null==s?void 0:s.markdownSyntaxConfig;return{boldToken:null!==(e=null==l?void 0:l.boldToken)&&void 0!==e?e:a.BoldToken.ASTERISK,italicToken:null!==(t=null==l?void 0:l.italicToken)&&void 0!==t?t:a.ItalicToken.ASTERISK,bulletListToken:null!==(n=null==l?void 0:l.bulletListToken)&&void 0!==n?n:a.BulletListToken.ASTERISK,mathToken:null!==(r=null==l?void 0:l.mathToken)&&void 0!==r?r:a.MathToken.DOLLARS}}},311861:function(e,t,n){"use strict";var i=n(824246);n(827378);var o=n(492615),a=n(433536);let r=(0,a.ZL)({container:{height:"100%",background:"white",display:"flex",overflow:"hidden"}});t.Z=e=>{let{id:t,attachmentBody:n}=e,a=r();return(0,i.jsxs)("div",{className:a.container,children:[n&&(0,i.jsx)(o.Z,{subtask:n,responses:[{name:"Response",response:n.response}]},t),!n&&(0,i.jsx)("div",{children:"Could not find attachment."})]})}},261415:function(e,t,n){"use strict";n.d(t,{Z:function(){return common_InstructionFeedbackFormWrapper}});var i=n(824246),o=n(827378),a=n(433536),r=n(352991),s=n(320280),l=n(52781),d=n(50682),c=n.n(d),u=n(165168),common_ExperimentTaskInfoModal=e=>{let{subtask:t}=e,[n,a]=(0,o.useState)(!1),[l,d]=(0,o.useState)(!1),[c,p]=(0,o.useState)(!1),[h,m]=(0,o.useState)(!1),performOptOut=async()=>{await (0,r.ZP)(null,"internal/self_serve/tasker/opt_out",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subtask:t})}),d(!0)},performFullOptOut=async()=>{await (0,r.ZP)(null,"internal/self_serve/tasker/opt_out_permanent",{method:"POST",headers:{"Content-Type":"application/json"}}),m(!0)},close=()=>{a(!1)},g=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{padding:12,paddingTop:0},children:[(0,i.jsx)("div",{style:{fontWeight:"bold"},children:"What is an Experiment Task?"}),(0,i.jsxs)("div",{style:{},children:["Experiment Tasks are special tasks that ",(0,i.jsx)("b",{children:"pay more"})," than regular tasks. In addition to correctly annotating the task, we'd like to hear any feedback you have about how we can make the instructions better. Be sure to give feedback about the instructions, ",(0,i.jsx)("b",{children:"not"})," ","any existing work on the task."]})]}),(0,i.jsxs)("div",{style:{padding:12},children:[(0,i.jsx)("div",{style:{fontWeight:"bold"},children:"Why did I get this task?"}),(0,i.jsxs)("div",{style:{},children:["You were chosen for this task because of the ",(0,i.jsx)("b",{children:"high quality"})," of your work on other projects. Good job! Keep up the good work to get more tasks like this and earn more money!"]})]}),(0,i.jsxs)("div",{style:{padding:12},children:[(0,i.jsx)("div",{style:{fontWeight:"bold"},children:"Why wasn't there any training?"}),(0,i.jsx)("div",{style:{},children:"Experiment tasks are for very new projects that don't have training yet! That is why we need your help to make the training as good as possible."})]}),(0,i.jsxs)("div",{style:{padding:12},children:[(0,i.jsx)("div",{style:{fontWeight:"bold"},children:"How do I write good feedback?"}),(0,i.jsx)("div",{style:{},children:(0,i.jsx)("a",{onClick:()=>p(!0),children:"Learn how to write good feedback"})})]}),(0,i.jsxs)("div",{style:{padding:12},children:[(0,i.jsx)("div",{style:{fontWeight:"bold"},children:"Don't want to work on this project?"}),(0,i.jsx)("div",{style:{paddingBottom:12},children:"No problem, you can opt out below"}),l?(0,i.jsxs)("span",{children:["Done opting out! ",(0,i.jsx)("a",{href:"/tasks",children:"Return to tasking"})]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.zx,{onClick:async()=>{await performOptOut()},children:"Opt out of project"})})]}),(0,i.jsxs)("div",{style:{padding:12},children:[(0,i.jsx)("div",{style:{fontWeight:"bold"},children:"Don't want to work on experiment tasks at all?"}),(0,i.jsxs)("div",{style:{paddingBottom:12},children:["You can ",(0,i.jsx)("b",{children:"permanently"})," opt out from all experiment tasks below"]}),h?(0,i.jsxs)("span",{children:["Done opting out! ",(0,i.jsx)("a",{href:"/tasks",children:"Return to tasking"})]}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.zx,{onClick:async()=>{await performFullOptOut()},children:"Opt out of all experiment tasks (permanent)"})})]})]}),x=(0,i.jsxs)("div",{style:{maxHeight:600,overflowY:"scroll"},children:[(0,i.jsx)("div",{children:"If the Instructions are not clear enough and you don't fully understand the expected workflow for each task, you should mark the option I have concerns about the task. Instructions Feedback will have to include the missing areas so the customer can then improve their instructions. It is very important that Instructions are well explained and include examples of a correct task. If the Instructions are clear and you fully understand what to do in the task, please select I confidently completed the task. Well done tasks will then be used to train future taskers in this project, so please make sure that your task is as perfect as it can be."}),(0,i.jsx)("br",{}),(0,i.jsx)("div",{style:{fontWeight:500},children:"Examples of good feedback:"}),(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:["The instructions do not include a step by step workflow. It would help a lot if the instructions also included image examples of correct vs incorrect annotations in order to achieve the project's expectations."," "]}),(0,i.jsxs)("li",{children:["The instructions include what to do in Red images, but there are Yellow images that are not included in the instructions. It would be helpful to add all of the potential Edge Cases that might appear so labelers know what to expect and how to act upon these cases."," "]}),(0,i.jsxs)("li",{children:["Instructions are clear and straightforward, but visual examples are needed for the minimum size annotations because far away objects become very blurry and difficult to identify correctly."," "]}),(0,i.jsxs)("li",{children:["The third section of the Instructions called Label Attributes are missing visual examples of how to correctly select attributes for X label and Z label."," "]}),(0,i.jsxs)("li",{children:["It is unclear if X label should include Z and Y objects. Apart from that, the instructions are very straightforward."," "]}),(0,i.jsxs)("li",{children:["The project's expectations are unclear because there is no description in the instructions of what the minimum size annotations should be. There are objects far away that are too blurry to identify as X or Z labels, so it would be very helpful if the instructions added more detail on what to do in these cases."," "]})]}),(0,i.jsx)("br",{}),(0,i.jsx)("div",{style:{fontWeight:500},children:"Examples of bad feedback:"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"Instructions are good and clear."}),(0,i.jsx)("li",{children:"I read everything and understood everything."}),(0,i.jsx)("li",{children:"I do not understand a section of the instructions."}),(0,i.jsx)("li",{children:"This task is shorter than what I expected. "}),(0,i.jsx)("li",{children:"Image is too blurry."})]}),(0,i.jsxs)("div",{children:["Make sure that the feedback always includes suggestions of what specifically can be improved when something is unclear."," "]}),(0,i.jsx)("br",{}),(0,i.jsx)("a",{onClick:()=>p(!1),children:"Go back"})]});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.u_,{maxWidth:1200,isOpen:n,onRequestClose:close,children:[(0,i.jsx)(u.xB,{onRequestClose:close,children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,i.jsxs)("svg",{width:"36",height:"36",viewBox:"0 0 110 110",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("rect",{width:"110",height:"110",fill:"#E5E5E5"}),(0,i.jsx)("rect",{width:"810",height:"2420",transform:"translate(-120 -1500)",fill:"white"}),(0,i.jsx)("path",{d:"M55 110C85.3757 110 110 85.3757 110 55C110 24.6243 85.3757 0 55 0C24.6243 0 0 24.6243 0 55C0 85.3757 24.6243 110 55 110Z",fill:"#035670"}),(0,i.jsx)("path",{d:"M62.5 22.5H47.5C46.12 22.5 45 23.62 45 25C45 26.38 46.12 27.5 47.5 27.5H62.5C63.88 27.5 65 26.38 65 25C65 23.62 63.88 22.5 62.5 22.5Z",fill:"#29CD9C"}),(0,i.jsx)("path",{d:"M62.5 27.5H47.5V42.5H62.5V27.5Z",fill:"#EDDEBF"}),(0,i.jsx)("path",{d:"M62.5 27.5H47.5V30H62.5V27.5Z",fill:"#A0D3F0"}),(0,i.jsx)("path",{d:"M36.5203 87.5L62.5003 42.5H47.5003L29.0203 74.51C25.6853 80.285 29.8553 87.5 36.5203 87.5Z",fill:"#29CD9C"}),(0,i.jsx)("path",{d:"M73.48 87.5L47.5 42.5H62.5L80.98 74.51C84.315 80.285 80.145 87.5 73.48 87.5Z",fill:"#A0D3F0"}),(0,i.jsx)("path",{d:"M73.4805 87.5L55.0005 55.49L36.5205 87.5H73.4805Z",fill:"#EDDEBF"})]}),(0,i.jsx)("span",{style:{marginLeft:12},children:"Experiment Tasks"})]})}),(0,i.jsx)("div",{style:{padding:12},children:c?x:g}),(0,i.jsx)(u.fe,{})]}),(0,i.jsxs)("div",{style:{fontSize:16},children:["You got an experiment task! \uD83C\uDF89",(0,i.jsx)("a",{style:{paddingLeft:8},onClick:()=>a(!0),children:"Learn More / Opt Out"})]}),(0,i.jsxs)("div",{style:{marginTop:8,fontSize:14,opacity:.5},children:["Experiment tasks pay 30-50% more than regular tasks. To continue getting tasks like these, complete the task with high quality and leave instruction feedback below. Be sure to give feedback about the instructions, ",(0,i.jsx)("b",{children:"not"})," any existing work on the task."]})]})},p=n(340048),h=n(298784),m=n.n(h);let AutocompleteTextArea=e=>{let t=o.createRef(),n=e.isScaleStudio?"Add feedback about the task instructions. Was anything unclear? What could have made it better?\n\nYou can use '@' to mention specific labels":'Please take the time to read the instructions carefully and leave detailed feedback. We want to hear from you how the instructions can be improved. Avoid phrases such as "Instructions were clear" or "Instructions were well-written" as that is not very helpful. Be sure to leave feedback about the instructions, not any work already performed on the task.\n\nPlease don\'t rush! If your feedback is poor, you will get less Experiment Tasks in the future and you miss out on the bonus pay!\n\nYou can use \'@\' to mention specific labels\n    ';return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{height:"200px"},children:(0,i.jsx)(l.r,{style:{height:"200px",suggestions:{list:{backgroundColor:"white",border:"1px solid rgba(0,0,0,0.15)",fontSize:14},item:{padding:"0px 12px",borderBottom:"1px solid rgba(0,0,0,0.15)","&focused":{backgroundColor:"#cee4e5"}}}},value:e.value,onChange:e.onChange,placeholder:n,inputRef:t,children:(0,i.jsx)(l.p,{appendSpaceOnAdd:!0,trigger:"@",displayTransform:e=>"@".concat(e),data:e.data,onAdd:e.onAdd,markup:"@[__display__]"})})}),(0,i.jsx)("samp",{})]})},g=["clear","concise","well-written","pay","payement","payment","easy","tasker","claim"],checkTaskerWarning=(e,t,n,i)=>{if(i>.9)return confirm('Are you sure the task is done correctly? We\'ve detected a potential issue with your work. Please make sure the task is labeled correctly. Submitting incomplete work will cause you to miss out on tasks that pay 30-50% bonus. If you prefer not to work on this task, please use the "Opt out" button.');if(t===e&&i>.25)return confirm("Are you sure the feedback is good quality? You haven't edited the feedback. If feedback is poor you will miss out on 30-50% bonus pay.");let o=e.toLowerCase().split(" ");if(m().some(o,e=>g.includes(e))&&i>.1)return confirm("Are you sure you've added helpful feedback about the instructions? You won't get full credit if the feedback is not helpful.");if(n){let e="Are you sure the task is complete? Please complete the task before writing your feedback. If anything is unclear, try your best and then add feedback to justify why you labeled the task this way. Otherwise, you will not get full credit.";if(n.elapsedTime()/1e3<60&&i>.5||n.elapsedTime()/1e3<120&&i>.65||n.elapsedTime()/1e3<300&&i>.8)return confirm(e)}return!0},x=(0,a.ZL)({instructionFeedbackForm:{padding:"16px",alignItems:"center",backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:8,position:"absolute",bottom:"0",right:"0",zIndex:9,width:"min(100%, 600px)"},instructionFeedbackFormLidar:{padding:"16px",alignItems:"center",backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:8,position:"absolute",width:"min(100%, 600px)",top:"0",zIndex:9},sectionTitle:{fontWeight:"bold",padding:"4px"},section:{padding:"4px"},buttonInnerWrapper:{width:"-webkit-fill-available",boxSizing:"border-box",backgroundColor:"white",padding:"4px",marginTop:"8px",marginBottom:"8px",borderRadius:"15px"}});var common_InstructionFeedbackForm=e=>{let{taskTimer:t,subtask:n,onClose:o,setSubmit:a,labels:l,lidar:d,onChange:u,onAdd:h,text:m,originalText:g,onSetConfidence:f,isConfident:v,taggedLabels:b,isScaleStudio:y,feedbackRequired:w=!1,readOnly:j=!1}=e,k=x(),C=Math.random(),onSubmit=async()=>{if(!y&&!checkTaskerWarning(m,g,t,C))return;let e=b.filter(e=>m.includes(e)),i={text:m,confidence:(void 0===v?.5:v?1:0).toString(),taggedLabels:e},s={subtask:n,feedback:JSON.stringify(i)};await (0,r.ZP)(null,"internal/self_serve/instruction_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),a(),o()},A=l.map(e=>({id:e,display:e})),T=w&&m.trim().length<p.VM&&!(y&&v)?"Please write more about your thinking process":void 0,renderForm=()=>{let e=void 0!==v;return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{children:[!y&&(0,i.jsx)("div",{className:k.section,children:(0,i.jsx)("div",{className:k.sectionTitle,children:(0,i.jsx)(common_ExperimentTaskInfoModal,{subtask:n})})}),(0,i.jsxs)("div",{className:k.section,children:[(0,i.jsx)("div",{className:k.sectionTitle,children:"Instruction Feedback"}),(0,i.jsx)(AutocompleteTextArea,{data:A,value:m,onChange:j?()=>{}:u,onAdd:h,isScaleStudio:y})]}),(0,i.jsxs)("div",{className:k.section,children:[(0,i.jsx)("div",{className:k.sectionTitle,children:"How confident did you feel completing this task?"}),(0,i.jsx)("div",{className:k.buttonInnerWrapper,style:{border:e&&v?"1px solid #2B99D8":"1px solid #E5E7EB"},children:(0,i.jsx)(s.zx,{onClick:()=>!j&&f(!0),style:{backgroundColor:"white"},children:"I confidently completed the task"})}),(0,i.jsx)("div",{className:k.buttonInnerWrapper,style:{border:e&&!v?"1px solid #2B99D8":"1px solid #E5E7EB"},children:(0,i.jsx)(s.zx,{onClick:()=>!j&&f(!1),style:{backgroundColor:"white"},children:"I have concerns about the task"})}),!j&&(0,i.jsx)("div",{"data-tip":!0,"data-for":"submit-disabled",style:{marginTop:8,display:"inline"},children:(0,i.jsx)(s.zx,{onClick:()=>onSubmit(),disabled:!e||void 0!==T,children:"Submit"})}),T&&(0,i.jsx)(c(),{id:"submit-disabled",type:"dark",children:(0,i.jsx)("div",{style:{fontWeight:"bold"},children:T})}),(0,i.jsx)(s.zx,{onClick:()=>{o()},disabled:!1,style:{marginLeft:4},children:"Close"})]})]})})};return d?(0,i.jsx)("div",{className:k.instructionFeedbackFormLidar,children:renderForm()}):(0,i.jsx)("div",{className:k.instructionFeedbackForm,children:renderForm()})};let DetailedFeedbackForm_AutocompleteTextArea=e=>{let t=o.createRef();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{height:"400px"},children:(0,i.jsx)(l.r,{style:{height:"400px",suggestions:{list:{backgroundColor:"white",border:"1px solid rgba(0,0,0,0.15)",fontSize:14},item:{padding:"0px 12px",borderBottom:"1px solid rgba(0,0,0,0.15)","&focused":{backgroundColor:"#cee4e5"}}}},value:e.value,onChange:e.onChange,placeholder:"Tip: this is slightly different from an Experiment Task. You must write good feedback in order to get the $3 bonus.\n\nYou can use '@' to mention specific labels\n\n    ",inputRef:t,children:(0,i.jsx)(l.p,{appendSpaceOnAdd:!0,trigger:"@",displayTransform:e=>"@".concat(e),data:e.data,onAdd:e.onAdd,markup:"@[__display__]"})})}),(0,i.jsx)("samp",{})]})},f=(0,a.ZL)({instructionFeedbackForm:{padding:"16px",alignItems:"center",backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:8,position:"absolute",bottom:"0",right:"0",zIndex:9,width:"min(100%, 800px)"},sectionTitle:{fontWeight:"bold",padding:"4px"},section:{padding:"4px"},buttonInnerWrapper:{width:"-webkit-fill-available",boxSizing:"border-box",backgroundColor:"white",padding:"4px",marginTop:"8px",marginBottom:"8px",borderRadius:"15px"}});var common_DetailedFeedbackForm=e=>{let{subtask:t,onClose:n,setSubmit:o,labels:a,onChange:l,onAdd:d,text:u,taggedLabels:h,feedbackRequired:m=!1,readOnly:g=!1}=e,x=f(),onSubmit=async()=>{let e=h.filter(e=>u.includes(e)),i={subtask:t,feedback:JSON.stringify({text:u,confidence:1,taggedLabels:e})};await (0,r.ZP)(null,"internal/self_serve/instruction_feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),o(),n()},v=a.map(e=>({id:e,display:e})),b=m&&u.trim().length<p.VM?"Please write more about your thinking process":void 0;return(0,i.jsx)("div",{className:x.instructionFeedbackForm,children:(0,i.jsx)("div",{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:16},children:"You got a feedback task! \uD83D\uDCDD"}),(0,i.jsxs)("div",{style:{marginTop:8,fontSize:14,opacity:.5},children:[(0,i.jsx)("div",{style:{marginBottom:8},children:"The main goal if this task is to provide detailed feedback about the task instructions. If your feedback is accepted, you will be awarded a bonus of $3."}),"Steps for writing great feedback:",(0,i.jsxs)("ol",{children:[(0,i.jsx)("li",{children:"Read the instructions carefully"}),(0,i.jsx)("li",{children:"Try to label the task"}),(0,i.jsx)("li",{children:"Was anything unclear? What can be improved about the instructions?"}),(0,i.jsxs)("li",{children:["Provide ",(0,i.jsx)("b",{children:"detailed"})," feedback in complete sentences. Aim for at least 5 sentences."]})]})]}),(0,i.jsxs)("div",{className:x.section,children:[(0,i.jsx)("div",{className:x.sectionTitle,children:"Instruction Feedback"}),(0,i.jsx)(DetailedFeedbackForm_AutocompleteTextArea,{data:v,value:u,onChange:l,onAdd:d})]}),(0,i.jsxs)("div",{className:x.section,children:[!g&&(0,i.jsx)("div",{"data-tip":!0,"data-for":"submit-disabled",style:{marginTop:8,display:"inline"},children:(0,i.jsx)(s.zx,{onClick:()=>onSubmit(),disabled:void 0!==b,children:"Submit"})}),b&&(0,i.jsx)(c(),{id:"submit-disabled",type:"dark",children:(0,i.jsx)("div",{style:{fontWeight:"bold"},children:b})}),(0,i.jsx)(s.zx,{onClick:()=>{n()},disabled:!1,style:{marginLeft:4},children:"Close"})]})]})})})};let v={"0.5":void 0,1:!0,0:!1};var common_InstructionFeedbackFormWrapper=e=>{let{projectId:t,taskTimer:n,openModal:a,subtask:s,onClose:l,setSubmit:d,labels:c,lidar:u,isScaleStudio:p,feedbackRequired:h=!1,readOnly:g=!1}=e,[x,f]=(0,o.useState)(void 0),[b,y]=(0,o.useState)(""),[w,j]=(0,o.useState)(""),[k,C]=(0,o.useState)([]),[A,T]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{y("")},[s]),(0,o.useEffect)(()=>{if(a&&""===b){let e=!1,fetchData=async e=>{let{instructionFeedback:t,canBypassFeedback:n}=await (0,r.ZP)(null,"internal/self_serve/fetch_instruction_feedback",{query:{subtask:s}});if(!e){let e=m().get(t,"text","");y(e),j(e);let i=m().get(t,"confidence","0.5"),o=v[i];f(o),T(n)}};return fetchData(e),function(){e=!0}}},[a]),a)?"6381a25a4f69350021336d35"===t?(0,i.jsx)(common_DetailedFeedbackForm,{taskTimer:n,subtask:s,onClose:l,setSubmit:d,labels:c,text:b,originalText:w,taggedLabels:k,onChange:e=>{y(e.target.value)},onAdd:e=>{let t=new Set(k);t.add(e.toString()),C(Array.from(t))},feedbackRequired:h,readOnly:g}):(0,i.jsx)(common_InstructionFeedbackForm,{taskTimer:n,subtask:s,onClose:l,setSubmit:d,labels:c,text:b,originalText:w,taggedLabels:k,onChange:e=>{y(e.target.value)},onAdd:e=>{let t=new Set(k);t.add(e.toString()),C(Array.from(t))},onSetConfidence:e=>f(e),isConfident:x,lidar:u,isScaleStudio:p,feedbackRequired:h&&!A,readOnly:g}):(0,i.jsx)("div",{})}},24880:function(e,t,n){"use strict";var i=n(824246),o=n(252708),a=n.n(o),r=n(720227);t.Z=e=>{let{enableRTL:t=!1,disableFlex:n=!1,disableContent:o=!1,disabledOpacity:s=.5,className:l="",children:d}=e;return(0,i.jsxs)("div",{dir:t?"rtl":"ltr",className:(0,r.m)(n?void 0:"flex flex-1 relative",t?"text-right":void 0,"transition-opacity duration-500 ease-linear",l),style:{opacity:o?s:1},children:[o&&(0,i.jsx)("div",{className:"absolute w-full h-full z-[999]",onClick:()=>{a().warning("You must save changes before editing other steps.",{timeout:3e3})}}),d]})}},533024:function(e,t,n){"use strict";var i=n(824246),o=n(827378),a=n(573685);let wrapText=(e,t,n)=>{let i=0;if(!e)return;let o="";for(;i<n;){o+=t+" ";let a=e.measureText(o),r=a.width;r>n&&(e.fillText(o,0,i),o="",i+=25)}e.fillText(o,0,i)},r=(0,a.ZL)({container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:3,overflow:"hidden",pointerEvents:"none"}});t.Z=e=>{let{loggedUserId:t="USERID"}=e,n=o.useRef(null),a=o.useRef(null),s=r();return o.useEffect(()=>{let e=n.current,i=a.current;if(!i||!e)return;let o=i.getContext("2d");if(!o)return;let r=e.offsetWidth||700,s=e.offsetHeight||700,l=Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(s,2)));i.width=l,i.height=l,o.font="normal 14px Arial",o.translate(-r/4,s/2),o.rotate(-Math.PI/4),o.fillStyle="#bbb",o.globalAlpha=.2,wrapText(o,t,l),o.restore()},[t]),(0,i.jsx)("div",{ref:n,className:s.container,children:(0,i.jsx)("canvas",{ref:a})})}},197649:function(e,t,n){"use strict";n.d(t,{Z:function(){return AttachmentCarousel}});var i,o,a=n(824246),r=n(827378),s=n(433536),l=n(632883),d=n(963494),c=n(60042),u=n.n(c),p=n(827131),h=n(616216),m=n(298784),g=n.n(m),x=n(50682),f=n.n(x),v=n(390547),b=n(220373),y=n(701245),w=n.n(y),j=n(280219),k=n(400070);function FocusBoxTooltip(e){let t=C(),n=(0,j.b8)(e.bbox);return(0,a.jsx)("div",{className:t.box,style:n,children:(0,a.jsx)(k.ZP,{placement:"top",open:!0,title:"Possible match",classes:{tooltip:t.tooltip},children:(0,a.jsx)("div",{className:t.target})})})}let C=(0,b.Z)({box:{position:"absolute",background:"rgba(221, 79, 223, 0.1)",border:"2px solid #DD4FDF",borderRadius:"2px",boxSizing:"border-box"},tooltip:{padding:"0 4px",background:"#DD4FDF",borderRadius:"2px",color:"white",fontWeight:500,fontSize:"11px",lineHeight:"16px",margin:"1px 0"},target:{height:"16px"}});var A=n(630835),T=n(673339),S=n(436878),I=n(664755),P=n(352991),D=n(204864);let useZoomHook=e=>{let t=e.size.width-2*N,n=e.size.height-2*N,[i,o]=r.useState({width:1,height:1}),[s,l]=r.useState(1),d=t*s,c=n*s,u=i.width,p=i.height,h=u/d,m=p/c,x=Math.max(h,m),f=u/x,v=p/x,fixPan=function(i,o,a){let r=.5,s=.5;a&&(r=a.x/d,s=a.y/c);let l=t*(o-i)*r,u=n*(o-i)*s;setTimeout(()=>{(!e.canvas||e.canvas.current)&&e.canvas&&e.canvas.current&&(e.canvas.current.scrollLeft+=Math.round(l),e.canvas.current.scrollTop+=Math.round(u))},0)},setZoomPan=function(e,t){l(n=>{let i=e(n);return fixPan(n,i,t),i})},onZoomIncrease=()=>{setZoomPan(getZoomLevelIncrease)},b=g().range(1,101),getZoomLevelDecrease=function(e){for(let t=b.length-1;t>=0;t--)if(b[t]<e)return b[t];return e},getZoomLevelIncrease=function(e){for(let t of b)if(t>e)return t;return e};return{imageSize:i,setImageSize:o,ctxWidth:d,ctxHeight:c,imgWidth:u,imgHeight:p,ratioWidth:h,ratioHeight:m,ratioAspect:x,newWidth:f,newHeight:v,offsetX:d/2-f/2,offsetY:c/2-v/2,zoom:s,setZoom:l,fixPan,setZoomPan,onZoomIncrease,onZoomDecrease:()=>{setZoomPan(getZoomLevelDecrease)},onDoubleClick:t=>{if(!e.canvas.current){onZoomIncrease();return}let n=e.canvas.current.getBoundingClientRect(),i={x:t.pageX-n.left,y:t.pageY-n.top};setZoomPan(getZoomLevelIncrease,i)},formatPercent:function(e){return Math.round(100*e).toString(10)+"%"},Minus:function(){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M12.8 6.7998H3.19999C2.75824 6.7998 2.39999 7.15805 2.39999 7.5998V8.3998C2.39999 8.84155 2.75824 9.1998 3.19999 9.1998H12.8C13.2417 9.1998 13.6 8.84155 13.6 8.3998V7.5998C13.6 7.15805 13.2417 6.7998 12.8 6.7998Z",fill:"black"})})},Plus:function(){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M12.8 6.80039H9.19999V3.20039C9.19999 2.75864 8.84174 2.40039 8.39999 2.40039H7.59999C7.15824 2.40039 6.79999 2.75864 6.79999 3.20039V6.80039H3.19999C2.75824 6.80039 2.39999 7.15864 2.39999 7.60039V8.40039C2.39999 8.84214 2.75824 9.20039 3.19999 9.20039H6.79999V12.8004C6.79999 13.2421 7.15824 13.6004 7.59999 13.6004H8.39999C8.84174 13.6004 9.19999 13.2421 9.19999 12.8004V9.20039H12.8C13.2417 9.20039 13.6 8.84214 13.6 8.40039V7.60039C13.6 7.15864 13.2417 6.80039 12.8 6.80039Z",fill:"black"})})},getZoomLevelDecrease,getZoomLevelIncrease,zoomLevels:b}},N=24;function PanZoomImage(e){let t=r.useRef(null),n=r.useRef(null),[i,o]=r.useState(!1),s=r.useRef(null),l=(0,A.Iq)(1),[d,c]=r.useState(0),[u,p]=r.useState(1),[h,m]=r.useState(1),[x,b]=r.useState(e.src),y=R({footerVisible:i}),k={size:{width:e.size.width,height:e.size.height},canvas:t},C=useZoomHook(k),{setImageSize:S,imgWidth:N,imgHeight:B,newWidth:M,newHeight:F,offsetX:E,offsetY:L,zoom:Z,onZoomIncrease:z,onZoomDecrease:O,onDoubleClick:H,formatPercent:V,Minus:U,Plus:W,zoomLevels:G}=C;r.useEffect(()=>{let{Bucket:t}=(0,D.fromS3Url)(e.src);if("sensitive-cu-documents"===t){let signUrl=async()=>{(0,P.ZP)(null,"internal/sensitive-content-review/signTrustAndSafetyUrl",{method:"GET",query:{url:e.src}}).then(e=>{b(e.url)}).catch(()=>{b(e.src)})};signUrl()}else b(e.src)},[e.src]),r.useEffect(()=>{let e=new Image;e.onload=function(){S({width:e.naturalWidth,height:e.naturalHeight})},e.src=x},[x]),r.useEffect(()=>{if(n.current){let handleMouseMove=()=>{g().isNil(s.current)||window.clearTimeout(s.current),o(!0);let e=window.setTimeout(()=>{o(!1)},2e3);s.current=e};return n.current.addEventListener("mousemove",handleMouseMove),()=>{var e;null===(e=n.current)||void 0===e||e.removeEventListener("mousemove",handleMouseMove)}}},[n.current]),r.useEffect(()=>{if(e.disabled)return;let t=new(w())(document.documentElement);return t.bind("plus",function(){z()}),t.bind("minus",function(){O()}),()=>{t.detach()}},[O,z,e.disabled]);let q=e.boxes.filter(e=>e.render===j.Eb.Highlight),K=e.boxes.filter(e=>e.render===j.Eb.PossibleMatch);return(0,a.jsxs)("div",{ref:n,className:y.box,children:[(0,a.jsx)("div",{ref:t,className:y.viewport,children:(0,a.jsx)("div",{className:y.canvas,onDoubleClick:H,style:{width:V(Z),height:V(Z),...l},children:(0,a.jsx)("div",{className:y.image,style:{position:"absolute",top:L,left:E,width:M,height:F,backgroundImage:"url(".concat(x,")"),transform:"rotate(".concat(d,"deg)"),filter:"brightness(".concat(100*u,"%) contrast(").concat(100*h,"%)"),...l},children:(0,a.jsxs)("div",{className:y.overlays,children:[e.editBoundingBoxMode&&e.updateBoundingBoxField&&(0,a.jsx)(T.Z,{value:e.boundingBoxField,onUpdate:e.updateBoundingBoxField,naturalWidth:N,naturalHeight:B,offsetWidth:M,offsetHeight:F}),!e.disabled&&K.map(e=>{let t="tooltip,".concat(e.left.toFixed(6),",").concat(e.top.toFixed(6));return(0,a.jsx)(FocusBoxTooltip,{bbox:e},t)}),q.map(e=>{let t="keyword,".concat(e.left.toFixed(6),",").concat(e.top.toFixed(6)),n=(0,j.b8)(e);return(0,a.jsx)("div",{className:y.highlight,style:n},t)})]})})})}),(0,a.jsxs)("div",{className:y.footer,children:[(0,a.jsxs)("div",{className:y.toolbar,style:l,children:[(0,a.jsx)(v.Z,{disabled:Z<=G[0],onClick:O,children:(0,a.jsx)(U,{})}),(0,a.jsx)("div",{className:y.zoom,children:V(Z)}),(0,a.jsx)(v.Z,{disabled:Z>=G[G.length-1],onClick:z,children:(0,a.jsx)(W,{})})]}),(0,a.jsxs)("div",{className:y.toolbar,style:l,"data-tip":!0,"data-for":"icon-rotate",children:[(0,a.jsx)(v.Z,{onClick:()=>{c((d+270)%360)},children:(0,a.jsx)(Rotate90DegCCW,{})}),(0,a.jsx)(f(),{place:"right",id:"icon-rotate",children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{children:"Rotate Image"})})})]}),(0,a.jsx)("div",{className:y.toolbar,style:l,children:(0,a.jsx)(I.Z,{value:u,onAdjust:p,iconName:"sun",toolName:"Image Brightness",adjustmentMultiplier:3})}),(0,a.jsx)("div",{className:y.toolbar,style:l,children:(0,a.jsx)(I.Z,{value:h,onAdjust:m,iconName:"adjust",toolName:"Image Contrast",adjustmentMultiplier:4})})]}),!!e.caption&&(0,a.jsx)("div",{className:y.topbar,children:(0,a.jsx)("div",{className:y.caption,style:l,children:e.caption})})]})}let R=(0,b.Z)({box:{width:"100%",height:"calc(100% - ".concat(2*N,"px)"),position:"relative",padding:N,["@media (max-width: ".concat(S.Et,")")]:{height:"400px"}},viewport:{position:"relative",overflow:"scroll",width:"100%",height:"100%"},canvas:{position:"absolute",top:0,left:0,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"},image:{backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"},overlays:{position:"relative",width:"100%",height:"100%"},footer:e=>{let{footerVisible:t}=e;return{position:"absolute",width:"500px",left:"50%",marginLeft:"-104px",bottom:"12px",display:"flex",flexDirection:"row",opacity:t?1:0,transition:"opacity 0.25s"}},topbar:{position:"absolute",left:"40px",top:"12px",display:"flex",flexDirection:"row"},toolbar:{background:"#FFFFFF",boxShadow:"0px 3px 12px rgba(0, 0, 0, 0.15)",borderRadius:"4px",textAlign:"center",padding:"4px",margin:"4px"},zoom:{display:"inline-block",color:"#808080",fontSize:"11px",lineHeight:"16px",letterSpacing:"0.1px",textAlign:"center",width:"4em",userSelect:"none"},highlight:{position:"absolute",background:"rgba(43,153,216,0.25)",borderBottom:"2px solid #4767D0",boxSizing:"content-box"},caption:{background:"#FFFFFF",boxShadow:"0px 3px 12px rgba(0, 0, 0, 0.15)",borderRadius:"4px",textAlign:"center",paddingLeft:"8px",paddingRight:"8px",paddingTop:"4px",paddingBottom:"4px",margin:"4px"}}),Rotate90DegCCW=function(){return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",viewBox:"0 0 24 24",width:"16",children:[(0,a.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,a.jsx)("path",{d:"M7.34 6.41L.86 12.9l6.49 6.48 6.49-6.48-6.5-6.49zM3.69 12.9l3.66-3.66L11 12.9l-3.66 3.66-3.65-3.66zm15.67-6.26C17.61 4.88 15.3 4 13 4V.76L8.76 5 13 9.24V6c1.79 0 3.58.68 4.95 2.05 2.73 2.73 2.73 7.17 0 9.9C16.58 19.32 14.79 20 13 20c-.97 0-1.94-.21-2.84-.61l-1.49 1.49C10.02 21.62 11.51 22 13 22c2.3 0 4.61-.88 6.36-2.64 3.52-3.51 3.52-9.21 0-12.72z"})]})};var B=n(266301),M=n(803375),F=n(554616),E=n(749323),L=n(422821),Z=n(311861);let WaveSurfer=e=>{let{children:t,onMount:n}=e;return null},WaveForm=e=>{let{id:t,className:n}=e;return null};var z=n(792739),O=n(827798),H=n(789e3),V=n(614720);function TranscriptionAudioAttachmentTooltip(){let e=U();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:e.infoIcon,"data-tip":!0,"data-for":"keyboard-shortcut-menu",children:(0,a.jsx)(z.FontAwesomeIcon,{icon:"info-circle",color:"gray"})}),(0,a.jsx)(f(),{id:"keyboard-shortcut-menu",place:"top",type:"light",multiline:!0,effect:"float",children:(0,a.jsxs)("div",{className:e.documentationText,children:[(0,a.jsx)("h3",{children:"KEYBOARD SHORTCUTS"}),(0,a.jsxs)("div",{className:e.shortcut,children:[(0,a.jsx)("div",{children:"Play/pause"}),(0,a.jsx)(V.Z,{children:"Ctrl"})]}),(0,a.jsxs)("div",{className:e.shortcut,children:[(0,a.jsx)("div",{children:"Rewind 5 seconds"}),(0,a.jsx)(V.Z,{children:"Left"})]}),(0,a.jsxs)("div",{className:e.shortcut,children:[(0,a.jsx)("div",{children:"Forward 5 seconds"}),(0,a.jsx)(V.Z,{children:"Right"})]}),(0,a.jsxs)("div",{className:e.shortcut,children:[(0,a.jsx)("div",{children:"Slow down"}),(0,a.jsxs)("div",{className:e.comboKeys,children:[(0,a.jsx)(V.Z,{children:"Shift"}),(0,a.jsx)("div",{children:"+"}),(0,a.jsx)(V.Z,{children:"Left"})]})]}),(0,a.jsxs)("div",{className:e.shortcut,children:[(0,a.jsx)("div",{children:"Speed up"}),(0,a.jsxs)("div",{className:e.comboKeys,children:[(0,a.jsx)(V.Z,{children:"Shift"}),(0,a.jsx)("div",{children:"+"}),(0,a.jsx)(V.Z,{children:"Right"})]})]}),(0,a.jsxs)("div",{className:e.shortcut,children:[(0,a.jsx)("div",{children:"Volume down"}),(0,a.jsx)(V.Z,{children:"Down"})]}),(0,a.jsxs)("div",{className:e.shortcut,children:[(0,a.jsx)("div",{children:"Volume up"}),(0,a.jsx)(V.Z,{children:"Up"})]}),(0,a.jsxs)("div",{className:e.shortcut,children:[(0,a.jsx)("div",{children:"Copy current position"}),(0,a.jsx)(V.Z,{children:"C"})]})]})})]})}let U=(0,b.Z)({infoIcon:{paddingLeft:"8px",textAlign:"left",lineHeight:"32px",cursor:"pointer"},documentationText:{whiteSpace:"pre-line",color:"#5e5e5e",backgroundColor:"white",fontWeight:200,borderRadius:4,width:200},shortcut:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:13,margin:"12px 0"},comboKeys:{flexDirection:"row",display:"flex"},shortcutKeys:{alignItems:"center"},shortcutKey:{padding:"2px 6px",border:"solid 1px #ccc",borderRadius:4,fontSize:12},combo:{padding:"0 4px"}}),W={speedStep:.25,speedMin:.5,speedMax:1.5,volumeStep:.025,volumeMin:.01,volumeMax:1},G=(0,H.Z)({root:{color:"#5e5e5e",width:162,marginLeft:8,marginRight:8},thumb:{backgroundColor:"#5e5e5e",transition:"box-shadow 250ms ease-out","&:hover":{boxShadow:"0 0px 12px rgba(255,255,255,0.7)"}},active:{boxShadow:"0 0px 12px rgba(255,255,255,0)"},focusVisible:{boxShadow:"0 0px 12px rgba(255,255,255,0)"}})(O.Z);function TranscriptionAudioAttachmentControls(e){let{handleSpeed:t,handleVolumeChange:n,handleBack:i,handleForward:o,handlePlayPause:r,loading:s,playing:l,currentTime:d,duration:c,speed:u,volume:p,timeFontSize:h}=e,m=q();return(0,a.jsxs)("div",{className:m.controls,children:[(0,a.jsxs)("div",{className:m.sliders,children:[(0,a.jsxs)("div",{className:m.slider,children:[(0,a.jsx)("div",{className:m.iconLabel,children:(0,a.jsx)(z.FontAwesomeIcon,{icon:"rabbit",color:"black"})}),(0,a.jsx)("div",{className:m.tagsWrapper,children:g().range(.5,1.75,.25).map((e,n)=>(0,a.jsx)("div",{className:m.speedTag,style:{color:e===u?"#29CD9C":"#5e5e5e"},onClick:()=>t(e),children:1!==e?e:e+"x"},n))})]}),(0,a.jsxs)("div",{className:m.slider,children:[(0,a.jsx)("div",{className:m.iconLabel,children:(0,a.jsx)(z.FontAwesomeIcon,{icon:"volume",color:"black"})}),(0,a.jsx)(G,{value:p,onChange:(e,t)=>{n(t)},step:.025,min:.01,max:1})]})]}),(0,a.jsxs)("div",{className:m.mainControls,children:[(0,a.jsx)("button",{className:m.skipButton,onClick:i,children:(0,a.jsx)(z.FontAwesomeIcon,{icon:"backward",color:"#5e5e5e"})}),(0,a.jsx)("button",{className:m.playButton,onClick:r,disabled:s,children:l?(0,a.jsx)(z.FontAwesomeIcon,{icon:"pause",color:"#5e5e5e"}):(0,a.jsx)(z.FontAwesomeIcon,{icon:"play",color:"#5e5e5e"})}),(0,a.jsx)("button",{className:m.skipButton,onClick:o,children:(0,a.jsx)(z.FontAwesomeIcon,{icon:"forward",color:"#5e5e5e"})}),(0,a.jsx)("div",{className:m.time,style:{fontSize:h},children:"".concat(d," / ").concat(c)}),(0,a.jsx)(TranscriptionAudioAttachmentTooltip,{})]})]})}let q=(0,b.Z)({controls:{"flex-shrink":0,display:"flex",justifyContent:"center"},mainControls:{padding:12,"flex-shrink":0,display:"flex",alignItems:"center",textAlign:"center",justifyContent:"center"},sliders:{width:216,"flex-shrink":0,padding:"8px 16px","padding-left":0,"border-rigt":"solid 1px #333",color:"black"},playButton:{outline:"none",border:"none",width:56,height:56,background:"#29CD9C",borderRadius:"50%",cursor:"pointer",transition:"all 200ms ease-out","box-shadow":"0 1px 4px rgba(41, 205, 156, 0)","&:hover":{"box-shadow":" 0 2px 25px rgba(41, 205, 156, 0.9)"},"&:disabled":{opacity:.5}},skipButton:{outline:"none",border:"none",height:32,width:32,padding:8,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",opacity:.6,transition:"background 150ms ease-out",cursor:"pointer",background:"rgba(255,255,255,0)","&:hover":{background:"rgba(255,255,255,0.12)"}},slider:{display:"flex",height:32,alignItems:"center","& > label":{width:48,"flex-shrink":0,marginRight:16,fontSize:12,lineHeight:20}},iconLabel:{height:16,width:16,opacity:.5,marginRight:16,display:"flex",alignItems:"center",justifyContent:"center"},tagsWrapper:{width:170,"flex-shrink":0,display:"flex",justifyContent:"space-between"},speedTag:{fontSize:12,fontWeight:500,lineHeight:16,padding:2,width:32,"flex-shrink":0,borderRadius:2,textAlign:"center",cursor:"pointer",opacity:.6,"&:hover":{opacity:1}},time:{width:200,"flex-shrink":0,textAlign:"center",color:"#5e5e5e",fontSize:26},loading:{position:"absolute",left:96,color:"black",opacity:.6}});var K=n(829449),J=n(513735),Q=n(161320),Y=n.n(Q);n(606023);let formatTime=(e,t)=>Y().duration(e,"milliseconds").format("mm:ss",{trim:!1,precision:t});function TranscriptionAudioAttachmentView(e){var t;let n=X(),{url:i,startSelfDestructSequence:o,responseWindow:s}=e,l=null!==(t=e.audioPlaybackPrecision)&&void 0!==t?t:0,[d,c]=(0,r.useState)(!0),[u,p]=(0,r.useState)(.5),[h,m]=(0,r.useState)(1),[g,x]=(0,r.useState)(!1),[f,v]=(0,r.useState)(0),[b,y]=(0,r.useState)(formatTime(0,l)),[j,k]=(0,r.useState)(0),[C,A]=(0,r.useState)(formatTime(0,l)),[T,S]=(0,r.useState)(),I=1===l?24:2===l?22:3===l?18:26,P=(0,r.useRef)(null),D=(0,r.useCallback)(e=>{var t,n,o,a,r,s,l,d,p,h;P.current=e,null==P||null===(t=P.current)||void 0===t||t.load(i),null==P||null===(n=P.current)||void 0===n||n.setProgressColor("#29CD9C"),null==P||null===(o=P.current)||void 0===o||o.setCursorColor("#29CD9C"),null==P||null===(a=P.current)||void 0===a||a.setWaveColor("#5e5e5e"),null==P||null===(r=P.current)||void 0===r||r.on("ready",()=>{P.current.setVolume(u),c(!1),v(0),k(1e3*P.current.getDuration())}),null==P||null===(s=P.current)||void 0===s||s.on("waveform-ready",function(){c(!1)}),null==P||null===(l=P.current)||void 0===l||l.on("loading",()=>{c(!0)}),null==P||null===(d=P.current)||void 0===d||d.on("audioprocess",function(){P.current.isPlaying()&&v(1e3*P.current.getCurrentTime())}),null==P||null===(p=P.current)||void 0===p||p.on("finish",()=>{x(!1)}),null==P||null===(h=P.current)||void 0===h||h.on("seek",()=>{v(1e3*P.current.getCurrentTime())})},[i]);(0,r.useEffect)(()=>{y(formatTime(f,l))},[f,l]),(0,r.useEffect)(()=>{A(formatTime(j,l))},[j,l]),(0,r.useEffect)(()=>{var e;null==P||null===(e=P.current)||void 0===e||e.on("finish",()=>{x(!1),s&&o&&o(s)})},[s]);let N=(0,r.useCallback)(()=>{(null==P?void 0:P.current)&&(P.current.playPause(),x(!g))},[g,x,P]),R=(0,r.useCallback)(()=>{(null==P?void 0:P.current)&&P.current.skipBackward(5)},[P]),B=(0,r.useCallback)(()=>{(null==P?void 0:P.current)&&P.current.skipForward(5)},[P]),M=(0,r.useCallback)(e=>{if(null==P?void 0:P.current){let t=Array.isArray(e)?e[0]:e;p(t),P.current.setVolume(t||1)}},[P,p]),F=(0,r.useCallback)(e=>{(null==P?void 0:P.current)&&(m(e),P.current.setPlaybackRate(e))},[P,m]),E=f.toFixed(3),L=(0,r.useCallback)(()=>{S(E),(0,K.v)(E,{copyRaw:!0}),setTimeout(()=>{S(void 0)},3e3)},[E]);return(0,J.ZP)({trigger:"c",action:L}),(0,r.useEffect)(()=>()=>{var e;null==P||null===(e=P.current)||void 0===e||e.destroy()},[i]),(0,r.useEffect)(()=>{let e=new(w())(document.body);return e.bind(["ctrl"],()=>(N(),!1)),e.bind(["shift+left"],()=>(F(Math.max(W.speedMin,h-W.speedStep)),!1)),e.bind(["shift+right"],()=>(F(Math.min(W.speedMax,h+W.speedStep)),!1)),e.bind(["left"],()=>(R(),!1)),e.bind(["right"],()=>(B(),!1)),e.bind(["up"],()=>(M(Math.min(W.volumeMax,u+W.volumeStep)),!1)),e.bind(["down"],()=>(M(Math.max(W.volumeMin,u-W.volumeStep)),!1)),()=>{e.detach()}},[N,R,B,M,F,W,h,u]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(TranscriptionAudioAttachmentControls,{handleSpeed:F,handleVolumeChange:M,handleBack:R,handleForward:B,handlePlayPause:N,loading:d,playing:g,currentTime:b,duration:C,speed:h,volume:u,timeFontSize:I}),(0,a.jsxs)("div",{style:{marginRight:20,marginLeft:20,justifyContent:"center"},children:[d&&(0,a.jsx)("div",{className:n.loading,children:"Loading audio..."}),(0,a.jsx)(WaveSurfer,{onMount:D,children:(0,a.jsx)(WaveForm,{id:"waveform",className:n.waveform})}),T&&"Copied ".concat(T," to clipboard!")]})]})}let X=(0,b.Z)({waveformWrapper:{width:"100%",margin:"0 auto",display:"flex"},waveform:{"flex-grow":1,padding:8,paddingRight:0,display:"flex",alignItems:"center",position:"relative",marginLeft:8,marginRight:8},loading:{position:"absolute",left:96,color:"black",opacity:.6}});var _=n(208981),$=n(320280),ee=n(837553),et=n(642830),en=n(789018),ei=n(722115);function DownloadableTextAttachmentView(e){let t=eo(),[n,i]=r.useState(null),[o,s]=r.useState(!0),{isHipaaProject:l,isLoading:d}=useIsCoveredByHipaa(e.projectId),[c,u]=r.useState(e.showSensitiveContentWarning),h=(0,ee.o5)("log-downloadable-text-attachment-view",{projectId:e.projectId},{shortCircuit:!e.projectId,defaultValue:!1});r.useEffect(()=>{let fetchData=async()=>{if(d)return;if(l){i(e.attachmentUrl),s(!1);return}let t=await fetch(e.attachmentUrl).then(async t=>{if(200!==t.status)return"[Unable to render content]";{let n=await t.text();h&&et.Z.info("Downloadable text attachment URL fetched",{attachmentUrl:e.attachmentUrl,userId:e.loggedUserId,projectId:e.projectId});try{let e=JSON.parse(n);return e}catch(e){return n}}});i(t),s(!1)};fetchData()},[i,s,e.attachmentUrl,e.loggedUserId,e.projectId,h,l,d]);let m=(0,r.useMemo)(()=>{var e;return"object"==typeof n?JSON.stringify(n,null,2):null!==(e=null==n?void 0:n.toString())&&void 0!==e?e:""},[n]);return o?(0,a.jsx)($.D8,{}):null===n?(0,a.jsx)(ei.Z,{}):l?(0,a.jsx)("object",{className:t.hipaaText,data:n}):(0,a.jsxs)("div",{className:"fs-exclude",children:[(0,a.jsx)(p.X,{className:t.textAttachment,children:renderTextComponent(e,m)}),c&&(0,a.jsxs)($.Vq,{open:!0,maxWidth:"xl",BackdropProps:{classes:{root:t.backDrop}},children:[(0,a.jsx)($.$N,{children:"Warning"}),(0,a.jsx)($.cZ,{children:(0,a.jsx)("div",{style:{width:500},children:(0,a.jsx)($.fS,{children:'The following text may contain highly sensitive content. If you do not wish to view this content, please skip this task. You will not be penalized should you choose to skip this task. If you are comfortable proceeding, please click the "Proceed" button below to attempt this task.'})})}),(0,a.jsxs)($.kX,{children:[(0,a.jsx)($.zx,{type:"primary",onClick:()=>{u(!1)},children:"Proceed"}),(0,a.jsx)($.zx,{type:"secondary",onClick:()=>{et.Z.info("[C4WarningSkip] User: ".concat(e.loggedUserId,", Project: ").concat(e.projectId)),e.handleSkip("Skipped because of C4 Warning","")},children:"Skip"})]})]})]})}let renderTextComponent=(e,t)=>e.useProtectedText?(0,a.jsx)(L.Z,{text:null!=t?t:"",loggedUserId:e.loggedUserId,renderAsPlainText:e.renderAsPlainText,disableLinksInTextAttachment:e.disableLinksInTextAttachment}):e.renderAsPlainText?(0,a.jsx)("div",{children:t}):(0,a.jsx)(B.Z,{text:null!=t?t:"",disableLinksInTextAttachment:e.disableLinksInTextAttachment,addBackgroundToTransparentImages:!0}),eo=(0,s.ZL)({textAttachment:{margin:24,padding:32,lineHeight:1.6,"& tr":{border:"1px solid rgba(0, 0, 0, 0.3)"},"& tr:nth-child(even)":{backgroundColor:"#f2f2f2"},"& th":{border:"1px solid rgb(0, 0, 0, 0.3)",padding:"6px 10px",backgroundColor:"#f2f2f2"},"& td":{border:"1px solid rgba(0, 0, 0, 0.3)",padding:"10px"}},hipaaText:{height:"100%",width:"100%"},textAttachmentOverlay:{backgroundColor:"#191919",color:"#f2f2f2",margin:24,padding:32,lineHeight:1.6},buttonStyle:{border:0,borderRadius:"8px",color:"white",display:"inlineBlock",fontSize:"12px",height:"36px",marginLeft:"12px",padding:"10px",whiteSpace:"nowrap"},backDrop:{backdropFilter:"blur(5px)"}}),useIsCoveredByHipaa=e=>{let[t,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let fetchData=async()=>{if(e){let{isAttachmentCoveredByHipaa:t}=await en.Z.selfserve.fetchProjectAttachmentHipaaCoverage({project:e});t&&n(!0)}o(!1)};try{fetchData()}catch(e){et.Z.info("Error at DownloadableTextAttachmentView useIsCoveredByHipaa")}finally{o(!1)}},[e]),{isHipaaProject:t,isLoading:i}};var ea=n(614385),er=n(294278),es=n(153454),el=n(279220),ed=n(330754),ec=n.n(ed),eu=n(723321),videoComparison=e=>{let{srcVideoUrlA:t,srcVideoUrlB:n,onLoadOrError:i,caption:o="",onEnded:s,allowFileDownload:l=!1,allowPlaybackRate:d=!1,forceFullscreen:c=!1,onlyVisibleOnLoadComplete:u=!1,preventSkip:p=!1,maximumExtraPlayingTime:h,disableVideoScaling:m}=e,g=(0,r.useRef)(null),[x,f]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),{loading:y,value:w,error:j}=(0,el.Z)(async()=>{let e=await fetch(t),i=await fetch(n);if(!e.ok||!i.ok)throw await handleVideoEnd(),Error("Failed to load src content");let o=await e.blob(),a=await i.blob();return{videoA:URL.createObjectURL(o),videoB:URL.createObjectURL(a)}},[t,n]);(0,r.useEffect)(()=>{if(null!==x){let e=setTimeout(()=>b(!0),3e3);return()=>clearTimeout(e)}},[x]);let handleVideoEnd=()=>{x===(null==w?void 0:w.videoB)&&(s&&s(),ec().isEnabled&&ec().isFullscreen&&ec().exit()),b(!1),f(w&&x===w.videoA?w.videoB:null)};return(0,a.jsx)("div",{className:"task-attachment__item task-attachment__item--videoComparison",ref:g,children:y||j||null===x?(0,a.jsx)("button",{onClick:()=>{c&&ec().request(g.current),b(!1),f((null==w?void 0:w.videoA)||null)},style:{position:"absolute",width:"100%",height:"100%",visibility:"visible",background:"#808080",border:"none",fontSize:"6rem"},children:(0,a.jsx)(eu.Z,{htmlColor:"white",fontSize:"inherit"})}):v?(0,a.jsx)(F.Z,{srcVideoUrl:x,onLoadOrError:i,onEnded:handleVideoEnd,onPlay:()=>{!ec().isFullscreen&&ec().isEnabled&&ec().request(g.current)},maximumExtraPlayingTime:h,allowFileDownload:l,caption:o,allowPlaybackRate:d,onlyVisibleOnLoadComplete:u,preventSkip:p,disableThumbnail:!1,forceFullscreen:!1,skipSourceVideoLoadingCheck:!0,onlyPlayWhenFullscreen:!0,playing:!0,disableVideoScaling:m}):(0,a.jsxs)("div",{style:{position:"absolute",width:"100%",height:"100%",visibility:"visible",background:"#808080",color:"white",fontWeight:"700",fontSize:"6rem",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none"},children:["Clip ",x===(null==w?void 0:w.videoA)?"A":"B"]})})},ep=n(692975),eh=n(293030),em=n(166116),eg=n(784397),ex=n(450755),ef=n(753332),ev=n(557299),eb=n(438442);let ey=(0,$.ZL)(()=>({highlightSection:{backgroundColor:"#ccffe6"},normalSection:{},container:{height:"100%",paddingBottom:"15px"},instructionBox:{position:"relative",backgroundColor:"#f2f2f2",height:"145px",width:"100%",overflow:"scroll",borderStyle:"solid"},timeUntilStartNumber:{paddingLeft:"3px"}}));var GenericDataCollection_LiveInstructions=e=>{let t=(0,r.useRef)(null),n=S.ZP.isMobileUserAgent(window.navigator.userAgent),i=ey(n),shouldHighlightSection=t=>t.timeStartSeconds<=e.currentTimeInSeconds&&t.timeEndSeconds>=e.currentTimeInSeconds;return(0,r.useEffect)(()=>{t.current&&t.current.scrollIntoView({behavior:"smooth"})},[t.current]),(0,a.jsx)(em.Z,{className:i.container,children:(0,a.jsx)(eg.Z,{className:i.instructionBox,children:(0,a.jsx)(ex.Z,{children:e.instructions.map((n,o)=>{let r=shouldHighlightSection(n);return(0,a.jsxs)("div",{className:r?i.highlightSection:i.normalSection,ref:r?t:void 0,children:[(0,a.jsxs)(ef.Z,{children:[(0,a.jsx)(ev.Z,{primary:n.header,secondary:n.instructions}),r&&(0,a.jsx)(z.FontAwesomeIcon,{icon:"clock",color:"black",size:"1x"}),r&&(0,a.jsx)("span",{className:i.timeUntilStartNumber,children:Math.max(0,n.timeEndSeconds-e.currentTimeInSeconds)})]}),(0,a.jsx)(eb.Z,{})]},o.toString())})})})})};let ew=(0,$.ZL)(()=>({topbar:{position:"absolute",left:"40px",top:"12px",display:"flex",flexDirection:"row"},caption:{background:"#FFFFFF",boxShadow:"0px 3px 12px rgba(0, 0, 0, 0.15)",borderRadius:"4px",textAlign:"center",paddingLeft:"8px",paddingRight:"8px",paddingTop:"4px",paddingBottom:"4px",margin:"4px"},spinner:{position:"absolute",height:"100%",width:"100%"}}));var videoWithLiveInstructions=e=>{let{srcVideoUrl:t,onLoadOrError:n,caption:i="",onEnded:o,onPlay:s=null,onPause:l=null,allowFileDownload:d=!1,allowPlaybackRate:c=!1,forceFullscreen:u=!1,onlyVisibleOnLoadComplete:p=!1,preventSkip:h=!1,maximumExtraPlayingTime:m,disableThumbnail:g=!1,playing:x=!1,skipSourceVideoLoadingCheck:f=!1,liveInstructions:v}=e,b={file:{attributes:{controlsList:"".concat(!d&&"nodownload"," ").concat(!c&&"noplaybackrate")}}},y=(0,r.useRef)(null),[w,j]=(0,r.useState)(0),[k,C]=(0,r.useState)(!1),[A,T]=(0,r.useState)(0),I=S.ZP.isMobileUserAgent(window.navigator.userAgent),P=ew(I),{loading:D,value:N,error:R}=(0,el.Z)(async()=>{if(!p&&f)return t;let e=await fetch(t);if(!e.ok)throw o&&o(),Error("Failed to load src content");if(!p)return t;{let t=await e.blob();return URL.createObjectURL(t)}},[t]);return(0,a.jsxs)("div",{className:"task-attachment__item task-attachment__item--video",children:[D&&(0,a.jsx)("div",{className:P.spinner,children:(0,a.jsx)(eh.Z,{})}),!D&&!R&&(0,a.jsx)($.xu,{sx:{width:"100%",height:"100%"},children:(0,a.jsxs)("div",{style:{position:"absolute",width:"100%",height:"100%",visibility:"visible"},children:[(0,a.jsx)(ep.Z,{ref:y,style:{position:"relative",top:0,left:0},width:"100%",height:"82%",light:!!g&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mPM+w8AAeEBb2u5MeEAAAAASUVORK5CYII=",playing:g||x,onStart:()=>{T(Math.round(Date.now()/1e3)),n&&n(!0)},onPlay:()=>{s&&s()},onPause:()=>{l&&l(),u&&ec().isEnabled&&ec().isFullscreen&&ec().toggle()},onError:function(){C(!1),n&&n(!1),o&&o()},onSeek:()=>{if(h&&!k&&y.current){let e=y.current.getCurrentTime()-w;e>.01&&y.current.seekTo(w,"seconds")}},onProgress:e=>{let{playedSeconds:t}=e;j(t)},onEnded:()=>{if(g&&y.current&&y.current.showPreview(),u&&ec().isEnabled&&ec().toggle(),m){let e=Math.round(Date.now()/1e3)-A+m;if(w>e){alert("Playback of this video took significantly longer than its duration.\n Please close other tabs and processes, then refresh the task.");return}}C(!0),o&&o()},url:N,controls:!0,config:b}),v&&N&&(0,a.jsx)("div",{style:{position:"relative",paddingTop:"5px",visibility:"visible"},children:(0,a.jsx)(GenericDataCollection_LiveInstructions,{currentTimeInSeconds:Math.floor(w),instructions:v})})]})}),R&&(0,a.jsx)("div",{className:P.topbar,children:(0,a.jsx)("div",{className:P.caption,children:"Failed to load video. Please try refreshing."})}),!!i&&(0,a.jsx)("div",{className:P.topbar,children:(0,a.jsx)("div",{className:P.caption,children:i})})]})},ej=n(281494),ek=n(300574),eC=n(33198),eA=n.n(eC),eT=n(608429),eS=n(428907),eI=n(566892),eP=n(599789),eD=n(711719),eN=n.n(eD);let eR="contenteditable",eB="data-gramm",eM=(0,s.ZL)({chatbotTranscript:{height:"calc(100vh - 420px)",overflowY:"scroll",marginBottom:16},chatbotPrompt:{width:"100%",display:"flex"},chatbotPromptButton:{marginLeft:8,marginTop:7},textAttachment:{margin:24,padding:32,lineHeight:1.6,"& tr":{border:"1px solid rgba(0, 0, 0, 0.3)"},"& tr:nth-child(even)":{backgroundColor:"#f2f2f2"},"& th":{border:"1px solid rgb(0, 0, 0, 0.3)",padding:"6px 10px",backgroundColor:"#f2f2f2"},"& td":{border:"1px solid rgba(0, 0, 0, 0.3)",padding:"10px"}}});var ChatbotRanking_ChatBotView=e=>{var t;let i=eM(),{setRlhfPromptText:o}=e.smartAssistantRlhfHook,s=(0,ej.X)(),l=s.chatBoxTexts,d=e.assignmentId||eN().v4(),[c,u]=(0,eT.Z)("promptTexts"+d,g().range(l.length).map(t=>0===t&&void 0!==e.prefillPrompt?e.prefillPrompt:1===t&&void 0!==e.prefillRefText?e.prefillRefText:"")),[h,m]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),[v,b]=(0,r.useState)(void 0),[y,w]=(0,r.useState)(!1),[j,k]=r.useState([]),[C,A]=r.useState(void 0),[T,S]=(0,r.useState)(s.chatBoxTexts.map(()=>[])),[I,P]=(0,r.useState)([]),[D,N]=(0,r.useState)(void 0),[R,M]=(0,r.useState)(void 0),F=s.isRangedMultiTurn,E=s.fieldsToShow.length>0,L=(0,r.useRef)(null),[Z,z]=(0,r.useState)(null),[O,H]=(0,r.useState)(!1),validatePrompt=async()=>{let t=!0,n=!1;if(!e.projectId)return{validPrompt:t,hasWarnings:n};let i=T.map(()=>[]);return c.forEach((e,n)=>{var o;if(0===n&&0===e.trim().length&&(i.splice(n,1,["Please type a valid prompt."]),u(e=>(0,eS.default)(e,e=>{e[n]=""})),t=!1),!(null==v?void 0:null===(o=v.similarPrompts)||void 0===o?void 0:o.enabled))return;let{threshold:a=1}=v.similarPrompts;for(let e=n+1;e<c.length;e++){let o=(0,eI.compareTwoStrings)(c[n].trim(),c[e].trim());o>a&&(i.splice(n,1,["Please type less similar prompts."]),t=!1)}}),S(i),await Promise.all(c.map(async(o,a)=>{let r=s.chatBoxTexts[a],{errors:l,warnings:d}=0===a?await en.Z.selfserve.validatePrompt({promptText:o,projectId:e.projectId,chatBoxText:r,assignmentId:e.assignmentId,...c.length>1&&{referenceText:c[1]}}):await en.Z.selfserve.validateReferenceText({promptText:o,projectId:e.projectId,chatBoxText:r,assignmentId:e.assignmentId});l.length>0?(t=!1,i.splice(a,1,[...i[a],...l])):i.splice(a,1,i[a]),d.length>0&&(P(d),n=!0)})),S(i),{validPrompt:t,hasWarnings:n}},onEnter=async()=>{var t;m(!0);let n=null==L?void 0:L.current;n&&setTimeout(()=>n.scrollTop=n.scrollHeight+1e3,1e3);try{if(!D&&!s.skipPromptValidation){if(c.every(e=>""===e)){m(!1);return}let{validPrompt:e,hasWarnings:t}=await validatePrompt();if(!e){m(!1);return}if(t){m(!1),N(c[0]);return}}await s.submitPrompts(c,e.attachment.content)}catch(e){M("Error generating response. You may try again in 10 seconds. If you have already retried twice, please skip this task."),setTimeout(()=>{M(void 0),m(!1)},1e4);return}n&&setTimeout(()=>n.scrollTop=n.scrollHeight+1e3,2500),(null===(t=s.rlhfParams)||void 0===t?void 0:t.isFair)&&!F||u(Array(s.chatBoxTexts.length).fill("")),m(!1)},onReset=async()=>{(E||F)&&(e.setAnnotations&&e.setAnnotations({}),s.resetChat())};(0,r.useEffect)(()=>{if(s.transcript&&!O){H(!0);return}},[s.transcript]),(0,r.useEffect)(()=>{Promise.all([n.e(15098),n.e(72760)]).then(n.bind(n,372760)).then(e=>{z(e.default)}).catch(e=>{z(null)})},[]),(0,r.useEffect)(()=>{(null==c?void 0:c[0].length)&&o(c[0])},[c,o]);let V=(0,r.useCallback)(()=>{let e=document.querySelector("textarea[name='promptInput']");e&&Z&&(e.hasAttribute(eR)||(e.setAttribute(eR,"true"),e.setAttribute(eB,"false"),Z.observe(e)))},[Z]),U=(0,r.useCallback)(()=>{let e=document.querySelector("textarea[name='promptInput']");e&&Z&&e.hasAttribute(eR)&&(e.removeAttribute(eR),e.removeAttribute(eB),Z.unobserve(e))},[Z]);(0,r.useEffect)(()=>{(async function(){if(e.projectId&&Z){let{enabled:t}=await en.Z.selfserve.fetchSpellingAndGrammarEnabled({projectId:e.projectId});f(t)}})()},[e.projectId,Z]),(0,r.useEffect)(()=>{(async function(){if(e.projectId&&Z){let{enabled:t}=await en.Z.selfserve.fetchDisablePastingEnabled({projectId:e.projectId});w(t)}})()},[e.projectId,Z]),(0,r.useEffect)(()=>{(async function(){if(e.projectId){let t=await en.Z.selfserve.fetchRlhfValidatorConfig({projectId:e.projectId});b(t)}})()},[e.projectId]),(0,r.useEffect)(()=>{(y||x)&&(s.isDone||h?U():s.isDone||V())},[y,x,s.isDone,h,V,U]),(0,r.useEffect)(()=>{if(y&&C){let e=setTimeout(()=>{let e=j.length,t=!1;for(let a=0;a<e;a+=ek.wy){var n,i,o;if(a+ek.yU>e)break;let r=j.slice(a,a+ek.yU),s=null!==(n=g().mean(r))&&void 0!==n?n:0;if(!(s>ek.wI)&&s/2>(null!==(i=g().max(r))&&void 0!==i?i:0)-(null!==(o=g().min(r))&&void 0!==o?o:0)){t=!0;break}}t&&(u(c.map(()=>"")),S(T.map(()=>[ek.hj]))),A(void 0),k([])},3e3);return()=>clearTimeout(e)}},[y,j,C,T,c,u]);let W=e.attachment.content||"Start the conversation!",G="".concat(B.r,"\n --- \n ## Topic \n \n ").concat(W," \n \n --- \n ## CONVERSATION \n \n ").concat(s.transcript||""),q=(0,r.useMemo)(()=>eA()(V,1500),[V]),K=(0,r.useMemo)(()=>(e,t)=>{if(D&&e.target.value!==D&&N(void 0),U(),y&&0===t){let n=e.nativeEvent.timeStamp;C&&k([...j,n-C]),A(n),u(e=>(0,eS.default)(e,e=>{e[t]=""}))}u(n=>(0,eS.default)(n,n=>{n[t]=e.target.value}));let n=e.target.value.split(" ").length;n>25&&q()},[q,U,s.chatBoxTexts,y,j,C,c,u]),J=(0,r.useMemo)(()=>{var t,n;if(!(null==v?void 0:null===(t=v.wordCount)||void 0===t?void 0:t.enabled))return"";let i=null===(n=e.subtaskMetadata)||void 0===n?void 0:n.metadataVariableValues,[o,a]=[null==i?void 0:i[eP.AllowedRapidAttachmentManagerMetadata.MinResponseLength],null==i?void 0:i[eP.AllowedRapidAttachmentManagerMetadata.MaxResponseLength]],{min:r=1,max:s}=null==v?void 0:v.wordCount;return o&&(r=o),a&&(s=a),s?"; Prompt should have between ".concat(r," and ").concat(s," words."):"; Prompt should have at least ".concat(r," words.")},[v,e.subtaskMetadata]),Q=(0,r.useMemo)(()=>{var e;if(!(null==v?void 0:null===(e=v.referenceTextWordCount)||void 0===e?void 0:e.enabled))return"";let{min:t=1,max:n}=null==v?void 0:v.referenceTextWordCount;return n?"; Text should have between ".concat(t," and ").concat(n," words."):"; Text should have at least ".concat(t," words.")},[v]);return(0,a.jsxs)(p.X,{className:i.textAttachment,children:[(0,a.jsxs)("div",{className:i.chatbotTranscript,ref:L,children:[(0,a.jsx)(B.Z,{text:G,addBackgroundToTransparentImages:!0,disableFuzzyLinks:!0}),h&&(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,a.jsx)($.D8,{})})]}),(0,a.jsx)("div",{className:i.chatbotPrompt,children:s.hideReviewNav?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{width:"100%"},children:[R&&(0,a.jsx)($.bZ,{severity:"error",style:{marginBottom:10},children:R}),l.map((e,t)=>{var n,i;return(0,a.jsxs)("div",{style:{marginTop:4},children:[T[t].map((e,n)=>(0,a.jsx)($.bZ,{severity:"error",style:{marginBottom:10},onClose:()=>{let e=[...T];e[t].splice(n,1),S(e)},children:e},n)),0===t&&I.map((e,t)=>(0,a.jsx)($.bZ,{severity:"warning",style:{marginBottom:10},onClose:()=>{let e=[...I];e.splice(t,1),P(e)},children:e},t)),(0,a.jsx)($.oi,{onPaste:e=>{if(y&&0===t){let n=[...T];n.splice(t,1,[ek.hj]),S(n),e.preventDefault()}},multiline:!0,maxRows:3,name:"promptInput",fullWidth:!0,disabled:h||E||s.isDone,value:c[t],label:(null===(n=T[t])||void 0===n?void 0:n.length)>0?"Please fix prompt errors":E?"Answer the questions to the right":e,size:"large",onChange:e=>K(e,t),error:(null===(i=T[t])||void 0===i?void 0:i.length)>0,minHeight:"100px",helperText:"Word Count: ".concat(g().words(c[t]).length).concat(0===t?J:Q)})]},t)})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,a.jsx)($.zx,{className:i.chatbotPromptButton,disabled:0===c[0].length||h||E||s.isDone,type:"primary",onClick:onEnter,children:"Enter"}),F&&(0,a.jsx)($.zx,{className:i.chatbotPromptButton,onClick:()=>{e.setAnnotations&&s.resetLastInteraction()&&e.setAnnotations(s.resetLastInteraction()),s.handleUndo()},disabled:0===s.history.interactions.length,children:"Undo"}),((null===(t=s.rlhfParams)||void 0===t?void 0:t.isFair)||F||s.canResetChat)&&(0,a.jsx)($.zx,{className:i.chatbotPromptButton,disabled:s.isStreaming||!E&&!F,type:"primary",onClick:onReset,children:F?"Restart":"Undo"})]})]}):(0,a.jsxs)("div",{children:["Navigate the chat history:",(0,a.jsx)($.zx,{className:i.chatbotPromptButton,disabled:!s.previousInteraction,type:"primary",onClick:async()=>{s.previousInteraction&&s.previousInteraction()},children:"Back"}),(0,a.jsx)($.zx,{className:i.chatbotPromptButton,disabled:!s.nextInteraction,type:"primary",onClick:async()=>{s.nextInteraction&&s.nextInteraction()},children:"Next"}),(0,a.jsx)($.zx,{className:i.chatbotPromptButton,disabled:!s.nextInteraction,type:"primary",onClick:async()=>{s.jumpToEnd&&s.jumpToEnd()},children:"End >"}),s.reviewNoBranching&&(0,a.jsx)($.zx,{className:i.chatbotPromptButton,disabled:!s.nextInteraction,type:"primary",onClick:async()=>{s.startBranchConversation&&s.startBranchConversation()},children:"Restart Conversation From This Point"})]})})]})},ChatbotRanking_ChatbotIcon=()=>(0,a.jsxs)("svg",{width:"29",height:"30",viewBox:"0 0 29 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,a.jsx)("rect",{y:"0.5",width:"29",height:"29",rx:"4",fill:"url(#pattern0)"}),(0,a.jsx)("rect",{y:"0.5",width:"29",height:"29",rx:"4",fill:"url(#pattern1)"}),(0,a.jsxs)("defs",{children:[(0,a.jsx)("pattern",{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,a.jsx)("use",{xlinkHref:"#image0_1594_44192",transform:"scale(0.00769231)"})}),(0,a.jsx)("pattern",{id:"pattern1",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,a.jsx)("use",{xlinkHref:"#image1_1594_44192",transform:"scale(0.00416667)"})}),(0,a.jsx)("image",{id:"image0_1594_44192",width:"130",height:"130",xlinkHref:"data:image/png;base64,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"}),(0,a.jsx)("image",{id:"image1_1594_44192",width:"240",height:"240",xlinkHref:"data:image/png;base64,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"})]})]});let eF="contenteditable",eE="data-gramm",eL=(0,s.ZL)(e=>({chatbowText:{display:"flex",flexDirection:"row",gap:"24px",alignItems:"center",width:"100%"},chatbotRowAttachment:{display:"flex",flexDirection:"column",padding:"24px 68px 24px 48px",gap:"24px",backgroundColor:"#FFFFFF",border:"1px solid #E5E7EB"},chatbotRowBot:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"24px 68px 24px 48px",gap:"24px",backgroundColor:"#F3F4F6",border:"1px solid #E5E7EB"},chatbotRowUser:{display:"flex",flexDirection:"row",alignItems:"center",padding:"24px 68px 24px 48px",gap:"24px",backgroundColor:"#FFFFFF",border:"1px solid #E5E7EB"},switchRow:{display:"flex",flexDirection:"row",paddingLeft:"20px",fontWeight:500,color:"#4B5563"},selectedOptionButton:{backgroundColor:"#F0EFFE",border:"1px solid #8F86FA"},unselectedOptionButton:{backgroundColor:"#F3F4F6",border:"1px solid #6B7280",color:"#374151"},optionButtonContainer:{display:"flex",flexDirection:"column",gap:"10px",margin:"34px"},optionButton:{borderRadius:"10px",padding:"24px",gap:"24px",cursor:"pointer",whiteSpace:"pre-line"},optionTextRow:{display:"flex",width:"100%",justifyContent:"space-between",color:"#374151",fontWeight:500},rankOptionButton:{color:"#6A5DF9",fontWeight:500,fontSize:"14px",marginLeft:"34px",marginRight:"34px",marginBottom:"34px",paddingTop:"25px",cursor:"pointer",borderTop:"1px solid #DBDFE5",display:"flex",gap:"15px",alignItems:"center",justifyContent:"space-between"},rankOptionText:{display:"flex",gap:"15px",alignItems:"center"},rankOptionButtonUnselected:{color:"#6B7280"},classCircle:{color:"#6B7280",width:"16px",height:"16px",cursor:"pointer"},textInputProps:{"&:hover $notchedOutline":{borderColor:e.colors.periwinkle100},backgroundColor:"#FFFFFF"},notchedOutline:{},textInputContainer:{display:"flex",width:"100%",padding:"10px",paddingLeft:"34px"},continueButtonContainer:{display:"flex",justifyContent:"flex-end",width:"100%"},chatbotTranscript:{height:"calc(100% - 250px)",marginBottom:16},chatbotPrompt:{width:"100%",display:"flex"},chatbotPromptButton:{marginLeft:8,marginTop:7},restartButton:{marginLeft:8,marginTop:7,marginRight:"36px"},stopButton:{marginLeft:8},chatbotTranscriptScroll:{overflowY:"auto"},buttonColumn:{display:"flex",flexDirection:"column"},undoRestartButtons:{display:"flex",justifyContent:"flex-end",width:"100%"}}));var ChatbotRanking_ChatBotViewV2=e=>{let t=(0,ee.ZP)("npov-rewrite-open",{projectId:e.projectId},!1),i=eL(),o=(0,ej.X)(),[s,l]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[m,x]=r.useState([]),[f,v]=r.useState(void 0),[b,y]=(0,r.useState)(null),[w,j]=(0,r.useState)(void 0),k=o.chatBoxTexts,C=e.assignmentId||eN().v4(),[A,T]=(0,r.useState)(void 0),S=o.isRangedMultiTurn,I=g().range(k.length).map(t=>0===t&&void 0!==e.prefillPrompt?e.prefillPrompt:1===t&&void 0!==e.prefillRefText?e.prefillRefText:""),[P,D]=(0,eT.Z)("promptTexts"+C,I),[N,R]=(0,r.useState)(o.chatBoxTexts.map(()=>[])),[M,F]=(0,r.useState)([]),[E,L]=(0,r.useState)(void 0),[Z,O]=(0,r.useState)(!1),H=o.fieldsToShow.length>0,V=(0,r.useRef)(null),validatePrompt=async()=>{let t=!0,n=!1;if(!e.projectId)return{validPrompt:t,hasWarnings:n};let i=N.map(()=>[]);return P.forEach((e,n)=>{var o;if(0===n&&0===e.trim().length&&(i.splice(n,1,["Please type a valid prompt."]),D(e=>(0,eS.default)(e,e=>{e[n]=""})),t=!1),!(null==w?void 0:null===(o=w.similarPrompts)||void 0===o?void 0:o.enabled))return;let{threshold:a=1}=w.similarPrompts;for(let e=n+1;e<P.length;e++){let o=(0,eI.compareTwoStrings)(P[n].trim(),P[e].trim());o>a&&(i.splice(n,1,["Please type less similar prompts."]),t=!1)}}),R(i),await Promise.all(P.map(async(a,r)=>{let s=o.chatBoxTexts[r],{errors:l,warnings:d}=0===r?await en.Z.selfserve.validatePrompt({promptText:a,projectId:e.projectId,chatBoxText:s,assignmentId:e.assignmentId,...P.length>1&&{referenceText:P[1]}}):await en.Z.selfserve.validateReferenceText({promptText:a,projectId:e.projectId,chatBoxText:s,assignmentId:e.assignmentId});l.length>0?(t=!1,i.splice(r,1,[...i[r],...l])):i.splice(r,1,i[r]),d.length>0&&(F(d),n=!0)})),R(i),{validPrompt:t,hasWarnings:n}},onEnter=async()=>{var t;l(!0);let n=null==V?void 0:V.current;n&&setTimeout(()=>n.scrollTop=n.scrollHeight+1e3,1e3);try{if(!E&&!o.skipPromptValidation){if(P.every(e=>""===e)){l(!1);return}let{validPrompt:e,hasWarnings:t}=await validatePrompt();if(!e){l(!1);return}if(t){l(!1),L(P[0]);return}}o.isStreaming&&l(!1),await o.submitPrompts(P,e.attachment.content)}catch(e){T("Error generating response. You may try again in 10 seconds. If you have already retried twice, please skip this task."),setTimeout(()=>{T(void 0),l(!1)},1e4);return}n&&setTimeout(()=>n.scrollTop=n.scrollHeight+1e3,2500),(null===(t=o.rlhfParams)||void 0===t?void 0:t.isFair)&&!S||D(Array(o.chatBoxTexts.length).fill("")),l(!1)};(0,r.useEffect)(()=>{Promise.all([n.e(15098),n.e(72760)]).then(n.bind(n,372760)).then(e=>{y(e.default)}).catch(e=>{y(null)})},[]);let U=(0,r.useCallback)(()=>{let e=document.querySelector("textarea[name='promptInput']");e&&b&&(e.hasAttribute(eF)||(e.setAttribute(eF,"true"),e.setAttribute(eE,"false"),b.observe(e)))},[b]),W=(0,r.useMemo)(()=>eA()(U,1500),[U]),G=(0,r.useCallback)(()=>{let e=document.querySelector("textarea[name='promptInput']");e&&b&&e.hasAttribute(eF)&&(e.removeAttribute(eF),e.removeAttribute(eE),b.unobserve(e))},[b]);(0,r.useEffect)(()=>{(async function(){if(e.projectId&&b){let{enabled:t}=await en.Z.selfserve.fetchSpellingAndGrammarEnabled({projectId:e.projectId});c(t)}})()},[e.projectId,b]),(0,r.useEffect)(()=>{(async function(){if(e.projectId&&b){let{enabled:t}=await en.Z.selfserve.fetchDisablePastingEnabled({projectId:e.projectId});h(t)}})()},[e.projectId,b]),(0,r.useEffect)(()=>{(async function(){if(e.projectId){let t=await en.Z.selfserve.fetchRlhfValidatorConfig({projectId:e.projectId});j(t)}})()},[e.projectId]),(0,r.useEffect)(()=>{(p||d)&&(o.isDone||s?G():o.isDone||U())},[p,d,o.isDone,s,U,G]),(0,r.useEffect)(()=>{if(p&&f){let e=setTimeout(()=>{let e=m.length,t=!1;for(let a=0;a<e;a+=ek.wy){var n,i,o;if(a+ek.yU>e)break;let r=m.slice(a,a+ek.yU),s=null!==(n=g().mean(r))&&void 0!==n?n:0;if(!(s>ek.wI)&&s/2>(null!==(i=g().max(r))&&void 0!==i?i:0)-(null!==(o=g().min(r))&&void 0!==o?o:0)){t=!0;break}}t&&(D(P.map(()=>"")),R(N.map(()=>[ek.hj]))),v(void 0),x([])},3e3);return()=>clearTimeout(e)}},[p,m,f,N,P,D]);let q=(0,r.useMemo)(()=>(e,t)=>{if(E&&e.target.value!==E&&L(void 0),G(),p&&0===t){let n=e.nativeEvent.timeStamp;f&&x([...m,n-f]),v(n),D(e=>(0,eS.default)(e,e=>{e[t]=""}))}D(n=>(0,eS.default)(n,n=>{n[t]=e.target.value}));let n=e.target.value.split(" ").length;n>25&&W()},[W,G,o.chatBoxTexts,p,m,f,P,D]),onReset=async()=>{confirm("Reset the entire chat?")&&(e.setAnnotations&&e.setAnnotations({}),D(I),o.resetChat())},onUndo=()=>{if(o.history.interactions.length>0){let e=o.history.interactions[o.history.interactions.length-1].prompt;D([e,""])}e.setAnnotations&&o.resetLastInteraction()&&e.setAnnotations(o.resetLastInteraction()),o.handleUndo()},K=(0,r.useMemo)(()=>{var t,n;if(!(null==w?void 0:null===(t=w.wordCount)||void 0===t?void 0:t.enabled))return"";let i=null===(n=e.subtaskMetadata)||void 0===n?void 0:n.metadataVariableValues,[o,a]=[null==i?void 0:i[eP.AllowedRapidAttachmentManagerMetadata.MinResponseLength],null==i?void 0:i[eP.AllowedRapidAttachmentManagerMetadata.MaxResponseLength]],{min:r=1,max:s}=null==w?void 0:w.wordCount;return o&&(r=o),a&&(s=a),s?"; Prompt should have between ".concat(r," and ").concat(s," words."):"; Prompt should have at least ".concat(r," words.")},[w,e.subtaskMetadata]),J=(0,r.useMemo)(()=>{var e;if(!(null==w?void 0:null===(e=w.referenceTextWordCount)||void 0===e?void 0:e.enabled))return"";let{min:t=1,max:n}=null==w?void 0:w.referenceTextWordCount;return n?"; Text should have between ".concat(t," and ").concat(n," words."):"; Text should have at least ".concat(t," words.")},[w]),Q=e.attachment.content||"Start the conversation!",Y={isBot:!1,isAttachment:!0,text:Q},[X,_]=r.useState([Y]),et=r.useMemo(()=>H&&!o.isDone&&!s,[H,o.isDone,s]);(0,r.useEffect)(()=>{var e,t,n;let i=o.history.interactions;if(0===i.length){_([Y]);return}let a=o.selectedInteraction;o.isStreaming&&(a+=1);let r=null!==(e=o.streamingInteraction)&&void 0!==e?e:i[Math.max(0,Math.min(i.length-1,a))],s=[Y],l=!r.chosenCompletion||o.readOnly&&!o.isDone||o.overrideViewFields,d=i.length,c=0;for(let e of i.slice(0,d)){if(s.push({isBot:!1,text:e.prompt}),l&&a===c){let e=[];for(let t of r.completions)e.push("".concat(t.text.length?t.text:"(response missing)"));e.push("Rank"),s.push({options:e})}if((null==e?void 0:e.displayedCompletion)||(null==e?void 0:e.chosenCompletion)){let i=(null==e?void 0:null===(t=e.displayedCompletion)||void 0===t?void 0:t.text)||(null===(n=e.chosenCompletion)||void 0===n?void 0:n.text);s.push({isBot:!0,text:i})}c+=1}(o.isDone||o.overrideViewFields||o.onPerConvoField||o.readOnly)&&(s.push({isBot:!1,text:"All done! Great work."}),o.perConversationFields&&o.perConversationFields.length>0&&s.push({isPerConvo:!0,options:["Answer per conversation questions"]})),_(s)},[o.history,o.isDone,o.isStreaming,o.readOnly,o.selectedInteraction,o.onPerConvoField,o.streamingInteraction]);let getStatusForOption=(e,t,n)=>{var i,r;if((!o.perResponseFields||(null===(i=o.perResponseFields)||void 0===i?void 0:i.length)===0)&&(null===(r=o.rlhfParams)||void 0===r?void 0:r.numberOfCompletions)&&t<o.rlhfParams.numberOfCompletions)return(0,a.jsx)("div",{});let s=n?o.perConversationFields.filter(e=>o.erroredItems.includes(e.field_id)).length>0:o.erroredItems.includes("".concat(e+1,"_").concat(t+1));return s?(0,a.jsx)(z.FontAwesomeIcon,{color:"#E53935",icon:"times-circle"}):n?(0,a.jsx)("div",{}):o.checkIfItemBlank(e,t)?(0,a.jsx)(z.FontAwesomeIcon,{color:"#6A5DF9",icon:["far","circle"]}):(0,a.jsx)(z.FontAwesomeIcon,{color:"#6A5DF9",icon:"check-circle"})},ei=r.useMemo(()=>{var e,t,n;return(null===(e=o.rlhfParams)||void 0===e?void 0:e.editBestCompletion)?(null===(t=o.rlhfParams)||void 0===t?void 0:t.numberOfCompletions)===1?"Edit Response":"Edit/Rank Options":o.isMakingChanges&&o.useEditPrompt?"Edit Prompt":(null===(n=o.rlhfParams)||void 0===n?void 0:n.perTurnFieldIds)?"Answer Questions":"Rank Options"},[o.rlhfParams,o.isMakingChanges,o.useEditPrompt]),getOptionButton=(t,n,r,s)=>{var l;let d=Math.floor((s-2)/2);return"Rank"===n?(!o.overrideViewFields||o.readOnly||o.isMakingChanges||o.overrideViewFields&&(null===(l=o.rlhfParams)||void 0===l?void 0:l.editBestCompletion)||o.isMakingChanges&&o.useEditPrompt)&&o.hasItemsOnRankingEditPage&&(0,a.jsxs)("div",{className:u()(i.rankOptionButton,{[i.rankOptionButtonUnselected]:o.selectedCompletion!==r}),onClick:()=>o.setSelectedCompletion(r),children:[(0,a.jsxs)("div",{className:i.rankOptionText,children:[(0,a.jsx)(z.FontAwesomeIcon,{icon:"signal"}),ei]}),(0,a.jsx)("div",{children:getStatusForOption(d,r)})]},r):t.isPerConvo?(0,a.jsxs)("div",{className:i.optionButtonContainer,children:[(0,a.jsxs)("div",{className:i.optionTextRow,children:[(0,a.jsx)("span",{children:"Conversation"}),(0,a.jsx)("span",{children:getStatusForOption(d,r,!0)})]}),(0,a.jsx)("div",{className:u()(i.optionButton,{[i.selectedOptionButton]:o.onPerConvoField,[i.unselectedOptionButton]:!o.onPerConvoField}),onClick:()=>o.gotoSelectedInteraction(Math.floor((X.length-3)/2)),children:n})]},r):(0,a.jsxs)("div",{className:i.optionButtonContainer,children:[(0,a.jsxs)("div",{className:i.optionTextRow,children:[(0,a.jsxs)("span",{children:["Option ",r+1,(0,a.jsx)("span",{className:i.stopButton,children:o.isStreaming&&o.stopStreaming&&e.canStopStreaming&&n.length>0&&"(response missing)"!==n&&(0,a.jsx)("a",{onClick:()=>o.stopStreaming&&o.stopStreaming(),children:"Stop"})})]}),(0,a.jsx)("span",{children:getStatusForOption(d,r)})]}),(0,a.jsx)("div",{className:u()(i.optionButton,{[i.selectedOptionButton]:o.selectedCompletion===r,[i.unselectedOptionButton]:o.selectedCompletion!==r}),onClick:()=>o.setSelectedCompletion(r),children:n})]},r)};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:u()(i.chatbotTranscript,{[i.chatbotTranscriptScroll]:0===o.fieldsToShow.length}),ref:V,children:[(0,a.jsx)("div",{children:X.map((e,n)=>{var r,s;return e.options?(0,a.jsxs)("div",{children:[e.options.map((t,i)=>getOptionButton(e,t,i,n)),o.isMakingChanges&&(0,a.jsx)("div",{className:i.optionButtonContainer,children:(0,a.jsx)("div",{children:(0,a.jsx)($.zx,{type:"primary",onClick:o.startBranchConversation,children:"Restart Conversation From Here"})})}),!o.isMakingChanges&&!o.isStreaming&&!o.readOnly&&(!o.isDone||o.isDone&&(null===(r=o.rlhfParams)||void 0===r?void 0:r.numberOfInteractions)===1)&&(0,a.jsxs)("div",{className:i.undoRestartButtons,children:[(0,a.jsx)($.zx,{className:i.chatbotPromptButton,onClick:onUndo,disabled:0===o.history.interactions.length,children:"Undo"}),(null===(s=o.rlhfParams)||void 0===s?void 0:s.numberOfInteractions)!==1&&(0,a.jsx)($.zx,{className:i.restartButton,disabled:o.isStreaming||!H&&!S,type:"primary",onClick:onReset,children:"Restart"})]})]},n):(0,a.jsxs)("div",{className:e.isAttachment?i.chatbotRowAttachment:e.isBot?i.chatbotRowBot:i.chatbotRowUser,children:[(0,a.jsxs)("div",{className:i.chatbowText,children:[e.isBot&&(0,a.jsx)("div",{style:{width:"29px",height:"29px",flexShrink:0},children:(0,a.jsx)(ChatbotRanking_ChatbotIcon,{})}),e.isAttachment||Z?(0,a.jsx)("div",{style:{width:"100%"},children:(0,a.jsx)(B.Z,{text:e.text||"",addBackgroundToTransparentImages:!0,disableFuzzyLinks:!0})}):(0,a.jsx)("div",{style:{whiteSpace:"pre-line"},children:e.text})]}),!e.isBot&&n<X.length-2&&0!==n&&(o.isDone&&!et||o.readOnly||o.isMakingChanges)&&(0,a.jsx)("div",{className:i.classCircle,onClick:()=>{t?onUndo():o.gotoSelectedInteraction(Math.floor((n-1)/2))},children:o.erroredItems.filter(e=>e.startsWith("".concat(Math.floor((n-1)/2)+1))).length>0?(0,a.jsx)(z.FontAwesomeIcon,{color:"#E53935",icon:"pencil"}):(0,a.jsx)(z.FontAwesomeIcon,{className:i.classCircle,icon:"pencil"})}),e.isAttachment&&!t&&(0,a.jsxs)("div",{className:i.switchRow,children:[(0,a.jsx)($.rs,{checked:Z,onChange:()=>{O(!Z)}}),"Enable Markdown"]})]},n)})}),s&&(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px",color:"#6A5DF9",marginBottom:"10px"},children:(0,a.jsx)($.D8,{color:"inherit"})}),(0,a.jsx)("div",{style:{float:"left",clear:"both"}})]}),(0,a.jsx)("div",{className:i.chatbotPrompt,children:!(s||H||o.isDone||o.readOnly)&&(0,a.jsxs)("div",{className:i.textInputContainer,children:[(0,a.jsxs)("div",{style:{width:"100%"},children:[A&&(0,a.jsx)($.bZ,{severity:"error",style:{marginBottom:10},children:A}),k.map((e,t)=>{var n,r;return(0,a.jsxs)("div",{style:{marginTop:4},children:[N[t].map((e,n)=>(0,a.jsx)($.bZ,{severity:"error",style:{marginBottom:10},onClose:()=>{let e=[...N];e[t].splice(n,1),R(e)},children:e},n)),0===t&&M.map((e,t)=>(0,a.jsx)($.bZ,{severity:"warning",style:{marginBottom:10},onClose:()=>{let e=[...M];e.splice(t,1),F(e)},children:e},t)),(0,a.jsx)($.oi,{onPaste:e=>{if(p&&0===t){let n=[...N];n.splice(t,1,[ek.hj]),R(n),e.preventDefault()}},multiline:!0,maxRows:3,name:"promptInput",fullWidth:!0,disabled:s||H||o.isDone,value:P[t],label:(null===(n=N[t])||void 0===n?void 0:n.length)>0?"Please fix prompt errors":H?"Answer the questions to the right":e,size:"large",onChange:e=>q(e,t),error:(null===(r=N[t])||void 0===r?void 0:r.length)>0,minHeight:"100px",helperText:"Word Count: ".concat(g().words(P[t]).length).concat(0===t?K:J),InputProps:{classes:{root:i.textInputProps,notchedOutline:i.notchedOutline}}})]},t)})]}),(0,a.jsxs)("div",{className:i.buttonColumn,children:[(0,a.jsx)($.zx,{className:i.chatbotPromptButton,disabled:0===P[0].length||s||H||o.isDone,type:"primary",onClick:onEnter,children:"Enter"}),(0,a.jsx)($.zx,{className:i.chatbotPromptButton,onClick:onUndo,disabled:0===o.history.interactions.length,children:"Undo"}),(0,a.jsx)($.zx,{className:i.chatbotPromptButton,disabled:o.isStreaming||!H&&!S,type:"primary",onClick:onReset,children:"Restart"})]})]})})]})},eZ=n(383e3),ez=n(373581),eO=n(537441),eH=n(360800),eV=n.n(eH),eU=n(588634);(i=o||(o={})).Raw="Raw Text",i.NoHighlight="No Highlight",i.Words="Words",i.Sentences="Sentences";let eW=(0,s.ZL)({background:{backgroundColor:"white",width:"100%",padding:20},title:{width:"80%"},row:{display:"flex",flexDirection:"row",alignItems:"center"},slider:{width:"60%",marginLeft:10},right:{marginLeft:"auto"},label:{marginRight:20},rawText:{margin:20},select:{marginLeft:-10},header:{position:"sticky",top:0,backgroundColor:"white",borderBottom:"1px solid lightgrey",zIndex:1},markdownContainer:{display:"flex",flexDirection:"row"},pairwiseHalf:{width:"50%"},titleBlock:{background:"#fafbfc",padding:10,borderBottom:"1px solid #eee",borderLeft:"1px solid #eee"},markdownBlock:{padding:10,border:"1px solid #eee"}});var textcollection_PairwiseEvaluation=e=>{let{content:t,left:n,right:i}=e,s=eW(),[l,d]=(0,eT.Z)("pairwiseEvaluation.fontSize",15),[c,p]=(0,eT.Z)("pairwiseEvaluation.diffMethod","No Highlight"),[h,m]=(0,eT.Z)("pairwiseEvaluation.stripNewlines",!1),[g,x]=(0,eT.Z)("pairwiseEvaluation.showMarkdown",!1),[f,v]=(0,r.useState)(n),[b,y]=(0,r.useState)(i);return(0,r.useEffect)(()=>{h||"Raw Text"===c?(v(n.replaceAll(/\n+/g," ")),y(i.replaceAll(/\n+/g," "))):(v(n),y(i))},[h,n,i,c]),(0,a.jsxs)("div",{className:s.background,children:[(0,a.jsxs)("div",{className:u()(s.row,s.header),children:[(0,a.jsx)("h3",{className:s.title,children:t}),(0,a.jsxs)("div",{className:s.right,children:[(0,a.jsxs)("div",{className:s.row,children:[(0,a.jsx)("p",{className:s.label,children:"Diff Method"}),(0,a.jsx)("div",{className:s.select,children:(0,a.jsx)($.Ph,{onChange:e=>p(e.target.value),value:c,children:Object.values(o).map(e=>(0,a.jsx)($.Wx,{value:e,children:e},e))})})]}),(0,a.jsxs)("div",{className:s.row,children:[(0,a.jsx)("p",{children:"Font Size"}),(0,a.jsx)($.iR,{className:s.slider,position:l,minVal:10,maxVal:40,onAdjust:e=>d(e)})]}),(0,a.jsxs)("div",{className:s.row,children:[(0,a.jsx)("p",{className:s.label,children:"Strip Newlines"}),(0,a.jsx)($.rs,{checked:h,onChange:()=>m(!h)})]}),(0,a.jsxs)("div",{className:s.row,children:[(0,a.jsx)("p",{className:s.label,children:"Show Markdown"}),(0,a.jsx)($.rs,{checked:g,onChange:()=>x(!g)})]})]})]}),g?(0,a.jsxs)("div",{className:s.markdownContainer,children:[(0,a.jsxs)("div",{className:s.pairwiseHalf,children:[(0,a.jsx)("div",{className:s.titleBlock,children:"Left"}),(0,a.jsx)("div",{className:s.markdownBlock,children:(0,a.jsx)(B.Z,{text:f})})]}),(0,a.jsxs)("div",{className:s.pairwiseHalf,children:[(0,a.jsx)("div",{className:s.titleBlock,children:"Right"}),(0,a.jsx)("div",{className:s.markdownBlock,children:(0,a.jsx)(B.Z,{text:b})})]})]}):"Raw Text"===c?(0,a.jsx)(eV(),{oldValue:f,newValue:b,splitView:!0,hideLineNumbers:!0,showDiffOnly:!1,leftTitle:"Left",rightTitle:"Right",disableWordDiff:!0,styles:{contentText:{fontFamily:eU.Z.typography.fontFamily,fontSize:l},variables:{light:{removedBackground:"white",addedBackground:"white"}}}}):(0,a.jsx)(eV(),{oldValue:f,newValue:b,compareMethod:"Words"===c?eH.DiffMethod.CSS:"Sentences"===c?eH.DiffMethod.SENTENCES:void 0,splitView:!0,hideLineNumbers:!0,showDiffOnly:!1,leftTitle:"Left",rightTitle:"Right",disableWordDiff:!["Words","Sentences"].includes(c),styles:{contentText:{fontFamily:eU.Z.typography.fontFamily,fontSize:l},variables:{light:{removedBackground:"#eef4ff",wordRemovedBackground:"#b8c6fc",removedGutterBackground:"#dce7fc"}}}})]})},eG=n(533688);function BlurBrightnessImage(e){let t=r.useRef(null),n={size:{width:e.size.width,height:e.size.height},canvas:t},i=useZoomHook(n),{newWidth:o,newHeight:s,offsetX:l,offsetY:d,zoom:c,onZoomIncrease:u,onZoomDecrease:p,onDoubleClick:h,formatPercent:m,Minus:g,Plus:x,zoomLevels:f}=i,v=eq(),b=(0,A.Iq)(1),[y,w]=r.useState(e.addBrightnessSlider?0:1),[j,k]=r.useState(e.addBlurSlider?0:1),[C,T]=r.useState(e.src);return r.useEffect(()=>{let{Bucket:t}=(0,D.fromS3Url)(e.src);if("sensitive-cu-documents"===t){let signUrl=async()=>{(0,P.ZP)(null,"internal/sensitive-content-review/signTrustAndSafetyUrl",{method:"GET",query:{url:e.src}}).then(e=>{T(e.url)}).catch(()=>{T(e.src)})};signUrl()}else T(e.src)},[e.src]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:e.addZoomSlider?(0,a.jsxs)("div",{ref:t,className:v.viewport,children:[(0,a.jsx)("div",{className:v.canvas,onDoubleClick:h,style:{width:m(c),height:m(c),...b},children:(0,a.jsx)("div",{className:v.image,style:{position:"absolute",top:d,left:l,width:o,height:s,backgroundImage:"url(".concat(C,")"),filter:"brightness(".concat(100*y,"%) blur(").concat((1-j)*50,"px"),backgroundSize:"contain",backgroundPosition:"center",...b}})}),(0,a.jsx)("div",{style:{width:e.size.width,height:e.size.height}})]}):(0,a.jsx)("div",{className:v.image,style:{backgroundImage:"url(".concat(C,")"),filter:"brightness(".concat(100*y,"%) blur(").concat((1-j)*50,"px"),backgroundSize:"contain",backgroundPosition:"center",...b},children:(0,a.jsx)("div",{style:{width:e.size.width,height:e.size.height}})})}),(0,a.jsx)(eG.Z,{addBrightnessSlider:e.addBrightnessSlider,addBlurSlider:e.addBlurSlider,addZoomSlider:e.addZoomSlider,setBrightness:w,setBlur:k,brightness:y,blur:j,zoom:c,onZoomIncrease:u,onZoomDecrease:p,Minus:g,Plus:x,zoomLevels:f,formatPercent:m}),!!e.caption&&(0,a.jsx)("div",{className:v.topbar,children:(0,a.jsx)("div",{className:v.caption,style:b,children:e.caption})})]})}let eq=(0,b.Z)({image:{backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"},topbar:{position:"absolute",left:"40px",top:"12px",display:"flex",flexDirection:"row"},caption:{background:"#FFFFFF",boxShadow:"0px 3px 12px rgba(0, 0, 0, 0.15)",borderRadius:"4px",textAlign:"center",paddingLeft:"8px",paddingRight:"8px",paddingTop:"4px",paddingBottom:"4px",margin:"4px"},canvas:{position:"absolute",top:0,left:0,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"},viewport:{position:"relative",overflow:"scroll",width:"100%",height:"100%"}});var eK=n(594802),eJ=n(416534);let eQ=(0,s.ZL)({attachment:{margin:24,padding:32},centered:{display:"flex",justifyContent:"center"}});var textcollection_RLHFPairwiseEvaluation=e=>{let t=eQ(),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[p,h]=(0,r.useState)(""),handleSubmit=async e=>{"Enter"===e.key&&(s(!0),await new Promise(e=>setTimeout(e,1e3)),u("Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"),h("Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),d(!0),s(!1))},handleCancel=async()=>{u(""),h(""),d(!1)};return o?(0,a.jsx)($.Xk,{className:t.attachment,children:(0,a.jsx)("div",{className:t.centered,children:(0,a.jsx)($.D8,{})})}):(0,a.jsx)($.Xk,{className:t.attachment,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(textcollection_PairwiseEvaluation,{content:n,left:c,right:p}),(0,a.jsx)(eJ.zx,{color:"secondary",onClick:handleCancel,children:"Try another prompt"})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-l font-medium text-neutral-700",children:e.attachment.content}),(0,a.jsx)(eK.n,{id:"editPrompt",type:"text",value:n,onChange:e=>i(e.target.value),onKeyDown:handleSubmit,description:"Press Enter to submit"})]})})},eY=n(66019),eX=n(954282);function VideoWithGrid(e){let t=e_();return(0,a.jsxs)("div",{className:u()(t.scrollableDiv),children:[(0,a.jsx)("div",{id:"cursor",className:u()(t.cursor)}),(0,a.jsxs)("table",{width:"90%",cellSpacing:"0",cellPadding:"0",className:u()(t.table),children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:u()(t.cell),children:"\xa0"}),(0,a.jsx)("td",{className:u()(t.cell),children:"\xa0"}),(0,a.jsx)("td",{className:u()(t.cell),children:"\xa0"}),(0,a.jsx)("td",{className:u()(t.cell),children:"\xa0"}),(0,a.jsx)("td",{className:u()(t.cell),children:"\xa0"}),(0,a.jsx)("td",{className:u()(t.cell),children:"\xa0"}),(0,a.jsx)("td",{className:u()(t.cell),children:"\xa0"}),(0,a.jsx)("td",{className:u()(t.cell),children:"\xa0"}),(0,a.jsx)("td",{className:u()(t.cell),children:"\xa0"}),(0,a.jsx)("td",{className:u()(t.cell),children:"\xa0"}),(0,a.jsx)("td",{className:u()(t.cell),children:"\xa0"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:u()(t.cell),children:"9"}),(0,a.jsx)("td",{rowSpan:10,colSpan:10,children:(0,a.jsx)("video",{width:"100%",className:u()(t.video),onMouseMove:function(e){let t=document.getElementById("cursor");if(t){let n=e.currentTarget.offsetWidth/10,i=e.currentTarget.offsetHeight/10,o=e.clientX-e.currentTarget.getBoundingClientRect().x,a=e.clientY-e.currentTarget.getBoundingClientRect().y,r="(".concat(Math.floor(o/n),", ").concat(10-Math.floor(a/i)-1,")");t.innerHTML=r,t.style.left="".concat(o,"px"),t.style.top="".concat(a,"px")}},onMouseOut:function(){let e=document.getElementById("cursor");e&&(e.innerHTML="")},controls:!0,id:"video",src:e.url,onEnded:e.onEnded})})]}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:u()(t.cell),children:"8"})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:u()(t.cell),children:"7"})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:u()(t.cell),children:"6"})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:u()(t.cell),children:"5"})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:u()(t.cell),children:"4"})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:u()(t.cell),children:"3"})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:u()(t.cell),children:"2"})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:u()(t.cell),children:"1"})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:u()(t.cell),children:"0"})}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:u()(t.cell)}),(0,a.jsx)("td",{className:u()(t.cell),children:"0"}),(0,a.jsx)("td",{className:u()(t.cell),children:"1"}),(0,a.jsx)("td",{className:u()(t.cell),children:"2"}),(0,a.jsx)("td",{className:u()(t.cell),children:"3"}),(0,a.jsx)("td",{className:u()(t.cell),children:"4"}),(0,a.jsx)("td",{className:u()(t.cell),children:"5"}),(0,a.jsx)("td",{className:u()(t.cell),children:"6"}),(0,a.jsx)("td",{className:u()(t.cell),children:"7"}),(0,a.jsx)("td",{className:u()(t.cell),children:"8"}),(0,a.jsx)("td",{className:u()(t.cell),children:"9"})]})]})]})}let e_=(0,s.ZL)({cell:{padding:8,fontSize:14,textAlign:"center"},cursor:{position:"absolute",zIndex:100,mixBlendMode:"difference",top:0,left:0,fontWeight:500,color:"#6A5DF9"},scrollableDiv:{overflowY:"auto",position:"relative",height:"100%",width:"100%"},table:{height:"auto"},video:{position:"relative"}});var e$=n(44468),e0=n(364630),e1=n(797517),e2=n(344263),e3=n(943255),e9=n(681347),e6=n(681210),e4=n(838439),e8=n(617122),e5=n(53332),e7=n(680679),te=n(499632),tt=n(633806),tn=n(647220),ti=n(683127),to=n(882052),ta=n(406076),tr=n(587138),ts=n(812908),tl=n(138944);let validateChats=e=>!!(Array.isArray(e)&&e.every(e=>Array.isArray(e)&&e.every(e=>("user"===e.role||"model"===e.role)&&e.text))),ChatUserTurn=e=>{var t,n;let{turn:i,darkMode:o,isLastTurn:s}=e,l=td(),d=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{var e,t;(null==d?void 0:d.current)&&(null===(e=d.current)||void 0===e?void 0:e.scrollHeight)>(null===(t=d.current)||void 0===t?void 0:t.clientHeight)&&u(!0)},[d,null==d?void 0:null===(t=d.current)||void 0===t?void 0:t.scrollHeight,null==d?void 0:null===(n=d.current)||void 0===n?void 0:n.clientHeight]),(0,a.jsxs)("div",{className:(0,tl.default)(l.userTurn,{[l.userChatTextClampMargin]:!!c&&!p}),children:[(0,a.jsx)("div",{className:l.userTurnIcon,children:(0,a.jsx)(e4.Z,{className:(0,tl.default)(l.icon32,l.iconLightLight,l.userTurnIconMargin)})}),(0,a.jsx)("p",{className:(0,tl.default)(l.userChatText,l.userChatTextClamp,{[l.userChatTextExpanded]:p,[l.userChatTextDark]:o,[l.userChatTextClampMargin]:!!c}),ref:d,children:(0,a.jsx)(B.Z,{text:i.text,innerStyle:"line-height: 1.5rem; white-space: pre-wrap; word-break: break-word; ".concat(o?"font-weight: 450;":"")})}),(0,a.jsxs)("div",{className:l.iconColumn,children:[!!c&&(0,a.jsx)(e$.Z,{size:"large","aria-label":"expand-text",sx:{mt:"-8px"},onClick:()=>h(e=>!e),children:p?(0,a.jsx)(ta.Z,{className:o?l.iconDarkDark:l.iconLightDark}):(0,a.jsx)(tr.Z,{className:o?l.iconDarkDark:l.iconLightDark})}),(!c||p)&&s&&(0,a.jsx)(e$.Z,{size:"large","aria-label":"edit-prompt",sx:{ml:"auto",mt:"-8px"},children:(0,a.jsx)(ts.Z,{className:o?l.iconDarkDark:l.iconLightDark})})]})]})},td=(0,$.ZL)({container:{width:"100%",display:"flex",justifyContent:"center",gap:16,flexWrap:"wrap",margin:"16px 0"},singleChat:{display:"flex",flexDirection:"column",backgroundColor:"rgb(243, 246, 252)",overflow:"hidden"},singleChatDark:{backgroundColor:"rgb(34, 35, 39)"},header:{height:56,padding:"4px 4px 4px 8px",position:"relative",display:"flex",alignItems:"center",backgroundColor:"white"},headerDark:{backgroundColor:"black"},logoText:{fontFamily:"Helvetica Neue,sans-serif",fontSize:"1.3rem",fontWeight:500,color:"rgb(96, 99, 103)"},logoTextDark:{color:"rgb(232, 234, 236)"},icon24:{transform:"scale(3)"},icon32:{transform:"scale(1.6)",marginRight:12},iconLightLight:{color:"rgb(95, 99, 104)"},iconLightDark:{color:"rgb(60, 64, 67)"},iconDarkLight:{color:"#e3e3e3"},iconDarkDark:{color:"rgb(196, 199, 197)"},iconColumn:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,flexShrink:0},floatRight:{marginLeft:"auto",display:"flex",alignItems:"center"},body:{overflowY:"auto",padding:"0 16px"},userTurn:{display:"flex",alignItems:"start",justifyContent:"start",margin:"16px 0 16px 12px"},userTurnIcon:{height:40,display:"flex",alignItems:"start",flexShrink:0,marginRight:16},userTurnIconMargin:{marginTop:4,marginLeft:4,marginRight:4},userChatTextClampMargin:{margin:"16px 0px 48px 12px"},userChatText:{fontFamily:"Helvetica Neue,sans-serif",fontSize:"1rem",lineHeight:"1.4rem",letterSpacing:"normal",whiteSpace:"pre-wrap",wordWrap:"break-word",paddingTop:10,margin:0,marginTop:-24,marginBottom:-38},userChatTextClamp:{textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":"4","-webkit-box-orient":"vertical",overflow:"hidden"},userChatTextExpanded:{textOverflow:"none",display:"initial","-webkit-line-clamp":"none","-webkit-box-orient":"initial",overflow:"initial"},userChatTextDark:{color:"rgb(227, 227, 227)"},bulbaTurn:{backgroundColor:"rgb(255, 255, 255)",borderRadius:16,padding:"12px 8px 12px 0",display:"flex",flexDirection:"column"},bulbaTurnDark:{backgroundColor:"rgb(19, 19, 20)"},bulbaTurnHeader:{display:"flex",alignItems:"center",justifyContent:"end",gap:12},bulbaTurnBody:{fontFamily:"Helvetica Neue,sans-serif",fontSize:"1rem",fontWeight:400,lineHeight:"1.4rem",letterSpacing:"normal",whiteSpace:"pre-wrap",display:"flex",flexDirection:"row"},bulbaTurnBodyDark:{color:"rgb(227, 227, 227)"},bulbaTurnFooter:{display:"flex",alignItems:"center",marginLeft:-12},sparkles:{flexShrink:0,marginTop:"-26px"},footer:{marginTop:"auto",position:"relative",width:"100%",alignSelf:"center"},footerChat:{display:"flex",width:"calc(100% - 16px)",alignItems:"center"},footerScrollShadow:{boxShadow:"0px -16px 16px -24px rgba(60, 64, 67, 0.80)"},chatInput:{marginTop:16,borderRadius:"50px !important",fontFamily:"Helvetica Neue,sans-serif !important",background:"rgb(255, 255, 255) !important",borderColor:"rgb(60, 64, 67) !important"},chatInputDark:{color:"rgb(227, 227, 227) !important","-webkit-text-fill-color":"rgb(227, 227, 227) !important","&.MuiInputBase .MuiInputBase-input-MuiOutlinedInput-input.Mui-disabled":{color:"rgb(227, 227, 227) !important","-webkit-text-fill-color":"rgb(227, 227, 227) !important"},background:"rgb(19, 19, 20) !important",borderColor:"rgb(227, 227, 227) !important"},privacyNotice:{fontSize:"0.75rem",lineHeight:"1rem",fontFamily:"Helvetica Neue,sans-serif",letterSpacing:".1px",margin:"12px 24px",textAlign:"center"},privacyNoticeDark:{color:"rgb(227, 227, 227)"}});var ChatMock_BulbaChatMobile=e=>{let{attachment:t}=e,n=validateChats(t.attachment_body),i=td(),[o,s]=(0,r.useState)(!!t.darkMode);return(0,a.jsx)("div",{className:i.container,children:n?(0,a.jsx)(a.Fragment,{children:t.attachment_body.map((e,n)=>{var l,d;return(0,a.jsxs)("div",{className:(0,tl.default)(i.singleChat,{[i.singleChatDark]:o}),style:{width:null!==(l=t.width)&&void 0!==l?l:375,height:null!==(d=t.height)&&void 0!==d?d:680},children:[(0,a.jsxs)("header",{className:(0,tl.default)(i.header,{[i.headerDark]:o}),children:[(0,a.jsx)(e$.Z,{size:"large","aria-label":"menu",sx:{mr:.5},children:(0,a.jsx)(e3.Z,{className:o?i.iconDarkLight:i.iconLightLight})}),(0,a.jsx)("p",{className:(0,tl.default)(i.logoText,{[i.logoTextDark]:o}),children:"Bulba"}),(0,a.jsxs)("div",{className:i.floatRight,children:[(0,a.jsx)(e$.Z,{size:"large",edge:"start","aria-label":"new-chat",sx:{mr:2,height:32,width:32,backgroundColor:o?"rgb(34, 35, 39)":"#f5f4f9"},children:(0,a.jsx)(e9.Z,{className:(0,tl.default)(i.icon24,o?i.iconDarkLight:i.iconLightLight)})}),(0,a.jsx)(e$.Z,{size:"large",edge:"start","aria-label":"options",sx:{mr:2,height:32,width:32},children:(0,a.jsx)(e6.Z,{className:(0,tl.default)(i.icon24,o?i.iconDarkLight:i.iconLightLight)})}),(0,a.jsx)("div",{style:{cursor:"pointer"},onClick:()=>s(e=>!e),children:(0,a.jsx)(e4.Z,{className:(0,tl.default)(i.icon32,i.iconLightLight)})})]})]}),(0,a.jsx)("div",{className:i.body,children:e.map((t,s)=>(0,a.jsx)(r.Fragment,{children:"user"===t.role?(0,a.jsx)(ChatUserTurn,{turn:t,darkMode:o,isLastTurn:s===e.length-1}):(0,a.jsxs)("div",{className:(0,tl.default)(i.bulbaTurn,{[i.bulbaTurnDark]:o}),children:[(0,a.jsxs)("div",{className:i.bulbaTurnHeader,children:[s===e.length-1&&(0,a.jsx)(e0.Z,{sx:{fontSize:"0.875rem",fontWeight:500,textTransform:"none",color:o?"rgb(196, 199, 197)":"#1f1f1f"},endIcon:(0,a.jsx)(e8.Z,{style:{color:o?"rgb(168, 199, 250)":"#1976d2"}}),children:"Regenerate draft"}),(0,a.jsx)(e$.Z,{size:"large","aria-label":"play-ttv",sx:{mr:"-4px",mt:"-8px",mb:"8px"},children:(0,a.jsx)(e5.Z,{className:o?i.iconDarkDark:i.iconLightDark})})]}),(0,a.jsx)("div",{className:(0,tl.default)(i.bulbaTurnBody,{[i.bulbaTurnBodyDark]:o}),children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"-24px",marginLeft:"60px"},children:[(0,a.jsx)(B.Z,{text:t.text,innerStyle:"line-height: 1.5rem; white-space: pre-wrap; word-break: break-word; ".concat(o?"font-weight: 450;":"")}),(0,a.jsxs)("div",{className:i.bulbaTurnFooter,children:[(0,a.jsx)(e$.Z,{size:"large","aria-label":"thumb-up",children:(0,a.jsx)(e7.Z,{className:o?i.iconDarkDark:i.iconLightDark})}),(0,a.jsx)(e$.Z,{size:"large","aria-label":"thumb-down",children:(0,a.jsx)(te.Z,{className:o?i.iconDarkDark:i.iconLightDark})}),s===e.length-1&&(0,a.jsx)(e$.Z,{size:"large","aria-label":"tune",children:(0,a.jsx)(tt.Z,{className:o?i.iconDarkDark:i.iconLightDark})}),(0,a.jsx)(e$.Z,{size:"large","aria-label":"share-response",children:(0,a.jsx)(tn.Z,{className:o?i.iconDarkDark:i.iconLightDark})}),(0,a.jsx)(e$.Z,{size:"large","aria-label":"response-options",children:(0,a.jsx)(e6.Z,{className:o?i.iconDarkDark:i.iconLightDark})})]})]})})]})},"chat-".concat(n,"-turn-").concat(s)))}),(0,a.jsxs)("footer",{className:(0,tl.default)(i.footer),children:[(0,a.jsxs)("div",{className:i.footerChat,children:[(0,a.jsx)(e$.Z,{size:"large","aria-label":"add-photo",style:{flexShrink:0,marginTop:24},children:(0,a.jsx)(ti.Z,{className:o?i.iconDarkDark:i.iconLightDark})}),(0,a.jsx)("div",{style:{flexGrow:1},children:(0,a.jsx)(e1.Z,{type:"text",fullWidth:!0,disabled:!0,endAdornment:(0,a.jsx)(e2.Z,{position:"end",children:(0,a.jsx)(e$.Z,{"aria-label":"mic",children:(0,a.jsx)(to.Z,{className:o?i.iconDarkDark:i.iconLightDark})})}),placeholder:"Enter a prompt here",className:(0,tl.default)(i.chatInput,{[i.chatInputDark]:o})})})]}),(0,a.jsxs)("p",{className:(0,tl.default)(i.privacyNotice,{[i.privacyNoticeDark]:o}),children:["Bulba may display inaccurate or offensive information that doesn't represent Gorilla's views."," ",(0,a.jsx)("span",{style:{fontWeight:500,textDecoration:"underline"},children:"Bulba Privacy Notice"})]})]})]},"chat-".concat(n))})}):(0,a.jsx)("div",{children:"Invalid Bulba Chat Attachment"})})},tc=n(603189),tu=n(560354),tp=n(141655),th=n(719332),tm=n(365148),tg=n(389117);async function mockStream(e,t){let n=e;for(;n.length>0;){let callback=()=>{let e=Math.round(200*Math.random())+1,i=n.substring(e).indexOf(" ")+e;i<=0&&(i=24),t(n.slice(0,i)),n=n.slice(i)};await function(e,t){return new Promise(n=>{setTimeout(()=>{e(),n()},t)})}(callback,200*Math.random())}}let BulbaChatDesktop_ChatUserTurn=e=>{var t,n;let{turn:i,darkMode:o,isLastTurn:s}=e,l=tx(),d=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{var e,t;(null==d?void 0:d.current)&&(null===(e=d.current)||void 0===e?void 0:e.scrollHeight)>(null===(t=d.current)||void 0===t?void 0:t.clientHeight)&&u(!0)},[d,null==d?void 0:null===(t=d.current)||void 0===t?void 0:t.scrollHeight,null==d?void 0:null===(n=d.current)||void 0===n?void 0:n.clientHeight]),(0,a.jsxs)("div",{className:l.userTurn,children:[(0,a.jsx)("div",{className:l.userTurnIcon,children:(0,a.jsx)(e4.Z,{className:(0,tl.default)(l.icon32,l.iconLightLight,l.userTurnIconMargin)})}),(0,a.jsx)("p",{className:(0,tl.default)(l.userChatText,l.userChatTextClamp,{[l.userChatTextExpanded]:p,[l.userChatTextDark]:o,[l.userChatTextClampMargin]:c}),ref:d,children:(0,a.jsx)(B.Z,{text:i.text,innerStyle:"line-height: 1.5rem; white-space: pre-wrap; word-break: break-word; ".concat(o?"font-weight: 450;":"")})}),(0,a.jsxs)("div",{className:l.iconColumn,children:[!!c&&(0,a.jsx)(e$.Z,{size:"large","aria-label":"expand-text",sx:{mt:"-8px"},onClick:()=>h(e=>!e),children:p?(0,a.jsx)(ta.Z,{className:o?l.iconDarkDark:l.iconLightDark}):(0,a.jsx)(tr.Z,{className:o?l.iconDarkDark:l.iconLightDark})}),(!c||p)&&s&&(0,a.jsx)(e$.Z,{size:"large","aria-label":"edit-prompt",sx:{ml:"auto",mt:"-8px"},children:(0,a.jsx)(ts.Z,{className:o?l.iconDarkDark:l.iconLightDark})})]})]})},tx=(0,$.ZL)({container:{width:"100%",display:"flex",justifyContent:"center",gap:16,flexWrap:"wrap",margin:"16px 0"},singleChat:{display:"flex",flexDirection:"column",backgroundColor:"white",overflow:"hidden"},singleChatDark:{backgroundColor:"black"},header:{height:56,padding:"4px 4px 4px 8px",position:"relative",display:"flex",alignItems:"center",backgroundColor:"white"},headerDark:{backgroundColor:"black"},headerIcon:{marginRight:"24px !important",height:32,width:32},logoText:{fontFamily:"Helvetica Neue,sans-serif",fontSize:"1.3rem",fontWeight:500,color:"rgb(96, 99, 103)"},logoTextDark:{color:"rgb(232, 234, 236)"},icon24:{transform:"scale(3)"},icon32:{transform:"scale(1.6)",marginRight:12},iconLightLight:{color:"rgb(95, 99, 104)"},iconLightDark:{color:"rgb(60, 64, 67)"},iconDarkLight:{color:"#e3e3e3"},iconDarkDark:{color:"rgb(196, 199, 197)"},iconColumn:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,flexShrink:0},floatRight:{marginLeft:"auto",display:"flex",alignItems:"center"},body:{overflowY:"auto",padding:"0 16px",margin:"1px 56px 24px 56px",borderRadius:20,backgroundColor:"rgb(243, 246, 252)",display:"flex",flexDirection:"column",minHeight:"calc(100% - 80px)"},bodyDark:{backgroundColor:"rgb(34, 35, 39)"},userTurn:{display:"flex",alignItems:"start",justifyContent:"start",margin:"16px 0 12px 12px"},userTurnIcon:{height:40,display:"flex",alignItems:"start",flexShrink:0,marginRight:16},userTurnIconMargin:{marginTop:4,marginLeft:4,marginRight:4},userChatText:{fontFamily:"Helvetica Neue,sans-serif",fontSize:"1rem",lineHeight:"1.4rem",letterSpacing:"normal",whiteSpace:"pre-wrap",wordWrap:"break-word",paddingTop:10,margin:0,marginTop:-24,marginBottom:-38},userChatTextClamp:{textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":"4","-webkit-box-orient":"vertical",overflow:"hidden"},userChatTextClampMargin:{marginBottom:0},userChatTextExpanded:{textOverflow:"none",display:"initial","-webkit-line-clamp":"none","-webkit-box-orient":"initial",overflow:"initial",marginBottom:-30},userChatTextDark:{color:"rgb(227, 227, 227)"},bulbaTurn:{backgroundColor:"rgb(255, 255, 255)",borderRadius:16,padding:"12px 8px 12px 0",display:"flex",flexDirection:"column"},bulbaTurnDark:{backgroundColor:"rgb(19, 19, 20)"},bulbaTurnHeader:{display:"flex",alignItems:"center",justifyContent:"end",gap:12},bulbaTurnBody:{fontFamily:"Helvetica Neue,sans-serif",fontSize:"1rem",fontWeight:400,lineHeight:"1.4rem",letterSpacing:"normal",whiteSpace:"pre-wrap",display:"flex",flexDirection:"row"},bulbaTurnBodyDark:{color:"rgb(227, 227, 227)"},bulbaTurnFooter:{display:"flex",alignItems:"center",marginLeft:-12},sparkles:{flexShrink:0,marginTop:"-26px"},sendIcon:{color:"rgb(163, 164, 168)"},sendIconDark:{color:"rgb(107, 108, 110)"},footer:{bottom:0,position:"sticky",width:"100%",alignSelf:"center",backgroundColor:"rgb(243, 246, 252)",marginTop:"auto"},footerDark:{backgroundColor:"rgb(34, 35, 39)"},footerChat:{display:"flex",width:"calc(100% - 16px)",alignItems:"center"},footerScrollShadow:{boxShadow:"0px -16px 16px -24px rgba(60, 64, 67, 0.80)"},chatInput:{marginTop:16,borderRadius:"50px !important",fontFamily:"Helvetica Neue,sans-serif !important",background:"rgb(255, 255, 255) !important",borderColor:"rgb(60, 64, 67) !important"},chatInputDark:{color:"rgb(227, 227, 227) !important","-webkit-text-fill-color":"rgb(227, 227, 227) !important","&.MuiInputBase .MuiInputBase-input-MuiOutlinedInput-input.Mui-disabled":{color:"rgb(227, 227, 227) !important","-webkit-text-fill-color":"rgb(227, 227, 227) !important"},background:"rgb(19, 19, 20) !important",borderColor:"rgb(227, 227, 227) !important"},privacyNotice:{fontSize:"0.75rem",lineHeight:"1rem",fontFamily:"Helvetica Neue,sans-serif",letterSpacing:".1px",margin:"12px 24px",textAlign:"center"},privacyNoticeDark:{color:"rgb(227, 227, 227)"}});var ChatMock_BulbaChatDesktop=e=>{var t;let{attachment:n}=e,i=validateChats(n.attachment_body),o=n.attachment_body,s=tx(),[l,d]=(0,r.useState)(!!n.darkMode),c=null!==(t=n.streamResponses)&&void 0!==t&&t,[u,p]=(0,r.useState)(n.attachment_body.map(()=>0)),[h,m]=(0,r.useState)(n.attachment_body.map(()=>[])),[x,f]=(0,r.useState)(n.attachment_body.map(()=>!1)),[v,b]=(0,r.useState)(n.attachment_body.map(()=>!1)),handleStream=async e=>{if(h[e].length<o[e].length&&!x[e]){f(t=>t.map((t,n)=>n===e||t)),m(t=>{let n=g().cloneDeep(t);return n[e]=[...t[e],...o[e].slice(u[e],u[e]+1),{...o[e][u[e]+1],text:""}],n}),b(t=>t.map((t,n)=>n===e||t)),await new Promise(e=>setTimeout(e,3e3)),b(t=>t.map((t,n)=>n!==e&&t));let t=o[e][u[e]+1].text;await mockStream(t,t=>{m(n=>{let i=g().cloneDeep(n);return i[e][n[e].length-1].text+=t,i})}),p(t=>{let n=g().cloneDeep(t);return n[e]=t[e]+2,n}),f(t=>t.map((t,n)=>n!==e&&t))}};return(0,a.jsx)("div",{className:s.container,children:i?(0,a.jsx)(a.Fragment,{children:(c?h:n.attachment_body).map((e,t)=>{var i,p,h,m;return(0,a.jsxs)("div",{className:(0,tl.default)(s.singleChat,{[s.singleChatDark]:l}),style:{width:null!==(p=n.width)&&void 0!==p?p:960,height:null!==(h=n.height)&&void 0!==h?h:720},children:[(0,a.jsxs)("header",{className:(0,tl.default)(s.header,{[s.headerDark]:l}),children:[(0,a.jsx)(e$.Z,{size:"large","aria-label":"menu",sx:{mr:.5},children:(0,a.jsx)(e3.Z,{className:l?s.iconDarkLight:s.iconLightLight})}),(0,a.jsx)("p",{className:(0,tl.default)(s.logoText,{[s.logoTextDark]:l}),children:"Bulba"}),(0,a.jsxs)("div",{className:s.floatRight,children:[(0,a.jsx)(e$.Z,{size:"large",edge:"start","aria-label":"new-chat",className:s.headerIcon,children:(0,a.jsx)(tc.Z,{className:(0,tl.default)(s.icon24,l?s.iconDarkLight:s.iconLightLight)})}),(0,a.jsx)(e$.Z,{size:"large",edge:"start","aria-label":"options",className:s.headerIcon,children:(0,a.jsx)(tu.Z,{className:(0,tl.default)(s.icon24,l?s.iconDarkLight:s.iconLightLight)})}),(0,a.jsx)(e$.Z,{size:"large",edge:"start","aria-label":"options",className:s.headerIcon,children:(0,a.jsx)(tp.Z,{className:(0,tl.default)(s.icon24,l?s.iconDarkLight:s.iconLightLight)})}),(0,a.jsx)(e$.Z,{size:"large",edge:"start","aria-label":"options",className:s.headerIcon,children:(0,a.jsx)(th.Z,{className:(0,tl.default)(s.icon24,l?s.iconDarkLight:s.iconLightLight)})}),(0,a.jsx)(e$.Z,{size:"large",edge:"start","aria-label":"options",className:s.headerIcon,children:(0,a.jsx)(tm.Z,{className:(0,tl.default)(s.icon24,l?s.iconDarkLight:s.iconLightLight)})}),(0,a.jsx)("div",{style:{cursor:"pointer"},onClick:()=>d(e=>!e),children:(0,a.jsx)(e4.Z,{className:(0,tl.default)(s.icon32,s.iconLightLight)})})]})]}),(0,a.jsxs)("div",{className:(0,tl.default)(s.body,{[s.bodyDark]:l}),children:[e.map((n,i)=>(0,a.jsx)(r.Fragment,{children:"user"===n.role?(0,a.jsx)(BulbaChatDesktop_ChatUserTurn,{turn:n,darkMode:l,isLastTurn:i===e.length-1}):(0,a.jsxs)("div",{className:(0,tl.default)(s.bulbaTurn,{[s.bulbaTurnDark]:l}),children:[(0,a.jsxs)("div",{className:s.bulbaTurnHeader,children:[i===e.length-1&&(!c||!x[t])&&(0,a.jsx)(e0.Z,{sx:{fontSize:"0.875rem",fontWeight:500,textTransform:"none",color:l?"rgb(196, 199, 197)":"#1f1f1f"},endIcon:(0,a.jsx)(e8.Z,{style:{color:l?"rgb(168, 199, 250)":"#1976d2"}}),children:"Regenerate draft"}),(0,a.jsx)(e$.Z,{size:"large","aria-label":"play-ttv",sx:{mr:"-4px",mt:"-8px",mb:"8px"},children:(0,a.jsx)(e5.Z,{className:l?s.iconDarkDark:s.iconLightDark})})]}),(0,a.jsx)("div",{className:(0,tl.default)(s.bulbaTurnBody,{[s.bulbaTurnBodyDark]:l}),children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"-24px",marginLeft:"60px"},children:[v[t]&&i===u[t]+1&&(0,a.jsx)($.D8,{size:18,style:{marginBottom:24}}),(0,a.jsx)(B.Z,{text:n.text,innerStyle:"line-height: 1.5rem; white-space: pre-wrap; word-break: break-word; ".concat(l?"font-weight: 450;":"")}),(!c||!x[t]||i!==u[t]+1)&&(0,a.jsxs)("div",{className:s.bulbaTurnFooter,children:[(0,a.jsx)(e$.Z,{size:"large","aria-label":"thumb-up",children:(0,a.jsx)(e7.Z,{className:l?s.iconDarkDark:s.iconLightDark})}),(0,a.jsx)(e$.Z,{size:"large","aria-label":"thumb-down",children:(0,a.jsx)(te.Z,{className:l?s.iconDarkDark:s.iconLightDark})}),i===e.length-1&&(0,a.jsx)(e$.Z,{size:"large","aria-label":"tune",children:(0,a.jsx)(tt.Z,{className:l?s.iconDarkDark:s.iconLightDark})}),(0,a.jsx)(e$.Z,{size:"large","aria-label":"share-response",children:(0,a.jsx)(tn.Z,{className:l?s.iconDarkDark:s.iconLightDark})}),(0,a.jsx)(e$.Z,{size:"large","aria-label":"response-options",children:(0,a.jsx)(e6.Z,{className:l?s.iconDarkDark:s.iconLightDark})})]})]})})]})},"chat-".concat(t,"-turn-").concat(i))),(0,a.jsxs)("footer",{className:(0,tl.default)(s.footer,{[s.footerDark]:l}),children:[(0,a.jsxs)("div",{className:s.footerChat,children:[(0,a.jsx)(e$.Z,{size:"large","aria-label":"add-photo",style:{flexShrink:0,marginTop:24},children:(0,a.jsx)(ti.Z,{className:l?s.iconDarkDark:s.iconLightDark})}),(0,a.jsx)("div",{style:{flexGrow:1},children:(0,a.jsx)(e1.Z,{type:"text",fullWidth:!0,disabled:!0,value:c?null!==(m=null===(i=o[t][u[t]])||void 0===i?void 0:i.text)&&void 0!==m?m:"":void 0,endAdornment:(0,a.jsx)(e2.Z,{position:"end",children:(0,a.jsx)(e$.Z,{"aria-label":"mic",children:(0,a.jsx)(to.Z,{className:l?s.iconDarkDark:s.iconLightDark})})}),placeholder:"Enter a prompt here",className:(0,tl.default)(s.chatInput,{[s.chatInputDark]:l})})}),(0,a.jsx)(e$.Z,{size:"large",edge:"start","aria-label":"options",sx:{mt:"14px",ml:"4px",w:"32px",h:"32px"},disabled:!!c&&(x[t]||u[t]>=o[t].length),onClick:c?()=>handleStream(t):()=>{},children:(0,a.jsx)(tg.Z,{className:c?l?s.iconDarkDark:s.iconLightDark:l?s.sendIconDark:s.sendIcon})})]}),(0,a.jsxs)("p",{className:(0,tl.default)(s.privacyNotice,{[s.privacyNoticeDark]:l}),children:["Bulba may display inaccurate or offensive information that doesn't represent Gorilla's views."," ",(0,a.jsx)("span",{style:{fontWeight:500,textDecoration:"underline"},children:"Bulba Privacy Notice"})]})]})]})]},"chat-".concat(t))})}):(0,a.jsx)("div",{children:"Invalid Bulba Chat Attachment"})})},tf=n(99562),components_ChatGPTButton=e=>{let t=tv(),n=e.secondary?e.darkMode?"secondaryDark":"secondary":e.tertiary?"tertiary":e.base?"base":e.darkMode?"primaryDark":"primary";return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("button",{...m.omit(e,"className","primary","secondary","tetriary","base","iconPosition","icon","darkMode","customIcon"),className:u()(t.wrapper,t[n],e.className),onClick:e.onClick,children:[e.children&&(0,a.jsx)("span",{children:e.children}),e.icon&&(0,a.jsx)(z.FontAwesomeIcon,{icon:e.icon,className:u()(t.icon,"left"===e.iconPosition&&t.iconLeft)}),e.customIcon&&(0,a.jsx)("div",{className:u()(t.icon,"left"===e.iconPosition&&t.iconLeft),children:e.customIcon})]})})};let tv=(0,tf.ZL)(e=>({wrapper:{fontWeight:400,fontSize:e.typography.fontSize,background:"transparent",height:e.spacing(4),border:1,borderRadius:4,borderStyle:"solid",display:"flex",alignItems:"center",gap:"".concat(e.spacing(1),"px"),position:"relative",overflow:"hidden","&:disabled":{opacity:.5,cursor:"not-allowed"},"&:not(:disabled)":{cursor:"pointer"},cursor:"pointer"},primary:{color:"#374151",background:"white",borderColor:"rgba(0, 0, 0, 0.1)","&:hover":{backgroundColor:"rgb(217, 217, 217)"},transition:"background 0.3s"},primaryDark:{color:e.colors.white,background:"rgba(52, 53, 65)",borderColor:"rgb(86, 88, 105)"},secondary:{color:"rgb(172, 172, 190)",background:"transparent",border:"none","&:hover":{color:"rgb(55, 65, 81)",backgroundColor:"rgb(217, 217, 217)"},transition:"background 0.3s",height:24},secondaryDark:{color:"rgb(172, 172, 190)",background:"transparent",border:"none","&:hover":{color:"rgb(217, 217, 227)",backgroundColor:"rgb(68, 70, 83)"},transition:"background 0.3s",height:24},tertiary:{color:e.palette.primary.main,background:e.colors.white,borderColor:e.colors.periwinkle50,"&$active":{background:e.colors.periwinkle5}},base:{color:e.colors.black,background:e.colors.gray10,border:0},icon:{width:e.spacing(2),height:e.spacing(2),flexShrink:0},iconLeft:{order:1}}));var components_SidebarIcon=e=>(0,a.jsxs)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"icon-sm text-token-text-primary gizmo:text-token-text-tertiary gizmo:hover:text-token-text-secondary",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,a.jsx)("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]}),components_UploadIcon=e=>(0,a.jsxs)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"icon-sm",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,a.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,a.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),EditIcon=e=>(0,a.jsxs)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"icon-sm",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,a.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),components_CopyIcon=e=>(0,a.jsxs)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"icon-sm",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),(0,a.jsx)("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),components_ThumbsUpIcon=e=>(0,a.jsx)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"icon-sm",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})}),components_ThumbsDownIcon=e=>(0,a.jsx)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"icon-sm",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"})}),components_SendIcon=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",className:"icon-sm m-1 md:m-0",...e,children:(0,a.jsx)("path",{d:"M.5 1.163A1 1 0 0 1 1.97.28l12.868 6.837a1 1 0 0 1 0 1.766L1.969 15.72A1 1 0 0 1 .5 14.836V10.33a1 1 0 0 1 .816-.983L8.5 8 1.316 6.653A1 1 0 0 1 .5 5.67V1.163Z",fill:"currentColor"})}),components_RedoIcon=e=>(0,a.jsxs)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0 icon-xs",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("polyline",{points:"1 4 1 10 7 10"}),(0,a.jsx)("polyline",{points:"23 20 23 14 17 14"}),(0,a.jsx)("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})]});let ChatTurn=e=>{let{turn:t,darkMode:n}=e,i=tb(),o="user"!==t.role,[s,l]=(0,r.useState)(!1);return(0,a.jsx)("div",{className:(0,tl.default)(i.chatWrapper,{[i.userTurnLight]:!o&&!n,[i.userTurnDark]:!o&&n,[i.modelTurnLight]:o&&!n,[i.modelTurnDark]:o&&n}),onMouseEnter:()=>{s||l(!0)},onMouseLeave:()=>{s&&l(!1)},children:(0,a.jsxs)("div",{className:(0,tl.default)(i.chatTurn),children:[(0,a.jsx)(TurnIcon,{isModel:o}),(0,a.jsx)("p",{className:(0,tl.default)(i.chatText,{[i.chatTextDark]:n}),children:(0,a.jsx)(B.Z,{text:t.text,innerStyle:"line-height: 1.5rem; font-size: 1rem; white-space: pre-wrap; word-break: break-word; margin: 0; ".concat(n?"font-weight: 400;":"")})}),(0,a.jsx)("div",{className:i.turnIcons,children:o?(0,a.jsxs)("div",{className:i.iconRow,children:[(0,a.jsx)(components_ChatGPTButton,{customIcon:(0,a.jsx)(components_CopyIcon,{}),secondary:!0,darkMode:n}),(0,a.jsx)(components_ChatGPTButton,{customIcon:(0,a.jsx)(components_ThumbsUpIcon,{}),secondary:!0,darkMode:n}),(0,a.jsx)(components_ChatGPTButton,{customIcon:(0,a.jsx)(components_ThumbsDownIcon,{}),secondary:!0,darkMode:n})]}):(0,a.jsx)(a.Fragment,{children:s&&(0,a.jsx)(components_ChatGPTButton,{customIcon:(0,a.jsx)(EditIcon,{}),darkMode:n,secondary:!0})})})]})})},TurnIcon=e=>{let{isModel:t}=e,n=tb();return(0,a.jsx)("div",{className:(0,tl.default)(n.turnIcon,{[n.turnIconModel]:t}),children:t?"M":"U"})},tb=(0,$.ZL)({container:{width:"100%",display:"flex",justifyContent:"center",gap:16,flexWrap:"wrap",margin:"16px 0"},singleChat:{display:"flex",flexDirection:"column",overflow:"hidden",backgroundColor:"white"},singleChatDark:{backgroundColor:"rgb(52, 53, 65)"},header:{height:56,padding:"0.5rem",position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"white",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},headerDark:{backgroundColor:"rgb(52, 53, 65)",borderBottom:"1px solid rgba(32,33,35,.5)"},headerText:{fontFamily:"Helvetica Neue,sans-serif",fontSize:"0.875rem",fontWeight:400,color:"rgb(96, 99, 103)"},headerTextDark:{color:"rgb(232, 234, 236)"},headerRight:{display:"flex",alignItems:"center"},headerButton:{padding:12,height:44},body:{display:"flex",flexDirection:"column",overflowY:"auto",minHeight:"calc(100% - 56px)"},iconRow:{display:"flex",flexWrap:"nowrap"},turnIcons:{position:"absolute",top:0,right:0,width:84,display:"flex",justifyContent:"flex-start"},chatWrapper:{display:"flex",flexDirection:"row",padding:"1.5rem 1rem",justifyContent:"center",flexWrap:"wrap"},chatTurn:{width:"48rem",display:"flex",alignItems:"start",justifyContent:"start",gap:"1.5rem",position:"relative"},userTurn:{display:"flex",alignItems:"start",justifyContent:"start",margin:"16px 0 16px 12px"},userTurnIconMargin:{margin:4},chatText:{fontFamily:"Helvetica Neue,sans-serif",fontSize:"1rem",lineHeight:"1.4rem",letterSpacing:"normal",whiteSpace:"pre-wrap",wordWrap:"break-word",margin:0,display:"flex",justifyContent:"space-between",width:"calc(100% - 144px)",color:"rgb(55, 65, 81)"},chatTextDark:{color:"rgb(227, 227, 227)"},userTurnLight:{backgroundColor:"white"},userTurnDark:{backgroundColor:"rgb(52, 53, 65)"},modelTurnLight:{backgroundColor:"rgb(247, 247, 247)"},modelTurnDark:{backgroundColor:"rgb(68, 70, 83)"},turnIcon:{display:"flex",alignItems:"center",justifyContent:"center",width:36,height:36,borderRadius:4,backgroundColor:"rgb(120, 89, 188)",color:"white",fontSize:"1.2rem"},turnIconModel:{backgroundColor:"rgb(91, 192, 131)"},footer:{bottom:0,position:"sticky",width:"100%",alignSelf:"center",backgroundColor:"transparent !important",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0) 13.94%, rgb(255, 255, 255) 54.73%)",marginTop:"auto"},footerDark:{backgroundImage:"linear-gradient(180deg,rgba(53,55,64,0),#353740 58.85%);"},footerChat:{display:"flex",flexDirection:"column",width:"calc(100% - 16px)",justifyContent:"center",alignItems:"center"},chatInput:{marginTop:16,width:640,borderRadius:"8px !important",fontFamily:"Helvetica Neue,sans-serif !important",background:"rgb(255, 255, 255) !important",borderColor:"rgb(60, 64, 67) !important",boxShadow:"rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0.1) 0px 0px 15px 0px"},chatInputDark:{color:"white !important","-webkit-text-fill-color":"rgb(64, 65, 79) !important","&.MuiInputBase &.MuiInputBase-input-MuiOutlinedInput-input.Mui-disabled":{color:"white !important","-webkit-text-fill-color":"white !important"},backgroundColor:"rgb(64, 65, 79) !important",borderColor:"rgba(32, 33, 35, 0.5) !important"},privacyNotice:{fontSize:"0.75rem",lineHeight:"1rem",fontFamily:"Helvetica Neue,sans-serif",letterSpacing:".1px",margin:"12px 24px",textAlign:"center",color:"rgb(55, 65, 81)"},privacyNoticeDark:{color:"rgb(227, 227, 227)"}});var ChatMock_ChatGPTDesktop=e=>{var t;let{attachment:n}=e,i=validateChats(n.attachment_body),o=n.attachment_body,s=tb(),[l,d]=(0,r.useState)(!!n.darkMode),c=null!==(t=n.streamResponses)&&void 0!==t&&t,[u,p]=(0,r.useState)(n.attachment_body.map(()=>0)),[h,m]=(0,r.useState)(n.attachment_body.map(()=>[])),[x,f]=(0,r.useState)(!1),handleStream=async e=>{if(h[e].length<o[e].length&&!x){f(!0),m(t=>{let n=g().cloneDeep(t);return n[e]=[...t[e],...o[e].slice(u[e],u[e]+1),{...o[e][u[e]+1],text:""}],n});let t=o[e][u[e]+1].text;for(;t.length>0;)await new Promise(n=>{setTimeout(()=>{let i=Math.round(40*Math.random())+1,o=t.substring(i).indexOf(" ")+i;o<=0&&(o=24),m(n=>{let i=g().cloneDeep(n);return i[e][n[e].length-1].text+=t.slice(0,o),i}),t=t.slice(o),n()},200*Math.random())});p(t=>{let n=g().cloneDeep(t);return n[e]=t[e]+2,n}),f(!1)}};return(0,a.jsx)("div",{className:s.container,children:i?(0,a.jsx)(a.Fragment,{children:(c?h:n.attachment_body).map((e,t)=>{var i,r,p,h;return(0,a.jsxs)("div",{className:(0,tl.default)(s.singleChat,{[s.singleChatDark]:l}),style:{width:null!==(r=n.width)&&void 0!==r?r:960,height:null!==(p=n.height)&&void 0!==p?p:720},children:[(0,a.jsxs)("header",{className:(0,tl.default)(s.header,{[s.headerDark]:l}),children:[(0,a.jsx)(components_ChatGPTButton,{customIcon:(0,a.jsx)(components_SidebarIcon,{}),secondary:!0,darkMode:l,className:s.headerButton}),(0,a.jsx)("p",{className:(0,tl.default)(s.headerText,{[s.headerTextDark]:l}),children:"Default"}),(0,a.jsx)("div",{className:s.headerRight,children:(0,a.jsx)(components_ChatGPTButton,{customIcon:(0,a.jsx)(components_UploadIcon,{}),darkMode:l,onClick:()=>d(e=>!e),secondary:!0,className:s.headerButton})})]}),(0,a.jsxs)("div",{className:s.body,children:[e.map((e,n)=>(0,a.jsx)(ChatTurn,{turn:e,darkMode:l},"chat-".concat(t,"-turn-").concat(n))),(0,a.jsxs)("footer",{className:(0,tl.default)(s.footer,{[s.footerDark]:l}),children:[(0,a.jsxs)("div",{className:s.footerChat,children:[(0,a.jsx)("div",{style:{width:640,display:"flex"},children:(0,a.jsx)("div",{style:{marginLeft:"auto",marginTop:24},children:(0,a.jsx)(components_ChatGPTButton,{iconPosition:"left",customIcon:(0,a.jsx)(components_RedoIcon,{}),darkMode:l,children:"Regenerate"})})}),(0,a.jsx)(e1.Z,{type:"text",disabled:!0,value:c?null!==(h=null===(i=o[t][u[t]])||void 0===i?void 0:i.text)&&void 0!==h?h:"":void 0,endAdornment:(0,a.jsx)(e2.Z,{position:"end",children:(0,a.jsx)(components_ChatGPTButton,{customIcon:(0,a.jsx)(components_SendIcon,{}),secondary:!0,darkMode:l,disabled:!!c&&(x||u[t]>=o[t].length),onClick:c?()=>handleStream(t):()=>{}})}),placeholder:"Send a message",className:(0,tl.default)(s.chatInput,{[s.chatInputDark]:l})})]}),(0,a.jsx)("p",{className:(0,tl.default)(s.privacyNotice,{[s.privacyNoticeDark]:l}),children:"This model can make mistakes. Verify important information."})]})]})]},"chat-".concat(t))})}):(0,a.jsx)("div",{children:"Invalid Bulba Chat Attachment"})})};let noop=()=>{};function AttachmentView(e){var t,n,i,o,s,l;let c=ty(),{onViewAttachment:m}=(0,M.G)(),g=(0,ee.o5)("c-l-disable-links-in-attachment",{projectId:e.projectId},{shortCircuit:!e.projectId,defaultValue:!1}),x=(0,ee.o5)("use-grid-video",{projectId:e.projectId},{shortCircuit:!e.projectId,defaultValue:!1}),f="61d74737b419c3002a50e31a"===e.taskCustomer,v=null===(n=e.projectConfig)||void 0===n?void 0:null===(t=n.imageAttachmentConfig)||void 0===t?void 0:t.addBrightnessSlider,b=null===(o=e.projectConfig)||void 0===o?void 0:null===(i=o.imageAttachmentConfig)||void 0===i?void 0:i.addBlurSlider,y=null===(l=e.projectConfig)||void 0===l?void 0:null===(s=l.imageAttachmentConfig)||void 0===s?void 0:s.addZoomSlider,{viewbox:w,setViewport:j,handleWheel:k,setInitialViewport:C}=(0,es.Z)({left:0,top:0,height:1,width:1},{autofocusOnZoom:!1,enableUnfocusedZoom:!0,zoomOnAlt:!0}),[A,T]=r.useState({height:1,width:1}),S=r.useRef(null),handleResize=()=>{j({left:0,top:0,width:S.current.clientWidth,height:S.current.clientHeight}),C({left:0,top:0,width:S.current.clientWidth,height:S.current.clientHeight}),T({width:S.current.clientWidth,height:S.current.clientHeight})};r.useEffect(()=>{e.hidden||(m(e.index),e.attachment.type===d.TextCollectionAttachmentType.Video&&(handleResize(),window.addEventListener("resize",handleResize,!1)))},[e.index,e.hidden]);let onFocus=()=>{e.handleAttachmentFocus(e.index)},onBlur=()=>{e.handleAttachmentBlur(e.index)},I=(0,ej.X)(),P=(0,eO.B)();return r.useEffect(()=>{e.taskCustomer&&(I.setTaskCustomer(e.taskCustomer),P.setTaskCustomer(e.taskCustomer))},[e.taskCustomer]),(0,a.jsx)("div",{ref:S,className:u()(c.attachment,{[c.fixed]:!e.stacked,[c.hidden]:e.hidden,[c.sticky]:e.isSticky,[c.imageAttachment]:e.attachment.type===d.TextCollectionAttachmentType.Image||e.attachment.type===d.TextCollectionAttachmentType.Video||e.attachment.type===d.TextCollectionAttachmentType.PDF}),children:(()=>{var t,n,i,o,r,s,l,u,m,j,C,T,S,P,D,N,R,B,M,L,z,O,H,V,U,W,G,q,K,J,Q,Y,X,$,ee,et,en,ei,eo,es,el,ed,ec,eu,ep,eh,em,eg,ex,ef,ev,eb,ey,ew,ej,ek,eC,eA,eT,eS,eI,eP;if(I.enabled)return I.useChatbotV2?(0,a.jsx)(ChatbotRanking_ChatBotViewV2,{attachment:e.attachment,projectId:e.projectId,assignmentId:e.assignmentId,subtaskMetadata:e.subtaskMetadata,setAnnotations:e.setAnnotations,prefillPrompt:e.prefillPrompt,prefillRefText:e.prefillRefText,canStopStreaming:f}):(0,a.jsx)(ChatbotRanking_ChatBotView,{attachment:e.attachment,projectId:e.projectId,smartAssistantRlhfHook:e.smartAssistantRlhfHook,assignmentId:e.assignmentId,subtaskMetadata:e.subtaskMetadata,setAnnotations:e.setAnnotations,prefillPrompt:e.prefillPrompt,prefillRefText:e.prefillRefText});if(e.editBoundingBoxMode&&e.attachment.jpegContent)return(0,a.jsx)(PanZoomImage,{boxes:[],disabled:!1,size:e.size,src:e.attachment.jpegContent,editBoundingBoxMode:e.editBoundingBoxMode,boundingBoxField:e.boundingBoxField,updateBoundingBoxField:e.updateBoundingBoxField});switch(e.attachment.type){case d.TextCollectionAttachmentType.DownloadableText:return(0,a.jsx)(DownloadableTextAttachmentView,{attachmentUrl:e.attachment.content,useProtectedText:e.useProtectedText,loggedUserId:e.loggedUserId,renderAsPlainText:null===(n=e.projectConfig)||void 0===n?void 0:null===(t=n.textAttachmentConfig)||void 0===t?void 0:t.renderAsPlainText,disableLinksInTextAttachment:g,projectId:e.projectId,showSensitiveContentWarning:e.showSensitiveContentWarning,handleSkip:e.handleSkip});case d.TextCollectionAttachmentType.DownloadableEmbeddedApp:return(0,a.jsx)(ea.Z,{attachmentUrl:e.attachment.content,isAuditMode:e.isAuditMode});case d.TextCollectionAttachmentType.Text:return(0,a.jsx)(p.X,{className:c.textAttachment,children:(0,a.jsx)(TextComponent,{props:e,disableLinksInTextAttachment:g})});case d.TextCollectionAttachmentType.Image:if(v||b||y)return(0,a.jsx)(BlurBrightnessImage,{src:e.attachment.content,caption:e.attachment.caption,addBrightnessSlider:v,addBlurSlider:b,addZoomSlider:y,size:e.size});return(0,a.jsx)(PanZoomImage,{boxes:e.boxes,disabled:e.hidden,size:e.size,src:e.attachment.content,caption:e.attachment.caption});case d.TextCollectionAttachmentType.ImageGrid:{let t=e.attachment.content.split(",").map(e=>e.trim()).filter(e=>e.length),n=(null!==(i=e.attachment.caption)&&void 0!==i?i:"").split(",").map(e=>e.trim()).filter(e=>e.length),r=null!==(o=e.attachment.column_count)&&void 0!==o?o:3;return(0,a.jsx)(eZ.Z,{style:{height:"100%",width:"100%"},cols:r,cellHeight:75+e.size.height/r,children:t.map((t,i)=>(0,a.jsx)(ez.Z,{children:(0,a.jsx)(BlurBrightnessImage,{src:t,caption:n[i],addBrightnessSlider:v,addBlurSlider:b,addZoomSlider:y,size:{width:e.size.width/r,height:e.size.height/r}})},i))})}case d.TextCollectionAttachmentType.RLHFPairwiseEvaluation:return(0,a.jsx)(textcollection_RLHFPairwiseEvaluation,{attachment:e.attachment,projectId:e.projectId,setAnnotations:e.setAnnotations});case d.TextCollectionAttachmentType.PairwiseEvaluation:return(0,a.jsx)(textcollection_PairwiseEvaluation,{content:e.attachment.content,left:e.attachment.left,right:e.attachment.right});case d.TextCollectionAttachmentType.PDF:return(0,a.jsx)(eY.Z,{src:e.attachment.content,renderWithPDFJs:null===(s=e.projectConfig)||void 0===s?void 0:null===(r=s.pdfAttachmentConfig)||void 0===r?void 0:r.renderWithPDFJs});case d.TextCollectionAttachmentType.GView:return(0,a.jsx)(h.Z,{src:e.attachment.content});case d.TextCollectionAttachmentType.TranscriptionAudio:return(0,a.jsx)(TranscriptionAudioAttachmentView,{projectId:e.projectId,url:e.attachment.content,startSelfDestructSequence:e.startSelfDestructSequence,responseWindow:null===(u=e.projectConfig)||void 0===u?void 0:null===(l=u.audioAttachmentConfig)||void 0===l?void 0:l.responseWindow,audioPlaybackPrecision:null===(j=e.projectConfig)||void 0===j?void 0:null===(m=j.audioAttachmentConfig)||void 0===m?void 0:m.audioPlaybackPrecision});case d.TextCollectionAttachmentType.Audio:return(0,a.jsx)(p.X,{className:c.textAttachment,children:(0,a.jsx)(er.Z,{attachment:e.attachment,completed:e.completed,markAttachmentAsCompleted:e.markAttachmentAsCompleted,hidden:e.hidden,preventSkip:!(null===(T=e.projectConfig)||void 0===T?void 0:null===(C=T.audioAttachmentConfig)||void 0===C?void 0:C.disablePreventSkip),startSelfDestructSequence:e.startSelfDestructSequence,responseWindow:null===(P=e.projectConfig)||void 0===P?void 0:null===(S=P.audioAttachmentConfig)||void 0===S?void 0:S.responseWindow,onFocus:onFocus,onBlur:onBlur,disabled:(null===(N=e.projectConfig)||void 0===N?void 0:null===(D=N.audioAttachmentConfig)||void 0===D?void 0:D.disableConcurrentPlayback)&&e.unfocused})});case d.TextCollectionAttachmentType.Video:{let t=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(F.Z,{srcVideoUrl:e.attachment.content,onLoadOrError:noop,caption:e.attachment.caption,onEnded:()=>{e.markAttachmentAsCompleted(!0)},allowFileDownload:e.allowVideoAttachmentDownload,forceFullscreen:null===(B=e.projectConfig)||void 0===B?void 0:null===(R=B.videoAttachmentConfig)||void 0===R?void 0:R.enableForceFullscreen,onlyVisibleOnLoadComplete:null===(L=e.projectConfig)||void 0===L?void 0:null===(M=L.videoAttachmentConfig)||void 0===M?void 0:M.enableOnlyVisibleOnLoadComplete,preventSkip:!(null===(O=e.projectConfig)||void 0===O?void 0:null===(z=O.videoAttachmentConfig)||void 0===z?void 0:z.disablePreventSkip),allowPlaybackRate:!(null===(V=e.projectConfig)||void 0===V?void 0:null===(H=V.videoAttachmentConfig)||void 0===H?void 0:H.disablePlaybackRate),maximumExtraPlayingTime:null===(W=e.projectConfig)||void 0===W?void 0:null===(U=W.videoAttachmentConfig)||void 0===U?void 0:U.maximumExtraPlayingTime,disableThumbnail:null===(q=e.projectConfig)||void 0===q?void 0:null===(G=q.videoAttachmentConfig)||void 0===G?void 0:G.disableThumbnail,skipSourceVideoLoadingCheck:null===(J=e.projectConfig)||void 0===J?void 0:null===(K=J.videoAttachmentConfig)||void 0===K?void 0:K.skipSourceVideoLoadingCheck,disableVideoScaling:null===(Y=e.projectConfig)||void 0===Y?void 0:null===(Q=Y.videoAttachmentConfig)||void 0===Q?void 0:Q.disableVideoScaling,showCopyCurrentTimeButton:null===($=e.projectConfig)||void 0===$?void 0:null===(X=$.videoAttachmentConfig)||void 0===X?void 0:X.showCopyCurrentTimeButton})}),n=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(videoWithLiveInstructions,{srcVideoUrl:e.attachment.content,onLoadOrError:noop,caption:e.attachment.caption,onEnded:()=>{e.markAttachmentAsCompleted(!0)},allowFileDownload:e.allowVideoAttachmentDownload,forceFullscreen:null===(et=e.projectConfig)||void 0===et?void 0:null===(ee=et.videoAttachmentConfig)||void 0===ee?void 0:ee.enableForceFullscreen,onlyVisibleOnLoadComplete:null===(ei=e.projectConfig)||void 0===ei?void 0:null===(en=ei.videoAttachmentConfig)||void 0===en?void 0:en.enableOnlyVisibleOnLoadComplete,preventSkip:!(null===(es=e.projectConfig)||void 0===es?void 0:null===(eo=es.videoAttachmentConfig)||void 0===eo?void 0:eo.disablePreventSkip),allowPlaybackRate:!(null===(ed=e.projectConfig)||void 0===ed?void 0:null===(el=ed.videoAttachmentConfig)||void 0===el?void 0:el.disablePlaybackRate),maximumExtraPlayingTime:null===(eu=e.projectConfig)||void 0===eu?void 0:null===(ec=eu.videoAttachmentConfig)||void 0===ec?void 0:ec.maximumExtraPlayingTime,disableThumbnail:null===(eh=e.projectConfig)||void 0===eh?void 0:null===(ep=eh.videoAttachmentConfig)||void 0===ep?void 0:ep.disableThumbnail,skipSourceVideoLoadingCheck:null===(eg=e.projectConfig)||void 0===eg?void 0:null===(em=eg.videoAttachmentConfig)||void 0===em?void 0:em.skipSourceVideoLoadingCheck,liveInstructions:e.liveInstructions})}),i=t;return x?i=(0,a.jsx)(VideoWithGrid,{url:e.attachment.content,onEnded:()=>{e.markAttachmentAsCompleted(!0)}}):e.liveInstructions&&(i=n),e.disableVideoZoom?i:(0,a.jsx)("svg",{tabIndex:0,onWheel:k,viewBox:w,width:"100%",height:"100%",children:(0,a.jsx)("foreignObject",{x:"0",y:"0",width:A.width,height:A.height,children:i})})}case d.TextCollectionAttachmentType.Subtask:return(0,a.jsx)(Z.Z,{id:e.attachment.content,attachmentBody:e.attachment.attachment_body});case d.TextCollectionAttachmentType.HTML:return(0,a.jsx)(_.Z,{src:e.attachment.content});case d.TextCollectionAttachmentType.VideoComparison:{let t=(0,a.jsx)(videoComparison,{srcVideoUrlA:e.attachment.videoA,srcVideoUrlB:e.attachment.videoB,onLoadOrError:noop,caption:e.attachment.caption,onEnded:()=>{e.markAttachmentAsCompleted(!0)},allowFileDownload:e.allowVideoAttachmentDownload,forceFullscreen:null===(ef=e.projectConfig)||void 0===ef?void 0:null===(ex=ef.videoAttachmentConfig)||void 0===ex?void 0:ex.enableForceFullscreen,onlyVisibleOnLoadComplete:null===(eb=e.projectConfig)||void 0===eb?void 0:null===(ev=eb.videoAttachmentConfig)||void 0===ev?void 0:ev.enableOnlyVisibleOnLoadComplete,preventSkip:!(null===(ew=e.projectConfig)||void 0===ew?void 0:null===(ey=ew.videoAttachmentConfig)||void 0===ey?void 0:ey.disablePreventSkip),allowPlaybackRate:!(null===(ek=e.projectConfig)||void 0===ek?void 0:null===(ej=ek.videoAttachmentConfig)||void 0===ej?void 0:ej.disablePlaybackRate),maximumExtraPlayingTime:null===(eA=e.projectConfig)||void 0===eA?void 0:null===(eC=eA.videoAttachmentConfig)||void 0===eC?void 0:eC.maximumExtraPlayingTime,disableVideoScaling:null===(eS=e.projectConfig)||void 0===eS?void 0:null===(eT=eS.videoAttachmentConfig)||void 0===eT?void 0:eT.disableVideoScaling,disableThumbnail:null===(eP=e.projectConfig)||void 0===eP?void 0:null===(eI=eP.videoAttachmentConfig)||void 0===eI?void 0:eI.disableThumbnail});return t}case d.TextCollectionAttachmentType.BulbaChatMobile:case d.TextCollectionAttachmentType.ChatMock:switch(e.attachment.mockType){case d.ChatMockType.BulbaDesktop:return(0,a.jsx)(ChatMock_BulbaChatDesktop,{attachment:e.attachment});case d.ChatMockType.ChatGPTDesktop:return(0,a.jsx)(ChatMock_ChatGPTDesktop,{attachment:e.attachment});case d.ChatMockType.BulbaMobile:default:return(0,a.jsx)(ChatMock_BulbaChatMobile,{attachment:e.attachment})}default:return(0,a.jsx)(E.Z,{attachmentType:e.attachment.type,attachment:e.attachment.content,onLoadOrError:noop,onOpenWebsite:()=>{e.markAttachmentAsCompleted(!0)}})}})()})}let processTextForFair=e=>{if(e.split("Baseline Response 1").length<2)return e;let t=e.split("Baseline Response 1")[1].split(" ").length,n=e.replace("Baseline Response 1","Baseline Response 1 (".concat(t," words)"));return n},processTextForBulba=(e,t)=>{let n=g().get(t,"BULBA_suggested_responses_edited_response[0]","");if(n&&g().isString(n))return e.split("\n").slice(0,-2).join("\n")+"<div class='bot-msg'>\n<div class='avatar'>\n<div class='emoji'>\uD83E\uDD16</div>\n<div class='username'>Baseline Response</div>\n</div>\n\n<div class='msg-text'>\n".concat(n,"\n</div>\n</div>\n</div>")},fillVariables=async(e,t)=>await (0,eX.populateTemplateHelper)(e,{TASKER_ID:t,DOMAIN:"outlier.ai"}),TextComponent=e=>{var t,n,i,o,s,l,d,c,u,p,h,m;let{props:x,disableLinksInTextAttachment:f}=e,[v,b]=(0,r.useState)(x.attachment.content),y=(0,ee.ZP)("dolphin-customer-api-whitelist",{userId:x.taskCustomer},!0),w=(0,ee.ZP)("bulba-reformat-carriage-return",{projectId:x.projectId},!1),j=(0,ee.ZP)("enable-bulba-baseline-response",{},!1),k=(0,ee.ZP)("nightingale-attachments-reformat",{projectId:x.projectId},!1);if((0,el.Z)(async()=>{var e,t;let n;if(x.loggedUserId){if(y&&(n=await fillVariables(x.attachment.content,x.loggedUserId)),j&&x.isReview&&g().isNumber(x.reviewLevel)&&x.reviewLevel>=1&&(1===x.index&&"64ac8ca60c5ea75a6df68084"===x.projectId||"64ac8ca60c5ea75a6df68084"!==x.projectId)){let e=processTextForBulba(x.attachment.content,x.subtaskMetadata);e&&(n=e)}(null==x?void 0:null===(t=x.projectConfig)||void 0===t?void 0:null===(e=t.pipelineConfig)||void 0===e?void 0:e.pipelineName)==="fair_eval_pipeline"&&(n=processTextForFair(x.attachment.content)),n&&n!==v&&b(n)}},[y,x.attachment.content,x.loggedUserId,j,null==x?void 0:null===(n=x.projectConfig)||void 0===n?void 0:null===(t=n.pipelineConfig)||void 0===t?void 0:t.pipelineName,x.subtaskMetadata,x.index,x.isReview]),x.useProtectedText)return(0,a.jsx)(L.Z,{text:x.attachment.content,loggedUserId:x.loggedUserId,renderAsPlainText:null===(l=x.projectConfig)||void 0===l?void 0:null===(s=l.textAttachmentConfig)||void 0===s?void 0:s.renderAsPlainText,disableLinksInTextAttachment:f});if(null===(o=x.projectConfig)||void 0===o?void 0:null===(i=o.textAttachmentConfig)||void 0===i?void 0:i.renderAsPlainText)return(0,a.jsx)("div",{children:x.attachment.content});{let e=w?"".concat(v.replaceAll("\\\\r","\\r").replaceAll("\\n","\n").replaceAll("<br />","\n")):k?v.replaceAll("[","\\[").replaceAll("]","\\]"):v;return(0,a.jsx)(B.Z,{text:e,disableLinksInTextAttachment:f,addBackgroundToTransparentImages:!0,handleLinkClickHistory:x.handleLinkClickHistory,addBrightnessSlider:null===(c=x.projectConfig)||void 0===c?void 0:null===(d=c.textAttachmentConfig)||void 0===d?void 0:d.addBrightnessSlider,addBlurSlider:null===(p=x.projectConfig)||void 0===p?void 0:null===(u=p.textAttachmentConfig)||void 0===u?void 0:u.addBlurSlider,escapeHtml:null===(m=x.projectConfig)||void 0===m?void 0:null===(h=m.textAttachmentConfig)||void 0===h?void 0:h.renderMarkdownWithoutLinks})}},ty=(0,s.ZL)({attachment:{width:"100%"},fixed:{height:"100%",overflowY:"scroll"},hidden:{display:"none"},sticky:{position:"sticky",top:"0px",left:"0px"},chatbotTranscript:{height:"calc(100vh - 420px)",overflowY:"scroll",marginBottom:16},chatbotPrompt:{width:"100%",display:"flex"},chatbotPromptButton:{marginLeft:8,marginTop:7},textAttachment:{margin:24,padding:32,lineHeight:1.6,"& tr":{border:"1px solid rgba(0, 0, 0, 0.3)"},"& tr:nth-child(even)":{backgroundColor:"#f2f2f2"},"& th":{border:"1px solid rgb(0, 0, 0, 0.3)",padding:"6px 10px",backgroundColor:"#f2f2f2"},"& td":{border:"1px solid rgba(0, 0, 0, 0.3)",padding:"10px"}},imageAttachment:{height:"100%"}});var tw=n(108896),tj=n(837010),tk=n(995632),tC=n(998188);let tA=/citation_id=[\w-]+/i,generateModelMessageSnippets=e=>{let t=e.text.split("</span>");return t.map(e=>{var t;return{citationId:null===(t=e.match(tA))||void 0===t?void 0:t[0].replace("citation_id=",""),text:e.split(">").slice(1).join(">")}})},tT={text:"Hi! I'm your smart assistant, how can I help you?",isHuman:!1},tS={text:"Ask me another question!",isHuman:!1},tI={text:"Hmm I wasn't able to answer that question. Ask me another question!",isHuman:!1},tP=[tT],tD="60vh",tN="25vw",tR=(0,s.ZL)({iconButton:{position:"absolute",bottom:16,right:32,zIndex:1,backgroundColor:"white",border:"2px solid var(--color-RemoBlue)",borderRadius:"50%",padding:"4px 0px"},iconButtonBanner:{position:"absolute",bottom:96,right:32,zIndex:1,backgroundColor:"var(--color-RemoBlue)",borderRadius:"16px 16px 0px 16px",width:220,color:"white",padding:16,paddingTop:8},iconButtonBannerTitle:{fontSize:16,marginBottom:8,marginTop:8},assistantContainer:{position:"absolute",bottom:"calc(".concat(tD," + 32px)"),right:"calc(".concat(tN," + 32px)"),zIndex:1,pointerEvents:"auto"},assistantContent:{backgroundColor:"var(--color-RemoGray01)",borderRadius:8,height:"100%",width:"100%",boxShadow:"0px 8px 8px rgba(0, 0, 0, 0.1)",minHeight:tD,minWidth:tN,overflow:"hidden"},toolbar:{padding:"0px 16px",width:"100%",backgroundColor:"var(--color-RemoBlue)"},row:{display:"flex",flexDirection:"row",alignItems:"center"},copyButton:{marginLeft:2,padding:4},title:{fontSize:16,marginLeft:16,marginTop:8,marginBottom:8,color:"white"},right:{marginLeft:"auto"},interaction:{position:"absolute",bottom:0,padding:16,backgroundColor:"#e3f7ff",width:"100%"},interactionInstruction:{borderTop:"2px solid var(--color-RemoBlue)"},input:{marginTop:16},conversation:{padding:10,overflow:"auto","&::-webkit-scrollbar":{display:"none"}},profileIcon:{borderRadius:"50%",padding:6,marginLeft:8,marginRight:12},messageText:{backgroundColor:"white",maxWidth:"76%",padding:8,borderRadius:"8px 8px 8px 0px",boxShadow:"0px 2px 2px rgba(0, 0, 0, 0.1)",whiteSpace:"pre-line"},humanMessageText:{marginLeft:"auto",marginRight:8,borderRadius:"8px 8px 0px 8px"},assistantIcon:{backgroundColor:"var(--color-RemoBlue)"},message:{margin:"16px 0px"},sendButton:{marginTop:16,marginRight:-12,padding:4},marginRight:{marginRight:8}});var tasks_SmartAssistant=e=>{var t,n,i;let{prompt:o,assignmentId:s,instructionsS3Document:l,smartAssistantRlhfHook:d}=e,c=tR(),{rlhfPromptText:p}=d,[h,m]=(0,tk.Z)(!1),[g,x]=(0,tk.Z)(!0),[f,v]=(0,r.useState)(!0),[b,y]=(0,r.useState)(""),[w,j]=(0,r.useState)(tP),[k,C]=(0,r.useState)(!1),[A,T]=(0,r.useState)(0),[S,I]=(0,tk.Z)(!1),[D,N]=(0,r.useState)({}),[R,B]=(0,r.useState)(),M=r.useRef(null),F=r.useRef(null),E=r.useRef(null),L=r.useRef(null),[Z,O]=(0,r.useState)(!1),renderMessage=(e,t)=>{if(!t)return e;let n=generateModelMessageSnippets({text:e}).filter(e=>e.text);return(0,a.jsx)("div",{children:n.map(e=>(0,a.jsxs)("span",{children:["".concat(e.text," "),e.citationId&&(0,a.jsx)($.u,{title:R,placement:"left",arrow:!0,children:(0,a.jsx)("span",{children:(0,a.jsx)(z.FontAwesomeIcon,{style:{marginRight:4},icon:"info-circle",size:"sm",color:"var(--color-RemoBlue)",onMouseEnter:()=>{B(D[e.citationId])},onMouseLeave:()=>B(void 0)})})})]},e.text))})},[,H]=(0,tC.Z)(),scrollToBottom=()=>{var e;null===(e=L.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{scrollToBottom()},[w]),(0,r.useEffect)(()=>{y(p)},[p]),(0,r.useEffect)(()=>{S?v(!1):v(!0)},[S]);let V=(0,r.useCallback)(async e=>{let{response:t}=await (0,P.ZP)(null,"internal/smart-assistant/execute-query",{method:"POST",body:{query:e,prompt:f?o:void 0,assignmentId:s}});return t},[f,s,o]),U=(0,r.useCallback)(async e=>{let{text:t,relatedFragments:n}=await (0,P.ZP)(null,"internal/hermes/chat",{method:"POST",body:{chatHistory:[{sender:"user",text:e,UUID:eN().v4()}],queryContext:{s3AttachmentUrls:[l]}}}),i=n.reduce((e,t)=>{let{body:n,citationId:i}=t;return{...e,[i]:n}},{});return N({...D,...i}),t},[D,l]),W=(0,r.useCallback)(async e=>{let t=o&&f?"".concat(o,"\n\n").concat(e):e,n=[...w,{text:t,isHuman:!0}];j(n),y(""),C(!0),S||T(A+1);try{let t=S?await U(e):await V(e);C(!1),j([...n,{text:t,isHuman:!1,isInstructionsResponse:S},tS])}catch(e){C(!1),j([...n,tI])}},[f,U,V,w,A,o,S]);return(0,a.jsx)("div",{children:h?(0,a.jsx)("div",{className:c.assistantContainer,children:(0,a.jsx)(tj.s,{opacity:1,minWidth:tN,minHeight:tD,maxWidth:"60vw",maxHeight:"95vh",disableDragging:Z,children:(0,a.jsxs)("div",{className:c.assistantContent,ref:M,children:[(0,a.jsxs)("div",{className:u()(c.row,c.toolbar),ref:F,children:[(0,a.jsx)(z.FontAwesomeIcon,{icon:"lightbulb-on",color:"white"}),(0,a.jsx)("p",{className:c.title,children:(0,a.jsx)("strong",{children:"Smart Assistant"})}),l&&(0,a.jsx)($.zx,{className:c.right,onClick:I,type:"primary",children:S?"Search Anything":"Search Instructions"}),(0,a.jsx)($.zx,{className:l?c.marginRight:c.right,onClick:()=>j([...tP]),type:"primary",children:"Clear"}),(0,a.jsx)(z.FontAwesomeIcon,{icon:"horizontal-rule",color:"white",onClick:m,style:{cursor:"pointer"}})]}),(0,a.jsxs)("div",{className:c.conversation,onMouseEnter:()=>{O(!0)},onMouseLeave:()=>{O(!1)},style:(null===(t=M.current)||void 0===t?void 0:t.clientHeight)&&(null===(n=F.current)||void 0===n?void 0:n.clientHeight)&&(null===(i=E.current)||void 0===i?void 0:i.clientHeight)?{height:M.current.clientHeight-F.current.clientHeight-E.current.clientHeight}:{},children:[[...w,...k?[{isHuman:!1,isTyping:!0}]:[]].map(e=>{var t,n;return(0,a.jsxs)("div",{className:u()(c.row,c.message),children:[!e.isHuman&&(0,a.jsx)("div",{className:u()(c.profileIcon,c.assistantIcon),children:(0,a.jsx)(z.FontAwesomeIcon,{icon:"lightbulb-on",color:"white"})}),(0,a.jsx)("div",{className:u()(c.messageText,e.isHuman&&c.humanMessageText),children:e.isTyping?(0,a.jsx)($.D8,{size:20}):renderMessage(null!==(t=e.text)&&void 0!==t?t:"",e.isInstructionsResponse)}),!e.isHuman&&!e.isTyping&&![tT,tS,tI].map(e=>e.text).includes(null!==(n=e.text)&&void 0!==n?n:"")&&(0,a.jsx)($.hU,{className:c.copyButton,children:(0,a.jsx)(z.FontAwesomeIcon,{icon:"copy",color:"var(--color-RemoGray20)",size:"sm",onClick:()=>{var t;return H(null!==(t=e.text)&&void 0!==t?t:"")}})})]},e.text)}),(0,a.jsx)("div",{ref:L})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:S?u()(c.interaction,c.interactionInstruction):c.interaction,ref:E,children:[o&&!S&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:c.row,style:{marginLeft:12,marginBottom:8},children:[(0,a.jsx)($.rs,{checked:f,onChange:e=>v(e.target.checked)}),(0,a.jsx)("strong",{children:"Prompt"})]}),f?o:(0,a.jsx)("s",{children:o})]}),S&&(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:c.row,children:"Currently in instructions-searching mode."})}),(0,a.jsxs)("div",{className:c.row,children:[(0,a.jsx)($.oi,{value:b,className:c.input,label:A>=5?"Messages limit reached for this session.":k?"Loading...":"Ask me anything....",fullWidth:!0,multiline:!0,maxRows:5,size:"large",onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&e.target.value.trim().length&&(W(b),e.preventDefault())},disabled:k||A>5}),(0,a.jsx)($.hU,{className:c.sendButton,disabled:k,children:(0,a.jsx)(z.FontAwesomeIcon,{icon:"arrow-up",color:k?"var(--color-RemoBlue)}":"var(--color-RemoGray20)}",onClick:()=>{W(b)}})})]})]})})]})})}):(0,a.jsxs)("div",{children:[g&&(0,a.jsxs)("div",{className:c.iconButtonBanner,children:[(0,a.jsxs)("div",{className:c.row,children:[(0,a.jsx)("div",{className:c.iconButtonBannerTitle,children:"New Smart Assistant"}),(0,a.jsx)("div",{className:c.right,children:(0,a.jsx)(z.FontAwesomeIcon,{icon:"times",color:"white",onClick:x})})]}),"Try our new smart assistant to help answer questions about this task!"]}),(0,a.jsx)("div",{className:c.iconButton,children:(0,a.jsx)($.u,{title:"Open Smart Assistant",placement:"left",children:(0,a.jsx)($.hU,{onClick:m,children:(0,a.jsx)(z.FontAwesomeIcon,{icon:"lightbulb-on",color:"var(--color-RemoBlue)"})})})})]})})};let useSmartAssistantRlhf=()=>{let[e,t]=(0,r.useState)("");return{rlhfPromptText:e,setRlhfPromptText:t}};var tB=n(338888);let tM=(0,tf.ZL)(e=>({dateCardOverlay:{position:"absolute",top:e.spacing(2),right:e.spacing(2),backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#fff",padding:e.spacing(1),borderRadius:e.spacing(1),zIndex:1e4},dateText:{fontWeight:"bold"}}));var CurrentDateAttachmentOverlay=()=>{let e=tM(),[t,n]=(0,r.useState)(new Date);return(0,r.useEffect)(()=>{let e=setInterval(()=>{n(new Date)},1e3);return()=>{clearInterval(e)}},[]),(0,a.jsxs)("div",{className:e.dateCardOverlay,children:[(0,a.jsx)(tB.ZT,{variant:"body2",className:e.dateText,children:t.toLocaleDateString()}),(0,a.jsx)(tB.ZT,{variant:"body2",className:e.dateText,children:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})};function AttachmentCarousel(e){var t,n,i,o,s,c,p,h,m,x,f,v,b;let{attachments:y,activeForm:w="",recordLinkClickingInTextAttachment:j}=e,k=tF(),C=useSmartAssistantRlhf(),T=r.useRef(null),[S,I]=r.useState({width:0,height:0}),[P,D]=r.useState(y),{index:R,select:B,boxes:F}=(0,A.dA)(),{isAfterSubmitAttempt:E,viewedAttachments:L}=(0,M.G)(),Z=(0,eO.B)(),z=(0,ej.X)();r.useEffect(()=>{w&&T.current&&y.length>1&&T.current.scroll(0,0)},[w,y.length]);let O=r.useCallback(()=>{B(g().clamp(R-1,0,y.length-1))},[y.length,B,R]),H=r.useCallback(()=>{B(g().clamp(R+1,0,y.length-1))},[y.length,B,R]);r.useEffect(()=>{if(T.current){let t=T.current.clientWidth,n=T.current.clientHeight;e.overrideImageSize&&(t=Math.min(t,e.overrideImageSize.width+2*N),n=Math.min(n,e.overrideImageSize.height+2*N)),I({width:t,height:n})}},[]),r.useEffect(()=>{(Z.enabled||Z.aiAssistantEnabled)&&Z.setAttachments(y),z.enabled&&z.setAttachments(y)},[y,Z.enabled,z.enabled,Z.aiAssistantEnabled]);let V=!!w||e.forceStacked,U=[];if(j&&!e.useProtectedText&&!(null===(n=e.projectConfig)||void 0===n?void 0:null===(t=n.textAttachmentConfig)||void 0===t?void 0:t.renderAsPlainText)){let t=new DOMParser;for(let n of e.attachments)if(n.type===d.TextCollectionAttachmentType.Text){let e=t.parseFromString(n.content,"text/html");U.push(...Array.from(e.getElementsByTagName("a")))}}let W=U.filter(e=>null==j?void 0:j.innerTextKeywords.includes('"'.concat(e.innerText,'"'))).map(e=>e.href),[G,q]=r.useState(Object.fromEntries(W.map(e=>[e,!1]))),handleLinkClickHistory=e=>{if(j&&Object.keys(G).includes(e)){let t={...G,[e]:!0};q(t)}};r.useEffect(()=>{j&&j.onSubmitDisabled(!Object.values(G).every(e=>e))},[j,G]),r.useEffect(()=>{var t,n,i,o,a,r,s;if(null===(n=e.projectConfig)||void 0===n?void 0:null===(t=n.textCollectionConfig)||void 0===t?void 0:t.randomizeAttachmentOrder){if(null===(a=e.projectConfig)||void 0===a?void 0:null===(o=a.textCollectionConfig)||void 0===o?void 0:null===(i=o.randomizeAttachmentOrderIndices)||void 0===i?void 0:i.length){let t=null===(s=e.projectConfig)||void 0===s?void 0:null===(r=s.textCollectionConfig)||void 0===r?void 0:r.randomizeAttachmentOrderIndices,n=null==t?void 0:t.split(",").map(e=>parseInt(e.trim())),i=y.filter((e,t)=>null==n?void 0:n.includes(t)),o=g().shuffle(i),a=y.map((e,t)=>(null==n?void 0:n.includes(t))?o.shift():e);D(a)}else D(g().shuffle(y))}else D(y)},[y,null===(o=e.projectConfig)||void 0===o?void 0:null===(i=o.textCollectionConfig)||void 0===i?void 0:i.randomizeAttachmentOrder,null===(c=e.projectConfig)||void 0===c?void 0:null===(s=c.textCollectionConfig)||void 0===s?void 0:s.randomizeAttachmentOrderIndices]);let[K,J]=r.useState(null),handleAttachmentFocus=e=>{J(e)},handleAttachmentBlur=()=>{J(null)},Q=(0,ee.ZP)("time-attachment-view",{projectId:e.project},!1)||!1;return(0,a.jsxs)("div",{className:u()(k.carousel,{[k.stacked]:V,[k.fixed]:!V}),ref:T,children:[Q&&(0,a.jsx)(CurrentDateAttachmentOverlay,{}),P.map((t,n)=>{if(!S.height&&!e.forceVisible)return null;let i=V?(0,tw.isAttachmentRelevant)(t,w):n===R,{completedAttachments:o,updateCompletedAttachments:r}=e,s=e.liveInstructions?e.liveInstructions[n]:void 0,l=!!e.stickyAttachments&&e.stickyAttachments.length>0&&e.stickyAttachments.includes(n);return(0,a.jsx)(AttachmentView,{attachment:t,index:n,hidden:!i,size:S,boxes:i&&!V?F:[],stacked:V,editBoundingBoxMode:e.editBoundingBoxMode,boundingBoxField:e.boundingBoxField,updateBoundingBoxField:e.updateBoundingBoxField,loggedUserId:e.loggedUserId,useProtectedText:e.useProtectedText,markAttachmentAsCompleted:e=>{if(o&&r){let t=[...o];t[n]=e,r(t)}},completed:!g().isUndefined(o)&&o[n],allowVideoAttachmentDownload:e.allowVideoAttachmentDownload,projectId:e.project,projectConfig:e.projectConfig,isAuditMode:e.isAuditMode,showSensitiveContentWarning:e.showSensitiveContentWarning,handleSkip:e.handleSkip,startSelfDestructSequence:e.startSelfDestructSequence,handleLinkClickHistory:handleLinkClickHistory,handleAttachmentFocus:handleAttachmentFocus,handleAttachmentBlur:handleAttachmentBlur,unfocused:null!==K&&K!==n,disableVideoZoom:e.disableVideoZoom,liveInstructions:s,taskCustomer:e.taskCustomer,isSticky:l,smartAssistantRlhfHook:C,prefillPrompt:e.prefillPrompt,prefillRefText:e.prefillRefText,assignmentId:e.assignmentId,subtaskMetadata:e.subtaskMetadata,setAnnotations:e.setAnnotations,isReview:e.isReview,reviewLevel:e.reviewLevel},"attachment ".concat(n))}),!V&&y.length>1&&(0,a.jsx)(l.Z,{disabled:0===R,classes:{root:k.left},color:"primary","aria-label":"add",onClick:O,children:(0,a.jsx)(ChevronLeft,{})}),!V&&y.length>1&&(0,a.jsx)(l.Z,{disabled:R===y.length-1,classes:{root:u()(k.right,{[k.pulse]:E&&1===L})},color:"primary","aria-label":"add",onClick:H,children:(0,a.jsx)(ChevronRight,{})}),!e.isCustomer&&!g().isNil(e.reviewLevel)&&(null!==(b=null===(h=e.projectConfig)||void 0===h?void 0:null===(p=h.textCollectionConfig)||void 0===p?void 0:p.smartAssistantReviewLevels)&&void 0!==b?b:[]).includes(e.reviewLevel)&&(0,a.jsx)(tasks_SmartAssistant,{prompt:null===(x=e.projectConfig)||void 0===x?void 0:null===(m=x.textCollectionConfig)||void 0===m?void 0:m.smartAssistantPrompt,instructionsS3Document:null===(v=e.projectConfig)||void 0===v?void 0:null===(f=v.textCollectionConfig)||void 0===f?void 0:f.smartAssistantInstructionsS3Document,assignmentId:e.assignmentId,smartAssistantRlhfHook:C})]})}let tF=(0,s.ZL)(e=>({carousel:{flex:1,height:"100%",background:e.colors.gray05,position:"relative",maxWidth:"calc(100vw - 460px)",["@media (max-width: ".concat(S.Et,")")]:{width:"100%",maxWidth:"initial"}},fixed:{height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch"},stacked:{overflowY:"scroll"},left:{position:"absolute",top:"50%",left:"12px",fontSize:"24px",marginTop:"-28px"},right:{position:"absolute",top:"50%",right:"12px",fontSize:"24px",marginTop:"-28px"},pulse:{animation:"$pulse 1s infinite"},"@keyframes pulse":{"0%":{boxShadow:"0 0 0 0 rgba(43, 153, 216, .85)"},"80%":{boxShadow:"0 0 0 2em rgba(43, 153, 216, 0)"},"100%":{boxShadow:"0 0 0 0 rgba(43, 153, 216, 0)"}}})),ChevronRight=()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,a.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),(0,a.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]}),ChevronLeft=()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,a.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),(0,a.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]})},294278:function(e,t,n){"use strict";n.d(t,{Z:function(){return AudioAttachmentView}});var i=n(824246),o=n(827378),a=n(692975),r=n(266301);function AudioAttachmentView(e){let{attachment:t,markAttachmentAsCompleted:n,completed:s,isInline:l,preventSkip:d,startSelfDestructSequence:c,responseWindow:u,onFocus:p,onBlur:h,disabled:m}=e,[g,x]=(0,o.useState)(0),[f,v]=(0,o.useState)(0),b=(0,o.useMemo)(()=>t.blocking&&t.autoplay&&!s,[t,s]),y=(0,o.useMemo)(()=>t.max_num_plays&&g>=t.max_num_plays,[t,g]),w=!b&&!y&&!m,j=null,k=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Z,{ref:e=>j=e,width:l?"100%":600,height:w?l?50:k?84:54:0,url:t.content,controls:w,playsinline:l,config:{file:{attributes:{controlsList:"nodownload"}}},playing:!!t.autoplay&&!e.hidden&&!s,onPlay:p,onPause:h,onEnded:()=>{n(!0),h&&h(),x(g+1),u&&c&&c(u)},onSeek:()=>{if(d){let e=j.getCurrentTime()-f;e>.01&&j.seekTo(f)}},onProgress:e=>{let{playedSeconds:t}=e;if(d){let e=j.getCurrentTime()-f;e>1.5?j.seekTo(f):v(t)}else v(t)}}),b&&(0,i.jsx)("p",{children:"Playing audio..."}),t.max_num_plays&&(0,i.jsxs)("p",{children:["You have ",t.max_num_plays-g," plays remaining"]}),t.caption&&(0,i.jsx)(r.Z,{text:t.caption})]})}},665265:function(e,t,n){"use strict";n.d(t,{QK:function(){return ChoiceLongHintAndWorkflow},j9:function(){return LongHintContent},mO:function(){return ChoiceWorkflow},py:function(){return ChoiceLongHint}});var i=n(824246),o=n(924364),a=n(792739),r=n(518496),s=n(809334),l=n(949423),d=n(827378),c=n(433536),u=n(320280),p=n(436878),h=n(60042),m=n.n(h),g=n(298784),x=n.n(g),f=n(133621),v=n(53326),b=n(692975),y=n(995632);let ChoiceLongHintAndWorkflow=e=>{let t=w();return(0,i.jsx)(r.ZP,{anchorEl:e.anchorRef.current,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:e.isOpen,children:(0,i.jsxs)("div",{className:m()(t.workflowHints,t.workflowHintsResponsive),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(s.Z,{className:t.closeButton,onClick:()=>{e.onClose(!1)},children:(0,i.jsx)(a.FontAwesomeIcon,{icon:"times"})}),(0,i.jsx)("h3",{children:"Hints and/or Check Your Work"})]}),!x().isEmpty(e.workflows)&&(0,i.jsx)(CheckYourWorkContent,{workflows:e.workflows,onButtonClick:t=>{e.onClose(t)},choice:e.choice}),!x().isEmpty(e.longHints)&&(0,i.jsx)(LongHintContent,{responsive:!0,longHints:e.longHints,hintHasContent:e=>{var t,n;return!(x().isEmpty(null===(t=e.text)||void 0===t?void 0:t.trim())&&x().isEmpty(null===(n=e.imageUrl)||void 0===n?void 0:n.trim()))},style:{marginTop:"16px"}})]})})},ChoiceLongHint=e=>{let[t,n]=d.useState(!1);return(0,i.jsx)(l.Z,{open:e.isOpen,placement:"left-start",anchorEl:e.anchorRef.current,modifiers:{flip:{enabled:!1},offset:{enabled:!0,offset:"0, 40px"}},children:(0,i.jsx)(LongHintContent,{responsive:!1,longHints:e.longHints,hintHasContent:e=>{var t,n;return!(x().isEmpty(null===(t=e.text)||void 0===t?void 0:t.trim())&&x().isEmpty(null===(n=e.imageUrl)||void 0===n?void 0:n.trim()))},isHidden:t,toggleHidden:()=>n(!t),previousLongHints:e.previousLongHints,childrenLongHints:e.childrenLongHints,setLongHints:e.setLongHints,setPreviousLongHints:e.setPreviousLongHints,setChildrenLongHints:e.setChildrenLongHints})})},LongHintContent=e=>{var t;let n=w(),a=x().some(e.longHints.map(t=>e.hintHasContent(t))),handleClickHints=function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.setLongHints&&e.setPreviousLongHints&&e.setChildrenLongHints){var i;e.setLongHints(t),e.setPreviousLongHints(e.longHints),u(null!==(i=e.childrenLongHints)&&void 0!==i?i:[]),e.setChildrenLongHints(n?c:[])}},[r,l]=(0,y.Z)(!1),[c,u]=d.useState([]),p=e.toggleHidden;return(0,i.jsxs)("div",{className:m()(n.longHints,{[n.longHintsResponsive]:e.responsive}),style:e.style,children:[a&&!x().isNil(p)?(0,i.jsxs)(s.Z,{variant:"text",size:"small",onClick:()=>p(),children:[e.isHidden?(0,i.jsx)(f.Z,{width:"24",height:"24"}):(0,i.jsx)(v.Z,{width:"24",height:"24"})," "]}):void 0,null!==(t=e.isHidden)&&void 0!==t&&t?void 0:e.longHints.map((t,a)=>{var s,d,c;return e.hintHasContent(t)?(0,i.jsxs)("div",{className:n.longHintSection,children:[(null===(s=e.previousLongHints)||void 0===s?void 0:s.length)?(0,i.jsx)("a",{onClick:()=>{var t;return handleClickHints(null!==(t=e.previousLongHints)&&void 0!==t?t:[],!0)},children:"Previous Hint"}):(0,i.jsx)(i.Fragment,{}),t.title?(0,i.jsx)("h4",{children:t.title}):null,t.text?(0,i.jsx)("p",{dangerouslySetInnerHTML:{__html:o.ZP.renderInline(t.text)}}):null,t.imageUrl?(0,i.jsx)("img",{src:"".concat(t.imageUrl),className:n.longHintSectionImage}):null,t.videoUrls&&t.videoUrls.length>0?(0,i.jsx)(HintVideoExamples,{videoUrls:t.videoUrls}):null,(null===(d=e.childrenLongHints)||void 0===d?void 0:d.length)?(0,i.jsx)("p",{children:(0,i.jsxs)("a",{onClick:l,children:[r?"Hide":"See"," Children Hints"]})}):null,r&&(null===(c=e.childrenLongHints)||void 0===c?void 0:c.length)?e.childrenLongHints.map(e=>(0,i.jsx)("div",{children:e.text?(0,i.jsx)("a",{onClick:()=>handleClickHints([e]),children:e.title}):(0,i.jsx)("div",{children:e.title})},e.title)):null]},a):null})]})},ChoiceWorkflow=e=>{let t=w();return(0,i.jsx)(r.ZP,{anchorEl:e.anchorRef.current,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:!0,children:(0,i.jsxs)("div",{className:t.workflowHints,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(s.Z,{className:t.closeButton,onClick:()=>{e.onClose(!1)},children:(0,i.jsx)(a.FontAwesomeIcon,{icon:"times"})}),(0,i.jsx)("h3",{children:"Check Your Work"})]}),(0,i.jsx)(CheckYourWorkContent,{workflows:e.workflows,onButtonClick:t=>{e.onClose(t)},choice:e.choice})]})})},CheckYourWorkContent=e=>{let t=w(),uncheckedWorkflows=()=>Object.fromEntries(x().map(x().keys(e.workflows),e=>[e,!1])),[n,o]=d.useState(uncheckedWorkflows()),[a,r]=d.useState(!1),handleChange=e=>{let t={...n,[e.target.name]:e.target.checked};r(x().every(x().values(t))),o(t)},l="Select ".concat(x().isNil(e.choice)?"Choice":e.choice.label);return l.length>70&&(l="Select Choice"),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:" Check all the boxes to confirm your work and select the node"}),(0,i.jsx)("div",{children:e.workflows.map((e,o)=>(0,i.jsx)(u.XZ,{className:t.workflowCheckbox,label:e,name:o.toString(),checked:n[o],onChange:handleChange},o))}),(0,i.jsx)("br",{}),(0,i.jsx)(s.Z,{color:"primary",size:"small",fullWidth:!0,variant:"text",onClick:()=>{o(uncheckedWorkflows()),e.onButtonClick(a)},disabled:!a,children:l})]})},HintVideoExamples=e=>{let{videoUrls:t}=e,[n,o]=d.useState(0),a=d.useCallback(()=>{o(x().clamp(n-1,0,t.length-1))},[t.length,n]),r=d.useCallback(()=>{o(x().clamp(n+1,0,t.length-1))},[t.length,n]),l=w();return(0,i.jsxs)(i.Fragment,{children:["Examples:",(0,i.jsx)("div",{className:l.video,children:(0,i.jsx)(b.Z,{controls:!0,width:"100%",url:t[n]})}),(0,i.jsxs)("div",{className:l.videoControls,children:[(0,i.jsx)(s.Z,{onClick:a,disabled:0===n,children:"Prev"}),(0,i.jsx)(s.Z,{onClick:r,disabled:n===t.length-1,children:"Next"})]})]})},w=(0,c.ZL)(e=>({workflowHints:{alignItems:"center",background:e.colors.white,padding:"10px",border:"1px solid ".concat(e.colors.gold),borderRadius:8,flexGrow:1,maxWidth:"350px",maxHeight:"700px",overflow:"scroll"},workflowHintsResponsive:{["@media (max-width: ".concat(p.Et,")")]:{maxHeight:"initial",overflow:"initial"}},closeButton:{background:"white",padding:4,borderRadius:24,width:24,height:24,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",border:"none",cursor:"pointer",float:"right"},longHints:{display:"inline-block",alignItems:"center",lineHeight:"20px",background:e.colors.white,padding:"10px",border:"1px solid ".concat(e.colors.green),borderRadius:8,flexGrow:1,maxWidth:"350px",maxHeight:"700px",overflow:"scroll"},longHintsHideButton:{display:"inline-block",alignItems:"center",lineHeight:"20px",background:e.colors.white,padding:"10px",border:"1px solid ".concat(e.colors.green),borderRadius:8,flexGrow:1},longHintsResponsive:{["@media (max-width: ".concat(p.Et,")")]:{maxHeight:"initial",overflow:"initial"}},longHintSection:{border:"1px solid ".concat(e.colors.gray20),padding:"7px",margin:"7px"},longHintSectionImage:{maxHeight:"250px"},selectButton:{width:"100%"},workflowCheckbox:{padding:"10px"},video:{marginTop:8},videoControls:{marginTop:8,display:"flex",flexDirection:"row",justifyContent:"space-between"}}))},300574:function(e,t,n){"use strict";n.d(t,{yU:function(){return F},wI:function(){return E},wy:function(){return M},hj:function(){return Z},h9:function(){return L},ZP:function(){return textcollection_CustomTextField}});var i,o,a=n(824246),r=n(827378),s=n(86596),l=n(99562),d=n(698234),c=n(264840),u=n(954344),p=n(450755),h=n(753332),m=n(220373);function TextAutoComplete(e){let t=g();return e.options.length?(0,a.jsxs)(c.Z,{classes:{root:t.card},children:[(0,a.jsxs)("div",{className:t.header,children:[(0,a.jsx)(MagicWand,{}),(0,a.jsx)(u.Z,{component:"span",classes:{root:t.heading},children:"Magic Fill"})]}),(0,a.jsx)(p.Z,{component:"nav",onKeyDown:e.onKeyDown,onMouseLeave:e.onMouseLeave,children:e.options.map((t,n)=>(0,a.jsx)(h.Z,{autoFocus:n===e.autoFocusIndex,button:!0,onClick:()=>{e.onSelect(t)},onMouseEnter:()=>{e.onMouseEnter&&e.onMouseEnter(t)},children:(0,a.jsx)(u.Z,{children:t.text})},n))})]}):null}function MagicWand(){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M7.2001 3.99961L7.6001 3.19961L8.4001 2.79961L7.6001 2.39961L7.2001 1.59961L6.8001 2.39961L6.0001 2.79961L6.8001 3.19961L7.2001 3.99961ZM3.6001 5.59961L4.2666 4.26636L5.6001 3.59961L4.2666 2.93286L3.6001 1.59961L2.9336 2.93286L1.6001 3.59961L2.9336 4.26636L3.6001 5.59961ZM12.4001 8.79961L11.7336 10.1329L10.4001 10.7996L11.7336 11.4664L12.4001 12.7996L13.0666 11.4664L14.4001 10.7996L13.0666 10.1329L12.4001 8.79961ZM14.1656 3.95536L12.0443 1.83411C11.8883 1.67761 11.6836 1.59961 11.4788 1.59961C11.2741 1.59961 11.0693 1.67761 10.9131 1.83411L1.8346 10.9126C1.5221 11.2251 1.5221 11.7316 1.8346 12.0439L3.95585 14.1651C4.1121 14.3214 4.31685 14.3994 4.52135 14.3994C4.7261 14.3994 4.93085 14.3214 5.0871 14.1651L14.1656 5.08636C14.4781 4.77436 14.4781 4.26761 14.1656 3.95536ZM10.5863 6.68611L9.3136 5.41336L11.4786 3.24836L12.7513 4.52111L10.5863 6.68611Z"})})}let g=(0,m.Z)({card:{paddingTop:"16px",margin:"16px 0",boxShadow:"0px 3px 12px rgba(0, 0, 0, 0.15)",background:"#FFF"},header:{color:"#808080",padding:"0 16px",display:"flex",flexDirection:"row",alignItems:"center"},heading:{fontWeight:500,fontSize:"11px",lineHeight:"16px",textTransform:"uppercase",padding:"0 8px"}});var x=n(630835),f=n(355497),v=n.n(f),b=n(298784),y=n.n(b),w=n(594802),j=n(339389),k=n(667332),C=n(776845),A=n(416534),T=n(660725),S=n(757700);let MathEditor=e=>{var t;let n=r.useRef(null),i=(0,r.useMemo)(()=>new S.Ak({smartMode:!0,mathModeSpace:"\\:"}),[]);i.readOnly=null!==(t=e.readOnly)&&void 0!==t&&t;let o=r.useRef("");return(0,r.useEffect)(()=>{let t=n.current;t&&(t.innerHTML="",t.appendChild(i),i.className=e.className||"",i.addEventListener("input",t=>{let{target:n}=t,a=n.value||"";o.current!==a&&(o.current=a,e.onChange(a,i.getValue("ascii-math")))}))},[]),(0,r.useEffect)(()=>{if(o.current!==e.value){let t=i.position;i.setValue(e.value,{focus:!0,feedback:!1}),i.position=t,o.current=e.value}},[e.value]),(0,a.jsx)("div",{ref:n})};var I=n(795115),P=n(707889),D=n(137337),N=n(479038),R=n(720227),B=n(24880);(i=o||(o={}))[i.Escape=27]="Escape",i[i.ArrowUp=38]="ArrowUp",i[i.ArrowDown=40]="ArrowDown";let M=25,F=100,E=2e3,L=10,Z="This field doesn't allow pasting",z="This field doesn't allow drag and drop";var textcollection_CustomTextField=e=>{var t,i,o;let l=(0,x.Dc)(),[c,u]=(0,r.useState)(null),p=(0,r.useRef)(null),[h,m]=(0,r.useState)(""),[g,f]=(0,r.useState)([]),{emitTypingEvent:b,incMouseLeaveEvent:S}=(0,P.YX)(),[H,V]=(0,r.useState)(e.errorText),[U,W]=(0,r.useState)(e.value);(0,r.useEffect)(()=>{e.defaultText&&!e.value?(W(e.defaultText),_(e.index,e.setIndexValue,e.defaultText)):e.value!==U&&W(e.value)},[e.defaultText,e.value]),(0,r.useEffect)(()=>{V(e.errorText)},[e.errorText]);let G=(0,r.useMemo)(()=>!e.shouldAutoComplete||h.length<=3?[]:l.search(h).slice(0,5),[l,h,e.shouldAutoComplete]),q="".concat(e.title,"-").concat(null!==(i=e.index)&&void 0!==i?i:0),[K,J]=(0,r.useState)({type:"away"}),Q=(0,r.useCallback)(()=>{"away"!==K.type&&(J({type:"away"}),l.blur())},[l,J,K]),Y=(0,r.useCallback)(()=>{p.current&&function(e){e.focus();try{e.selectionStart=e.value.length,e.selectionEnd=e.value.length}catch(e){}}(p.current),Q()},[Q,p]),setListItemFocus=e=>{J({type:"listItem",index:e}),l.focus(G[e])};(0,r.useEffect)(()=>{Promise.all([n.e(15098),n.e(72760)]).then(n.bind(n,372760)).then(e=>{u(e.default)}).catch(e=>{u(null)})},[]),(0,r.useEffect)(()=>{if(!e.useSaplingGrammarCheck)return;let t=document.querySelector("textarea[name='".concat(q,"']"));t&&c&&(t.setAttribute("contenteditable","true"),t.setAttribute("data-gramm","false"),c.observe(t))},[e.useSaplingGrammarCheck,c]);let X=(0,r.useCallback)(t=>{e.disableCopying&&(V("This field doesn't allow copying"),t.preventDefault())},[e.disableCopying]),_=(0,r.useCallback)(y().debounce((e,t,n)=>{t(e,n)},500),[]),$=(0,r.useCallback)(y().debounce(t=>{var n,i,o,a,r;if(!t||t.length<F)return;let s=[];for(let e of[...Array(t.length-1).keys()])s.push(t[e+1].timestamp-t[e].timestamp);let l=s.length,d=!1;for(let e=0;e<l&&!(e+F>l);e+=M){let t=s.slice(e,e+F),n=null!==(i=y().mean(t))&&void 0!==i?i:0;if(!(n>E)&&n/2>(null!==(o=y().max(t))&&void 0!==o?o:0)-(null!==(a=y().min(t))&&void 0!==a?a:0)){d=!0;break}}e.disablePasting&&d&&(e.setIndexValue(0,""),V(Z),e.isTestQuestion&&I.c.track("Training - User tried to paste")),d&&e.fieldId&&(null===(n=e.logBehaviourActions)||void 0===n?void 0:n.handleAutotyperDetectedEvent)&&(null===(r=e.logBehaviourActions)||void 0===r||r.handleAutotyperDetectedEvent(e.fieldId))},1e3),[e.fieldId,e.logBehaviourActions]),onChange=t=>{var n,i,o,a;let r=t.target.value.length-(null!==(n=null==U?void 0:U.length)&&void 0!==n?n:0);if(e.disablePasting){let n=(null===(i=y().get(t,"nativeEvent.inputType"))||void 0===i?void 0:i.toLowerCase().indexOf("undo"))!==-1;if(!n&&r>L){V(Z),e.isTestQuestion&&I.c.track("Training - User tried to paste");return}V(void 0)}W(t.target.value),_(e.index,e.setIndexValue,t.target.value),m(t.target.value),Q();let s=t.nativeEvent.timeStamp,l=[...g,{timestamp:s,lengthDiff:r}];f(l),ee(l),$(l),e.fieldId&&b&&b({fieldId:e.fieldId,text:t.target.value,responseIndex:null===(o=e.chatTaskBehaviorLogMetadata)||void 0===o?void 0:o.responseIndex,suffix:null===(a=e.chatTaskBehaviorLogMetadata)||void 0===a?void 0:a.suffix})},ee=(0,r.useCallback)(y().debounce(t=>{var n,i,o,a,r,s,l,d;e.fieldId&&t&&t.length&&((null===(n=e.logBehaviourActions)||void 0===n?void 0:n.handleActiveTypingEvent)&&(null===(r=e.logBehaviourActions)||void 0===r||r.handleActiveTypingEvent(e.fieldId,(null!==(s=null===(o=y().last(t))||void 0===o?void 0:o.timestamp)&&void 0!==s?s:0)-(null!==(l=null===(a=y().first(t))||void 0===a?void 0:a.timestamp)&&void 0!==l?l:0))),(null===(i=e.logBehaviourActions)||void 0===i?void 0:i.appendLengthDiffEvents)&&(null===(d=e.logBehaviourActions)||void 0===d||d.appendLengthDiffEvents(e.fieldId,t.map(e=>e.lengthDiff))),f([]))},800),[e.fieldId,e.logBehaviourActions]),onKeyDown=e=>{if(0!==G.length){if(40===e.keyCode){let t=0;"listItem"===K.type&&(t=K.index+1),t>=G.length?Y():setListItemFocus(t),e.preventDefault();return}if(38===e.keyCode&&"listItem"===K.type){let t=K.index-1;t<0?Y():setListItemFocus(t),e.preventDefault();return}if(27===e.keyCode){m(""),Y();return}}},onMouseLeave=()=>{var t,n,i;l.blur(),e.fieldId&&(null===(t=e.logBehaviourActions)||void 0===t?void 0:t.handleMouseLeaveEvent)&&e.logBehaviourActions.handleMouseLeaveEvent(e.fieldId),e.fieldId&&S&&S({fieldId:e.fieldId,responseIndex:null===(n=e.chatTaskBehaviorLogMetadata)||void 0===n?void 0:n.responseIndex,suffix:null===(i=e.chatTaskBehaviorLogMetadata)||void 0===i?void 0:i.suffix})},et=(0,d.$p)({oneClickUrlForReviewer:(o=e.value,v().isURL(o)&&e.disabled)?e.value:void 0,maxChars:e.maxChars,minChars:e.minChars,minTokens:e.minTokens,maxTokens:e.maxTokens,chars:e.value.length,tokens:e.value.length?y().words(e.value).length:0,showWordCounter:e.showWordCounter}),en="listItem"===K.type?K.index:-1,ei=(0,r.useCallback)(()=>{m(""),Q()},[Q,m]),eo=O(),ea=e.codingFields&&e.codingFields.length>0?(0,d.jo)(e.value,e.codingFields):e.value,[er,es]=(0,r.useState)(""),[el,ed]=(0,r.useState)("");return(0,a.jsx)(s.Z,{onClickAway:ei,children:(0,a.jsxs)("div",{className:null===(t=e.classes)||void 0===t?void 0:t.root,children:[(0,a.jsxs)("div",{className:eo.container,children:[(0,a.jsx)(N.Z,{title:e.title||"",description:e.description,hint:e.hint,rubric:e.rubric}),e.fileUploadProps&&(0,a.jsx)(T.SC,{...e.fileUploadProps}),"number"===e.type?(0,a.jsx)(w.n,{onPaste:t=>{e.isTestQuestion&&I.c.track("Training - User tried to paste"),e.disablePasting&&(V(Z),t.preventDefault())},onCopy:X,onDragOver:t=>{e.disablePasting&&t.preventDefault()},onDrop:t=>{e.disablePasting&&(V(z),t.preventDefault())},name:q,type:e.type||"text",disabled:e.disabled,onChange:onChange,onKeyDown:onKeyDown,onMouseLeave:onMouseLeave,value:U,autoFocus:e.autoFocus,error:!!e.errorText,onBlur:()=>{e.onBlur&&e.onBlur()},onWheel:t=>{e.onWheel&&e.onWheel(t)}}):(0,a.jsx)(B.Z,{disableFlex:!0,enableRTL:e.enableRTLText,children:(0,a.jsx)(j.K,{onPaste:t=>{e.isTestQuestion&&I.c.track("Training - User tried to paste"),e.disablePasting&&(V(Z),t.preventDefault())},onCopy:X,onDragOver:t=>{e.disablePasting&&t.preventDefault()},onDrop:t=>{e.disablePasting&&(V(z),t.preventDefault())},name:q,disabled:e.disabled,onChange:onChange,onKeyDown:onKeyDown,onMouseLeave:onMouseLeave,value:U,autoFocus:e.autoFocus,error:!!e.errorText,onBlur:()=>{e.onBlur&&e.onBlur()},onWheel:t=>{e.onWheel&&e.onWheel(t)},"data-testid":"editor-content"})}),H||et?(0,a.jsx)(k.p,{error:!!H,className:"px-1 w-full",children:H||et}):null,e.showLatexPreview&&!e.showDiff&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(C.ZT.Paragraph3,{children:"LaTex Preview:"}),(0,a.jsx)(D.L8,{enableMath:!0,enableSingleDollarTextMath:!0,markdown:(0,D.uV)(e.value)})]}),e.showMarkdownPreview&&!e.showDiff&&(0,a.jsxs)("div",{className:(0,R.m)(eo.markdown,"mt-2"),children:[(0,a.jsx)(C.ZT.Paragraph3,{children:"Markdown Preview:"}),ea&&(0,a.jsx)(D.L8,{markdown:ea})]}),e.showEquationBuilder&&(0,a.jsxs)("div",{className:(0,R.m)(eo.equationContainer,"mt-2"),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(C.ZT.Paragraph3,{children:"Equation Builder:"}),(0,a.jsx)(MathEditor,{value:er,className:eo.equationTextbox,onChange:(e,t)=>{es(e),ed(t)}}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(A.zx,{onClick:()=>{W(U+"$".concat(er,"$")),e.setIndexValue(e.index,U+"$".concat(er,"$")),es(""),ed("")},disabled:""===er,className:eo.button,children:"Insert Latex"}),(0,a.jsx)(A.zx,{onClick:()=>{W(U+"``".concat(el,"``")),e.setIndexValue(e.index,U+"``".concat(el,"``")),es(""),ed("")},disabled:""===el,className:eo.button,children:"Insert AsciiMath"})]})]}),(0,a.jsxs)("div",{className:(0,R.m)(eo.markdown,"mt-2"),children:[(0,a.jsx)(C.ZT.Paragraph3,{children:"Rendered Preview:"}),e.value&&(0,a.jsx)(D.L8,{enableMath:!0,enableSingleDollarTextMath:!0,markdown:e.value})]})]})]}),(0,a.jsx)(TextAutoComplete,{options:G,onSelect:t=>{Y();let n=e.value.slice(0,t.start)+t.text;e.setIndexValue(e.index,n),m("")},autoFocusIndex:en,onKeyDown:onKeyDown,onMouseEnter:e=>{l.focus(e)},onMouseLeave:onMouseLeave})]})})};let O=(0,l.ZL)(e=>({container:{display:"flex",flexDirection:"column"},title:{color:"#000000",fontWeight:500,fontSize:"14px",lineHeight:"20px",marginTop:"8px",marginBottom:"8px",width:"100%",display:"flex",justifyContent:"space-between"},row:{display:"flex",flexDirection:"row"},description:{color:e.colors.gray50,marginBottom:16,fontSize:12},tooltipInfoIcon:{paddingLeft:8,paddingRight:8,color:e.colors.gray50,marginTop:6,minWidth:14,minHeight:14},tooltipText:{maxWidth:496},equationContainer:{padding:8,borderRadius:e.spacing(1),borderColor:e.colors.gray20,borderWidth:"1px !important"},equationTextbox:{width:"100%",fontSize:"14px",lineHeight:"28px",letterSpacing:"0.1px",borderRadius:e.spacing(1),borderColor:e.colors.gray20,borderWidth:"1px !important",marginBottom:4},button:{margin:"0 3px"},markdown:{lineHeight:0,"& table, & pre, & h1, & h2, & h3, & h4, & h5":{lineHeight:1}}}))},614385:function(e,t,n){"use strict";n.d(t,{Z:function(){return DownloadableEmbeddedAppView}});var i=n(824246),o=n(827378),a=n(320280),r=n(433536),s=n(722115);function DownloadableEmbeddedAppView(e){let{attachmentUrl:t,isAuditMode:n}=e,r=l(),[d,c]=(0,o.useState)(null),[u,p]=(0,o.useState)(!0);return((0,o.useEffect)(()=>{let fetchData=async()=>{let e=await fetch(t).then(e=>e.json());c(e),p(!1)};fetchData()},[c,p,t]),u)?(0,i.jsx)(a.D8,{}):null!==d&&d.embeddedAppLink?(0,i.jsx)("div",{className:r.container,children:(0,i.jsx)("iframe",{className:r.iframe,src:"".concat(d.embeddedAppLink,"?attachmentUrl=").concat(encodeURIComponent(t),"&isAuditMode=").concat(null!=n&&n)})}):(0,i.jsx)(s.Z,{})}let l=(0,r.ZL)({container:{margin:24,padding:32},iframe:{border:"none",height:"1000px",width:"100%"}})},722115:function(e,t,n){"use strict";var i=n(824246);n(827378);var o=n(433536),a=n(891941);let r=(0,o.ZL)({container:{margin:24}});t.Z=()=>{let e=r();return(0,i.jsx)("div",{className:e.container,children:(0,i.jsx)(a.Z,{severity:"error",children:'An error occurred loading the task. Please report this to the remotasks support team by clicking "Skip" below'})})}},673339:function(e,t,n){"use strict";var i,o,a=n(824246),r=n(827378),s=n(433536),l=n(513735);let EditableBoundingBox=e=>{let{value:t,onUpdate:n,naturalWidth:i,naturalHeight:o,offsetWidth:c,offsetHeight:u,color:p="#D4354F"}=e,h=d(),[m,g]=(0,r.useState)({isDragging:!1}),[x,f]=(0,r.useState)(null),v=(0,r.useCallback)(e=>{if(e.preventDefault(),t){if(!x||isKeyFocus(x.key,e.key))f({target:getArrowKeyTarget(e.key),key:e.key});else{let a=getKeyMove(e.key),r=getResizeBoundingBox(t,{target:x.target,dx:a.dx/c*i,dy:a.dy/u*o});n(r)}}},[x,f,t,n,c,u,i,o]);(0,l.ZP)({action:v,trigger:"up,right,left,down"});let b=(0,r.useCallback)(()=>{f(null)},[f]);(0,l.ZP)({action:b,trigger:"alt,option"});let getMouseDownHandler=e=>n=>{n.preventDefault(),n.stopPropagation(),g({isDragging:!0,target:e,dragStartX:n.pageX,dragStartY:n.pageY,dragStartValue:t})},y=null!=t?t:{left:0,top:0,width:0,height:0},w=Math.round(y.left/i*c),j=Math.round(y.top/o*u),k=Math.max(Math.round(y.width/i*c),1),C=Math.max(Math.round(y.height/o*u),1),A=w+k,T=j+C,S="1px solid ".concat(p),I="2px solid #FB00FF";return(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"transparent",cursor:"crosshair"},onMouseMove:e=>{if(m.isDragging){e.preventDefault(),e.stopPropagation();let{target:t,dragStartX:a,dragStartY:r,dragStartValue:s}=m,l=(e.pageX-a)/c*i,d=(e.pageY-r)/u*o,p=getResizeBoundingBox(s,{target:t,dx:l,dy:d});n(p)}},onMouseUp:e=>{m.isDragging&&(e.preventDefault(),e.stopPropagation(),g({isDragging:!1}))},onMouseDown:e=>{e.preventDefault(),e.stopPropagation();let{left:t,top:n}=e.currentTarget.getBoundingClientRect(),a=(e.clientX-t)/c*i,r=(e.clientY-n)/u*o;g({isDragging:!0,target:"se",dragStartX:e.pageX,dragStartY:e.pageY,dragStartValue:{left:a,top:r,width:0,height:0}})},children:t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:h.box,style:{position:"absolute",top:j,left:w,width:k,height:C,background:(0,s.m4)(p,.15),borderTop:(null==x?void 0:x.target)==="n"?I:S,borderRight:(null==x?void 0:x.target)==="e"?I:S,borderBottom:(null==x?void 0:x.target)==="s"?I:S,borderLeft:(null==x?void 0:x.target)==="w"?I:S}}),!x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{position:"absolute",top:j-3,left:w-3,width:A-w-6,height:T-j-6,cursor:"move"},onMouseDown:getMouseDownHandler("c")}),(0,a.jsx)("div",{className:h.corner,style:{position:"absolute",top:j-3,left:w-3,width:6,height:6,cursor:"nwse-resize",border:S},onMouseDown:getMouseDownHandler("nw")}),(0,a.jsx)("div",{className:h.corner,style:{position:"absolute",top:j-3,left:A-3,width:6,height:6,cursor:"nesw-resize",border:S},onMouseDown:getMouseDownHandler("ne")}),(0,a.jsx)("div",{className:h.corner,style:{position:"absolute",top:T-3,left:w-3,width:6,height:6,cursor:"nesw-resize",border:S},onMouseDown:getMouseDownHandler("sw")}),(0,a.jsx)("div",{className:h.corner,style:{position:"absolute",top:T-3,left:A-3,width:6,height:6,cursor:"nwse-resize",border:S},onMouseDown:getMouseDownHandler("se")}),(0,a.jsx)("div",{className:h.side,style:{position:"absolute",top:j+3,left:w-3,width:6,height:C-6,cursor:"ew-resize"},onMouseDown:getMouseDownHandler("w")}),(0,a.jsx)("div",{className:h.side,style:{position:"absolute",top:j+3,left:A-3,width:6,height:C-6,cursor:"ew-resize"},onMouseDown:getMouseDownHandler("e")}),(0,a.jsx)("div",{className:h.side,style:{position:"absolute",top:j-3,left:w+3,width:k-6,height:6,cursor:"ns-resize"},onMouseDown:getMouseDownHandler("n")}),(0,a.jsx)("div",{className:h.side,style:{position:"absolute",top:T-3,left:w+3,width:k-6,height:6,cursor:"ns-resize"},onMouseDown:getMouseDownHandler("s")})]})]})})};EditableBoundingBox.displayName="EditableBoundingBox";let d=(0,s.ZL)({box:{boxSizing:"border-box"},corner:{background:"#fff"},side:{}});function getResizeBoundingBox(e,t){let{target:n,dx:i,dy:o}=t,a={x:e.left,y:e.top},r={x:e.left+e.width,y:e.top+e.height};switch(n){case"c":a.x+=i,a.y+=o,r.x+=i,r.y+=o;break;case"n":a.y+=o;break;case"w":a.x+=i;break;case"s":r.y+=o;break;case"e":r.x+=i;break;case"nw":a.x+=i,a.y+=o;break;case"ne":r.x+=i,a.y+=o;break;case"sw":a.x+=i,r.y+=o;break;case"se":r.x+=i,r.y+=o}let s=Math.min(a.y,r.y),l=Math.min(a.x,r.x),d=Math.max(a.y,r.y),c=Math.max(a.x,r.x);return{top:s,left:l,width:c-l,height:d-s}}(i=o||(o={})).Center="c",i.North="n",i.West="w",i.East="e",i.South="s",i.NorthWest="nw",i.NorthEast="ne",i.SouthWest="sw",i.SouthEast="se";let c=new Set(["ArrowUp","ArrowDown"]),isKeyFocus=(e,t)=>c.has(e)!==c.has(t),getArrowKeyTarget=e=>{switch(e){case"ArrowUp":return"n";case"ArrowRight":return"e";case"ArrowDown":return"s";case"ArrowLeft":return"w";default:throw TypeError("invalid arrow key ".concat(e))}},getKeyMove=e=>{switch(e){case"ArrowUp":return{dx:0,dy:-1};case"ArrowRight":return{dx:1,dy:0};case"ArrowDown":return{dx:0,dy:1};case"ArrowLeft":return{dx:-1,dy:0};default:return{dx:0,dy:0}}};t.Z=EditableBoundingBox},488749:function(e,t,n){"use strict";var i=n(824246);n(827378);var o=n(320280),a=n(433536);let FormFieldNav=e=>{let t=r(),n=e.formFields.findIndex(t=>t.field_id===e.activeFieldId),a=e.formFields.length,s=n<=0,l=n>=a-1;return(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:t.actions,children:[(0,i.jsx)(o.Av,{type:"primary",startIcon:(0,i.jsx)(ArrowLeft,{width:"18",height:"18",fill:"currentColor"}),disabled:s,onClick:()=>{s||e.setBreadcrumbs([{id:e.formFields[n-1].field_id,index:0}]),e.onNavigate&&e.onNavigate(!1)},children:"Previous"}),(0,i.jsxs)("div",{className:t.centerLabels,children:[(0,i.jsxs)("div",{className:t.label,children:[n+1," of ",a]}),(0,i.jsx)("div",{children:e.formFields.map((t,o)=>(0,i.jsx)(FormFieldNavDot,{isCurrent:o===n,isForInaccurateForm:isFormFieldInaccurate(t.field_id,e.inaccurateFieldIds)},t.field_id))})]}),(0,i.jsx)(o.Av,{type:"primary",endIcon:(0,i.jsx)(ArrowRight,{width:"18",height:"18",fill:"currentColor"}),disabled:l,onClick:()=>{l||e.setBreadcrumbs([{id:e.formFields[n+1].field_id,index:0}]),e.onNavigate&&e.onNavigate(n+1>=a-1)},children:"Next"})]})})};FormFieldNav.displayName="FormFieldNav";let r=(0,a.ZL)({actions:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingTop:8,paddingBottom:8,paddingLeft:16,paddingRight:16,borderTop:"1px solid #F2F2F2"},centerLabels:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",alignSelf:"stretch",maxWidth:"60%",paddingLeft:8,paddingRight:8},label:{fontSize:11,lineHeight:"16px",color:"#808080"}}),isFormFieldInaccurate=(e,t)=>!!t&&t.includes(e);t.Z=FormFieldNav;let FormFieldNavDot=e=>{let t=s(),n=e.isForInaccurateForm?"#D4354F":"#808080",o=e.isCurrent?1:e.isForInaccurateForm?.35:.25;return(0,i.jsx)("span",{className:t.dot,style:{backgroundColor:n,opacity:o}})},s=(0,a.ZL)({dot:{display:"inline-block",height:7,width:7,marginLeft:3,marginRight:3,borderRadius:"50%",transition:"opacity 150ms ease-out"}}),ArrowLeft=e=>(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,i.jsx)("path",{d:"M13.256 19.0919L12.4235 19.9244C12.071 20.2769 11.501 20.2769 11.1523 19.9244L3.86228 12.6381C3.50978 12.2856 3.50978 11.7156 3.86228 11.3669L11.1523 4.07687C11.5048 3.72438 12.0748 3.72438 12.4235 4.07687L13.256 4.90937C13.6123 5.26562 13.6048 5.84687 13.241 6.19562L8.72229 10.5006H19.4998C19.9986 10.5006 20.3998 10.9019 20.3998 11.4006V12.6006C20.3998 13.0994 19.9986 13.5006 19.4998 13.5006H8.72229L13.241 17.8056C13.6085 18.1544 13.616 18.7356 13.256 19.0919Z"})}),ArrowRight=e=>(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,i.jsx)("path",{d:"M10.7438 4.90937L11.5763 4.07687C11.9288 3.72438 12.4988 3.72438 12.8475 4.07687L20.1375 11.3631C20.49 11.7156 20.49 12.2856 20.1375 12.6344L12.8475 19.9244C12.495 20.2769 11.925 20.2769 11.5763 19.9244L10.7438 19.0919C10.3875 18.7356 10.395 18.1544 10.7588 17.8056L15.2775 13.5006H4.50001C4.00126 13.5006 3.60001 13.0994 3.60001 12.6006V11.4006C3.60001 10.9019 4.00126 10.5006 4.50001 10.5006H15.2775L10.7588 6.19562C10.3913 5.84687 10.3838 5.26562 10.7438 4.90937Z"})})},208981:function(e,t,n){"use strict";var i=n(824246);n(827378);var o=n(433536),a=n(416534);let FrameView=e=>{let t=r();return(0,i.jsxs)("div",{className:t.device+" flex flex-col gap-2 ",children:[(0,i.jsx)(a.zx,{className:"w-fit border-none self-start",size:"lg",variant:"outline",icon:{position:"left",type:["fas","external-link"],variant:"outline"},onClick:()=>window.open(e.src,"_blank"),children:"Open in new tab"}),(0,i.jsx)("div",{className:t.content,children:(0,i.jsx)("iframe",{src:e.src,sandbox:"",className:t.frame})})]})};FrameView.displayName="FrameView";let r=(0,o.ZL)({device:{width:"100%",height:"100%",display:"flex",alignItems:"center",flexDirection:"column",paddingTop:8,paddingBottom:8},content:{width:800,flex:1,background:"white",padding:4,borderRadius:4},frame:{border:"none",width:"100%",height:"100%",overflowY:"scroll"}});t.Z=FrameView},356365:function(e,t,n){"use strict";var i=n(824246),o=n(827378),a=n(165168),r=n(570442);t.Z=()=>{let[e,t]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=setInterval(()=>{t(void 0!==(0,r.Hr)(!0))},1e3);return()=>clearInterval(e)},[]),(0,i.jsxs)(a.u_,{isOpen:!e,contentLabel:"Activity Tracking Compliance Check",maxWidth:"800px",children:[(0,i.jsx)(a.xB,{children:"Activity Tracking Compliance Check"}),(0,i.jsx)(a.fe,{children:"Please disable any adblockers and refresh the page."})]})}},616216:function(e,t,n){"use strict";var i=n(824246);n(827378),t.Z=e=>{let{src:t}=e;if(!t)return null;let n=encodeURIComponent(t);return(0,i.jsx)("iframe",{width:"100%",height:"100%",src:"https://drive.google.com/viewerng/viewer?url=".concat(n,"&embedded=true")})}},509960:function(e,t,n){"use strict";var i=n(824246),o=n(713222),a=n(298115),r=n(871189),s=n(469673),l=n(191663),d=n(578915),c=n(827378),u=n(813306);t.Z=e=>{let{rubric:t,onClick:n}=e,p=(0,c.useContext)(u.p),{setIsDrawerOpen:h}=(0,a.R)(),{setRubric:m}=(0,r.i)();return(0,i.jsx)(o.J,{className:"rounded",variant:"neutral",icon:"table",hasBackground:!0,tooltip:"See field's rubric",onClick:async()=>{let e=(0,s.F)(l.B.OpenRubric,void 0,p.projectId,p.taskId);m(t||""),h(!0),null==n||n();try{await (0,d.cW)(e)}catch(e){}},size:"sm"})}},66019:function(e,t,n){"use strict";var i=n(824246),o=n(827378),a=n(827131),r=n(513861),s=n(767630);let PDFJSView=e=>{let{src:t,dontRenderDownload:n}=e,[a,l]=(0,o.useState)(1),d=(0,o.useRef)(null),{pdfDocument:c}=(0,r.E)({file:t,page:a,canvasRef:d});return(0,i.jsxs)("div",{style:{height:"100%",paddingLeft:24,paddingRight:24},children:[!n&&(0,i.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:"Download PDF"}),c&&c.numPages?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",margin:"10px 0px"},children:(0,i.jsx)(s.Z,{count:c.numPages,page:a,onChange:(e,t)=>l(t)})}),(0,i.jsx)("canvas",{ref:d})]}):(0,i.jsx)("div",{children:"Loading..."})]})};t.Z=e=>{let{src:t,renderWithPDFJs:n,dontRenderDownload:r}=e,s=(0,o.useMemo)(()=>(0,i.jsx)("div",{style:{height:"100%",paddingLeft:24,paddingRight:24},children:(0,i.jsx)("object",{type:"application/pdf",data:t,width:"100%",height:"100%",style:{minHeight:600},children:(0,i.jsx)(a.X,{children:(0,i.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:{color:"blue"},children:"Open PDF in New Tab"})})})}),[t]);return n?(0,i.jsx)(PDFJSView,{src:t,dontRenderDownload:r}):(0,i.jsx)("div",{children:s})}},422821:function(e,t,n){"use strict";var i=n(824246),o=n(827378),a=n(220373),r=n(266301),s=n(356365),l=n(533024);let d=(0,a.Z)({container:{},unselectable:{userSelect:"none",zIndex:100},canvas:{width:"100%",position:"absolute",top:0,right:0,zIndex:0}});t.Z=e=>{let{text:t,loggedUserId:n="workderID workerID",renderAsPlainText:a,disableLinksInTextAttachment:c}=e,u=d(),p=(0,o.useRef)(null);return(0,i.jsxs)("div",{ref:p,className:u.container,children:[(0,i.jsxs)("div",{className:u.unselectable,children:[(0,i.jsx)(l.Z,{loggedUserId:n}),a?{text:t}:(0,i.jsx)(r.Z,{text:t,disableLinksInTextAttachment:c})]}),(0,i.jsx)(s.Z,{})]})}},479038:function(e,t,n){"use strict";n.d(t,{Z:function(){return FieldHeader}});var i=n(824246),o=n(776845),a=n(834770),r=n(713222),s=n(509960),l=n(924364);function FieldHeader(e){let{title:t,description:n,hint:d,rubric:c}=e;return(0,i.jsxs)("div",{className:"flex flex-col gap-2 mb-2",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-row",children:[(0,i.jsx)(o.ZT.Paragraph1,{children:t}),d&&(0,i.jsx)(a.u,{asChild:!0,side:"top",text:d,target:(0,i.jsx)("div",{children:(0,i.jsx)(r.J,{icon:["far","info-circle"],size:"sm"})})})]}),c&&(0,i.jsx)(s.Z,{rubric:c})]}),(0,i.jsx)(o.ZT.Paragraph3,{children:(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:n?l.ZP.renderInline(n):""}})})]})}},650963:function(e,t,n){"use strict";n.d(t,{Z:function(){return textcollection_TextCollectionAnswerKey}});var i,o,a=n(824246),r=n(827378),s=n(298784),l=n.n(s),d=n(630835),c=n(197649),u=n(121373),p=n(425861),h=n(963494),m=n(222357),g=n(220373),x=n(60042),f=n.n(x),v=n(96073),b=n(657542),y=n(156075),w=n(626407),j=n.n(w),k=n(352991),C=n(918397),A=n(108896),T=n(665265),S=n(837553),I=n(952332);function DiffTree(e){let t;let n=P(),[i,o]=r.useState(e.initialExpandedNodeIds),s=e.isCompToPrevious||!1;return t=e.showEmptyDiffMessage&&function(e,t){for(let n of e)if(t[n.field_id])return!1;return!0}(e.fields,e.response.annotations)?(0,a.jsx)("div",{className:n.emptyLabel,children:"No parts of this question were graded."}):(0,a.jsx)(FieldListDiff,{breadcrumbs:[],fields:e.fields,annotations:e.response.annotations,fieldSetGraderResult:m.GraderResult.Matched,isCompToPrevious:s,projectId:e.projectId}),(0,a.jsxs)(u.Z,{expanded:i,onNodeToggle:(e,t)=>{o(t)},children:[(0,a.jsxs)("div",{className:n.legend,children:[(0,a.jsx)("div",{className:f()(n.swatch,{[n.opaque]:s}),style:{background:"#29CD9C"}}),(0,a.jsx)("div",{className:f()(n.swatchLabel,{[n.opaque]:s}),children:s?"Unchanged":"Correct"}),(0,a.jsx)("div",{className:n.swatch,style:{background:"#D4354F"}}),(0,a.jsx)("div",{className:n.swatchLabel,children:s?"Edited":"Incorrect"}),(0,a.jsx)("div",{className:n.swatch,style:{background:"#4767D0"}}),(0,a.jsx)("div",{className:n.swatchLabel,children:s?"Added":"Answer Key"})]}),(0,a.jsx)("div",{className:n.topLevelGroup,children:t})]})}function FieldListDiff(e){let t=e.fields.map(t=>{let n=e.annotations[t.field_id];return!!n&&(0,a.jsx)(FieldDiff,{breadcrumbs:e.breadcrumbs,field:t,annotation:n,fieldSetGraderResult:e.fieldSetGraderResult,isCompToPrevious:e.isCompToPrevious,projectId:e.projectId},t.field_id)}).filter(Boolean);return(0,a.jsx)(a.Fragment,{children:t})}function FieldDiff(e){return e.field.type===h.TextCollectionFieldType.FieldSet&&e.annotation.type===h.TextCollectionFieldType.FieldSet?(0,a.jsx)(FieldSetDiff,{breadcrumbs:e.breadcrumbs,field:e.field,annotation:e.annotation,fieldSetGraderResult:e.fieldSetGraderResult,isCompToPrevious:e.isCompToPrevious}):e.field.type===h.TextCollectionFieldType.Form&&e.annotation.type===h.TextCollectionFieldType.FieldSet?(0,a.jsx)(FormFieldDiff,{breadcrumbs:e.breadcrumbs,field:e.field,annotation:e.annotation,fieldSetGraderResult:e.fieldSetGraderResult,isCompToPrevious:e.isCompToPrevious}):e.field.type===h.TextCollectionFieldType.Text&&e.annotation.type===h.TextCollectionFieldType.Text||e.field.type===h.TextCollectionFieldType.Number&&e.annotation.type===h.TextCollectionFieldType.Number||e.field.type===h.TextCollectionFieldType.Category&&e.annotation.type===h.TextCollectionFieldType.Category||e.field.type===h.TextCollectionFieldType.Select&&e.annotation.type===h.TextCollectionFieldType.Select?(0,a.jsx)(UnitFieldDiff,{field:e.field,annotation:e.annotation,fieldSetGraderResult:e.fieldSetGraderResult,isCompToPrevious:e.isCompToPrevious,projectId:e.projectId}):null}function FieldSetDiff(e){let t=P(),n=e.annotation.response.length;if(!n)return null;let i=e.fieldSetGraderResult===m.GraderResult.Matched,o=j()(e.field.title.toLowerCase(),n,!1);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:t.fieldSetCount,children:[n," ",o,":"]}),e.annotation.response.map((n,o)=>{var r;let s=[...e.breadcrumbs,{id:e.field.field_id,index:o}],l=(0,v.Dy)(s),d=null!==(r=function(e,t){let n=(0,b.uJ)(e);if(!n)return;let i=getValue(t),o=i[n.field_id];return o&&o.type===h.TextCollectionFieldType.Text?getValue(o.response[0]):""}(e.field,n))&&void 0!==r?r:"Entry "+o,c=getValue(n);return(0,a.jsx)(p.Z,{nodeId:l,label:d,classes:{root:t.root,expanded:t.expanded,label:f()(t.fieldSetLabel,{[t.strike]:n.result===m.GraderResult.Extraneous,[t.opaque]:e.isCompToPrevious&&n.result===m.GraderResult.Matched&&n.hasCorrectChildren}),content:f()(t.fieldSetContent,{[t.fieldSetIncorrect]:i&&n.result===m.GraderResult.Extraneous,[t.fieldSetAnswerKey]:i&&n.result===m.GraderResult.Missing}),group:t.fieldSetGroup,iconContainer:f()(t.iconContainer,{[t.opaque]:e.isCompToPrevious&&n.result===m.GraderResult.Matched&&n.hasCorrectChildren,[t.iconCorrect]:n.result===m.GraderResult.Matched&&n.hasCorrectChildren,[t.iconIncorrect]:n.result===m.GraderResult.Extraneous||n.result===m.GraderResult.Matched&&!n.hasCorrectChildren,[t.iconAnswerKey]:n.result===m.GraderResult.Missing})},expandIcon:(0,a.jsx)(TriangleRight,{}),collapseIcon:(0,a.jsx)(TriangleDown,{}),children:(0,a.jsx)(FieldListDiff,{breadcrumbs:s,fields:e.field.fields,annotations:c,fieldSetGraderResult:n.result,isCompToPrevious:e.isCompToPrevious})},l)})]})}function FormFieldDiff(e){let t=P(),n=e.annotation.response.length;if(!n)return null;let i=e.fieldSetGraderResult===m.GraderResult.Matched;return(0,a.jsx)("div",{children:e.annotation.response.map((n,o)=>{let r=[...e.breadcrumbs,{id:e.field.field_id,index:o}],s=(0,v.Dy)(r),l=e.field.title,d=getValue(n);return(0,a.jsx)(p.Z,{nodeId:s,label:l,classes:{root:t.root,expanded:t.expanded,label:f()(t.fieldSetLabel,{[t.strike]:n.result===m.GraderResult.Extraneous,[t.opaque]:e.isCompToPrevious&&n.result===m.GraderResult.Matched&&n.hasCorrectChildren}),content:f()(t.fieldSetContent,{[t.fieldSetIncorrect]:i&&n.result===m.GraderResult.Extraneous,[t.fieldSetAnswerKey]:i&&n.result===m.GraderResult.Missing}),group:t.fieldSetGroup,iconContainer:f()(t.iconContainer,{[t.opaque]:e.isCompToPrevious&&n.result===m.GraderResult.Matched&&n.hasCorrectChildren,[t.iconCorrect]:n.result===m.GraderResult.Matched&&n.hasCorrectChildren,[t.iconIncorrect]:n.result===m.GraderResult.Extraneous||n.result===m.GraderResult.Matched&&!n.hasCorrectChildren,[t.iconAnswerKey]:n.result===m.GraderResult.Missing})},expandIcon:(0,a.jsx)(TriangleRight,{}),collapseIcon:(0,a.jsx)(TriangleDown,{}),children:(0,a.jsx)(FieldListDiff,{breadcrumbs:r,fields:e.field.fields,annotations:d,fieldSetGraderResult:n.result,isCompToPrevious:e.isCompToPrevious})},s)})})}function getValue(e){return void 0!==e.expected?e.expected:e.given}function getValueString(e){return"string"==typeof e?e:Array.isArray(e)?e.join(" | "):String(e)}function getGraderValue(e,t,n){let i=l().get(e,t);return void 0===i?null:(0,m.isCategoryGraderValue)(e)?function(e,t,n){let i=l().get(e,t),{fieldLongHints:o,setLongHints:r}=null!=n?n:{};if(1===i.length){let n=String(i[0]),s=l().get(e,["categoryMetadata",t,n,"labels"]);return(0,a.jsxs)(a.Fragment,{children:[getValueString((null==s?void 0:s.length)>0?s:n),o&&o[n]&&r&&(0,a.jsxs)("a",{style:{fontWeight:100},onClick:()=>r(o[n]),children:[" ","(See Instructions)"]})]})}return i.map(n=>{let i=String(n),s=l().get(e,["categoryMetadata",t,i,"labels"]);return(0,a.jsxs)("div",{children:["- ",getValueString(null!=s?s:i),o&&o[i]&&r&&(0,a.jsxs)("a",{style:{fontWeight:100},onClick:()=>r(o[i]),children:[" ","(See Instructions)"]})]},i)})}(e,t,n):getValueString(i)}function UnitFieldDiff(e){let t=e.annotation.response.length,[n,i]=r.useState({}),[o,s]=r.useState([]),d=(0,S.o5)("use-ontology-hints",{projectId:e.projectId},{shortCircuit:!e.projectId,defaultValue:!1});if(r.useEffect(()=>{if(i({}),!(0,C.isCategoryField)(e.field))return;let fetchLongHintsFromOntology=async()=>{try{let{longHints:t}=await (0,k.ZP)(null,"/internal/ontology_manager/get_long_hints_from_ontology/".concat(e.projectId),{method:"GET"});i(t)}catch(e){return}};e.field.useOntologyHints||d?fetchLongHintsFromOntology():e.field.longHintsS3Artifact&&(0,A.fetchLongHints)(e.field.longHintsS3Artifact,i)},[e.field,e.projectId,d]),!t)return null;let c=t>1,u=e.annotation.response,p=u.map((t,i)=>{let o="".concat(e.field.field_id,"[").concat(i,"]");return(0,a.jsxs)("div",{children:[(t.result===m.GraderResult.Correct||t.result===m.GraderResult.Extraneous||t.result===m.GraderResult.Incorrect)&&(0,a.jsx)(FieldResponse,{title:e.field.title,index:i,multiple:c,variant:t.result===m.GraderResult.Correct?"correct":"incorrect",fieldSetGraderResult:e.fieldSetGraderResult,isCompToPrevious:e.isCompToPrevious,children:getGraderValue(t,"given",{fieldLongHints:n,setLongHints:s})}),(t.result===m.GraderResult.Missing||t.result===m.GraderResult.Incorrect)&&(0,a.jsx)(FieldResponse,{title:e.field.title,index:i,multiple:c,variant:"answer",fieldSetGraderResult:e.fieldSetGraderResult,isCompToPrevious:e.isCompToPrevious,children:getGraderValue(t,"expected",{fieldLongHints:n,setLongHints:s})})]},o)});return(0,a.jsxs)(a.Fragment,{children:[p,o.length?(0,a.jsx)("div",{style:{marginTop:20},children:(0,a.jsx)(T.j9,{responsive:!1,hintHasContent:e=>{var t,n;return!(l().isEmpty(null===(t=e.text)||void 0===t?void 0:t.trim())&&l().isEmpty(null===(n=e.imageUrl)||void 0===n?void 0:n.trim()))},longHints:o})}):(0,a.jsx)(a.Fragment,{})]})}function FieldResponse(e){var t,n,i;let o=P(),r=(t=e.title,n=e.index,i=e.multiple,"".concat(t).concat(i?"[".concat(n+1,"]"):"",":")),s=e.fieldSetGraderResult===m.GraderResult.Matched,l=(0,a.jsx)("div",{className:o.textbox,children:(0,a.jsx)("span",{className:f()({[o.opaque]:e.isCompToPrevious&&s&&"correct"===e.variant,[o.correct]:!s||"correct"===e.variant,[o.incorrect]:s&&"incorrect"===e.variant,[o.answer]:s&&"answer"===e.variant}),children:e.children})});return(0,a.jsx)("div",{className:o.response,children:(0,a.jsx)(I.M,{title:r,description:l})})}(i=o||(o={})).Correct="#29CD9C",i.Incorrect="#D4354F",i.AnswerKey="#4767D0",DiffTree.defaultProps={showEmptyDiffMessage:!1,initialExpandedNodeIds:[]};let P=(0,g.Z)({legend:{display:"flex",flexDirection:"row",alignItems:"center",padding:16},swatch:{width:16,height:16,borderRadius:4,marginRight:8},swatchLabel:{fontSize:"14px",lineHeight:"20px",marginRight:16,color:"#000000"},response:{fontSize:"14px",lineHeight:"18px",padding:"8px"},label:{color:y.w.RemoGray50},emptyLabel:{fontSize:14,lineHeight:"20px",color:"#808080"},correct:{color:"#000000"},incorrect:{color:"#D4354F",fontWeight:500},answer:{color:"#4767D0",fontWeight:500},fieldSetCount:{fontSize:"14px",lineHeight:"18px",color:y.w.RemoGray50,padding:8},fieldSetLabel:{fontWeight:500,fontSize:"14px",lineHeight:"18px",color:"#000000"},fieldSetContent:{padding:8,borderRadius:4},fieldSetGroup:{borderLeft:"1px dashed ".concat(y.w.RemoGray50),paddingLeft:8,paddingTop:8,paddingBottom:8,marginLeft:16},iconContainer:{width:16,marginRight:8},iconCorrect:{color:"#29CD9C"},iconIncorrect:{color:"#D4354F"},iconAnswerKey:{color:"#4767D0"},fieldSetIncorrect:{background:rgba("#D4354F",.2),"&:hover":{background:rgba("#D4354F",.3)}},fieldSetAnswerKey:{background:rgba("#4767D0",.2),"&:hover":{background:rgba("#4767D0",.3)}},topLevelGroup:{paddingLeft:8,marginTop:24},root:{},expanded:{"& > $fieldSetContent > $iconContainer":{color:y.w.RemoGray50}},strike:{textDecoration:"line-through"},opaque:{opacity:.25},textbox:{boxSizing:"border-box",border:"solid rgb(188, 188, 188)",borderRadius:10,padding:"1vh"}});function TriangleRight(){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M13.7999 9.04011C14.5999 8.58011 14.5999 7.42261 13.7999 6.96011L3.3999 0.962609C2.6024 0.502609 1.5999 1.07761 1.5999 2.00261L1.5999 14.0001C1.5999 14.9226 2.5999 15.5001 3.3999 15.0401L13.7999 9.04011Z"})})}function TriangleDown(){return(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M6.95989 13.8004C7.41989 14.6004 8.57739 14.6004 9.03989 13.8004L15.0374 3.40039C15.4974 2.60289 14.9224 1.60039 13.9974 1.60039L1.99989 1.60039C1.07739 1.60039 0.499891 2.60039 0.959891 3.40039L6.95989 13.8004Z"})})}function rgba(e,t){let n=e.replace("#",""),i=parseInt(n.slice(0,2),16),o=parseInt(n.slice(2,4),16),a=parseInt(n.slice(4,6),16);return"rgba(".concat(i,",").concat(o,",").concat(a,",").concat(t,")")}var D=n(336235),N=n(488749),R=n(160337),B=n(5575),M=n(436878),F=n(596956);let E=(0,g.Z)({layer:{position:"relative",width:"100%",height:"100%"},layout:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",flexDirection:"row",alignItems:"stretch",["@media (max-width: ".concat(M.Et,")")]:{display:"block"}},diffRegular:{maxWidth:460,width:"100%",flexShrink:1,overflowY:"auto",boxShadow:"0 50px 100px -30px rgba(0, 0, 0, .5)",["@media (max-width: ".concat(M.Et,")")]:{width:"100%"}},diffMiniform:{width:460,height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},scroll:{flexGrow:1,overflowY:"scroll"},comment:{padding:"8px",fontSize:"14px",border:"1px solid #19b629",borderRadius:"8px",margin:"12px"},commentFailed:{padding:"8px",fontSize:"14px",border:"1px solid #ec322f",borderRadius:"8px",margin:"12px"},label:{fontSize:14,lineHeight:"20px",color:"#808080"},toggleViewButton:{display:"none",position:"absolute",zIndex:1e6,bottom:"16px",left:"50%",transform:"translateX(-50%)",["@media (max-width: ".concat(M.Et,")")]:{display:"block"}}}),isInaccurateForm=(e,t)=>{let n=t[e.field_id];if(!n)return!1;if((0,m.isFieldSetGraderAnnotation)(n))return!!n.response.find(e=>e.result!==m.GraderResult.Matched||!e.hasCorrectChildren);let i=n.response;return!!i.find(e=>e.result!==m.GraderResult.Correct)},findNodesToExpand=(e,t)=>{let n=[];for(let i of e){let e=t[i.field_id];if(e&&(0,m.isFieldSetGraderAnnotation)(e)){let t=e.response.map((e,t)=>(0,v.Dy)([{id:i.field_id,index:t}]));n=n.concat(t)}}return n};var textcollection_TextCollectionAnswerKey=e=>{var t,n;let i;let o=E(e),{fields:s=[],attachments:u=[],ocrTextFragments:p=[]}=e.params;(null===(t=e.graderDiffResponse)||void 0===t?void 0:t.annotations)||(0,B.uT)("Text Collection: graderDiffResponse is nil or has no annotations",{userId:e.loggedUserId});let h=(null===(n=e.graderDiffResponse)||void 0===n?void 0:n.annotations)||{},[m,g]=(0,r.useState)(!0),x=(0,D.Z)("(max-width: ".concat(M.Et,")")),b=s.filter(e=>isInaccurateForm(e,h)),[y,w]=r.useState(()=>(b[0]||s[0]).field_id),{parentField:j}=(0,v.C9)(s,[{id:y,index:0}]),k=(0,C.isFormFields)(l().compact([j]))&&(0,C.isFormFields)(s),A=k?y:"",T=r.useRef(null);r.useEffect(()=>{y&&T.current&&T.current.scroll(0,0)},[y]);let S=(0,a.jsxs)("div",{className:e.passedChallenge?o.comment:o.commentFailed,children:[(0,a.jsx)("b",{children:"Feedback for this task:"})," ",e.feedbackComment]});if(j&&k){let t=h[j.field_id];i=(0,a.jsxs)("div",{className:o.diffMiniform,children:[(0,a.jsxs)("div",{className:o.scroll,ref:T,children:[e.feedbackComment&&S,(0,a.jsx)(DiffTree,{fields:[j],response:{annotations:{[j.field_id]:t}},showEmptyDiffMessage:!0,initialExpandedNodeIds:findNodesToExpand(s,h),projectId:e.project})]}),(0,a.jsx)(N.Z,{formFields:s,activeFieldId:j.field_id,setBreadcrumbs:e=>{w(e[0].id)},inaccurateFieldIds:b.map(e=>e.field_id)})]})}else i=(0,a.jsxs)("div",{className:f()(o.diffRegular),children:[e.feedbackComment&&S,(0,a.jsx)(DiffTree,{fields:s,response:e.graderDiffResponse,isCompToPrevious:e.responseKey===R.DiffView.StepDiff,projectId:e.project})]});return(0,a.jsx)(d.pH,{attachments:u.length,ocrTextFragments:p,zIndex:100002,fields:s,children:(0,a.jsxs)("div",{className:o.layer,children:[(0,a.jsxs)("div",{className:f()(o.layout),style:{zIndex:100001},children:[(!x||!m)&&(0,a.jsx)(c.Z,{attachments:u,activeForm:A,loggedUserId:e.loggedUserId,useProtectedText:e.useProtectedText,project:e.project}),i]}),(0,a.jsxs)(F.zx,{className:o.toggleViewButton,primary:!0,onClick:()=>g(e=>!e),children:["View ",m?"Attachment":"Answer"]})]})})}},96073:function(e,t,n){"use strict";n.d(t,{C9:function(){return getCurrentFields},Dy:function(){return pathJoin},EH:function(){return getCurrentAnnotations},KK:function(){return function getQuickAddResponses(e,t,n){if(0===t.length||n.type!==s.TextCollectionFieldType.FieldSet)return[];let i=t[0],o=e[i.id];if(!o||o.type!==s.TextCollectionFieldType.FieldSet)return[];let a=o.response[i.index]||{};if(t.length>=2)return getQuickAddResponses(a,t.slice(1),n);if(0===i.index)return[];let r=(0,l.zs)(o.response[i.index-1]||{},n.field_id),d=(0,l.zs)(a,n.field_id),c=new Set;for(let e of d.response){let t=(0,l.O1)(n,e);c.add(t)}let u=r.response.filter(e=>{let t=(0,l.O1)(n,e);return!c.has(t)});return u}},Yh:function(){return getDeleteNextAnnotations},bm:function(){return function getNestedFieldTitle(e,t){if(0===t.length)return"";let n=t[0],i=e.find(e=>e.field_id===n.id);return i?1===t.length?i.title:i.type!==s.TextCollectionFieldType.FieldSet?"":getNestedFieldTitle(i.fields,t.slice(1)):""}},cg:function(){return getUpdateNextAnnotations},e8:function(){return getPasteNextAnnotations},uT:function(){return function getBreadcrumbTitle(e,t,n){if(0===n.length)return"";let i=n[0],o=e.find(e=>e.field_id===i.id);if(!o||o.type!==s.TextCollectionFieldType.FieldSet)return"";let a=t[i.id];if(!a||a.type!==s.TextCollectionFieldType.FieldSet)return"";let r=a.response[i.index]||{};return 1===n.length?(0,l.O1)(o,r):getBreadcrumbTitle(o.fields,r,n.slice(1))}}});var i=n(298784),o=n.n(i),a=n(711719),r=n.n(a),s=n(963494),l=n(657542);function getCurrentFields(e,t){let n,i=e;for(let e of t){let t=[...(0,l.yt)(i),...(0,l.VT)(i)];if(!(n=t.find(t=>t.field_id===e.id)))return{fields:[]};i=n.fields}return{fields:i,parentField:n}}function getCurrentAnnotations(e,t){let n,i=e;for(let e of t){let t=i[e.id];if(!t)return{annotations:{}};if(t.type!==s.TextCollectionFieldType.FieldSet)throw Error("breadcrumb should reference FieldSet or FormField by field_id");if(e.index>=t.response.length)throw Error("breadcrumb should reference valid index of FieldSet or FormField response");n=t,i=t.response[e.index]}return{annotations:i,parentFieldSetAnnotation:n}}function getUpdateNextAnnotations(e,t,n){var i;if(!t.length)return n;let o=t[0],a=(0,l.zs)(e,o.id),r=a.response.slice();r[o.index]=getUpdateNextAnnotations(r[o.index],t.slice(1),n);let d=null===(i=a.uuids)||void 0===i?void 0:i.slice(),c={type:s.TextCollectionFieldType.FieldSet,field_id:o.id,response:r,uuids:d};return{...e,[o.id]:c}}function getDeleteNextAnnotations(e,t){var n;if(!t.length)throw TypeError("delete only applies to nested FieldSet forms");let i=t[0],o=(0,l.zs)(e,i.id),a=o.response.slice(),r=null===(n=o.uuids)||void 0===n?void 0:n.slice();1===t.length?(a.splice(i.index,1),r&&r.splice(i.index,1)):a[i.index]=getDeleteNextAnnotations(o.response[i.index],t.slice(1));let d={type:s.TextCollectionFieldType.FieldSet,field_id:i.id,response:a,uuids:r};return{...e,[i.id]:d}}function pathJoin(e){let t=e.map(e=>"".concat(e.id,"/").concat(e.index)).join("/");return t}function getPasteNextAnnotations(e,t,n,i){let a=t.length===n.length+1;if(!a)return o().cloneDeep(e);let d=t[t.length-1],{annotations:c}=getCurrentAnnotations(e,t),{annotations:u}=getCurrentAnnotations(e,n),p=(0,l.zs)(u,d.id);if(p.type!==s.TextCollectionFieldType.FieldSet)throw TypeError("invalid path expected fieldset");let h=p.response.concat([o().cloneDeep(c)]),m=p.uuids&&p.uuids.concat([r().v4()]),g={...u,[d.id]:{...p,response:h,uuids:m}},x=getUpdateNextAnnotations(e,n,g);return i?getDeleteNextAnnotations(x,t):x}},630835:function(e,t,n){"use strict";n.d(t,{Dc:function(){return useAutoComplete},Dz:function(){return useHighlight},Iq:function(){return useAttachmentZIndexStyle},dA:function(){return useAttachmentState},pH:function(){return DocumentProvider},zr:function(){return useAnnotationLookup}});var i=n(824246),o=n(827378),a=n(280219),r=n(298784),s=n.n(r),l=n(438323);let d=o.createContext(void 0),DocumentProvider=e=>{let[t,n]=o.useState(-1);o.useEffect(()=>{e.zIndex&&n(e.zIndex)},[e.zIndex]);let[r,c]=o.useState(0),[u,p]=o.useState([]),[h,m]=o.useState([]),g=o.useMemo(()=>s().range(0,e.attachments).map(t=>{let n=s().defaultTo(e.ocrTextFragments,[]),i=s().defaultTo(e.keywords,[]);return function(e,t,n){let i=[];for(let o of e){let e=(0,a.Zw)(o.text),r=o.attachmentIndex===n.attachmentIndex&&o.confidence>s().defaultTo(n.minConfidence,0)&&1===e.length&&t.includes(e[0].value);if(!r)continue;let l=toBoundingBox(o);l&&i.push(l)}return i}(n,i,{attachmentIndex:t,minConfidence:50})}),[e.attachments,e.keywords,e.ocrTextFragments]),x=o.useMemo(()=>s().range(0,e.attachments).map(t=>{let n=s().defaultTo(e.ocrTextFragments,[]);return function(e,t){let n=new a.WV({shortTokenLength:s().defaultTo(t.shortTokenLength,0)});for(let i of e){let e=i.attachmentIndex===t.attachmentIndex&&i.confidence>s().defaultTo(t.minConfidence,0)&&i.text.length>s().defaultTo(t.minTextLength,0);e&&n.add(i)}return n}(n,{attachmentIndex:t,minTextLength:8,minConfidence:50,shortTokenLength:3})}),[e.attachments,e.ocrTextFragments]),f=o.useMemo(()=>s().range(0,e.attachments).map(t=>{let n=s().defaultTo(e.ocrTextFragments,[]);return function(e,t){let n=new a.kQ;for(let i of e){let e=i.attachmentIndex===t.attachmentIndex&&i.fragmentType===l.e4.Word&&!!i.boundingBox;e&&n.add(i)}return n}(n,{attachmentIndex:t})}),[e.attachments,e.ocrTextFragments]),v=o.useCallback(e=>{c(e),p([]),m([])},[]),b=o.useCallback(e=>{e.boundingBox?p([e.boundingBox]):p([])},[]),y=o.useCallback(()=>{p([])},[]),w=o.useCallback(e=>{let t=x[r];return t?t.search(e):[]},[x,r]),j=o.useMemo(()=>({search:w,focus:b,blur:y}),[w,b,y]),k=o.useCallback(e=>{let t=f[r];if(!t)return;let n=t.match(e),i=[];for(let e of n){let t=toBoundingBox(e);t&&i.push(t)}m(i)},[f,r]),C=o.useCallback(()=>{m([])},[]),A=o.useMemo(()=>({focus:k,blur:C}),[k,C]),T=o.useMemo(()=>{let e=s().defaultTo(g[r],[]);return[...e,...u,...h]},[r,g,u,h]),S=o.useMemo(()=>({index:r,select:v,boxes:T}),[r,v,T]),I=o.useCallback(t=>{var n,i;let o=null===(i=e.annotationsRef)||void 0===i?void 0:null===(n=i.current)||void 0===n?void 0:n[t],a=s().find(e.fields,e=>e.field_id===t);if(o&&a)return{annotation:o,field:a}},[e.annotationsRef,e.fields]),P=o.useMemo(()=>({lookupAnnotation:I}),[I]),D=o.useMemo(()=>({autoComplete:j,attachment:S,higlight:A,annotationLookup:P,zIndex:t}),[j,S,A,t,P]);return(0,i.jsx)(d.Provider,{value:D,children:e.children})};function useAttachmentState(){let e=o.useContext(d);if(!e)throw Error("useAttachmentState must be called within a DocumentProvider");return e.attachment}function useAutoComplete(){let e=o.useContext(d);if(!e)throw Error("useAutoComplete must be called within a DocumentProvider");return e.autoComplete}function useHighlight(){let e=o.useContext(d);if(!e)throw Error("useHighlight must be called within a DocumentProvider");return e.higlight}function useAttachmentZIndexStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=o.useContext(d);if(!t)throw Error("useHighlight must be called within a DocumentProvider");let n=t.zIndex;return n>0?{zIndex:n+e}:{}}function useAnnotationLookup(){let e=o.useContext(d);if(!e)throw Error("useAnnotationLookup must be called within a DocumentProvider");return e.annotationLookup}function toBoundingBox(e){if(!e.boundingBox)return;let t={render:a.Eb.Highlight,top:e.boundingBox.Top,left:e.boundingBox.Left,width:e.boundingBox.Width,height:e.boundingBox.Height};return t}},657542:function(e,t,n){"use strict";n.d(t,{AQ:function(){return isFieldSet},O1:function(){return getFieldSetTitle},V6:function(){return splitFieldSets},VT:function(){return getForms},ar:function(){return getFieldValidations},p8:function(){return getChildFieldMissingDetailCounts},pX:function(){return getFieldSetCounts},uJ:function(){return getFirstTextField},yt:function(){return getFieldSets},zs:function(){return getFieldSetAnnotation}});var i=n(298784),o=n.n(i),a=n(963494),r=n(889794),s=n(108896);function splitFieldSets(e){let t=[],n=[];for(let i of e)isFieldSet(i)?n.push(i):t.push(i);return[t,n]}function getFieldSets(e){return e.filter(isFieldSet)}function getForms(e){return e.filter(isForm)}function getFieldValidations(e,t){let n={};for(let i of e.fields){let e=(0,s.isBlankField)(t[i.field_id]),o={isBlank:e};n[i.field_id]=o}return n}function isForm(e){return e.type===a.TextCollectionFieldType.Form}function isFieldSet(e){return e.type===a.TextCollectionFieldType.FieldSet}function getFieldSetAnnotation(e,t){let n=e[t];return n&&n.type===a.TextCollectionFieldType.FieldSet?n:{type:a.TextCollectionFieldType.FieldSet,uuids:[],field_id:t,response:[]}}function getFieldSetCounts(e,t){let n=getFieldSets(e).map(e=>{let n=getFieldSetAnnotation(t,e.field_id);return{id:e.field_id,title:e.title||e.field_id,count:n.response.length}});return n}function getFirstTextField(e){for(let t of e.fields)if(t.type===a.TextCollectionFieldType.Text)return t}function getFieldSetTitle(e,t){let n=getFirstTextField(e)||e.fields[0],i=null==t?void 0:t[n.field_id];if(i&&i.response[0]){var r,s;let e=i.response[0];return i.type===a.TextCollectionFieldType.QueryableTextAndResults?null==e?void 0:e.searchTerm:i.type===a.TextCollectionFieldType.FileUpload?null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"":i.type===a.TextCollectionFieldType.Code?null!==(s=null==e?void 0:e.sourceCode.slice(0,100))&&void 0!==s?s:"":o().isString(e)?e:JSON.stringify(e)}return e.title?e.title:e.field_id}let getChildFieldMissingDetailCounts=(e,t)=>{let n,i={},addChildren=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3?arguments[3]:void 0;if(!o().isNil(n)&&l>n)return;let c=!1,[u,p]=o().partition(t.fields,e=>e.type===a.TextCollectionFieldType.FieldSet);for(let t of p){let a=o().find(o().values(e),e=>e.field_id===t.field_id);d&&!c&&(0,s.isBlankField)(a)&&t.required&&(!o().isNil(n)&&l<n&&(i={}),n=l,i[d]||(i[d]=0),i[d]+=1,c=!0)}if(!c)for(let t of u){if(!t)continue;let n=o().find(o().values(e),e=>e.field_id===t.field_id);n&&(0,r.isFieldSetAnnotation)(n)&&n.response.forEach(e=>{addChildren(e,t,l+1,t.title)})}};return addChildren(e,t),i}},698234:function(e,t,n){"use strict";n.d(t,{$p:function(){return getHelperText},cE:function(){return getSectionTitle},hm:function(){return getHelperDescriptionForMinMaxSelections},jo:function(){return addCodeFieldsToMarkdown},nk:function(){return getExtraContent}});var i=n(824246);n(827378);var o=n(924364);let getSectionTitle=e=>(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:o.ZP.renderInline(e)}}),getHelperText=e=>{let t=e.oneClickUrlForReviewer?(0,i.jsx)("a",{href:e.oneClickUrlForReviewer,target:"_blank",rel:"noreferrer noopener",children:"Click here to open the URL above in a new tab"}):null,n=e.description?(0,i.jsx)("span",{style:{display:"inline-block"},dangerouslySetInnerHTML:{__html:o.ZP.renderInline(e.description)}}):null;return(0,i.jsxs)("span",{style:{display:"block",flexDirection:"row",justifyContent:"space-between"},children:[(0,i.jsx)("span",{style:{display:"block"},children:t}),(0,i.jsxs)("span",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,i.jsx)("span",{style:{display:"inline-block"},children:n}),getTextLengthHelperText(e)]})]})},getTextLengthHelperText=e=>{let{chars:t,maxChars:n,showWordCounter:o,tokens:a,maxTokens:r,minTokens:s}=e;if(o&&void 0!==r&&void 0!==a){let e=getWordCounterFontColor(a,s,r);return(0,i.jsxs)("span",{style:{display:"inline-block",color:e,textAlign:"center"},children:[a,"/",r," words"]})}return void 0!==n&&void 0!==t?(0,i.jsxs)("span",{style:{display:"inline-block"},children:[t,"/",n]}):o&&void 0!==a?(0,i.jsxs)("span",{style:{display:"inline-block",textAlign:"center"},children:[a," words"]}):void 0},getWordCounterFontColor=(e,t,n)=>void 0!==e&&t&&n?e<t?"red":e>2*t?"green":"orange":void 0,getExtraContent=e=>(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:o.ZP.renderInline(e)}}),addCodeFieldsToMarkdown=(e,t)=>{let n=e;return t.forEach((e,t)=>{n=n.replace("{{code_".concat(t+1,"}}"),"\n```\n".concat(e,"\n ```\n"))}),n},getHelperDescriptionForMinMaxSelections=(e,t)=>{if(void 0!==e||void 0!==t)return"Select a ".concat(void 0!==e?"minimum of "+e+" choice"+(1===e?"":"s")+(void 0!==t?";":""):""," ").concat(void 0!==t?"maximum of "+t+" choice"+(1===t?"":"s"):"")}},280219:function(e,t,n){"use strict";n.d(t,{Eb:function(){return o},WV:function(){return SearchIndex},Zw:function(){return getSearchTokens},b8:function(){return getBoxStyle},kQ:function(){return HighlightIndex}});var i,o,a=n(298784),r=n.n(a);(i=o||(o={})).Highlight="highlight",i.PossibleMatch="possibleMatch";let SearchIndex=class SearchIndex{add(e){let t=e.text.trim(),n=getSearchTokens(t),i=Math.random().toString(16).slice(2);for(let o=0;o<n.length-1;o++){let a=n[o],r=t.slice(a.start);if(r.length<8)continue;let s=this.index.get(a.value)||[],l=s.some(e=>e.text===r);if(l)continue;let d={id:i,text:r,tokens:n.slice(o)};e.boundingBox&&(d.boundingBox={render:"possibleMatch",top:e.boundingBox.Top,left:e.boundingBox.Left,width:e.boundingBox.Width,height:e.boundingBox.Height}),s.push(d),this.index.set(a.value,s)}}search(e){let t=getSearchTokens(e);if(!t.length)return[];let n=e.endsWith(" "),i=t.slice(Math.max(t.length-3,0)),o=new Set,a=r().flatMap(i,(e,t)=>{if(this.options.skipTokens&&this.options.skipTokens.has(e.value))return[];let a=this.index.get(e.value);if(!a)return[];let r=t===i.length-1;if(this.options.shortTokenLength){let t=e.value.length<=this.options.shortTokenLength;if(!n&&t&&r)return[]}let s=i.slice(t),l=a.filter(e=>{var t;return r||(t=e.tokens,!(s.length>t.length)&&s.every((e,n)=>n===s.length-1?t[n].value.startsWith(e.value):t[n].value===e.value))}),d=l.filter(e=>{let t=o.has(e.id);return o.add(e.id),!t}),c=d.map(t=>{let n={text:t.text,start:e.start,boundingBox:t.boundingBox};return n});return c});return r().sortBy(a,e=>-(e.text.length-e.start))}constructor(e){this.index=new Map,this.options=e||{}}};let s=["\\u0022","\\u0027","\\u0060","\\u00B4","\\u2018","\\u2019","\\u201C","\\u201D"];function getSearchTokens(e){let t=[],n=RegExp("[\\w".concat(s.join(""),"\\-.]+"),"gm"),i=null;for(;i=n.exec(e);){let o=i.index,a=n.lastIndex,l=function(e){let t=RegExp("["+s.join("")+"]","g"),n=e.replace(t,"");return r().trim(n,".-;")}(e.slice(o,a).toLowerCase());if(["","-","."].includes(l))continue;let d={value:l,start:o,end:a};t.push(d)}return t}function getBoxStyle(e){return{top:getPctCSS(e.top),left:getPctCSS(e.left),width:getPctCSS(e.width),height:getPctCSS(e.height)}}function getPctCSS(e){return(100*e).toFixed(4)+"%"}let HighlightIndex=class HighlightIndex{add(e){let t=getSearchTokens(e.text);if(1!==t.length)return;let n=t[0].value,i=this.index.get(n)||[];if(i.push(e),this.index.set(n,i),e.parent){let t=this.clusters.get(e.parent)||[];t.push(e),this.clusters.set(e.parent,t)}}match(e){let t=getSearchTokens(e).filter(e=>"xxx"!==e.value);if(!t.length)return[];let n=new Map;for(let e of t){let t=this.index.get(e.value);if(t)for(let e of t)e.parent&&n.set(e.parent,1+(n.get(e.parent)||0))}let i="",o=0;for(let[e,t]of n.entries())t>o&&(o=t,i=e);return o<this.getMinCount(t.length)?[]:this.clusters.get(i)||[]}getMinCount(e){return e<=3?e:e<=6?e-1:e<=9?e-2:8}constructor(){this.index=new Map,this.clusters=new Map}}},803375:function(e,t,n){"use strict";n.d(t,{G:function(){return useViewAttachmentLinter},_:function(){return ViewAttachmentLinterProvider}});var i=n(824246),o=n(827378),a=n(298784),r=n.n(a);let s=o.createContext({isAfterSubmitAttempt:!1,totalAttachments:0,viewedAttachments:0,onViewAttachment:r().noop,onSubmitAttempt:r().noop}),ViewAttachmentLinterProvider=e=>{let[t,n]=o.useState(!1),[a,l]=o.useReducer((e,t)=>e.includes(t)?e:r().sortBy(r().uniq([...e,t]),r().identity),[]),d=o.useMemo(()=>({totalAttachments:e.totalAttachments,viewedAttachments:a.length,onViewAttachment:l,isAfterSubmitAttempt:t,onSubmitAttempt:()=>{n(!0)}}),[e.totalAttachments,a.length,l,t,n]);return(0,i.jsx)(s.Provider,{value:d,children:e.children})},useViewAttachmentLinter=()=>o.useContext(s)},9983:function(e,t,n){"use strict";var i=n(824246),o=n(827378),a=n(792739),r=n(433536);let Empty=e=>{let{handleToggleRecording:t}=e,n=s();return(0,i.jsx)("div",{className:n.container,children:(0,i.jsx)("div",{className:n.buttonContainer,onClick:t,children:(0,i.jsx)("div",{className:"".concat(n.buttonInner," ").concat(n.recordButton),children:(0,i.jsx)(a.FontAwesomeIcon,{icon:"microphone"})})})})},Recording=e=>{let{handleToggleRecording:t}=e,n=s();return(0,i.jsx)("div",{className:n.container,children:(0,i.jsx)("div",{className:n.buttonContainer,onClick:t,children:(0,i.jsx)("div",{className:"".concat(n.buttonInner," ").concat(n.stopButton),children:(0,i.jsx)(a.FontAwesomeIcon,{icon:"square"})})})})},Playback=e=>{let{recordedChunks:t,isSubmitting:n,handleDeleteAudio:r,handleSubmitAudio:l}=e,d=s(),c=(0,o.useRef)(null),u=new Blob(t.current,{type:t.current[0].type}),p=URL.createObjectURL(u),h=[d.buttonContainer];return n&&h.push(d.buttonDisabled),(0,i.jsxs)("div",{className:d.playback,children:[(0,i.jsxs)("div",{className:d.audioContainer,children:[(0,i.jsx)("audio",{ref:c,controls:!0,src:p}),(0,i.jsx)("div",{className:d.deleteButton,onClick:r,children:(0,i.jsx)(a.FontAwesomeIcon,{icon:"trash-alt"})})]}),(0,i.jsx)("div",{className:h.join(" "),onClick:l,children:(0,i.jsx)("div",{className:"".concat(d.buttonInner," ").concat(d.submitButton),children:(0,i.jsx)(a.FontAwesomeIcon,{icon:"paper-plane"})})})]})},s=(0,r.ZL)(e=>({wrapper:{bottom:0,width:"100%",padding:24,background:"white",borderTopLeftRadius:12,borderTopRightRadius:12},container:{display:"flex",alignItems:"center",justifyContent:"center"},buttonContainer:{borderRadius:100,border:"4px solid ".concat(e.colors.gray10),background:e.colors.white,boxShadow:e.boxShadowLargeTop,padding:8,height:72,width:72,display:"inline-flex",alignItems:"stretch",justifyContent:"stretch",cursor:"pointer"},buttonInner:{flexGrow:1,borderRadius:100,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,"&:active":{transform:"scale(1.1)"},transition:"all 0.2s"},buttonDisabled:{pointerEvents:"none",opacity:.5},recordButton:{background:e.colors.red,color:e.colors.white},stopButton:{color:e.colors.red,fontSize:24},submitButton:{background:e.colors.green,color:e.colors.white},playback:{display:"flex",flexDirection:"column",alignItems:"center"},audioContainer:{margin:"16px 0",display:"grid",gridTemplateColumns:"1fr auto",gridColumnGap:16,alignItems:"center"},deleteButton:{flexShrink:0,width:32,height:32,borderRadius:32,display:"flex",alignItems:"center",justifyContent:"center",color:e.colors.gray20,fontSize:16,boxShadow:e.boxShadowLarge,cursor:"pointer"}}));t.Z=e=>{let{isRecording:t,isSubmitting:n,blobLength:o,recordedChunks:a,handleToggleRecording:r,handleDeleteAudio:l,handleSubmitAudio:d}=e,c=s(),u=!t&&o>0;return(0,i.jsxs)("div",{className:c.wrapper,children:[!t&&!u&&(0,i.jsx)(Empty,{handleToggleRecording:r}),t&&(0,i.jsx)(Recording,{handleToggleRecording:r}),u&&(0,i.jsx)(Playback,{recordedChunks:a,isSubmitting:n,handleDeleteAudio:l,handleSubmitAudio:d})]})}},153279:function(e,t,n){"use strict";n.d(t,{H:function(){return chunksToBlob},w:function(){return blobToBase64}});let chunksToBlob=e=>new Blob(e,{type:e[0].type}),blobToBase64=e=>new Promise(t=>{let n=new FileReader;n.onload=()=>{t(n.result)},n.readAsDataURL(e)})},578899:function(e,t,n){"use strict";n.d(t,{X:function(){return ReactJsonView}});var i=n(824246),o=n(165218),a=n.n(o),r=n(829449);n(827378);let s=a()(()=>n.e(51366).then(n.t.bind(n,251366,23)),{loadableGenerated:{webpack:()=>[251366]},ssr:!1}),ReactJsonView=e=>{let t=!0===e.enableClipboard&&(e=>{let{src:t}=e,n="string"==typeof t?t:JSON.stringify(t);(0,r.v)(n,{copyRaw:!0})});return(0,i.jsx)(s,{...e,enableClipboard:e.enableClipboard||t})}},268367:function(e,t,n){"use strict";n.d(t,{p:function(){return RegularExpressionFilter}}),n(298784);let RegularExpressionFilter=(e,t)=>{let n=e.pivotId||e.id;return void 0!==t[n]&&String(t[n]).toLowerCase().match(new RegExp("".concat(e.value.toLowerCase())))}},281494:function(e,t,n){"use strict";n.d(t,{O:function(){return ChatbotRankingProvider},X:function(){return useChatbotContext}});var i=n(824246),o=n(827378),a=n(789018),r=n(963494),s=n(298784),l=n.n(s),d=n(559708),c=n(810755),u=n(204864),p=n(108896),h=n(971599),m=n(608429),g=n(352991),x=n(642830),f=n(571085),v=n(711719),b=n.n(v),y=n(320280),w=n(837553),j=n(266301),k=n(899047),C=n(879815),A=n(698234),T=n(517124),S=n(428907),I=n(252708),P=n.n(I),D=n(707889),N=n(854358);let R=o.createContext({enabled:!1,readOnly:!1,isReview:!1,history:{interactions:[]},setEnabled:e=>{},setReadOnly:e=>{},setIsReview:e=>{},nextInteraction:void 0,previousInteraction:void 0,jumpToEnd:void 0,transcript:"",submitPrompts:()=>Promise.resolve(),fieldsToShow:[],setTaxonomy:(e,t,n)=>{},rlhfParams:void 0,setRLHFParams:e=>{},submitChatbotForm:()=>{},rangedMultiTurnEndConversation:()=>{},formatSections:e=>e,annotations:{},setAnnotations:e=>{},isDone:!1,rangedMultiTurnCanSubmit:!1,taskCustomer:void 0,setTaskCustomer:e=>{},candidateBestCompletion:void 0,selectedCompletion:0,setSelectedCompletion:e=>{},useChatbotV2:!1,selectedInteraction:0,setSelectedInteraction:e=>{},onPerConvoField:!1,gotoSelectedInteraction:e=>{},overrideViewFields:!1,perConversationFields:[],perResponseFields:[],perTurnFields:[],erroredItems:[],checkIfItemBlank:(e,t)=>!1,isMakingChanges:!1,hideReviewNav:!1,hideNextButton:!1,nextButtonDisabled:void 0,shouldUpdateBestCompletion:!1,setShouldUpdateBestCompletion:()=>{},chatBoxTexts:["Type your prompt"],setChatBoxTexts:e=>{},canResetChat:!1,resetChat:()=>{},isStreaming:!1,autoSpecText:"",setAutoSpecText:()=>{},autoSpecLoading:!1,setAutoSpecLoading:()=>{},critiqueText:"",setCritiqueText:()=>{},critiqueResponseChanged:0,setAttachments:()=>{},isRangedMultiTurn:!1,handleUndo:()=>{},stopStreaming:void 0,startBranchConversation:()=>{},reviewNoBranching:!1,candidateEditedPrompt:void 0,interactionNumber:void 0,hasItemsOnRankingEditPage:!0,additionalResponseData:{},setAdditionalResponseData:()=>{},useEditPrompt:!1,submitChatbotFormAsync:()=>{},skipPromptValidation:!1,streamingInteraction:void 0,resetLastInteraction:()=>{}}),B={field_id:"response_ranking",type:r.TextCollectionFieldType.RankingOrder,first_label:"Best",last_label:"Worst",num_items_to_rank:2,num_options:2,title:"Rank the options from best to worst.",required:!0},M={field_id:"response_ranking",type:r.TextCollectionFieldType.RankingOrder,first_label:"Most preferred",last_label:"Least preferred",num_items_to_rank:2,num_options:2,title:"Which response (option) do you prefer?",hint:"Read the 2 responses(options) generated by AI, and ask yourself which response (option) do you prefer?",required:!0},F={required:!0,type:r.TextCollectionFieldType.Number,use_slider:!0,field_id:"option_quality",title:"Option quality",min:1,max:7,step:1},E="Read the 3 responses(options) generated by AI, and ask yourself which response (option) do you prefer?",L={type:r.TextCollectionFieldType.Text,field_id:"edit_completion",title:"Write your own response",hint:"The model wasn't able to generate a response because the input is too large, please write your own response to the prompt.",use_grammar_check:!0},ChatbotRankingProvider=e=>{var t,n,s,v,I,Z,z,O,H,V,U;let{children:W,useChatbotV2:G,lintErrors:q,assignmentId:K=b().v4(),useFairStreaming:J,isStudio:Q,projectId:Y,useEditPrompt:X,allowPastingInRLHFEditResponse:_,forceEditCompletionLevenshteinThreshold:$,metadata:ee,perTurnCheck:et,useAutoCritique:en}=e,[ei,eo]=(0,o.useState)(!1),[ea,er]=(0,o.useState)(!1),[es,el]=(0,o.useState)(!1),[ed,ec]=(0,o.useState)(!1),[eu,ep]=(0,o.useState)(-1),[eh,em]=(0,o.useState)({interactions:[]}),[eg,ex]=(0,o.useState)(""),[ef,ev]=(0,m.Z)("chatHistory"+K,{interactions:[]}),[eb,ey]=(0,o.useState)(void 0),[ew,ej]=(0,o.useState)({}),[ek,eC]=(0,o.useState)([]),[eA,eT]=(0,o.useState)([]),[eS,eI]=(0,o.useState)([]),[eP,eD]=(0,o.useState)([]),[eN,eR]=(0,o.useState)(void 0),[eB,eM]=(0,o.useState)({}),[eF,eE]=(0,o.useState)(["Type your prompt"]),[eL,eZ]=(0,m.Z)("currentOptionIndicesForRanking"+K,[]),[ez,eO]=(0,o.useState)(!1),[eH,eV]=(0,o.useState)(void 0),[eU,eW]=(0,o.useState)(""),[eG,eq]=(0,o.useState)(!1),[eK,eJ]=(0,o.useState)(!1),[eQ,eY]=(0,o.useState)(0),[eX,e_]=(0,o.useState)(""),[e$,e0]=(0,o.useState)(!1),[e1,e2]=(0,o.useState)([]),[e3,e9]=(0,o.useState)(void 0),[e6,e4]=(0,o.useState)(!1),[e8,e5]=(0,o.useState)(!1),{setLatestValue:e7}=(0,D.YX)(),te=(0,o.useMemo)(()=>en||(null==eN?void 0:eN.autoCritique),[en,eN]),[tt,tn]=(0,m.Z)("conversationEndedEarly"+K,!1),[ti,to]=(0,o.useState)(!1),ta="editCompletionTemplate",tr={type:r.TextCollectionFieldType.Text,field_id:"edit_completion",title:"Edit the best chosen response",hint:"Edit the response to more closely answer the prompt. If no changes necessary please leave as is",use_grammar_check:ti},ts={type:r.TextCollectionFieldType.Text,field_id:"edit_completion",title:"Edit the chatbot response",hint:"Edit the response to more closely answer the prompt. If no changes necessary please leave as is",use_grammar_check:ti,show_markdown_preview:!0},tl={type:r.TextCollectionFieldType.Text,field_id:"edit_prompt",title:"Edit the prompt",use_grammar_check:ti},td=(null==eN?void 0:eN.rlhfBenchmarkType)===d.Tn.BaseAttemptRanking,[tc,tu]=(0,m.Z)("selectedCompletion"+K,0),[tp,th]=(0,m.Z)("selectedInteraction"+K,-1);(0,o.useEffect)(()=>{if(G){let e=tp;ef.interactions.length&&(e=Math.max(0,e)),ef.interactions.length>e+1&&ef.interactions[e].chosenCompletion&&!ef.interactions[e+1].chosenCompletion&&(e+=1),th(Math.min(e,ef.interactions.length-1))}},[G]);let[tm,tg]=(0,m.Z)("onPerConvoField"+K,!1),[tx,tf]=(0,m.Z)("overrideViewFields"+K,!1),[tv,tb]=o.useState(!1),[ty,tw]=(0,o.useState)(void 0),[tj,tk]=(0,m.Z)("candidateBestCompletion"+K,void 0),[tC,tA]=(0,o.useState)(void 0),tT=G?tp+1:ed?eu+1:ef.interactions.length,tS=l().get(eB,"editCompletion_".concat(tT,".response[0]"),""),tI=!!((null==eB?void 0:null===(t=eB.ranking_multiple_chat_api_endpoints)||void 0===t?void 0:t.response)&&eB.ranking_multiple_chat_api_endpoints.response.length>0&&"null"!==eB.ranking_multiple_chat_api_endpoints.response[0]),[tP,tD]=(0,o.useState)(!1),tN=null!==(H=null!==(O=null==eN?void 0:null===(n=eN.rangedNumberOfInteractions)||void 0===n?void 0:n.min)&&void 0!==O?O:null==eN?void 0:eN.numberOfInteractions)&&void 0!==H?H:1,tR=null!==(U=null!==(V=null==eN?void 0:null===(s=eN.rangedNumberOfInteractions)||void 0===s?void 0:s.max)&&void 0!==V?V:null==eN?void 0:eN.numberOfInteractions)&&void 0!==U?U:1,tB=(0,o.useCallback)(e=>{if(tk(null==e?void 0:e.trim()),e){let t=ed?Math.max(eu,0):ef.interactions.length-1;e7({fieldId:"editCompletion_".concat(t+1),text:(null==e?void 0:e.trim())||"",overrideForField:!0})}},[ef.interactions.length,eu,ed,tk,e7]);(0,o.useEffect)(()=>{tD(!0)},[null==eB?void 0:null===(I=eB.ranking_multiple_chat_api_endpoints)||void 0===I?void 0:null===(v=I.response)||void 0===v?void 0:v[0],null==eB?void 0:null===(z=eB["ranking_".concat(ef.interactions.length)])||void 0===z?void 0:null===(Z=z.response)||void 0===Z?void 0:Z[0]]);let maskBlacklistedWords=(e,t)=>{if(!t||0===Object.keys(t).length)return e;let n=RegExp(Object.keys(t).join("|"),"g");return e.replace(n,e=>t[e])};(0,o.useEffect)(()=>{es&&ep(0)},[es]),(0,o.useEffect)(()=>{async function fetchData(){e4(!0);let e=await a.Z.selfserve.fetchRlhfBlacklistWords();e9(null==e?void 0:e.flamingo)}(null==eN?void 0:eN.isFair)&&!e6&&fetchData()},[e3,e6,null==eN?void 0:eN.isFair]);let setSelectedCompletion=e=>{e8||((null==ek?void 0:ek.length)===0?tu(eN.numberOfCompletions):tu(e))};(0,o.useEffect)(()=>{!async function(){if(Y){let{enabled:e}=await a.Z.selfserve.fetchSpellingAndGrammarEnabled({projectId:Y});to(e)}}()},[Y]);let tM=(0,o.useMemo)(()=>{if(e8||te&&(e$||!eX.length&&(null==eN?void 0:eN.numberOfInteractions)===1)&&!es&&!tx)return!1;let e=ef.interactions;if(ea||ed)return eu===e.length;if(tt||1===tR&&1===e.length&&0===eA.length)return!0;let t=0!==e.length&&e[e.length-1].chosenCompletion,n=es?e.length>=tN:e.length>=tR;return!!(eN&&n&&t)},[e8,eN,e$,eX.length,es,tx,ef.interactions,ea,ed,eu,tt,tN,tR,eA.length,te]),tF=(0,o.useMemo)(()=>!!(null==eN?void 0:eN.rangedNumberOfInteractions),[null==eN?void 0:eN.rangedNumberOfInteractions]),tE=(0,o.useCallback)(()=>{try{let e=ef.interactions.length-1,t=l().cloneDeep(eB);for(let n of Object.keys(t)){let i;let o=n.split("_");i=o.length>2&&parseInt(o[o.length-2])&&parseInt(o[o.length-1])?parseInt(o[o.length-2])-1:parseInt(o[o.length-1])-1,e===i&&delete t[n]}return t}catch(e){}},[eB,ef.interactions.length]),tL=(0,o.useCallback)(()=>{tk(void 0),ev(e=>({...e,interactions:e.interactions.slice(0,e.interactions.length-1)})),setSelectedCompletion(0),G&&th(Math.max(-1,ef.interactions.length-2))},[tk,ef.interactions.length,ev,G,th,setSelectedCompletion]),[tZ,tz]=(0,o.useState)(new AbortController),tO=(0,o.useCallback)(()=>{tZ.abort()},[tZ]),tH=(0,o.useCallback)(()=>{tn(!0),th(ef.interactions.length)},[tn,th,ef.interactions.length]),tV=(0,o.useMemo)(()=>{let e=ef.interactions,t=0!==e.length&&e[e.length-1].chosenCompletion;return!!((null==eN?void 0:eN.rangedNumberOfInteractions)&&e.length>=tN&&t&&0===eP.length)},[ef.interactions,null==eN?void 0:eN.rangedNumberOfInteractions,tN,eP.length]);(0,o.useEffect)(()=>{if(G&&tx&&(X||(null==eN?void 0:eN.editBestCompletion))){var e,t,n,i;if(X){let t=l().get(eB,"editPrompt_".concat(tp+1,".response[0]"),void 0),n=null===(e=ef.interactions[tp])||void 0===e?void 0:e.prompt;if(n&&t&&t!==n){let e=l().cloneDeep(ef);e.interactions[tp].prompt=t,ev(e)}}if(null==eN?void 0:eN.editBestCompletion){let e=l().get(eB,"editCompletion_".concat(tp+1,".response[0]"),void 0),o=ef.interactions[tp],a=(null==o?void 0:null===(t=o.displayedCompletion)||void 0===t?void 0:t.text)||(null==o?void 0:null===(n=o.chosenCompletion)||void 0===n?void 0:n.text);if(a&&e&&e!==a){let t=l().cloneDeep(ef);(null===(i=t.interactions[tp])||void 0===i?void 0:i.displayedCompletion)!==void 0?t.interactions[tp].displayedCompletion.text=e:t.interactions[tp].displayedCompletion={text:e,isEdited:!0},(null==eN?void 0:eN.useEditedResponseInHistory)&&t.interactions[tp].chosenCompletion&&(t.interactions[tp].chosenCompletion.text=e,t.interactions[tp].chosenCompletion.isEdited=!0),ev(t)}}}},[eB]);let tU=(0,o.useMemo)(()=>{if(G)return!(eP.length>0&&!(tM||tv));if((null==eN?void 0:eN.isFair)&&!tF||tF&&es)return!0;let e=ef.interactions;return 1===tR&&1===e.length&&0===eA.length},[G,null==eN?void 0:eN.isFair,tF,es,ef.interactions,tR,eA.length,eP.length,tM,tv]),tW=(0,w.ZP)("cohere-skip-long-prompt",{projectId:Y},!1),tG=(0,w.ZP)("cohere-include-preamble-and-seed",{projectId:Y},!1),tq=(0,w.ZP)("crab-enabled-streaming",{projectId:Y},!1),tK=(0,w.ZP)("enable-rlhf-next-button-frontend-lint",{projectId:Y},!1),tJ=(0,w.ZP)("rlhf-force-edit-completion",{projectId:Y},!1),tQ=(0,w.ZP)("skip-auto-critique-format-check",{projectId:Y},!1),tY=(0,w.ZP)("enable-model-response-comparison-modal",{projectId:Y},!1),tX=(0,w.ZP)("rlhf-chatbot-view-can-reset",{projectId:Y},!1)||!1,t_=tq||J||l().get(eN,"chatApiAdditionalParams.stream",!1)||l().get(eN,"chatApiEndpoints",[]).length>0&&l().every(l().get(eN,"chatApiEndpoints"),e=>{var t;return null===(t=e.params)||void 0===t?void 0:t.stream}),t$=(0,w.ZP)("alpaca-multiturn",{projectId:Y},!1),t0=t$?"Answer":"Option",t1=(0,o.useCallback)(e=>{if(!eN)return 0;let t=l().get(eB,"ranking_".concat(e,".response[0]"),"0").split(",")[0];return t||0},[eB,eN]),t2=(0,o.useCallback)((e,t)=>{var n,i,o;if((null==eN?void 0:eN.numberOfCompletions)&&t===eN.numberOfCompletions){if((null==eN?void 0:eN.numberOfCompletions)===1&&(null==eN?void 0:eN.editBestCompletion)){let t="editCompletion_".concat(e+1);return!!(!l().size(null===(n=eB[t])||void 0===n?void 0:n.response)||(0,p.isBlankField)(eB[t]))}let t=ef.interactions[e];if(void 0===t)return!1;let o=e+1;if("null"===l().get(eB,"ranking_".concat(o,".response[0]")))return!0;let a=l().get(eB,"ranking_".concat(o,".response"),[]).join(",").split(",").filter(e=>"null"!==e).length;if(a<eN.numberOfCompletions)return!0;if(eS&&eS.length>0)for(let t of eS){let n="".concat(e+1),o="".concat(t.field_id,"_").concat(n);if(t.required&&(!l().size(null===(i=eB[o])||void 0===i?void 0:i.response)||(0,p.isBlankField)(eB[o])))return!0}let r=t1(o),s=t.completions[r];return void 0===s}for(let n of ek){let i="".concat(e+1,"_").concat(t+1),a="".concat(n.field_id,"_").concat(i);if(n.required&&(!l().size(null===(o=eB[a])||void 0===o?void 0:o.response)||(0,p.isBlankField)(eB[a])))return!0}return!1},[eN,ef.interactions,eB,t1,ek,eS]),t3=(0,o.useMemo)(()=>{if(G){if(e8)return"The model is still streaming.";if(tc===(null==eN?void 0:eN.numberOfCompletions)&&ek&&ek.length>0){for(let e=0;e<tc;e++)if(t2(tp,e))return"Please complete all required fields for all completions."}let e=t2(tp,tc)&&!((null==eN?void 0:eN.numberOfCompletions)===1&&1===tc);if(e)return"Please complete all required fields to continue."}if(tJ){for(let n of eP)if(n.field_id.startsWith("editCompletion_")){var e,t;let i=parseInt(n.field_id.split("_")[1])-1,o=l().get(eB,"".concat(n.field_id,".response[0]"),"").trim(),a=null===(t=ef.interactions[i])||void 0===t?void 0:null===(e=t.completions[0])||void 0===e?void 0:e.text.trim();if(a){if(void 0!==$&&o&&a){let e=(0,C.ne)(a,o);if(e<$)return"Your response is too similar to the current response."}else if(o===a)return"You must provide an edit to the response.";if(te&&!eX.length)return"Please get a critique before continuing."}}}if(tK&&l().some(eP,e=>{let t=e.field_id,n=l().get(eB,"".concat(t,".response"));if(!n)return!0;if(e.type===r.TextCollectionFieldType.RankingOrder){let t=e.num_options,i=n.filter(e=>"null"!==e&&""!==e).length;return i!==t}return void 0===n||l().isArray(n)&&(0===l().flatten(n).length||1===n.length&&l().isString(n[0])&&0===n[0].length)||l().isString(n)&&0===n.length}))return"Please answer all questions."},[G,tJ,tK,e8,tc,eN,ek,t2,tp,eP,eB,ef.interactions,$,eX.length,te]),formatSectionsFair=e=>0===e.length?[(0,i.jsx)("div",{style:{marginLeft:"8px"},children:(0,i.jsx)("h3",{children:"Please type a prompt in the left textbox"})},"default")]:ef.interactions.length>0&&(((null==eN?void 0:eN.chatApiMultiEndpoints)||[]).length!==ef.interactions[ef.interactions.length-1].completions.length||l().some(ef.interactions[ef.interactions.length-1].completions,e=>!e.text))?[(0,i.jsx)("div",{style:{marginLeft:"8px"},children:(0,i.jsxs)("h3",{children:["There was an issue with generating the full response, please undo or refresh the page."," "]})},"default")]:(e.splice(0,0,(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:"Rank your preferences between the following options:"}),!!eU.length&&(0,i.jsx)("div",{style:{margin:"0 8px",padding:8,whiteSpace:"pre-wrap",backgroundColor:"rgba(144, 202, 249, .2)",borderRadius:8},children:eU})]})),eN&&eN.numberOfCompletions>1&&e.splice(e.length-1,0,(0,i.jsxs)("div",{children:[(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)("hr",{})]})),e),formatSectionsAutoCritique=e=>{if(tS.length&&te&&e.splice(e.length,0,(0,i.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:(0,i.jsx)(y.zx,{disabled:eK||!eQ,onClick:getCritique,style:{marginLeft:"auto",marginRight:16},children:eK?"Critiquing...":"Get Critique"})})),te&&eX.length){let t=eX.toLowerCase().startsWith("severity: critical")||eX.toLowerCase().startsWith("severity: major"),n=eX.toLowerCase().startsWith("severity"),o=eX.toLowerCase().includes("rate limit exceeded");e.splice(e.length-1,0,(0,i.jsx)("div",{style:{margin:"0 8px 8px 8px",padding:8,whiteSpace:"pre-wrap",backgroundColor:t?"rgba(229, 115, 115, .2)":"rgba(255, 183, 77, .2)",borderRadius:8},children:o?"Critique unavailable due to too many concurrent requests":n||tQ?eX:"Could not analyze answer, please make an edit and try again."}))}return e},formatSectionsV2=e=>{if(tm&&e.length>0)return e.splice(0,0,(0,i.jsx)("div",{children:(0,i.jsx)("h3",{children:"Answer the following questions about the entire conversation:"})})),e;if(tM&&0===e.length)return e;if(0===e.length)return[(0,i.jsx)("div",{style:{marginLeft:"8px"},children:(0,i.jsx)("h3",{children:tV&&!tt?"Enter a prompt to continue or end the conversation now.":"Enter a prompt to continue."})},"default")];if(eS.length>0&&eN.numberOfCompletions>1&&tc>eN.numberOfCompletions-1)return e.splice(0,0,(0,i.jsx)("div",{children:(0,i.jsx)("h3",{children:"Answer the following questions about this turn:"})})),e;if(ek.length>0&&tc<eN.numberOfCompletions){let t=tc+1;e.splice(0,0,(0,i.jsx)("div",{children:(0,i.jsxs)("h3",{children:["Answer the following questions about option ",t,":"]})}))}else eN&&te&&(e=formatSectionsAutoCritique(e));return e},t9=(0,o.useMemo)(()=>ek.filter(e=>e.type===r.TextCollectionFieldType.Code),[ek]);(0,o.useEffect)(()=>{if(ea&&0===ef.interactions.length&&eB.rlhf_history){let e=eB.rlhf_history.response[0];if(X&&1===e.interactions.length){let t=X?l().get(eB,"editPrompt_1.response[0]",void 0):void 0;t&&(e.prompt=t,e.interactions[0].prompt=t)}ev(e),em(e)}},[ea,eB]),(0,o.useEffect)(()=>{var e,t,n,i;if((null==eN?void 0:eN.editBestCompletion)&&!(null==eN?void 0:eN.isFair)&&ef.interactions.length>0){let n=ed?Math.max(eu,0):ef.interactions.length-1,i=ef.interactions[n];if(1===eN.numberOfCompletions){let t=null===(e=i.completions[0])||void 0===e?void 0:e.text,o=l().get(eB,"editCompletion_".concat(n+1,".response[0]"),void 0);o&&""!==o&&(t=o),tk(t),e7({fieldId:"editCompletion_".concat(n+1),text:t})}else{let e=t1(n+1),o=e?null===(t=i.completions[+e])||void 0===t?void 0:t.text:void 0;tj!==o&&tB(o)}}if((null==eN?void 0:eN.editBestCompletion)&&(null==eN?void 0:eN.isFair)){let e=ef.interactions.length-1,t=ef.interactions[e],o=null==eB?void 0:null===(n=eB.ranking_multiple_chat_api_endpoints)||void 0===n?void 0:n.response[0],a=null!==o?null==t?void 0:null===(i=t.completions[parseInt(o)])||void 0===i?void 0:i.text:void 0;tj!==a&&tB(a),te&&tI?eO(!0):eO(!1)}},[eB,eu,ef.interactions,tI,te]),(0,o.useEffect)(()=>{if(G&&X&&tv){if(tp<ef.interactions.length&&tp>=0){let e=ef.interactions[tp];tA(e.prompt)}}else if(!G&&X&&ed&&eu<ef.interactions.length&&eu>=0){let e=ef.interactions[eu];tA(e.prompt)}},[X,ed,eu,tv,tp,tc]);let t6=!Q&&!_,createNewField=(e,t)=>{var n;let i={...e,conditions:null===(n=e.conditions)||void 0===n?void 0:n.map(e=>Object.keys(e).reduce((n,i)=>(n["".concat(i,"_").concat(t)]=e[i],n),{})),field_id:"".concat(e.field_id,"_").concat(t)};return i};(0,o.useEffect)(()=>{for(let l in eB){var e,t,n,i,o,a,r,s;let d=eB[l];if("queryable_text_and_results"===d.type&&(null==d?void 0:null===(e=d.response)||void 0===e?void 0:e[0])&&(d.response[0].citationReferenceIndex=1),"field_set"===d.type&&(null==d?void 0:null===(i=d.response)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:null===(t=n.additional_google_search)||void 0===t?void 0:t.type)==="queryable_text_and_results")for(let e=0;e<d.response.length;e++){let t=null==d?void 0:null===(s=d.response)||void 0===s?void 0:null===(r=s[e])||void 0===r?void 0:null===(a=r.additional_google_search)||void 0===a?void 0:null===(o=a.response)||void 0===o?void 0:o[0];t&&(t.citationReferenceIndex=e+2)}}eM(eB)},[eB]),(0,o.useEffect)(()=>{var e,t,n,i,o;if(G||!eN||(null==eN?void 0:eN.isFair))return;let a=ea||ed?ef.interactions.slice(0,eu+1):ef.interactions;if(0===a.length){ex(void 0),eD([]);return}let r=null!=eb?eb:a[a.length-1],s=!r.chosenCompletion||(ea||ed)&&!tM,d=[],c=s?a.length-1:a.length;for(let n of a.slice(0,c)){let i=(null==n?void 0:null===(e=n.displayedCompletion)||void 0===e?void 0:e.text)||(null===(t=n.chosenCompletion)||void 0===t?void 0:t.text);!i||l().isNil(i)||(d.push("**You**: ".concat(n.prompt," \n")),d.push("**Bot**: ".concat(i," \n")),d.push("*** \n"))}if(s){d.push("**You**: ".concat(r.prompt," \n\n")),t$||d.push("**Please evaluate the following options by answering the questions on the right:** \n\n");let e=a.length,t=[],s=1;for(let n of r.completions){if(eL&&eL.length>0&&!eL.includes(s-1)){s++;continue}let i="writeyourown"===n.model?'<span style="color:red">'.concat(n.text,"</span>"):n.text;d.push("**".concat(t0," ").concat(t$?e:s,"**:\n")),d.push("\n".concat(i.length?i:"(response missing)","\n")),d.push("\n");let o="".concat(e,"_").concat(s);for(let e of ek)t.push(createNewField(e,o));s++}let l=(null===(n=eN.chatApiMultiEndpoints)||void 0===n?void 0:n.length)||eN.numberOfCompletions;l>1&&t.push({...B,num_items_to_rank:l,num_options:l,field_id:"ranking_".concat(e),max_tied_items:eN.maxRankingTies,hint:(null==eN?void 0:eN.flamingoPipelineVersion)==="pipeline_v2"?E:B.hint});let c=(null==r?void 0:null===(o=r.completions)||void 0===o?void 0:null===(i=o[0])||void 0===i?void 0:i.model)==="writeyourown",u=null!=eH?eH:tr,p=c?L:u;eN.editBestCompletion&&(t$?t.unshift({...p,disable_pasting:t6,field_id:"editCompletion_".concat(e)}):t9&&t9.length>0?(ts.title="Edit completion: use {{code_".concat(e,"}} to reference code"),t.push({...ts,disable_pasting:t6,field_id:"editCompletion_".concat(e)})):t.push({...p,disable_pasting:t6,field_id:"editCompletion_".concat(e),show_markdown_preview:!!(null==eN?void 0:eN.showMarkdownViewForEditCompletion)})),X&&ed&&t.push({...tl,disable_pasting:t6,field_id:"editPrompt_".concat(e)}),e8?eD([]):eD(t)}else tM?(d.push("*All done! Great work!* \n"),eD(eA)):(tV&&!tt?d.push("*Type a prompt to continue or end the conversation now.* \n"):d.push("*Type your next prompt* \n"),eD([]));let u=d.map(e=>"".concat(j.r,"\n ").concat(e)).join("");ex(u)},[ef,eu,tM,eN,ed,e8,tt,eb,G]),(0,o.useEffect)(()=>{var e,t,n,i;if(!(null==eN?void 0:eN.isFair)||!e6)return;let o="(Model failed to generate a response, please either undo or refresh the page to try again)";e8&&(o="(Model is generating a response)");let a=ea?ef.interactions.slice(0,eu+1):ef.interactions;if(0===a.length){ex(void 0),eD([]);return}let r=null!=eb?eb:a[a.length-1],s="",d=!r.chosenCompletion||ea&&!tM||(null==eN?void 0:eN.flamingoPipelineVersion)==="pipeline_v2",c=d?a.length-1:a.length;for(let n of a.slice(0,c)){let i=(null==n?void 0:null===(e=n.displayedCompletion)||void 0===e?void 0:e.text)||(null===(t=n.chosenCompletion)||void 0===t?void 0:t.text);!i||l().isNil(i)||(s+="**You**: ".concat(n.prompt," \n")+"**Bot**: ".concat(i," \n")+"*** \n")}if(d){s+="**You**: ".concat(r.prompt," \n")+"**Please evaluate the following options by answering the questions on the right:** \n\n";let e=G?tp+1:a.length,t=[];if((null==eN?void 0:eN.chatApiMultiEndpoints)&&(null==eN?void 0:eN.chatApiMultiEndpoints.length)>0){if(tF)for(let n=1;n<ef.interactions[0].completions.length+1;n++)t.push({...F,title:"Please rate the quality of option ".concat(n),field_id:"option_quality_".concat(e,"_").concat(n)});tF?t.push({...M,num_items_to_rank:ef.interactions[0].completions.length,num_options:ef.interactions[0].completions.length,field_id:"ranking_".concat(e),items_to_rank_candidates:eL,is_review_mode:es,title:M.title}):t.push({...M,num_items_to_rank:ef.interactions[0].completions.length,num_options:ef.interactions[0].completions.length,field_id:"ranking_multiple_chat_api_endpoints",items_to_rank_candidates:eL,is_review_mode:es,title:M.title,hint:(null==eN?void 0:eN.flamingoPipelineVersion)==="pipeline_v2"?E:B.hint})}else eN.numberOfCompletions>1&&t.push({...B,num_items_to_rank:eN.numberOfCompletions,num_options:eN.numberOfCompletions,max_tied_items:eN.maxRankingTies,field_id:"ranking_".concat(e)});let l=1;for(let e of r.completions){if(eL&&eL.length>0&&!eL.includes(l-1)){l++;continue}let t=e.text,n=maskBlacklistedWords(t,e3);s+="**Option ".concat(l,"**:\n")+"\n".concat(n.length?n:o,"\n")+"\n",l++}if(ea){let n="".concat(e,"_1");if((null==eN?void 0:eN.flamingoPipelineVersion)==="pipeline_v2"){let e=[];for(let t of ek)e.push(createNewField(t,n));t=[...e,...t]}else if(tF);else for(let e of ek)t.push(createNewField(e,n))}if(!ea&&(null==eN?void 0:eN.flamingoPipelineVersion)==="pipeline_v2"){let n="".concat(e,"_1"),i=[];for(let e of ek)i.push(createNewField(e,n));t=[...i,...t]}let d=(null==r?void 0:null===(i=r.completions)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:n.model)==="writeyourown",c=d?L:tr;eN.editBestCompletion&&ez&&t.push({...c,field_id:"editCompletion_".concat(e)}),eD(t)}else if(tM)s+="*All done! Great work!* \n",eD(eA);else{let e=a.length;tF&&e>=tN?s+="*Type your next prompt or complete the task* \n":s+="*Type your next prompt* \n",eD([])}ex(s)},[ef,eu,tM,ez,e6,eG,tp,eb]),(0,o.useEffect)(()=>{if(!G||(null==eN?void 0:eN.isFair))return;let e=ef.interactions;if(0===e.length){ex(void 0),eD([]);return}let t=e[Math.min(e.length-1,Math.max(0,tp))],n=!t.chosenCompletion||ea&&!tM||tx||(null==eN?void 0:eN.flamingoPipelineVersion)==="pipeline_v2";if(tm&&!tx)eD(eA);else if(n){let e=tp+1,t=[],n=tc+1;if(!eN)return;if(n<=eN.numberOfCompletions){let i="".concat(e,"_").concat(n);for(let e of ek)t.push(createNewField(e,i))}if(eN.numberOfCompletions>=1&&n>eN.numberOfCompletions){if(eN.numberOfCompletions>1)for(let n of(t.push({...B,num_items_to_rank:eN.numberOfCompletions,num_options:eN.numberOfCompletions,max_tied_items:eN.maxRankingTies,field_id:"ranking_".concat(e)}),eS))t.push({...n,field_id:"".concat(n.field_id,"_").concat(e)});eN.editBestCompletion&&t.push({...tr,disable_pasting:t6,field_id:"editCompletion_".concat(e),show_markdown_preview:!!(null==eN?void 0:eN.showMarkdownViewForEditCompletion)}),tx&&tv&&X&&t.push({...tl,disable_pasting:t6,field_id:"editPrompt_".concat(e)})}eD(t)}else eD([])},[ef,tM,tc,tp,tm,G,eN]),(0,o.useEffect)(()=>{(tt||tp===tR)&&tp===ef.interactions.length&&eA.length>0?tg(!0):tg(!1)},[tp,tt,ef.interactions.length,eA]);let t4=(0,o.useMemo)(()=>{if(!q)return[];let e=l().filter(q,e=>e.severity===h.LintSeverity.ERROR&&!e.dismissed);if(!e||e.length<1)return[];let t=e[0].data.taskComponentAnnotations;return t?t.map(e=>e.id.substring(e.id.indexOf("_")+1)):[]},[q]),t8=(0,o.useMemo)(()=>eN&&(eN.numberOfCompletions>1||(null==eN?void 0:eN.editBestCompletion)||tv&&X),[eN,tv,X]),submitChatbotFormAsync=async()=>{if(G&&tc<eN.numberOfCompletions&&t8){setSelectedCompletion(tx?Math.min(tc+1,eN.numberOfCompletions-1):tc+1);return}let e=!et||await et();e&&submitChatbotForm()},submitChatbotForm=()=>{var e;if(G&&tc<eN.numberOfCompletions&&t8){setSelectedCompletion(tx?Math.min(tc+1,eN.numberOfCompletions-1):tc+1);return}let t=G?tp:ed?eu:ef.interactions.length-1,n=ef.interactions[t],i=t+1,o=null!==(e=t1(i))&&void 0!==e?e:l().get(eB,"ranking_multiple_chat_api_endpoints.response[0]"),a=(null!=o?o:Number(o))||0,r={...n.completions[a]},s=eN.editBestCompletion?l().get(eB,"editCompletion_".concat(i,".response[0]"),void 0):void 0,d=eN.editBestCompletion?s!==(null==r?void 0:r.text):void 0,c=Object.values(eB).filter(e=>"code"===e.type);if(c.length>0){let e=c.map(e=>e.response&&e.response.length>0&&l().has(e.response[0],"sourceCode")?e.response[0].sourceCode:""),t=(0,A.jo)(s,e);s=t}if(d&&eN.useEditedResponseInHistory&&r&&(r.text=s,r.isEdited=!0),ed){if(X){let e=l().get(eB,"editPrompt_".concat(i,".response[0]"),void 0);e&&""!==e&&(n.prompt=e)}let e=l().cloneDeep(ef);e.interactions[t]={...n,chosenCompletion:r,displayedCompletion:s&&d?{text:s,isEdited:d}:void 0},ev(e),ep(eu+1);return}ev({topic:ef.topic,interactions:[...ef.interactions.slice(0,t),{...n,chosenCompletion:r,displayedCompletion:s&&d?{text:s,isEdited:d}:void 0}]}),G&&void 0!==r&&(tf(!1),setSelectedCompletion(0),eA&&i===tR&&tg(!0)),te&&(e_(""),eY(0))},getAutoSpec=e=>{(async()=>{try{var t,n;let i=l().cloneDeep(eB);for(let e of Object.keys(eB))i[e]=Array.isArray(eB[e].response)?eB[e].response.join():eB[e].response,Array.isArray(i[e])&&(i[e]=i[e].join()),i[e]="".concat(i[e]);let o={};for(let[e,n]of e1.entries())o["attachment_".concat(e+1)]=null!==(t=n.content)&&void 0!==t?t:"";let r={...e,...i,...o},s=await a.Z.selfserve.fetchAutoSpec({payload:{promptBreakdown:r,numCompletions:null!==(n=null==eN?void 0:eN.numberOfCompletions)&&void 0!==n?n:1,history:ef,projectId:Y},taskCustomer:ty});s.length&&eW(s)}finally{eq(!1)}})()},handleCohereStreaming=async e=>{let t=l().get(eN,"chatApiAdditionalParams.client_configs",[]).map(e=>e.model);if(t.length!==eN.numberOfCompletions)throw Error("Model lengths does not equal to number of completions");e5(!0),tB(""),ev(n=>(0,S.produce)(n,n=>{n.interactions.push({prompt:e,completions:t.map(e=>({text:"",model:e}))})}));let n=(0,T.Kz)(ef.interactions),i="";if(tG){var o;let e=null!==(o=null==ee?void 0:ee.chat_history)&&void 0!==o?o:[];i=null==ee?void 0:ee.preamble_override;let t=e.map(e=>({role:"User"===e.user_name?N.MessageRole.User:"chatbot",content:e.text}));n.unshift(...t)}n.push({role:N.MessageRole.User,content:e});try{for(let e=0;e<t.length;e++){let o=t[e],a="",r={strategyName:k.StrategyName.CohereStrategy,params:{model:l().get(eN,"chatApiAdditionalParams.client_configs[".concat(e,"].model"),""),preamble_override:i,projectId:Y,stream:!0},messages:n},s=new AbortController;tz(s);try{await (0,g.ZP)(null,"internal/self_serve/rlhf/createCompletion",{method:"POST",body:r,fetchEventSourceOptions:{signal:s.signal,openWhenHidden:!0,onmessage:t=>{if("[DONE]"===t.data||"[IGNORE]"===t.data)return;let n=JSON.parse(t.data);if(n.error)throw Error(n.error);n.output&&(a+=n.output),t5(e,o,a)},onclose:()=>{t5(e,o,a)},onerror:e=>{throw x.Z.error("Cohere streaming error ".concat(e),{assignmentId:K,body:JSON.stringify(r)}),e}}})}catch(e){if("AbortError"!==e.name)throw e}if(0===a.length)throw Error("Empty response from Cohere.");1===t.length&&(null==eN?void 0:eN.editBestCompletion)&&tB(a)}}catch(e){throw setTimeout(()=>{ev(e=>(0,S.produce)(e,e=>{e.interactions=e.interactions.slice(0,-1)}))},40),e}finally{e5(!1)}},t5=o.useCallback(l().debounce((e,t,n)=>{ev(i=>(0,S.produce)(i,i=>{i.interactions[i.interactions.length-1].completions[e]={model:t,text:n}}))},20),[ev,S.produce]),handleFlamingoStreaming=async(e,t)=>{e5(!0);let n=[];for(let e of((0,c.invariant)(l().isArray(null==eN?void 0:eN.chatApiMultiEndpoints)&&(null==eN?void 0:eN.chatApiMultiEndpoints.length)),eN.chatApiMultiEndpoints))"https://api.openai.com/v1/chat/completions"!==e&&n.push(e.split("/")[3]);eN.chatApiMultiEndpoints.includes("https://api.openai.com/v1/chat/completions")&&n.push("openai");let i=await a.Z.selfserve.fetchJWTForStreaming();(0,c.invariant)(l().isString(i));let o=(0,T.Kz)(ef.interactions);o.push({role:N.MessageRole.User,content:e});let r=[];try{r=(await Promise.all(n.filter(e=>"openai"!==e).map(e=>(0,g.ZP)(null,"https://www.remotasks.com/flamingo-llm/".concat(e,"/completions_stream"),{method:"POST",headers:{"Content-Type":"application/json","x-scale-routing-jwt":"Bearer ".concat(i)},body:JSON.stringify({messages:o})})))).map(e=>e.id)}catch(e){x.Z.error("Failed to fetch model streaming ids")}eN.chatApiMultiEndpoints.includes("https://api.openai.com/v1/chat/completions")&&r.push("openai");let s=Array(n.length).fill("");for(let l=0;l<r.length;l++){let d=r[l],c=n[l],u="openai"===c,p={"Content-Type":"application/json"};u||(p["x-scale-routing-jwt"]="Bearer ".concat(i));let h=u?"internal/self_serve/rlhf/createCompletion":"https://www.remotasks.com/flamingo-llm/".concat(c,"/stream_completions/").concat(d);if(await a.Z.selfserve.fetchSSE(h,{method:"POST",headers:p,body:u?JSON.stringify({strategyName:k.StrategyName.OpenAIStrategy,params:{model:"gpt-4",temperature:0,max_tokens:1024,stream:!0},messages:o,projectId:Y}):void 0,fetchEventSourceOptions:{openWhenHidden:!0,onopen:async i=>{if(!i.ok)throw Error("Failed to open SSE connection");ev(i=>(0,S.produce)(i,i=>{let o=s.map((e,t)=>({model:n[t],text:e})),a={prompt:e,completions:o,promptBreakdown:t};0===l&&i.interactions.push(a)}))},onmessage:i=>{if(u){var o,a,r;if("[DONE]"===i.data)return;let e=JSON.parse(i.data);if(e.error)throw Error(e.error);(null===(r=e.choices)||void 0===r?void 0:null===(a=r[0])||void 0===a?void 0:null===(o=a.delta)||void 0===o?void 0:o.content)&&(s[l]+=e.choices[0].delta.content)}else s[l]=i.data;ev(i=>(0,S.produce)(i,i=>{let o=s.map((e,t)=>({model:n[t],text:e})),a={prompt:e,completions:o,promptBreakdown:t};tF?i.interactions[i.interactions.length-1]=a:i.interactions=[a]}))},onerror:t=>{throw x.Z.error("Flamingo streaming error ".concat(t),{assignmentId:K,prompt:e}),Error(t)},onclose:()=>{(0,f.Kz)(f.ju.RLHFResponseTime,{modelProvider:u?"openai":"flamingo",modelName:c,outputText:s[l],outputTextCount:-1,promptText:e,streamingId:d,event:"final_message"})}}}),0===s[l].length)throw Error("Empty response from endpoint ".concat(d))}e5(!1)},handleSimulateBenchmarkResponse=async(e,t,n)=>{e5(!0);let i=n.completions;ev(n=>(0,S.produce)(n,n=>{n.interactions.push({prompt:e,completions:i.map(e=>({model:e.model,text:""})),promptBreakdown:t})}));for(let e=0;e<i.length;e++){let t=i[e].text,n=1;for(;n<=t.length;)ev(i=>(0,S.produce)(i,i=>{i.interactions[0].completions[e].text=t.slice(0,t.length-n<10?t.length:n)})),n+=5,await (0,u.sleep)(2)}e5(!1)},[t7,ne]=(0,o.useState)(0);(0,o.useEffect)(()=>{eb&&ev(e=>(0,S.produce)(e,e=>{e.interactions[e.interactions.length-1]=l().cloneDeep(eb)}))},[t7]);let handleGenericStreaming=async e=>{(0,c.invariant)((null==eN?void 0:eN.chatApiEndpoints)&&(null==eN?void 0:eN.chatApiEndpoints.length)>0);let t=null==eN?void 0:eN.chatApiEndpoints,n=(0,T.Kz)(ef.interactions).map(e=>({role:e.role,content:e.content})),i="";if(tG){var o;let e=null!==(o=null==ee?void 0:ee.chat_history)&&void 0!==o?o:[];i=null==ee?void 0:ee.preamble_override;let t=e.map(e=>({role:"User"===e.user_name?N.MessageRole.User:"chatbot",content:e.text}));n.unshift(...t)}n.push({role:N.MessageRole.User,content:e});let a=[];for(let e of t){let{url:t,params:i}=e,o=(0,k.getStrategyFromUrl)(t),r={strategyName:o,params:i,messages:n,projectId:Y,assignmentId:K};a.push(r)}for(let e of a)e.strategyName===k.StrategyName.CohereStrategy&&l().set(e,"preamble_override",i);e5(!0),ev(n=>(0,S.produce)(n,n=>{n.interactions.push({prompt:e,completions:t.map(e=>({model:l().get(e,"params.model",e.url),text:""}))})})),ey({prompt:e,completions:t.map(e=>({model:l().get(e,"params.model",e.url),text:""}))});try{for(let e=0;e<t.length;e++){let n="",i=new AbortController;tz(i);try{await (0,g.ZP)(null,"internal/self_serve/rlhf/createCompletion",{signal:i.signal,method:"POST",body:a[e],fetchEventSourceOptions:{signal:i.signal,openWhenHidden:!0,onmessage:t=>{var i,o,a;if("[DONE]"===t.data||"[IGNORE]"===t.data)return;let r=JSON.parse(t.data);if(r.error)throw Error(r.error);r.output?n+=r.output:(null===(a=r.choices)||void 0===a?void 0:null===(o=a[0])||void 0===o?void 0:null===(i=o.delta)||void 0===i?void 0:i.content)?n+=r.choices[0].delta.content:x.Z.error("Unexpected parsing error during streaming",{assignmentId:K,parsed:r}),ey(t=>(0,S.produce)(t,t=>{t&&(t.completions[e].text=n)}))},onerror:n=>{throw x.Z.error("Failed to get streamed response from RLHF endpoint.",{e:n.toString(),endpoint:t[e].url,body:JSON.stringify(a[e]),assignmentId:K}),n}}}),ne(e=>e+1)}catch(e){if("AbortError"===e.name)ne(e=>e+1);else throw e}if(0===n.length)throw Error("ModelEndpointError: Empty response from endpoint ".concat(t[e].url))}}catch(e){throw setTimeout(()=>{ev(e=>(0,S.produce)(e,e=>{e.interactions=e.interactions.slice(0,-1)}))},40),e}finally{ey(void 0),e5(!1)}},handleSubmitPromptStreaming=async(e,t)=>{(null==eN?void 0:eN.chatApiEndpoints)&&(null==eN?void 0:eN.chatApiEndpoints.length)>0?await handleGenericStreaming(e):tq?await handleCohereStreaming(e):J&&await handleFlamingoStreaming(e,t),th(tp+1),(null==ek?void 0:ek.length)===0&&setSelectedCompletion(eN.numberOfCompletions-1)},submitPrompts=async(e,t,n)=>{var i,o;let r;if(tM&&(null==n?void 0:n.operation)!==k.BulbaBardEndpointOperation.BARD_SEARCH_OVERRIDE)return;let s={...ef,topic:t},d=e.join("\n"),c={};if(e.forEach((e,t)=>{c[eF[t]]=e}),(null==eN?void 0:eN.autoSpec)&&(eq(!0),getAutoSpec(c)),t_&&!td){try{await handleSubmitPromptStreaming(d,c)}catch(e){throw e.message.startsWith("ModelEndpointError")&&Q?P().error(e.message,{timeout:1e4}):P().error("Something went wrong. Please try again.",{timeout:1e4}),e}return}let u="";if(tW&&d.split(" ").length>=2e3)r={completions:[{model:"writeyourown",text:"(Input too long for model response. Please provide your own response.)"}]};else{let e={...eN.chatApiAdditionalParams||{},...n||{}},fetchSelfServeChatResponse=()=>a.Z.selfserve.fetchResponsesFromChatEndpoint({endpointUrl:eN.chatApiEndpoint,getCompletionsRequest:{numCompletions:eN.numberOfCompletions,nextPrompt:d,history:s,additionalParams:e,chatApiMultiEndpoints:null==eN?void 0:eN.chatApiMultiEndpoints},taskCustomer:ty,assignmentId:K});if(1===eN.numberOfCompletions&&1===eN.numberOfInteractions&&"https://34.105.44.178/api_v1"===eN.chatApiEndpoint&&tY){let[e,t]=await Promise.all([fetchSelfServeChatResponse(),(0,g.ZP)(null,"internal/self_serve/rlhf/bulbaBaselineResponse",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:K,userPrompt:d})})]);r=e,u=t.response}else r=await fetchSelfServeChatResponse()}if(td){await handleSimulateBenchmarkResponse(e.join("\n"),c,r);return}r.completions=r.completions.map(e=>({...e,text:e.text.trim()}));let p={prompt:d,completions:r.completions,promptBreakdown:c};u&&(p.baselineResponse=u),(null==r?void 0:null===(i=r.additionalData)||void 0===i?void 0:i.timeOfRequest)&&(p.timeOfRequest=new Date(r.additionalData.timeOfRequest)),(null==r?void 0:null===(o=r.additionalData)||void 0===o?void 0:o.operation)&&(p.metadata={operation:r.additionalData.operation}),G||1!==r.completions.length||0!==ek.length||(null==eN?void 0:eN.editBestCompletion)||(p.chosenCompletion=r.completions[0]),eZ(l().range(r.completions.length)),tB(void 0),G&&(th(tp+1),(null==ek?void 0:ek.length)===0&&setSelectedCompletion(eN.numberOfCompletions-1)),(null==eN?void 0:eN.isFair)&&eZ(l().range(r.completions.length)),ev({...s,interactions:[...s.interactions,p]}),ej(r.additionalData)},nt=!ea&&!ed||1===ef.interactions.length&&0===eA.length;(0,o.useEffect)(()=>{eY(e=>e+1)},[tS]);let getCritique=()=>{(async()=>{eJ(!0);try{var e,t;let n=l().cloneDeep(eB);for(let e of Object.keys(eB))n[e]=Array.isArray(eB[e].response)?eB[e].response.join():eB[e].response,Array.isArray(n[e])&&(n[e]=n[e].join()),n[e]="".concat(n[e]);let i={};for(let[e,n]of e1.entries())i["attachment_".concat(e+1)]=null!==(t=n.content)&&void 0!==t?t:"";let o=tT>0?tT-1:0,r={...null===(e=ef.interactions[o])||void 0===e?void 0:e.promptBreakdown,...n,...i},s=await a.Z.selfserve.fetchAutoCritique({payload:{promptBreakdown:r,answer:tS,projectId:Y,history:ef.interactions.slice(0,o)},taskCustomer:ty});if(s.length){let e=s.split(/\r?\n|\r|\n/g).filter(e=>!e.startsWith("Example response:")).join("\n");e_(e),e0(!0),setTimeout(()=>e0(!1),5e3)}}finally{eY(0),eJ(!1)}})()};return(0,i.jsx)(R.Provider,{value:{enabled:ei,readOnly:ea,isReview:es,history:ef,setEnabled:eo,setReadOnly:e=>{if(G){if(e&&tp<0&&th(0),ea&&!e){let e={...ef};tm||tf(!0),ev(e),tb(!0)}else!ea&&e&&(ev(eh),tb(!1));er(e);return}ea&&!e?ec(!0):!ea&&e&&(ev(eh),ep(0),ec(!1)),er(e)},setIsReview:el,nextInteraction:eu<ef.interactions.length?()=>{ed?submitChatbotForm():ep(eu+1)}:void 0,previousInteraction:eu>=0?()=>{eu>=0&&ep(eu-1)}:void 0,jumpToEnd:eu<ef.interactions.length?()=>{ep(ef.interactions.length||-1)}:void 0,transcript:eg,submitPrompts,setTaxonomy:(e,t,n)=>{eV(e.find(e=>e.field_id===ta&&e.type===r.TextCollectionFieldType.Text)),eC((e=e.filter(e=>e.field_id!==ta)).filter(e=>!(null==n?void 0:n.includes(e.field_id))&&!t.includes(e.field_id))),eI(e.filter(e=>null==n?void 0:n.includes(e.field_id))),eT(e.filter(e=>t.includes(e.field_id)))},fieldsToShow:eP,rlhfParams:eN,setRLHFParams:eR,submitChatbotForm,submitChatbotFormAsync,rangedMultiTurnEndConversation:tH,formatSections:e=>{if(e8)return[(0,i.jsxs)("div",{style:{marginLeft:"8px"},children:[(0,i.jsx)("h3",{children:"Please wait, the model is generating responses. "}),!!eU.length&&(0,i.jsx)("div",{style:{margin:"0 8px",padding:8,whiteSpace:"pre-wrap",backgroundColor:"rgba(144, 202, 249, .2)",borderRadius:8},children:eU})]},"default")];if(G)return formatSectionsV2(e);if(null==eN?void 0:eN.isFair)return e=formatSectionsFair(e),te&&(e=formatSectionsAutoCritique(e)),e;let t=ef.interactions;if(0===e.length)return[(0,i.jsx)("div",{style:{marginLeft:"8px"},children:(0,i.jsx)("h3",{children:"Please type a prompt in the left textbox"})},"default")];if(ek.length>0&&!tM){let n=eN.numberOfCompletions;(null==eN?void 0:eN.chatApiMultiEndpoints)&&(null==eN?void 0:eN.chatApiMultiEndpoints.length)>0&&(n=null==eN?void 0:eN.chatApiMultiEndpoints.length);for(let o=0;o<n;o++){let n=o+1,a=o*ek.length+o;0===o?e.splice(a,0,(0,i.jsx)("div",{children:(0,i.jsxs)("h3",{children:["Answer the following questions about ",t0," ",t$?t.length:n,":"]})})):e.splice(a,0,(0,i.jsxs)("div",{children:[(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)("hr",{}),(0,i.jsxs)("h3",{children:["Answer the following questions about ",t0," ",t$?t.length:n,":"]})]}))}eN&&eN.numberOfCompletions>1&&e.splice(e.length-1,0,(0,i.jsxs)("div",{children:[(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)("hr",{})]}))}return eN&&te&&(e=formatSectionsAutoCritique(e)),e},isDone:tM,rangedMultiTurnCanSubmit:tV,annotations:eB,setAnnotations:eM,taskCustomer:ty,setTaskCustomer:tw,candidateBestCompletion:tj,selectedCompletion:tc,setSelectedCompletion,useChatbotV2:!!G,selectedInteraction:tp,setSelectedInteraction:th,onPerConvoField:tm,gotoSelectedInteraction:e=>{e8||((e===tR||e===ef.interactions.length&&tt)&&eA?(tg(!0),tf(!1),th(e)):(tg(!1),th(e),tf(!0)),setSelectedCompletion(0))},overrideViewFields:tx,perConversationFields:eA,perResponseFields:ek,perTurnFields:eS,erroredItems:t4,checkIfItemBlank:t2,isMakingChanges:tv,hideReviewNav:nt,hideNextButton:tU,nextButtonDisabled:t3,shouldUpdateBestCompletion:tP,setShouldUpdateBestCompletion:tD,chatBoxTexts:eF,setChatBoxTexts:eE,canResetChat:tX,resetChat:()=>{((null==eN?void 0:eN.isFair)||tF||tX)&&(eZ([]),ev({interactions:[]}),setSelectedCompletion(0),G&&th(-1))},isStreaming:e8,autoSpecText:eU,setAutoSpecText:eW,autoSpecLoading:eG,setAutoSpecLoading:eq,critiqueText:eX,setCritiqueText:e_,critiqueResponseChanged:eQ,setAttachments:e2,isRangedMultiTurn:tF,handleUndo:tL,stopStreaming:Q?tO:void 0,startBranchConversation:()=>{if(!G&&!ea&&ed||G&&tv){ec(!1);let e={...ef,interactions:ef.interactions.slice(0,G?tp+1:eu+1)},t=e.interactions[e.interactions.length-1];e.interactions[e.interactions.length-1]={...t,chosenCompletion:void 0,displayedCompletion:void 0},G&&(tb(!1),tf(!1)),ev(e)}},reviewNoBranching:ed,candidateEditedPrompt:tC,interactionNumber:eu,hasItemsOnRankingEditPage:t8,additionalResponseData:ew,setAdditionalResponseData:ej,useEditPrompt:X,skipPromptValidation:!!Q,streamingInteraction:eb,resetLastInteraction:tE},children:W})},useChatbotContext=()=>(0,o.useContext)(R)},537441:function(e,t,n){"use strict";n.d(t,{B:function(){return useLLMHelper},T:function(){return LLMHelperProvider}});var i=n(824246),o=n(827378),a=n(789018),r=n(320280),s=n(298784),l=n.n(s);let d=o.createContext({enabled:!1,setEnabled:()=>{},formatSections:e=>e,autoCritique:!1,setAutoCritique:()=>{},autoSpec:!1,setAutoSpec:()=>{},autoSpecText:"",setAutoSpecText:()=>{},autoSpecLoading:!1,setAutoSpecLoading:()=>{},critiqueText:"",setCritiqueText:()=>{},critiqueResponseChanged:0,taskCustomer:"",setTaskCustomer:()=>{},setPromptVariables:()=>{},setAnnotations:e=>{},setAttachments:()=>{},isDone:!1,aiAssistantEnabled:!1,setAiAssistantEnabled:()=>{},loadingAiAssistantPrompts:!1,aiAssistantPrompts:{},getAiAssistantResponse:async()=>"",activeIndices:{},setActiveIndices:()=>{},attemptTexts:{},setAttemptTexts:()=>{},responseNotDifferentEnough:[],setResponseNotDifferentEnough:()=>{},setCurrentReviewLevel:()=>{},setIsReviewMode:()=>{}}),c={interactions:[]},LLMHelperProvider=e=>{let{children:t,projectId:n}=e,[s,u]=(0,o.useState)(!1),[p,h]=(0,o.useState)({}),[m,g]=(0,o.useState)([]),[x,f]=(0,o.useState)(!1),[v,b]=(0,o.useState)(!1),[y,w]=(0,o.useState)(""),[j,k]=(0,o.useState)(!1),[C,A]=(0,o.useState)(!1),[T,S]=(0,o.useState)(0),[I,P]=(0,o.useState)(""),[D,N]=(0,o.useState)(!1),[R,B]=(0,o.useState)(""),[M,F]=(0,o.useState)({}),[E,L]=(0,o.useState)(!1),[Z,z]=(0,o.useState)(!1),[O,H]=(0,o.useState)({}),[V,U]=(0,o.useState)({}),[W,G]=(0,o.useState)({}),[q,K]=(0,o.useState)([]),[J,Q]=(0,o.useState)(),[Y,X]=(0,o.useState)(!1),_=(0,o.useCallback)(e=>{(async()=>{try{k(!0);let t=await a.Z.selfserve.fetchAutoSpec({payload:{promptBreakdown:e,numCompletions:1,projectId:n,history:c},taskCustomer:R});t.length&&w(t)}finally{k(!1)}})()},[n,R]);(0,o.useEffect)(()=>{v&&!y.length&&_(M)},[v,y,_,M]),(0,o.useEffect)(()=>{S(e=>e+1)},[p]);let getAutoCritique=()=>{(async()=>{A(!0);try{var e;let t=await a.Z.selfserve.fetchAutoCritique({payload:{promptBreakdown:M,numCompletions:1,projectId:n,history:null!==(e=c.interactions)&&void 0!==e?e:[]},taskCustomer:R});if(t.length){let e=t.split(/\r?\n|\r|\n/g).filter(e=>!e.startsWith("Example response:")).join("\n");P(e),N(!0),setTimeout(()=>N(!1),5e3)}}finally{S(0),A(!1)}})()};(0,o.useEffect)(()=>{let e=l().cloneDeep(p);for(let t of Object.keys(p))e[t]=Array.isArray(p[t].response)?p[t].response.join():p[t].response,Array.isArray(e[t])&&(e[t]=e[t].join()),e[t]="".concat(e[t]);let t={};for(let[e,i]of m.entries()){var n;t["attachment_".concat(e+1)]=null!==(n=i.content)&&void 0!==n?n:""}F({...t,...e})},[p,m]);let $=(0,o.useMemo)(()=>(!x||!!I.length)&&(!x||!D),[x,D,I.length]);(0,o.useEffect)(()=>{E&&(async()=>{try{z(!0);let i=await a.Z.selfserve.fetchAiAssistantPrompts(n);if("number"==typeof J)for(let n of Object.keys(i)){var e,t;!(Y&&(null===(e=i[n].reviewLevels)||void 0===e?void 0:e.length)&&i[n].reviewLevels.includes(0))&&(null===(t=i[n].reviewLevels)||void 0===t?void 0:t.length)&&!i[n].reviewLevels.includes(J)&&delete i[n]}Object.keys(i).length&&H(i)}finally{z(!1)}})()},[E,n,J]);let getAiAssistantResponse=async e=>{let t=O[e].system,n=O[e].user;if(t&&n){for(let[e,a]of m.entries()){var i,o;t=t.replace("{{attachment_".concat(e+1,"}}"),null!==(i=a.content)&&void 0!==i?i:""),n=n.replace("{{attachment_".concat(e+1,"}}"),null!==(o=a.content)&&void 0!==o?o:"")}let{content:e}=await a.Z.selfserve.askGPT({promptSystem:t,promptUser:n,options:{model:"gpt-4"}});return e}return""};return(0,i.jsx)(d.Provider,{value:{enabled:s,setEnabled:u,formatSections:e=>{if(v&&y.length&&!j&&e.splice(0,0,(0,i.jsx)("div",{children:!!y.length&&(0,i.jsx)("div",{style:{margin:"0 8px",padding:8,whiteSpace:"pre-wrap",backgroundColor:"rgba(144, 202, 249, .2)",borderRadius:8},children:y})})),x&&e.splice(e.length,0,(0,i.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:(0,i.jsx)(r.zx,{disabled:C||!T,onClick:getAutoCritique,style:{marginLeft:"auto",marginRight:16},children:C?"Critiquing...":"Get Critique"})})),x&&I.length){let t=I.toLowerCase().startsWith("severity: critical")||I.toLowerCase().startsWith("severity: major"),n=I.toLowerCase().includes("rate limit exceeded");e.splice(e.length-1,0,(0,i.jsx)("div",{style:{margin:"0 8px 8px 8px",padding:8,whiteSpace:"pre-wrap",backgroundColor:t?"rgba(229, 115, 115, .2)":"rgba(255, 183, 77, .2)",borderRadius:8},children:n?"Critique unavailable due to too many concurrent requests":I}))}return e},autoCritique:x,setAutoCritique:f,autoSpec:v,setAutoSpec:b,autoSpecText:y,setAutoSpecText:w,autoSpecLoading:j,setAutoSpecLoading:k,critiqueText:I,setCritiqueText:P,critiqueResponseChanged:T,taskCustomer:R,setTaskCustomer:B,setPromptVariables:F,setAnnotations:h,setAttachments:g,isDone:$,aiAssistantEnabled:E,setAiAssistantEnabled:L,loadingAiAssistantPrompts:Z,aiAssistantPrompts:O,getAiAssistantResponse,activeIndices:V,setActiveIndices:U,attemptTexts:W,setAttemptTexts:G,responseNotDifferentEnough:q,setResponseNotDifferentEnough:K,setCurrentReviewLevel:Q,setIsReviewMode:X},children:t})},useLLMHelper=()=>(0,o.useContext)(d)},561924:function(e,t,n){"use strict";n.d(t,{T:function(){return useCommonFeatureFlags}});var i=n(837553),o=n(353600),a=n(851386),r=n(469906),s=n(298784),l=n.n(s),d=n(335855);let useCommonFeatureFlags=e=>{var t,n,s,c,u;let{projectId:p,params:h,type:m}=null!=e?e:{},g=(0,i.ZP)("2d-videoannotation-lite-mode",{projectId:p},!1),x=(0,i.ZP)("2d-videoannotation-lite-mode-settings",{projectId:p},!1),f=(0,i.ZP)("2d-semseg-ux-revamp",{projectId:p},!1),v=(0,i.ZP)("sidebar-only-render-visible",{projectId:p},!1),b=(0,i.ZP)("linked-annotation-grouping",{projectId:p},!1),y=(0,i.ZP)("unified-sidebar-no-debounce",{projectId:p},!1),w=(0,i.ZP)("attribute-search-select",{projectId:p},!1),j=(0,i.ZP)("disable-autosave",{projectId:p},!1),k=(0,i.ZP)("2d-allow-force-merge",{projectId:p},!1),C=(0,i.ZP)("2d-allow-annotation-multiple-frame-update",{projectId:p},!1),A=(0,i.ZP)("gis-common-features",{projectId:p},!1)||(0,o.isGisParams)(h),T=!!localStorage.useNewLinkList,S=(0,i.ZP)("camera-arrows",{projectId:p},!1)||A||!!localStorage.cameraArrows,I=A&&!!(null==h?void 0:h.can_edit_ground_mesh),P=!!l().find(null!==(s=null===(t=null==e?void 0:e.params)||void 0===t?void 0:t.context_attachments)&&void 0!==s?s:[],e=>e.type===d.ContextAttachmentType.GIS_PHOTOCOLOR_PNG_V1),D=(!!(0,i.ZP)("drivable-region-zones",{projectId:p},!1)||localStorage.canGenerateDrivableRegionZones)&&!!e,N=(!!(0,i.ZP)("drivable-regions",{projectId:p},!1)||localStorage.canGenerateDrivableRegions)&&!!e,R=localStorage.logVerboseErrors,B=(0,i.ZP)("allow-extended-semseg-labels",{projectId:p},!1),M=(0,i.ZP)("should-skip-ar-validation",{projectId:p},!1),F=(0,i.ZP)("new-linter-panel",{projectId:p},!1)||A||!!localStorage.experimentalLinterAccess,E=!!(0,i.ZP)("imageannotation-new-lint-panel",{projectId:p},!1)&&!!e&&!!(0,a.isImageAnnotation)(e),L=(0,i.ZP)("use-old-annotation-sidebar",{projectId:p},!1)||!!localStorage.showOldAnnotationSidebar,Z=(0,i.ZP)("use-lint-autofix",{projectId:p},!1)||!!localStorage.useLintAutofix,z=(0,i.ZP)("limit-prefetched-images",{projectId:p},!1),O=(0,i.ZP)("limit-prefetched-large-images",{projectId:p},!1),H=(0,i.ZP)("videoannotation-attribute-playback-bars",{projectId:p},!1),V=(0,i.ZP)("pre-render-frames",{projectId:p},!1),U=(0,i.ZP)("disable-tasker-prefetch-limit",{projectId:p},!1),W=(0,i.ZP)("download-video",{projectId:p},!1)||!!localStorage.downloadVideo,G=(0,i.ZP)("enable-auto-segment-polygon-tool",{projectId:p},!1)||!!(null==e?void 0:e.isScaleStudio)&&(0,a.isImageAnnotation)(e)||!!localStorage.enableAutoAnnotatePolygonTool,q=(0,i.ZP)("enable-autoannotate-in-browser",{projectId:p},!1)||!!localStorage.enableAutoAnnotateInBrowser,K=(0,i.ZP)("enable-auto-segment-line-tool",{projectId:p},!1)||!!localStorage.enableAutoSegmentLineTool,J=(0,i.ZP)("enable-auto-annotate-box-tool",{projectId:p},!1)||!!localStorage.enableAutoAnnotateBoxTool,Q=(0,i.ZP)("use-autoflag-sidebar-tools",{projectId:p},!1)||!!localStorage.useAutoflagSidebarTools,Y=(0,i.ZP)("2d-sidebar-unification",{projectId:p},!1),X=(0,i.ZP)("2d-sidebar-collapse",{projectId:p},!1),_=(0,i.ZP)("use-thin-link-lines",{projectId:p},!1),$=!!(null==h?void 0:h.active_prelabels),ee=(0,i.ZP)("enable-saving-pins-in-url",{projectId:p},!1)&&(null==e?void 0:e.isQueue),et=(0,i.ZP)("enable-2d-mouse-rotation",{projectId:p},!1),en=(0,i.ZP)("image-rendering-auto",{projectId:p},!1)||!!localStorage.imageRenderingAuto,ei=(0,i.ZP)("context-attachment-alignment",{projectId:null==e?void 0:e.projectId},!1),eo=(0,i.ZP)("use-window-camera-context",{projectId:null==e?void 0:e.projectId},!1)||!!localStorage.useWindowCameraContext,ea=(0,i.ZP)("gis-show-osm-image",{projectId:p},!1),er=(0,i.ZP)("enable-lidartopdown-zeditor",{projectId:p},!1),es=(0,i.ZP)("force-imageannotation-lite-ui",{projectId:p},!1),el=(0,i.ZP)("virtualize-imageannotation-list",{projectId:p},!1),ed=(0,i.ZP)("gis-visualize-ground-metrics",{projectId:p},!1),ec=null!==(c=(0,i.ZP)("2d-vpb-waveform",{projectId:p},!1))&&void 0!==c&&c,eu=null!==(u=(0,i.ZP)("allow-out-of-viewport-vertices",{projectId:p},!1))&&void 0!==u&&u,ep=(0,i.ZP)("2d-enable-keyframes",{projectId:p},!1)||!!localStorage.experimentalEnableKeyframes,eh=(0,i.ZP)("2d-enable-keyframes-jumping",{projectId:p},!1),em=(0,i.ZP)("auto-smart-tracking",{projectId:p},!1),eg=(0,i.ZP)("enable-ml-interpolation",{projectId:p,taskType:m},!1)||!!localStorage.useSmartTracking||em||!!(null==h?void 0:null===(n=h.tracking_prelabels)||void 0===n?void 0:n.annotations),ex=(0,i.ZP)("disable-interpolation",{projectId:p},!1),ef=(0,i.ZP)("lidarlinking-minimap",{projectId:p},!1),ev=(0,i.ZP)("2d-imageannotation-rescaled-zoom",{projectId:p},!1),eb=!!(0,i.ZP)("new-label-selector",{projectId:null==e?void 0:e.projectId},!1),ey=!!(0,i.ZP)("2d-emphasize-first-point",{projectId:null==e?void 0:e.projectId},!1),ew=(0,i.ZP)("vpb-grammar-check-annotation-attributes",{projectId:p},!1),ej=(0,i.ZP)("color-polygon-points",{projectId:null==e?void 0:e.projectId},!1)?["blue","green","yellow","red","orange","indigo"]:void 0,ek=(0,i.ZP)("event-attributes-optional-by-default",{projectId:null==e?void 0:e.projectId},!1),eC=(0,i.ZP)("right-align-text",{projectId:null==e?void 0:e.projectId},!1,e&&(0,r.o)(e)),eA=(0,i.ZP)("skip-annotation-attribute-choice-validation",{projectId:null==e?void 0:e.projectId},!1),eT=(0,i.ZP)("category-field-section-wrapper",{projectId:null==e?void 0:e.projectId},!1),eS=(0,i.ZP)("enable-attribute-input-in-label-selector",{projectId:null==e?void 0:e.projectId},!1),eI=(0,i.ZP)("color-by-annotation-attribute",{projectId:null==e?void 0:e.projectId},!1),eP=(0,i.ZP)("delimited-attribute-labels",{projectId:null==e?void 0:e.projectId},!1),eD=(0,i.ZP)("afm-superpixel",{projectId:null==e?void 0:e.projectId},!1),eN=(0,i.ZP)("enable-geocontext-sidebar",{projectId:null==e?void 0:e.projectId},!1);return{gisCommonFeatures:A,useNewLinkList:T,hasPhotocolorContext:P,canGenerateDrivableRegionZones:D,canGenerateDrivableRegions:N,logVerboseErrors:R,canUseCameraArrows:S,canAccessNewLinterPanel:F||E,shouldSkipLTDValidation:M,showOldAnnotationSidebar:L,useLintAutofix:Z,limitPrefetchedImages:z,limitPrefetchedLargeImages:O,prerenderFrames:V,disableTaskerPrefetchLimit:U,videoannotationAttributePlaybackBars:H,downloadVideo:W,enableAutoAnnotatePolygonTool:G,enableAutoAnnotateInBrowser:q,enableAutoAnnotateBoxTool:J,enableAutoSegmentLineTool:K,enableDragToRevealPrelabelsTool:$,enableSavingPinsInUrl:ee,enable2dMouseRotation:et,useAutoflagSidebarTools:Q,useUnifiedSidebar:Y,enableCollapsibleSidebar:X,useThinLinkLines:_,imageRenderingAuto:en,alignmentSettingEnabled:ei,useWindowCameraContext:eo,visualizeGroundMetricsImages:ed,gisShowOsmImage:ea,enableLidarTopdownZEditor:er,forceImageAnnotationLiteUI:es,virtualizeImageAnnotationList:el,canEditGroundMesh:I,activateAudioWaveformFlag:ec,allowOutOfViewportVertices:eu,enableKeyframes:ep,enableKeyframesJumping:eh,useSmartTracking:eg,disableInterpolation:ex,canAccessLidarLinkingMinimap:ef,enableRescaledZoom:ev,shouldUse2DSemsegUXRevamp:f,sidebarOnlyRenderVisible:v,disableAutosave:j,useNewLabelSelector:eb,emphasizeFirstPolygonPoint:ey,shouldAllowExtendedSemsegLabels:B,canUseGrammarCheck:ew,shouldUseVideoAnnotationLiteMode:g,shouldUseVideoAnnotationLiteModeSettings:x,allowForceMerge:k,allowAnnotationMultipleFrameUpdate:C,useAutoSmartTracking:em,colorPolygonPoints:ej,linkedAnnotationGrouping:b,unifiedSidebarNoDebounce:y,attributeSearchSelect:w,eventAttributesOptionalByDefault:ek,enableAttributeInputInLabelSelector:eS,rightAlignText:eC,skipAnnotationAttributeChoiceValidation:eA,categoryFieldSectionWrapper:eT,colorByAnnotationAttribute:eI,delimitedAttributeLabels:eP,useAFMSuperpixel:eD,enableGeocontextSidebar:eN}}},153454:function(e,t,n){"use strict";var i=n(827378);n(533919);var o=n(348758);t.Z=function(e,t){let{zoomSensitivity:n=.005,enableUnfocusedZoom:a=!1,enableUnfocusedPan:r=!1,autofocusOnZoom:s=!1,stopPropagation:l=!0,zoomOnScroll:d=!1,zoomOnAlt:c=!1}=null!=t?t:{},[u,p]=(0,i.useState)(e),[h,m]=(0,i.useState)(e),[g,x]=(0,i.useState)(e),updateViewport=(t,n,i)=>{let a={left:t-(t-u.left)*i,top:n-(n-u.top)*i,width:u.width*i,height:u.height*i};(0,o.sO)(a,e),p(a)},f=i.useCallback(()=>{updateViewport(u.left+u.width/2,u.top+u.height/2,1.25)},[u]),v=i.useCallback(()=>{updateViewport(u.left+u.width/2,u.top+u.height/2,.75)},[u]),b=i.useCallback(e=>{var t,n,i;let m;let f=e.currentTarget,v=f.getBoundingClientRect();v.width<g.width&&x(v);let b=null!=g?g:v;if(e.ctrlKey||d||e.altKey&&c){if(!(null===(t=document.activeElement)||void 0===t?void 0:t.contains(f))&&!a)return;(null===(n=document.activeElement)||void 0===n?void 0:n.contains(f))||!s||f.focus();let i=u.left+u.width*(e.clientX-b.left)/b.width,o=u.top+u.height*(e.clientY-b.top)/b.height,r=Math.exp(.005*e.deltaY);m={left:i-(i-u.left)*r,top:o-(o-u.top)*r,width:u.width*r,height:u.height*r}}else{if(!(null===(i=document.activeElement)||void 0===i?void 0:i.contains(f))&&!r)return;let t=u.height/b.height;m={left:u.left+(e.shiftKey?e.deltaX+e.deltaY:e.deltaX)*t,top:u.top+(e.shiftKey?0:e.deltaY)*t,width:u.width,height:u.height}}l&&e.stopPropagation(),(0,o.sO)(m,h),p(m)},[e,u,p,s,r,a,l,n,d,c]),y="".concat(u.left," ").concat(u.top," ").concat(u.width," ").concat(u.height);return{viewport:u,setViewport:p,handleWheel:b,viewbox:y,zoomOut:f,zoomIn:v,setInitialViewport:e=>{p(e),x(e),m(e)}}}},829389:function(e,t,n){"use strict";var i=n(827378),o=n(83473);t.Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(0,i.useCallback)(e=>(e.preventDefault(),e.returnValue=t,t),[t]);(0,o.Z)("beforeunload",e?n:void 0,window)}},120440:function(e,t,n){"use strict";var i=n(298784),o=n.n(i),a=n(827378),r=n(886917),s=n(716124),l=n(115125),d=n(599789),c=n(167469),u=n(837553),p=n(561924);t.Z=e=>{var t,n,i,h,m,g;let x=(0,p.T)(e),f=!o().includes(d.twoDTypes,null==e?void 0:e.type)&&(null==e?void 0:e.type)!==c.TaskType.DocumentTranscription&&(null==e?void 0:e.type)!==c.TaskType.Chat&&(null==e?void 0:e.type)!==c.TaskType.ChatExperimental&&(null==e?void 0:e.type)!==c.TaskType.ChatV2,v=(0,u.o5)("can-leave-inline-comments",{},{shortCircuit:f})||(null==e?void 0:e.isScaleStudio),b=(0,u.o5)("can-reject-with-changes",{projectId:null==e?void 0:e.projectId},{shortCircuit:f}),y=e&&(b||!!localStorage.canRejectWithChanges),w=(0,r.h)("internal/config/".concat(null==e?void 0:e.projectId),{shouldShortCircuit:f}),isAtLeastReviewLevel=(e,t)=>-1===e||(null==t?void 0:t.reviewLevel)&&t.reviewLevel>=e||t&&e===d.ReviewLevel.QIRLeadAuditor&&t.reviewLevel===d.ReviewLevel.QIRLeadAuditor||t&&e===d.ReviewLevel.QIRAuditor&&(t.reviewLevel===d.ReviewLevel.QIRAuditor||t.reviewLevel===d.ReviewLevel.QIRLeadAuditor),j=null!==(m=null===(t=w.response)||void 0===t?void 0:t.spotterReviewLevel)&&void 0!==m?m:d.defaultSpotterReviewLevel,k=s.IS_FEDERAL&&(v||isAtLeastReviewLevel(null!==(g=null===(n=w.response)||void 0===n?void 0:n.inlineCommentsFromReview)&&void 0!==g?g:10,e)||(null===(i=w.response)||void 0===i?void 0:i.isSpotterEnabled)&&isAtLeastReviewLevel(j,e)&&(null===(h=w.response)||void 0===h?void 0:h.inlineCommentsEnabled)||!!localStorage.canLeaveInlineComments),C=(0,a.useContext)(l.ZP),A={loggedUserId:null==C?void 0:C._id},T={...x,canRejectWithChanges:y,canLeaveInlineComments:k,...null==e?void 0:e.featureFlags};if(e)return{...e,...A,featureFlags:T,config:w.response,projectConfig:w.response}}},206359:function(e,t,n){"use strict";n.d(t,{Z:function(){return getTaskTypeSelectOptions}});var i=n(298784),o=n.n(i),a=n(167469);function getTaskTypeSelectOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o().identity;return o().values(a.TaskType).map(t=>({label:e(t),value:t}))}},533919:function(){if("undefined"!=typeof document){let e=["touchstart","touchmove","touchend","touchcancel","wheel"],t=document.addEventListener.bind(document);document.addEventListener=(n,i,o,a)=>{let r=o;return e.includes(n)&&("boolean"==typeof o?r={capture:o,passive:!1}:"object"==typeof o&&(r={passive:!1,...o})),t(n,i,r,a)};let n=document.removeEventListener.bind(document);document.removeEventListener=(t,i,o)=>{let a=o;return e.includes(t)&&("boolean"==typeof o?a={capture:o,passive:!1}:"object"==typeof o&&(a={passive:!1,...o})),n(t,i,a)}}},777265:function(){},686788:function(){},502754:function(){},156391:function(){},505001:function(){}}]);