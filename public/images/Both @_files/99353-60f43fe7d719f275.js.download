"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99353],{767135:function(e,t,i){i.d(t,{AM:function(){return FeedbackInput},S5:function(){return FooterButton},sJ:function(){return ReviewFooter},tw:function(){return ReviewFooterInput},Uo:function(){return ReviewFooterLeft},iS:function(){return ReviewFooterRight}});var n=i(824246),s=i(674721),a=i.n(s),o=i(827378),r=i(792739),l=i(208528),d=i(716124),c=i(502218);let FeedbackInput=e=>{let{required:t=!0,commentsInput:i,handleCommentsChange:s}=e,[p,x]=(0,l.Z)(!1),u=(0,o.useCallback)(e=>e.stopPropagation(),[]),b=(0,o.useCallback)(e=>{e.preventDefault(),s(e.target.value)},[s]),m="Please add feedback".concat(t?"":" (Optional)"),h=(0,n.jsxs)("div",{className:a().dynamic([["6a4b2881bf27f206",[d.IS_FEDERAL?"360px":"120px"]]])+" inline-feedback",children:[(0,n.jsx)(c.Z,{rows:1,className:"inline-feedback__input",placeholder:m,defaultValue:i,onKeyDown:u,onChange:b,style:{paddingRight:"16px"}}),(0,n.jsx)("div",{onClick:x,className:a().dynamic([["6a4b2881bf27f206",[d.IS_FEDERAL?"360px":"120px"]]])+" inline-feedback__expand",children:(0,n.jsx)(r.FontAwesomeIcon,{icon:"expand"})}),(0,n.jsx)(a(),{id:"6a4b2881bf27f206",dynamic:[d.IS_FEDERAL?"360px":"120px"],children:".inline-feedback.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;min-width:".concat(d.IS_FEDERAL?"360px":"120px",";max-width:360px;margin-right:8px;margin-left:12px;position:relative}.inline-feedback__input.__jsx-style-dynamic-selector{width:100%;height:36px;border:1px solid rgba(0,0,0,.4);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;text-indent:10px;color:black;font-size:12px;font-weight:700;padding-right:36px;-webkit-transition:.1s all;-moz-transition:.1s all;-o-transition:.1s all;transition:.1s all}.inline-feedback__expand.__jsx-style-dynamic-selector{cursor:pointer;position:absolute;right:8px;top:10px;opacity:.5;-webkit-transition:-webkit-transform.2s;-moz-transition:-moz-transform.2s;-o-transition:-o-transform.2s;transition:-webkit-transform.2s;transition:-moz-transform.2s;transition:-o-transform.2s;transition:transform.2s}.inline-feedback__expand.__jsx-style-dynamic-selector:hover{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}.inline-feedback__input.__jsx-style-dynamic-selector:focus+.inline-feedback__expand.__jsx-style-dynamic-selector{opacity:.9}")})]}),f=(0,n.jsxs)("div",{className:a().dynamic([["9c4dc07b0e8ea1b1",[d.IS_FEDERAL?"360px":"120px"]]])+" popout-feedback--container",children:[(0,n.jsxs)("div",{className:a().dynamic([["9c4dc07b0e8ea1b1",[d.IS_FEDERAL?"360px":"120px"]]])+" popout-feedback",children:[(0,n.jsx)(c.Z,{placeholder:m,containerStyle:{flexGrow:1},style:{width:"100%",paddingTop:"24px",fontWeight:"bold"},onKeyDown:u,onChange:b,defaultValue:i,shouldFocus:!0}),(0,n.jsx)("div",{onClick:x,className:a().dynamic([["9c4dc07b0e8ea1b1",[d.IS_FEDERAL?"360px":"120px"]]])+" popout-feedback__collapse",children:(0,n.jsx)(r.FontAwesomeIcon,{icon:"compress"})})]}),(0,n.jsx)(a(),{id:"9c4dc07b0e8ea1b1",dynamic:[d.IS_FEDERAL?"360px":"120px"],children:".popout-feedback--container.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;min-width:".concat(d.IS_FEDERAL?"360px":"120px",";max-width:360px;margin-right:8px;position:relative}.popout-feedback.__jsx-style-dynamic-selector{position:absolute;bottom:4px;right:0;left:0;height:400px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;background:white;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 10px 20px rgba(0,0,0,.1);-moz-box-shadow:0 10px 20px rgba(0,0,0,.1);box-shadow:0 10px 20px rgba(0,0,0,.1);z-index:3}.popout-feedback__collapse.__jsx-style-dynamic-selector{cursor:pointer;position:absolute;right:8px;top:8px;opacity:.5;-webkit-transition:-webkit-transform.2s;-moz-transition:-moz-transform.2s;-o-transition:-o-transform.2s;transition:-webkit-transform.2s;transition:-moz-transform.2s;transition:-o-transform.2s;transition:transform.2s;font-size:20px}.popout-feedback__collapse.__jsx-style-dynamic-selector:hover{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}")})]});return p?f:h};var p=i(50682),x=i.n(p);let FooterButton=e=>(0,n.jsxs)("div",{"data-tip":e.tooltip,"data-for":"footer-button-".concat(e.type),className:"jsx-b630dad507cc1989 footer-button-container",children:[(0,n.jsx)(x(),{id:"footer-button-".concat(e.type)}),(0,n.jsx)("button",{onClick:e.isDisabled?()=>{}:e.onClick,tabIndex:e.tabIndex,disabled:e.isDisabled,className:"jsx-b630dad507cc1989 "+"footer-button ".concat(e.type," ").concat(e.isDisabled?"disabled":""),children:e.children}),(0,n.jsx)(a(),{id:"b630dad507cc1989",children:".footer-button-container.jsx-b630dad507cc1989{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;margin-left:12px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.footer-button.jsx-b630dad507cc1989{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:8px 16px;-webkit-box-shadow:2px 4px 8px rgba(0,0,0,.05);-moz-box-shadow:2px 4px 8px rgba(0,0,0,.05);box-shadow:2px 4px 8px rgba(0,0,0,.05);border:0;-webkit-border-radius:var(--border-radius);-moz-border-radius:var(--border-radius);border-radius:var(--border-radius);font-family:var(--font-family);font-weight:bold;font-size:14px;text-transform:uppercase;letter-spacing:.5px;cursor:pointer;-webkit-transition:box-shadow.2s;-moz-transition:box-shadow.2s;-o-transition:box-shadow.2s;transition:box-shadow.2s}.footer-button.disabled.jsx-b630dad507cc1989{pointer-events:none;opacity:.5}.footer-button.jsx-b630dad507cc1989:focus{outline:1px solid#aaa}.footer-button.jsx-b630dad507cc1989:hover{-webkit-box-shadow:2px 2px 8px rgba(0,0,0,.15);-moz-box-shadow:2px 2px 8px rgba(0,0,0,.15);box-shadow:2px 2px 8px rgba(0,0,0,.15)}.footer-button.submit.jsx-b630dad507cc1989{background:var(--link-color);color:white}.footer-button.accept.jsx-b630dad507cc1989{background:var(--color-accept);color:white}.footer-button.reject.jsx-b630dad507cc1989{background:var(--color-reject);color:white}.footer-button.edgecase.jsx-b630dad507cc1989{background:rgba(221,69,211,1);color:white}.footer-button.neutral.jsx-b630dad507cc1989{background:black;color:white}.footer-button.white.jsx-b630dad507cc1989{background:white;color:black}.footer-button.cancel.jsx-b630dad507cc1989{background:white;color:gray}.footer-button.rejectRapid.jsx-b630dad507cc1989{background:#e53935;color:white}.footer-button.acceptRapid.jsx-b630dad507cc1989{background:#479e6a;color:white}.footer-button.submitRapid.jsx-b630dad507cc1989{background:#039be5;color:white}.footer-button.editRapid.jsx-b630dad507cc1989{background:#e5e7eb;color:black}"})]});var u=i(60042),b=i.n(u);let ReviewFooter=e=>{let{isSubmitting:t,backgroundColor:i="#fff",children:s}=e,o=b()("review-footer",{"completed--flash":t});return(0,n.jsxs)("div",{style:{backgroundColor:i},className:"jsx-9bab1bb40b5e82b4 "+(o||""),children:[s,(0,n.jsx)(a(),{id:"9bab1bb40b5e82b4",children:".review-footer.jsx-9bab1bb40b5e82b4{border-top:1px solid var(--bg-gray-light-1);padding:20px 20px;width:100vw;-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}"})]})};let ReviewFooterInput=class ReviewFooterInput extends o.Component{render(){let{minWidth:e}=this.props;return(0,n.jsxs)("div",{className:a().dynamic([["5c128f97bff7b710",[e||"100"]]])+" review-footer__input",children:[(0,n.jsx)("form",{onSubmit:this.handleSubmit,className:a().dynamic([["5c128f97bff7b710",[e||"100"]]]),children:(0,n.jsx)("input",{type:"text",name:this.props.name,placeholder:this.props.placeholder,onKeyDown:e=>e.stopPropagation(),onChange:e=>this.props.handleCommentsChange(e.target.value),autoFocus:this.props.autoFocus,className:a().dynamic([["5c128f97bff7b710",[e||"100"]]])+" review-footer__comments"})}),(0,n.jsx)(a(),{id:"5c128f97bff7b710",dynamic:[e||"100"],children:".review-footer__input.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin-right:10px;min-width:".concat(e||"100","px}.review-footer__comments.__jsx-style-dynamic-selector{width:100%;height:36px;padding:12px;outline:0;border:0;-webkit-border-radius:var(--border-radius);-moz-border-radius:var(--border-radius);border-radius:var(--border-radius);-webkit-box-shadow:0 4px 10px rgba(0,0,0,.05);-moz-box-shadow:0 4px 10px rgba(0,0,0,.05);box-shadow:0 4px 10px rgba(0,0,0,.05);font-size:14px;font-weight:bold;-webkit-transition:.2s all;-moz-transition:.2s all;-o-transition:.2s all;transition:.2s all}.review-footer__comments.__jsx-style-dynamic-selector::-webkit-input-placeholder{font-weight:normal}.review-footer__comments.__jsx-style-dynamic-selector:-moz-placeholder{font-weight:normal}.review-footer__comments.__jsx-style-dynamic-selector::-moz-placeholder{font-weight:normal}.review-footer__comments.__jsx-style-dynamic-selector:-ms-input-placeholder{font-weight:normal}.review-footer__comments.__jsx-style-dynamic-selector::-ms-input-placeholder{font-weight:normal}.review-footer__comments.__jsx-style-dynamic-selector::placeholder{font-weight:normal}.review-footer__comments.__jsx-style-dynamic-selector:hover{cursor:pointer}.review-footer__comments.__jsx-style-dynamic-selector:hover,.review-footer__comments.__jsx-style-dynamic-selector:focus{-webkit-box-shadow:0 4px 10px rgba(0,0,0,.15);-moz-box-shadow:0 4px 10px rgba(0,0,0,.15);box-shadow:0 4px 10px rgba(0,0,0,.15)}")})]})}constructor(...e){super(...e),this.handleSubmit=e=>{e.preventDefault(),e.stopPropagation(),this.props.handleSubmit&&this.props.handleSubmit()}}};let ReviewFooterLeft=e=>{let{children:t}=e;return(0,n.jsxs)("div",{className:"jsx-cd8e88b65b7c0234 review-footer__intro",children:[t,(0,n.jsx)(a(),{id:"cd8e88b65b7c0234",children:".review-footer__intro.jsx-cd8e88b65b7c0234{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})},ReviewFooterRight=e=>{let{children:t}=e;return(0,n.jsxs)("div",{className:"jsx-c4a6464287fc1902 review-footer__actions",children:[t,(0,n.jsx)(a(),{id:"c4a6464287fc1902",children:".review-footer__actions.jsx-c4a6464287fc1902{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}},224185:function(e,t,i){var n=i(824246),s=i(674721),a=i.n(s);i(827378);var o=i(165168),r=i(596956);let ConfirmModal=e=>(0,n.jsxs)(o.u_,{isOpen:e.isOpen,onRequestClose:e.onReject,children:[(0,n.jsx)(o.xB,{onRequestClose:e.hideCloseButton?void 0:e.onReject,children:e.title}),e.children&&(0,n.jsx)(o.fe,{children:e.children}),(0,n.jsx)(o.mz,{children:(0,n.jsxs)("div",{className:"jsx-e5e0b6fd5cedda44 buttons",children:[(0,n.jsx)("div",{className:"jsx-e5e0b6fd5cedda44 button",children:(0,n.jsx)(r.zx,{type:e.rejectType,onClick:e.onReject,children:e.rejectText||"Cancel"})}),(0,n.jsx)("div",{className:"jsx-e5e0b6fd5cedda44 button",children:(0,n.jsx)(r.zx,{type:e.acceptType,onClick:e.onAccept,children:e.acceptText})}),(0,n.jsx)(a(),{id:"e5e0b6fd5cedda44",children:".buttons.jsx-e5e0b6fd5cedda44{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.buttons.jsx-e5e0b6fd5cedda44 .button.jsx-e5e0b6fd5cedda44{margin-right:16px}"})]})})]});ConfirmModal.defaultProps={acceptText:"Delete",acceptType:"danger"},t.Z=ConfirmModal},566664:function(e,t,i){var n=i(824246),s=i(298784),a=i.n(s),o=i(60042),r=i.n(o),l=i(827378),d=i(409631),c=i(614720),p=i(107873),x=i(320280),u=i(596956),b=i(501287),m=i(599789),h=i(167469),f=i(573685),g=i(424132),j=i(588634),v=i(239447),k=i(837553),y=i(35564),w=i(571085),C=i(642830),T=i(303044);t.Z=e=>{var t,i,s,o,f,j,S,N,z,I;let{assignment:B,corruptionsAuditCount:E,handleAuditResultChange:P,isCustomerQAMode:Z,isSolid:H=!1,isSubmitting:L,showAuditResultDropdown:W,toggleCorruptionsAudit:M,toggleShowingInstructions:O,toggleShowingShortcuts:D,toggleShowingExamples:U,toggleShowingSimilarExamples:V,auditFeedback:q,setAuditFeedback:Q,isInstructionTask:Y,setShowModal:X,isEdgeCaseTask:G,setShowEdgeCaseModal:K,darkMode:$,workerId:J,useV2:ee,toggleUseV2:et}=e,ei=_(),en=null===(S=e.canEdit)||void 0===S||S,[es,ea]=(0,l.useState)(!1),eo=(0,g.Sp)({storageName:"visualExamplesShoutout",showing:"once"}),er=(0,k.ZP)("visual-examples-project",{projectId:null!==(N=null===(t=B.project)||void 0===t?void 0:t.id)&&void 0!==N?N:null===(i=B.project)||void 0===i?void 0:i._id},!1),el=(0,k.ZP)("visual-examples-user",{userId:J},!1),ed=(0,k.ZP)("in_task_support_poc_dev_by_project",{projectId:null!==(z=null===(s=B.project)||void 0===s?void 0:s.id)&&void 0!==z?z:null===(o=B.project)||void 0===o?void 0:o._id},!1),ec=(0,g.Sp)({storageName:"similarExamplesShoutout",showing:"once"}),ep=(0,k.ZP)("similar-examples-project",{projectId:null!==(I=null===(f=B.project)||void 0===f?void 0:f.id)&&void 0!==I?I:null===(j=B.project)||void 0===j?void 0:j._id},!1),{width:ex}=(0,v.Z)(),handleAuditFeedbackChange=e=>{if(!Q)return;let t=[];e.category&&t.push("typePrimary","typeSecondary","hint"),e.typePrimary&&t.push("typeSecondary");let i=a().omit({...q,...e},t);Q(i)};return(0,n.jsxs)("div",{className:r()(ei.reviewAssignmentFooter,{"completed--flash":L,solid:H,[ei.darkMode]:!!$}),children:[es&&(0,n.jsx)(T.ZP,{openModal:es,taskId:B.id||B._id,userId:J,onClose:()=>ea(!1)}),Z?(0,n.jsx)("div",{children:(0,n.jsx)("strong",{children:"Was the task completed correctly?"})}):(0,n.jsxs)("div",{children:[O&&(0,n.jsxs)(p.zx,{onClick:O,style:A,children:["Instructions",ex>1400&&(0,n.jsxs)("span",{children:["\xa0\xa0\xa0",(0,n.jsx)(c.Z,{children:"i"})]})]}),D&&(0,n.jsxs)(p.zx,{onClick:D,style:A,children:["Shortcuts",ex>1400&&(0,n.jsxs)("span",{children:["\xa0\xa0\xa0",(0,n.jsx)(c.Z,{children:"/"})]})]}),U&&er&&el&&(0,n.jsx)(eo.Tooltip,{attachDisplay:"inline-block",arrow:"bottom",title:"Visual Examples Tool",content:"Click the Examples button to view relevant examples to help label this task!",children:(0,n.jsx)(p.zx,{onClick:U,style:A,children:"Examples"})}),V&&ep&&(0,n.jsx)(ec.Tooltip,{attachDisplay:"inline-block",arrow:"bottom",title:"Visual Examples Tool",content:"Click the Examples button to view relevant examples to help label this task!",children:(0,n.jsx)(p.zx,{onClick:V,style:A,children:"Examples"})})]}),(()=>{if(E)return(0,n.jsxs)(p.zx,{onClick:M,style:R,children:["\uD83D\uDE08\xa0",E]})})(),(()=>{var e;if(!W)return;let t={[m.AuditResult.Perfect]:"Perfect",[m.AuditResult.Good]:"Good",[m.AuditResult.Ok]:"OK",[m.AuditResult.Bad]:"Bad",[m.AuditResult.Terrible]:"Terrible"},i={[m.AuditResult.Good]:"Very Good",[m.AuditResult.Ok]:"Needs Improvement",[m.AuditResult.Bad]:"Bad"},s=a().keyBy(null==B?void 0:null===(e=B.params)||void 0===e?void 0:e.auditResultOptions),o=a().isEmpty(s)?"594ab13cf54210060008fb06"===B.user?t:i:s;return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("strong",{children:"Audit Result:\xa0\xa0"}),(0,n.jsxs)(u.Ph,{onChange:e=>P(e.target.value),children:[(0,n.jsx)("option",{value:""}),a().map(o,(e,t)=>(0,n.jsx)("option",{value:t,children:e},t))]})]})})(),(()=>{var e,t,i,s;let o=B.type===h.TaskType.LidarAnnotation||B.type===h.TaskType.ImageAnnotation||B.type===h.TaskType.LidarTopdown;if(!(W&&o))return;let r=null==q?void 0:q.category,l=null==q?void 0:q.typePrimary,d=null==q?void 0:q.typeSecondary,c=null==q?void 0:q.hint,p=null!==(t=b.aB[r])&&void 0!==t?t:[],m=null!==(i=null===(e=b.aB[r])||void 0===e?void 0:e[l])&&void 0!==i?i:[],f=null!==(s=b.Sp[r])&&void 0!==s?s:[];return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("strong",{className:ei.feedbackTemplateTitle,children:"Error Categories:"}),(0,n.jsxs)(u.Ph,{value:r,fullWidth:!0,className:ei.errorFeedback,onChange:e=>handleAuditFeedbackChange({category:e.target.value}),children:[(0,n.jsx)("option",{value:""}),a().map(b.UH,(e,t)=>(0,n.jsx)("option",{value:e,title:e,children:e},t))]}),(0,n.jsx)("strong",{className:ei.feedbackTemplateTitle,children:"Type:"}),(0,n.jsxs)(u.Ph,{value:l,fullWidth:!0,className:ei.errorFeedback,onChange:e=>handleAuditFeedbackChange({typePrimary:e.target.value}),children:[(0,n.jsx)("option",{value:""}),a().map(p,(e,t)=>(0,n.jsx)("option",{value:t,title:t,children:t},t))]}),(0,n.jsxs)(u.Ph,{value:d,fullWidth:!0,className:ei.errorFeedback,onChange:e=>handleAuditFeedbackChange({typeSecondary:e.target.value}),children:[(0,n.jsx)("option",{value:""}),a().map(null!=m?m:[],e=>(0,n.jsx)("option",{value:e,title:e,children:e},e))]}),(0,n.jsx)("strong",{className:ei.feedbackTemplateTitle,children:"Frames:"}),(0,n.jsx)("div",{className:ei.feedbackFramesContainer,children:(0,n.jsx)(x.oi,{fullWidth:!0,onChange:e=>handleAuditFeedbackChange({frames:e.target.value})})}),(0,n.jsx)("strong",{className:ei.feedbackTemplateTitle,children:"Hint:"}),(0,n.jsxs)(u.Ph,{value:c,fullWidth:!0,className:ei.errorFeedback,onChange:e=>handleAuditFeedbackChange({hint:e.target.value}),children:[(0,n.jsx)("option",{value:"",title:""}),a().map(f,e=>(0,n.jsx)("option",{value:e,title:e,children:e},e))]})]})})(),Y&&(0,n.jsx)(p.zx,{style:R,onClick:()=>X&&X(!0),children:"Instruction Feedback"}),G&&(0,n.jsx)(p.zx,{style:R,onClick:()=>K&&K(!0),children:"Edge Case Feedback"}),(0,n.jsx)(y.D,{bid:null==B?void 0:B.bid}),!a().isNil(ee)&&!a().isNil(et)&&(0,n.jsx)(p.zx,{onClick:et,style:F,children:ee?"Use legacy VideoAnnotation UI":"Use VideoAnnotation V2 UI"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[ed&&(0,n.jsx)(T.dj,{onClick:()=>{(0,w.Kz)(w.ju.InTaskSupportEvent,{userId:"12",taskId:"12",eventName:"Help Button Click"}),C.Z.info("InTaskSupportEvent Help Button Click"),ea(!0)}}),en&&(0,n.jsx)(d.Z,{...e})]})]})};let _=(0,f.ZL)({reviewAssignmentFooter:{display:"flex",alignItems:"center",maxHeight:"100%",maxWidth:"100%",flexWrap:"wrap",gap:12,padding:12,justifyContent:"space-between",backgroundColor:"#fff",borderTop:"1px solid rgba(0, 0, 0, 0.05)","&.solid":{position:"relative"}},darkMode:{backgroundColor:j.Z.colors.gray75,color:j.Z.colors.gray05},errorFeedback:{minWidth:"50px",maxWidth:"100px"},feedbackTemplateTitle:{whiteSpace:"nowrap",marginLeft:"10px",marginRight:"5px"},feedbackFramesContainer:{minWidth:"80px",maxWidth:"100px"},missingAnnotationsLabel:{color:j.Z.colors.red,background:"white"}}),S={border:0,borderRadius:"8px",color:"white",display:"inlineBlock",fontSize:"12px",height:"36px",marginRight:"12px",padding:"10px",whiteSpace:"nowrap"},R={...S,background:"white",border:"1px solid rgba(0, 0, 0, 0.15)",color:"black"},A={...S,background:"black"},F={...S,background:"var(--color-RemoBlue)"}},533707:function(e,t,i){i.d(t,{Z:function(){return scalers_ReviewAssignmentHeader}});var n=i(824246),s=i(674721),a=i.n(s),o=i(827378),r=i(910912),l=i(614720),d=i(252708),c=i.n(d),p=i(321213),x=i(284066),u=i(106860),b=i(891941);let ScalerTrustHeader=class ScalerTrustHeader extends o.Component{render(){return(0,n.jsx)(b.Z,{severity:"info",children:(0,n.jsxs)("span",{children:[(0,n.jsx)(u.Z,{emoji:"\uD83D\uDD12"})," ",(0,n.jsx)("strong",{children:"CONFIDENTIAL"})," | High security review task"]})})}};var m=i(649375),h=i(222494),f=i(43560),g=i(981198),j=i(298784),v=i.n(j),k=i(60042),y=i.n(k),w=i(792739),C=i(5575),T=i(795115),_=i(107873),S=i(932302),R=i(272966),A=i(954344);function ErrorReportButton(e){let{floating:t=!1}=e,[i,s]=(0,o.useState)(!1),[r,l]=(0,o.useState)(""),d=(0,o.useCallback)(()=>{s(!0)},[]),p=(0,o.useCallback)(()=>{s(!1)},[]),x=(0,o.useCallback)(()=>{let e=(0,C.U8)(),t=(0,C.dO)(Error("Error report"),"warning",{comment:r,lastErrorEventId:e});T.c.track("Error report",{comment:r,lastErrorEventId:e,reportErrorEventId:t}),p(),l(""),c().success("Issue report sent successfully! Your issue ID is ".concat(t),{offset:40,timeout:"none"})},[r,p]),u=(0,o.useCallback)(e=>{l(e.target.value)},[]);return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsxs)("button",{onClick:d,"data-tip":"Report issue","data-effect":"solid",className:"jsx-edb71f497308b5ec "+(y()("btn",{floating:t})||""),children:[(0,n.jsx)(w.FontAwesomeIcon,{icon:"bug"}),(0,n.jsx)("span",{className:"jsx-edb71f497308b5ec sr-only",children:"Report issue"})]}),(0,n.jsxs)(S.ZP,{open:i,onClose:p,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(S.$N,{disableTypography:!0,children:(0,n.jsxs)("div",{className:"jsx-edb71f497308b5ec title-wrapper",children:[(0,n.jsxs)(A.Z,{variant:"h6",component:"h2",children:[(0,n.jsx)(w.FontAwesomeIcon,{icon:"bug",style:{marginRight:"11px"}})," It looks like weâ€™re having issues"]}),(0,n.jsxs)("button",{onClick:p,className:"jsx-edb71f497308b5ec close",children:[(0,n.jsx)("span",{className:"jsx-edb71f497308b5ec sr-only",children:"Close"}),(0,n.jsx)(w.FontAwesomeIcon,{icon:"times"})]})]})}),(0,n.jsx)(S.cZ,{children:(0,n.jsx)(R.Z,{fullWidth:!0,multiline:!0,size:"large",label:"Tell us more about what happened",rows:"5",onChange:u,value:r})}),(0,n.jsxs)(S.kX,{children:[(0,n.jsx)(_.zx,{onClick:p,children:"Cancel"}),(0,n.jsx)(_.zx,{type:"primary",onClick:x,children:"Submit"})]})]}),(0,n.jsx)(a(),{id:"edb71f497308b5ec",children:".btn.jsx-edb71f497308b5ec{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:#191919;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;border:0;bottom:0;color:#a3a3a3;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:0;padding:9px}.btn.jsx-edb71f497308b5ec:active{background:#333}.btn.floating.jsx-edb71f497308b5ec{height:29px;position:absolute;right:16px;top:16px;width:29px;z-index:999}.sr-only.jsx-edb71f497308b5ec{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.title-wrapper.jsx-edb71f497308b5ec{position:relative}.close.jsx-edb71f497308b5ec{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;border:0;color:#808080;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;font-size:12px;height:22px;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:-11px;padding:0;position:absolute;right:0;text-align:center;top:50%;-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s;width:22px}.close.jsx-edb71f497308b5ec:hover{background:rgba(225,225,225,1)}"})]})}var F=i(906327),N=i(599789),z=i(167469),I=i(946975),B=i(773866),E=i(352991),P=i(406566),Z=i(935760),H=i(837553);function FlagButton(e){var t;let{onUserFlag:i,assignment:s,floating:r=!1}=e,l=(0,H.ZP)("enable-user-flagging",{projectId:s.project._id},!1),d=(null==s?void 0:null===(t=s.project)||void 0===t?void 0:t._id)&&l,[c,p]=(0,o.useState)(!1),[x,u]=(0,o.useState)(""),b=(0,o.useCallback)(()=>{p(!0)},[]),m=(0,o.useCallback)(()=>{p(!1)},[]),h=(0,o.useCallback)(()=>{i(N.QuarantineCategory.UserFlaggedBadData,x)},[x,m]),f=(0,o.useCallback)(e=>{u(e.target.value)},[]);return d?(0,n.jsxs)(o.Fragment,{children:[(0,n.jsxs)("button",{onClick:b,"data-tip":"Report bad task","data-effect":"solid",className:"jsx-edb71f497308b5ec "+(y()("btn",{floating:r})||""),children:[(0,n.jsx)(w.FontAwesomeIcon,{icon:"flag"}),(0,n.jsx)("span",{className:"jsx-edb71f497308b5ec sr-only",children:"Flag task"})]}),(0,n.jsxs)(S.ZP,{open:c,onClose:m,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(S.$N,{disableTypography:!0,children:(0,n.jsxs)("div",{className:"jsx-edb71f497308b5ec title-wrapper",children:[(0,n.jsxs)(A.Z,{variant:"h6",component:"h2",children:[(0,n.jsx)(w.FontAwesomeIcon,{icon:"flag",style:{marginRight:"11px"}})," What's wrong with this task?"]}),(0,n.jsxs)("button",{onClick:m,className:"jsx-edb71f497308b5ec close",children:[(0,n.jsx)("span",{className:"jsx-edb71f497308b5ec sr-only",children:"Close"}),(0,n.jsx)(w.FontAwesomeIcon,{icon:"times"})]})]})}),(0,n.jsx)(S.cZ,{children:(0,n.jsx)(R.Z,{fullWidth:!0,multiline:!0,size:"large",label:"Tell us why you're flagging - ONLY flag tasks with bad data!",rows:"5",onChange:f,value:x})}),(0,n.jsxs)(S.kX,{children:[(0,n.jsx)(_.zx,{onClick:m,children:"Cancel"}),(0,n.jsx)(_.zx,{type:"primary",onClick:h,children:"Submit"})]})]}),(0,n.jsx)(a(),{id:"edb71f497308b5ec",children:".btn.jsx-edb71f497308b5ec{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:#191919;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;border:0;bottom:0;color:#a3a3a3;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:0;padding:9px}.btn.jsx-edb71f497308b5ec:active{background:#333}.btn.floating.jsx-edb71f497308b5ec{height:29px;position:absolute;right:16px;top:16px;width:29px;z-index:999}.sr-only.jsx-edb71f497308b5ec{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.title-wrapper.jsx-edb71f497308b5ec{position:relative}.close.jsx-edb71f497308b5ec{-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;border:0;color:#808080;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;font-size:12px;height:22px;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:-11px;padding:0;position:absolute;right:0;text-align:center;top:50%;-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s;width:22px}.close.jsx-edb71f497308b5ec:hover{background:rgba(225,225,225,1)}"})]}):(0,n.jsx)(n.Fragment,{})}var L=i(492125),W=i(562860),M=i(901621),O=i(827411),D=i(548729),U=i(436878),V=i(320280),q=i(433536);let Q={backgroundColor:"lightblue",fontSize:"12px",paddingLeft:"5px",paddingRight:"5px",borderRadius:"0px",height:"19.5px"},Y=(0,q.ZL)({title:{paddingLeft:"5px"},itemValue:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5},dropdown:{color:"#fff",fontSize:"15px",paddingLeft:"5px",paddingRight:"5px",height:"19.5px",cursor:"pointer"},dropdownSelector:{cursor:"pointer"},buttonContainer:{height:"19.5px"},anchor:{display:"flex",justifyContent:"center",alignItems:"center",paddingLeft:"5px",paddingRight:"5px",height:"19.5px"}});var common_RestoreAnnotationsFromAttempt=e=>{let t=Y();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:t.title,children:(0,n.jsx)(I.x,{medium:!0,children:"Reset to attempt\xa0"})}),(0,n.jsxs)("div",{className:t.itemValue,children:[(0,n.jsx)("div",{className:"review-assignment__dropdown",children:(0,n.jsxs)("select",{value:e.attemptDropdownValue,onChange:e.handleDropdownSelect,className:t.dropdownSelector,children:[(0,n.jsx)("option",{value:-1,children:"Select attempt"}),e.allResponses&&e.allResponses.map((e,t)=>(0,n.jsx)("option",{value:t,children:t+1},t))]})}),(0,n.jsx)("div",{className:t.buttonContainer,children:(0,n.jsx)(V.u,{title:(0,n.jsx)("div",{children:"Click to reset to selected attempt"}),placement:"top",children:(0,n.jsx)("a",{onClick:e.handleRestoreAnnotationClick,className:t.anchor,children:(0,n.jsx)(r.Z,{style:Q,children:" Reset "})})})})]})]})},X=i(298115),scalers_ReviewAssignmentHeader=e=>{var t,i,s,d,u,b,j,k,y,C,T,_,S,R,A,q,Q,Y,G;let K=(0,B.O)(),[$,J]=(0,o.useState)(void 0),ee=(0,V.ac)("(max-width: ".concat(U.Et,")")),et=(0,X.R)(e=>e.isDrawerOpen),ei=(0,X.R)(e=>e.setIsDrawerOpen),en=e.allResponses;(0,o.useEffect)(()=>(c().closeAll(),()=>c().closeAll()),[]);let es=null==K?void 0:null===(t=K.labelerStateHook.assignment)||void 0===t?void 0:t.config,ea=null==es?void 0:es.quota,eo=null!==(G=null==es?void 0:es.spotterReviewLevel)&&void 0!==G?G:N.defaultSpotterReviewLevel,er=(null===(i=e.assignment)||void 0===i?void 0:i.reviewLevel)===eo&&(null==es?void 0:es.isSpotterEnabled);(0,o.useEffect)(()=>{if(!er||!ea||!ea.enabled||!ea.weeklyQuota)return;let fetchSpotterProgress=async()=>{try{let e=await (0,E.ZP)(null,"internal/spotter/progress",{method:"GET"});J(e.progress)}catch(e){(0,E.cF)(e,"Failed to fetch quota progress.")}};fetchSpotterProgress()},[ea,er]);let el=(0,o.useMemo)(()=>(0,Z.Z)(),[]),ed=e.assignment.attemptId;ed===e.assignment._id&&(ed=el);let ec=null===(d=e.assignment)||void 0===d?void 0:null===(s=d.project)||void 0===s?void 0:s.permissionGroup,ep="/onboarding-center/project/".concat(null==ec?void 0:ec._id),ex=null===(b=e.assignment)||void 0===b?void 0:null===(u=b.project)||void 0===u?void 0:u.auditErrorBatch,eu=null===(k=e.assignment)||void 0===k?void 0:null===(j=k.project)||void 0===j?void 0:j._id,eb=null===(y=e.assignment)||void 0===y?void 0:y.user,em=(0,H.ZP)("rapid-should-show-audit-comments",{userId:eb,projectId:eu},!1),eh=(0,H.ZP)("2d-review-level-display",{projectId:null===(C=e.assignment)||void 0===C?void 0:C.project._id},!1),[ef,eg]=(0,o.useState)(-1);return(0,n.jsxs)(n.Fragment,{children:[!ee&&(0,n.jsxs)("div",{children:[e.hasWarning&&(0,n.jsx)(p.Z,{isReview:!0}),(null===(T=e.assignment)||void 0===T?void 0:T.user)==="5ece18801c942100253e570a"&&(0,n.jsx)(ScalerTrustHeader,{}),(0,n.jsxs)("div",{className:"jsx-fa3676b66a9335ac review-assignment__header",children:[(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta",children:ec&&(0,n.jsxs)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item",children:[(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac",children:(0,n.jsx)(I.x,{medium:!0,children:"Project"})}),(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item-value",children:e.isScaleStudio?(0,n.jsx)(I.x,{children:null===(S=e.assignment)||void 0===S?void 0:null===(_=S.project)||void 0===_?void 0:_.name}):(0,n.jsx)(I.x,{children:(0,n.jsx)("a",{href:ep,target:"_blank",rel:"noopener noreferrer",className:"jsx-fa3676b66a9335ac",children:null==ec?void 0:ec.title})})})]})}),eh&&(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta",children:(0,n.jsxs)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item",children:[(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac",children:(0,n.jsx)(I.x,{medium:!0,children:"Review Level"})}),(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item-value",children:(0,n.jsxs)(I.x,{medium:!0,children:["L",e.assignment.reviewLevel]})})]})}),ex&&(0,n.jsx)(L.Z,{auditErrorBatchId:ex,taskId:e.assignment._id}),eb&&!!eu&&(0,n.jsx)(W.Z,{workerId:eb,projectId:eu,reviewer:!0}),e.claim&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{width:"36px"},className:"jsx-fa3676b66a9335ac"}),(0,n.jsx)(F.Z,{claim:e.claim,projectId:eu,taskId:e.assignment._id,startTimer:e.startTimer,pauseTimer:e.pauseTimer})]}),em&&(null===(R=e.params)||void 0===R?void 0:R.hypothesis_comments)&&(0,n.jsxs)(r.Z,{textTransform:"none",onClick:e.toggleShowingFeedback,children:["Reviewer Comments \xa0 ",(0,n.jsx)(l.Z,{children:"?"})]}),(0,n.jsx)("div",{style:{width:"36px"},className:"jsx-fa3676b66a9335ac"}),(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta",children:e.autosaveEnabled&&e.lastAutosaveTime&&e.triggerAutosave&&(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item",children:(0,n.jsx)(f.Z,{variant:"light",lastAutosaveTime:e.lastAutosaveTime,triggerAutosave:e.triggerAutosave,discardAutosave:e.discardAutosave,isAutosaving:e.isAutosaving})})}),e.restoreBaseAnnotations&&e.hasBaseAnnotations&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{width:"36px"},className:"jsx-fa3676b66a9335ac"}),(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta",children:(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item",children:(0,n.jsx)(g.Z,{variant:"light",restoreBaseAnnotations:e.restoreBaseAnnotations})})})]}),en&&en.length&&e.restoreAnnotationsFromAttempt&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{width:"36px"},className:"jsx-fa3676b66a9335ac"}),(0,n.jsx)("div",{style:{justifyContent:"center",alignItems:"center"},className:"jsx-fa3676b66a9335ac review-assignment__meta-item",children:(0,n.jsx)(common_RestoreAnnotationsFromAttempt,{attemptDropdownValue:ef,handleDropdownSelect:e=>eg(parseInt(e.target.value)),allResponses:en,handleRestoreAnnotationClick:()=>{if(-1!==ef&&e.restoreAnnotationsFromAttempt)return e.restoreAnnotationsFromAttempt(ef)}})})]}),!!e.scenarioId&&e.setScenarioTime&&(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac task-header__meta task-header__item",children:(0,n.jsx)(M.Z,{scenarioId:e.scenarioId,setScenarioTime:e.setScenarioTime})}),!!e.location&&(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac task-header__meta task-header__item",children:(0,n.jsx)(O.Z,{subtaskId:e.assignment._id})}),(localStorage.showReviewLevelInHeader||er)&&(0,n.jsxs)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item",children:[(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac",children:(0,n.jsx)(I.x,{medium:!0,children:"Review Level\xa0"})}),(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item-value",children:(0,n.jsx)(I.x,{mono:!0,children:er?"Spotter":"R".concat(e.assignment.reviewLevel)})})]}),v().isNumber($)&&(0,n.jsxs)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item",children:[(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac",children:(0,n.jsx)(I.x,{medium:!0,children:"Weekly Quota Progress\xa0"})}),(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item-value",children:(0,n.jsxs)(I.x,{mono:!0,children:[$,"/",null==ea?void 0:ea.weeklyQuota]})})]}),(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac",children:(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac",children:"fixannotation"===e.assignment.type&&(0,n.jsxs)("div",{className:"jsx-fa3676b66a9335ac",children:[(0,n.jsx)("a",{className:"jsx-fa3676b66a9335ac",children:" Hide Original Annotation: "}),(0,n.jsx)("input",{type:"checkbox",name:"toggle_original_annotation",checked:!!e.hideOriginalAnnotation,onClick:t=>{var i;return null===(i=e.onChangeHideOriginal)||void 0===i?void 0:i.call(e,t.currentTarget.checked)},className:"jsx-fa3676b66a9335ac"})]})})}),e.bonus&&(0,n.jsx)(m.Z,{bonus:e.bonus}),e.bonus&&(null===(q=e.assignment)||void 0===q?void 0:null===(A=q.project)||void 0===A?void 0:A._id)&&(0,n.jsx)(h.Z,{projectId:null===(Y=e.assignment)||void 0===Y?void 0:null===(Q=Y.project)||void 0===Q?void 0:Q._id,isAttempter:!1}),void 0!==e.recentAccuracy&&(0,n.jsx)(x.Z,{accuracy:e.recentAccuracy,vertical:!0}),void 0!==e.passRate&&(0,n.jsx)(x.Z,{accuracy:e.passRate,numCompleted:e.passNum,vertical:!0,project:v().get(e.assignment.project,"_id",e.assignment.project)}),(0,n.jsxs)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta",children:[(0,n.jsxs)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item",children:[(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac",children:(0,n.jsx)(I.x,{medium:!0,children:"Task ID\xa0"})}),(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item-value",children:e.isScaleStudio?(0,n.jsx)(I.x,{mono:!0,children:e.studioTaskId}):(0,n.jsx)(I.x,{mono:!0,children:e.assignment._id})})]}),(0,n.jsx)("div",{style:{width:"36px"},className:"jsx-fa3676b66a9335ac"}),e.taskMetadata&&(0,n.jsx)(D.Z,{fromReviewHeader:!1,taskMetadata:e.taskMetadata}),!e.isScaleStudio&&(0,n.jsxs)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item",children:[(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac",children:(0,n.jsx)(I.x,{medium:!0,children:"Attempt ID\xa0"})}),(0,n.jsx)("div",{className:"jsx-fa3676b66a9335ac review-assignment__meta-item-value",children:(0,n.jsx)(I.x,{mono:!0,children:ed})})]}),(0,n.jsx)("div",{style:{width:"36px"},className:"jsx-fa3676b66a9335ac"}),e.onUserFlag&&(0,n.jsx)(FlagButton,{onUserFlag:e.onUserFlag,assignment:e.assignment}),N.lidarTypes.includes(e.assignment.type)&&(0,n.jsx)(ErrorReportButton,{}),e.assignment.type===z.TaskType.Chat&&(0,n.jsx)(r.Z,{onClick:()=>ei(!et),children:(0,n.jsx)(w.FontAwesomeIcon,{icon:"thumbtack"})})]}),(0,n.jsx)(a(),{id:"fa3676b66a9335ac",children:".review-assignment__header.jsx-fa3676b66a9335ac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:12px;-webkit-box-shadow:0px 0px 8px rgba(0,0,0,.05);-moz-box-shadow:0px 0px 8px rgba(0,0,0,.05);box-shadow:0px 0px 8px rgba(0,0,0,.05);background:rgba(0,0,0,1);color:#fff;font-size:15px;white-space:nowrap}.review-assignment__meta.jsx-fa3676b66a9335ac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.review-assignment__meta.jsx-fa3676b66a9335ac a.jsx-fa3676b66a9335ac{color:inherit;text-decoration:underline}.review-assignment__meta-item-value.jsx-fa3676b66a9335ac{opacity:.5}.review-assignment__benchmark-toggle.jsx-fa3676b66a9335ac{font-weight:bold;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;opacity:.3}"})]})]}),(()=>{var t;let{corruptionAccuracy:i,improvedAccuracyCorruptionTypes:s,lowAccuracyCorruptionTypes:a,postReviewSubmission:o}=(null===(t=e.claim)||void 0===t?void 0:t.corruptionFeedback)||{},r=e.assignment.type,l=(0===i||i)&&(a||0)&&!o&&!(100===i&&N.skipCorrectCorruptionModalTaskTypes.includes(r));return l&&(0,n.jsx)(P.Z,{lowAccuracyCorruptionTypes:a,improvedAccuracyCorruptionTypes:s,corruptionAccuracy:i,taskType:r})})()]})}},409631:function(e,t,i){i.d(t,{Z:function(){return U}});var n=i(824246),s=i(827378),a=i(298784),o=i.n(a),r=i(767135),l=i(271351),d=i(279220),featureFlag_ViewerFeatureFlag=e=>{let{feature:t,children:i}=e;return i(function(e){let{loading:t,value:i=!1}=(0,d.Z)(async()=>(0,l.V3)({feature:e}),[e]);return{loading:t,enabled:i}}(t))},c=i(132821),p=i(462354),x=i(182423),u=i(347813),b=i(224185),m=i(573685),h=i(50682),f=i.n(h),g=i(208528),j=i(107873),v=i(293030),k=i(599789),y=i(167469),w=i(524991),C=i(716124),T=i(720408),_=i(792739),S=i(773866),R=i(548763),A=i(713867),F=i(805046),N=i(352991),z=i(320280);let EdgeCaseButton=e=>{let{assignmentId:t,enableRemotasksToggleEdgeCase:i,isEdgeCase:s,setIsEdgeCase:a,disableEdgeCaseButton:o,setDisableEdgeCaseButton:r}=e,l=I(),toggleEdgeCaseTag=async()=>{try{r(!0);let e=await (0,N.ZP)(null,"internal/contentUnderstanding/get_task_tags/".concat(t));if(e){let t=e.indexOf(F.$.EdgeCase);-1===t?e.push(F.$.EdgeCase):e.splice(t,1)}else e=[F.$.EdgeCase];await (0,N.ZP)(null,"internal/contentUnderstanding/change_tags_worker",{method:"POST",body:{subtaskId:t,tags:e}}),(s=e.includes(F.$.EdgeCase))?a(!0):a(!1),r(!1)}catch(e){(0,N.vj)(e,{handleHttp:!0})}};return(0,n.jsx)(n.Fragment,{children:i&&(0,n.jsx)("button",{className:l.edgeCaseButton,onClick:()=>toggleEdgeCaseTag(),disabled:o,style:{background:s?"rgba(221, 69, 211, 1)":"#000000",opacity:s?1:.4},children:"Edge Case"})})},I=(0,z.ZL)({edgeCaseButton:{background:"rgba(221, 69, 211, 1)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 16px",boxShadow:"2px 4px 8px rgba(0, 0, 0, 0.05)",borderRadius:"var(--border-radius)",fontFamily:"var(--font-family)",fontWeight:"bold",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.5px",cursor:"pointer",transition:"box-shadow 0.2s",marginLeft:15,border:0}});var B=i(837553),E=i(984712),P=i(222868),Z=i(481296),H=i(756931),L=i(216672),W=i(571085),M=i(642830),O=i(303044),D=i(664240);let ReviewAssignmentSubmitButtons=e=>{var t,i,a,l,d,m,h,z,I,U,q,$,J,ee,et,ei,en,es,ea,eo,er,el,ed,ec,ep,ex,eu,eb;let em=(0,S.O)(),{accept:eh,annotationCount:ef,assignment:eg,auditResult:ej,canEdit:ev,canRejectWithChanges:ek,canReturnToQueue:ey,commentsInput:ew,corruptionAccuracy:eC,disableAccept:eT,discardChanges:e_,disableCancelButton:eS,fixable:eR,getTimeSpent:eA,handleCommentsChange:eF,setTaskFeedback:eN,handleCustomerPreAudit:ez,improvedAccuracyCorruptionTypes:eI,isAssignmentLoading:eB,isCustomerQAMode:eE,isReturnToQueueDisabled:eP=!1,isScaleStudio:eZ=!1,isSubmitDisabled:eH=!1,isSubmitting:eL,lintErrors:eW,lowAccuracyCorruptionTypes:eM,madeChanges:eO,makeChanges:eD,makeChangesColor:eU,makingChanges:eV,nextTask:eq,onRejectFixableWithNoFix:eQ,onUserSkip:eY,onUserSkipBatch:eX,postCompletionFeedback:eG,redoWording:eK,reject:e$,rejectWithChanges:eJ,returnToQueue:e0,returnToQueueDisabledTooltip:e1,submitDisabledTooltip:e6,submitForZooxSteamCategorization:e2,toggleShowingErrors:e3,workerId:e5,isCorpUser:e8,onUserReport:e7,getReviewChanges:e4,reRunLinter:e9}=e,te=V(),[tt,ti]=(0,s.useState)(!1),[tn,ts]=(0,s.useState)(!1),[ta,to]=(0,g.Z)(!1),tr=eg.project&&(0,P.Tv)(eg.project),tl=eg.project&&(0,P.bd)(eg.project),td=!!eg.isInstructionTask,tc=!tr&&eg.type!==y.TaskType.Categorization,tp=eg.type===y.TaskType.LidarAnnotation,tx=[y.TaskType.TextCollection,y.TaskType.Chat].includes(eg.type),{enableSensitiveContentReporting:tu,enableHighRiskSensitiveContentReporting:tb,enableRegisterTaskAttemptForSensitiveContentReporting:tm,useBulbaSensitiveContentReporting:th}=(0,H.Z)(eg.project,eg.type,null===(t=eg.project)||void 0===t?void 0:t.taskCustomer,!0),tf=tu||tb,tg=[y.TaskType.LidarAnnotation,y.TaskType.NamedEntityRecognition,y.TaskType.TextCollection,y.TaskType.MultiModalTranscription].includes(eg.type),handleReturnToQueue=e=>{e_(),to(e)},handleRejectFixableButtonClick=()=>{ts(!0)},handleRejectFixableConfirm=async e=>{null==eQ||eQ(e),ts(!1)},tj=!tl&&(tp||eg.type===y.TaskType.LidarSegmentation),tv=null==em?void 0:null===(a=em.labelerStateHook)||void 0===a?void 0:null===(i=a.assignment)||void 0===i?void 0:i.config,tk=(0,R.x)(eg),ty=(0,R.R)(eg),tw=tk&&!!(null==tv?void 0:tv.inlineCommentsEnabled)||(null==eg?void 0:null===(l=eg.params)||void 0===l?void 0:l.isRedactionVerification),tC=tw&&o().isEqual(null==em?void 0:null===(d=em.labelerStateHook)||void 0===d?void 0:d.annotationsHook.inlineCommentsHook.allComments,null==em?void 0:null===(m=em.labelerStateHook)||void 0===m?void 0:m.annotationsHook.inlineCommentsHook.initialComments)&&!(null==eg?void 0:null===(h=eg.params)||void 0===h?void 0:h.isRedactionVerification),tT=(null==em?void 0:null===(I=em.labelerStateHook)||void 0===I?void 0:null===(z=I.assignment)||void 0===z?void 0:z.type)===y.TaskType.SegmentAnnotation,t_={postCompletionFeedback:eG},returnToQueueSendHandler=async(e,t,i)=>{tw&&eJ?await eJ(e,t,i):await e0(e,t,i)},acceptTaskSendHandler=async(e,t,i)=>{await eh(e,t,i)},fixingSubmitSendHandler=async(e,t,i)=>{await e$(e,t,i)},reportTaskAndMaybeSubmit=async(e,t)=>{tm&&await eh(c.a5.Approve,!0,e,t),null==e7||e7(e,t)};(0,Z.p7)({action:eD,disabled:!eZ||tn||ta||eV||ty||!eR},{action:()=>{handleReturnToQueue(!0)},disabled:!eZ||eV||tn||ta},{action:()=>{ta&&to(!1),eV&&e_()},disabled:!eZ}),(0,Z.ve)({action:()=>{var e;let t=tg?void 0:{inlineComments:null==em?void 0:null===(e=em.labelerStateHook)||void 0===e?void 0:e.annotationsHook.inlineCommentsHook.allComments};eY({_id:eg._id,task_id:eg._id,type:eg.type,project:eg.project,response:t,isReview:!0})},disabled:!eZ||!(null==em?void 0:null===(q=em.labelerStateHook)||void 0===q?void 0:null===(U=q.annotationsHook.inlineCommentsHook.allComments)||void 0===U?void 0:U.length)&&!tg},!0);let hasFeedbackTemplateForType=e=>!o().isNil(eg.feedbackTemplate)&&(0,T.validateIsTaskFeedbackTemplate)(eg.feedbackTemplate)&&e in eg.feedbackTemplate,onClickWrapper=(e,t,i,n)=>(e,i)=>{let s=[];for(let t of eg.feedbackTemplate[n]){let n=t.title,a=t.inputType;if(a===T.TaskFeedbackInput.Text){let t={title:n,response:e[n]};s.push(t)}else{let e={title:n,response:i[n]};s.push(e)}}void 0!==eN?eN(s,t):t()},tS=(0,B.ZP)("remotasks-toggle-edge-case",{userId:e5},!1),tR=(0,B.ZP)("use-bad-prelabels-skip",{projectId:null!==(ea=null===($=eg.project)||void 0===$?void 0:$._id)&&void 0!==ea?ea:eg.project},!1),tA=(0,B.ZP)("use-ostrich-math-categories-skip",{projectId:null!==(eo=null===(J=eg.project)||void 0===J?void 0:J._id)&&void 0!==eo?eo:eg.project},!1),tF=(0,B.ZP)("use-not-equipped-skip",{projectId:null!==(er=null===(ee=eg.project)||void 0===ee?void 0:ee._id)&&void 0!==er?er:eg.project},!1),[tN,tz]=(0,s.useState)(!1),[tI,tB]=(0,s.useState)(!1),[tE,tP]=(0,s.useState)(!1),tZ=(0,B.ZP)("in_task_support_poc_dev",{userId:eg.loggedUserId},!1),tH=(0,B.ZP)("in_task_support_poc_dev_by_project",{projectId:null!==(el=null===(et=eg.project)||void 0===et?void 0:et.id)&&void 0!==el?el:null===(ei=eg.project)||void 0===ei?void 0:ei._id},!1),tL=tZ&&tH,tW=(0,B.ZP)("enable-model-response-comparison-modal",{projectId:null!==(ed=null===(en=eg.project)||void 0===en?void 0:en.id)&&void 0!==ed?ed:null===(es=eg.project)||void 0===es?void 0:es._id},!1),[tM,tO]=s.useState(!1),getPromptToRewrite=()=>{var e;return null!==(e=o().get(eg,"fixResponse.annotations.rlhf_history.response[0].interactions[0].prompt"))&&void 0!==e?e:o().get(eg,"params.metadata.prompt")},getBaselineResponse=()=>{var e;return null!==(e=o().get(eg,"fixResponse.annotations.rlhf_history.response[0].interactions[0].baselineResponse"))&&void 0!==e?e:o().get(eg,"params.metadata.BULBA_suggested_baseline_response[0]")};(0,s.useEffect)(()=>{let updateIsEdgeCaseTask=async()=>{if(eg.type===y.TaskType.TextCollection)try{let e=eg._id,t=await (0,N.ZP)(null,"internal/contentUnderstanding/get_task_tags/".concat(e));Array.isArray(t)&&t.includes(F.$.EdgeCase)?tz(!0):tz(!1)}catch(e){(0,N.vj)(e,{handleHttp:!0})}};updateIsEdgeCaseTask()},[eg._id,eg.type,tN,tz]);let filterEntries=e=>e.filter(e=>!e.reviewLevels||e.reviewLevels.includes(eg.reviewLevel)),edgeCaseButton=()=>(0,n.jsx)(n.Fragment,{children:eg.type===y.TaskType.TextCollection&&(0,n.jsx)(EdgeCaseButton,{assignmentId:eg._id,enableRemotasksToggleEdgeCase:null!=tS&&tS,isEdgeCase:tN,setIsEdgeCase:tz,disableEdgeCaseButton:tI,setDisableEdgeCaseButton:tB})}),inTaskSupportButton=()=>(0,n.jsx)(n.Fragment,{children:tL&&(0,n.jsxs)("div",{children:[(0,n.jsx)(O.dj,{onClick:()=>{(0,W.Kz)(W.ju.InTaskSupportEvent,{userId:"12",taskId:"12",eventName:"Help Button Click"}),M.Z.info("InTaskSupportEvent Help Button Click"),tP(!0)}}),(0,n.jsx)(O.ZP,{openModal:tE,taskId:eg.id,userId:eg.loggedUserId,onClose:()=>tP(!1)})]})}),renderConfirmAllFlagsButton=()=>!(null==em?void 0:em.labelerStateHook.annotationsHook.ontologyChangeMap)||y.ReviewLevelOrder.indexOf(eg.reviewLevel)<y.ReviewLevelOrder.indexOf(k.ReviewLevel.Level1)?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(j.zx,{htmlType:"button",style:{...X,opacity:eL?.5:1},onClick:()=>{var e,t;null==em||null===(e=em.labelerStateHook)||void 0===e||e.annotationsHook.setAnnotations(e=>e.map(e=>{if(!e.flag&&!e.attributeFlags)return e;let t=o().cloneDeep(e);return t.flag&&(t.flag.confirmed=!0),t.attributeFlags&&(t.attributeFlags=o().mapValues(t.attributeFlags,e=>({...e,confirmed:!0}))),t})),null==em||null===(t=em.labelerStateHook)||void 0===t||t.annotationsHook.setGlobalAttributeFlags(e=>o().mapValues(e,e=>({...e,confirmed:!0})))},children:"Confirm All Flags"},"confirmAllFlagsButton"),renderReportButton=()=>tf&&(0,n.jsx)("div",{"data-tip":"Use this button to report any sensitive content in the task.",children:(0,n.jsx)(E.Z,{disabled:eL,handleReport:reportTaskAndMaybeSubmit,enableSensitiveContentReporting:tu,enableHighRiskSensitiveContentReporting:tb,useBulbaSensitiveContentReporting:th})}),renderSkipButton=function(){var e,t,i;let{batch:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ev&&!tk&&(s||eY)&&(!s||eX)?eZ?(0,n.jsx)(x.Z,{id:eg._id,type:eg.type,project:eg.project,canSkip:!!(null==em?void 0:null===(t=em.labelerStateHook)||void 0===t?void 0:null===(e=t.annotationsHook.inlineCommentsHook.allComments)||void 0===e?void 0:e.length)||tg,response:tg?void 0:{inlineComments:null==em?void 0:null===(i=em.labelerStateHook)||void 0===i?void 0:i.annotationsHook.inlineCommentsHook.allComments},isReview:!0,handleSkip:eY}):(0,n.jsx)(p.Z,{taskId:eg._id,enableBadPrelabelSkip:tR,enableOstrichMathSkip:tA,enableNotEquippedSkip:tF,enableOtherReason:s,skipBodyText:s?eg.batchSkipText:null,skipHeaderText:s?"Having a hard time with these tasks?":void 0,confirmButtonText:s?"Opt out":"Skip task",buttonText:s?"Opt out":"Skip",style:{...X,opacity:eL?.5:1},handleSkip:s?eX:eY,bid:null==eg?void 0:eg.bid,isInstructionTask:td,disabled:eL},s?"skipBatchButton":"skipButton"):null},renderReturnToQueue=e=>{var t,i,s;let a;let o=tk?"Reject":eK||"Send Back To Queue";tC?a="You must add comments (".concat(tT?"shift + ":"","right click) before rejecting"):e?a=e1||"Send back to queue disabled due to misuse or task has been sent back too many times. Please only send back if most of the task is not done.":eO&&!tp&&(a="This will discard your current edits");let l=!!(null==eg?void 0:null===(t=eg.params)||void 0===t?void 0:t.requireChoiceForSBTQ)&&!ej,d=tj&&!ew||l||tC,submitButtonHelper=(t,i,s)=>{let a=t||e||tC;if(hasFeedbackTemplateForType(T.FeedbackConditions.SBTQ)){let e=filterEntries(eg.feedbackTemplate.sbtq);if(e.length)return(0,n.jsx)(u.Z,{handleSubmitFeedback:onClickWrapper(t,i,s,T.FeedbackConditions.SBTQ),style:{...G,opacity:a?.5:1},feedbackEntries:e,buttonText:o,confirmButtonText:s,disabled:a})}return(0,n.jsxs)(j.zx,{style:{...G,opacity:a||eL?.5:1},disabled:a||eL,onClick:()=>{handleReturnToQueue()},children:[o,tl&&(0,n.jsx)("span",{style:{marginLeft:4},children:(0,n.jsx)(L.x,{trigger:"alt+r"})})]})};return eE?(0,n.jsx)(r.S5,{type:"reject",onClick:()=>{handleReturnToQueue()},children:o},"redo-link"+!!a):(0,n.jsx)(c.HA,{hideOnFail:tp,annotationCount:ef,nextTaskHandler:eq,sendHandler:returnToQueueSendHandler,taskProjectId:null===(i=eg.project)||void 0===i?void 0:i._id,getTimeSpent:eA,taskType:eg.type,taskUserId:null===(s=eg.project)||void 0===s?void 0:s.taskCustomer,type:c.a5.SendBackToQueue,lowAccuracyCorruptionTypes:eM,improvedAccuracyCorruptionTypes:eI,corruptionAccuracy:eC,disableModal:eE||!k.lidarTypesWithLinking.includes(eg.type),autoloadNextAssignment:!k.lidarTypesWithLinking.includes(eg.type),shortcutEnabled:eZ&&!d&&!eH&&!eL,...t_,children:e=>{let{disabled:t,onClick:i,text:s}=e;return(0,n.jsxs)("div",{"data-for":"return-to-queue",children:[submitButtonHelper(t,i,s),(0,n.jsx)(f(),{id:"return-to-queue"})]})}})},renderErrorsIcon=()=>eW&&e3&&eW.length?(0,n.jsx)(A.Z,{lintErrors:eW,toggleShowingErrors:e3}):null,acceptButtonHelper=(e,t,i)=>{let onClickCompare=async()=>{tW&&getBaselineResponse()&&getPromptToRewrite()?e9&&!await e9()||tO(!0):t()};if(hasFeedbackTemplateForType(T.FeedbackConditions.Accept)){let s=filterEntries(eg.feedbackTemplate.accept);if(s.length)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z,{isOpen:tM,setIsOpen:tO,prompt:void 0,rewriteText:void 0,baselineText:void 0,submitOnClose:t,getReviewChanges:e4,getPromptToRewrite:getPromptToRewrite,getBaselineResponse:getBaselineResponse}),(0,n.jsx)(u.Z,{handleSubmitFeedback:onClickWrapper(e,onClickCompare,i,T.FeedbackConditions.Accept),style:eH||e?K:Q,feedbackEntries:s,buttonText:i,confirmButtonText:i,disabled:eH||e||!ev})]})}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z,{isOpen:tM,setIsOpen:tO,prompt:void 0,rewriteText:void 0,baselineText:void 0,submitOnClose:t,getReviewChanges:e4,getPromptToRewrite:getPromptToRewrite,getBaselineResponse:getBaselineResponse}),(0,n.jsxs)(j.zx,{disabled:eH||e||!ev||eL,onClick:onClickCompare,style:eH||e||!ev||eL?K:Q,htmlType:"button",children:[i,tl&&(0,n.jsx)("span",{style:{marginLeft:4},children:(0,n.jsx)(L.x,{trigger:"alt+a"})})]})]})};return(0,n.jsxs)("div",{className:te.reviewAssignmentSubmitButtons,children:[inTaskSupportButton(),eB?(0,n.jsxs)("div",{className:te.isProcessing,children:[(0,n.jsx)(v.Z,{}),(0,n.jsx)("span",{style:{marginLeft:"12px"},children:"Loading task"})]}):ez&&tt?(0,n.jsx)(PreAudit,{isSubmitting:eL,handleCustomerPreAudit:ez,onCancel:()=>{ti(!1)},isScaleStudio:eZ,disableFeedbackInput:tx}):tn?(0,n.jsx)(Reject,{enabled:!eL,initialComments:ew,feedbackRequired:tj,onConfirm:handleRejectFixableConfirm,onCancel:()=>{ts(!1)},isScaleStudio:eZ,disableFeedbackInput:tx}):(null===(ec=eg.project)||void 0===ec?void 0:ec._id)===w.ZP.ZooxSteamExhaustV2&&eg.reviewLevel===k.ReviewLevel.CalibrationAudit&&e2?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:"Bar!!"}),(0,n.jsx)(c.HA,{disableModal:!0,autoloadNextAssignment:!0,sendHandler:eh,taskProjectId:null===(ep=eg.project)||void 0===ep?void 0:ep._id,getTimeSpent:eA,taskType:eg.type,taskUserId:null===(ex=eg.project)||void 0===ex?void 0:ex.taskCustomer,type:c.a5.Reject,...t_,children:e=>(0,n.jsx)(r.S5,{type:"reject",...e,onClick:e2(!1),children:"No Steam"})}),(0,n.jsx)(c.HA,{disableModal:!0,autoloadNextAssignment:!0,sendHandler:eh,taskProjectId:null===(eu=eg.project)||void 0===eu?void 0:eu._id,getTimeSpent:eA,taskType:eg.type,taskUserId:null===(eb=eg.project)||void 0===eb?void 0:eb.taskCustomer,type:c.a5.Reject,...t_,children:e=>(0,n.jsx)(r.S5,{type:"accept",...e,onClick:e2(!0),children:"Has Steam"})})]}):ta?(()=>{var e,t,i;let a=tj&&!ew,o=!!(null==eg?void 0:null===(e=eg.params)||void 0===e?void 0:e.requireChoiceForSBTQ)&&!ej,l=a||o||tC,d=(0,n.jsx)(r.AM,{required:tj&&!tx,commentsInput:ew,handleCommentsChange:eF}),rejectButtonHelper=(e,t,i)=>{if(hasFeedbackTemplateForType(T.FeedbackConditions.SBTQ)){let s=filterEntries(eg.feedbackTemplate.sbtq);if(s.length)return(0,n.jsx)(u.Z,{handleSubmitFeedback:onClickWrapper(e,t,i,T.FeedbackConditions.SBTQ),style:G,feedbackEntries:s,buttonText:i,confirmButtonText:i,disabled:eH||l||e})}return(0,n.jsxs)(j.zx,{disabled:eH&&!ta||l||e||eL,onClick:t,style:{...G,opacity:eL?.5:1},htmlType:"button",children:[i,tl&&(0,n.jsx)("span",{style:{marginLeft:4},children:(0,n.jsx)(L.x,{trigger:"alt+r"})})]})},p=(0,n.jsx)(c.HA,{hideOnFail:tp,annotationCount:ef,nextTaskHandler:eq,sendHandler:returnToQueueSendHandler,taskProjectId:null===(t=eg.project)||void 0===t?void 0:t._id,getTimeSpent:eA,taskType:eg.type,taskUserId:null===(i=eg.project)||void 0===i?void 0:i.taskCustomer,type:c.a5.SendBackToQueue,lowAccuracyCorruptionTypes:eM,improvedAccuracyCorruptionTypes:eI,corruptionAccuracy:eC,disableModal:eE||!k.lidarTypesWithLinking.includes(eg.type),autoloadNextAssignment:!k.lidarTypesWithLinking.includes(eg.type),shortcutEnabled:eZ&&!l&&!eH&&!eL,...t_,children:e=>{let{disabled:t,onClick:i,text:s}=e,r=a?"Please provide feedback when rejecting this task.":o?"Please select an audit option from the dropdown":ta?null:e6||null;return(0,n.jsxs)("div",{"data-tip":r,"data-for":"reject-disabled",children:[rejectButtonHelper(t,i,tk?"Reject":s),!!r&&(0,n.jsx)(f(),{id:"reject-disabled",type:"dark",children:(0,n.jsx)("div",{style:{width:"200px",fontWeight:"bold"},children:r})})]})}}),x=(0,n.jsxs)(j.zx,{htmlType:"button",disabled:eL,onClick:to,style:{...X,opacity:eL?.5:1},children:["Cancel",tl&&(0,n.jsx)("span",{style:{marginLeft:4},children:(0,n.jsx)(L.x,{trigger:"alt+c"})})]});return(0,n.jsxs)(s.Fragment,{children:[!eZ&&!tx&&d,x,p]})})():eV?(()=>{var t,i,a,o;let l;let d=renderConfirmAllFlagsButton(),p=null;ey&&(!eE||tp)&&!ek&&(p=renderReturnToQueue(eP));let x=eF&&(0,n.jsx)(r.AM,{required:tj&&!tx,commentsInput:ew,handleCommentsChange:eF},"feedbackInput"),m=!1;eO?tp&&!ew?(m=!0,l="Please provide feedback to help the tasker improve in future tasks."):e.isSubmitDisabled&&(m=!0,l=e6):(m=!0,l="Please make at least one change and keep all fields valid");let submitButtonHelper=(e,t,i,s)=>{let onClickCompare=async()=>{tW&&getBaselineResponse()&&getPromptToRewrite()?e9&&!await e9()||tO(!0):t()};if(hasFeedbackTemplateForType(s?T.FeedbackConditions.MakeChanges:T.FeedbackConditions.SBTQ)){let a=filterEntries(s?eg.feedbackTemplate.makeChanges:eg.feedbackTemplate.sbtq);if(a.length)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z,{isOpen:tM,setIsOpen:tO,prompt:void 0,rewriteText:void 0,baselineText:void 0,submitOnClose:t,getReviewChanges:e4,getPromptToRewrite:getPromptToRewrite,getBaselineResponse:getBaselineResponse}),(0,n.jsx)(u.Z,{handleSubmitFeedback:onClickWrapper(e,onClickCompare,i,s?T.FeedbackConditions.MakeChanges:T.FeedbackConditions.SBTQ),style:s?Q:G,feedbackEntries:a,buttonText:i,confirmButtonText:i,disabled:m||e||!ev})]})}let a=s?Q:G;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z,{isOpen:tM,setIsOpen:tO,prompt:void 0,rewriteText:void 0,baselineText:void 0,submitOnClose:t,getReviewChanges:e4,getPromptToRewrite:getPromptToRewrite,getBaselineResponse:getBaselineResponse}),(0,n.jsxs)(j.zx,{disabled:m||e||!ev||eL,onClick:onClickCompare,style:{...a,opacity:m||eL?.5:1},htmlType:"button",children:[i,tl&&(0,n.jsx)("span",{style:{marginLeft:4},children:(0,n.jsx)(L.x,{trigger:"alt+a"})})]})]})},h=(0,n.jsx)(c.HA,{hideOnFail:tp,annotationCount:ef,nextTaskHandler:eq,sendHandler:fixingSubmitSendHandler,taskProjectId:null===(t=eg.project)||void 0===t?void 0:t._id,getTimeSpent:eA,taskType:eg.type,taskUserId:null===(i=eg.project)||void 0===i?void 0:i.taskCustomer,type:c.a5.ApproveWithChanges,lowAccuracyCorruptionTypes:eM,improvedAccuracyCorruptionTypes:eI,corruptionAccuracy:eC,disableModal:eE||!k.lidarTypesWithLinking.includes(eg.type),autoloadNextAssignment:!k.lidarTypesWithLinking.includes(eg.type),requireConfirm:tc,shortcutEnabled:eZ&&!m&&ev&&!eL,...t_,children:e=>{let{disabled:t,onClick:i,text:s}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{"data-tip":l,"data-for":"submit-disabled-fixing-submit",children:submitButtonHelper(t,i,s,!0)}),(0,n.jsx)(f(),{id:"submit-disabled-fixing-submit"})]})}},"fixingSubmitButton"),g=renderErrorsIcon(),v=null;tp&&(v=(0,n.jsxs)("div",{style:{marginLeft:"12px"},children:[(0,n.jsx)("span",{"data-tip":"Once you make changes, they cannot be discarded","data-for":"cancel-changes",style:{color:"rgba(0, 0, 0, 0.4)"},children:(0,n.jsx)(_.FontAwesomeIcon,{icon:"question-circle"})}),(0,n.jsx)(f(),{id:"cancel-changes"})]},"tooltipTarget"));let y=l||(tC?"You must add comments (".concat(tT?"shift + ":"","right click) before rejecting"):void 0),w=!!ek&&eJ&&ey&&(0,n.jsx)(c.HA,{hideOnFail:tp,annotationCount:ef,nextTaskHandler:eq,sendHandler:eJ,taskProjectId:null===(a=eg.project)||void 0===a?void 0:a._id,getTimeSpent:eA,taskType:eg.type,taskUserId:null===(o=eg.project)||void 0===o?void 0:o.taskCustomer,type:c.a5.SendBackToQueueWithChanges,lowAccuracyCorruptionTypes:eM,improvedAccuracyCorruptionTypes:eI,corruptionAccuracy:eC,disableModal:eE||!k.lidarTypesWithLinking.includes(eg.type),autoloadNextAssignment:!k.lidarTypesWithLinking.includes(eg.type),requireConfirm:tc,shortcutEnabled:eZ&&ev&&!tC&&!m,...t_,children:e=>{let{disabled:t,onClick:i,text:s}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{"data-tip":y,"data-for":"submit-disabled-rejecting-with-changes",children:submitButtonHelper(m||t||!ev||tC,i,tk?"Reject with changes":s,!1)}),(0,n.jsx)(f(),{id:"submit-disabled-rejecting-with-changes"})]})}},"rejectWithChangesButton");return(0,n.jsxs)(n.Fragment,{children:[d,p,!eZ&&!tx&&x,(0,n.jsx)(()=>{let[e,t]=s.useState(!1);return tp||eS?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.Z,{title:"Are you sure you want to exit edit mode? Any changes you've made will not be saved.",isOpen:e,onAccept:e_,onReject:()=>t(!1),acceptText:"Confirm",rejectText:"Keep Editing",acceptType:"danger",hideCloseButton:!0}),(0,n.jsxs)(j.zx,{htmlType:"button",disabled:eL,onClick:()=>eO?t(!0):e_(),style:{...X,opacity:eL?.5:1},children:["Cancel",tl&&(0,n.jsx)("span",{style:{marginLeft:4},children:(0,n.jsx)(L.x,{trigger:"alt+c"})})]})]})},{}),w,h,g,v]})})():ty||!eR?(()=>{var e,t,i,s,a;let o=renderSkipButton({batch:!1}),r=renderSkipButton({batch:!0}),l=renderReportButton(),d=tj&&!ew,p=!!(null==eg?void 0:null===(e=eg.params)||void 0===e?void 0:e.requireChoiceForSBTQ)&&!ej,x=d||p||tC,rejectButtonHelper=(e,t,i)=>{if(hasFeedbackTemplateForType(T.FeedbackConditions.SBTQ)){let s=filterEntries(eg.feedbackTemplate.sbtq);if(s.length)return(0,n.jsx)(u.Z,{handleSubmitFeedback:onClickWrapper(e,t,i,T.FeedbackConditions.SBTQ),style:G,feedbackEntries:s,buttonText:i,confirmButtonText:i,disabled:eH||x||e})}return(0,n.jsxs)(j.zx,{disabled:eH&&!ta||x||e||eL,onClick:t,style:{...G,opacity:eL?.5:1},htmlType:"button",children:[i,tl&&(0,n.jsx)("span",{style:{marginLeft:4},children:(0,n.jsx)(L.x,{trigger:"alt+r"})})]})},b=(0,n.jsx)(c.HA,{hideOnFail:tp,annotationCount:ef,nextTaskHandler:eq,sendHandler:tw&&eJ?eJ:e$,taskProjectId:null===(t=eg.project)||void 0===t?void 0:t._id,getTimeSpent:eA,taskType:eg.type,taskUserId:null===(i=eg.project)||void 0===i?void 0:i.taskCustomer,type:c.a5.Reject,lowAccuracyCorruptionTypes:eM,improvedAccuracyCorruptionTypes:eI,corruptionAccuracy:eC,disableModal:eE||!k.lidarTypesWithLinking.includes(eg.type),autoloadNextAssignment:!k.lidarTypesWithLinking.includes(eg.type),shortcutEnabled:eZ&&ev&&!tC,...t_,children:e=>{let{disabled:t,onClick:i,text:s}=e,a=d?"Please provide feedback when rejecting this task.":p?"Please select an audit option from the dropdown":ta?null:e6||null;return(0,n.jsxs)("div",{"data-tip":a,"data-for":"reject-disabled",children:[rejectButtonHelper(t,i,tk?"Reject":s),!!a&&(0,n.jsx)(f(),{id:"reject-disabled",type:"dark",children:(0,n.jsx)("div",{style:{width:"200px",fontWeight:"bold"},children:a})})]})}},"reject"),m=(0,n.jsx)(c.HA,{hideOnFail:tp,annotationCount:ef,nextTaskHandler:eq,sendHandler:eh,taskProjectId:null===(s=eg.project)||void 0===s?void 0:s._id,getTimeSpent:eA,taskType:eg.type,taskUserId:null===(a=eg.project)||void 0===a?void 0:a.taskCustomer,type:c.a5.Approve,lowAccuracyCorruptionTypes:eM,improvedAccuracyCorruptionTypes:eI,corruptionAccuracy:eC,disableModal:eE||!k.lidarTypesWithLinking.includes(eg.type),autoloadNextAssignment:!k.lidarTypesWithLinking.includes(eg.type),shortcutEnabled:eZ&&ev,...t_,children:e=>{let{disabled:t,onClick:i,text:s}=e;return(0,n.jsxs)("div",{"data-tip":!0,"data-for":"submit-disabled-accept",children:[acceptButtonHelper(t,i,s),!!e6&&(0,n.jsx)(f(),{id:"submit-disabled-accept",type:"dark",children:(0,n.jsx)("div",{style:{width:"200px",fontWeight:"bold"},children:e6})})]})}},"accept");return[inTaskSupportButton,l,r,o,b,m]})():(()=>{var t,i;let{isCustomerQAMode:s,onRejectFixableWithNoFix:a}=e,{isSpotterSubtask:o,isSpotterFixingEnabled:l}=eg,d=o&&!l,p=renderConfirmAllFlagsButton(),x=(0,n.jsx)(featureFlag_ViewerFeatureFlag,{feature:"customer-pre-audit",children:e=>{let{enabled:t}=e;return t?(0,n.jsx)(j.zx,{onClick:()=>ti(!0),style:{...Y,background:eU||Y.background},htmlType:"button",children:"Pre-Audit"}):null}}),u=!(d&&!e8)&&(0,n.jsxs)(j.zx,{disabled:!ev||eL,onClick:eD,style:{...Y,background:eU||Y.background,opacity:!ev||eL?.5:1},htmlType:"button",children:["Make Changes",d&&" (CORP ONLY)",tl&&(0,n.jsx)("span",{style:{marginLeft:4},children:(0,n.jsx)(L.x,{trigger:"alt+m"})})]}),b=!eT&&(0,n.jsx)(c.HA,{hideOnFail:tp,annotationCount:ef,nextTaskHandler:eq,sendHandler:acceptTaskSendHandler,taskProjectId:null===(t=eg.project)||void 0===t?void 0:t._id,getTimeSpent:eA,taskType:eg.type,taskUserId:null===(i=eg.project)||void 0===i?void 0:i.taskCustomer,type:c.a5.Approve,lowAccuracyCorruptionTypes:eM,improvedAccuracyCorruptionTypes:eI,corruptionAccuracy:eC,disableModal:s||!k.lidarTypesWithLinking.includes(eg.type),autoloadNextAssignment:!k.lidarTypesWithLinking.includes(eg.type),requireConfirm:tc,shortcutEnabled:(eZ||C.IS_FEDERAL)&&!eH&&ev&&!eL,...t_,children:e=>{let{disabled:t,onClick:i,text:s}=e;return(0,n.jsxs)("div",{"data-tip":!0,"data-for":"submit-disabled-accept",children:[acceptButtonHelper(t,i,s),!!e6&&(0,n.jsx)(f(),{id:"submit-disabled-accept",type:"dark",children:(0,n.jsx)("div",{style:{width:"200px",fontWeight:"bold"},children:e6})})]})}},"acceptTask"),m=ey&&renderReturnToQueue(eP||!ev),h=renderSkipButton({batch:!1}),g=renderSkipButton({batch:!0}),v=renderReportButton(),y=s&&a&&(0,n.jsx)(r.S5,{type:"reject",onClick:handleRejectFixableButtonClick,children:"Reject"},"reject"),w=renderErrorsIcon(),T=(0,n.jsx)(r.AM,{required:tj&&!tx,commentsInput:ew,handleCommentsChange:eF});return(0,n.jsxs)("div",{className:te.renderFixable,children:[p,edgeCaseButton,v,!eZ&&!tx&&T,g,h,m,y,x,u,b,w]})})()]})};ReviewAssignmentSubmitButtons.defaultProps={canEdit:!0};var U=ReviewAssignmentSubmitButtons;let Reject=e=>{let{enabled:t,feedbackRequired:i,initialComments:a,onCancel:o,onConfirm:l,isScaleStudio:d,disableFeedbackInput:c}=e,[p,x]=(0,s.useState)(a||"");return(0,n.jsxs)(s.Fragment,{children:[!d&&!c&&(0,n.jsx)(r.AM,{commentsInput:a,required:i&&!c,handleCommentsChange:x}),(0,n.jsxs)("div",{"data-tip":i?"Please provide feedback when rejecting this task":null,"data-for":"reject-fixable",children:[(0,n.jsx)(j.zx,{disabled:!t||i&&!p,onClick:()=>{l(p||"")},style:Y,htmlType:"button",children:"Reject"}),(0,n.jsx)(f(),{id:"reject-fixable"})]}),(0,n.jsx)(j.zx,{disabled:!t,onClick:o,htmlType:"button",children:"Cancel"})]})},PreAudit=e=>{let{isSubmitting:t,initialComments:i,handleCustomerPreAudit:a,onCancel:o,isScaleStudio:l,disableFeedbackInput:d}=e,[c,p]=(0,s.useState)(i||"");return(0,n.jsxs)(n.Fragment,{children:[!l&&!d&&(0,n.jsx)(r.AM,{commentsInput:c,required:!1,handleCommentsChange:p}),(0,n.jsx)(j.zx,{disabled:t,onClick:()=>{a({comment:c,reviewStatus:k.CustomerReviewStatus.ExperimentalPreRejected})},style:Y,htmlType:"button",children:"Pre-Reject"}),(0,n.jsx)(j.zx,{disabled:t,onClick:()=>{a({comment:c,reviewStatus:k.CustomerReviewStatus.ExperimentalPreAccepted})},style:Y,htmlType:"button",children:"Pre-Approve"}),(0,n.jsx)(r.S5,{type:"cancel",onClick:o,isDisabled:t,children:"Cancel"},"rejectCancelButton")]})},V=(0,m.ZL)({redoLink:{marginRight:"16px",color:"rgba(0, 0, 0, 0.4)",fontSize:"13px",fontWeight:"bold",whiteSpace:"nowrap",transition:"0.1s all",cursor:"pointer","&:hover":{color:"rgba(0, 0, 0, 0.8)"}},isProcessing:{fontWeight:900,fontSize:"14px",letterSpacing:"1px",textTransform:"uppercase",color:"rgba(0, 0, 0, 0.5)",display:"flex",whiteSpace:"nowrap"},renderFixable:{display:"flex",maxWidth:"100%",flexWrap:"wrap",gap:10},reviewAssignmentSubmitButtons:{alignItems:"center",display:"flex",justifyContent:"flex-end",position:"relative",maxWidth:"100%",flexWrap:"wrap",gap:10}}),q={border:0,borderRadius:"8px",color:"white",fontSize:"12px",height:"36px",padding:"10px",whiteSpace:"nowrap"},Q={...q,background:"#7ED321"},Y={...q,background:"#F8BB06"},X={...q,background:"white",border:"1px solid rgba(0, 0, 0, 0.15)",color:"black"},G={...q,background:"#EB5424"},K={...q,background:"#7ED321",opacity:"0.5"}},548763:function(e,t,i){i.d(t,{R:function(){return checkIsSpotterWithFixingDisabled},x:function(){return checkIsSpotterReview}});var n=i(599789);let checkIsSpotterReview=e=>{var t;let i=null==e?void 0:e.spotterConfig,s=null!==(t=null==i?void 0:i.spotterReviewLevel)&&void 0!==t?t:n.defaultSpotterReviewLevel;return(null==e?void 0:e.reviewLevel)===s&&(null==i?void 0:i.isSpotterEnabled)},checkIsSpotterWithFixingDisabled=e=>{var t,i;let s=checkIsSpotterReview(e),a=null==e?void 0:e.spotterConfig,o=null!==(t=null==a?void 0:a.unfixableReviewLevels)&&void 0!==t?t:[];return s&&!(null!==(i=null==a?void 0:a.spotterFixingEnabled)&&void 0!==i?i:n.defaultSpotterIsFixingEnabled)||o.includes(e.reviewLevel)}},501287:function(e,t,i){var n,s,a,o,r,l;i.d(t,{M4:function(){return formatFeedback},Sp:function(){return p},UH:function(){return n},aB:function(){return c}}),(o=n||(n={})).WrongObjectType="Wrong object type",o.Slipping="Slipping",o.WrongLabelSize="Wrong label size",o.WrongHeading="Wrong heading",o.MissedActivation="Missed activation",o.UnnecessaryActivation="Unnecessary activation",(r=s||(s={})).X_Axis="X_Axis",r.Y_Axis="Y_Axis",r.Z_Axis="Z_Axis",r.X_Y_Axis="X_Y_Axis",r.X_Z_Axis="X_Z_Axis",r.Y_Z_Axis="Y_Z_Axis",r.X_Y_Z_Axis="X_Y_Z_Axis";let d=Object.values(s);(l=a||(a={})).Internal="Internal",l.External="External",l.X_Axis="X_Axis",l.Y_Axis="Y_Axis",l.Z_Axis="Z_Axis",l.Stationary="Stationary",l.Dynamic="Dynamic";let c={Slipping:{Internal:d,External:d},"Wrong label size":{X_Axis:["Left","Right","Both"],Y_Axis:["Front","Back","Both"],Z_Axis:["Top","Bottom","Both"]},"Wrong heading":{Stationary:["Fanning","Yaw","Keyframes"],Dynamic:["Path not smooth","Corners stand out","Uneven distance between frames"]}},p={Slipping:["Use Spectogram, Timeline Views and Projected views to correct Slipping. You can use a part of the car with dense points as reference.","Scrub through the frames using D. APC"],"Wrong label size":["Choose the frame where car is the largest to Size","Leave space for occluded part of the object","Use Camera View to get reference for Size"],"Wrong heading":["Use partial APC and dynamic APC to check the heading â€“ the sides of the car should be parallel to the cuboid","Use partial APC and dynamic APC to check the heading â€“ the bumpers of the car should be parallel to the cuboid","Use Grid View and Reference Marker in Overhead View â€“ the sides of the car should be parallel to the cuboid","Use Grid View and Reference Marker in Overhead View â€“ the bumpers of the car should be parallel to the cuboid","Use Heading Tool to smoothen pathway â€“ the sides of the car should be parallel to the cuboid","Use Heading Tool to smoothen pathway â€“ the bumpers of the car should be parallel to the cuboid"],"Unnecessary activation":["Use Spectogram to identify possible Unnecesary Activations, validate your finding in Projected View, Camera View and Lidar View and delete if necessary","Use Top View to identify possible Unnecesaty Activations, validate your finding in Projected View, Camera View and Lidar View and delete if necessary"],"Missed activation":["Use Spectogram to identify possible Missed Activations, validate your finding in Projected View, Camera View and Lidar View and include if necessary","Use Top View to identify possible Missed Activations, validate your finding in Projected View, Camera View and Lidar View and include if necessary"],"Wrong object type":["Use Camera View to correctly choose a Label for the object","Check the Attributes you selected"]};function formatFeedback(e,t){var i;let n=(null==e?void 0:e.category)?"Error Category: ".concat(e.category):"",s=(null==e?void 0:e.typePrimary)?"Type: ".concat(e.typePrimary," ").concat(null!==(i=null==e?void 0:e.typeSecondary)&&void 0!==i?i:""):"",a=(null==e?void 0:e.frames)?"Frames: ".concat(e.frames):"",o=(null==e?void 0:e.hint)?"Hint: ".concat(e.hint):"",r=[n,s,a,o].filter(e=>e&&e.length>0).join("\n");return[r,null!=t?t:""].filter(e=>e&&e.length>0).join("\n\n")}},773866:function(e,t,i){i.d(t,{K:function(){return AnnotationTaskContextProvider},O:function(){return useAnnotationContext}});var n=i(824246),s=i(827378),a=i(298784),o=i.n(a);let r=(0,s.createContext)(null);r.displayName="AnnotationTaskContext";let AnnotationTaskContextProvider=e=>(0,n.jsx)(r.Provider,{value:o().omit(e,"children"),children:e.children});function useAnnotationContext(){return(0,s.useContext)(r)}},347813:function(e,t,i){var n=i(824246),s=i(674721),a=i.n(s),o=i(298784),r=i.n(o),l=i(60042),d=i.n(l),c=i(827378),p=i(50682),x=i.n(p),u=i(165168),b=i(502218),m=i(596956),h=i(416534),f=i(720408);function isReviewerRating(e){var t;let i=null===(t=e.choices)||void 0===t?void 0:t.every(e=>{var t;return"string"!=typeof e&&(null===(t=f.reviewerRatingFeedbackEntry.choices)||void 0===t?void 0:t.some(t=>"string"!=typeof t&&t.value===e.value&&t.label===e.label))}),n=e.title===f.reviewerRatingFeedbackEntry.title;return n&&!!i}let g={isModalOpen:!1,textReasons:{},selectReasons:{}};let TemplateFeedback=class TemplateFeedback extends c.Component{updateSelectResponses(e,t,i){let n=r().cloneDeep(this.state.selectReasons);if(e===f.TaskFeedbackInput.Select){let e=[];e.push(i),n[t]=e}else if(e===f.TaskFeedbackInput.MultiSelect){if(t in n){if(n[t].includes(i)){let e=n[t].indexOf(i);n[t].splice(e,1)}else n[t].push(i)}else n[t]=[i]}return n}renderSelectFeedbackEntry(e){let t=e.inputType,i=e.title,s=isReviewerRating(e)?f.reviewerRatingFeedbackEntry.choices:e.choices,o=isReviewerRating(e)?"".concat(i,"-").concat(e.description):i;return(0,n.jsxs)("div",{className:"jsx-9d75daff34393566 reason",children:[(0,n.jsx)("div",{className:"jsx-9d75daff34393566",children:null==s?void 0:s.map(e=>{var i;let s=(0,f.asFeedbackEntryChoice)(e);return(0,n.jsx)("div",{onClick:()=>{this.setState({selectReasons:this.updateSelectResponses(t,o,s.value)})},className:"jsx-9d75daff34393566 "+(d()("choice_option",{selected:null===(i=this.state.selectReasons[o])||void 0===i?void 0:i.includes(s.value)})||""),children:s.label},s.value)})}),(0,n.jsx)(a(),{id:"9d75daff34393566",children:".reason.jsx-9d75daff34393566{color:rgba(0,0,0,.6);font-size:14px;font-weight:bold}.choice_option.jsx-9d75daff34393566{display:inline-block;margin:12px 12px 12px 0;-webkit-box-shadow:0px 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0px 2px 4px rgba(0,0,0,.1);box-shadow:0px 2px 4px rgba(0,0,0,.1);-webkit-border-radius:var(--border-radius);-moz-border-radius:var(--border-radius);border-radius:var(--border-radius);padding:8px 16px;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;cursor:pointer}.choice_option.jsx-9d75daff34393566:hover{-webkit-box-shadow:0px 4px 8px rgba(0,0,0,.15);-moz-box-shadow:0px 4px 8px rgba(0,0,0,.15);box-shadow:0px 4px 8px rgba(0,0,0,.15)}.choice_option.selected.jsx-9d75daff34393566{background:var(--link-color);color:white;cursor:default}"})]})}updateTextResponses(e,t){let i=r().cloneDeep(this.state.textReasons);return i[e]=t,i}renderTextFeedbackEntry(e){let t=e.title;return(0,n.jsx)(b.Z,{onChange:e=>this.setState({textReasons:this.updateTextResponses(t,e.target.value)}),placeholder:"Enter text here"})}renderEntry(e){return e.inputType===f.TaskFeedbackInput.Text?this.renderTextFeedbackEntry(e):this.renderSelectFeedbackEntry(e)}disableHelper(){for(let e of this.props.feedbackEntries){if(void 0!==e.required&&!e.required)continue;let t=isReviewerRating(e)?"".concat(f.reviewerRatingFeedbackEntry.title,"-").concat(e.description):e.title,i=e.inputType===f.TaskFeedbackInput.Text?this.state.textReasons:this.state.selectReasons;if(!(t in i)||0===i[t].length)return!0}return!1}renderModal(){let e=this.disableHelper();return(0,n.jsxs)(u.u_,{isOpen:this.state.isModalOpen,onRequestClose:this.closeModal,contentLabel:"Modal",maxWidth:"640px",children:[(0,n.jsxs)("div",{className:"jsx-2c490d8242eb10cf feedback",children:[(0,n.jsxs)("div",{className:"jsx-2c490d8242eb10cf intro",children:[(0,n.jsx)("h2",{className:"jsx-2c490d8242eb10cf",children:this.props.feedbackHeaderText||"Please Provide Feedback"}),(0,n.jsx)("p",{className:"jsx-2c490d8242eb10cf",children:this.props.feedbackBodyText||"Please provide feedback."})]}),this.props.feedbackEntries.map((e,t)=>(0,n.jsxs)("div",{className:"jsx-2c490d8242eb10cf section",children:[(0,n.jsxs)("div",{className:"jsx-2c490d8242eb10cf label",children:[e.inputType===f.TaskFeedbackInput.MultiSelect?e.title+" (select all that apply)":e.title,(void 0===e.required||e.required)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{"data-tip":!0,"data-for":"asterisk",className:"jsx-2c490d8242eb10cf asterisk",children:"*"}),(0,n.jsx)(x(),{id:"asterisk",children:(0,n.jsx)("span",{className:"jsx-2c490d8242eb10cf",children:"require to answer"})})]})]}),e.description&&(0,n.jsx)("div",{className:"jsx-2c490d8242eb10cf description",children:e.description}),this.renderEntry(e)]},"".concat(e.title,"-").concat(t))),(0,n.jsx)("div",{className:"jsx-2c490d8242eb10cf",children:(0,n.jsx)("div",{className:"jsx-2c490d8242eb10cf submit",children:(0,n.jsxs)("div",{"data-tip":e?"Please complete the feedback form.":null,"data-for":"feedback-disabled",className:"jsx-2c490d8242eb10cf",children:[(0,n.jsx)(m.zx,{size:"lg",type:"button",disabled:e,onClick:()=>{this.props.handleSubmitFeedback(this.state.textReasons,this.state.selectReasons),this.closeModal()},children:this.props.confirmButtonText||"Submit"}),(0,n.jsx)(x(),{id:"feedback-disabled"})]})})})]}),(0,n.jsx)(a(),{id:"2c490d8242eb10cf",children:".feedback.jsx-2c490d8242eb10cf{padding:32px}.intro.jsx-2c490d8242eb10cf{font-size:16px;font-weight:bold}.intro.jsx-2c490d8242eb10cf h2.jsx-2c490d8242eb10cf{margin:0;font-size:20px}.intro.jsx-2c490d8242eb10cf p.jsx-2c490d8242eb10cf{margin:16px 0 32px;line-height:1.7}.section.jsx-2c490d8242eb10cf{margin:36px 0}.section.jsx-2c490d8242eb10cf .label.jsx-2c490d8242eb10cf{margin-bottom:8px;text-transform:uppercase;font-weight:bold;font-size:13px;letter-spacing:.5px}.section.jsx-2c490d8242eb10cf .description.jsx-2c490d8242eb10cf{margin-bottom:8px;font-size:13px;color:rgba(0,0,0,.45);letter-spacing:.5px;inline-size:100%;word-wrap:break-word;overflow-wrap:break-word}.submit.jsx-2c490d8242eb10cf{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.asterisk.jsx-2c490d8242eb10cf{color:red}"})]})}render(){let e=this.props.modernButtonStyle?(0,n.jsx)(h.zx,{style:this.props.style,onClick:this.openModal,disabled:this.props.disabled,variant:this.props.variant,children:this.props.buttonText},"templateFeedbackButton"):(0,n.jsx)(m.zx,{type:"button",style:this.props.style,onClick:this.openModal,disabled:this.props.disabled,children:this.props.buttonText},"templateFeedbackButton");return(0,n.jsxs)("div",{children:[e,this.state.isModalOpen&&this.renderModal()]})}constructor(e){super(e),this.openModal=()=>{this.setState({isModalOpen:!0})},this.closeModal=()=>{this.setState(g)},this.state=g}};t.Z=TemplateFeedback},664240:function(e,t,i){var n=i(824246),s=i(827378),a=i(298784),o=i.n(a),r=i(635384),l=i(433536),d=i(266301);let c=(0,l.ZL)({background:{backgroundColor:"white",width:"100%",padding:20,height:"80vh",overflowY:"auto"},title:{width:"100%",paddingBottom:20},markdownContainer:{display:"flex",flexDirection:"row",height:"50%"},pairwiseHalf:{width:"50%"},titleBlock:{background:"#fafbfc",padding:10,border:"1px solid #eee",fontWeight:"bold"},promptMarkdownBlock:{padding:10,border:"1px solid #eee",overflowY:"auto",height:"25%"},markdownBlock:{padding:10,border:"1px solid #eee",overflowY:"auto",height:"100%"}});t.Z=e=>{let{isOpen:t,setIsOpen:i,prompt:a,rewriteText:l,baselineText:p,submitOnClose:x,getReviewChanges:u,getBaselineResponse:b,getPromptToRewrite:m}=e,h=c(),[f,g]=(0,s.useState)("No prompt found."),[j,v]=(0,s.useState)("No baseline response found."),[k,y]=(0,s.useState)("No model rewrite response found.");return(0,s.useEffect)(()=>{let fetchUpdatedPromptAndResponses=async()=>{if(u){var e,t,i,n,s,a;let r=await u();y(null!==(t=null!==(e=o().get(r,["annotations","Rewrite:","response","0"]))&&void 0!==e?e:o().get(r,"annotations.editCompletion_1.response[0]"))&&void 0!==t?t:"No model rewrite response found."),g(null!==(n=null!==(i=o().get(r,"annotations.rlhf_history.response[0].interactions[0].prompt"))&&void 0!==i?i:null==m?void 0:m())&&void 0!==n?n:"No prompt found."),v(null!==(a=null!==(s=o().get(r,"annotations.rlhf_history.response[0].interactions[0].baselineResponse"))&&void 0!==s?s:null==b?void 0:b())&&void 0!==a?a:"No baseline response found.")}};fetchUpdatedPromptAndResponses()},[u,b,m]),(0,n.jsx)(r.u,{open:t,onClose:()=>{i(!1),x()},title:"Rewrite and Baseline Prompt Response Comparison",children:(0,n.jsxs)("div",{className:h.background,children:[(0,n.jsx)("div",{className:h.title,children:"Hello! This popup is here to show you what the baseline response for this prompt would look like.\n  Please try to work towards writing rewrites that are as good, if not better, than the baseline response.\n  Notice what the baseline does well (e.g. content, markdown, presentation, etc) and how you could improve\n  your next rewrite based on this feedback. Please note that you may not go back and edit your rewrite.\n  However, you can view this as feedback and use it to guide your next rewrite."}),(0,n.jsx)("div",{className:h.titleBlock,children:"Prompt"}),(0,n.jsx)("div",{className:h.promptMarkdownBlock,children:(0,n.jsx)(d.Z,{text:null!=a?a:f})}),(0,n.jsxs)("div",{className:h.markdownContainer,children:[(0,n.jsxs)("div",{className:h.pairwiseHalf,children:[(0,n.jsx)("div",{className:h.titleBlock,children:"Rewrite Response"}),(0,n.jsx)("div",{className:h.markdownBlock,children:(0,n.jsx)(d.Z,{text:null!=l?l:k})})]}),(0,n.jsxs)("div",{className:h.pairwiseHalf,children:[(0,n.jsx)("div",{className:h.titleBlock,children:"Baseline Response"}),(0,n.jsx)("div",{className:h.markdownBlock,children:(0,n.jsx)(d.Z,{text:null!=p?p:j})})]})]})]})})}},94802:function(e,t,i){i(824246),i(674721),i(827378),i(20460)},805770:function(e,t,i){var n=i(824246),s=i(674721),a=i.n(s),o=i(827378),r=i(60042),l=i.n(r),d=i(792739),c=i(320280);t.Z=o.forwardRef((e,t)=>{let{isOpen:i,label:s,tooltip:o,active:r=!1,disabled:p=!1,ddStyle:x={},btnStyle:u={},children:b,onSave:m,onOpen:h,onClear:f,onCancel:g}=e,j=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:x,className:"jsx-bdb179fbe63f0584 dropdown",children:[(0,n.jsx)("div",{className:"jsx-bdb179fbe63f0584 content",children:b}),(0,n.jsxs)("div",{style:u,className:"jsx-bdb179fbe63f0584 buttons",children:[m&&(0,n.jsx)(c.Av,{type:"primary",onClick:m,children:"Save"}),f&&(0,n.jsx)(c.Av,{onClick:f,children:"Clear"}),g&&(0,n.jsx)(c.Av,{onClick:g,children:"Cancel"})]})]}),(0,n.jsx)(a(),{id:"bdb179fbe63f0584",children:".dropdown.jsx-bdb179fbe63f0584{left:0;z-index:9;top:38px;padding:12px;position:absolute;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;background:#f8f8f8;-webkit-box-shadow:0px 0px 16px rgba(0,0,0,.1),0px 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0px 0px 16px rgba(0,0,0,.1),0px 2px 4px rgba(0,0,0,.1);box-shadow:0px 0px 16px rgba(0,0,0,.1),0px 2px 4px rgba(0,0,0,.1)}.buttons.jsx-bdb179fbe63f0584{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding-top:12px;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;border-top:1px solid#e6e6e6}.content.jsx-bdb179fbe63f0584{max-height:400px;overflow:auto}"})]});return(0,n.jsxs)("div",{ref:t,className:"jsx-bd332316085eb527 filter",children:[(0,n.jsx)(c.u,{title:o,placement:"top",arrow:!0,children:(0,n.jsxs)("div",{style:{color:r||i?"#3890f9":"#000000"},onClick:h,className:"jsx-bd332316085eb527 "+(l()("select",{disabled:p})||""),children:[(0,n.jsx)("div",{className:"jsx-bd332316085eb527 label",children:s}),(0,n.jsx)("div",{style:{color:i?"#3890f9":"#000000"},className:"jsx-bd332316085eb527 caret",children:(0,n.jsx)(d.FontAwesomeIcon,{icon:"caret-down",style:{fontSize:16}})})]})}),!p&&i?j:null,(0,n.jsx)(a(),{id:"bd332316085eb527",children:".filter.jsx-bd332316085eb527{cursor:pointer;padding:6px 16px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;position:relative;margin-right:16px;background:#f8f8f8;min-width:0}.select.jsx-bd332316085eb527{font-size:14px;line-height:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.select.disabled.jsx-bd332316085eb527{color:#808080!important}.select.jsx-bd332316085eb527 .label.jsx-bd332316085eb527{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;min-width:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.caret.jsx-bd332316085eb527{margin-left:10px;min-width:10px}"})]})})},180319:function(e,t,i){var n=i(824246),s=i(674721),a=i.n(s);i(827378),t.Z=e=>{let{label:t,numResults:i,maxWidth:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{style:{maxWidth:s},className:"jsx-d8dc38c746209262 label",children:t}),i&&i>1?(0,n.jsxs)("span",{className:"jsx-d8dc38c746209262 counter",children:["+",i]}):null,(0,n.jsx)(a(),{id:"d8dc38c746209262",children:".label.jsx-d8dc38c746209262{-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.counter.jsx-d8dc38c746209262{margin-left:5px}"})]})}},805046:function(e,t,i){var n;i.d(t,{$:function(){return n}}),i(824246),i(827378),i(805770),i(94802),i(479619),i(553821),i(730818),i(180319),(n||(n={})).EdgeCase="edge-case"},479619:function(e,t,i){i(827378),i(298784)},553821:function(e,t,i){i(827378)}}]);