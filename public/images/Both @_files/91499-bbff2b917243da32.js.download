"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91499],{412891:function(e,t,o){o.d(t,{Z:function(){return g},W:function(){return getInstructionLabelName}});var s=o(824246),i=o(674721),n=o.n(i),r=o(298784),l=o.n(r),c=o(827378),a=o(50682),d=o.n(a),h=o(524306),u=o.n(h),x=o(792739);let HoverZoomImage=class HoverZoomImage extends c.Component{render(){let[e,t]=this.state.relativeMousePos,o=this.ref.current?this.ref.current.getBoundingClientRect():{},i=l().get(o,"width",0),r=l().get(o,"height",0);return(0,s.jsxs)("div",{style:{...this.props.containerStyle},onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter,ref:this.ref,className:"jsx-801e0b339c739146 image-parent",children:[(0,s.jsx)("img",{style:this.props.imageStyle,src:this.props.src,onClick:()=>{this.props.clickImageToOpenInNewTab&&window.open(this.props.src,"_blank")},className:"jsx-801e0b339c739146 "+((this.props.clickImageToOpenInNewTab?"clickable":"")||"")}),this.state.hovered&&(0,s.jsx)("div",{style:{width:"".concat(100,"%"),height:"".concat(100,"%"),top:"".concat(t,"px"),left:"".concat(e,"px")},className:"jsx-801e0b339c739146 image-hover-parent",children:(0,s.jsx)("div",{style:{backgroundPosition:"".concat(-e+i/2*1,"px ").concat(-t+r/2*1,"px"),backgroundImage:"url(".concat(this.props.src,")"),backgroundSize:"".concat(i,"px ").concat(r,"px")},className:"jsx-801e0b339c739146 image-hover-child"})}),(0,s.jsx)(n(),{id:"801e0b339c739146",children:".image-parent.jsx-801e0b339c739146{position:relative;overflow:hidden;margin:8px 0}.image-hover-parent.jsx-801e0b339c739146{position:absolute;background:transparent;z-index:100;-webkit-transform:translate(-50%,-50%)scale(2);-moz-transform:translate(-50%,-50%)scale(2);-ms-transform:translate(-50%,-50%)scale(2);-o-transform:translate(-50%,-50%)scale(2);transform:translate(-50%,-50%)scale(2);overflow:hidden;pointer-events:none}.image-hover-child.jsx-801e0b339c739146{background-repeat:no-repeat;width:100%;height:100%}img.clickable.jsx-801e0b339c739146{cursor:pointer}"})]})}constructor(e){super(e),this.ref=c.createRef(),this.getRelativeMousePos=e=>{if(!this.ref.current)return e;let t=this.ref.current.getBoundingClientRect(),o=e[0]-t.left,s=e[1]-t.top;return[o,s]},this.onMouseMove=e=>{this.setState({relativeMousePos:this.getRelativeMousePos([e.pageX,e.pageY])})},this.onMouseEnter=e=>{this.setState({relativeMousePos:this.getRelativeMousePos([e.pageX,e.pageY]),hovered:!0})},this.onMouseLeave=()=>{this.setState({hovered:!1})},this.state={relativeMousePos:[0,0],hovered:!1}}};HoverZoomImage.defaultProps={imageStyle:{},containerStyle:{},clickImageToOpenInNewTab:!0};var p=o(266301),f=o(202340);function getInstructionLabelName(e){if(e.global||!e.labels)return"Common Instructions";let t=e.labels.map(e=>l().startCase(e.replace(/_/g," ")));return t.slice(0,-2).join(", ")+(t.slice(0,-2).length?", ":"")+t.slice(-2).join(" and ")}let InstructionItem=class InstructionItem extends c.Component{renderExamples(){let e=this.props.instructionItem.examples||[];return(0,s.jsxs)("div",{className:"jsx-593bae46eadbe1ac",children:[l().map(e,e=>(0,s.jsxs)("div",{className:"jsx-593bae46eadbe1ac",children:[(0,s.jsx)("div",{className:"jsx-593bae46eadbe1ac example-description",children:(0,s.jsx)(p.Z,{text:e.description||""})}),(0,s.jsxs)("div",{className:"jsx-593bae46eadbe1ac example__images",children:[(0,s.jsx)("div",{className:"jsx-593bae46eadbe1ac correct__col example__col",children:!l().isEmpty(e.correct)&&(0,s.jsxs)("div",{className:"jsx-593bae46eadbe1ac",children:[(0,s.jsx)("h3",{className:"jsx-593bae46eadbe1ac",children:"Correct"}),l().map(e.correct,e=>(0,s.jsx)(HoverZoomImage,{src:e,imageStyle:{border:"solid #19b629 2px"}},e))]})}),(0,s.jsx)("div",{className:"jsx-593bae46eadbe1ac incorrect__col example__col",children:!l().isEmpty(e.incorrect)&&(0,s.jsxs)("div",{className:"jsx-593bae46eadbe1ac",children:[(0,s.jsx)("h3",{className:"jsx-593bae46eadbe1ac",children:"Incorrect"}),l().map(e.incorrect,e=>(0,s.jsx)(HoverZoomImage,{src:e,imageStyle:{border:"solid #ec322f 2px"}},e))]})})]})]})),(0,s.jsx)(n(),{id:"593bae46eadbe1ac",children:".example-description.jsx-593bae46eadbe1ac{margin-left:16px}.example__images.jsx-593bae46eadbe1ac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.example__col.jsx-593bae46eadbe1ac{margin:5px;margin-left:auto;margin-right:auto;padding:0 20px;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.correct__col.jsx-593bae46eadbe1ac h3.jsx-593bae46eadbe1ac{color:#19b629}.correct__col.jsx-593bae46eadbe1ac img.jsx-593bae46eadbe1ac{border:solid#19b629 2px}.incorrect__col.jsx-593bae46eadbe1ac h3.jsx-593bae46eadbe1ac{color:#ec322f}.incorrect__col.jsx-593bae46eadbe1ac img.jsx-593bae46eadbe1ac{border:solid#ec322f 2px}img.jsx-593bae46eadbe1ac{margin-bottom:20px;margin-left:auto;margin-right:auto;max-width:30vw;width:100%;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}h3.jsx-593bae46eadbe1ac{text-align:center}"})]})}copyId(){this.setState({copyMessage:"Successfully copied ID!"},()=>{(0,f.$)(),setTimeout(()=>{this.setState({copyMessage:void 0}),(0,f.$)()},2e3)})}renderCopyButton(){let e=this.props.instructionItem._id;return this.props.showInstructionItemIdOnHover?(0,s.jsx)(u(),{text:e,onCopy:this.copyId.bind(this),children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"copy-icon","data-tip":this.state.copyMessage||"Copy Instruction Item ID to Clipboard","data-for":"annotation-list-actions-".concat(e),children:(0,s.jsx)(x.FontAwesomeIcon,{icon:"copy"})},this.state.copyMessage?"copy":"default"),(0,s.jsx)(d(),{id:"annotation-list-actions-".concat(e),ref:this.tooltipRef}),(0,s.jsx)("textarea",{ref:this.textareaRef,value:e})]})}):null}render(){return(0,s.jsxs)("div",{className:"instruction-item",children:[this.renderCopyButton(),(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsx)("div",{style:{flex:1},children:(0,s.jsx)(p.Z,{text:this.props.instructionItem.text||""})}),l().get(this.props.instructionItem,"examples",[]).length>0&&(0,s.jsx)("div",{style:{flex:1},children:this.renderExamples()})]}),this.props.showInstructionItemIdOnHover&&(0,s.jsx)(n(),{id:"2302f4abadd5b7c4",children:".instruction-item.jsx-2302f4abadd5b7c4{position:relative;-webkit-transition:.125s all;-moz-transition:.125s all;-o-transition:.125s all;transition:.125s all;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;padding-bottom:2px}.copy-icon.jsx-2302f4abadd5b7c4{position:absolute;right:8px;top:8px;visibility:hidden;-webkit-transition:.125s all;-moz-transition:.125s all;-o-transition:.125s all;transition:.125s all;cursor:pointer}.copy-icon.jsx-2302f4abadd5b7c4:hover{-webkit-transform:scale(1.05)rotate(2deg);-moz-transform:scale(1.05)rotate(2deg);-ms-transform:scale(1.05)rotate(2deg);-o-transform:scale(1.05)rotate(2deg);transform:scale(1.05)rotate(2deg)}.instruction-item.jsx-2302f4abadd5b7c4:hover{background-color:#f0f0f0}.instruction-item.jsx-2302f4abadd5b7c4:hover .copy-icon.jsx-2302f4abadd5b7c4{visibility:visible}.instruction-item.jsx-2302f4abadd5b7c4 textarea.jsx-2302f4abadd5b7c4{opacity:.01;height:0;position:absolute;z-index:-1}"})]})}constructor(...e){super(...e),this.textareaRef=c.createRef(),this.tooltipRef=c.createRef(),this.state={copyMessage:void 0}}};var g=InstructionItem},751024:function(e,t,o){o.d(t,{b:function(){return getFilterFromParams}});var s=o(824246),i=o(674721),n=o.n(i),r=o(298784),l=o.n(r),c=o(827378),a=o(412891),d=o(795115),h=o(115125);function getFilterFromParams(e){let t=[...l().get(e,"objects_to_annotate",[])];if(l().isEmpty(t))return()=>!0;let o=[];for(;t.length>0;){let e=t.shift();l().isString(e)?o.push(e):l().isObject(e)&&(l().isString(e.choice)&&o.push(e.choice),l().isArray(e.subchoices)&&t.push(...e.subchoices))}return e=>e.global||l().some(e.labels,e=>o.includes(e))}let InstructionList=class InstructionList extends c.Component{showInstructionItemIdOnHover(){return this.props.showInstructionItemIdOnHover||l().get(this.props.user,"isCorporateUser")}componentDidMount(){this.setState({loadedAt:new Date})}componentWillUnmount(){let{loadedAt:e}=this.state;if(e&&this.props.emitMetrics){let t=+new Date-+e;d.c.track("Loaded Instructions",{timeElapsed:t,isFullInstructions:this.props.isFullInstructions})}}renderInstructionCluster(e){return 0===e.length?null:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:(0,a.W)(e[0])}),e.map(e=>(0,s.jsx)(a.Z,{instructionItem:e,showInstructionItemIdOnHover:this.showInstructionItemIdOnHover()},e.name))]})}selectSection(e){this.setState({selectedSection:e});let t=document.getElementById(e);t&&t.scrollIntoView()}render(){let e=this.props.instructionList.instructionSet;this.props.filter&&(e=e.filter(this.props.filter));let[t,o]=l().partition(e,e=>!0!==e.global),i=function(e){if(0===e.length)return[];let t=[],o=[];return e.forEach(e=>{let s=o[0];(void 0===s||s.global&&e.global?0:(0,a.W)(s)!==(0,a.W)(e))?(t.push(o),o=[e]):o.push(e)}),t.push(o),t}(t),r=[o],c=this.props.bringGlobalToBottom?[i,r]:[r,i];return(0,s.jsxs)("div",{className:"jsx-1535e907546f9bd4 container",children:[(0,s.jsxs)("div",{className:"jsx-1535e907546f9bd4 container",children:[(0,s.jsx)("div",{className:"jsx-1535e907546f9bd4 col col-1",children:c.map((e,t)=>{let o=0===t&&c.length>1;return e.map((e,i)=>{let n="".concat(t,"-").concat(i),r=["item-link"];return(this.state.selectedSection===n&&r.push("selected"),o&&r.push("important"),0===e.length)?null:(0,s.jsx)("div",{onClick:this.selectSection.bind(this,n),className:"jsx-1535e907546f9bd4 "+(r.join(" ")||""),children:(0,a.W)(e[0])},"".concat(n,"-label"))})})}),(0,s.jsx)("div",{className:"jsx-1535e907546f9bd4 col col-3",children:c.map((e,t)=>e.map((e,o)=>{let i="".concat(t,"-").concat(o);return(0,s.jsx)("div",{id:i,className:"jsx-1535e907546f9bd4",children:this.renderInstructionCluster(e)},"".concat(i,"-cluster"))}))})]}),(0,s.jsx)(n(),{id:"1535e907546f9bd4",children:".container.jsx-1535e907546f9bd4{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:800px;height:100%;max-height:80vh}.col.jsx-1535e907546f9bd4{overflow:scroll}.col-1.jsx-1535e907546f9bd4{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.col-3.jsx-1535e907546f9bd4{-webkit-box-flex:3;-webkit-flex:3;-moz-box-flex:3;-ms-flex:3;flex:3}.item-link.jsx-1535e907546f9bd4{-webkit-transition:.25s all;-moz-transition:.25s all;-o-transition:.25s all;transition:.25s all;cursor:pointer;padding:6px;width:90%}.item-link.jsx-1535e907546f9bd4:not(.selected):hover{background-color:#e0dfe6}div.item-link.selected.jsx-1535e907546f9bd4{background-color:var(--color-RemoGray75);color:#fff}.item-link.important.jsx-1535e907546f9bd4{background-color:#f5f4f9}"})]})}constructor(e){super(e),this.state={}}};InstructionList.defaultProps={filter:()=>!0,bringGlobalToBottom:!1,isFullInstructions:!0,showInstructionItemIdOnHover:!1,emitMetrics:!0},t.Z=(0,h.ns)(InstructionList)},100949:function(e,t,o){var s=o(824246),i=o(674721),n=o.n(i),r=o(827378),l=o(433536),c=o(924364),a=o(436878),d=o(60042),h=o.n(d);t.Z=r.memo(e=>{let{instructions:t,backgroundColor:o}=e,i={__html:c.ZP.render(t)},r=(0,l.ZL)({instructionsContainer:{minHeight:"70vh",padding:"0 32px",display:"flex",alignItems:"stretch",backgroundColor:o||"#fff",["@media (max-width: ".concat(a.Et,")")]:{padding:0}}}),d=r();return(0,s.jsxs)("div",{className:"jsx-3f6a764f3f72bb08 "+(h()(d.instructionsContainer)||""),children:[(0,s.jsx)("div",{dangerouslySetInnerHTML:i,className:"jsx-3f6a764f3f72bb08 instructions--markdown"}),(0,s.jsx)(n(),{id:"3f6a764f3f72bb08",children:".instructions--markdown{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-align:left;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.instructions--markdown iframe{height:100%!important}.instructions--markdown img{max-width:600px}.instructions--markdown h1{font-weight:700;font-style:normal;font-size:40px;margin-left:-2.5px;line-height:45px;letter-spacing:-.028em}.instructions--markdown h2{font-weight:700;font-style:normal;font-size:36px;margin-left:-2.5px;line-height:38px;letter-spacing:-.028em}.instructions--markdown h3{font-weight:700;font-style:normal;font-size:28px;margin-left:-2.5px;line-height:33px;letter-spacing:-.028em}.instructions--markdown h4{font-weight:700;font-style:normal;font-size:24px;margin-left:-2.5px;line-height:26px;letter-spacing:-.028em}.instructions--markdown h5{font-weight:700;font-style:normal;font-size:18px;margin-left:-2.5px;line-height:22px;letter-spacing:-.028em}.instructions--markdown h6{font-weight:700;font-style:normal;font-size:18px;margin-left:-2.5px;line-height:20px;letter-spacing:-.028em}.instructions--markdown blockquote{background-color:#efefef;margin:0;padding:10px 30px}.instructions--markdown pre{background-color:#efefef;border:1px solid#ccc;padding:10px 40px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.instructions--markdown p{font-weight:400;font-style:normal;font-size:15px;line-height:1.6;letter-spacing:0}"})]})})},291499:function(e,t,o){o.d(t,{d:function(){return InstructionsModal}});var s,i,n=o(824246),r=o(298784),l=o.n(r),c=o(827378),a=o(891941),d=o(100949),h=o(165168),u=o(119875),x=o(751024),p=o(336235),f=o(436878),g=o(107873),m=o(674721),b=o.n(m),j=o(707814),y=o(433536),v=o(320280),w=o(792739),k=o(222091),I=o.n(k),C=o(995632),S=o(627015),O=o(116810);function transformOntologyToObject(e){return e.reduce((e,t)=>{let{choice:o,display:s,subchoices:i}=t;return i&&i.length>0?e[o]={display:s,subchoices:transformOntologyToObject(i)}:e[o]={display:s},e},{})}var Ontology_OntologyDiffViewer=e=>{let{ontologies:t,open:o,onClose:s}=e,[i,r]=(0,c.useState)({choice:""}),[a,d]=(0,c.useState)(0),[h,u]=(0,c.useState)(1),[x,p]=(0,C.Z)(!1),f=(0,c.useMemo)(()=>{let e=transformOntologyToObject(t[a].ontology),o=transformOntologyToObject(t[h].ontology),s=l().merge(e,o);return(0,j.transformObjectToOntology)(s)},[t,a,h]),[g,m]=(0,c.useMemo)(()=>{let e={},o={},s=I().diff(transformOntologyToObject(t[a].ontology),transformOntologyToObject(t[h].ontology));if(!s)return[e,o];function colorChoices(t,o){for(let s of Object.keys(t))t[s].subchoices&&colorChoices(t[s].subchoices,o),e[s]=s in e?"goldenrod":o}for(let t of s){var i,n;if(t.path){if("D"===t.kind){let s=t.lhs.subchoices?(0,j.countSubchoices)(t.lhs.subchoices)+1:Object.keys(t.lhs).length;for(let[e,i]of t.path.entries()){if(e===t.path.length-1&&!t.lhs.subchoices)break;let n=i+(e/2+1);n in o?o[n].deletions+=s:o[n]={additions:0,deletions:s},e===t.path.length-1&&(o[n].deletions-=1)}(null!==(i=t.lhs.display)&&void 0!==i?i:t.lhs.subchoices)?(e[l().last(t.path)]=l().last(t.path) in e?"goldenrod":"red",t.lhs.subchoices&&colorChoices(t.lhs.subchoices,"red")):colorChoices(t.lhs,"red")}else if("N"===t.kind){let s=t.rhs.subchoices?(0,j.countSubchoices)(t.rhs.subchoices):Object.keys(t.rhs).length;for(let[e,i]of t.path.entries()){if(e===t.path.length-1&&!t.rhs.subchoices)break;let n=i+(e/2+1);n in o?o[n].additions+=s:o[n]={additions:s,deletions:0}}(null!==(n=t.rhs.display)&&void 0!==n?n:t.rhs.subchoices)?(e[l().last(t.path)]=l().last(t.path) in e?"goldenrod":"green",t.rhs.subchoices&&colorChoices(t.rhs.subchoices,"green")):colorChoices(t.rhs,"green")}else if("E"===t.kind){for(let[e,s]of t.path.entries()){if(e===t.path.length-2)break;let i=s+(e/2+1);i in o?(o[i].additions+=1,o[i].deletions+=1):o[i]={additions:1,deletions:1}}e[t.path[t.path.length-2]]="goldenrod"}}}return[e,o]},[t,a,h]),b=(0,c.useMemo)(()=>{let e=JSON.parse(JSON.stringify(m));for(let t of Object.keys(e))e[t]&&e[t].deletions>0?e[t]={deletions:e[t].deletions}:delete e[t];return e},[m]),y=(0,c.useMemo)(()=>{let e=JSON.parse(JSON.stringify(m));for(let t of Object.keys(e))e[t]&&e[t].additions>0?e[t]={additions:e[t].additions}:delete e[t];return e},[m]);return 0===t.length?(0,n.jsx)(v.$j,{}):(0,n.jsxs)(v.Vq,{open:o,onClose:s,style:{overflow:"hidden"},children:[(0,n.jsx)(v.$N,{children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("span",{style:{fontSize:18},children:"Version Diff"}),(0,n.jsxs)("div",{style:{display:"flex",paddingLeft:30},children:[(0,n.jsx)(O.Z,{ontologies:t,selectedOntology:a,setSelectedOntology:d}),(0,n.jsx)("div",{style:{marginRight:10},children:(0,n.jsx)(w.FontAwesomeIcon,{icon:["far","arrow-right"],size:"sm"})}),(0,n.jsx)(O.Z,{ontologies:t,selectedOntology:h,setSelectedOntology:u}),(0,n.jsx)("div",{onClick:()=>p(!1),style:{marginRight:10,cursor:"pointer"},children:(0,n.jsx)(w.FontAwesomeIcon,{icon:[x?"far":"fas","line-columns"],size:"sm"})}),(0,n.jsx)("div",{onClick:()=>p(!0),style:{cursor:"pointer"},children:(0,n.jsx)(w.FontAwesomeIcon,{icon:[x?"fas":"far","align-justify"],size:"sm"})})]})]})}),(0,n.jsx)(v.cZ,{children:(0,n.jsxs)("div",{children:["Legend:",(0,n.jsx)("span",{style:{marginLeft:"10px",color:"green"},children:"Additions"}),(0,n.jsx)("span",{style:{marginLeft:"10px",color:"red"},children:"Deletions"}),(0,n.jsx)("span",{style:{marginLeft:"10px",color:"goldenrod"},children:"Changes"})]})}),(0,n.jsx)(v.cZ,{style:{display:"flex",maxHeight:"60vh",padding:"0px 0px 0px 10px"},children:x?(0,n.jsx)(S.Z,{ontologies:[{name:"inline",ontology:f,rawOntology:"",changeList:[]}],selectedOntology:0,colorMap:g,changes:m}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.Z,{ontologies:t,selectedOntology:a,selectedChoice:i,setSelectedChoice:r,colorMap:g,changes:b}),(0,n.jsx)(S.Z,{ontologies:t,selectedOntology:h,selectedChoice:i,setSelectedChoice:r,colorMap:g,changes:y})]})})]})},N=o(685139),z=o(924364),Ontology_OntologyViewer=e=>{var t,o,s,i,r,a;let{ontologyHistory:d,priorityLabels:h}=e,u=M(),[x,p]=(0,c.useState)({choice:""}),[f,g]=(0,c.useState)(0),[m,y]=(0,c.useState)(!1),w=c.useRef(null),k=x.description||x.attachments&&(null===(t=x.attachments)||void 0===t?void 0:t.length)>0,I=!l().isEmpty(x.scenarios)||!l().isEmpty(x.courses)||!l().isEmpty(x.links);return((0,c.useEffect)(()=>{if(g(d.length-1),d.length>0){let e=d[d.length-1];e.ontology=(0,j.sortChoices)(e.ontology),p(e.ontology[0])}},[d]),0===d.length)?(0,n.jsx)(v.$j,{}):(0,n.jsxs)("div",{ref:w,style:{height:"70vh"},className:"jsx-74bcf2991f4fce52 "+(u.viewer||""),children:[d.length>=2&&(0,n.jsx)(Ontology_OntologyDiffViewer,{ontologies:d,open:m,onClose:()=>y(!1)}),(0,n.jsx)("div",{className:"jsx-74bcf2991f4fce52 "+(u.list||""),children:d[f]&&(0,n.jsx)(S.Z,{ontologies:d,selectedOntology:f,setSelectedOntology:g,selectedChoice:x,setSelectedChoice:p,priorityLabels:h})}),(0,n.jsxs)("div",{className:"jsx-74bcf2991f4fce52 "+(u.information||""),children:[(0,n.jsxs)("div",{className:"jsx-74bcf2991f4fce52 "+(u.header||""),children:[(0,n.jsx)("div",{className:"jsx-74bcf2991f4fce52 "+(u.title||""),children:(0,n.jsx)(v.H2,{children:null!==(a=x.display)&&void 0!==a?a:x.choice})}),d.length>=2&&(0,n.jsx)("div",{className:"jsx-74bcf2991f4fce52 "+(u.actions||""),children:(0,n.jsx)(v.zx,{onClick:()=>y(!0),type:"primary",children:"Version Diff"})})]}),(0,n.jsxs)("div",{className:"jsx-74bcf2991f4fce52 "+(u.details||""),children:[k&&(0,n.jsxs)("div",{className:"jsx-74bcf2991f4fce52 "+(u.description||""),children:[(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:z.ZP.render(x.description||"")},style:{paddingBottom:10},className:"jsx-74bcf2991f4fce52"}),null===(o=x.attachments)||void 0===o?void 0:o.map(e=>(0,n.jsx)("img",{src:e.url,className:"jsx-74bcf2991f4fce52"},e.url)),x.attachments&&!x.attachments.length&&(0,n.jsx)("img",{src:"https://static.scale.com/uploads/61095caaada54100bb515474/no_examples.png",width:"30%",className:"jsx-74bcf2991f4fce52"})]}),I&&(0,n.jsxs)("div",{className:"jsx-74bcf2991f4fce52 "+(u.training||""),children:[!l().isEmpty(x.courses)&&(0,n.jsx)(v.H3,{children:"Courses"}),null===(s=x.courses)||void 0===s?void 0:s.map(e=>{var t;return(0,n.jsx)(N.Z,{path:"/course?id=".concat(e.id),children:null!==(t=e.name)&&void 0!==t?t:e.id},e.id)}),!l().isEmpty(x.scenarios)&&(0,n.jsx)(v.H3,{children:"Scenarios"}),null===(i=x.scenarios)||void 0===i?void 0:i.map(e=>{var t;return(0,n.jsx)(N.Z,{path:"/training?trainingId=".concat(e.id),children:null!==(t=e.name)&&void 0!==t?t:e.id},e.id)}),!l().isEmpty(x.links)&&(0,n.jsx)(v.H3,{children:"Links"}),null===(r=x.links)||void 0===r?void 0:r.map(e=>(0,n.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"jsx-74bcf2991f4fce52",children:e.url},e.url))]})]})]}),(0,n.jsx)(b(),{id:"74bcf2991f4fce52",children:"li,p{line-height:1.2}"})]})};let M=(0,y.ZL)(e=>({viewer:{display:"flex",flexDirection:"row"},list:{borderRight:"1px solid ".concat(e.colors.gray10),overflow:"auto",width:"50%"},information:{width:"100%",paddingLeft:24},header:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{display:"flex",gap:"".concat(e.spacing(1),"px")},actions:{display:"flex",alignItems:"center",gap:"".concat(e.spacing(2),"px"),flexShrink:0},details:{display:"flex",height:"67vh"},description:{paddingRight:12,overflow:"auto"},training:{borderLeft:"1px solid ".concat(e.colors.gray10),display:"flex",flexDirection:"column",width:"20%",paddingLeft:10}}));(s=i||(i={})).Instructions="instructions",s.Ontology="ontology",s.Guidance="guidance";let InstructionsModal=e=>{var t,o;let{assignment:s,isOpen:i,onClose:r,instruction:m,project:b,specializedInstructions:j,instructionList:y,instructionObjectId:v,taskParams:w,instructionsURL:k,zIndex:I,isReviewMode:C,handleOpenNewTab:S}=e,O=(0,p.Z)("(max-width: ".concat(f.Et,")")),[N,z]=(0,c.useState)("instructions"),M=!!((null==w?void 0:w.minilidarSinglePathInstruction)||v||y||(null==m?void 0:null===(t=m.trim())||void 0===t?void 0:t.length));return(0,n.jsxs)(h.u_,{isOpen:i,onRequestClose:r,inset:O?"0":void 0,borderRadius:O?"0":void 0,margin:O?"0":v?"1% auto 20px":void 0,contentLabel:"Instructions",maxWidth:v?"1064px":"auto",maxHeight:v?"97vh":void 0,zIndex:I||1e3,children:[(0,n.jsx)(h.xB,{onRequestClose:r,children:(0,n.jsxs)("div",{style:{display:"inline-flex"},children:[(0,n.jsxs)("div",{children:[k&&(0,n.jsx)("div",{style:{position:"absolute"},children:(0,n.jsx)(g.zx,{href:k,target:"_blank",rel:"noopener noreferrer",type:"primary",onClick:S,children:"Open in New Tab"})}),(0,n.jsx)("div",{onClick:()=>z("instructions"),style:{cursor:"pointer",fontWeight:"instructions"===N?600:100},children:"Instructions"}),j&&(0,n.jsx)(a.Z,{style:{marginTop:"10px"},severity:"info",children:j})]}),(null==s?void 0:s.ontologyHistory)&&(0,n.jsx)("div",{onClick:()=>z("ontology"),style:{cursor:"pointer",marginLeft:"30vw",fontWeight:"ontology"===N?600:100},children:"Ontology"}),(null==s?void 0:s.ontologyInstructions)&&(0,n.jsx)("div",{onClick:()=>z("guidance"),style:{cursor:"pointer",marginLeft:"30vw",fontWeight:"guidance"===N?600:100},children:"Guidance"})]})}),(0,n.jsxs)(h.fe,{children:["instructions"===N&&!M&&"No instructions available.","instructions"===N&&M&&(!!(null==w?void 0:w.minilidarSinglePathInstruction)&&(0,n.jsx)(d.Z,{instructions:w.minilidarSinglePathInstruction})||v&&(0,n.jsx)("div",{style:{width:"1000px !important"},children:(0,n.jsx)(u.Z,{instructionObjectId:v,isEdgeCase:!!(null==w?void 0:w.edgeCaseSubtask),isReviewMode:C})})||!l().isEmpty(y)&&!y.refreshersOnly&&(0,n.jsx)(x.Z,{instructionList:y,filter:(0,x.b)(w)})||m&&(0,n.jsx)(d.Z,{instructions:m,project:b})),"ontology"===N&&(null==s?void 0:s.ontologyHistory)&&(0,n.jsx)(Ontology_OntologyViewer,{ontologyHistory:null==s?void 0:s.ontologyHistory,priorityLabels:null==s?void 0:null===(o=s.config)||void 0===o?void 0:o.priorityLabels}),"guidance"===N&&(null==s?void 0:s.ontologyInstructions)&&(0,n.jsx)(Ontology_OntologyViewer,{ontologyHistory:[null==s?void 0:s.ontologyInstructions]})]})]})}},627015:function(e,t,o){o.d(t,{Z:function(){return Ontology_OntologyList}});var s=o(824246),i=o(792739),n=o(707814),r=o(827378),l=o(629471),c=o(320280),a=o(138944),d=o(433536);let h=(0,d.ZL)(()=>({collapseButton:{cursor:"pointer",marginRight:8,width:16,fontSize:"12px",textAlign:"center",opacity:.5,"&:hover":{opacity:1}},headerTitle:{fontWeight:500,width:"100%",alignItems:"center"},headerTitleCount:{color:"var(--color-RemoGray50)"},additionCount:{color:"green"},deletionCount:{color:"red"},node:{display:"flex",padding:"8px 8px",alignItems:"center",background:"white",userSelect:"none",cursor:"pointer","&:hover":{background:"var(--color-RemoGray01)"},"&.isSelected":{background:"var(--color-RemoGray10)"}}}));var Ontology_OntologyNode=e=>{var t;let{node:o,nodeRef:n,collapsed:l,onToggleCollapsed:c,selectedChoice:d,setSelectedChoice:u,color:x,change:p,priority:f}=e,g=h(),m=(0,r.useMemo)(()=>Math.max(o.depth-1,0),[o.depth]),b=(0,r.useMemo)(()=>({paddingLeft:8+24*m,color:x}),[m,x]),j=o.subtreeSize-1;return(0,s.jsxs)("div",{ref:n,className:(0,a.default)(g.node,{isSelected:d&&d.choice===o.choice}),onClick:()=>u&&u(o),style:b,children:[j>0?(0,s.jsx)("div",{className:g.collapseButton,onClick:e=>{e.stopPropagation(),c(o.choice+o.depth)},children:(0,s.jsx)(i.FontAwesomeIcon,{icon:l?"chevron-right":"chevron-down"})}):(0,s.jsx)("div",{className:g.collapseButton,style:{opacity:0},children:(0,s.jsx)(i.FontAwesomeIcon,{color:"white",icon:"chevron-right"})}),(0,s.jsxs)("div",{className:g.headerTitle,children:[null!==(t=o.display)&&void 0!==t?t:o.choice," ",j>0&&(0,s.jsxs)("span",{style:{color:"var(--color-RemoGray50)"},children:["(",o.subtreeSize-1,")"]})," ",p&&(0,s.jsxs)("span",{style:{color:"black"},children:["(",(0,s.jsx)("span",{style:{color:"red"},children:p.deletions>0&&"-".concat(p.deletions)}),p.deletions>0&&p.additions>0&&" ",(0,s.jsx)("span",{style:{color:"green"},children:p.additions>0&&"+".concat(p.additions)}),")"]}),f&&(0,s.jsx)(i.FontAwesomeIcon,{icon:"arrow-up",style:{marginLeft:"auto"},color:"dodgerblue"})]})]})},u=o(116810),x=o(223841);let p=(0,d.ZL)({rootTitle:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",marginRight:12,fontWeight:500},node:{display:"flex",padding:"8px 8px",alignItems:"center",background:"white"}});var f=r.memo(e=>{let{onSearch:t,searchQuery:o}=e,i=p(),n=(0,r.useCallback)(e=>{let o=e.target.value;t(o)},[t]);return(0,s.jsx)("div",{className:i.node,children:(0,s.jsx)("span",{className:i.rootTitle,children:(0,s.jsx)(c.oi,{onChange:n,placeholder:"Search Choices...",size:"medium",value:o,style:{width:"100%"}})})})}),Ontology_OntologyList=e=>{var t;let{ontologies:o,selectedOntology:a,setSelectedOntology:d,selectedChoice:h,setSelectedChoice:p,colorMap:g,changes:m,priorityLabels:b}=e,[j,y]=(0,l.Z)(),v=(0,r.useMemo)(()=>{if(!o||0===o.length)return[];let e=[];for(let t of o)t.ontology=(0,n.sortChoices)(t.ontology),e.push(t);return e},[o]),w=(0,r.useMemo)(()=>v&&0!==v.length?v[a].ontology:[],[v,a]),k=(0,r.useMemo)(()=>w.some(e=>(0,n.isNestedChoice)(e)),[w]),I=(0,r.useMemo)(()=>new Set(b),[b]),[C,S]=(0,r.useState)(),[O,N]=(0,r.useState)(""),[z,M]=(0,r.useState)(new Set),[_,L]=(0,r.useState)(new Set),Z=(0,r.useCallback)(()=>{S(void 0),N(""),M(new Set),L(new Set)},[]),R=(0,r.useCallback)(e=>{if(0===e.length){Z();return}let{node:t,matches:o,matchesString:s}=(0,n.depthFirstSearchOntology)({choice:"root",subchoices:w},e,!1);M(o),L(s),S(t)},[w]);(0,r.useEffect)(()=>{1===z.size&&p&&z.forEach(e=>p(e))},[z]),(0,x.Z)(()=>{R(O)},100,[O]);let E=(0,r.useMemo)(()=>C||{choice:"root",subchoices:w},[C,w]),collapseNodes=()=>{let e=(0,n.getOntologyPreorderTraversal)({choice:"root",subchoices:w}).filter(e=>e.depth>0).map(e=>e.choice+e.depth);for(let t of e)y.add(t)};(0,r.useEffect)(()=>{0===j.size&&collapseNodes()},[w]);let T=(0,r.useMemo)(()=>(0,n.getOntologyPreorderTraversal)(E,j,g).filter(e=>{let{choice:t,flagged:o}=e;return!o&&"root"!==t}),[E,j,g]),H=(0,r.useRef)(null),[P,F]=(0,r.useState)({}),[W,A]=(0,r.useState)("");(0,r.useEffect)(()=>{F(e=>T.reduce((t,o)=>(t[o.choice]=e[o.choice]||(0,r.createRef)(),t),{}))},[T]),(0,r.useEffect)(()=>{if(!h)return;let e=(0,n.getIndicesToChoice)(w,h.choice);if(0===e.length)return;let t=w,o=0;for(;o+1<e.length;){let s=t[e[o]];j.has(s.choice+(o+1))&&y.remove(s.choice+(o+1)),t=s.subchoices,o++}A(h.choice)},[h]),(0,r.useEffect)(()=>{var e;if(!H.current||!W)return;let t=null===(e=P[W])||void 0===e?void 0:e.current;t&&(H.current.focus(),t.scrollIntoView({block:"center",behavior:"smooth"}),A(""))},[W,P]);let B=(null!==(t=o[a].name)&&void 0!==t?t:"").length>10;return(0,s.jsxs)("div",{style:{width:"100%",overflowX:"hidden"},children:[(0,s.jsxs)("div",{style:{display:B?"block":"flex",padding:d||k?8:0},children:[d&&(0,s.jsx)(u.Z,{ontologies:o,selectedOntology:a,setSelectedOntology:d}),k&&(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsx)(c.u,{title:"Expand all ontology choices",children:(0,s.jsx)("div",{onClick:y.reset,style:{fontSize:30},children:(0,s.jsx)(i.FontAwesomeIcon,{icon:["far","plus-square"],style:{cursor:"pointer"},size:"sm"})})}),(0,s.jsx)(c.u,{title:"Collapse all ontology choices",children:(0,s.jsx)("div",{onClick:collapseNodes,style:{fontSize:30,paddingLeft:20},children:(0,s.jsx)(i.FontAwesomeIcon,{icon:["far","minus-square"],style:{cursor:"pointer"},size:"sm"})})})]})]}),(0,s.jsx)(f,{searchQuery:O,onSearch:N}),(0,s.jsx)("div",{ref:H,children:T.map(e=>{var t;return(0,s.jsx)(Ontology_OntologyNode,{node:e,nodeRef:P[e.choice],collapsed:j.has(e.choice+e.depth),onToggleCollapsed:y.toggle,selectedChoice:h,setSelectedChoice:p,color:g?e.nodeColor:_.has(e.choice)?"purple":"black",change:m&&m[e.choice+e.depth],priority:I.has(null!==(t=e.display)&&void 0!==t?t:e.choice)},e.choice+e.depth+e.nodeColor)})})]})}},116810:function(e,t,o){var s=o(824246),i=o(298784),n=o.n(i);o(827378);var r=o(320280);t.Z=e=>{var t,o;let{ontologies:i,selectedOntology:l,setSelectedOntology:c}=e;return 1===i.length?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(r.Ph,{onChange:e=>{c(e.target.value)},value:null!=l?l:i.length-1,placeholder:null!==(o=null===(t=n().nth(i,l))||void 0===t?void 0:t.name)&&void 0!==o?o:"v".concat(l),style:{marginRight:10,marginBottom:10,maxWidth:400},children:i.map((e,t)=>{var o;return(0,s.jsx)(r.Wx,{value:t,children:null!==(o=e.name)&&void 0!==o?o:"v".concat(t)},t)})})}},202340:function(e,t,o){o.d(t,{$:function(){return l}});var s=o(50682),i=o.n(s),n=o(298784),r=o.n(n);let l=r().debounce(()=>{i().rebuild()})}}]);