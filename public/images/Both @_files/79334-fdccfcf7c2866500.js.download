(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79334],{450973:function(e,t){"use strict";var i,n,s,l,p,u,d,m,h,g;t.FunctionDeclarationSchemaType=void 0,(n=t.FunctionDeclarationSchemaType||(t.FunctionDeclarationSchemaType={})).STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f=["user","model","function","system"];t.HarmCategory=void 0,(s=t.HarmCategory||(t.HarmCategory={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HarmBlockThreshold=void 0,(l=t.HarmBlockThreshold||(t.HarmBlockThreshold={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",l.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",l.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",l.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",l.BLOCK_NONE="BLOCK_NONE",t.HarmProbability=void 0,(p=t.HarmProbability||(t.HarmProbability={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",p.NEGLIGIBLE="NEGLIGIBLE",p.LOW="LOW",p.MEDIUM="MEDIUM",p.HIGH="HIGH",t.BlockReason=void 0,(u=t.BlockReason||(t.BlockReason={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",u.SAFETY="SAFETY",u.OTHER="OTHER",t.FinishReason=void 0,(d=t.FinishReason||(t.FinishReason={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",d.STOP="STOP",d.MAX_TOKENS="MAX_TOKENS",d.SAFETY="SAFETY",d.RECITATION="RECITATION",d.OTHER="OTHER",t.TaskType=void 0,(m=t.TaskType||(t.TaskType={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",m.RETRIEVAL_QUERY="RETRIEVAL_QUERY",m.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",m.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",m.CLASSIFICATION="CLASSIFICATION",m.CLUSTERING="CLUSTERING",t.FunctionCallingMode=void 0,(h=t.FunctionCallingMode||(t.FunctionCallingMode={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",h.AUTO="AUTO",h.ANY="ANY",h.NONE="NONE";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GoogleGenerativeAIError=class GoogleGenerativeAIError extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}};let GoogleGenerativeAIResponseError=class GoogleGenerativeAIResponseError extends GoogleGenerativeAIError{constructor(e,t){super(e),this.response=t}};let GoogleGenerativeAIFetchError=class GoogleGenerativeAIFetchError extends GoogleGenerativeAIError{constructor(e,t,i,n){super(e),this.status=t,this.statusText=i,this.errorDetails=n}};let GoogleGenerativeAIRequestInputError=class GoogleGenerativeAIRequestInputError extends GoogleGenerativeAIError{};(g=i||(i={})).GENERATE_CONTENT="generateContent",g.STREAM_GENERATE_CONTENT="streamGenerateContent",g.COUNT_TOKENS="countTokens",g.EMBED_CONTENT="embedContent",g.BATCH_EMBED_CONTENTS="batchEmbedContents";let RequestUrl=class RequestUrl{constructor(e,t,i,n,s){this.model=e,this.task=t,this.apiKey=i,this.stream=n,this.requestOptions=s}toString(){var e,t;let i=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta",n=(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com",s=`${n}/${i}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}};async function getHeaders(e){var t;let i=new Headers;i.append("Content-Type","application/json"),i.append("x-goog-api-client",function(e){let t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.13.0"),t.join(" ")}(e.requestOptions)),i.append("x-goog-api-key",e.apiKey);let n=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(e){throw new GoogleGenerativeAIRequestInputError(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${e.message}`)}for(let[e,t]of n.entries()){if("x-goog-api-key"===e)throw new GoogleGenerativeAIRequestInputError(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new GoogleGenerativeAIRequestInputError(`Header name ${e} can only be set using the apiClient field`);i.append(e,t)}}return i}async function constructModelRequest(e,t,i,n,s,l){let p=new RequestUrl(e,t,i,n,l);return{url:p.toString(),fetchOptions:Object.assign(Object.assign({},function(e){let t={};if((null==e?void 0:e.timeout)>=0){let i=new AbortController,n=i.signal;setTimeout(()=>i.abort(),e.timeout),t.signal=n}return t}(l)),{method:"POST",headers:await getHeaders(p),body:s})}}async function makeModelRequest(e,t,i,n,s,l,p=fetch){let{url:u,fetchOptions:d}=await constructModelRequest(e,t,i,n,s,l);return makeRequest(u,d,p)}async function makeRequest(e,t,i=fetch){let n;try{n=await i(e,t)}catch(t){!function(e,t){let i=e;throw e instanceof GoogleGenerativeAIFetchError||e instanceof GoogleGenerativeAIRequestInputError||((i=new GoogleGenerativeAIError(`Error fetching from ${t.toString()}: ${e.message}`)).stack=e.stack),i}(t,e)}return n.ok||await handleResponseNotOk(n,e),n}async function handleResponseNotOk(e,t){let i,n="";try{let t=await e.json();n=t.error.message,t.error.details&&(n+=` ${JSON.stringify(t.error.details)}`,i=t.error.details)}catch(e){}throw new GoogleGenerativeAIFetchError(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,i)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function addHelpers(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(e.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(e)}`,e);return function(e){var t,i,n,s;let l=[];if(null===(i=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===i?void 0:i.parts)for(let t of null===(s=null===(n=e.candidates)||void 0===n?void 0:n[0].content)||void 0===s?void 0:s.parts)t.text&&l.push(t.text);return l.length>0?l.join(""):""}(e)}if(e.promptFeedback)throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(e.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),getFunctionCalls(e)[0]}if(e.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(e.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(e)}`,e);return getFunctionCalls(e)}if(e.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(e)}`,e)},e}function getFunctionCalls(e){var t,i,n,s;let l=[];if(null===(i=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===i?void 0:i.parts)for(let t of null===(s=null===(n=e.candidates)||void 0===n?void 0:n[0].content)||void 0===s?void 0:s.parts)t.functionCall&&l.push(t.functionCall);return l.length>0?l:void 0}let y=[t.FinishReason.RECITATION,t.FinishReason.SAFETY];function hadBadFinishReason(e){return!!e.finishReason&&y.includes(e.finishReason)}function formatBlockErrorMessage(e){var t,i,n;let s="";if((!e.candidates||0===e.candidates.length)&&e.promptFeedback)s+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(s+=` due to ${e.promptFeedback.blockReason}`),(null===(i=e.promptFeedback)||void 0===i?void 0:i.blockReasonMessage)&&(s+=`: ${e.promptFeedback.blockReasonMessage}`);else if(null===(n=e.candidates)||void 0===n?void 0:n[0]){let t=e.candidates[0];hadBadFinishReason(t)&&(s+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(s+=`: ${t.finishMessage}`))}return s}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}"function"==typeof SuppressedError&&SuppressedError;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function getResponsePromise(e){let t=[],i=e.getReader();for(;;){let{done:e,value:n}=await i.read();if(e)return addHelpers(function(e){let t=e[e.length-1],i={promptFeedback:null==t?void 0:t.promptFeedback};for(let t of e){if(t.candidates)for(let e of t.candidates){let t=e.index;if(i.candidates||(i.candidates=[]),i.candidates[t]||(i.candidates[t]={index:e.index}),i.candidates[t].citationMetadata=e.citationMetadata,i.candidates[t].finishReason=e.finishReason,i.candidates[t].finishMessage=e.finishMessage,i.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){i.candidates[t].content||(i.candidates[t].content={role:e.content.role||"user",parts:[]});let n={};for(let s of e.content.parts)s.text&&(n.text=s.text),s.functionCall&&(n.functionCall=s.functionCall),0===Object.keys(n).length&&(n.text=""),i.candidates[t].content.parts.push(n)}}t.usageMetadata&&(i.usageMetadata=t.usageMetadata)}return i}(t));t.push(n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateContentStream(e,t,n,s){let l=await makeModelRequest(t,i.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),s);return function(e){let t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),i=function(e){let t=e.getReader(),i=new ReadableStream({start(e){let i="";return function pump(){return t.read().then(({value:t,done:n})=>{let s;if(n){if(i.trim()){e.error(new GoogleGenerativeAIError("Failed to parse stream"));return}e.close();return}let l=(i+=t).match(b);for(;l;){try{s=JSON.parse(l[1])}catch(t){e.error(new GoogleGenerativeAIError(`Error parsing JSON response: "${l[1]}"`));return}e.enqueue(s),l=(i=i.substring(l[0].length)).match(b)}return pump()})}()}});return i}(t),[n,s]=i.tee();return{stream:function(e){return function(e,t,i){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,s=i.apply(e,t||[]),l=[];return n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n;function verb(e){s[e]&&(n[e]=function(t){return new Promise(function(i,n){l.push([e,t,i,n])>1||resume(e,t)})})}function resume(e,t){try{var i;(i=s[e](t)).value instanceof __await?Promise.resolve(i.value.v).then(fulfill,reject):settle(l[0][2],i)}catch(e){settle(l[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),l.shift(),l.length&&resume(l[0][0],l[0][1])}}(this,arguments,function*(){let t=e.getReader();for(;;){let{value:e,done:i}=yield __await(t.read());if(i)break;yield yield __await(addHelpers(e))}})}(n),response:getResponsePromise(s)}}(l)}async function generateContent(e,t,n,s){let l=await makeModelRequest(t,i.GENERATE_CONTENT,e,!1,JSON.stringify(n),s),p=await l.json(),u=addHelpers(p);return{response:u}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function formatSystemInstruction(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function formatNewContent(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(let i of e)"string"==typeof i?t.push({text:i}):t.push(i);return function(e){let t={role:"user",parts:[]},i={role:"function",parts:[]},n=!1,s=!1;for(let l of e)"functionResponse"in l?(i.parts.push(l),s=!0):(t.parts.push(l),n=!0);if(n&&s)throw new GoogleGenerativeAIError("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new GoogleGenerativeAIError("No content is provided for sending chat message.");return n?t:i}(t)}function formatGenerateContentInput(e){let t;if(e.contents)t=e;else{let i=formatNewContent(e);t={contents:[i]}}return e.systemInstruction&&(t.systemInstruction=formatSystemInstruction(e.systemInstruction)),t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T=["text","inlineData","functionCall","functionResponse"],S={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall"],system:["text"]},_="SILENT_ERROR";let ChatSession=class ChatSession{constructor(e,t,i,n){this.model=t,this.params=i,this.requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==i?void 0:i.history)&&(function(e){let t=!1;for(let i of e){let{role:e,parts:n}=i;if(!t&&"user"!==e)throw new GoogleGenerativeAIError(`First content should be with role 'user', got ${e}`);if(!f.includes(e))throw new GoogleGenerativeAIError(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(f)}`);if(!Array.isArray(n))throw new GoogleGenerativeAIError("Content should have 'parts' property with an array of Parts");if(0===n.length)throw new GoogleGenerativeAIError("Each Content should have at least one part");let s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0};for(let e of n)for(let t of T)t in e&&(s[t]+=1);let l=S[e];for(let t of T)if(!l.includes(t)&&s[t]>0)throw new GoogleGenerativeAIError(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var t,i,n,s,l,p;let u;await this._sendPromise;let d=formatNewContent(e),m={safetySettings:null===(t=this.params)||void 0===t?void 0:t.safetySettings,generationConfig:null===(i=this.params)||void 0===i?void 0:i.generationConfig,tools:null===(n=this.params)||void 0===n?void 0:n.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(l=this.params)||void 0===l?void 0:l.systemInstruction,cachedContent:null===(p=this.params)||void 0===p?void 0:p.cachedContent,contents:[...this._history,d]};return this._sendPromise=this._sendPromise.then(()=>generateContent(this._apiKey,this.model,m,this.requestOptions)).then(e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(d);let i=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(i)}else{let t=formatBlockErrorMessage(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}u=e}),await this._sendPromise,u}async sendMessageStream(e){var t,i,n,s,l,p;await this._sendPromise;let u=formatNewContent(e),d={safetySettings:null===(t=this.params)||void 0===t?void 0:t.safetySettings,generationConfig:null===(i=this.params)||void 0===i?void 0:i.generationConfig,tools:null===(n=this.params)||void 0===n?void 0:n.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(l=this.params)||void 0===l?void 0:l.systemInstruction,cachedContent:null===(p=this.params)||void 0===p?void 0:p.cachedContent,contents:[...this._history,u]},m=generateContentStream(this._apiKey,this.model,d,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>m).catch(e=>{throw Error(_)}).then(e=>e.response).then(e=>{if(e.candidates&&e.candidates.length>0){this._history.push(u);let t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{let t=formatBlockErrorMessage(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==_&&console.error(e)}),m}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function countTokens(e,t,n,s){let l=await makeModelRequest(t,i.COUNT_TOKENS,e,!1,JSON.stringify(n),s);return l.json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function embedContent(e,t,n,s){let l=await makeModelRequest(t,i.EMBED_CONTENT,e,!1,JSON.stringify(n),s);return l.json()}async function batchEmbedContents(e,t,n,s){let l=n.requests.map(e=>Object.assign(Object.assign({},e),{model:t})),p=await makeModelRequest(t,i.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:l}),s);return p.json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GenerativeModel=class GenerativeModel{constructor(e,t,i){this.apiKey=e,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=formatSystemInstruction(t.systemInstruction),this.cachedContent=t.cachedContent,this.requestOptions=i||{}}async generateContent(e){var t;let i=formatGenerateContentInput(e);return generateContent(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},i),this.requestOptions)}async generateContentStream(e){var t;let i=formatGenerateContentInput(e);return generateContentStream(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},i),this.requestOptions)}startChat(e){var t;return new ChatSession(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this.requestOptions)}async countTokens(e){let t=function(e,t){let i={},n=null!=e.generateContentRequest;if(e.contents){if(n)throw new GoogleGenerativeAIRequestInputError("CountTokensRequest must have one of contents or generateContentRequest, not both.");i=Object.assign({},e)}else if(n)(i=Object.assign({},e)).generateContentRequest.model=t;else{let t=formatNewContent(e);i.contents=[t]}return i}(e,this.model);return countTokens(this.apiKey,this.model,t,this.requestOptions)}async embedContent(e){let t=function(e){if("string"==typeof e||Array.isArray(e)){let t=formatNewContent(e);return{content:t}}return e}(e);return embedContent(this.apiKey,this.model,t,this.requestOptions)}async batchEmbedContents(e){return batchEmbedContents(this.apiKey,this.model,e,this.requestOptions)}};t.ChatSession=ChatSession,t.GenerativeModel=GenerativeModel,t.GoogleGenerativeAI=/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new GoogleGenerativeAIError("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new GenerativeModel(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t){if(!e.name)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `name` field.");if(!e.model)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `model` field.");let i={model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e};return new GenerativeModel(this.apiKey,i,t)}},t.GoogleGenerativeAIError=GoogleGenerativeAIError,t.GoogleGenerativeAIFetchError=GoogleGenerativeAIFetchError,t.GoogleGenerativeAIRequestInputError=GoogleGenerativeAIRequestInputError,t.GoogleGenerativeAIResponseError=GoogleGenerativeAIResponseError,t.POSSIBLE_ROLES=f},41875:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoReviewerModelInfo=t.AutoReviewerModelOption=t.OutputVerbosity=t.LLMCheckConfigsSchema=t.LLMCheckConfigSchema=t.AutoReviewerStage=void 0;var n,s,l,p,u,d,m=i(689510);t.AutoReviewerStage=p,(n=p||(t.AutoReviewerStage=p={})).Before="before",n.Turn="turn",n.After="after",m.z.union([m.z.literal("string"),m.z.literal("number"),m.z.literal("boolean")]);let h=m.z.object({key:m.z.string(),type:m.z.union([m.z.literal("equals"),m.z.literal("notEquals"),m.z.literal("contains"),m.z.literal("notContains")]),value:m.z.string()}),g=m.z.object({key:m.z.string(),type:m.z.union([m.z.literal("equals"),m.z.literal("notEquals"),m.z.literal("greaterThan"),m.z.literal("lessThan")]),value:m.z.number()}),f=m.z.object({key:m.z.string(),type:m.z.literal("equals"),value:m.z.boolean()}),y=m.z.union([h,f,g]),b=m.z.array(m.z.array(y)),T=m.z.object({type:m.z.union([m.z.literal("equals"),m.z.literal("notEquals"),m.z.literal("contains"),m.z.literal("notContains")]),value:m.z.string()}),S=m.z.object({key:m.z.string(),template:m.z.string(),runConditions:b,reportExplanation:m.z.boolean().optional(),sendExplanationToContributorsAsFeedback:m.z.boolean().optional(),runPerTurn:m.z.boolean().optional(),includeAttachments:m.z.boolean().optional(),selectedModel:m.z.string().optional(),outputVerbosity:m.z.string().optional()}),_=S.merge(m.z.object({outputType:m.z.literal("string"),errorCondition:T})),v=m.z.object({type:m.z.union([m.z.literal("equals"),m.z.literal("notEquals"),m.z.literal("greaterThan"),m.z.literal("lessThan")]),value:m.z.number()}),L=S.merge(m.z.object({outputType:m.z.literal("number"),errorCondition:v})),C=m.z.object({type:m.z.literal("equals"),value:m.z.boolean()}),I=S.merge(m.z.object({outputType:m.z.literal("boolean"),errorCondition:C})),R=m.z.union([_,L,I]);t.LLMCheckConfigSchema=R;let P=m.z.array(R);t.LLMCheckConfigsSchema=P,m.z.union([T,v,C]),t.OutputVerbosity=u,(s=u||(t.OutputVerbosity=u={})).BRIEF="brief",s.NORMAL="normal",s.DETAILED="detailed",t.AutoReviewerModelOption=d,(l=d||(t.AutoReviewerModelOption=d={})).GPT_4o="gpt_4o",l.GPT_4o_MINI="gpt_4o_mini",l.GPT_o1_PREVIEW="gpt_o1_preview",l.GPT_o1_MINI="gpt_o1_mini",l.GPT_o3="gpt_o3",l.GPT_o3_HIGH="gpt_o3_high",l.GPT_o3_MINI="gpt_o3_mini",l.GPT_o3_MINI_HIGH="gpt_o3_mini_high",l.DEEPSEEK_R1_70b="deepseek_r1_70b",l.DEEPSEEK_R1_32b="deepseek_r1_32b";let E={[d.GPT_4o]:{name:"GPT-4o",isAccessibleByDefault:!0},[d.GPT_4o_MINI]:{name:"GPT-4o-mini",isAccessibleByDefault:!0},[d.GPT_o1_PREVIEW]:{name:"o1-preview",isAccessibleByDefault:!1},[d.GPT_o1_MINI]:{name:"o1-mini",isAccessibleByDefault:!0},[d.GPT_o3]:{name:"o3",isAccessibleByDefault:!1},[d.GPT_o3_HIGH]:{name:"o3-high",isAccessibleByDefault:!1},[d.GPT_o3_MINI]:{name:"o3-mini",isAccessibleByDefault:!0},[d.GPT_o3_MINI_HIGH]:{name:"o3-mini-high",isAccessibleByDefault:!0},[d.DEEPSEEK_R1_70b]:{name:"DeepSeek R1 70B",isAccessibleByDefault:!0},[d.DEEPSEEK_R1_32b]:{name:"DeepSeek R1 32B",isAccessibleByDefault:!0}};t.AutoReviewerModelInfo=E},364928:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let AgentEnvironmentV2Converter=class AgentEnvironmentV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.AgentEnvironment)throw Error(`Expected AgentEnvironment step response, got ${e.type}`);return{type:n.InteractionStepType.AgentEnvironment,output:"",context:e.output}}getVariablesForPrpLinter(e){return{}}};t.AgentEnvironmentV2Converter=AgentEnvironmentV2Converter},732206:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let AgentExecutionV2Converter=class AgentExecutionV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.AgentExecution)throw Error(`Expected AgentExecution step response, got ${e.type}`);return{type:n.InteractionStepType.AgentExecution,output:"",context:e.output}}getVariablesForPrpLinter(e){return{}}};t.AgentExecutionV2Converter=AgentExecutionV2Converter},133593:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let AudioFullDuplexV2Converter=class AudioFullDuplexV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.AudioFullDuplex)throw Error("Step response is not an audio full duplex");return{type:n.InteractionStepType.AudioFullDuplex,output:"",context:{modelAudio:e.output.modelAudio,userAudio:e.output.userAudio,audio:e.output.audio,transcript:e.output.transcript,dynamicModelParams:e.output.dynamicModelParams,duration:e.output.duration}}}};t.AudioFullDuplexV2Converter=AudioFullDuplexV2Converter},798167:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358);let AudioPlayerV2Converter=class AudioPlayerV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.AudioPlayer)throw Error(`Invalid step type: ${e.type}`);return{type:s.InteractionStepType.AudioPlayer,output:"",context:{}}}};t.AudioPlayerV2Converter=AudioPlayerV2Converter},96161:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let AudioRecordingV2Converter=class AudioRecordingV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.AudioRecording)throw Error("Step response is not an audio recording");return{type:n.InteractionStepType.AudioRecording,output:"",context:{audio:e.output.audio}}}};t.AudioRecordingV2Converter=AudioRecordingV2Converter},18353:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let AudioTextCollectionV2Converter=class AudioTextCollectionV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.AudioTextCollection)throw Error("Step response is not an audio text collection");return{type:n.InteractionStepType.AudioTextCollection,output:"",context:e.output.annotations}}};t.AudioTextCollectionV2Converter=AudioTextCollectionV2Converter},668202:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLinterResponseV2Converter=class{}},8221:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358);let BasicInputV2Converter=class BasicInputV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.BasicInput)throw Error(`Expected BasicInput step response, got ${e.type}`);return{type:s.InteractionStepType.BasicInput,output:e.output.content,context:{}}}getVariablesForPrpLinter(e){return{}}};t.BasicInputV2Converter=BasicInputV2Converter},458158:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let ExternalAppV2Converter=class ExternalAppV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.ExternalApp)throw Error("Step response is not an external app");return{type:n.InteractionStepType.ExternalApp,output:"",context:{}}}};t.ExternalAppV2Converter=ExternalAppV2Converter},407154:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let GenUIV2Converter=class GenUIV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.GenUI)throw Error("Step response is not a gen ui");return{type:n.InteractionStepType.GenUI,output:"",context:e.output}}};t.GenUIV2Converter=GenUIV2Converter},243790:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let HistoryViewerV2Converter=class HistoryViewerV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.HistoryViewer)throw Error("Step response is not a history viewer");return{type:n.InteractionStepType.HistoryViewer,output:"",context:{}}}};t.HistoryViewerV2Converter=HistoryViewerV2Converter},664744:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let InstructionV2Converter=class InstructionV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.Instruction)throw Error("Step response is not an instruction");return{type:n.InteractionStepType.Instruction,output:"",context:{}}}};t.InstructionV2Converter=InstructionV2Converter},990110:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358);let MetadataEditorV2Converter=class MetadataEditorV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.MetadataEditor)throw Error(`Expected MetadataEditor step response, got ${e.type}`);return{type:s.InteractionStepType.MetadataEditor,output:e.output.content,context:{baseMetadata:e.output.originalContent,metadataType:"plaintext"}}}};t.MetadataEditorV2Converter=MetadataEditorV2Converter},796598:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let MetadataViewerV2Converter=class MetadataViewerV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.MetadataViewer)throw Error("Step response is not a metadata viewer");return{type:n.InteractionStepType.MetadataViewer,output:"",context:{}}}};t.MetadataViewerV2Converter=MetadataViewerV2Converter},827143:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358);let ModelResponseEditorV2Converter=class ModelResponseEditorV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.ModelResponseEditor)throw Error(`Expected ModelResponseEditor step response, got ${e.type}`);return{type:s.InteractionStepType.ModelResponseEditor,output:e.output.content,context:{baseResponse:e.output.originalContent,originalText:e.output.originalContent,candidate:e.output.candidate}}}getVariablesForPrpLinter(e){return{}}};t.ModelResponseEditorV2Converter=ModelResponseEditorV2Converter},231568:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358);let ModelResponseInputV2Converter=class ModelResponseInputV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.ModelResponseInput)throw Error(`Expected ModelResponseInput step response, got ${e.type}`);return{type:s.InteractionStepType.ModelResponseInput,output:"",context:{candidate:e.output.candidate}}}getVariablesForPrpLinter(e){return{}}};t.ModelResponseInputV2Converter=ModelResponseInputV2Converter},19661:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let ModelResponsePreviewV2Converter=class ModelResponsePreviewV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.ModelResponsePreview)throw Error("Step response is not a model response preview");return{type:n.InteractionStepType.ModelResponsePreview,context:{candidates:e.output.candidates.map((e,t)=>({id:e.responseId,index:t,state:"completed",message:{content:e.message.content,role:n.MessageRole.Assistant}}))},output:""}}};t.ModelResponsePreviewV2Converter=ModelResponsePreviewV2Converter},515632:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358);let ModelResponseRankingV2Converter=class ModelResponseRankingV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.ModelResponseRanking)throw Error(`Expected ModelResponseRanking step response, got ${e.type}`);return{type:s.InteractionStepType.ModelResponseRanking,output:"",context:{candidates:e.output.candidates,rankedCandidates:e.output.rankedCandidates}}}getVariablesForPrpLinter(e){return{}}};t.ModelResponseRankingV2Converter=ModelResponseRankingV2Converter},538575:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358);let ModelResponseSelectorV2Converter=class ModelResponseSelectorV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.ModelResponseSelector)throw Error(`Expected ModelResponseSelector step response, got ${e.type}`);let t=e.output.candidates,i=e.output.responseIdx;return{type:s.InteractionStepType.ModelResponseSelector,context:{messages:t.map(e=>({content:e.message.content,role:s.MessageRole.Assistant})),candidates:t,displayOrder:t.map((e,t)=>t),selectedId:t[i].id,selectedIndex:i},output:""}}getVariablesForPrpLinter(e){return{}}};t.ModelResponseSelectorV2Converter=ModelResponseSelectorV2Converter},496256:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358);let MultiChannelAudioV2Converter=class MultiChannelAudioV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.MultiChannelAudio)throw Error("Step response is not a multi channel audio");return{type:s.InteractionStepType.AudioRecording,output:"",context:{combinedAudio:e.output.combinedAudio}}}};t.MultiChannelAudioV2Converter=MultiChannelAudioV2Converter},898567:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let MultiChatV2Converter=class MultiChatV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.MultiChat)throw Error("Step response is not a multi chat");return{type:n.InteractionStepType.MultiChat,output:"",context:{}}}};t.MultiChatV2Converter=MultiChatV2Converter},899795:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let ProcessSupervisionAgentExecutionV2Converter=class ProcessSupervisionAgentExecutionV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.ProcessSupervisionAgentExecution)throw Error(`Expected ProcessSupervisionAgentExecution step response, got ${e.type}`);return{type:n.InteractionStepType.ProcessSupervisionAgentExecution,output:"",context:e.output}}getVariablesForPrpLinter(e){return{}}};t.ProcessSupervisionAgentExecutionV2Converter=ProcessSupervisionAgentExecutionV2Converter},780508:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358);let PromptInputV2Converter=class PromptInputV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.PromptInput)throw Error(`Expected PromptInput step response, got ${e.type}`);return{type:s.InteractionStepType.PromptInput,output:e.output.content,context:{attachments:e.output.attachments,referenceTexts:e.output.referenceTexts}}}getVariablesForPrpLinter(e){return{}}};t.PromptInputV2Converter=PromptInputV2Converter},793930:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358),l=i(212445);let PromptTextCollectionV2Converter=class PromptTextCollectionV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.PromptTextCollection)throw Error(`Expected PromptTextCollection step response, got ${e.type}`);let t={annotations:l.inferRichFormResponseToExternalType(e.output)};return{type:s.InteractionStepType.PromptTextCollection,output:"",context:{response:t}}}getVariablesForPrpLinter(e){return{}}};t.PromptTextCollectionV2Converter=PromptTextCollectionV2Converter},894478:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202),l=i(212445);let QualityMeasurementV2Converter=class QualityMeasurementV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.QualityMeasurement)throw Error("Step response is not a quality measurement");let t=l.inferRichFormResponseToExternalType(e.output.content);return{type:n.InteractionStepType.QualityMeasurement,output:"",context:{response:{annotations:t}}}}};t.QualityMeasurementV2Converter=QualityMeasurementV2Converter},965942:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358),l=i(212445);let QuantitativeModelResponseSelectorV2Converter=class QuantitativeModelResponseSelectorV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.QuantitativeModelResponseSelector)throw Error(`Expected QuantitativeModelResponseSelector step response, got ${e.type}`);let t=e.output.preferenceLikert,i={annotations:l.inferRichFormResponseToExternalType({...e.output.fieldResponses,...null!=t?{preferenceLikert:t,ranking_likert:t}:{}})},n=e.output.candidates,p=e.output.responseIdx;return{type:s.InteractionStepType.QuantitativeModelResponseSelector,output:"",context:{selectedId:n[p]?.id,candidates:n,response:i}}}getVariablesForPrpLinter(e){return{}}};t.QuantitativeModelResponseSelectorV2Converter=QuantitativeModelResponseSelectorV2Converter},733332:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358),l=i(212445);let ResponseTextCollectionV2Converter=class ResponseTextCollectionV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.ResponseTextCollection)throw Error(`Expected ResponseTextCollection step response, got ${e.type}`);return{type:s.InteractionStepType.ResponseTextCollection,output:"",context:{responseId:e.output.responseId,response:{annotations:l.inferRichFormResponseToExternalType(e.output.annotations)},candidate:e.output.candidate?[e.output.candidate]:void 0}}}getVariablesForPrpLinter(e){return{}}};t.ResponseTextCollectionV2Converter=ResponseTextCollectionV2Converter},948741:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358);let RubricCriteriaBuilderV2Converter=class RubricCriteriaBuilderV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.RubricCriteriaBuilder)throw Error(`Expected RubricCriteriaBuilder step response, got ${e.type}`);return{type:s.InteractionStepType.RubricCriteriaBuilder,output:"",context:e.output}}getVariablesForPrpLinter(e){return{}}};t.RubricCriteriaBuilderV2Converter=RubricCriteriaBuilderV2Converter},341534:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358);let RubricCriteriaRatingV2Converter=class RubricCriteriaRatingV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.RubricCriteriaRating)throw Error(`Expected RubricCriteriaRating step response, got ${e.type}`);return{type:s.InteractionStepType.RubricCriteriaRating,output:"",context:{candidates:e.output.candidates,responseRatings:e.output.responseRatings}}}getVariablesForPrpLinter(e){return{}}};t.RubricCriteriaRatingV2Converter=RubricCriteriaRatingV2Converter},523250:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let RubricEvaluationViewerV2Converter=class RubricEvaluationViewerV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.RubricEvaluationViewer)throw Error("Step response is not a rubric evaluation viewer");return{type:n.InteractionStepType.RubricEvaluationViewer,output:"",context:{}}}};t.RubricEvaluationViewerV2Converter=RubricEvaluationViewerV2Converter},308584:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358),l=i(212445);let TextCollectionPerResponseV2Converter=class TextCollectionPerResponseV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e,additionalData:t}){if(e.type!==s.InteractionStepType.TextCollectionPerResponse)throw Error(`Expected TextCollectionPerResponse step response, got ${e.type}`);let i={};if(e.output.forEach(e=>{let{id:t,output:n}=e,s={annotations:l.inferRichFormResponseToExternalType(n)};i[t]=s}),!t.candidates)throw Error("Cannot convert text collection per response without additionalData.candidates");return{type:s.InteractionStepType.TextCollectionPerResponse,output:"",context:{candidates:t.candidates,annotations:i}}}getVariablesForPrpLinter(e){return{}}};t.TextCollectionPerResponseV2Converter=TextCollectionPerResponseV2Converter},917056:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(668202),s=i(854358),l=i(212445);let TextCollectionV2Converter=class TextCollectionV2Converter extends n.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==s.InteractionStepType.TextCollection)throw Error(`Expected TextCollection step response, got ${e.type}`);let t={annotations:l.inferRichFormResponseToExternalType(e.output)};return{type:s.InteractionStepType.TextCollection,output:"",context:{response:t}}}getVariablesForPrpLinter(e){return{}}};t.TextCollectionV2Converter=TextCollectionV2Converter},607784:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(854358),s=i(668202);let UnitTestCollectionV2Converter=class UnitTestCollectionV2Converter extends s.BaseLinterResponseV2Converter{convertStepResponseV2ToV1({stepResponse:e}){if(e.type!==n.InteractionStepType.UnitTestCollection)throw Error("Step response is not a unit test collection");return{type:n.InteractionStepType.UnitTestCollection,output:"",context:{tests:e.output.tests,discardedTests:e.output.discardedTests,code:e.output.code}}}};t.UnitTestCollectionV2Converter=UnitTestCollectionV2Converter},869816:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},s=_interopRequireWildcard(i(668202));Object.keys(s).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var l=_interopRequireWildcard(i(780508));Object.keys(l).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))});var p=_interopRequireWildcard(i(8221));Object.keys(p).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))});var u=_interopRequireWildcard(i(827143));Object.keys(u).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))});var d=_interopRequireWildcard(i(990110));Object.keys(d).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))});var m=_interopRequireWildcard(i(538575));Object.keys(m).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))});var h=_interopRequireWildcard(i(793930));Object.keys(h).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))});var g=_interopRequireWildcard(i(917056));Object.keys(g).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))});var f=_interopRequireWildcard(i(308584));Object.keys(f).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))});var y=_interopRequireWildcard(i(965942));Object.keys(y).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))});var b=_interopRequireWildcard(i(733332));Object.keys(b).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))});var T=_interopRequireWildcard(i(948741));Object.keys(T).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===T[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}}))});var S=_interopRequireWildcard(i(341534));Object.keys(S).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===S[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}}))});var _=_interopRequireWildcard(i(231568));Object.keys(_).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))});var v=_interopRequireWildcard(i(515632));Object.keys(v).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))});var L=_interopRequireWildcard(i(664744));Object.keys(L).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===L[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return L[e]}}))});var C=_interopRequireWildcard(i(796598));Object.keys(C).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===C[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}}))});var I=_interopRequireWildcard(i(243790));Object.keys(I).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===I[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}}))});var R=_interopRequireWildcard(i(364928));Object.keys(R).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===R[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return R[e]}}))});var P=_interopRequireWildcard(i(732206));Object.keys(P).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))});var E=_interopRequireWildcard(i(407154));Object.keys(E).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))});var O=_interopRequireWildcard(i(523250));Object.keys(O).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))});var M=_interopRequireWildcard(i(898567));Object.keys(M).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===M[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return M[e]}}))});var w=_interopRequireWildcard(i(894478));Object.keys(w).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===w[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}}))});var x=_interopRequireWildcard(i(458158));Object.keys(x).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===x[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return x[e]}}))});var A=_interopRequireWildcard(i(96161));Object.keys(A).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===A[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return A[e]}}))});var k=_interopRequireWildcard(i(18353));Object.keys(k).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===k[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}}))});var N=_interopRequireWildcard(i(133593));Object.keys(N).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===N[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return N[e]}}))});var z=_interopRequireWildcard(i(798167));Object.keys(z).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===z[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return z[e]}}))});var j=_interopRequireWildcard(i(496256));Object.keys(j).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===j[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return j[e]}}))});var D=_interopRequireWildcard(i(607784));Object.keys(D).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===D[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return D[e]}}))});var F=_interopRequireWildcard(i(19661));Object.keys(F).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===F[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return F[e]}}))});var V=_interopRequireWildcard(i(899795));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}Object.keys(V).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===V[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return V[e]}}))})},212445:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inferRichFormResponseToExternalType=function(e){let t={};for(let i in e){let n=e[i];if(s.default.isBoolean(n))t[i]={field_id:i,type:l.TextCollectionFieldType.Boolean,response:[n]};else if(s.default.isNumber(n))t[i]={field_id:i,type:l.TextCollectionFieldType.Number,response:[n.toString()]};else if(s.default.isString(n))t[i]={field_id:i,type:l.TextCollectionFieldType.Text,response:[n]};else if(s.default.isArray(n))s.default.isString(n[0])&&(t[i]={field_id:i,type:l.TextCollectionFieldType.Category,response:[n]}),s.default.isObject(n[0])&&"label"in n[0]&&"value"in n[0]?t[i]={field_id:i,type:l.TextCollectionFieldType.DynamicLabeledText,response:[n]}:s.default.isObject(n[0])&&"parts"in n[0]&&"fullText"in n[0]?t[i]={field_id:i,type:l.TextCollectionFieldType.MultiPartText,response:[n]}:s.default.isObject(n[0])&&"fileType"in n[0]&&(t[i]={field_id:i,type:l.TextCollectionFieldType.FileUpload,response:[n]});else if(s.default.isObject(n)&&"workspaceId"in n){let e={workspaceId:n.workspaceId,selectedLanguage:n.selectedLanguage,lastCodeRunEvent:n.lastCodeRunEvent,outputFiles:n.outputFiles,stdoutOutput:n.stdoutOutput,stderrOutput:n.stderrOutput,testStdoutOutput:n.testStdoutOutput,testStderrOutput:n.testStderrOutput,versionKey:n.versionKey};t[i]={field_id:i,type:l.TextCollectionFieldType.WorkspaceContainer,response:[e]}}}return t};var n,s=(n=i(298784))&&n.__esModule?n:{default:n},l=i(963494)},397846:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.v2StepResponseToV1StepResponseConverters=void 0;var n=i(854358),s=i(869816);let l={[n.InteractionStepType.PromptInput]:new s.PromptInputV2Converter,[n.InteractionStepType.BasicInput]:new s.BasicInputV2Converter,[n.InteractionStepType.ModelResponseEditor]:new s.ModelResponseEditorV2Converter,[n.InteractionStepType.MetadataEditor]:new s.MetadataEditorV2Converter,[n.InteractionStepType.ModelResponseSelector]:new s.ModelResponseSelectorV2Converter,[n.InteractionStepType.PromptTextCollection]:new s.PromptTextCollectionV2Converter,[n.InteractionStepType.TextCollection]:new s.TextCollectionV2Converter,[n.InteractionStepType.TextCollectionPerResponse]:new s.TextCollectionPerResponseV2Converter,[n.InteractionStepType.QuantitativeModelResponseSelector]:new s.QuantitativeModelResponseSelectorV2Converter,[n.InteractionStepType.ResponseTextCollection]:new s.ResponseTextCollectionV2Converter,[n.InteractionStepType.RubricCriteriaBuilder]:new s.RubricCriteriaBuilderV2Converter,[n.InteractionStepType.RubricCriteriaRating]:new s.RubricCriteriaRatingV2Converter,[n.InteractionStepType.ModelResponseInput]:new s.ModelResponseInputV2Converter,[n.InteractionStepType.ModelResponseRanking]:new s.ModelResponseRankingV2Converter,[n.InteractionStepType.Instruction]:new s.InstructionV2Converter,[n.InteractionStepType.MetadataViewer]:new s.MetadataViewerV2Converter,[n.InteractionStepType.HistoryViewer]:new s.HistoryViewerV2Converter,[n.InteractionStepType.AgentExecution]:new s.AgentExecutionV2Converter,[n.InteractionStepType.AgentEnvironment]:new s.AgentEnvironmentV2Converter,[n.InteractionStepType.GenUI]:new s.GenUIV2Converter,[n.InteractionStepType.RubricEvaluationViewer]:new s.RubricEvaluationViewerV2Converter,[n.InteractionStepType.MultiChat]:new s.MultiChatV2Converter,[n.InteractionStepType.QualityMeasurement]:new s.QualityMeasurementV2Converter,[n.InteractionStepType.ExternalApp]:new s.ExternalAppV2Converter,[n.InteractionStepType.AudioRecording]:new s.AudioRecordingV2Converter,[n.InteractionStepType.AudioTextCollection]:new s.AudioTextCollectionV2Converter,[n.InteractionStepType.AudioFullDuplex]:new s.AudioFullDuplexV2Converter,[n.InteractionStepType.UnitTestCollection]:new s.UnitTestCollectionV2Converter,[n.InteractionStepType.ModelResponsePreview]:new s.ModelResponsePreviewV2Converter,[n.InteractionStepType.ContextDirections]:void 0,[n.InteractionStepType.MultiTurnContinue]:void 0,[n.InteractionStepType.QIRTextCollection]:void 0,[n.InteractionStepType.SearchAutoComplete]:void 0,[n.InteractionStepType.SearchReferences]:void 0,[n.InteractionStepType.ProcessSupervision]:void 0,[n.InteractionStepType.ExperimentalToolUse]:void 0,[n.InteractionStepType.ToolUseProcessSupervision]:void 0,[n.InteractionStepType.NER]:void 0,[n.InteractionStepType.NER_V2]:void 0,[n.InteractionStepType.SpanFeedback]:void 0,[n.InteractionStepType.Voting]:void 0,[n.InteractionStepType.ChainOfThought]:void 0,[n.InteractionStepType.AudioPlayer]:new s.AudioPlayerV2Converter,[n.InteractionStepType.MultiChannelAudio]:new s.MultiChannelAudioV2Converter,[n.InteractionStepType.ProcessSupervisionAgentExecution]:new s.ProcessSupervisionAgentExecutionV2Converter};t.v2StepResponseToV1StepResponseConverters=l},914998:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LLMProductAccessibility=t.LLMOptionsInfo=t.LegacyLLMProductOptionsMapping=t.ExpensiveLLMFeatureFlags=void 0;var n,s=(n=i(298784))&&n.__esModule?n:{default:n},l=i(125633),p=i(899047),u=i(101241),d=i(41875),m=i(191534),h=i(736379);let g={[l.LLMPoweredProduct.Linters]:"enable-expensive-models-on-prp-linters",[l.LLMPoweredProduct.AutoReviewer]:"enable-expensive-models-on-llm-checks",[l.LLMPoweredProduct.FreeTextGrading]:null};t.ExpensiveLLMFeatureFlags=g;let f={[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption,[l.LLMPoweredProduct.AutoReviewer]:d.AutoReviewerModelOption,[l.LLMPoweredProduct.FreeTextGrading]:m.FreeTextGradingModelOption};t.LegacyLLMProductOptionsMapping=f;let y={[l.LLMOption.GPT35Turbo]:{option:l.LLMOption.GPT35Turbo,strategy:p.StrategyName.LiteLLMStrategy,displayName:"GPT-3.5 Turbo",modelId:"gpt-3.5-turbo",isDeprecated:!0,isResourceIntensive:!1,isEnabled:!0,isExpensive:!1,capabilities:{supportsStructuredOutputs:!1,supportsToolUse:!0,supportsReasoning:!1},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GPT3Turbo},staticModelParams:{provider:p.LiteLLMProvider.OpenAI}},[l.LLMOption.GPT4]:{option:l.LLMOption.GPT4,strategy:p.StrategyName.LiteLLMStrategy,displayName:"GPT-4",modelId:"gpt-4-0613",isDeprecated:!0,isResourceIntensive:!1,isExpensive:!0,isEnabled:!0,capabilities:{supportsStructuredOutputs:!1,supportsToolUse:!0,supportsReasoning:!1},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GPT4},staticModelParams:{provider:p.LiteLLMProvider.OpenAI}},[l.LLMOption.GPT4Turbo]:{option:l.LLMOption.GPT4Turbo,strategy:p.StrategyName.LiteLLMStrategy,displayName:"GPT-4 Turbo",modelId:"gpt-4-0125-preview",isDeprecated:!0,isResourceIntensive:!1,isExpensive:!0,isEnabled:!0,capabilities:{supportsStructuredOutputs:!1,supportsToolUse:!0,supportsReasoning:!1},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GPT4Turbo},staticModelParams:{provider:p.LiteLLMProvider.OpenAI}},[l.LLMOption.GPT4o]:{option:l.LLMOption.GPT4o,strategy:p.StrategyName.LiteLLMStrategy,displayName:"GPT-4o",modelId:"gpt-4o-2024-08-06",isDeprecated:!0,isResourceIntensive:!1,isExpensive:!1,isEnabled:!0,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!1},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GPT4O,[l.LLMPoweredProduct.AutoReviewer]:d.AutoReviewerModelOption.GPT_4o,[l.LLMPoweredProduct.FreeTextGrading]:m.FreeTextGradingModelOption.GPT_4o},staticModelParams:{provider:p.LiteLLMProvider.OpenAI}},[l.LLMOption.GPT4oMini]:{option:l.LLMOption.GPT4oMini,strategy:p.StrategyName.LiteLLMStrategy,displayName:"GPT 4o Mini",modelId:"gpt-4o-mini-2024-07-18",isDeprecated:!0,isResourceIntensive:!1,isExpensive:!1,isEnabled:!0,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!1},legacyValues:{[l.LLMPoweredProduct.AutoReviewer]:d.AutoReviewerModelOption.GPT_4o_MINI},staticModelParams:{provider:p.LiteLLMProvider.OpenAI}},[l.LLMOption.GPTo1]:{option:l.LLMOption.GPTo1,strategy:p.StrategyName.LiteLLMStrategy,displayName:"o1",modelId:"o1-2024-12-17",isDeprecated:!0,isResourceIntensive:!0,isExpensive:!0,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,minimumTimeoutMs:6e4,illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS,capabilities:{supportsStructuredOutputs:!1,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI}},[l.LLMOption.GPTo1Preview]:{option:l.LLMOption.GPTo1Preview,strategy:p.StrategyName.LiteLLMStrategy,displayName:"o1-preview",modelId:"o1-preview-2024-09-12",isDeprecated:!0,isResourceIntensive:!0,isExpensive:!0,isEnabled:!1,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,minimumTimeoutMs:6e4,capabilities:{supportsStructuredOutputs:!1,supportsToolUse:!0,supportsReasoning:!0},legacyValues:{[l.LLMPoweredProduct.AutoReviewer]:d.AutoReviewerModelOption.GPT_o1_PREVIEW,[l.LLMPoweredProduct.FreeTextGrading]:m.FreeTextGradingModelOption.GPT_o1_PREVIEW},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS,staticModelParams:{provider:p.LiteLLMProvider.OpenAI}},[l.LLMOption.GPTo1Mini]:{option:l.LLMOption.GPTo1Mini,strategy:p.StrategyName.LiteLLMStrategy,displayName:"o1-mini",modelId:"o1-mini-2024-09-12",isDeprecated:!0,isResourceIntensive:!1,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!1,supportsToolUse:!0,supportsReasoning:!0},legacyValues:{[l.LLMPoweredProduct.AutoReviewer]:d.AutoReviewerModelOption.GPT_o1_MINI,[l.LLMPoweredProduct.FreeTextGrading]:m.FreeTextGradingModelOption.GPT_o1_MINI},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS,staticModelParams:{provider:p.LiteLLMProvider.OpenAI}},[l.LLMOption.GPTo3]:{option:l.LLMOption.GPTo3,strategy:p.StrategyName.LiteLLMStrategy,displayName:"o3",modelId:"o3-2025-04-16",isDeprecated:!0,isResourceIntensive:!0,isExpensive:!1,isEnabled:!0,minimumTimeoutMs:h.DEFAULT_HEAVYWEIGHT_TIMEOUT_MS,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning_effort:"medium"},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GPTO3,[l.LLMPoweredProduct.AutoReviewer]:d.AutoReviewerModelOption.GPT_o3},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.GPTo3High]:{option:l.LLMOption.GPTo3High,strategy:p.StrategyName.LiteLLMStrategy,displayName:"o3-high",modelId:"o3-2025-04-16",isDeprecated:!0,isResourceIntensive:!0,isExpensive:!1,isEnabled:!0,minimumTimeoutMs:6e5,minimumMaxTokens:h.DEFAULT_HEAVYWEIGHT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning_effort:"high"},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GPTO3High,[l.LLMPoweredProduct.AutoReviewer]:d.AutoReviewerModelOption.GPT_o3_HIGH},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.GPTo3Mini]:{option:l.LLMOption.GPTo3Mini,strategy:p.StrategyName.LiteLLMStrategy,displayName:"o3-mini",modelId:"o3-mini-2025-01-31",isDeprecated:!0,isResourceIntensive:!0,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning_effort:"medium"},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GPTO3Mini,[l.LLMPoweredProduct.AutoReviewer]:d.AutoReviewerModelOption.GPT_o3_MINI},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.GPTo3MiniHigh]:{option:l.LLMOption.GPTo3MiniHigh,strategy:p.StrategyName.LiteLLMStrategy,displayName:"o3-mini-high",modelId:"o3-mini-2025-01-31",isDeprecated:!0,isResourceIntensive:!0,isExpensive:!1,isEnabled:!0,minimumTimeoutMs:h.DEFAULT_HEAVYWEIGHT_TIMEOUT_MS,minimumMaxTokens:h.DEFAULT_HEAVYWEIGHT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning_effort:"high"},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GPTO3MiniHigh,[l.LLMPoweredProduct.AutoReviewer]:d.AutoReviewerModelOption.GPT_o3_MINI_HIGH},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.GPTo4Mini]:{option:l.LLMOption.GPTo4Mini,strategy:p.StrategyName.LiteLLMStrategy,displayName:"o4-mini",modelId:"o4-mini-2025-04-16",isDeprecated:!0,isResourceIntensive:!0,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning_effort:"medium"},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GPTO4Mini,[l.LLMPoweredProduct.FreeTextGrading]:m.FreeTextGradingModelOption.GPT_O4_MINI},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.GPTo4MiniHigh]:{option:l.LLMOption.GPTo4MiniHigh,strategy:p.StrategyName.LiteLLMStrategy,displayName:"o4-mini-high",modelId:"o4-mini-2025-04-16",isDeprecated:!0,isResourceIntensive:!0,isExpensive:!1,isEnabled:!0,minimumTimeoutMs:h.DEFAULT_HEAVYWEIGHT_TIMEOUT_MS,minimumMaxTokens:h.DEFAULT_HEAVYWEIGHT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning_effort:"high"},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GPTO4MiniHigh,[l.LLMPoweredProduct.FreeTextGrading]:m.FreeTextGradingModelOption.GPT_O4_MINI_HIGH},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.GPT5Minimal]:{option:l.LLMOption.GPT5Minimal,strategy:p.StrategyName.LiteLLMStrategy,displayName:"GPT 5 (Minimal Reasoning Effort)",modelId:"gpt-5-2025-08-07",isDeprecated:!1,isResourceIntensive:!1,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning:{effort:"minimal"}},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.GPT5]:{option:l.LLMOption.GPT5,strategy:p.StrategyName.LiteLLMStrategy,displayName:"GPT 5 (Medium Reasoning Effort)",modelId:"gpt-5-2025-08-07",isDeprecated:!1,isResourceIntensive:!0,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning:{effort:"medium"}},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.GPT5High]:{option:l.LLMOption.GPT5High,strategy:p.StrategyName.LiteLLMStrategy,displayName:"GPT 5 (High Reasoning Effort)",modelId:"gpt-5-2025-08-07",isDeprecated:!1,isResourceIntensive:!0,isExpensive:!0,isEnabled:!0,minimumTimeoutMs:6e5,minimumMaxTokens:h.DEFAULT_HEAVYWEIGHT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning:{effort:"high"}},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.GPT5MiniMinimal]:{option:l.LLMOption.GPT5MiniMinimal,strategy:p.StrategyName.LiteLLMStrategy,displayName:"GPT 5 Mini (Minimal Reasoning Effort)",modelId:"gpt-5-mini-2025-08-07",isDeprecated:!1,isResourceIntensive:!1,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning:{effort:"minimal"}},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.GPT5Mini]:{option:l.LLMOption.GPT5Mini,strategy:p.StrategyName.LiteLLMStrategy,displayName:"GPT 5 Mini (Medium Reasoning Effort)",modelId:"gpt-5-mini-2025-08-07",isDeprecated:!1,isResourceIntensive:!0,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning:{effort:"medium"}},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.GPT5MiniHigh]:{option:l.LLMOption.GPT5MiniHigh,strategy:p.StrategyName.LiteLLMStrategy,displayName:"GPT 5 Mini (High Reasoning Effort)",modelId:"gpt-5-mini-2025-08-07",isDeprecated:!1,isResourceIntensive:!0,isExpensive:!1,isEnabled:!0,minimumTimeoutMs:h.DEFAULT_HEAVYWEIGHT_TIMEOUT_MS,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.OpenAI,reasoning:{effort:"high"}},illegalModelParams:h.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS},[l.LLMOption.Gemini25FlashPreview]:{option:l.LLMOption.Gemini25FlashPreview,strategy:p.StrategyName.LiteLLMStrategy,displayName:"Gemini 2.5 Flash Preview",modelId:"gemini-2.5-flash-preview-05-20",isDeprecated:!0,isResourceIntensive:!1,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GeminiFlash25Flash0520},staticModelParams:{provider:p.LiteLLMProvider.Gemini}},[l.LLMOption.Gemini25ProExp]:{option:l.LLMOption.Gemini25ProExp,strategy:p.StrategyName.GeminiStrategy,displayName:"Gemini 2.5 Pro Experimental",modelId:"gemini-2.5-pro-exp-03-25",isDeprecated:!0,isResourceIntensive:!0,isExpensive:!0,isEnabled:!1,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},legacyValues:{[l.LLMPoweredProduct.Linters]:u.PRPLinterModelOption.GeminiPro2},illegalModelParams:["max_tokens","temperature","response_format"]},[l.LLMOption.Gemini25Pro]:{option:l.LLMOption.Gemini25Pro,strategy:p.StrategyName.LiteLLMStrategy,displayName:"Gemini 2.5 Pro",modelId:"gemini-2.5-pro",isDeprecated:!1,isResourceIntensive:!0,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.Gemini}},[l.LLMOption.Gemini25Flash]:{option:l.LLMOption.Gemini25Flash,strategy:p.StrategyName.LiteLLMStrategy,displayName:"Gemini 2.5 Flash",modelId:"gemini-2.5-flash",isDeprecated:!1,isResourceIntensive:!1,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.Gemini}},[l.LLMOption.Gemini25FlashLite]:{option:l.LLMOption.Gemini25FlashLite,strategy:p.StrategyName.LiteLLMStrategy,displayName:"Gemini 2.5 Flash-Lite",modelId:"gemini-2.5-flash-lite",isDeprecated:!1,isResourceIntensive:!1,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.Gemini}},[l.LLMOption.DeepseekR132B_LLaMa_DISTILLED]:{option:l.LLMOption.DeepseekR132B_LLaMa_DISTILLED,strategy:p.StrategyName.LiteLLMStrategy,displayName:"Deepseek R1 32B (Qwen Distilled)",modelId:"deepseek-r1-distill-qwen-32b",isDeprecated:!0,isResourceIntensive:!1,isExpensive:!1,isEnabled:!1,capabilities:{supportsStructuredOutputs:!1,supportsToolUse:!1,supportsReasoning:!1},staticModelParams:{provider:p.LiteLLMProvider.Bedrock},legacyValues:{[l.LLMPoweredProduct.AutoReviewer]:d.AutoReviewerModelOption.DEEPSEEK_R1_32b}},[l.LLMOption.DeepseekR170B_Qwen_DISTILLED]:{option:l.LLMOption.DeepseekR170B_Qwen_DISTILLED,strategy:p.StrategyName.LiteLLMStrategy,displayName:"Deepseek R1 70B (LLaMa Distilled)",modelId:"deepseek-r1-distill-llama-70b",isDeprecated:!0,isResourceIntensive:!0,isExpensive:!1,isEnabled:!1,capabilities:{supportsStructuredOutputs:!1,supportsToolUse:!1,supportsReasoning:!1},staticModelParams:{provider:p.LiteLLMProvider.Bedrock},legacyValues:{[l.LLMPoweredProduct.AutoReviewer]:d.AutoReviewerModelOption.DEEPSEEK_R1_70b}},[l.LLMOption.Claude35Sonnet]:{option:l.LLMOption.Claude35Sonnet,strategy:p.StrategyName.AnthropicStrategy,displayName:"Claude 3.5 Sonnet",modelId:"claude-3-5-sonnet-20241022",isDeprecated:!0,isResourceIntensive:!1,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.Anthropic}},[l.LLMOption.ClaudeSonnet4]:{option:l.LLMOption.ClaudeSonnet4,strategy:p.StrategyName.AnthropicStrategy,displayName:"Claude Sonnet 4",modelId:"claude-sonnet-4-20250514",isDeprecated:!1,isResourceIntensive:!0,isExpensive:!1,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.Anthropic}},[l.LLMOption.ClaudeOpus41]:{option:l.LLMOption.ClaudeOpus41,strategy:p.StrategyName.AnthropicStrategy,displayName:"Claude Opus 4.1",modelId:"claude-opus-4-1-20250805",isDeprecated:!1,isResourceIntensive:!0,isExpensive:!0,isEnabled:!0,minimumMaxTokens:h.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS,capabilities:{supportsStructuredOutputs:!0,supportsToolUse:!0,supportsReasoning:!0},staticModelParams:{provider:p.LiteLLMProvider.Anthropic}}};t.LLMOptionsInfo=y;let b=Object.values(y).filter(e=>e.isEnabled).map(e=>e.option),T=b.filter(e=>!y[e].isExpensive&&!y[e].isDeprecated),S=b.filter(e=>y[e].isExpensive),_=b.filter(e=>y[e].isDeprecated),v={[l.LLMPoweredProduct.Linters]:{publicOptions:T,expensiveOptions:S,defaultOption:l.LLMOption.GPT5Minimal,deprecatedOptions:_},[l.LLMPoweredProduct.AutoReviewer]:{publicOptions:T,expensiveOptions:S,defaultOption:l.LLMOption.GPT5Minimal,deprecatedOptions:_},[l.LLMPoweredProduct.FreeTextGrading]:{publicOptions:s.default.difference(T,[l.LLMOption.GPTo3Mini,l.LLMOption.GPTo3MiniHigh]),expensiveOptions:S,defaultOption:l.LLMOption.GPT5Minimal,deprecatedOptions:_}};t.LLMProductAccessibility=v},736379:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GPT_O_SERIES_MODELS=t.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS=t.DEFAULT_HEAVYWEIGHT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS=t.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS=t.DEFAULT_HEAVYWEIGHT_TIMEOUT_MS=t.TOOL_USE_FIELD=t.STRUCTURED_OUTPUT_FIELD=void 0;var n=i(125633);t.STRUCTURED_OUTPUT_FIELD="response_format",t.TOOL_USE_FIELD="tools",t.DEFAULT_HEAVYWEIGHT_TIMEOUT_MS=3e5,t.DEFAULT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS=5e3,t.DEFAULT_HEAVYWEIGHT_MINIMUM_REASONING_MODEL_COMPLETION_TOKENS=1e4,t.GPT_O_SERIES_ILLEGAL_MODEL_PARAMS=["top_p","presence_penalty","frequency_penalty","logprobs","top_logprobs","logit_bias","temperature","max_tokens"];let s=[n.LLMOption.GPTo1,n.LLMOption.GPTo1Preview,n.LLMOption.GPTo1Mini,n.LLMOption.GPTo3,n.LLMOption.GPTo3High,n.LLMOption.GPTo3Mini,n.LLMOption.GPTo3MiniHigh,n.LLMOption.GPTo4Mini,n.LLMOption.GPTo4MiniHigh];t.GPT_O_SERIES_MODELS=s},440967:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLLMPoweredProduct=function(e){return Object.values(p.LLMPoweredProduct).includes(e)},t.isLegacyLLMPoweredProduct=isLegacyLLMPoweredProduct,t.isLLMOption=isLLMOption,t.isLegacyLLMOption=isLegacyLLMOption,t.isLLMProductOption=function(e,t){return isLLMOption(t)||isLegacyLLMOption(e,t)},t.getProductExpensiveModelsFeatureFlag=function(e){return l.ExpensiveLLMFeatureFlags[e]??null},t.getLLMOptionInfoFromLegacyValue=getLLMOptionInfoFromLegacyValue,t.getLLMOptionInfoDirectly=getLLMOptionInfoDirectly,t.getLLMOptionInfo=function(e,t){let i;if(isLLMOption(t))i=getLLMOptionInfoDirectly(t);else if(isLegacyLLMOption(e,t))i=getLLMOptionInfoFromLegacyValue(e,t);else throw Error(`Unrecognised LLM Option: "${t}". It must be a valid LLMOption or a legacy option`);return i},t.getLLMProductUseCasePrefix=getLLMProductUseCasePrefix,t.getLLMProductUseCase=function(e,t){return s.default.isUndefined(t)?getLLMProductUseCasePrefix(e):`${getLLMProductUseCasePrefix(e)} ${t}`},t.areOptionsEqual=function(e,t){function getLLMOptionWithoutProduct(e){return isLLMOption(e)?e:Object.values(l.LLMOptionsInfo).find(t=>Object.values(t.legacyValues??{}).includes(e))?.option}let i=getLLMOptionWithoutProduct(e),n=getLLMOptionWithoutProduct(t);return!(s.default.isUndefined(i)||s.default.isUndefined(n))&&i===n};var n,s=(n=i(298784))&&n.__esModule?n:{default:n},l=i(914998),p=i(125633),u=i(899047);function isLegacyLLMPoweredProduct(e){return Object.values(p.LLMPoweredProduct).includes(e)}function isLLMOption(e){return Object.values(p.LLMOption).includes(e)}function isLegacyLLMOption(e,t){return isLegacyLLMPoweredProduct(e)&&Object.values(l.LegacyLLMProductOptionsMapping[e]).includes(t)}function getLLMOptionInfoFromLegacyValue(e,t){let i=Object.entries(l.LLMOptionsInfo).find(([,i])=>i.legacyValues?.[e]===t);return i?.[1]}function getLLMOptionInfoDirectly(e){return l.LLMOptionsInfo[e]}function getLLMProductUseCasePrefix(e){switch(e){case p.LLMPoweredProduct.Linters:return u.UseCasePrefix.Linter;case p.LLMPoweredProduct.AutoReviewer:return u.UseCasePrefix.AutoReviewer;case p.LLMPoweredProduct.FreeTextGrading:return u.UseCasePrefix.FreeTextGrading;default:throw Error(`Invalid LLMPoweredProduct: ${e}`)}}},399688:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s={},l=(n=i(298784))&&n.__esModule?n:{default:n},p=i(914998),u=_interopRequireWildcard(i(440967));Object.keys(u).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(s,e))&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))});var d=_interopRequireWildcard(i(125633));Object.keys(d).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(s,e))&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))});var m=_interopRequireWildcard(i(736379));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}Object.keys(m).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(s,e))&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}),t.LLMProductAccessor=class{isLLMProductOption(e){return u.isLLMProductOption(this.product,e)}getLLMOptionInfo(e){return u.getLLMOptionInfo(this.product,e)}getLLMProductUseCase(e){return u.getLLMProductUseCase(this.product,e)}areOptionsEqual(e,t){return u.areOptionsEqual(e,t)}hasMarkedAsForbiddenOption(e){let t=this.getLLMOptionInfo(e);return this.accessibilityConfigInfo.forbiddenOptions.includes(t.option)}hasMarkedAsExpensiveOption(e){let t=this.getLLMOptionInfo(e);return this.accessibilityConfigInfo.expensiveOptions.includes(t.option)}hasMarkedAsPublicOption(e){let t=this.getLLMOptionInfo(e);return this.accessibilityConfigInfo.publicOptions.includes(t.option)}hasMarkedAsDeprecatedOption(e){let t=this.getLLMOptionInfo(e);return this.accessibilityConfigInfo.deprecatedOptions.includes(t.option)}assertFeatureFlagAdapter(){if(l.default.isUndefined(this.featureFlagAdapter))throw Error("Project access cannot be checked without a feature flag adapter.")}hasOptionEnabledForProject(e,t){this.assertFeatureFlagAdapter();let i=this.getLLMOptionInfo(e);return!this.hasMarkedAsForbiddenOption(e)&&!!i.isEnabled&&(this.hasMarkedAsExpensiveOption(e)?this.featureFlagAdapter.projectHasAccessToExpensiveModels(t):this.hasMarkedAsPublicOption(e)||this.hasMarkedAsDeprecatedOption(e))}hasOptionEnabledForUser(e,t){this.assertFeatureFlagAdapter();let i=this.getLLMOptionInfo(e);return!this.hasMarkedAsForbiddenOption(e)&&!!i.isEnabled&&(this.hasMarkedAsExpensiveOption(e)?this.featureFlagAdapter.userHasAccessToExpensiveModels(t):this.hasMarkedAsPublicOption(i.option)||this.hasMarkedAsDeprecatedOption(e))}getProductAccessibilityInfo(){let e=p.LLMProductAccessibility[this.product],t=e.forbiddenOptions??[],i=l.default.difference(e.expensiveOptions??[],t),n=e.deprecatedOptions??[],s={publicOptions:l.default.difference(e.publicOptions,t),expensiveOptions:i,forbiddenOptions:t,deprecatedOptions:n,defaultOption:e.defaultOption,allOptions:l.default.difference(l.default.uniq(l.default.concat(e.publicOptions,i,n)),t)};return s}constructor(e,t){if(this.product=e,this.featureFlagAdapter=t,!u.isLLMPoweredProduct(e))throw Error(`Invalid LLMPoweredProduct: ${e}`);this.accessibilityConfigInfo=this.getProductAccessibilityInfo()}}},125633:function(e,t){"use strict";var i,n,s,l;Object.defineProperty(t,"__esModule",{value:!0}),t.LLMOption=t.LLMPoweredProduct=void 0,t.LLMPoweredProduct=i,(s=i||(t.LLMPoweredProduct=i={})).Linters="linters",s.AutoReviewer="auto-reviewer",s.FreeTextGrading="free-text-grading",t.LLMOption=n,(l=n||(t.LLMOption=n={})).GPT35Turbo="gpt-3.5-turbo",l.GPT4="gpt-4",l.GPT4Turbo="gpt-4-turbo-preview",l.GPT4o="gpt-4o",l.GPT4oMini="gpt-4o-mini",l.GPTo1="o1",l.GPTo1Preview="o1-preview",l.GPTo1Mini="o1-mini",l.GPTo3="o3",l.GPTo3High="o3-high",l.GPTo3Mini="o3-mini",l.GPTo3MiniHigh="o3-mini-high",l.GPTo4Mini="o4-mini",l.GPTo4MiniHigh="o4-mini-high",l.GPT5Minimal="gpt-5-minimal",l.GPT5="gpt-5",l.GPT5High="gpt-5-high",l.GPT5MiniMinimal="gpt-5-mini-minimal",l.GPT5Mini="gpt-5-mini",l.GPT5MiniHigh="gpt-5-mini-high",l.Gemini25FlashPreview="gemini-2.5-flash-preview",l.Gemini25ProExp="gemini-2.5-pro-exp",l.Gemini25Pro="gemini-2.5-pro",l.Gemini25Flash="gemini-2.5-flash",l.Gemini25FlashLite="gemini-2.5-flash-lite",l.DeepseekR132B_LLaMa_DISTILLED="deepseek-r1-32b",l.DeepseekR170B_Qwen_DISTILLED="deepseek-r1-70b",l.Claude35Sonnet="claude-3.5-sonnet",l.ClaudeSonnet4="claude-sonnet-4",l.ClaudeOpus41="claude-opus-4.1"},971599:function(e,t){"use strict";var i,n,s,l;Object.defineProperty(t,"__esModule",{value:!0}),t.lintDiagnosticToIssues=t.issuesToLintDiagnostics=t.VALID_LINT_DISMISSAL_TYPES_FOR_ERROR_DISMISSAL=t.LINT_DISMISSAL_TYPE_TO_PERSIST=t.LintDismissalType=t.LintSeverity=void 0,t.LintSeverity=i,(s=i||(t.LintSeverity=i={})).INFO="INFO",s.WARNING="WARNING",s.ERROR="ERROR",s.DISMISSABLE_ERROR="DISMISSABLE_ERROR",s.DEBUG="DEBUG",s.RUNTIME_EXCEPTION="RUNTIME_EXCEPTION",s.BLOCK_EDITING="BLOCK_EDITING";let LintDiagnostic=class LintDiagnostic{constructor(e,t,i={},n=!1){this.id=e,this.severity=t,this.data=i,this.experimental=n,this.createdAt=new Date}};t.LintDiagnostic=LintDiagnostic,LintDiagnostic.MAX_ELAPSED_TIME_MS=6e5,t.LintDismissalType=n,(l=n||(t.LintDismissalType=n={})).Acknowledged="acknowledged",l.Rejected="rejected",l.Autofixed="autofixed";let p=Object.freeze([n.Rejected,n.Autofixed]);t.LINT_DISMISSAL_TYPE_TO_PERSIST=p;let u=Object.freeze([n.Rejected,n.Autofixed]);t.VALID_LINT_DISMISSAL_TYPES_FOR_ERROR_DISMISSAL=u,t.issuesToLintDiagnostics=e=>e.filter(e=>e?.lintIssues?.length??!1).map(e=>new LintDiagnostic(e.linterId??"",e?.severity??i.WARNING,{message:e?.message??"",taskComponentAnnotations:e.lintIssues})),t.lintDiagnosticToIssues=e=>{let t=e.filter(e=>e.data.taskComponentAnnotations).flatMap(e=>e.data.taskComponentAnnotations);return t.map(e=>({[e.id]:e}))}},974819:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateInternalFields=t.formatJoiValidateError=t.annotationSchema=t.requestParamsSchemaDependent=t.requestParamsSchema=t.formSchema=t.formFieldSchema=t.fieldSetSchema=t.unitFieldAlternativesSchema=t.wfeButtonFieldSchema=t.JSONFieldSchema=t.queryableTextAndResultsFieldSchema=t.fileUploadTextFieldSchema=t.boundingBoxFieldSchema=t.categoryFieldSchema=t.autocompleteFieldSchema=t.selectFieldSchema=t.timeRangeFieldSchema=t.datetimeFieldSchema=t.numberFieldSchema=t.booleanFieldSchema=t.transcriptionTextFieldSchema=t.textFieldSchema=t.fieldSchemaBase=t.attachmentSchema=void 0;var n=_interopRequireDefault(i(39300)),s=i(963494),l=_interopRequireDefault(i(298784)),p=i(918397),u=i(276527);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}let d=n.default.object().keys({type:n.default.string().valid(...Object.values(s.TextCollectionAttachmentType)).required(),content:n.default.alternatives().conditional("type",{not:s.TextCollectionAttachmentType.VideoComparison,then:n.default.string(),otherwise:n.default.string().allow("").optional()}),column_count:n.default.number().optional(),forms:n.default.array().min(1).items(n.default.string()).optional(),caption:n.default.string().optional(),left:n.default.string().optional(),right:n.default.string().optional(),blocking:n.default.boolean().optional(),autoplay:n.default.boolean().optional(),max_num_plays:n.default.number().integer().min(1).optional(),videoA:n.default.string().optional(),videoB:n.default.string().optional(),randomizeOrder:n.default.boolean().optional(),attachment_body:n.default.any().optional(),width:n.default.number().optional(),height:n.default.number().optional(),darkMode:n.default.boolean().optional(),streamResponses:n.default.boolean().optional(),mockType:n.default.string().optional()});t.attachmentSchema=d;let m=n.default.object().keys({field_id:n.default.string().required(),title:n.default.string().required(),description:n.default.string().optional().allow("")}),h=n.default.array().items(n.default.any()),g=n.default.alternatives().try(n.default.object({not:h}),h),f=n.default.object().pattern(n.default.string(),g),y=m.keys({hint:n.default.string().optional(),instruction:n.default.any().strict().optional(),toggle_message:n.default.string().optional(),toggle_hint:n.default.string().optional(),required:n.default.boolean().optional(),min_responses_required:n.default.number().integer().min(0).optional(),max_responses_required:n.default.number().integer().optional().when("min_responses_required",{is:n.default.exist(),then:n.default.number().min(n.default.ref("min_responses_required"))}),hide_for_single_response:n.default.boolean().optional(),extra_content:n.default.string().optional(),unit_test_pass_required:n.default.boolean().optional(),unit_test_full_coverage_required:n.default.boolean().optional(),conditions:n.default.array().min(1).items(f).optional(),templateVariableConditions:n.default.array().min(1).items(f).optional(),show_separator:n.default.boolean().optional(),showForReviewLevels:n.default.array().items(n.default.number().integer()).optional()});t.fieldSchemaBase=y;let b=y.keys({type:n.default.valid(s.TextCollectionFieldType.Text).required(),min_characters:n.default.number().integer().min(1).optional(),max_characters:n.default.number().integer().optional().when("min_characters",{is:n.default.exist(),then:n.default.number().min(n.default.ref("min_characters"))}),min_tokens:n.default.number().integer().min(1).optional(),max_tokens:n.default.number().integer().optional().when("min_tokens",{is:n.default.exist(),then:n.default.number().min(n.default.ref("min_tokens"))}),spellcheck:n.default.boolean().optional(),prefill:n.default.object({mapS3Artifact:n.default.string(),fieldKey:n.default.string(),addToDescription:n.default.boolean().optional()}).optional(),default_text:n.default.string().allow("").optional(),show_word_counter:n.default.boolean().optional(),flexible_min_rows:n.default.boolean().optional(),use_grammar_check:n.default.boolean().optional(),dropdown:n.default.array().items(n.default.string()).optional(),disable_pasting:n.default.boolean().optional(),show_diff:n.default.boolean().optional(),original_text:n.default.string().optional(),show_latex_preview:n.default.boolean().optional(),show_markdown_preview:n.default.boolean().optional(),show_equation_builder:n.default.boolean().optional(),can_upload_file:n.default.boolean().optional(),save_to_task_feedback:n.default.boolean().optional(),disable_copying:n.default.boolean().optional(),hle_vote_hide_field_from_others:n.default.boolean().optional()});t.textFieldSchema=b;let T=y.keys({type:n.default.valid(s.TextCollectionFieldType.TranscriptionText).required(),tags:n.default.object().pattern(n.default.string(),n.default.object().keys({options:n.default.array().items(n.default.string()),followUpCharacter:n.default.string().optional()})).required(),spellcheck:n.default.boolean().optional()});t.transcriptionTextFieldSchema=T;let S=y.keys({type:n.default.valid(s.TextCollectionFieldType.Boolean).required(),hle_vote_hide_field_from_others:n.default.boolean().optional()});t.booleanFieldSchema=S;let _=y.keys({type:n.default.valid(s.TextCollectionFieldType.Number).required(),digits:n.default.number().integer().min(0).optional(),min:n.default.number().optional(),max:n.default.number().optional().when("min",{is:n.default.exist(),then:n.default.number().greater(n.default.ref("min"))}),step:n.default.number().optional(),prefix:n.default.string().allow("").optional(),mid_label:n.default.string().allow("").optional(),suffix:n.default.string().allow("").optional(),use_slider:n.default.boolean().optional(),use_candybar:n.default.boolean().optional(),allow_not_applicable:n.default.boolean().optional(),allow_cannot_assess:n.default.boolean().optional(),max_precision:n.default.number().integer().min(0).optional(),step_ticks_override:n.default.number().optional(),labels_list_override:n.default.string().optional(),precompute_field_params:n.default.object({weights:n.default.array().items(n.default.object().pattern(n.default.string(),n.default.number())),precompute_formula:n.default.string().valid(...l.default.values(s.PrecomputeFormulas)),thresholds:n.default.array().items(n.default.number()).optional()}).optional(),rubric:n.default.string().optional(),save_to_task_feedback:n.default.boolean().optional(),default_value:n.default.string().optional(),use_as_rubric_response_score:n.default.boolean().optional(),hle_vote_hide_field_from_others:n.default.boolean().optional()});t.numberFieldSchema=_;let v=y.keys({type:n.default.valid(s.TextCollectionFieldType.Datetime).required(),include:n.default.array().items(...Object.values(s.DatetimeSpec)).min(1).max(Object.values(s.DatetimeSpec).length).required(),defaults:n.default.object({year:n.default.number().optional(),month:n.default.number().optional(),day:n.default.number().optional(),hour:n.default.number().optional(),minute:n.default.number().optional()}).optional()});t.datetimeFieldSchema=v;let L=y.keys({type:n.default.valid(s.TextCollectionFieldType.TimeRange).required(),increment_seconds:n.default.number().min(1).max(3600).optional(),defaults_seconds:n.default.array().items(n.default.number().min(0).max(86400)).length(2).optional(),default_from_field:n.default.string().optional()});t.timeRangeFieldSchema=L;let C=y.keys({type:n.default.valid(s.TextCollectionFieldType.Select).required(),choices_from_field:n.default.string().optional(),choices:n.default.array().items(n.default.string()).optional(),columns:n.default.number().integer().min(1).optional()});t.selectFieldSchema=C;let I=y.keys({type:n.default.valid(s.TextCollectionFieldType.Autocomplete).required(),options:n.default.array().items(n.default.string()).required(),min_responses_required:n.default.number().integer().min(0).optional(),max_responses_required:n.default.number().integer().optional().when("min_responses_required",{is:n.default.exist(),then:n.default.number().min(n.default.ref("min_responses_required"))}),hideMaxResponsesLabel:n.default.boolean().optional(),allow_custom_options:n.default.boolean().optional(),longHintsS3Artifact:n.default.string().optional()});t.autocompleteFieldSchema=I;let R=n.default.object().keys({value:n.default.alternatives(n.default.string(),n.default.number(),n.default.boolean()).required(),label:n.default.string().required(),hint:n.default.string().optional(),subLabel:n.default.string().optional(),customerValue:n.default.string().optional(),instruction:n.default.string().optional(),preferred:n.default.boolean().optional(),subchoices:n.default.array().min(1).items(n.default.link("#categoryChoice")).optional(),pinned:n.default.boolean().optional(),conditions:n.default.array().min(1).items(f).optional(),link:n.default.string().optional()}).id("categoryChoice"),P=y.keys({type:n.default.valid(s.TextCollectionFieldType.Category).required(),choices:n.default.array().min(0).items(R).required().unique((e,t)=>{let i=new Set;for(let[n]of p.depthFirstChoices([e,t])){if(i.has(n.value))return!0;i.add(n.value)}return!1}),min_choices:n.default.number().integer().min(1).optional(),max_choices:n.default.number().integer().optional().when("min_choices",{is:n.default.exist(),then:n.default.number().min(n.default.ref("min_choices"))}),use_category_choose_multiple:n.default.boolean().optional(),can_select_intermediate_nodes:n.default.boolean().optional(),groupSamePathLabelCategories:n.default.boolean().optional(),longHintsS3Artifact:n.default.string().optional(),choicesS3Artifact:n.default.string().optional(),initialChoiceFilter:n.default.array().items(n.default.string()).optional(),showSearchBar:n.default.boolean().optional(),showParentLonghint:n.default.boolean().optional(),tokenizeSearch:n.default.boolean().optional(),hideMinMaxLabel:n.default.boolean().optional(),useOntologyHints:n.default.boolean().optional(),rubric:n.default.string().optional(),save_to_task_feedback:n.default.boolean().optional(),useForRouting:n.default.string().optional(),hle_vote_hide_field_from_others:n.default.boolean().optional()});t.categoryFieldSchema=P;let E=y.keys({type:n.default.valid(s.TextCollectionFieldType.BoundingBox).required()});t.boundingBoxFieldSchema=E;let O=y.keys({type:n.default.valid(s.TextCollectionFieldType.FileUpload).required(),allowed_mime_types:n.default.array().items(n.default.string()).optional()});t.fileUploadTextFieldSchema=O;let M=y.keys({type:n.default.valid(s.TextCollectionFieldType.QueryableTextAndResults).required(),use_autocomplete_button:n.default.boolean().optional(),autopopulate_from_model_response:n.default.boolean().optional(),query_type:n.default.string().optional()});t.queryableTextAndResultsFieldSchema=M;let w=y.keys({type:n.default.valid(s.TextCollectionFieldType.JSON).required()});t.JSONFieldSchema=w;let x=y.keys({type:n.default.valid(s.TextCollectionFieldType.WfeButton).required(),buttonLabel:n.default.string().required(),buttonUrl:n.default.string().optional(),isDolphin:n.default.boolean().optional()});t.wfeButtonFieldSchema=x;let A=y.keys({type:n.default.valid(s.TextCollectionFieldType.AudioRecording).required(),format:n.default.string().valid(...u.SUPPORTED_AUDIO_FORMATS).required(),referenceAudioFile:n.default.string().optional(),minAudioDuration:n.default.number().min(0).optional(),maxAudioDuration:n.default.number().min(1).optional(),maxVolume:n.default.number().min(-70).max(0).optional(),minAverageVolume:n.default.number().min(-70).max(0).optional(),maxAverageVolume:n.default.number().min(-70).max(0).optional(),maxAmbientNoiseVolume:n.default.number().min(-70).max(0).optional(),minBackgroundNoiseScore:n.default.number().optional(),minOverallSpeechScore:n.default.number().optional(),disableRecording:n.default.boolean().optional()}),k=n.default.when(n.default.object({type:s.TextCollectionFieldType.Text}).unknown(),{then:b}).when(n.default.object({type:s.TextCollectionFieldType.Number}).unknown(),{then:_}).when(n.default.object({type:s.TextCollectionFieldType.Boolean}).unknown(),{then:S}).when(n.default.object({type:s.TextCollectionFieldType.Datetime}).unknown(),{then:v}).when(n.default.object({type:s.TextCollectionFieldType.Category}).unknown(),{then:P}).when(n.default.object({type:s.TextCollectionFieldType.Select}).unknown(),{then:C}).when(n.default.object({type:s.TextCollectionFieldType.Autocomplete}).unknown(),{then:I}).when(n.default.object({type:s.TextCollectionFieldType.QueryableTextAndResults}).unknown(),{then:M}).when(n.default.object({type:s.TextCollectionFieldType.JSON}).unknown(),{then:w}).when(n.default.object({type:s.TextCollectionFieldType.BoundingBox}).unknown(),{then:E}).when(n.default.object({type:s.TextCollectionFieldType.TimeRange}).unknown(),{then:L}).when(n.default.object({type:s.TextCollectionFieldType.TranscriptionText}).unknown(),{then:T}).when(n.default.object({type:s.TextCollectionFieldType.FileUpload}).unknown(),{then:O}).when(n.default.object({type:s.TextCollectionFieldType.WfeButton}).unknown(),{then:x}).when(n.default.object({type:s.TextCollectionFieldType.AudioRecording}).unknown(),{then:A});t.unitFieldAlternativesSchema=k;let N=y.keys({type:n.default.valid(s.TextCollectionFieldType.FieldSet).required(),fields:n.default.array().min(1).items(k,n.default.link("#fieldSet")).required(),inline:n.default.boolean().optional()}).id("fieldSet");t.fieldSetSchema=N;let z=y.keys({type:n.default.valid(s.TextCollectionFieldType.FieldSet).required(),fields:n.default.array().min(1).items(k).required(),inline:n.default.valid(!0)}),j=m.keys({type:n.default.valid(s.TextCollectionFieldType.Form).required(),random_order:n.default.boolean().optional(),fields:n.default.array().min(1).items(k.when(n.default.object({type:s.TextCollectionFieldType.FieldSet}).unknown(),{then:N})).required()});t.formFieldSchema=j;let D=n.default.object().keys({form_id:n.default.string(),title:n.default.string(),action:n.default.string().valid(...l.default.values(s.TextCollectionFormAction)),conditions:n.default.array().min(1).items(f).optional(),fields:n.default.array().min(1).items(k.when(n.default.object({type:s.TextCollectionFieldType.FieldSet}).unknown(),{then:z})).required()});t.formSchema=D;let F=n.default.object().keys({attachments:n.default.array().min(1).items(d).required(),fields:n.default.array().min(1).items(k.when(n.default.object({type:s.TextCollectionFieldType.FieldSet}).unknown(),{then:N}).when(n.default.object({type:s.TextCollectionFieldType.Form}).unknown(),{then:j})).required().messages({"any.required":"The following input field is missing: {{#label}}, you can check your input in JSON tab in Edit section to locate your missing field."}),forms:n.default.array().items(D).optional(),suggestionSources:n.default.array().items(n.default.string().valid(...l.default.values(s.TextCollectionSuggestionSource))).optional(),title:n.default.string().optional(),hypothesis:n.default.object().unknown(!0).optional(),hypothesisConfidence:n.default.number().optional(),hideHypothesis:n.default.boolean().optional(),read_only_field_ids:n.default.array().items(n.default.string()).optional(),blurred_field_ids:n.default.array().items(n.default.string()).optional(),description:n.default.string().optional(),responses_required:n.default.number().integer().min(1).optional(),headset_required:n.default.boolean().optional(),process_attachments:n.default.boolean().optional(),templateVariables:n.default.object().unknown(!0).optional(),force_stacked:n.default.boolean().optional(),generation_task_extra_params:n.default.object().unknown(!0).optional()}).unknown(!0);t.requestParamsSchema=F;let V=n.default.object().keys({fields:n.default.array().min(1).items(k.when(n.default.object({type:s.TextCollectionFieldType.FieldSet}).unknown(),{then:N}).when(n.default.object({type:s.TextCollectionFieldType.Form}).unknown(),{then:j})).required().messages({"any.required":"The following input field is missing: {{#label}}, you can check your input in JSON tab in Edit section to locate your missing field."}),forms:n.default.array().items(D).optional(),suggestionSources:n.default.array().items(n.default.string().valid(...l.default.values(s.TextCollectionSuggestionSource))).optional(),title:n.default.string().optional(),hypothesis:n.default.object().unknown(!0).optional(),hypothesisConfidence:n.default.number().optional(),hideHypothesis:n.default.boolean().optional(),read_only_field_ids:n.default.array().items(n.default.string()).optional(),blurred_field_ids:n.default.array().items(n.default.string()).optional(),description:n.default.string().optional(),responses_required:n.default.number().integer().min(1).optional(),headset_required:n.default.boolean().optional(),process_attachments:n.default.boolean().optional(),templateVariables:n.default.object().unknown(!0).optional(),force_stacked:n.default.boolean().optional(),generation_task_extra_params:n.default.object().unknown(!0).optional()}).unknown(!0);t.requestParamsSchemaDependent=V;let U=n.default.object().keys({field_id:n.default.string().required(),type:n.default.string().valid(...Object.values(s.TextCollectionFieldType)).required(),response:n.default.array().items(n.default.any()).required()}).unknown(!0);t.annotationSchema=U,t.formatJoiValidateError=e=>{let t=e.details[0],i=t.path.join(".");return`The taxonomy or instruction parameters are not set up correctly. Error Message: ${t.message} Path: ${i}`};let G=n.default.array().items(k.when(n.default.object({type:s.TextCollectionFieldType.FieldSet}).unknown(),{then:N}).when(n.default.object({type:s.TextCollectionFieldType.Form}).unknown(),{then:j})),validateInternalFields=async e=>{if(!l.default.isArray(e))throw Error("Failed internal field validation, fields is not an array");let{error:t}=G.validate(e);if(t)throw Error(`Failed internal field validation: ${JSON.stringify(t)}`);return!0};t.validateInternalFields=validateInternalFields},899047:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"OpenAIModels",{enumerable:!0,get:function(){return M.OpenAIModels}}),t.generateToolCallId=function(){return`call_${Math.random().toString(36).substring(2,15)}`},t.masterEndpointMap=t.doesUrlSupportAttachments=t.getUrlFromStrategy=t.doesStrategySupportAttachments=t.getStrategyFromUrl=t.StrategiesThatSupportAttachments=t.EndpointHostToStrategyMap=t.GCPTextBisonEnpoint=t.GCPTextBisonProjectId=t.UseCasePrefix=t.StrategyParamsSchemaMap=t.LiteLLMEmbeddingsStrategyParamsSchema=t.OpenAIProviderEmbeddingsParamsSchema=t.LiteLLMResponsesStrategyParamsSchema=t.OpenAIProviderResponsesParamsSchema=t.OpenAIResponsesAPIParamsSchema=t.LiteLLMEmbeddingsAPIInternalParamsSchema=t.LiteLLMEmbeddingsAPIParamsSchema=t.LiteLLMResponsesAPIInternalParamsSchema=t.LiteLLMResponsesAPIParamsSchema=t.LiteLLMStrategyParamsSchema=t.FireworksProviderParamsSchema=t.PerplexityProviderParamsSchema=t.PerplexityProviderAdditionalParamsSchema=t.xAIStrategyParamsSchema=t.AzureAIProviderParamsSchema=t.VertexAIProviderParamsSchema=t.GeminiProviderParamsSchema=t.LLMEngineProviderParamsSchema=t.MistralProviderParamsSchema=t.BedrockProviderParamsSchema=t.CohereProviderParamsSchema=t.AnthropicProviderParamsSchema=t.OpenAIProviderParamsSchema=t.LiteLLMCommonParamsSchema=t.OpenAIStrategyParamsSchema=t.OpenAIProviderCustomParamsSchema=t.LiteLLMProvider=t.MonadMultimodalStrategyParamsSchema=t.GoldfishStrategyV2ParamsSchema=t.GoldfishEndpointUrl=t.GoldfishStrategyParamsSchema=t.GoldfishStrategyUseCase=t.MeerkatSafetyStrategyParamsSchema=t.NemotronStrategyParamsSchema=t.AlpacaStrategyV2ParamsSchema=t.AlpacaStrategyParamsSchema=t.AnthropicStrategyParamsSchema=t.AnthropicStrategyCustomParamsSchema=t.YiStrategyParamsSchema=t.VertexGeminiStrategyParamsSchema=t.GeminiToolUseTrajectoryStrategyParamsSchema=t.GeminiStrategyParamsSchema=t.VertexRegions=t.GCPProjects=t.QCRIFanarGemmaStrategyParamsSchema=t.QCRIFanarStrategyParamsSchema=t.SDAIAStrategyParamsSchema=t.BulbaIceStrategyV2ParamsSchema=t.BulbaIceStrategyParamsSchema=t.BulbaLiveRewriteStrategyParamsSchema=t.BulbaBardEndpointOperation=t.EGPV5CompletionsStrategyParamsSchema=t.EGPV4CompletionsStrategyParamsSchema=t.DonovanStrategyParamsSchema=t.BeeOrchestratorStrategyParamsSchema=t.BeeStrategyParamsSchema=t.ImpalaStrategyParamsSchema=t.BeaverStrategyParamsSchema=t.TextBisonStrategyParamsSchema=t.BulbaBridgeStrategyParamsSchema=t.GorillaRewriteStrategyParamsSchema=t.HuggingFaceStrategyParamsSchema=t.CohereStrategyParamsSchema=t.EGPCompletionsStrategyParamsSchema=t.EGPChatCompletionsStrategyParamsSchema=t.FlamingoAudioStrategyParamsSchema=t.FlamingoMMStrategyParamsSchema=t.FlamingoGraphStrategyParamsSchema=t.FlamingoStrategyParamsSchema=t.OpenAIAssistantsStrategyParamsSchema=t.OpenAIResponseFormatSchema=t.FixedResponseStrategyParamsSchema=t.MirrorStrategyParamsSchema=t.SealStrategyParamsSchema=t.AiredaleChatStrategyParamsSchema=t.ToolUseProcessSupervisionStrategyParamsSchema=t.AirdaleStrategyParamsSchema=t.StrategyName=t.TrajectoryItemBaseSchema=t.CandidateState=t.ImageDetail=void 0;var n,s,l,p,u,d,m,h,g,f,y,b,T,S,_,v,L,C,I,R,P=i(689510),E=i(450973),O=i(246311),M=i(527096);t.ImageDetail=y,(n=y||(t.ImageDetail=y={})).Auto="auto",n.Low="low",n.High="high",t.CandidateState=b,(s=b||(t.CandidateState=b={})).Completed="completed",s.Loading="loading",s.Error="error";let w=P.z.object({trajectoryItemId:P.z.string()});t.TrajectoryItemBaseSchema=w,t.StrategyName=T,(l=T||(t.StrategyName=T={})).MirrorStrategy="MirrorStrategy",l.FixedResponseStrategy="FixedResponseStrategy",l.OpenAIStrategy="OpenAIStrategy",l.EGPChatCompletionsStrategy="EGPChatCompletionsStrategy",l.EGPV2ChatCompletionsStrategy="EGPV2ChatCompletionsStrategy",l.LiteLLMStrategy="LiteLLMStrategy",l.LiteLLMResponsesStrategy="LiteLLMResponsesStrategy",l.LiteLLMEmbeddingsStrategy="LiteLLMEmbeddingsStrategy",l.FlamingoStrategy="FlamingoStrategy",l.FlamingoGraphStrategy="FlamingoGraphStrategy",l.FlamingoMMStrategy="FlamingoMMStrategy",l.FlamingoAudioStrategy="FlamingoAudioStrategy",l.EGPCompletionsStrategy="EGPCompletionsStrategy",l.EGPV2CompletionsStrategy="EGPV2CompletionsStrategy",l.CohereStrategy="CohereStrategy",l.HuggingFaceStrategy="HuggingFaceStrategy",l.HuggingFaceStrategyV2="HuggingFaceStrategyV2",l.GorillaRewriteStrategy="GorillaRewriteStrategy",l.BulbaBridgeStrategy="BulbaBridgeStrategy",l.BulbaLiveRewriteStrategy="BulbaLiveRewriteStrategy",l.BulbaIceStrategy="BulbaIceStrategy",l.BulbaIceStrategyV2="BulbaIceStrategyV2",l.TextBisonStrategy="TextBisonStrategy",l.BeaverStrategy="BeaverStrategy",l.ImpalaStrategy="ImpalaStrategy",l.BeeStrategy="BeeStrategy",l.BeeOrchestratorStrategy="BeeOrchestratorStrategy",l.DonovanStrategy="DonovanStrategy",l.EGPV4CompletionsStrategy="EGPV4CompletionsStrategy",l.EGPV5CompletionsStrategy="EGPV5CompletionsStrategy",l.SealStrategy="SealStrategy",l.AirdaleStrategy="AirdaleStrategy",l.AiredaleChatStrategy="AiredaleChatStrategy",l.SealStrategyV2="SealStrategyV2",l.GeminiStrategy="GeminiStrategy",l.VertexGeminiStrategy="VertexGeminiStrategy",l.ToolUseProcessSupervisionStrategy="ToolUseProcessSupervisionStrategy",l.YiStrategy="YiStrategy",l.AnthropicStrategy="AnthropicStrategy",l.SealStrategyV3="SealStrategyV3",l.OpenAIAssistantsStrategy="OpenAIAssistantsStrategy",l.SealStrategyV4="SealStrategyV4",l.AlpacaStrategy="AlpacaStrategy",l.AlpacaStrategyV2="AlpacaStrategyV2",l.SDAIAStrategy="SDAIAStrategy",l.QCRIFanarStrategy="QCRIFanarStrategy",l.QCRIFanarGemmaStrategy="QCRIFanarGemmaStrategy",l.NemotronStrategy="NemotronStrategy",l.MeerkatSafetyStrategy="MeerkatSafetyStrategy",l.GoldfishStrategy="GoldfishStrategy",l.GoldfishStrategyV2="GoldfishStrategyV2",l.MonadMultimodalStrategy="MonadMultimodalStrategy",l.GeminiToolUseTrajectoryStrategy="GeminiToolUseTrajectoryStrategy",l.BeeBenchmarkStrategy="BeeBenchmarkStrategy",l.BeeOrchestratorBenchmarkStrategy="BeeOrchestratorBenchmarkStrategy";let x={workerId:P.z.string().optional(),useWorkerLocation:P.z.boolean().optional()},A=P.z.object({numResults:P.z.number().int().optional(),maxTokens:P.z.number().int().optional(),temperature:P.z.number().optional(),topKReturn:P.z.number().int().optional(),topP:P.z.number().optional(),countPenalty:P.z.object({scale:P.z.number().optional(),applyToNumbers:P.z.boolean().optional(),applyToPunctuations:P.z.boolean().optional(),applyToStopwords:P.z.boolean().optional(),applyToWhitespaces:P.z.boolean().optional(),applyToEmojis:P.z.boolean().optional()}).optional(),frequencyPenalty:P.z.object({scale:P.z.number().optional(),applyToNumbers:P.z.boolean().optional(),applyToPunctuations:P.z.boolean().optional(),applyToStopwords:P.z.boolean().optional(),applyToWhitespaces:P.z.boolean().optional(),applyToEmojis:P.z.boolean().optional()}).optional(),presencePenalty:P.z.object({scale:P.z.number().optional(),applyToNumbers:P.z.boolean().optional(),applyToPunctuations:P.z.boolean().optional(),applyToStopwords:P.z.boolean().optional(),applyToWhitespaces:P.z.boolean().optional(),applyToEmojis:P.z.boolean().optional()}).optional(),stopSequences:P.z.array(P.z.string()).optional()});t.AirdaleStrategyParamsSchema=A;let k=P.z.object({endpointName:P.z.string().optional(),vllm_sampling_params:P.z.any().optional(),max_depth:P.z.number().optional(),num_retries:P.z.number().optional(),num_steps_to_generate:P.z.number().optional(),generate_action_plan_only:P.z.boolean().optional(),tools:P.z.array(P.z.string()).optional()});t.ToolUseProcessSupervisionStrategyParamsSchema=k;let N=P.z.object({temperature:P.z.number().optional(),systemPrompt:P.z.string().optional(),maxTokens:P.z.number().int().optional()});t.AiredaleChatStrategyParamsSchema=N;let z=P.z.object({url_override:P.z.string().optional(),max_new_tokens:P.z.number().int().max(8192).optional(),temperature:P.z.number().optional(),do_sample:P.z.boolean().optional(),num_beams:P.z.number().optional(),no_repeat_ngram_size:P.z.number().optional(),repeat_penalty:P.z.number().optional()});t.SealStrategyParamsSchema=z;let j=P.z.object({prefix:P.z.string().optional(),stream:P.z.boolean().optional(),interval_time:P.z.number().optional(),total_time:P.z.number().optional(),test_random_error_rate:P.z.number().refine(e=>void 0===e||e>=0&&e<=1).optional()});t.MirrorStrategyParamsSchema=j;let D=P.z.object({response:P.z.string().describe("The fixed response string to return"),delay:P.z.number().optional().describe("Delay in milliseconds before returning the response"),model:P.z.string().optional().describe("Model name to return in the response")});t.FixedResponseStrategyParamsSchema=D;let F=P.z.object({type:P.z.enum(["json_object","json_schema","text"]).optional(),json_schema:P.z.object({}).passthrough().optional()});t.OpenAIResponseFormatSchema=F;let V=P.z.object({model:P.z.enum(["gpt-3.5-turbo","gpt-4","gpt-4-turbo","gpt-4-1106-preview","gpt-4-vision-preview","gpt-4-turbo-preview","gpt-4o","gpt-4o-mini"]).optional(),name:P.z.string().optional(),description:P.z.string().optional(),instructions:P.z.string().optional(),tools:P.z.array(P.z.any()).optional()});t.OpenAIAssistantsStrategyParamsSchema=V;let U=P.z.object({stream:P.z.boolean().optional(),model:P.z.string().optional(),max_tokens:P.z.number().int().optional(),temperature:P.z.number().optional(),repetition_penalty:P.z.number().optional(),top_p:P.z.number().optional(),separatorToken:P.z.string().optional(),requestTimeoutMs:P.z.number().optional(),returnFullSequence:P.z.boolean().optional(),returnDeserialized:P.z.boolean().optional(),systemPrompt:P.z.string().optional(),sampleModelParams:P.z.any().optional()});t.FlamingoStrategyParamsSchema=U;let G=P.z.object({model:P.z.string(),stream:P.z.boolean().default(!1),uploadToS3:P.z.boolean().default(!0),temperature:P.z.number(),maxMessages:P.z.number().default(1),joinString:P.z.string().optional().describe('The string to join the messages with. Defaults to "\n\n"'),v2:P.z.boolean().optional(),sampleModelParams:P.z.any().optional(),earlyStopConfig:P.z.object({minCharacters:P.z.number().describe("Minimum number of characters to generate"),stopSequence:P.z.string().describe("Stop sequence to use for early stopping")}).optional(),systemPrompt:P.z.string().optional(),assignmentId:P.z.string().optional(),projectId:P.z.string().optional(),usedFallbackParams:P.z.boolean().optional(),topP:P.z.number().optional(),repetitionPenalty:P.z.number().optional(),n_generations_filter_type:P.z.string().optional(),dialogId:P.z.string().optional(),userPromptTemplate:P.z.string().optional(),maxTokens:P.z.number().optional(),workstream:P.z.string().optional(),stitchConsecutiveAssistantMessages:P.z.boolean().optional().describe("Consolidate consecutive assistant messages into a single assistant message"),stitchPartialResponses:P.z.boolean().optional().describe("Generates a single response by generating multiple shorter responses and stitching them together. Useful for unreliable models with long response times."),useExtendedTimeout:P.z.boolean().optional().describe("This field is deprecated, and toggling on will not have any effect."),enableExpandableResponse:P.z.boolean().optional().describe("Whether to enable expandable response mode"),enableFeedback:P.z.boolean().optional().describe("Whether to enable feedback to CB"),enableDialog:P.z.boolean().optional().describe("Whether to enable Dialog API"),use_dialog_types:P.z.boolean().optional().describe("Whether to use Dialog API types and format")});t.FlamingoGraphStrategyParamsSchema=G;let $=P.z.object({model:P.z.string(),maxTokens:P.z.number().int().default(2048),maxGenLength:P.z.number().int(),generationAlgorithm:P.z.string().default("top_p"),temperature:P.z.number(),assignmentId:P.z.string().optional(),projectId:P.z.string().optional(),sampleModelParams:P.z.any().optional(),topP:P.z.number().optional(),repetitionPenalty:P.z.number().optional()});t.FlamingoMMStrategyParamsSchema=$;let B=P.z.object({model:P.z.string(),stream:P.z.boolean().default(!1),uploadToS3:P.z.boolean().default(!0),processTranscripts:P.z.boolean().default(!0),sampleModelParams:P.z.any().optional(),temperature:P.z.number().optional(),assignmentId:P.z.string().optional(),projectId:P.z.string().optional(),topP:P.z.number().optional()});t.FlamingoAudioStrategyParamsSchema=B;let q=P.z.object({model:P.z.string(),instructions:P.z.string().optional(),temperature:P.z.number().optional(),max_tokens:P.z.number().optional(),stop_sequences:P.z.array(P.z.string()).optional(),stream:P.z.boolean().optional()});t.EGPChatCompletionsStrategyParamsSchema=q;let W=P.z.object({model:P.z.string(),database_schema:P.z.string().optional(),table_id:P.z.string().optional(),temperature:P.z.number().optional(),max_tokens:P.z.number().optional(),stop_sequences:P.z.array(P.z.string()).optional(),stream:P.z.boolean().optional()});t.EGPCompletionsStrategyParamsSchema=W;let H=P.z.object({stream:P.z.boolean().optional(),model:P.z.string().optional(),temperature:P.z.number().gte(0).lte(5).optional(),k:P.z.number().int().gte(0).lte(500).optional(),p:P.z.number().gte(0).lte(1).optional(),max_tokens:P.z.number().int().optional(),preamble_override:P.z.string().optional(),projectId:P.z.string().optional(),assignmentId:P.z.string().optional(),prompt_truncation:P.z.enum(["AUTO","OFF"]).optional()});t.CohereStrategyParamsSchema=H;let Q=P.z.object({temperature:P.z.number().optional(),max_new_tokens:P.z.number().int().optional(),top_p:P.z.number().optional(),repetition_penalty:P.z.number().optional(),do_sample:P.z.boolean().optional(),seed:P.z.number().int().optional(),truncate:P.z.number().int().optional(),stop:P.z.array(P.z.string()).optional(),stream:P.z.boolean().optional()});t.HuggingFaceStrategyParamsSchema=Q;let K=P.z.object({url_override:P.z.string().optional(),model:P.z.string(),temperature:P.z.number().optional(),candidateCount:P.z.number().optional(),topP:P.z.number().optional(),topK:P.z.number().optional()});t.GorillaRewriteStrategyParamsSchema=K;let J=P.z.object({model:P.z.string(),temperature:P.z.number().optional(),candidateCount:P.z.number().optional(),topP:P.z.number().optional(),topK:P.z.number().optional(),useChatHistoryInPrompt:P.z.boolean().optional(),prependPrompt:P.z.string().optional(),bardConfig:P.z.object({overwriteSystemInstruction:P.z.string().optional(),overwriteDeveloperInstruction:P.z.string().optional(),returnFactualityMetadata:P.z.boolean().optional(),searchOnlyConfig:P.z.object({}).optional()}).optional(),...x});t.BulbaBridgeStrategyParamsSchema=J;let Y=P.z.object({model:P.z.string().optional(),temperature:P.z.number().gte(0).lte(1).optional(),maxOutputTokens:P.z.number().int().gte(1).lte(1024).optional(),topK:P.z.number().int().gte(1).lte(40).optional(),topP:P.z.number().gte(0).lte(1).optional()});t.TextBisonStrategyParamsSchema=Y;let Z=P.z.object({model:P.z.string()});t.BeaverStrategyParamsSchema=Z;let X=P.z.object({config:P.z.string().optional(),timeout_sec:P.z.number().int().optional()});t.ImpalaStrategyParamsSchema=X;let ee=P.z.object({model:P.z.string(),options:P.z.object({frequency_penalty:P.z.number().optional(),max_tokens:P.z.number().optional(),n:P.z.number().optional(),temperature:P.z.number().optional(),variable_temperature:P.z.string().optional().describe("{{my_template_variable}}"),top_p:P.z.number().optional(),tools:P.z.string().optional(),useRandomSeed:P.z.boolean().optional().describe("If enabled, uses a random seed each request to generate random samples")}).optional()});t.BeeStrategyParamsSchema=ee;let et=P.z.object({model:P.z.string().optional(),orchestrator:P.z.string().optional().describe("deprecated, use model instead"),use_native_tool_calls:P.z.boolean().default(!1),assignmentId:P.z.string().optional(),options:P.z.object({frequency_penalty:P.z.number().optional(),max_tokens:P.z.number().optional(),n:P.z.number().optional(),temperature:P.z.number().optional(),variable_temperature:P.z.string().optional().describe("{{my_template_variable}}"),top_p:P.z.number().optional(),tools:P.z.string().optional(),tool_allow_list:P.z.string().optional(),stop_token:P.z.string().optional(),appendAudioTranscriptToResponse:P.z.boolean().optional().describe("If enabled, adds the audio transcript to the response for audio models"),useRandomSeed:P.z.boolean().optional().describe("If enabled, uses a random seed each request to generate random samples")}).optional()});t.BeeOrchestratorStrategyParamsSchema=et;let er=P.z.object({model:P.z.string().optional(),workspace:P.z.string().optional(),taskCustomer:P.z.string().optional(),thread:P.z.string().optional(),datasets:P.z.array(P.z.string()).optional()});t.DonovanStrategyParamsSchema=er;let ei=P.z.object({model:P.z.string(),api_key:P.z.string(),max_tokens:P.z.number(),temperature:P.z.number().gte(0).lte(1).optional()});t.EGPV4CompletionsStrategyParamsSchema=ei;let en=P.z.object({model:P.z.string(),api_key:P.z.string(),account_id:P.z.string(),max_tokens:P.z.number(),temperature:P.z.number().gte(0).lte(1).optional()});t.EGPV5CompletionsStrategyParamsSchema=en,t.BulbaBardEndpointOperation=S,(p=S||(t.BulbaBardEndpointOperation=S={})).BARD="bard",p.BARD_ICE="bard-ice",p.BARD_NO_SEARCH="bard-no-search",p.BARD_SEARCH_OVERRIDE="bard-search-override",p.SEARCH="search",p.TOOL_PROMPT_GENERATION="tool-prompt-generation",p.TOOL_CODE_EXECUTION="tool-code-execution";let eo=P.z.object({url_override:P.z.string().optional(),model:P.z.string().optional(),operation:P.z.enum(["bard","bard-no-search","bard-search-override","search"]).optional(),search_results:P.z.array(P.z.any()).optional()});t.BulbaLiveRewriteStrategyParamsSchema=eo;let ea=P.z.object({url_override:P.z.string().optional(),model:P.z.string().optional(),file_attachments:P.z.array(P.z.any()).optional(),use_history:P.z.boolean().optional(),enable_advanced_ice_flow:P.z.boolean().optional(),multiturn:P.z.boolean().optional(),tool_prompt_generation:P.z.boolean().optional(),use_tasker_response:P.z.boolean().optional(),previousTextCollection:P.z.any().optional(),sftFlag:P.z.boolean().optional()});t.BulbaIceStrategyParamsSchema=ea;let es=P.z.object({url_override:P.z.string().optional(),model:P.z.string().optional(),file_attachments:P.z.array(P.z.any()).optional(),enable_advanced_ice_flow:P.z.boolean().optional(),multiturn:P.z.boolean().optional()});t.BulbaIceStrategyV2ParamsSchema=es;let el=P.z.object({temperature:P.z.number().optional(),stream:P.z.boolean().optional(),model:P.z.string().optional(),top_p:P.z.number().optional(),n:P.z.number().optional(),add_generation_prompt:P.z.boolean().optional(),echo:P.z.boolean().optional(),stop:P.z.any().optional()});t.SDAIAStrategyParamsSchema=el;let ec=P.z.object({model:P.z.enum(["Fanar","Fanar-S-1-7B","Fanar-C-1-8.7B","Islamic-RAG"]).optional(),frequency_penalty:P.z.number().optional().default(0),logit_bias:P.z.record(P.z.number()).optional().nullable(),logprobs:P.z.boolean().optional().nullable(),top_logprobs:P.z.number().min(0).max(20).optional().nullable(),max_tokens:P.z.number().optional().default(750),n:P.z.number().optional().nullable(),presence_penalty:P.z.number().min(-2).max(2).optional().nullable(),temperature:P.z.number().optional().default(0),top_p:P.z.number().optional().nullable(),best_of:P.z.number().optional().nullable(),top_k:P.z.number().optional().nullable(),min_p:P.z.number().optional().nullable(),repetition_penalty:P.z.number().optional().default(1.1),length_penalty:P.z.number().optional().nullable(),early_stopping:P.z.boolean().optional().nullable(),stop_token_ids:P.z.array(P.z.number()).optional().nullable(),ignore_eos:P.z.boolean().optional().nullable(),min_tokens:P.z.number().optional().nullable(),skip_special_tokens:P.z.boolean().optional().nullable(),spaces_between_special_tokens:P.z.boolean().optional().nullable(),truncate_prompt_tokens:P.z.number().optional().nullable(),prompt_logprobs:P.z.number().optional().nullable(),book_names:P.z.array(P.z.string()).optional().nullable(),timeout:P.z.number().optional().default(15e4)});t.QCRIFanarStrategyParamsSchema=ec;let ep=P.z.object({model:P.z.string().optional(),repetition_penalty:P.z.number().optional(),temperature:P.z.number().optional(),prompt_logprobs:P.z.number().optional()});t.QCRIFanarGemmaStrategyParamsSchema=ep,t.GCPProjects=_,(u=_||(t.GCPProjects=_={})).VERTEX="vertex",u.VERTEX_BACKUP="vertex_backup",t.VertexRegions=v,(d=v||(t.VertexRegions=v={})).US_WEST4="us-west4",d.US_CENTRAL1="us-central1";let eu=P.z.object({category:P.z.nativeEnum(E.HarmCategory),threshold:P.z.nativeEnum(E.HarmBlockThreshold)}),ed=P.z.object({model:P.z.string(),maxOutputTokens:P.z.number().optional(),temperature:P.z.number().optional(),topP:P.z.number().optional(),topK:P.z.number().optional(),safetySettings:P.z.array(eu).optional(),projectId:P.z.string().optional(),assignmentId:P.z.string().optional(),gcpProject:P.z.nativeEnum(_).optional().describe("When left blank, it rotates between defined projects and API keys. Only select a project if you are instructed to do so."),systemInstruction:P.z.string().optional(),n:P.z.number().optional(),overrideApiKey:P.z.string().optional(),applyGoldfishChunkingToReferenceTexts:P.z.boolean().optional().describe("Apply Goldfish-specific chunking and formatting to reference texts"),enableCodeExecution:P.z.boolean().optional().describe("Enable code execution in model responses. This only works with certain models."),enableWebSearch:P.z.boolean().optional().describe("Enable web search in model responses. This only works with certain models."),enableShortResponse:P.z.boolean().optional().describe("Enable short response in model responses. This only works with certain models.")});t.GeminiStrategyParamsSchema=ed;let em=P.z.object({model:P.z.union([P.z.enum(["chat-bard-evergreen-cloud-agent-open-rlhf","chat-bard-evergreen-cloud-agent-open-rlhf-spark","chat-bard-evergreen-cloud-agent-open-rlhf-ir"]),P.z.string().describe("Custom Gemini model")]).describe("Tool use trajectory models available from Gemini.")});t.GeminiToolUseTrajectoryStrategyParamsSchema=em;let eh=P.z.object({model:P.z.union([P.z.enum(["gemini-2.0-flash-exp","gemini-2.0-flash-thinking-exp-1219","gemini-1.5-pro-002","gemini-1.5-pro","gemini-1.5-pro-latest","gemini-1.5-pro-001","gemini-1.5-pro-preview-0514","gemini-1.5-flash-002","gemini-1.5-flash-preview-0514","gemini-1.0-pro-001","gemini-1.0-pro-002","gemini-1.0-pro-vision-001","gemini-1.0-pro-vision","gemini-1.0-pro"]),P.z.string().describe("Custom Vertex Gemini model")]).describe("Vertex Gemini models available."),maxOutputTokens:P.z.number().optional(),temperature:P.z.number().optional(),topP:P.z.number().optional(),topK:P.z.number().optional(),tools:P.z.any().optional(),safetySettings:P.z.array(eu).optional(),region:P.z.nativeEnum(v).optional().describe("The region to be used when calling VertexStrategy. When left blank, it uses us-west4 as the default region.")});t.VertexGeminiStrategyParamsSchema=eh;let eg=P.z.object({model:P.z.string().optional(),prompt_template:P.z.string().optional(),top_k:P.z.number().optional(),top_p:P.z.number().optional(),temperature:P.z.number().optional(),max_new_tokens:P.z.number().optional(),repetition_penalty:P.z.number().optional()});t.YiStrategyParamsSchema=eg;let ef=P.z.object({thinking:P.z.object({type:P.z.enum(["enabled","disabled"]).optional(),budget_tokens:P.z.number().optional()}).optional()}),ey=P.z.object({n:P.z.number().int().optional().describe("Number of completions to generate."),overrideApiKey:P.z.string().optional().describe("Override the API key used for this client."),enablePromptCaching:P.z.boolean().optional().describe("Enable prompt caching. Default is false.")});t.AnthropicStrategyCustomParamsSchema=ey;let eb=P.z.object({model:P.z.string(),...ey.shape,...M.AnthropicMessagesParamsSchema.shape,...ef.shape});t.AnthropicStrategyParamsSchema=eb;let eT=P.z.object({model:P.z.string(),isSandbox:P.z.boolean().default(!1)});t.AlpacaStrategyParamsSchema=eT;let eS=P.z.object({model:P.z.string(),stream:P.z.boolean().default(!1)});t.AlpacaStrategyV2ParamsSchema=eS;let e_=P.z.object({model:P.z.union([P.z.enum(["nvidia/nemotron-4-340b-instruct"]),P.z.string().describe("Custom Nemotron model")]).describe("Nemotron models available."),temperature:P.z.number().optional(),top_p:P.z.number().optional(),max_tokens:P.z.number().optional()});t.NemotronStrategyParamsSchema=e_;let ev=P.z.object({config:P.z.string().optional(),model:P.z.string().optional()});t.MeerkatSafetyStrategyParamsSchema=ev,t.GoldfishStrategyUseCase=L,(m=L||(t.GoldfishStrategyUseCase=L={})).EVAL="eval",m.SFT_RLHF="sft/rlhf",m.MULTIMODAL="multimodal";let eL=P.z.object({model:P.z.string().default("grok-0626.research-models"),toolIds:P.z.string().optional().describe("Comma separated list of tool IDs to be used for the model."),stream:P.z.boolean().default(!1),max_tokens:P.z.number().int().default(8192),use_case:P.z.nativeEnum(L),temperature:P.z.number().optional().describe("Only for vlm-2"),partial_gen:P.z.enum(["Math","chat_with_files","chat_with_files_chunks","chat_completions","rag_chat_completions","reasoning_chat_completions","reasoning_chat_completions_mini_beta","grokX_chat_completions","redteamming_grokX","redteamming_rag"]).describe("Partial gen is a special API that returns chunked responses for process supervision. Only use this if the customer specified").optional(),deferred:P.z.boolean().default(!1).describe("Select this to enable [deferred chat completions](https://docs.x.ai/docs/guides/deferred-chat-completions). only chat completions are supported for deferred requests. i.e. Partial Gen being one of the following values: [chat_completions, reasoning_chat_completions, reasoning_chat_completions_mini_beta, rag_chat_completions, grokX_chat_completions]").optional()});t.GoldfishStrategyParamsSchema=eL,t.GoldfishEndpointUrl=C,(h=C||(t.GoldfishEndpointUrl=C={})).GOLDFISH_CHAT_COMPLETIONS_URL="https://research-models.api.x.ai/v1/chat/completions",h.GOLDFISH_CHAT_COMPLETIONS_URL_BASE="https://api.x.ai/v1/chat/completions";let eC=P.z.object({model:P.z.string(),endpoint_url:P.z.nativeEnum(C),max_tokens:P.z.number().int(),temperature:P.z.number(),deferred:P.z.boolean().describe("Allows you to defer the response from the model. This is useful for long running tasks.").optional(),stream:P.z.boolean().describe("Will not stream if deferred is true").optional(),timeout:P.z.number().describe("Timeout for the request in milliseconds").optional()});t.GoldfishStrategyV2ParamsSchema=eC;let eI=P.z.object({model:P.z.string().optional(),maxTokens:P.z.number().int().optional(),temperature:P.z.number().optional()});t.MonadMultimodalStrategyParamsSchema=eI,t.LiteLLMProvider=I,(g=I||(t.LiteLLMProvider=I={})).OpenAI="openai",g.Anthropic="anthropic",g.Cohere="cohere",g.Mistral="mistral",g.Bedrock="bedrock",g.LLMEngine="llmengine",g.Gemini="gemini",g.VertexAI="vertex_ai",g.AzureAI="azure_ai",g.xAI="xai",g.Perplexity="perplexity",g.Fireworks="fireworks_ai";let eR=P.z.object({timeout:P.z.number().optional().describe("Timeout for the request in milliseconds"),system_message_prefix:P.z.string().optional(),system_message_suffix:P.z.string().optional(),content_bytes:P.z.string().optional(),...x});t.OpenAIProviderCustomParamsSchema=eR;let eP=P.z.object({model:M.OpenAIModelsSchema,temperature:P.z.number().optional(),max_tokens:P.z.number().optional(),timeout:P.z.number().optional(),logprobs:P.z.boolean().optional(),top_logprobs:P.z.number().optional(),stream:P.z.boolean().optional(),n:P.z.number().optional(),system_message_prefix:P.z.string().optional(),system_message_suffix:P.z.string().optional(),content_bytes:P.z.string().optional(),overrideApiKey:P.z.string().optional(),response_format:F.optional(),...x,modalities:P.z.array(P.z.string()).optional(),audio:P.z.object({voice:P.z.string(),format:P.z.string()}).optional(),modelResponseCorruptionMetadata:O.ModelResponseCorruptionMetadata.optional(),assignmentId:P.z.string().optional(),tools:P.z.array(P.z.object({type:P.z.enum(["function"]),function:M.FunctionObjectSchema})).optional(),functionCallOverride:P.z.string().optional(),reasoning_effort:P.z.enum(["low","medium","high"]).optional().describe("Reasoning level to be used for the model."),verbosity:P.z.enum(["low","medium","high"]).optional().describe("Control whether answers are short and to the point or long and comprehensive.")});t.OpenAIStrategyParamsSchema=eP;let eE=P.z.object({overrideApiKey:P.z.string().optional().describe("Override the API key used for this client."),toolIds:P.z.string().optional().describe("Comma separated list of tool IDs to be used for the model."),functionCallOverride:P.z.string().optional().describe("A string parameter that overrides the default behavior of the tools parameter for function calling api."),systemPrompt:P.z.string().optional().describe("System prompt to be used for the model."),enablePromptCaching:P.z.boolean().optional().describe("Enable prompt caching for supported providers, currently only supported for Anthropic."),assignmentId:P.z.string().optional().describe("The assignment ID associated with this request."),extraHeaders:P.z.record(P.z.string(),P.z.any()).optional().describe("Additional headers to include in the API request."),extraParams:P.z.record(P.z.string(),P.z.any()).optional().describe("Additional parameters to include in the API request."),useExtendedTimeout:P.z.boolean().optional().describe("This field is deprecated, and toggling on will not have any effect."),timeout:P.z.number().optional().describe("Timeout for the request in milliseconds")});t.LiteLLMCommonParamsSchema=eE;let eO=P.z.object({provider:P.z.enum([I.OpenAI]),model:P.z.string(),...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape,...eR.shape});t.OpenAIProviderParamsSchema=eO;let eM=P.z.object({provider:P.z.enum([I.Anthropic]),model:P.z.string(),...ef.shape,...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape});t.AnthropicProviderParamsSchema=eM;let ew=P.z.object({provider:P.z.enum([I.Cohere]),model:P.z.string(),...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape});t.CohereProviderParamsSchema=ew;let ex=P.z.object({provider:P.z.enum([I.Bedrock]),model:P.z.string(),...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape});t.BedrockProviderParamsSchema=ex;let eA=P.z.object({provider:P.z.enum([I.Mistral]),model:P.z.string(),...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape});t.MistralProviderParamsSchema=eA;let ek=P.z.object({provider:P.z.enum([I.LLMEngine]),model:P.z.string(),...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape,...M.VLLMAdditionalParamsSchema.shape});t.LLMEngineProviderParamsSchema=ek;let eN=P.z.object({thinkingConfig:P.z.object({includeThoughts:P.z.boolean().optional()}).optional()}),ez=P.z.object({provider:P.z.enum([I.Gemini]),model:P.z.string(),...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape,...eN.shape});t.GeminiProviderParamsSchema=ez;let ej=P.z.object({provider:P.z.enum([I.VertexAI]),model:P.z.string(),...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape});t.VertexAIProviderParamsSchema=ej;let eD=P.z.object({provider:P.z.enum([I.AzureAI]),model:P.z.string(),...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape});t.AzureAIProviderParamsSchema=eD;let eF=P.z.object({provider:P.z.enum([I.xAI]),model:P.z.string(),...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape});t.xAIStrategyParamsSchema=eF;let eV=P.z.object({search_domain_filter:P.z.array(P.z.any()).optional().describe("A list of domains to limit search results to. Currently limited to only 3 domains for whitelisting and blacklisting. For blacklisting, add a - at the beginning of the domain string."),return_images:P.z.boolean().optional().describe("Determines whether search results should include images."),return_related_questions:P.z.boolean().optional().describe("Determines whether related questions should be returned."),search_recency_filter:P.z.string().optional().describe("Filters search results based on time (e.g., 'week', 'day')."),web_search_options:P.z.object({search_context_size:P.z.enum(["low","medium","high"]).optional().describe("Determines how much search context is retrieved for the model. Options are: low (minimizes context for cost savings but less comprehensive answers), medium (balanced approach suitable for most queries), and high (maximizes context for comprehensive answers but at higher cost).")}).optional().describe("Configuration for using web search in model responses."),stream:P.z.boolean().optional().describe("Determines whether to stream the response incrementally.")});t.PerplexityProviderAdditionalParamsSchema=eV;let eU=P.z.object({provider:P.z.enum([I.Perplexity]),model:P.z.string(),...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape,...eV.shape});t.PerplexityProviderParamsSchema=eU;let eG=P.z.object({provider:P.z.enum([I.Fireworks]),model:P.z.string(),...eE.shape,...M.OpenAIChatCompletionParamsSchema.shape});t.FireworksProviderParamsSchema=eG;let e$=P.z.discriminatedUnion("provider",[eO,eM,ew,eA,ez,ej,ek,eD,ex,eF,eU,eG]);t.LiteLLMStrategyParamsSchema=e$;let eB=P.z.object({overrideApiKey:P.z.string().optional().describe("Override the API key used for this client."),instructions:P.z.string().optional().describe("System prompt"),temperature:P.z.number().optional(),max_output_tokens:P.z.number().optional(),top_p:P.z.number().optional(),stream:P.z.boolean().optional(),tool_choice:P.z.enum(["none","auto","required"]).optional().describe("none - model will not call any tools. auto - model decides when to use tools. required - model must call one or more tools."),tools:P.z.array(P.z.any()).optional().describe("The list of possible tools that the model can access."),parallel_tool_calls:P.z.boolean().optional().describe("Whether to allow the model to run tool calls in parallel."),metadata:P.z.object({}).optional().describe("Additional metadata sent to the model."),background:P.z.boolean().optional().describe("Whether to run the model in the background."),timeout:P.z.number().optional().describe("Timeout for the request in milliseconds")});t.LiteLLMResponsesAPIParamsSchema=eB;let eq=P.z.object({background_poll_interval_ms:P.z.number().min(1e3).optional().describe("Polling interval in milliseconds for background responses. Minimum is 1000ms.")});t.LiteLLMResponsesAPIInternalParamsSchema=eq;let eW=P.z.object({overrideApiKey:P.z.string().optional().describe("Override the API key used for this client."),encoding_format:P.z.enum(["float","base64"]).optional().describe("The format to return the embeddings in"),dimensions:P.z.number().int().optional().describe("The number of dimensions the resulting output embeddings should have")});t.LiteLLMEmbeddingsAPIParamsSchema=eW;let eH=P.z.object({});t.LiteLLMEmbeddingsAPIInternalParamsSchema=eH;let eQ=P.z.object({reasoning:P.z.object({effort:P.z.enum(["low","medium","high"]).optional(),summary:P.z.enum(["auto","concise","detailed"]).optional()}).optional().describe("Configuration options for reasoning models (o-series models only)."),include:P.z.array(P.z.enum(["file_search_call.results","message.input_image.image_url","computer_call_output.output.image_url","reasoning.encrypted_content","code_interpreter_call.outputs"])).optional().describe("Specify additional output data to include in the model response."),truncation:P.z.enum(["auto","disabled"]).optional().describe("auto - truncate responses that exceed the context window. disabled (default) - model will throw a 400 if the response will exceed the context window.")});t.OpenAIResponsesAPIParamsSchema=eQ;let eK=P.z.object({provider:P.z.enum([I.OpenAI]),model:P.z.string(),...eB.shape,...eQ.shape,...eq.shape});t.OpenAIProviderResponsesParamsSchema=eK;let eJ=P.z.discriminatedUnion("provider",[eK]);t.LiteLLMResponsesStrategyParamsSchema=eJ;let eY=P.z.object({provider:P.z.enum([I.OpenAI]),model:P.z.string(),...eW.shape,...eH.shape});t.OpenAIProviderEmbeddingsParamsSchema=eY;let eZ=P.z.discriminatedUnion("provider",[eY]);t.LiteLLMEmbeddingsStrategyParamsSchema=eZ;let eX={[T.MirrorStrategy]:j,[T.FixedResponseStrategy]:D,[T.OpenAIStrategy]:eP,[T.EGPChatCompletionsStrategy]:q,[T.EGPV2ChatCompletionsStrategy]:q,[T.LiteLLMStrategy]:e$,[T.LiteLLMResponsesStrategy]:eJ,[T.LiteLLMEmbeddingsStrategy]:eZ,[T.FlamingoStrategy]:U,[T.FlamingoGraphStrategy]:G,[T.FlamingoMMStrategy]:$,[T.FlamingoAudioStrategy]:B,[T.EGPCompletionsStrategy]:W,[T.EGPV2CompletionsStrategy]:W,[T.CohereStrategy]:H,[T.HuggingFaceStrategy]:Q,[T.HuggingFaceStrategyV2]:Q,[T.GorillaRewriteStrategy]:K,[T.BulbaLiveRewriteStrategy]:eo,[T.BulbaIceStrategy]:ea,[T.BulbaIceStrategyV2]:es,[T.SDAIAStrategy]:el,[T.QCRIFanarStrategy]:ec,[T.QCRIFanarGemmaStrategy]:ep,[T.BulbaBridgeStrategy]:J,[T.TextBisonStrategy]:Y,[T.BeaverStrategy]:Z,[T.ImpalaStrategy]:X,[T.BeeStrategy]:ee,[T.BeeOrchestratorStrategy]:et,[T.BeeBenchmarkStrategy]:ee,[T.BeeOrchestratorBenchmarkStrategy]:et,[T.DonovanStrategy]:er,[T.EGPV4CompletionsStrategy]:ei,[T.EGPV5CompletionsStrategy]:en,[T.SealStrategy]:z,[T.AirdaleStrategy]:A,[T.AiredaleChatStrategy]:N,[T.SealStrategyV2]:z,[T.GeminiStrategy]:ed,[T.VertexGeminiStrategy]:eh,[T.GeminiToolUseTrajectoryStrategy]:em,[T.YiStrategy]:eg,[T.AnthropicStrategy]:eb,[T.SealStrategyV3]:z,[T.OpenAIAssistantsStrategy]:V,[T.SealStrategyV4]:z,[T.ToolUseProcessSupervisionStrategy]:k,[T.AlpacaStrategy]:eT,[T.AlpacaStrategyV2]:eS,[T.NemotronStrategy]:e_,[T.MeerkatSafetyStrategy]:ev,[T.GoldfishStrategy]:eL,[T.GoldfishStrategyV2]:eC,[T.MonadMultimodalStrategy]:eI};t.StrategyParamsSchemaMap=eX,t.UseCasePrefix=R,(f=R||(t.UseCasePrefix=R={})).Billing="billing",f.Benchmark="benchmark",f.ChatMain="chat-main",f.Linter="linter",f.AutoFeedback="auto-feedback",f.AutoReviewer="auto-reviewer",f.AutoRater="auto-eval",f.ProcessSupervision="process-supervision",f.AutoLanguageDetection="auto-language-detection",f.ModelEval="model-eval",f.PipelineV3WorkflowFramework="pipelinev3-workflow-framework",f.PipelineV3Hooks="pipelinev3-hooks",f.Script="script",f.AutoCritique="auto-critique",f.Corp="corp",f.Compass="compass",f.GenAI="genai",f.RLHF="rlhf",f.Grader="grader",f.StepFunctions="sfn",f.Chatlite="chatlite",f.AutoJsonata="auto-jsonata",f.ChatTaskTool="chat-task-tool",f.SyntheticBenchmark="synthetic-benchmark",f.FailureMode="failure-mode",f.ModelPlayground="model-playground",f.PreProcess="pre-process",f.ModelManagement="model-management",f.FactChecker="fact-checker",f.CustomerApp="customer-app",f.QualityPromptDiversity="quality-prompt-diversity",f.FreeTextGrading="free-text-grading",f.DeliveryValidation="delivery-validation",f.ResumeMetadataValidation="resume-metadata-validation",f.ModelHealthAgent="model-health-agent";let e0="responsive-seat-393017";t.GCPTextBisonProjectId=e0;let e1=`https://us-central1-aiplatform.googleapis.com/v1/projects/${e0}/locations/us-central1/publishers/google/models/text-bison:predict`;t.GCPTextBisonEnpoint=e1;let e2={"api.openai.com":T.OpenAIStrategy,"generativelanguage.googleapis.com":T.GorillaRewriteStrategy,"34.105.44.178":T.BulbaLiveRewriteStrategy,"chatbot-gateway-7ssccobb.uc.gateway.dev":T.CohereStrategy,"api.cohere.ai":T.CohereStrategy,"falcon-40b-ift.ngrok.io":T.HuggingFaceStrategy,"api-inference.huggingface.co":T.HuggingFaceStrategyV2,"us-central1-aiplatform.googleapis.com":T.TextBisonStrategy,"hyperplant.io.naver.com":T.BeaverStrategy,"usw2-fm-third-party-endpoint-prod.apple.com":T.BeeStrategy};t.EndpointHostToStrategyMap=e2;let e5=[T.BulbaIceStrategy,T.BulbaIceStrategyV2,T.OpenAIStrategy,T.FlamingoMMStrategy,T.FlamingoAudioStrategy,T.GoldfishStrategy,T.GoldfishStrategyV2,T.GeminiStrategy,T.BulbaBridgeStrategy,T.VertexGeminiStrategy,T.BeeStrategy,T.BeeOrchestratorStrategy,T.AnthropicStrategy,T.MonadMultimodalStrategy,T.FlamingoGraphStrategy,T.LiteLLMStrategy,T.LiteLLMResponsesStrategy,T.LiteLLMEmbeddingsStrategy];t.StrategiesThatSupportAttachments=e5;let getStrategyFromUrl=e=>{let t;if(e3[e]?.strategy)return e3[e].strategy;try{t=new URL(e)}catch(e){return}let i=t&&t.host?e2[t.host]:void 0;return i};t.getStrategyFromUrl=getStrategyFromUrl;let doesStrategySupportAttachments=e=>e5.includes(e);t.doesStrategySupportAttachments=doesStrategySupportAttachments,t.getUrlFromStrategy=e=>{for(let[t,i]of Object.entries(e3))if(i.strategy===e)return t},t.doesUrlSupportAttachments=e=>{let t=getStrategyFromUrl(e);return!!t&&doesStrategySupportAttachments(t)};let e3={"https://xiaohua-zhang-test.com/v1/chat/completions":{strategy:T.MirrorStrategy,description:"Testing, do not use",customer:"Scale"},"https://fixed-response-test.scale.com/v1/chat/completions":{strategy:T.FixedResponseStrategy,description:"Fixed response testing strategy",customer:"Scale"},"https://api.openai.com/v1/chat/completions":{strategy:T.OpenAIStrategy,description:"",customer:"Ostrich"},"https://falcon-40b-ift.ngrok.io":{strategy:T.HuggingFaceStrategy,description:"",customer:"Hedgehog"},"https://api-inference.huggingface.co/models/HuggingFaceH4/falcon-40b-ift":{strategy:T.HuggingFaceStrategyV2,description:"",customer:"Hedgehog"},"https://api.spellbook.scale.com/egp/v1/chat-completions":{strategy:T.EGPChatCompletionsStrategy,description:"V1 Chat Completions",customer:"Scale"},"https://api.spellbook.scale.com/egp/v1/completions":{strategy:T.EGPCompletionsStrategy,description:"V1 Completions",customer:"Scale"},"https://api.egp.scale.com/v2/completions":{strategy:T.EGPV2CompletionsStrategy,description:"V2 Completions",customer:"Scale"},"https://api.egp.scale.com/v2/chat-completions":{strategy:T.EGPV2ChatCompletionsStrategy,description:"V2 Chat Completions",customer:"Scale"},"https://litellm.ml-serving-internal.scale.com/v1/chat/completions":{strategy:T.LiteLLMStrategy,description:"Chat completions through LiteLLM Proxy",customer:"Scale"},"https://litellm.ml-serving-internal.scale.com/v1/responses":{strategy:T.LiteLLMResponsesStrategy,description:"Responses through LiteLLM Proxy",customer:"Scale"},"https://litellm.ml-serving-internal.scale.com/v1/embeddings":{strategy:T.LiteLLMEmbeddingsStrategy,description:"Embeddings through LiteLLM Proxy",customer:"Scale"},"https://api.cohere.ai/v1/chat":{strategy:T.CohereStrategy,description:"",customer:"Crab"},GCPTextBisonEnpoint:{strategy:T.TextBisonStrategy,description:"Text Bison",customer:"Vertigo"},"https://hyperplant.io.naver.com/v1/proxy/call_llm":{strategy:T.BeaverStrategy,description:"",customer:"Beaver"},"https://pieplatform.co/api/external/chat":{strategy:T.ImpalaStrategy,description:"",customer:"Impala"},"https://autopush-generativelanguage.sandbox.googleapis.com/v1beta2":{strategy:T.BulbaBridgeStrategy,description:"Gemini Internal - Use preprod instead",customer:"Gaius"},"https://preprod-generativelanguage.googleapis.com/v1beta":{strategy:T.BulbaBridgeStrategy,description:"Gemini Internal",customer:"Gaius"},"https://usw2-fm-third-party-endpoint-prod.apple.com/api/v1/chat/completions":{strategy:T.BeeStrategy,description:"",customer:"Bee"},"https://usw2-fm-third-party-endpoint-prod.apple.com/api/v1/orchestrator/completions":{strategy:T.BeeOrchestratorStrategy,description:"Only for afm-text-orch-* endpoints",customer:"Bee"},"https://usw2-fm-third-party-endpoint-prod.apple.com/fm-benchmarking/api/v1/chat/completions":{strategy:T.BeeBenchmarkStrategy,description:"Only for afm-text-benchmark-scale-* endpoints",customer:"Bee"},"https://usw2-fm-third-party-endpoint-prod.apple.com/fm-benchmarking/api/v1/orchestrator/completions":{strategy:T.BeeOrchestratorBenchmarkStrategy,description:"Only for afm-text-benchmark-orch-* endpoints",customer:"Bee"},"https://www.fairllms.com/codellama":{strategy:T.FlamingoStrategy,description:"Code LLaMa",customer:"Lazarus"},"https://graph-genai.facebook.com/v18.0":{strategy:T.FlamingoGraphStrategy,description:"",customer:"Lazarus"},"https://graph-genai.facebook.com/v19.0/retina_generations":{strategy:T.FlamingoMMStrategy,description:"",customer:"Lazarus"},"https://graph-genai.facebook.com/v18.0/llm_annotations_speech_to_speech":{strategy:T.FlamingoAudioStrategy,description:"",customer:"Lazarus"},"https://34.105.44.178/api_v2":{strategy:T.BulbaIceStrategy,description:"Bulba Ice",customer:"Gaius"},"https://vllm.allam.ai/v1/chat/completions":{strategy:T.SDAIAStrategy,description:"",customer:"Sandfish"},"https://api.fanar.qa/v1":{strategy:T.QCRIFanarStrategy,description:"",customer:"Qinwan"},"https://fanar-gemma.dev.fanar.qcri.org/fanar":{strategy:T.QCRIFanarGemmaStrategy,description:"",customer:"Qinwan"},"https://preprod-generativelanguage.googleapis.com/v1beta/models/chat-modelName:generateContent":{strategy:T.BulbaIceStrategyV2,description:"",customer:"Gaius"},"https://api.donovan.scale[gov].com/v1/chat":{strategy:T.DonovanStrategy,description:"",customer:"Scale"},"https://api.egp.scale.com/v4/chat-completions":{strategy:T.EGPV4CompletionsStrategy,description:"",customer:"Scale"},"https://sgp-api.scalegov.com/v4/chat-completions":{strategy:T.EGPV4CompletionsStrategy,description:"",customer:"Scale"},"https://api.egp.scale.com/v5/chat/completions":{strategy:T.EGPV5CompletionsStrategy,description:"",customer:"Scale"},"https://sgp-api.scalegov.com/v5/chat/completions":{strategy:T.EGPV5CompletionsStrategy,description:"",customer:"Scale"},"https://3e68c4a5-6f1e-4a5c-81de-02e60ff6bd28-8080.job.console.elementai.com/generate":{strategy:T.SealStrategy,description:"",customer:"Seal"},"https://api.ai21.com/studio/v1/j2-ultra/complete":{strategy:T.AirdaleStrategy,description:"",customer:"Airdale"},"https://api.ai21.com/studio/v1/j2-ultra/chat":{strategy:T.AiredaleChatStrategy,description:"",customer:"Airdale"},"https://1c9dbf63-7634-4d3b-ab34-dc9242dbc6d4-8080.job.console.elementai.com/generate":{strategy:T.SealStrategyV2,description:"",customer:"Seal"},"https://generativelanguage.googleapis.com/v1beta/models/gemini":{strategy:T.GeminiStrategy,description:"Gemini Public",customer:"Gaius"},"https://aiplatform.googleapis.com/$discovery/rest?version=v1beta1":{strategy:T.VertexGeminiStrategy,description:"",customer:"Vertigo"},"https://api.replicate.com/v1/predictions/yi":{strategy:T.YiStrategy,description:"",customer:"Yi"},"https://api.anthropic.com/v1/messages":{strategy:T.AnthropicStrategy,description:"",customer:"Abra"},"https://4f2e2788-d8b6-4a1e-b1c4-bb0a43bd55f6-8080.job.console.elementai.com/generate":{strategy:T.SealStrategyV3,description:"",customer:"Seal"},"https://api.openai.com/v1/assistants":{strategy:T.OpenAIAssistantsStrategy,description:"Assistants",customer:"Ostrich"},"https://snow-core_llm-inference_external-core_llm_hold_scale_router.job.console.elementai.com/generate":{strategy:T.SealStrategyV4,description:"",customer:"ServiceNow"},"https://psuedo-launch-url/tool-use-process-supervision":{strategy:T.ToolUseProcessSupervisionStrategy,description:"",customer:"Scale"},"https://q3pacei43h.execute-api.us-east-1.amazonaws.com":{strategy:T.AlpacaStrategy,description:"",customer:"Alpaca"},"wss://z5s66g8104.execute-api.us-east-1.amazonaws.com/prod/":{strategy:T.AlpacaStrategyV2,description:"Connect to models via websockets",customer:"Alpaca"},"https://integrate.api.nvidia.com/v1":{strategy:T.NemotronStrategy,description:"",customer:"Narwhal"},"https://flightacademy.inf5mi6t.com/api/external/chat/":{strategy:T.MeerkatSafetyStrategy,description:"",customer:"Meerkat"},"https://api.x.ai":{strategy:T.GoldfishStrategy,description:"Deprecated, use GoldfishStrategyV2 instead",customer:"Goldfish"},"https://research-models.api.x.ai/":{strategy:T.GoldfishStrategyV2,description:"For connecting to Goldfish research models",customer:"Goldfish"},"https://api.mistraldev.net/v1/chat/completions":{strategy:T.MonadMultimodalStrategy,description:"Monad Multimodal Pilot",customer:"Monad"},"https://preprod-generativelanguage.googleapis.com/v1beta/models":{strategy:T.GeminiToolUseTrajectoryStrategy,description:"Gemini Tool Use Trajectory",customer:"Gaius"}};t.masterEndpointMap=e3},173995:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disagreementFeedbackTemplate=t.OUTPUT_SYSTEM_INSTRUCTIONS=t.OUTPUT_FORMAT_BLOCK=t.validAutoFeedbackStepTypes=t.globalChatVariablesTooltipMap=t.globalAllowedChatVariablesByStep=t.RESPONSE_INDEX_REGEX=t.ML_FIELD_VARIABLES=t.DefaultGlobalVariable=t.InlinePositionType=t.AutoFeedbackExecutionType=t.AutoFeedbackItemStatus=t.AutoFeedbackCategory=void 0;var n,s,l,p,u,d,m,h,g,f=i(232095);t.AutoFeedbackCategory=u,(n=u||(t.AutoFeedbackCategory=u={})).GRAMMAR="Grammar",n.FACTUALITY="Factuality",n.QUALITY="Quality",n.INSTRUCTIONS="Instructions",n.CREATIVITY="Creativity",n.AP_STYLE="AP Style",n.FORMATTING="Formatting",t.AutoFeedbackItemStatus=d,(s=d||(t.AutoFeedbackItemStatus=d={})).FIXED="Fixed",s.IGNORED="Ignored",s.RESOLVED="Resolved",t.AutoFeedbackExecutionType=m,(l=m||(t.AutoFeedbackExecutionType=m={})).TASK="Task",l.POST_PROCESS="Post Process",l.CSV="CSV",t.InlinePositionType=h,(h||(t.InlinePositionType=h={})).TEXT="text",t.DefaultGlobalVariable=g,(p=g||(t.DefaultGlobalVariable=g={})).EDITED_RESPONSE_TEXT="__edited_response_text",p.PROMPT_TEXT="__prompt_text",p.CHAT_HISTORY="__chat_history",p.ORIGINAL_RESPONSE_TEXT="__original_response_text",p.CURR_RESPONSE_INDEX="__responses[currResponseIndex]",p.MULTICHAT_CONVERSATION_GOAL="__conversation_goal",p.MOST_RECENT_RESPONSE="__most_recent_response_[responseId]";let y=Object.freeze([{name:"Edited Response Text",id:g.EDITED_RESPONSE_TEXT},{name:"Prompt Text",id:g.PROMPT_TEXT},{name:"Chat History",id:g.CHAT_HISTORY},{name:"Original Response Text",id:g.ORIGINAL_RESPONSE_TEXT},{name:"Current Response Index",id:g.CURR_RESPONSE_INDEX}]);t.ML_FIELD_VARIABLES=y,t.RESPONSE_INDEX_REGEX=/__responses\[\s*currResponseIndex\s*(?:-\s*(\d+))?\s*\]/g;let b={[f.InteractionStepType.PromptInput]:[g.PROMPT_TEXT,g.CHAT_HISTORY],[f.InteractionStepType.ModelResponseEditor]:[g.EDITED_RESPONSE_TEXT,g.ORIGINAL_RESPONSE_TEXT,g.PROMPT_TEXT,g.CHAT_HISTORY],[f.InteractionStepType.ModelResponseSelector]:[g.PROMPT_TEXT,g.CHAT_HISTORY,g.MOST_RECENT_RESPONSE]};t.globalAllowedChatVariablesByStep=b;let T={[g.CURR_RESPONSE_INDEX]:`The response at the index where the evaluator runs.
  Modify to reference previous responses (e.g. __responses[currResponseIndex - 1])
  Reference paths within the response (e.g. __responses[currResponseIndex].context.response.annotations[0]).`};t.globalChatVariablesTooltipMap=T;let S=[f.InteractionStepType.ModelResponseEditor,f.InteractionStepType.PromptInput];t.validAutoFeedbackStepTypes=S;let _=`

-----------------------------
Then, in your response, add an array of strings using double quotations ("), where each string is a specific issue plus suggested fixes.
The array must be JSON parseable. When quoting a sentence or fragment from the provided User Written Response, use single quotes.
Do not use double quotes for quoting the User Written Response. And MOST IMPORTANTLY do NOT include any backslashes in your response.

Finally, wrap the array in a block surrounded by \`\`\`feedback\`\`\` markdown.

Example:
\`\`\`feedback
["The sentence 'abc' is incoherent.", "Change 'toda' to 'today'."]
\`\`\`
-----------------------------`;t.OUTPUT_FORMAT_BLOCK=_;let v=`-----------------------------
Follow these instructions exactly for formatting your response:

1. **Create an array of strings** using double quotations (").
2. **Each string must identify a specific issue and suggest a fix.**
3. **The array must be JSON parseable.**
4. When quoting a sentence or fragment from the User Written Response, **use single quotes ('), NOT double quotes (").**
5. **DO NOT include any backslashes () in your response.**

**Example:**
^*^*^["The sentence 'abc' is incoherent.", "Change 'toda' to 'today'."]^*^*^

**IMPORTANT: DO NOT DO THE FOLLOWING:**
- Do NOT wrap the array in any other manner.
- Do NOT include backslashes.
- Do NOT use double quotes for quoting the User Written Response.
- Do NOT format the array as a code block.

**BAD Example (DO NOT DO THIS):**
\`\`\`python
["The sentence 'abc' is incoherent.", "Change 'toda' to 'today'."]
\`\`\`
-----------------------------`;t.OUTPUT_SYSTEM_INSTRUCTIONS=v,t.disagreementFeedbackTemplate=(e,t)=>`-----------------------------
## Issues not to flag (even if you identify the following issues, do not include them in your response):
Any issues within the Chat History ${t===f.InteractionStepType.ModelResponseEditor?"or Prompt":""},
${e}`},612182:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},510478:function(e,t){"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.CorruptionEndpointId=void 0,t.CorruptionEndpointId=i,(n=i||(t.CorruptionEndpointId=i={})).Uncorrupted="uncorrupted",n.CorruptedAccuracy="corrupted-accuracy",n.CorruptedFluency="corrupted-fluency",n.CorruptedGibberish="corrupted-gibberish",n.CorruptedNoDeviation="corrupted-no-deviation",n.CorruptedAutoDimension="corrupted-auto-dimension"},799581:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LONG_TIMEOUT_LINTERS=t.EXTENDED_LINTER_TIMEOUT_MS=t.DEFAULT_LINTER_TIMEOUT_MS=t.constructStepChildId=t.HIDDEN_STEP_TYPES=t.sanitizeStepResponses=t.getCanViewEditFeedback=t.getCanAddFeedback=t.belongsToStep=t.truncateText=t.transformWorkerCommentsToUnifiedFeedback=t.ActionTakenEnum=t.FeedbackPriority=void 0;var n,s,l,p,u=i(674055),d=i(854358),m=_interopRequireDefault(i(711719)),h=i(599789),g=i(108896),f=i(101241),y=_interopRequireDefault(i(298784));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.FeedbackPriority=l,(n=l||(t.FeedbackPriority=l={})).HIGH="High risk issues",n.LOW="Other detected issues",t.ActionTakenEnum=p,(s=p||(t.ActionTakenEnum=p={})).Fixed="Fixed",s.Disagreed="Disagreed",s.Ignored="Ignored",s.Dismissed="Dismissed",t.transformWorkerCommentsToUnifiedFeedback=e=>e.map(e=>{let t=l.HIGH,i=e.title??truncateText(e.comment,35),n=e.comment,s=e.childId,h=e.turn;return{id:m.default.v4(),type:u.FeedbackType.HumanReviewerFeedback,title:i,content:n,priority:t,childId:s,turn:h,inlinePosition:e.locationStart||e.locationEnd?{type:"Text",start:e.locationStart,end:e.locationEnd,quotedText:e.quotedText}:void 0,sourceFeedbackId:e.workerCommentId,action:e.feedbackResponse?{actionTaken:e.feedbackResponse===d.FeedbackResponseType.Accept?p.Fixed:p.Disagreed}:void 0,author:e.author,isBlocking:!1}});let truncateText=(e,t)=>e.length>t?e.substring(0,t)+"...":e;t.truncateText=truncateText,t.belongsToStep=(e,t)=>e===t||!!e&&!!t&&e.startsWith(t),t.getCanAddFeedback=({reviewLevel:e,areCommentsReadOnly:t})=>!t&&e!==h.ReviewLevel.Attempt,t.getCanViewEditFeedback=({feedback:e})=>e.length>0,t.sanitizeStepResponses=({currStepResponse:e,allStepResponses:t,currStepParams:i,allStepParams:n})=>{t=t.map(t=>t.step_id===i.id?{...y.default.cloneDeep(t),...y.default.cloneDeep(e)}:t);let s=e;if(i.type===d.InteractionStepType.TextCollection)(s=y.default.cloneDeep(e)).context.response=g.removeHiddenFields(s.context.response,i.params.fields);else if(i.type===d.InteractionStepType.TextCollectionPerResponse){s=y.default.cloneDeep(e);let t=s.context.annotations;Object.keys(t).forEach(e=>{t[e]=g.removeHiddenFields(t[e],i.params.fields)})}let l=t.map((e,t)=>{let i=n[t];if(i&&i.type===d.InteractionStepType.TextCollection){let t=y.default.cloneDeep(e);return t.context.response=g.removeHiddenFields(t.context.response,i.params.fields),t}if(i&&i.type===d.InteractionStepType.TextCollectionPerResponse){let t=y.default.cloneDeep(e),n=t.context.annotations;return Object.keys(n).forEach(e=>{n[e]=g.removeHiddenFields(n[e],i.params.fields)}),t}return e});return{sanitizedStepResponse:s,sanitizedResponses:l}};let b=[d.InteractionStepType.Instruction,d.InteractionStepType.ContextDirections];t.HIDDEN_STEP_TYPES=b,t.constructStepChildId=(e,t,i)=>i?`${e}-${t}-${i}`:`${e}-${t}`,t.DEFAULT_LINTER_TIMEOUT_MS=6e4,t.EXTENDED_LINTER_TIMEOUT_MS=18e4;let T={[f.ScriptLinterName.AiderCompassWorkflowLinter]:6e5,[f.ScriptLinterName.ChatArchieGtfaCopilotLinter]:6e5,[f.ScriptLinterName.CopilotRubricsLinter]:6e5,[f.ScriptLinterName.CompassWorkflowLinter]:6e5};t.LONG_TIMEOUT_LINTERS=T},35557:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeliveryBuilderJobRequestSchema=t.DEFAULT_CHAT_DELIVERY_ATTEMPT_COUNT_LIMIT=t.PRIMITIVE_EXTERNAL_ATTEMPT_FIELDS=t.EXTERNAL_ATTEMPT_FIELDS=void 0;var n,s=i(689510),l=(n=i(298784))&&n.__esModule?n:{default:n};let p=["attemptedBy","attemptedAt","reviewLevel","response","id","metadata"];t.EXTERNAL_ATTEMPT_FIELDS=p;let u=l.default.without(p,"response");t.PRIMITIVE_EXTERNAL_ATTEMPT_FIELDS=u,t.DEFAULT_CHAT_DELIVERY_ATTEMPT_COUNT_LIMIT=1;let d=s.z.object({taskIds:s.z.array(s.z.string().length(24)),projectId:s.z.string().length(24),email:s.z.string().email(),requestUserId:s.z.string().length(24),isTest:s.z.boolean().optional()});t.DeliveryBuilderJobRequestSchema=d},674055:function(e,t){"use strict";var i,n,s,l,p;Object.defineProperty(t,"__esModule",{value:!0}),t.PayExceptionRequestField=t.FeedbackType=t.CopilotAPIRequestType=void 0,t.CopilotAPIRequestType=i,(i||(t.CopilotAPIRequestType=i={})).GTFA="gtfa",t.FeedbackType=n,(l=n||(t.FeedbackType=n={})).AutoFeedback="AutoFeedback",l.ReviewerCopilot="ReviewerCopilot",l.ProcessCritique="ProcessCritique",l.AutoCritique="AutoCritique",l.ModelCritique="ModelCritique",l.Linters="Linters",l.HumanReviewerFeedback="HumanReviewerFeedback",l.AutoQC="AutoQC",l.MarkdownValidation="MarkdownValidation",t.PayExceptionRequestField=s,(p=s||(t.PayExceptionRequestField=s={})).DolphinMirrorProject="dolphinMirrorProjectZeroPay",p.OtherMirrorProject="otherMirrorProjectZeroPay",p.LazarusMinimumRateException="lazarusMinimumRateException",p.QualityBasedPay="qualityBasedPayReviewerAccept",p.PayPerTask="payPerTask",p.PayHighestLanguageSkill="payHighestLanguageSkill",p.InternalProjectZeroPay="internalProjectZeroPay",p.Other="other"},572368:function(e,t){"use strict";var i,n,s,l,p,u,d,m;Object.defineProperty(t,"__esModule",{value:!0}),t.OVERALL_WORKER_COMMENT_SOURCE_TYPES=t.WorkerCommentType=t.WorkerCommentSourceType=t.WorkerCommentParentType=t.FeedbackResponseType=void 0,t.FeedbackResponseType=i,(p=i||(t.FeedbackResponseType=i={})).Accept="accept",p.Dismiss="dismiss",t.WorkerCommentParentType=n,(u=n||(t.WorkerCommentParentType=n={})).PipelineV3HumanNode="pipelineV3HumanNode",u.TaskAttempt="taskAttempt",u.Task="task",t.WorkerCommentSourceType=s,(d=s||(t.WorkerCommentSourceType=s={})).Inline="inline",d.Step="step",d.TextCollection="textCollection",d.QualityMeasurement="qualityMeasurement",d.RRS="rrs",d.RewardModel="rewardModel",d.AutoReviewer="autoReviewer",d.SpeedAudit="speedAudit",d.TextBasedSpeedAudit="textBasedSpeedAudit",d.ChatBulkAudit="chatBulkAudit",d.AutoQC="autoQC",t.WorkerCommentType=l,(m=l||(t.WorkerCommentType=l={})).Text="text",m.Rating="rating",m.Category="category",m.Boolean="boolean";let h=[s.TextCollection,s.QualityMeasurement,s.RRS];t.OVERALL_WORKER_COMMENT_SOURCE_TYPES=h},586871:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChatPromptResponsePairLinterSupportedStepTypes=t.getChatJsonataCustomLinterSupportedStepTypes=void 0;var n=i(854358),s=i(397846);t.getChatJsonataCustomLinterSupportedStepTypes=()=>{let e=[n.InteractionStepType.MultiTurnContinue,n.InteractionStepType.QualityMeasurement,n.InteractionStepType.ProcessSupervision,n.InteractionStepType.ToolUseProcessSupervision,n.InteractionStepType.NER];for(let[t,i]of Object.entries(s.v2StepResponseToV1StepResponseConverters))i&&e.push(t);return e},t.getChatPromptResponsePairLinterSupportedStepTypes=()=>{let e=[n.InteractionStepType.MultiTurnContinue,n.InteractionStepType.ProcessSupervision,n.InteractionStepType.ToolUseProcessSupervision,n.InteractionStepType.ExperimentalToolUse];for(let[t,i]of Object.entries(s.v2StepResponseToV1StepResponseConverters))i?.getVariablesForPrpLinter&&e.push(t);return e}},854358:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},s=_interopRequireWildcard(i(232095));Object.keys(s).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var l=_interopRequireWildcard(i(657183));Object.keys(l).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))});var p=_interopRequireWildcard(i(893383));Object.keys(p).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))});var u=_interopRequireWildcard(i(441936));Object.keys(u).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))});var d=_interopRequireWildcard(i(674055));Object.keys(d).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))});var m=_interopRequireWildcard(i(402168));Object.keys(m).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))});var h=_interopRequireWildcard(i(510478));Object.keys(h).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))});var g=_interopRequireWildcard(i(411802));Object.keys(g).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))});var f=_interopRequireWildcard(i(612182));Object.keys(f).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))});var y=_interopRequireWildcard(i(341226));Object.keys(y).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))});var b=_interopRequireWildcard(i(572368));Object.keys(b).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))});var T=_interopRequireWildcard(i(392228));Object.keys(T).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===T[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}}))});var S=_interopRequireWildcard(i(400022));Object.keys(S).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===S[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}}))});var _=_interopRequireWildcard(i(173995));Object.keys(_).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))});var v=_interopRequireWildcard(i(807834));Object.keys(v).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))});var L=_interopRequireWildcard(i(35557));Object.keys(L).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===L[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return L[e]}}))});var C=_interopRequireWildcard(i(445216));Object.keys(C).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===C[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}}))});var I=_interopRequireWildcard(i(66630));Object.keys(I).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===I[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}}))});var R=_interopRequireWildcard(i(799581));Object.keys(R).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===R[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return R[e]}}))});var P=_interopRequireWildcard(i(292188));Object.keys(P).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))});var E=_interopRequireWildcard(i(92596));Object.keys(E).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))});var O=_interopRequireWildcard(i(230811));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}Object.keys(O).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))})},66630:function(e,t){"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.SupportedLanguages=void 0,t.SupportedLanguages=i,(n=i||(t.SupportedLanguages=i={})).auto="auto",n.ar="ar",n.astES="ast-ES",n.beBY="be-BY",n.brFR="br-FR",n.caES="ca-ES",n.caESBalear="ca-ES-balear",n.caESValencia="ca-ES-valencia",n.crhUA="crh-UA",n.daDK="da-DK",n.de="de",n.deAT="de-AT",n.deCH="de-CH",n.deDE="de-DE",n.deDEXSimpleLanguage="de-DE-x-simple-language",n.deDEXSimpleLanguageDE="de-DE-x-simple-language-DE",n.deLU="de-LU",n.elGR="el-GR",n.en="en",n.enAU="en-AU",n.enCA="en-CA",n.enGB="en-GB",n.enNZ="en-NZ",n.enUS="en-US",n.enZA="en-ZA",n.eo="eo",n.es="es",n.esAR="es-AR",n.esES="es-ES",n.fa="fa",n.faIR="fa-IR",n.fr="fr",n.frBE="fr-BE",n.frCA="fr-CA",n.frCH="fr-CH",n.frFR="fr-FR",n.gaIE="ga-IE",n.glES="gl-ES",n.it="it",n.itIT="it-IT",n.jaJP="ja-JP",n.kmKH="km-KH",n.nl="nl",n.nlBE="nl-BE",n.nlNL="nl-NL",n.plPL="pl-PL",n.pt="pt",n.ptAO="pt-AO",n.ptBR="pt-BR",n.ptMZ="pt-MZ",n.ptPT="pt-PT",n.roRO="ro-RO",n.ruRU="ru-RU",n.skSK="sk-SK",n.slSI="sl-SI",n.sv="sv",n.svSE="sv-SE",n.taIN="ta-IN",n.tlPH="tl-PH",n.ukUA="uk-UA",n.zhCN="zh-CN"},341226:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isChatTaskLinterName=isChatTaskLinterName,t.isChatTaskLinter=function(e){if("object"!=typeof e||null===e||!("condition"in e))return!1;let t=e.condition;if("object"!=typeof t||null===t||!("scriptName"in t))return!1;let i=t.scriptName;return"string"==typeof i&&isChatTaskLinterName(i)},t.LinterPresets=t.LinterPreset=t.ChatTaskScriptLinterConfigSchemas=t.Comparator=t.ChatTaskLinterToSupportedStepTypes=t.ChatTaskLinters=t.isValidChatTaskLinter=void 0;var n,s,l,p,u,d=i(599789),m=i(971599),h=i(101241),g=i(388703),f=i(689510),y=i(232095),b=i(586871),T=i(399688);let S=new T.LLMProductAccessor(T.LLMPoweredProduct.Linters);function isChatTaskLinterName(e){return _.includes(e)}t.isValidChatTaskLinter=e=>{let t=e.condition.scriptName,i=e.condition.config?.runOnStepTypes??[],n=e.condition.config?.runOnStepIds??[];if(0===i.length&&0===n.length)return{valid:!1,reason:`Linter ${e.name} must be set to run on either a step type or a step id`};if(i.length>0){let n=I[t];if(i.some(e=>!n.includes(e)))return{valid:!1,reason:`Linter ${e.name} has invalid step types: ${i}`}}let s=E[t],l=e.condition.config,p=s.safeParse(l);return p.success?{valid:!0}:{valid:!1,reason:`Linter ${e.name} has invalid config: ${p.error}`}};let _=[h.ScriptLinterName.GrammarLinter,h.ScriptLinterName.ContradictionsLinter,h.ScriptLinterName.SpamLinter,h.ScriptLinterName.ToxicityLinter,h.ScriptLinterName.MultilingualToxicityLinter,h.ScriptLinterName.ChatJsonataCustomLinter,h.ScriptLinterName.ChatRobotsValidationCustomLinter,h.ScriptLinterName.ChatMultiReplicaJsonataCustomLinter,h.ScriptLinterName.ChatLazarusMathTopicsLinter,h.ScriptLinterName.ChatZipFileContentsLinter,h.ScriptLinterName.ChatCustomEndpointLinter,h.ScriptLinterName.ChatPreventAnswerBasedOnContributorWt,h.ScriptLinterName.ChatDolphinPromptImage,h.ScriptLinterName.NightingaleCheckCorrectnessClassification,h.ScriptLinterName.ChatJustificationMinWords,h.ScriptLinterName.NightingaleResponseCoherence,h.ScriptLinterName.ChatNightingaleRankingConsistencyLinter,h.ScriptLinterName.ChatNightingaleRatingConsistencyLinter,h.ScriptLinterName.ChatMissingResponseLinter,h.ScriptLinterName.ChatMLSingletonQualityMetricLinter,h.ScriptLinterName.ChatMLPromptResponsePairQualityMetricLinter,h.ScriptLinterName.ChatRegexLinter,h.ScriptLinterName.ChatGPTZeroLinter,h.ScriptLinterName.ChatMinEditDistanceLinter,h.ScriptLinterName.ChatUniqueResponseLinter,h.ScriptLinterName.LazarusMaxUsesOfReferenceURLLinter,h.ScriptLinterName.ChatUniqueNameURLLinter,h.ScriptLinterName.ChatCompletedTasksUniqueResponseLinter,h.ScriptLinterName.ChatPromptResponsePairLinter,h.ScriptLinterName.ChatCorrectLanguageLinter,h.ScriptLinterName.ChatTextLengthLinter,h.ScriptLinterName.ChatNGramDiversityLinter,h.ScriptLinterName.ChatBadWordsLinter,h.ScriptLinterName.ChatSemanticSimilarityLinter,h.ScriptLinterName.ChatMultiTurnResponseSimilarityLinter,h.ScriptLinterName.ChatGoogleTranslateDetectionLinter,h.ScriptLinterName.ChatURLExistsLinter,h.ScriptLinterName.ChatPromptResponseWordCountDiffLinter,h.ScriptLinterName.ChatSphereExecutionOutputLinter,h.ScriptLinterName.BeeCustomLinter,h.ScriptLinterName.ChatJustificationLikertMatchMLLinter,h.ScriptLinterName.ChatValidLikertScoreLinter,h.ScriptLinterName.ChatNightingaleCustomizedLinter,h.ScriptLinterName.ChatNightingaleArchetypeDiversityLinter,h.ScriptLinterName.ChatNightingaleGoalAlignmentLinter,h.ScriptLinterName.ChatNightingalePlagiarismLinter,h.ScriptLinterName.ChatNightingaleReferenceLinter,h.ScriptLinterName.ChatNightingaleValidateArchetypeLinter,h.ScriptLinterName.ChatNightingaleWordCountLinter,h.ScriptLinterName.ChatPromptComparisonToSearchResult,h.ScriptLinterName.ChatBulbaFactualityLinter,h.ScriptLinterName.ChatNERSentenceLinter,h.ScriptLinterName.ChatBulbaLikertResponseValidator,h.ScriptLinterName.ChatBulbaLockFieldLinter,h.ScriptLinterName.ChatPromptModelAgreementLinter,h.ScriptLinterName.ChatBulbaCodeEvalCodePresentLinter,h.ScriptLinterName.ChatImageNSFWLinter,h.ScriptLinterName.ChatMRSSphereExecutionRelevanceLinter,h.ScriptLinterName.ChatGoogleSearchPlagiarismLinter,h.ScriptLinterName.ChatMultiModalRelevanceLinter,h.ScriptLinterName.ChatLatexParsingLinter,h.ScriptLinterName.ChatBlockMMMULinter,h.ScriptLinterName.ChatAutoraterPlagiarismLinter,h.ScriptLinterName.ChatLambdaUnitTestExecutionLinter,h.ScriptLinterName.ChatMultiReplicaSimilarityLinter,h.ScriptLinterName.ChatOdinVideoIDLinter,h.ScriptLinterName.ChatOdinVideoGameValidateSubmission,h.ScriptLinterName.ChatAudioLengthLinter,h.ScriptLinterName.ChatBenchmarkUrlLinter,h.ScriptLinterName.ChatQuestionBenchmarkComparisonLinter,h.ScriptLinterName.RubricPerCriteriaPromptResponsePairLinter,h.ScriptLinterName.AiderCompassWorkflowLinter,h.ScriptLinterName.CompassWorkflowLinter,h.ScriptLinterName.ChatHLEPublicPromptsPlagiarismLinter,h.ScriptLinterName.ChatArchieGtfaCopilotLinter,h.ScriptLinterName.CopilotRubricsLinter];t.ChatTaskLinters=_;let v=b.getChatJsonataCustomLinterSupportedStepTypes(),L=b.getChatPromptResponsePairLinterSupportedStepTypes(),C=[y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.ModelResponseSelector,y.InteractionStepType.TextCollection,y.InteractionStepType.TextCollectionPerResponse,y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.QualityMeasurement,y.InteractionStepType.ProcessSupervision,y.InteractionStepType.QuantitativeModelResponseSelector,y.InteractionStepType.PromptTextCollection],I={[h.ScriptLinterName.ChatMissingResponseLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection,y.InteractionStepType.TextCollectionPerResponse,y.InteractionStepType.NER],[h.ScriptLinterName.ChatMLSingletonQualityMetricLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatMLPromptResponsePairQualityMetricLinter]:[y.InteractionStepType.ModelResponseEditor],[h.ScriptLinterName.ChatRegexLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.ModelResponseSelector,y.InteractionStepType.QuantitativeModelResponseSelector,y.InteractionStepType.TextCollection,y.InteractionStepType.TextCollectionPerResponse],[h.ScriptLinterName.ChatGPTZeroLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection,y.InteractionStepType.TextCollectionPerResponse],[h.ScriptLinterName.ChatMinEditDistanceLinter]:[y.InteractionStepType.ModelResponseEditor],[h.ScriptLinterName.ChatUniqueResponseLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.LazarusMaxUsesOfReferenceURLLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue],[h.ScriptLinterName.ChatUniqueNameURLLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatCompletedTasksUniqueResponseLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatPromptResponsePairLinter]:L,[h.ScriptLinterName.ChatCorrectLanguageLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatTextLengthLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.ModelResponseSelector,y.InteractionStepType.TextCollection,y.InteractionStepType.ProcessSupervision,y.InteractionStepType.TextCollectionPerResponse,y.InteractionStepType.QuantitativeModelResponseSelector,y.InteractionStepType.BasicInput],[h.ScriptLinterName.ChatNGramDiversityLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.ModelResponseSelector,y.InteractionStepType.QuantitativeModelResponseSelector,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatBadWordsLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.ModelResponseSelector,y.InteractionStepType.QuantitativeModelResponseSelector,y.InteractionStepType.TextCollection,y.InteractionStepType.TextCollectionPerResponse],[h.ScriptLinterName.ChatSemanticSimilarityLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatGoogleTranslateDetectionLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.ModelResponseEditor],[h.ScriptLinterName.ChatMultiTurnResponseSimilarityLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],[h.ScriptLinterName.ChatURLExistsLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.TextCollection,y.InteractionStepType.TextCollectionPerResponse],[h.ScriptLinterName.ChatPromptResponseWordCountDiffLinter]:[y.InteractionStepType.ModelResponseEditor],[h.ScriptLinterName.ChatSphereExecutionOutputLinter]:[y.InteractionStepType.TextCollection,y.InteractionStepType.ModelResponseEditor],[h.ScriptLinterName.BeeCustomLinter]:[y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatValidLikertScoreLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatJustificationLikertMatchMLLinter]:[y.InteractionStepType.ModelResponseSelector,y.InteractionStepType.ModelResponseRanking,y.InteractionStepType.TextCollection,y.InteractionStepType.QuantitativeModelResponseSelector],[h.ScriptLinterName.ChatNightingaleCustomizedLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatNightingaleArchetypeDiversityLinter]:[y.InteractionStepType.NER],[h.ScriptLinterName.ChatNightingaleGoalAlignmentLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.MultiTurnContinue],[h.ScriptLinterName.ChatNightingalePlagiarismLinter]:[y.InteractionStepType.ModelResponseEditor],[h.ScriptLinterName.ChatNightingaleReferenceLinter]:[y.InteractionStepType.ModelResponseEditor],[h.ScriptLinterName.ChatNightingaleValidateArchetypeLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatNightingaleWordCountLinter]:[y.InteractionStepType.NER],[h.ScriptLinterName.ChatPromptComparisonToSearchResult]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue],[h.ScriptLinterName.ChatBulbaFactualityLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatNERSentenceLinter]:[y.InteractionStepType.NER],[h.ScriptLinterName.ChatBulbaLikertResponseValidator]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.GrammarLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ContradictionsLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.SpamLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ToxicityLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.MultilingualToxicityLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatJsonataCustomLinter]:v,[h.ScriptLinterName.ChatRobotsValidationCustomLinter]:C,[h.ScriptLinterName.ChatMultiReplicaJsonataCustomLinter]:v,[h.ScriptLinterName.ChatLazarusMathTopicsLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatZipFileContentsLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatOdinVideoIDLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatOdinVideoGameValidateSubmission]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatCustomEndpointLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatPreventAnswerBasedOnContributorWt]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatDolphinPromptImage]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.NightingaleCheckCorrectnessClassification]:[y.InteractionStepType.TextCollectionPerResponse],[h.ScriptLinterName.ChatJustificationMinWords]:[y.InteractionStepType.ModelResponseSelector,y.InteractionStepType.QuantitativeModelResponseSelector],[h.ScriptLinterName.NightingaleResponseCoherence]:[y.InteractionStepType.TextCollectionPerResponse,y.InteractionStepType.ModelResponseSelector,y.InteractionStepType.QuantitativeModelResponseSelector],[h.ScriptLinterName.ChatNightingaleRatingConsistencyLinter]:[y.InteractionStepType.TextCollectionPerResponse],[h.ScriptLinterName.ChatNightingaleRankingConsistencyLinter]:[y.InteractionStepType.ModelResponseSelector,y.InteractionStepType.QuantitativeModelResponseSelector],[h.ScriptLinterName.ChatBulbaLockFieldLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatPromptModelAgreementLinter]:[y.InteractionStepType.PromptInput],[h.ScriptLinterName.ChatBulbaCodeEvalCodePresentLinter]:[y.InteractionStepType.TextCollectionPerResponse],[h.ScriptLinterName.ChatImageNSFWLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatMRSSphereExecutionRelevanceLinter]:[y.InteractionStepType.TextCollectionPerResponse,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatGoogleSearchPlagiarismLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatMultiModalRelevanceLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],[h.ScriptLinterName.ChatLatexParsingLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],[h.ScriptLinterName.ChatBlockMMMULinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue],[h.ScriptLinterName.ChatAutoraterPlagiarismLinter]:[y.InteractionStepType.PromptTextCollection,y.InteractionStepType.TextCollectionPerResponse,y.InteractionStepType.QuantitativeModelResponseSelector],[h.ScriptLinterName.ChatLambdaUnitTestExecutionLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatMultiReplicaSimilarityLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.ChatAudioLengthLinter]:[y.InteractionStepType.TextCollectionPerResponse],[h.ScriptLinterName.ChatBenchmarkUrlLinter]:[y.InteractionStepType.PromptInput],[h.ScriptLinterName.ChatQuestionBenchmarkComparisonLinter]:[y.InteractionStepType.PromptInput],[h.ScriptLinterName.RubricPerCriteriaPromptResponsePairLinter]:[y.InteractionStepType.TextCollectionPerResponse],[h.ScriptLinterName.AiderCompassWorkflowLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.CompassWorkflowLinter]:[y.InteractionStepType.TextCollection,y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.ModelResponseSelector,y.InteractionStepType.ModelResponseInput],[h.ScriptLinterName.ChatHLEPublicPromptsPlagiarismLinter]:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],[h.ScriptLinterName.ChatArchieGtfaCopilotLinter]:[y.InteractionStepType.TextCollection],[h.ScriptLinterName.CopilotRubricsLinter]:[y.InteractionStepType.RubricCriteriaBuilder]};t.ChatTaskLinterToSupportedStepTypes=I,t.Comparator=p,(n=p||(t.Comparator=p={})).LessThan="lt",n.GreaterThanOrEqualTo="gte";let R=f.z.object({userAgents:f.z.array(f.z.string()).describe("User agents to validate against robots.txt. You can add them one by one or comma separated."),userAgentStrategy:f.z.nativeEnum(h.UserAgentsStrategy).describe("Specify 'every' if all user agents must be able to crawl and some if it's ok a subset of these."),urlJSONataExpression:f.z.string().describe("JSONata expression to be get the url to check against robots.txt with the user agents."),debugMode:f.z.boolean().describe("ENG Only - Enable when you need to debug the linter via datadog logs").optional()}),P=f.z.object({expressions:f.z.array(f.z.string()).describe("JSONata expressions to be evaluated against full linter context object. Please remember each expression should return an explicit true or false, value otherwise this linter will not work as intended. Linter will fire if the end result is true."),operator:f.z.nativeEnum(h.RegexMatches).describe("Specify 'every' if all expressions must match; Specify 'some' if any expression must match; Specify 'none' if no expressions must match."),messageExpression:f.z.string().describe("JSONata expression to be evaluated to create a personal linter message").optional(),debugMode:f.z.boolean().describe("ENG Only - Enable when you need to debug the linter via datadog logs").optional()}),E={[h.ScriptLinterName.GrammarLinter]:f.z.object({thresholdScore:f.z.number().gte(0).lte(1).describe("The threshold score for the linter to flag an error."),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.ContradictionsLinter]:f.z.object({thresholdScore:f.z.number().gte(0).lte(1).describe("The threshold score for the linter to flag an error."),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.SpamLinter]:f.z.object({thresholdScore:f.z.number().gte(0).lte(1).describe("The threshold score for the linter to flag an error."),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.ToxicityLinter]:f.z.object({thresholdScore:f.z.number().gte(0).lte(1).describe("The threshold score for the linter to flag an error."),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.MultilingualToxicityLinter]:f.z.object({thresholdScore:f.z.number().gte(0).lte(1).describe("The threshold score for the linter to flag an error."),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.ChatJsonataCustomLinter]:P,[h.ScriptLinterName.ChatRobotsValidationCustomLinter]:R,[h.ScriptLinterName.ChatMultiReplicaJsonataCustomLinter]:P,[h.ScriptLinterName.ChatMultiReplicaSimilarityLinter]:f.z.object({fieldId:f.z.string().describe("Specify the fieldId to check"),similarityMetric:f.z.nativeEnum(h.SimilarityMetrics).describe("The type of similarity metric to use for the linter."),comparator:f.z.nativeEnum(p).describe("The comparator to use for the threshold."),threshold:f.z.number().describe("The threshold score for the linter to flag an error.")}),[h.ScriptLinterName.ChatLazarusMathTopicsLinter]:f.z.object({limit:f.z.number().describe("Limits the number of topic combinations. Default is 5.").optional()}),[h.ScriptLinterName.ChatZipFileContentsLinter]:f.z.object({fieldId:f.z.string().describe("Specify the fieldId of the desired file upload step."),minNumOfFiles:f.z.number().describe("Minimum number of files in the zip file.").optional(),requiredFileTypes:f.z.array(f.z.string()).describe('List of required file types. This checks that there is at least one occurrence of the file type. Please input each type as a file extension (e.g. ".mp4", ".tar", etc)').optional()}),[h.ScriptLinterName.ChatOdinVideoIDLinter]:f.z.object({fieldId:f.z.string().describe("Specify the fieldId where the video ID is stored.")}),[h.ScriptLinterName.ChatOdinVideoGameValidateSubmission]:f.z.object({uploadKeyFieldId:f.z.string().describe("Specify the fieldId where the video ID is stored."),gameNameFieldId:f.z.string().describe("Specify the fieldId where the game name is stored."),skipFFMPEGCheck:f.z.boolean().describe("Skip the FFMPEG check.").optional(),minMeanAudioVolumeDB:f.z.number().describe("FFMPEG check: The minimum mean audio volume in decibels (dB) for the linter to flag an error. If unspecified, the linter will not check the mean audio volume.").optional()}),[h.ScriptLinterName.ChatCustomEndpointLinter]:f.z.object({endpointType:f.z.nativeEnum(g.CustomEndpointType),modelInputJsonata:f.z.string().describe("JSONata expression for the value that will be passed into the model."),userOutputJsonata:f.z.string().describe("JSONata expression for the user provided value. This will be compared against the model output.")}),[h.ScriptLinterName.ChatPreventAnswerBasedOnContributorWt]:f.z.object({workerTeamsToInclude:f.z.array(f.z.string()).describe("List of worker teams whose contributors should be answering a specific field"),workerTeamsToExclude:f.z.array(f.z.string()).describe("List of worker teams whose contributors should not be answering a specific field"),fieldId:f.z.string().describe("Specify the fieldId to check")}),[h.ScriptLinterName.ChatDolphinPromptImage]:f.z.object({}),[h.ScriptLinterName.NightingaleCheckCorrectnessClassification]:f.z.object({}),[h.ScriptLinterName.ChatJustificationMinWords]:f.z.object({minCharacterLength:f.z.number().describe("The minimum number of characters required in the response justification.").optional(),maxCharacterLength:f.z.number().describe("The maximum number of characters required in the response justification.").optional(),minWordCount:f.z.number().describe("The minimum number of words required in the response justification").optional(),maxWordCount:f.z.number().describe("The maximum number of words required in the response justification.").optional()}),[h.ScriptLinterName.NightingaleResponseCoherence]:f.z.object({checkCompleteRange:f.z.boolean()}),[h.ScriptLinterName.ChatNightingaleRankingConsistencyLinter]:f.z.object({}),[h.ScriptLinterName.ChatNightingaleRatingConsistencyLinter]:f.z.object({}),[h.ScriptLinterName.ChatMissingResponseLinter]:f.z.object({}),[h.ScriptLinterName.ChatMLSingletonQualityMetricLinter]:f.z.object({qualityMetricType:f.z.nativeEnum(g.SingletonQualityMetricType),lowerBoundScore:f.z.number().gte(0).lte(1),thresholdScore:f.z.number().gte(0).lte(1).describe("The threshold score for the linter to flag an error."),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.ChatMLPromptResponsePairQualityMetricLinter]:f.z.object({qualityMetricType:f.z.nativeEnum(g.PromptResponsePairQualityMetricType),lowerBoundScore:f.z.number().gte(0).lte(1),thresholdScore:f.z.number().gte(0).lte(1).describe("The threshold score for the linter to flag an error."),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.ChatRegexLinter]:f.z.object({rules:f.z.array(f.z.string()).describe("Regex expressions to match. You can use this [tool](https://regex101.com/) to test (using ECMAScript flavor)."),matches:f.z.nativeEnum(h.RegexMatches).describe("Specify 'every' if all rules must match; Specify 'any' if any rule must match; Specify 'none' if no rules must match."),regexFlags:f.z.string().describe("Learn more about flags [here](https://javascript.info/regexp-introduction#flags)").optional(),exceptions:f.z.array(f.z.string()).describe("Regex expressions to exclude from the match of rules.").optional(),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.ChatGPTZeroLinter]:f.z.object({average_generated_prob:f.z.number().min(0).max(1).optional(),completely_generated_prob:f.z.number().min(0).max(1).optional(),overall_burstiness:f.z.number().optional(),minTokensToApply:f.z.number().optional(),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.ChatMinEditDistanceLinter]:f.z.object({minRelativeLevenshteinDistance:f.z.number().gte(0).lte(1).describe('Flags if the distance of the current text v.s. the initial text is less than "minRelativeLevenshteinDistance".'),maxRelativeLevenshteinDistance:f.z.number().gte(0).lte(1).describe('Flags if the distance of the current text v.s. the initial text is more than "maxRelativeLevenshteinDistance".').optional(),minLengthToApply:f.z.number().describe("If the response length is less than this value, the lint rule will not apply.").optional(),minWordsToApply:f.z.number().describe("If the text has less words than the threshold the linter won't flag anything.").optional(),ignoreMarkdownForDistanceCalculation:f.z.boolean().describe("If true, strip markdown formatting before checking distance").optional(),numChunks:f.z.number().gte(1).describe("The number of chunks the text is split up into when computing the distance. If any of the chunks are too similar, we will flag. Default value: 1").default(1)}),[h.ScriptLinterName.ChatUniqueResponseLinter]:f.z.object({minLengthToApply:f.z.number().describe("If the response length is less than this value, the lint rule will not apply.").optional(),minRelativeLevenshteinDistance:f.z.number().describe("The lint rule will be triggered if the Levenshtein distance between any of the previous response texts and the current response is less than the specified value.").optional(),compareDifferentAttempters:f.z.boolean().describe("Whether or not to consider responses from other taskers").optional(),attemptsLimit:f.z.number().lte(5e3).describe("Number of attempts to look back. Default: 500.").optional(),addPrevAttemptsToMessage:f.z.boolean().describe("Whether to show the previously submitted text in the linter message.").optional(),fieldId:f.z.string().describe("TextCollection field Id.").optional(),reviewLevels:f.z.array(f.z.nativeEnum(d.ReviewLevel)).describe("The review levels to filter the historically submitted attempts by.").optional(),windowDays:f.z.number().describe("# days to look back. Default: 21").optional(),useLevenshtein:f.z.boolean().describe("Default: false. If set to true, the texts are compared by relative levenshtein distance. (When using this config, try to minimize the number of attempts, as LD takes longer to compare, which can impact the quickness of the linter)").optional(),checkImageDB:f.z.boolean().describe("Default: true. If set to false, the url is not checked against the image database for being a duplicate.").optional(),occurrencesAllowed:f.z.number().default(0).describe("Default: 0. The number of occurrences allowed for the flagged duplicated previous responses."),additionalProjectIds:f.z.string().describe("Project IDs other than the current project to also dedupe against").optional(),csvPathForResponses:f.z.string().describe("Uses CSV file (headerless, single-column) as the source of responses to compare against, instead of attempts. File link should be public.").optional(),reviewStatusToIgnore:f.z.array(f.z.nativeEnum(d.TaskAttemptReviewStatus)).describe("Review statuses to filter out when fetching historically submitted Task Attempts. Default: None").optional(),extraQueryConfigPath:f.z.string().describe("Path that will be passed as a key to the task attempt query (only works for string match)").optional()}),[h.ScriptLinterName.LazarusMaxUsesOfReferenceURLLinter]:f.z.object({maxUsesOfReferenceURL:f.z.number().gte(0).describe("The maximum number of times the reference URL can be used.").optional(),useLevenshteinDistance:f.z.boolean().describe("Whether to use Levenshtein distance for comparison."),maxRelativeLevenshteinDistance:f.z.number().gte(0).lte(1).describe("The lint rule will be triggered if the Levenshtein distance between any of the current reference URLs and the previous reference URLs is less than the percentage. Default: 10%").optional(),taskLookupLimit:f.z.number().lte(5e3).describe("Number of tasks to look back. If blank, then all tasks on the project will be used as reference. Default 500. Max 5000").optional(),lookupWindowDays:f.z.number().lte(180).describe("The number of days to back. Default: 30. Max 180").optional(),additionalProjectIds:f.z.string().describe("Project IDs other than the current project to also dedupe against. Whitespace separated").optional(),reviewStatuses:f.z.nativeEnum(d.TaskAttemptReviewStatus).array().describe("Task Attempt review statuses to include in the comparison").optional(),reviewLevels:f.z.nativeEnum(d.ReviewLevel).array().describe("The review levels to filter the historically submitted attempts by.").optional()}),[h.ScriptLinterName.ChatUniqueNameURLLinter]:f.z.object({fieldId:f.z.string().describe("The fieldId where the URL or name is stored"),taskLookupLimit:f.z.number().lte(5e3).describe("Number of tasks to look back. Default: 500.").optional(),lookupWindowDays:f.z.number().lte(180).describe("The number of days to back").optional(),additionalProjectIds:f.z.string().describe("Project IDs other than the current project to also dedupe against").optional(),reviewStatuses:f.z.nativeEnum(d.TaskAttemptReviewStatus).array().describe("Task Attempt review statuses to include in the comparison").optional(),reviewLevels:f.z.nativeEnum(d.ReviewLevel).array().describe("The review levels to filter the historically submitted attempts by.").optional()}),[h.ScriptLinterName.ChatCompletedTasksUniqueResponseLinter]:f.z.object({minLengthToApply:f.z.number().describe("If the response length is less than this value, the lint rule will not apply.").optional(),minRelativeLevenshteinDistance:f.z.number().describe("The lint rule will be triggered if the Levenshtein distance between any of the previous response texts and the current response is less than the specified value.").optional(),tasksLimit:f.z.number().lte(5e3).describe("Number of tasks to look back. Default: 500.").optional(),addPrevTextToMessage:f.z.boolean().describe("Whether to show the previously submitted text in the linter message.").optional(),fieldId:f.z.string().describe("TextCollection field Id.").optional(),windowDays:f.z.number().describe("# days to look back. Default: 21").optional(),useLevenshtein:f.z.boolean().describe("Default: false. If set to true, the texts are compared by relative levenshtein distance. (When using this config, try to minimize the number of attempts, as LD takes longer to compare, which can impact the quickness of the linter)").optional(),checkImageDB:f.z.boolean().describe("Default: true. If set to false, the url is not checked against the image database for being a duplicate.").optional(),additionalProjectIds:f.z.string().describe("Project IDs other than the current project to also dedupe against").optional()}),[h.ScriptLinterName.ChatPromptResponsePairLinter]:f.z.object({promptTemplate:f.z.string().describe("Reference the response as {{responseText}} and prompt as {{promptText}}. For TextCollection steps, reference the field_id in double brackets {{}}, such as {{ranking_reasoning}}."),systemPrompt:f.z.string().describe('System prompt helps set the behavior of GPT (e.g., "You are a helpful assistant.") and can typically be left blank. See the [OpenAI docs](https://platform.openai.com/docs/guides/gpt/chat-completions-api)').optional(),overriddenModelParams:f.z.object({model:f.z.string(),max_tokens:f.z.number(),temperature:f.z.number(),tools:f.z.array(f.z.string()).optional()}).describe("If the prompt works on gpt-4o-mini, we'd suggest using gpt-4o-mini. If it does not work, use gpt-4.").optional(),passIfNumericOutputMatches:f.z.object({comparator:f.z.nativeEnum(p),threshold:f.z.number()}).describe("Used in combination with the threshold to determine whether the response passes or fails").optional(),passIfStringOutputMatches:f.z.object({regexMatch:f.z.string(),flags:f.z.string().optional()}).describe("If the GPT output matches this regular expression, the response will pass. Use a [regex tester](https://regex101.com/) to test your regex.").optional(),showModelOutput:f.z.boolean().describe("Toggle on if you want to show the GPT model output to taskers. Please first test the linter to validate if the GPT output will be helpful to taskers.").optional(),modelOutputRegexMatch:f.z.string().describe("If you only want to output part of the GPT output, input the regex to use for extracting the output. Use a [regex tester](https://regex101.com/) to test your regex.").optional(),fieldId:f.z.string().describe("If running over any TextCollection steps, specify the fieldId in the TextCollection step to apply to.").optional(),minTurnNumber:f.z.number().describe("The minimum number of turns this linter should apply to.").optional(),maxTurnNumber:f.z.number().describe("The maximum number of turns this linter should apply to.").optional(),debugMode:f.z.boolean().describe("ENG Only - Enable when you need to debug the linter via datadog logs").optional(),sendImageAttachments:f.z.boolean().describe("Sends image attachments in content to model endpoint for evaluation, default off.").optional()}),[h.ScriptLinterName.ChatTextLengthLinter]:f.z.object({runOnReferenceTextContent:f.z.boolean().describe("If selected, the linter will run on the reference text content and NOT on associated step. (Applies only for Prompt Input & Multi turn continue steps)").optional(),runOnJustification:f.z.boolean().describe("If selected, the linter will run on the justification (Applies only for Model Response Selector)").optional(),minCharacterLength:f.z.number().describe("The minimum number of characters required in the prompt/response.").optional(),maxCharacterLength:f.z.number().describe("The maximum number of characters required in the prompt/response.").optional(),minWordCount:f.z.number().describe("The minimum number of words required in the prompt/response.").optional(),maxWordCount:f.z.number().describe("The maximum number of words required in the prompt/response.").optional(),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional(),variableRules:f.z.array(f.z.object({variableName:f.z.string(),variableValue:f.z.string().describe("Supports Regex statements"),caseSensitive:f.z.boolean().optional()}).describe('When defined, linter will only be applied for the tasks with the entered variable name and value pairs. i.e. variableName: "category", variableValue: "complex" will only apply the linter to the tasks with task.params.templateVariables.category = "complex"')).optional()}),[h.ScriptLinterName.ChatCorrectLanguageLinter]:f.z.object({language:f.z.string(),minCharsToApply:f.z.number().optional(),minTokensToApply:f.z.number().optional(),confidence:f.z.number().optional(),fieldId:f.z.string().optional()}),[h.ScriptLinterName.ChatNGramDiversityLinter]:f.z.object({maxMatches:f.z.number().describe('If there are more than "maxMatches" ngram tokens from the previous submitted text, the linter would flag an error.'),numAttempts:f.z.number().describe("Number of previous submitted task attempts to look back."),n:f.z.number().describe('The "n" of n-gram. Learn more about how it works here (https://en.wikipedia.org/wiki/N-gram)'),ignoreStopWords:f.z.boolean().describe("If this is enabled, stop words will not be considered for n-gram blocking. For example, if you have Ignore Stop Words enabled, for a sentence like 'the dog jumped over the cat', the 2-grams returned would be [ 'dog jumped', 'jumped over', 'over cat' ]. If Ignore Stop Words was disabled, the 2-grams would be [ 'dog jumped', 'jumped over', 'over the', 'the cat' ].").optional(),additionalStopWords:f.z.array(f.z.string()).describe("Additional stop words to be added in addition to the default list here (https://dashboard.scale.com/corp/rapid/stop-words).").optional(),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional(),wordList:f.z.array(f.z.string()).describe('If this is populated, the n-gram linter will only consider words in this list, instead of all n-grams. The words in this list must match the N of the n-gram to be considered (e.g., if you have a 2-gram, and put down "dog", "fluffy dog" would not be counted, and taskers could use the word "fluffy dog" as much as they wanted). Typically this is used to block a targeted list of phrases from showing up too frequently. For example, by setting n = 2, and putting down "write a", you can block taskers from writing "write a" too frequently.').optional(),ignoreCodeBlocks:f.z.boolean().describe("If checked, the linter will ignore the code block present in the field id provided").optional()}),[h.ScriptLinterName.ChatBadWordsLinter]:f.z.object({flagProfanity:f.z.boolean().describe("Default true. If false (unchecked), ignores the default list and only the flaggedWords list will be considered profanity to be linted against.").optional(),flaggedWords:f.z.array(f.z.string()).describe('The linter contains a default list of banned words hardcoded in the codebase. Use ""flaggedWords"" to include more words to be banned.').optional(),wordBreak:f.z.boolean().describe("Set to true by default, and what it means is that only the exact words matched in the bad word list will be flagged. A random word including consecutive characters that form a bad word won't be flagged.").optional(),exceptions:f.z.array(f.z.string()).describe("Whitelist words").optional(),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.ChatSemanticSimilarityLinter]:f.z.object({thresholds:f.z.array(f.z.object({threshold:f.z.number().describe("The minimum threshold for the linter to flag a prompt towards the similarity count."),maxPromptsAboveThreshold:f.z.number().describe("The maximum number of prompts that can be above the threshold. If the number of prompts above the threshold exceeds this value, the linter will flag an error.")}).describe("The maximum number of prompts that can be above the given threshold. If the number of prompts above the threshold exceeds this value, the linter will flag an error.")),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.ChatGoogleTranslateDetectionLinter]:f.z.object({minWordsToApply:f.z.number().describe("If the text has less words than the threshold the linter won't flag anything.").optional(),minRelativeLevenshteinDistance:f.z.number(),fromLanguage:f.z.nativeEnum(h.GoogleTranslationLanguages).describe("Original language of base text"),toLanguage:f.z.nativeEnum(h.GoogleTranslationLanguages).describe("Language original text will be translated"),promptVariable:f.z.string().describe("Variable where initial prompt is stored (needed when running this linter on prompt input step).").optional()}),[h.ScriptLinterName.ChatMultiTurnResponseSimilarityLinter]:f.z.object({minWordsToApply:f.z.number().describe("If the text has less words than the threshold the linter won't flag anything.").optional(),minRelativeLevenshteinDistance:f.z.number().describe('Flags if the distance of the current text v.s. the previously submitted text is less than "minRelativeLevenshteinDistance".')}),[h.ScriptLinterName.ChatURLExistsLinter]:f.z.object({liveCheck:f.z.boolean().describe("Whether to ping the URL and verify the URL is healthy.").optional(),fieldId:f.z.string().describe("The text collection field id.").optional(),checkFirstTurn:f.z.boolean().describe("Whether to only check the first prompt and not subsequent turns").optional(),blackListDomainsFileUrl:f.z.string().describe("A public file URL where file contains a list of domains in each line").optional()}),[h.ScriptLinterName.ChatPromptResponseWordCountDiffLinter]:f.z.object({minWordsToApply:f.z.number().describe("If the text has less words than the threshold the linter won't flag anything.").optional(),maxWordsCountMultiplier:f.z.number().min(1),minWordsCountMultiplier:f.z.number().min(0).max(1)}),[h.ScriptLinterName.ChatValidLikertScoreLinter]:f.z.object({fieldId:f.z.string().describe('The field id for field containing the Likert score (e.g. "response_ranking").')}).optional(),[h.ScriptLinterName.ChatJustificationLikertMatchMLLinter]:f.z.object({useMagnitude:f.z.boolean().describe("If checked, the linter will check if the magnitude of the Likert scores matches the ML model output. If not, it will just use the direction.").optional(),likertScaleSet:f.z.array(f.z.string()).describe("Add a personalized mapping of you likert scale").optional(),useFlamingoPreference:f.z.boolean().describe("If checked this linter will run based on Flamingo Preference logic").optional()}),[h.ScriptLinterName.ChatSphereExecutionOutputLinter]:f.z.object({codeFieldId:f.z.string().describe("The field id for field containing the code to run. This is REQUIRED."),concatCodeFieldIds:f.z.array(f.z.string()).describe("The field ids for other fields containing code to run. This is useful if you want to run multiple code snippets together that will be concatenated together. This is OPTIONAL.").optional(),testCodeFieldId:f.z.string().describe("The field id for field containing test cases that run in a separate file. This is OPTIONAL.").optional(),outputFieldId:f.z.string().describe("The field id for field containing the code output. If this isn't provided, the linter just checks if the code runs.").optional(),sphereProjectId:f.z.string().describe("The sphere project to run the code in (this is mutually exclusive with languageToSphereProjectIdMap and taskLanguageMetadataVariable). If this and the language are not specified, the sphere project id is pulled dynamically from the sphere engine workspace field.").optional(),language:f.z.nativeEnum(h.AcceptedSphereLanguage).describe(`(this is mutually exclusive with languageToSphereProjectIdMap and taskLanguageMetadataVariable) If no sphere project id is specified, then a sphere project of the given language is
        used. Likewise, if no sphereProjectCodeFilePath is provided, then the default file for
        the given language is used. It is recommended to specify the sphere project instead of
        going down this route to ensure the needed imports are present and the environment set
        up is correct. This all implies that if you want to use a custom sphere project, you must
        clear the language field.`).optional(),languageToSphereProjectIdMap:f.z.any().describe('(this is mutually exclusive with sphereProjectId and language) This is a map of language to sphere project id. E.g. {"python": "<python_workspace>", "java": "<java_workspace>"}').optional(),taskLanguageMetadataVariable:f.z.string().describe("(this is mutually exclusive with sphereProjectId and language) This is dynamically used to determine the coding language for languageToSphereProjectIdMap. E.g. this should be python, java, etc. and should be in that languageToSphereProjectIdMap").optional(),scenarioName:f.z.string().describe("Defaults to 'run'. Only add a value to this field if you understand scenarios in sphere engine.").optional(),sphereProjectCodeFilePath:f.z.string().describe("The file path to the code file to run. If not provided, the default file for the given language is used.").optional(),sphereProjectTestFilePath:f.z.string().describe(`The file path to the test file to run. If not provided, the default test file for the given language is used.
          This file is only relevant if you provide a testCodeFieldId.`).optional(),useMetadataOutput:f.z.boolean().describe("If checked, the linter will use the metadata variable (in conjunction with metadataVariable) to determine the test code").optional(),metadataVariable:f.z.string().describe("The metadata variable to use to determine the test code").optional(),postprocessMarkdown:f.z.boolean().describe(`If checked, this will remove triple backticks and the language from the code and test text fields before
        running the linter.`).optional()}),[h.ScriptLinterName.BeeCustomLinter]:f.z.object({lintForPromptCategorization:f.z.boolean().describe("lintForPromptCategorization is true, linter will execute lint on Prompt Categorization field").optional()}),[h.ScriptLinterName.ChatNightingaleCustomizedLinter]:f.z.object({userStepTemplate:f.z.string().optional(),agentStepTemplate:f.z.string().optional()}),[h.ScriptLinterName.ChatNightingaleArchetypeDiversityLinter]:f.z.object({labels:f.z.array(f.z.string()).describe("Labels in NER step"),minLabelPerTurn:f.z.array(f.z.number()).describe("Minimun count per label (Counts will be mapped in accordance to category position)"),maxLabelPerTurn:f.z.array(f.z.number()).describe("Max count per label (Counts will be mapped in accordance to category position)").optional(),applyToAllLabels:f.z.boolean().optional()}),[h.ScriptLinterName.ChatNightingaleGoalAlignmentLinter]:f.z.object({promptAlignmentTemplate:f.z.string(),dialogueAlignmentTemplate:f.z.string()}),[h.ScriptLinterName.ChatNightingalePlagiarismLinter]:f.z.object({nGram:f.z.number(),maxAllowedRepetition:f.z.number(),minWordsToApply:f.z.number().describe("Minimum plagiarized words needed to flag")}),[h.ScriptLinterName.ChatNightingaleReferenceLinter]:f.z.object({referenceTemplate:f.z.string()}),[h.ScriptLinterName.ChatNightingaleValidateArchetypeLinter]:f.z.object({}),[h.ScriptLinterName.ChatNightingaleWordCountLinter]:f.z.object({categories:f.z.array(f.z.string()).describe("Labels in NER step"),minCategoryPerTurn:f.z.array(f.z.number()).describe("Minimun count per category (Counts will be mapped in accordance to category position)"),maxCategoryPerTurn:f.z.array(f.z.number()).describe("Max count per category (Counts will be mapped in accordance to category position)").optional(),applyToAllCategories:f.z.boolean().describe("Apply min/max word counter to all NER annotations regardless of category").optional()}),[h.ScriptLinterName.ChatPromptComparisonToSearchResult]:f.z.object({useGPT:f.z.boolean().describe("Uses GPT to compare the text against the first search result, and let GPT calculate a similarity between 0.0 and 1.0"),useLevenshtein:f.z.boolean(),threshold:f.z.number().describe("The similarity threshold is between 0.0 and 1.0 - Higher score means more similarity. If similarity is higher than the threshold then the linter will flag"),searchPrefix:f.z.string().describe("The prefix to add to Google search query. i.e. if you want to filter results by a website, you can use site:scale.com").optional(),trimTextForSearch:f.z.number().describe("The number of characters to trim the text before sending to search. i.e. First 150 chars of the text may return better search results than the entire prompt").optional(),trimTextBeforeLevenshtein:f.z.boolean().describe("Search result snippets are between 150-250 chars. But your text/prompt can be longer than that. For LD-based calculation, this option trims the original text, with the same length as the search result, then compares the LD after that. If your prompts are short, this option is not recommended.").optional()}),[h.ScriptLinterName.ChatBulbaFactualityLinter]:f.z.object({}),[h.ScriptLinterName.ChatNERSentenceLinter]:f.z.object({sentenceDelimiters:f.z.array(f.z.string()).describe('Please enter any characters that you would like to treat as delimiters of a sentence. Use "\n" for new line.'),stopLintingAfterLabel:f.z.string().describe('Use if the linter should only fire on the content leading up to and including a specific label (e.g. stop linting after an "inaccurate" label is used). Enter the label name here if applicable.').optional()}),[h.ScriptLinterName.ChatBulbaLikertResponseValidator]:f.z.object({}),[h.ScriptLinterName.ChatBulbaLockFieldLinter]:f.z.object({stepId:f.z.string().describe("If this step ID is visible, the given field will be locked"),fieldId:f.z.string().describe("The field ID to lock")}),[h.ScriptLinterName.ChatPromptModelAgreementLinter]:f.z.object({strategyName:f.z.string().optional(),modelParams:f.z.object({model:f.z.string().optional()}).optional(),passIfAgree:f.z.boolean().optional()}),[h.ScriptLinterName.ChatBulbaCodeEvalCodePresentLinter]:f.z.object({}),[h.ScriptLinterName.ChatImageNSFWLinter]:f.z.object({thresholds:f.z.object({animal_violence:f.z.number().min(0).max(1),blood_and_gore:f.z.number().min(0).max(1),child_present:f.z.number().min(0).max(1),cigarettes_and_tobacco_products:f.z.number().min(0).max(1),explosions:f.z.number().min(0).max(1),exposed_breasts:f.z.number().min(0).max(1),exposed_butts:f.z.number().min(0).max(1),genitalia:f.z.number().min(0).max(1),guns:f.z.number().min(0).max(1),harassment_and_hate_speech:f.z.number().min(0).max(1),knives:f.z.number().min(0).max(1),marijuana:f.z.number().min(0).max(1),other_drugs:f.z.number().min(0).max(1),other_weapons:f.z.number().min(0).max(1),physical_violence:f.z.number().min(0).max(1),sex_toys:f.z.number().min(0).max(1),sexual_activity:f.z.number().min(0).max(1),suggestive:f.z.number().min(0).max(1),is_sensitive:f.z.number().min(0).max(1)}).describe("Indicate a minimum probability threshold on each risk criteria above which an image will be flagged as unsafe."),fieldId:f.z.string().describe("Specify the fieldId if the rule is intended to be applied to any textcollection steps.").optional()}),[h.ScriptLinterName.ChatMRSSphereExecutionRelevanceLinter]:f.z.object({promptTemplate:f.z.string().describe("Reference the executed code as {{executedCode}} and the model output as {{modelOutput}}. For TextCollection steps, reference the field_id in double brackets {{}}, such as {{ranking_reasoning}}."),systemPrompt:f.z.string().describe('System prompt helps set the behavior of GPT (e.g., "You are a helpful assistant.") and can typically be left blank. See the [OpenAI docs](https://platform.openai.com/docs/guides/gpt/chat-completions-api)').optional(),overriddenModelParams:f.z.object({model:f.z.string(),max_tokens:f.z.number(),temperature:f.z.number()}).describe("If the prompt works on gpt-4o-mini, we'd suggest using gpt-4o-mini. If it does not work, use gpt-4.").optional()}),[h.ScriptLinterName.ChatGoogleSearchPlagiarismLinter]:f.z.object({useGPT:f.z.boolean().describe("Use GPT-4 to compare the sentence against the search results"),gptSentenceMatchThreshold:f.z.number().describe("The threshold for the similarity score between the sentence and the search results (GPT-4 confidence score). The score is between 0 and 1. Higher score means more similar."),useLevenshtein:f.z.boolean().describe("Use Levenshtein distance to compare the sentence against the search results"),levenshteinSentenceMatchThreshold:f.z.number().describe("This is an inverted threshold for the similarity score between the sentence and the search results, measured using the Levenshtein distance. The threshold score ranges from 0 to 1, where a higher score indicates a greater similarity. An exact match will have a score of 1. If the threshold is set to 0.8, any sentence with a similarity score of 0.8 or higher will be flagged as a match."),allowedSentenceMatches:f.z.number().describe("The number of sentences that can match with the search results before the response is flagged for plagiarism"),searchResultsToCompare:f.z.number().describe("The number of search results to compare against each sentence"),fieldId:f.z.string().describe('Specify the fieldId if the rule is intended to be applied to any TextCollection steps. Only works for "text" field types.').optional()}),[h.ScriptLinterName.ChatMultiModalRelevanceLinter]:f.z.object({}),[h.ScriptLinterName.ChatLatexParsingLinter]:f.z.object({}),[h.ScriptLinterName.ChatBlockMMMULinter]:f.z.object({similarityThreshold:f.z.number().describe("The threshold for the similarity score between the image and MMMU images")}),[h.ScriptLinterName.ChatAutoraterPlagiarismLinter]:f.z.object({similarityThreshold:f.z.number().gte(0).lte(1).describe("Threshold between 0 and 1 for reporting plagiarism when the 1 - relative levenshtein distance is higher than this number."),useLevenshteinPerSentence:f.z.boolean().optional().describe("Whether to use levenshtein distance per sentence instead of the entire text."),useGpt:f.z.boolean().optional().describe("Whether to use GPT to compare the text in addition to levenshtein distance."),fieldId:f.z.string().describe("The field id to run the linter on.")}),[h.ScriptLinterName.ChatLambdaUnitTestExecutionLinter]:f.z.object({codeFieldId:f.z.string().describe("The field id for field containing the code to run. This is REQUIRED."),testDataType:f.z.string().describe("The data type of the test cases. This should be json. This is REQUIRED."),unitTestCaseFieldId:f.z.string().describe("The field id for field containing test cases that run in a separate file. This is OPTIONAL. If not present, we will only check if the code compiles").optional(),useMetadataOutput:f.z.boolean().describe("If checked, the linter will use the metadata variable (in conjunction with metadataVariable) to determine the expected output").optional(),metadataVariable:f.z.string().describe("The metadata variable to use to determine the expected output").optional()}),[h.ScriptLinterName.ChatAudioLengthLinter]:f.z.object({minLength:f.z.number().optional().describe("The minimum length of the audio in seconds"),maxLength:f.z.number().optional().describe("The maximum length of the audio in seconds")}),[h.ScriptLinterName.ChatBenchmarkUrlLinter]:f.z.object({}),[h.ScriptLinterName.ChatQuestionBenchmarkComparisonLinter]:f.z.object({threshold:f.z.number().min(0).max(1).describe("The threshold for the similarity score between the question and the benchmark")}),[h.ScriptLinterName.AiderCompassWorkflowLinter]:f.z.object({contributorPromptStepIds:f.z.array(f.z.string()).describe("Any step ids of the contributor prompt"),contributorUnitTestStepIds:f.z.array(f.z.string()).describe("Any step ids of the contributor unit test"),aiderCompassWorkflowId:f.z.string().describe("The id of the aider compass workflow to kick off")}),[h.ScriptLinterName.CompassWorkflowLinter]:f.z.object({compassWorkflowId:f.z.string().describe("The id of the compass workflow to kick off. This compass workflow must output a column called linterPassed of value true or false. The workflow can also output an optional column called linterMessage of value a string."),jsonataExpression:((s=f.z.string().describe("The JSONata expression to use to fetch the task fields. The output of the JSONata should be an object that matches the expected columns of the compass workflow. If any empty object is provided, the linter will automatically pass."))._editor="jsonata",s),maxWaitTimeInSeconds:f.z.number().min(1).describe("The maximum time in seconds to wait for the compass workflow to complete. If the workflow does not complete within this time, the linter will be skipped. Default is 30 seconds.").optional()}),[h.ScriptLinterName.RubricPerCriteriaPromptResponsePairLinter]:f.z.object({promptTemplate:f.z.string().describe(`The prompt template for the AI to evaluate a single model response against a single criteria.
The following variables are available:
  * {{modelResponse}}: The text of the model response
  * {{criteria}}: The criteria description
  * {{rating0_value}}, {{rating1_value}}, ...: The possible rating values for the criteria
`),modelParams:f.z.object({model:f.z.nativeEnum({...T.LLMOption,...h.PRPLinterModelOption}).describe("The model to use for the LLM criteria ratings."),max_tokens:f.z.number(),temperature:f.z.number()}).describe("If the prompt works on gpt-o3-mini, we'd suggest using gpt-o3-mini. If it does not work, try other reasoning models."),resultRegex:f.z.object({regexMatch:f.z.string().describe("The regex to use to extract the result from the LLM criteria ratings."),matchGroupIndex:f.z.number().describe("The index of the match group to extract from the regex."),ratingField:f.z.nativeEnum(h.RatingCriteriaLinterRatingField).describe('Specify whether to match the LLM output against the criteria rating\'s value (e.g. "pass") or label (e.g. "Pass")')}).describe("The regex to use to extract the result from the LLM criteria ratings. The result will be extracted from the match group at the index specified in the matchGroupIndex field. This is REQUIRED."),showModelOutput:f.z.boolean().describe("If checked, the linter will show the model output to the contributor.").default(!1),modelOutputRegexMatch:f.z.string().describe("If you only want to output part of the GPT output, input the regex to use for extracting the output. Use a [regex tester](https://regex101.com/) to test your regex.").optional(),threshold:f.z.number().describe("The minimum fraction of ratings that must match between the AI and the contributor.")}),[h.ScriptLinterName.ChatHLEPublicPromptsPlagiarismLinter]:f.z.object({usesJaroWinkler:f.z.boolean().describe("Use Jaro-Winkler distance to compare the current prompt against the existing public dateaset of HLE prompts"),useSemanticSimilarity:f.z.boolean().describe("Use semantic similarity to compare the current prompt against the existing public dateaset of HLE prompts"),useLevenshtein:f.z.boolean().describe("Use Levenshtein distance to compare the current prompt against the existing public dateaset of HLE prompts"),jaroWinklerThreshold:f.z.number().describe("The maximum jaro winkler similarity score between the current prompt and any existing HLE prompt in the public prompts dataset. 1 means the prompts are identical, 0 means the prompts are completely different."),minRelativeLevenshteinDistance:f.z.number().describe("The minimum score levenshtein distance between the current prompt and any existing HLE prompt in the public prompts dataset. Value ranges from 0 to 1, where 0 means the prompts may be identical, and 1 means the prompts must be completely different."),allowedSentenceMatches:f.z.number().describe("The number of sentences that can match with an existing HLE prompt before the response is flagged for plagiarism"),csvPathForResponses:f.z.string().describe("Uses CSV file (headerless, single-column) as the source of HLE prompts to compare against. File link should be public."),fieldId:f.z.string().describe("TextCollection field Id.").optional(),thresholds:f.z.array(f.z.object({threshold:f.z.number().describe("The minimum threshold score for the linter to flag a prompt towards the similarity count."),maxPromptsAboveThreshold:f.z.number().describe("The maximum number of prompts that can be above the threshold. If the number of prompts above the threshold exceeds this value, the linter will flag an error.")}).describe("Use this config if useSemanticSimilarity is true. Establish the threshold for the semantic similarity score between the current prompt and any existing HLE prompt in the public prompts dataset. If the number of prompts above the threshold exceeds this value, the linter will flag an error."))}),[h.ScriptLinterName.ChatArchieGtfaCopilotLinter]:f.z.object({solutionFieldId:f.z.string().describe("The field id for the solution/ chain of thought"),answerFieldId:f.z.string().describe("The field id for the answer"),solutionStepId:f.z.string().describe("The step id for the solution/ chain of thought, if the solution is not on the same step as the answer. If not provided, the linter will try to find the solution on the step being linted.").optional(),answerStepId:f.z.string().describe("The step id for the answer, if the answer is not on the same step as the solution. If not provided, the linter will try to find the answer on the step being linted.").optional(),imageUrlStepId:f.z.string().describe("The step id for the image url, if the image url is not on the same step as the solution. If not provided, the linter will try to find the image url on the step being linted.").optional()}),[h.ScriptLinterName.CopilotRubricsLinter]:f.z.object({requirement:f.z.string().describe("What specific quality or standard should the rubrics meet? For example: 'The rubrics should be clear and understandable without additional context' or 'The rubrics should be specific and measurable'"),scoring_rules:f.z.array(f.z.string()).describe("Define how to score the rubrics based on your requirement. Each rule should specify when to give a particular score (Terrible, Bad, Ok, Good, or Perfect). For example: 'Score Perfect if the rubric is very specific and measurable' or 'Score Bad if the rubric is too vague or unclear'"),eval_mode:f.z.enum(["per_criterion","all_at_once"]).describe(`Choose how to evaluate your rubrics: 'per_criterion' analyzes each rubric individually for detailed feedback, while 'all_at_once' evaluates all rubrics together for a comprehensive overview
`),llm_model:f.z.string().describe("Choose which AI model to use for evaluating your rubrics. Newer models (like GPT-5) generally provide more accurate and detailed feedback. available models are gpt-4o, gpt-4.1, gpt-5").optional(),rag_uri_index:f.z.string().describe("The URI of the RAG index. RAG can be used to generate dynamic few-shot examples. Please reach out to the genai-archie-team to set up the RAG index if you want to use it.").optional()})};t.ChatTaskScriptLinterConfigSchemas=E;let O={stage:h.LintStage.Frontend,frontendSeverity:m.LintSeverity.WARNING,level:h.LintLevel.Info,enableAttempt:!0,enableL0:!0,enableL1:!0,enableL4:!0,enableL8:!1,enableL10:!0,enableL11:!1,enableL12:!1,enableBenchmarks:!0,enableQIRAuditor:!1,enableQIRLeadAuditor:!1,enableCustomerAudit:!1,levelAfterMaxFailures:h.LintLevel.Info,enableLintAutofix:!1,lintPanelOrder:0,dismissalReasons:[],runPerTurn:!1,isOffline:!0,testMode:!1};t.LinterPreset=u,(l=u||(t.LinterPreset=u={})).GrammarLinter="needs configuration grammar-linter",l.ContradictionsLinter="needs configuration contradictions-linter",l.SpamLinter="needs configuration spam-linter",l.ToxicityLinter="needs configuration toxicity-linter",l.MultilingualToxicityLinter="needs configuration multilingual-toxicity-linter",l.ChatJsonataCustomLinter="[needs configuration] chat-jsonata-custom-linter",l.ChatRobotsValidationCustomLinter="[needs configuration] chat-robots-validation-custom-linter",l.ChatMultiReplicaJsonataCustomLinter="[needs configuration] chat-multi-replica-jsonata-custom-linter",l.ChatLazarusMathTopicsLinter="[needs configuration] chat-lazarus-math-topic-custom-linter",l.ChatZipFileContentsLinter="[needs configuration] chat-zip-file-contents-linter",l.ChatOdinVideoIDLinter="chat-odin-video-id-linter",l.ChatOdinVideoGameValidateSubmission="chat-odin-video-game-validate-submission",l.ChatCustomEndpointLinter="[needs configuration] chat-custom-endpoint-linter",l.ChatPreventAnswerBasedOnContributorWt="[needs configuration] chat-prevent-answer-based-on-contributor-wt",l.ChatDolphinPromptImage="[out-of-the-box] chat-dolphin-prompt-image",l.GrammarCheckerPrompt="[out-of-the-box] grammar-checker-prompt (prp)",l.GrammarCheckerResponse="[out-of-the-box] grammar-checker-response (prp)",l.JustificationAndSelectionMatch="[out-of-the-box] justification-and-selection-match",l.BadWords="[out-of-the-box] bad-words",l.MissingResponse="[out-of-the-box] missing-response",l.UniqueResponse="[out-of-the-box] unique-response",l.UniqueCompletedTasksResponse="[out-of-the-box] unique-completed-tasks-response",l.AIContentDetector="[out-of-the-box] ai-content-detector",l.MinResponseEditDistance="[out-of-the-box] min-response-edit-distance",l.NGramDiversity="[out-of-the-box] ngram-diversity",l.SpamWords="[out-of-the-box] spam-words",l.SemanticSimilarity="[out-of-the-box] semantic-similarity",l.MultiTurnResponseSimilarity="[out-of-the-box] multi-turn-response-similarity",l.Regex="[needs configuration] regex",l.URLExists="[needs configuration] url-exists",l.GoogleTranslateDetector="[needs configuration] google-translate-detector",l.TextLength="[needs configuration] text-length",l.MLQualitySingletonMetric="[needs configuration] ml-quality-singleton-metric",l.MLQualityPRPMetric="[needs configuration] ml-quality-prp-metric",l.PromptResponsePairNumerical="[needs configuration] prompt-response-pair-numerical",l.PromptResponsePairString="[needs configuration] prompt-response-pair-string",l.PromptResponseWordCountDiff="[needs configuration] prompt-response-word-count-diff",l.SphereExecutionOutputLinter="[needs configuration] sphere-execution-output-linter",l.ChatLambdaUnitTestExecutionLinter="[needs configuration] chat-lambda-unit-test-execution-linter",l.ChatNightingaleArchetypeDiversityLinter="NER: Min/Max Category Count",l.ChatNightingalePlagiarismLinter="[out-of-the-box] nightingale-plagiarism-linter",l.ChatNightingaleWordCountLinter="[out-of-the-box] nightingale-word-count-linter",l.ChatNightingaleRankingConsistencyLinter="[out-of-the-box] chat-nightingale-ranking-consistency-linter",l.ChatJustificationLikertMatchMLLinter="[out-of-the-box] chat-justification-and-likert-ml-match",l.ChatPromptComparisonToSearchResult="prompt-comparison-to-search-result",l.ChatBulbaLikertResponseValidator="[Bulba MT] Likert_response_bad_validator",l.ChatBulbaLockFieldLinter="[Bulba MT] Lock_field_linter",l.ChatBulbaCodeEvalCodePresentLinter="[Bulba Code Eval] Code Present Linter",l.ChatMRSSphereExecutionRelevanceLinter="[Bulba Code Eval] Sphere Execution Relevance Linter",l.ChatNERSentenceLinter="[out-of-the-box] ner-sentence-linter",l.ChatPromptModelAgreementLinter="[needs configuration] prompt-model-agreement-linter",l.ChatImageNSFWLinter="[needs-configuration] image-nsfw-linter",l.ChatGoogleSearchPlagiarismLinter="[needs-configuration] google-search-plagiarism-linter",l.ChatMultiModalRelevanceLinter="[out-of-the-box] mm-relevance-linter",l.ChatLatexParsingLinter="[out-of-the-box] latex-parsing-linter",l.ChatBlockMMMULinter="[out-of-the-box] block-mmmu-linter",l.ChatAutoraterPlagiarismLinter="[out-of-the-box] autorater-plagiarism-linter",l.ChatMultiReplicaSimilarityLinter="[needs configuration] chat-multi-replica-similarity-linter",l.ChatAudioLengthLinter="[out-of-the-box] audio-length-linter",l.ChatBenchmarkUrlLinter="[out-of-the-box] benchmark-url-linter",l.LazarusMaxUsesOfReferenceURLLinter="[out-of-the-box] max-uses-of-reference-url-linter",l.ChatUniqueNameURLLinter="[out-of-the-box] unique-name-url-linter",l.ChatQuestionBenchmarkComparisonLinter="[out-of-the-box] question-benchmark-comparison-linter",l.RubricPerCriteriaPromptResponsePair="[needs configuration] rubric-per-criteria-prompt-response-pair",l.AiderCompassWorkflowLinter="[needs configuration] aider-compass-workflow-linter",l.CompassWorkflowLinter="[needs configuration] compass-workflow-linter",l.ChatHLEPublicPromptsPlagiarismLinter="[needs configuration] hle-public-prompts-plagiarism-linter",l.ChatArchieGtfaCopilotLinter="[needs configuration] archie-gtfa-copilot-linter",l.CopilotRubricsLinter="[needs configuration] copilot-rubrics-linter";let M={...O,name:"JSONata Linter - Can be used to build custom project linters",shortDescription:"Evaluates JSONata expressions and flags the linter if given expressions are ends up being false.",longDescription:`JSONata has an editor: https://try.jsonata.org/ that helps you to test your linter. Each expression evaluated separately.
'Every': Checkes if all expressions are true | 'Some': Checks if at least one expression is true | 'None': Checks if none of the expressions are true
Then if the final result is false, then the linter will be flagged.
An example: https://try.jsonata.org/Dh9P_r0PK`,condition:{scriptName:h.ScriptLinterName.ChatJsonataCustomLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection,y.InteractionStepType.TextCollectionPerResponse,y.InteractionStepType.PromptInput,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.ModelResponseSelector],operator:"every",expressions:[]},validatorCategory:h.ValidatorCategory.Defaults},message:"Please make sure your answers follow the instructions correctly"},w={...O,name:"Robots.txt Validation - Validates that robots.txt can be scraped for specific user agents",shortDescription:"Validates that robots.txt can be scraped for specific user agents. The linter will flag if the robots.txt file is not accessible for the given user agents.",longDescription:"Validates that robots.txt can be scraped for specific user agents. The linter will flag if the robots.txt file is not accessible for the given user agents.",condition:{scriptName:h.ScriptLinterName.ChatRobotsValidationCustomLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection,y.InteractionStepType.TextCollectionPerResponse,y.InteractionStepType.PromptInput,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.ModelResponseSelector]},validatorCategory:h.ValidatorCategory.ProjectConstraints},message:"The site /robots.txt file is not accessible for the given user agents"},x={[u.GrammarLinter]:{...O,name:"Response Quality Flag: Grammar",condition:{scriptName:h.ScriptLinterName.GrammarLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseEditor],thresholdScore:.3},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure the text written is grammatically correct"},[u.ContradictionsLinter]:{...O,name:"Response Quality Flag: Contradictions",condition:{scriptName:h.ScriptLinterName.ContradictionsLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseEditor],thresholdScore:.3},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure the text written does not contradict itself"},[u.SpamLinter]:{...O,name:"Response Quality Flag: Spam",shortDescription:"Spam Linter created by our ML team.",condition:{scriptName:h.ScriptLinterName.SpamLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseEditor],thresholdScore:.3},validatorCategory:h.ValidatorCategory.CheatingSpam},message:"Please ensure the text written is not spam"},[u.ToxicityLinter]:{...O,name:"Response Quality Flag: Toxicity",shortDescription:"Toxicity Linter created by our ML team.",condition:{scriptName:h.ScriptLinterName.ToxicityLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseEditor],thresholdScore:.3},validatorCategory:h.ValidatorCategory.CheatingSpam},message:"Please ensure the text written is not toxic"},[u.MultilingualToxicityLinter]:{...O,name:"Response Quality Flag: Multilingual Toxicity",shortDescription:"Multilingual Toxicity Linter created by our ML team.",condition:{scriptName:h.ScriptLinterName.MultilingualToxicityLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseEditor],thresholdScore:.3},validatorCategory:h.ValidatorCategory.Languages},message:"Please ensure the text written is not toxic"},[u.ChatJsonataCustomLinter]:M,[u.ChatRobotsValidationCustomLinter]:w,[u.ChatMultiReplicaJsonataCustomLinter]:{...M,name:`Multi Replica ${M.name}`,shortDescription:`${M.shortDescription}
Use the responses object to write your jsonata expression, where responses[i] is the response of the ith replica.`,longDescription:`${M.longDescription}.
Here is an example that checks that the text collection matches across all replicas: $count($distinct(responses.context.response.annotations.response_presentation.response[0])) != 1`,condition:{...M.condition,scriptName:h.ScriptLinterName.ChatMultiReplicaJsonataCustomLinter,validatorCategory:h.ValidatorCategory.MultiReplica}},[u.ChatLazarusMathTopicsLinter]:{...O,name:"Lazarus Math Topics Custom Linter",shortDescription:"Scans all the tasks in the project with same topic 1 and topic 2, and limits the use of it",longDescription:"Scans all the tasks in the project with same topic 1 and topic 2, and limits the use of it",condition:{scriptName:h.ScriptLinterName.ChatLazarusMathTopicsLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection]},validatorCategory:h.ValidatorCategory.ProjectConstraints},message:"Please make sure your answers follow the instructions correctly"},[u.ChatZipFileContentsLinter]:{...O,name:"Zip File Contents Linter",shortDescription:"Verifies the contents of the zip file and enforces the necessary number of files and/or file types",longDescription:"Verifies the contents of the zip file and enforces the necessary number of files and/or file types",condition:{scriptName:h.ScriptLinterName.ChatZipFileContentsLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection]},validatorCategory:h.ValidatorCategory.ProjectConstraints},message:"Please make sure your zip file contains the necessary files"},[u.ChatOdinVideoIDLinter]:{...O,name:"Odin Video ID Validator Linter",shortDescription:"Validates the Odin Video ID",longDescription:"Validates that the Video ID uploaded by the contributor is valid (was uploaded to vercel app)",condition:{scriptName:h.ScriptLinterName.ChatOdinVideoIDLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection],fieldId:"ovg_s3_id"},validatorCategory:h.ValidatorCategory.ProjectConstraints},message:"Please make sure the video ID is valid"},[u.ChatOdinVideoGameValidateSubmission]:{...O,name:"Odin Video Game Validate Submission Linter",shortDescription:"Validates an Attempt level Submission for the OVG Queue",longDescription:"This Linter reads the submitted Upload Key and Game Title and validates that the Contributor uploaded the proper files to S3.",condition:{scriptName:h.ScriptLinterName.ChatOdinVideoGameValidateSubmission,config:{runOnStepTypes:[y.InteractionStepType.TextCollection],uploadKeyFieldId:"ovg_s3_id",gameNameFieldId:"Game Title",skipFFMPEGCheck:!0},validatorCategory:h.ValidatorCategory.ProjectConstraints},message:"Please review the following errors detected:"},[u.ChatCustomEndpointLinter]:{...O,name:"Custom Endpoint Linter",shortDescription:"Verifies the user response by using a custom endpoint",longDescription:"Verifies the user response by using a custom endpoint",condition:{scriptName:h.ScriptLinterName.ChatCustomEndpointLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection]},validatorCategory:h.ValidatorCategory.ProjectConstraints},message:"Please make sure your answers are correct."},[u.ChatPreventAnswerBasedOnContributorWt]:{...O,name:"Prevent Field Response By WT",shortDescription:"Prevents contributors from a specific WT to give a response to a field",longDescription:"This linter prevents contributors from giving a response to a certain field, this can be used when different contributors are expected to answer different fields in the same taxonomy",condition:{scriptName:h.ScriptLinterName.ChatPreventAnswerBasedOnContributorWt,config:{runOnStepTypes:[y.InteractionStepType.TextCollection]}},message:"Ensures specific contributors answer field"},[u.ChatDolphinPromptImage]:{...O,name:"[Dolphin] Prompt Image Accuracy",shortDescription:"Prevents contributors of submit task based prompt & image ratings",longDescription:"This is a personalized linter for Dolphin MM, it does not allow contributors to submit a task step if prompt and image rating are not in accordance",condition:{scriptName:h.ScriptLinterName.ChatDolphinPromptImage,config:{runOnStepTypes:[y.InteractionStepType.TextCollection]},validatorCategory:h.ValidatorCategory.ProjectSpecific},message:"Prompt + image pair ratings"},[u.ChatPromptModelAgreementLinter]:{...O,name:"Model Agreement Linter (Difficulty)",condition:{scriptName:h.ScriptLinterName.ChatPromptModelAgreementLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput],strategyName:"BulbaBridgeStrategy",modelParams:{model:"sbs-reasoning-bard-bravo-xl-rev6-rc6p4"},passIfAgree:!1},validatorCategory:h.ValidatorCategory.ProjectConstraints},message:"Ensures whether GPT-4 agrees with a model on a response, gauging the difficulty of the response."},[u.GrammarCheckerPrompt]:{...O,name:"[Prompt] Grammar Error",shortDescription:"PRP: Runs GPT-4 to check prompt grammar and shows tasker where grammar errors are within task",longDescription:`"When Contain grammar errors within the PRP is True, it will provide the following message to the taskers:

Please ensure that your response is free of any grammar errors.
Errors: <grammar errors>"`,condition:{scriptName:h.ScriptLinterName.ChatPromptResponsePairLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.TextCollection],promptTemplate:`Examine the given text and report if there are any grammar, typo, or spelling errors.

Text:
{{promptText}}

Use the following output format:

Contain grammar errors: <True/False>
Errors: <grammar errors>`,showModelOutput:!0,modelOutputRegexMatch:"Errors: .*",overriddenModelParams:{model:"gpt-4o",temperature:0,max_tokens:512},passIfStringOutputMatches:{regexMatch:"Contain grammar errors: False",flags:"ig"}},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure that your response is free of any grammar errors."},[u.GrammarCheckerResponse]:{...O,name:"[Response] Grammar Error",shortDescription:"PRP: Runs GPT-4 to check response grammar and shows tasker where grammar errors are within task",longDescription:`"When Contain grammar errors within the PRP is True within the Response, it will provide the following message to the taskers:

Please ensure that your response is free of any grammar errors.
Errors: <grammar errors>"`,condition:{scriptName:h.ScriptLinterName.ChatPromptResponsePairLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseEditor],promptTemplate:`Examine the given text and report if there are any grammar, typo, or spelling errors.

Text:
{{responseText}}

Use the following output format:

Contain grammar errors: <True/False>
Errors: <grammar errors>`,showModelOutput:!0,modelOutputRegexMatch:"Errors: .*",overriddenModelParams:{model:"gpt-4o",temperature:0,max_tokens:512},passIfStringOutputMatches:{regexMatch:"Contain grammar errors: False",flags:"ig"}},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure that your response is free of any grammar errors."},[u.JustificationAndSelectionMatch]:{...O,name:"Justification and Selection match",shortDescription:"PRP: Runs GPT-4 to check whether the selected model response matches the given justification",longDescription:`"This rule checks if the selected model response matches the given justification. If there is a mismatch, it will prompt the taskers with the following message:

    Please ensure that your selected model response matches the given justification.
    Mismatch details: <details of the mismatch>"`,condition:{scriptName:h.ScriptLinterName.ChatPromptResponsePairLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseSelector],promptTemplate:`Ensure that the chosen selected index matches the justification. If the selected index is 0, the justification should be saying that Response A or Response 1 is better; if the selected index is 1, the justification should be saying that Response B or Response 2 is better. If the selected index is -1, the justification should be saying that both responses are the same or relatively equal.

        Selected index: {{selectedIndex}}
        Justification: {{justification}}

        Use the following output format:

        Contain errors: <True/False>
        Errors: <grammar errors>`,showModelOutput:!0,modelOutputRegexMatch:"Errors: .*",overriddenModelParams:{model:"gpt-4o",temperature:0,max_tokens:512},passIfStringOutputMatches:{regexMatch:"Contain errors: False",flags:"ig"}},validatorCategory:h.ValidatorCategory.JustificationRanking},message:"Please ensure that your selected model response matches the given justification."},[u.ChatJustificationLikertMatchMLLinter]:{...O,name:"Justification and Likert Match ML Linter",shortDescription:"Runs GPT-4 with multiple model votes to check if the Likert matches the given justification",longDescription:'"This rule checks if the selected model response matches the given justification in the most accurate way"',condition:{scriptName:h.ScriptLinterName.ChatJustificationLikertMatchMLLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseSelector,y.InteractionStepType.ModelResponseRanking,y.InteractionStepType.TextCollection],likertScaleSet:["Response 1 is much better than Response 2","Response 1 is better than Response 2","Response 1 is slightly better than Response 2","Both responses are the same","Response 2 is slightly better than Response 1","Response 2 is better than Response 1","Response 2 is much better than Response 1"]},validatorCategory:h.ValidatorCategory.JustificationRanking},message:"Please ensure that your selected model response matches the given justification."},[u.BadWords]:{...O,name:"[Prompt/Response] Profanity Detected",frontendSeverity:m.LintSeverity.ERROR,shortDescription:"Prevents profanity in response",longDescription:"Prevents profanity in the response. Please see this [doc](https://docs.google.com/spreadsheets/d/1RiXhLe8RnT7zKZZXfNj8uGGYxIdj3csfG6eUpkf2LPw/edit#gid=198521862) for the list of words considered profanity by default.",condition:{scriptName:h.ScriptLinterName.ChatBadWordsLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor]},validatorCategory:h.ValidatorCategory.CheatingSpam},message:"Please do not use bad words in your prompt/response."},[u.MissingResponse]:{...O,frontendSeverity:m.LintSeverity.ERROR,name:"Missing Required Response",shortDescription:"Requires a response for a field",longDescription:"Linter to enforce that a response isn't empty.",condition:{scriptName:h.ScriptLinterName.ChatMissingResponseLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollection,y.InteractionStepType.TextCollectionPerResponse]},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Missing response"},[u.UniqueResponse]:{...O,name:"Duplicated Response",message:"The response is too similar to some previously submitted response.",frontendSeverity:m.LintSeverity.ERROR,shortDescription:"Enforce that texts are sufficiently different from previously submitted text, as measured by levenshtein distance",longDescription:'Enforce the currently submitted text is different enough from the historically submitted texts. The historically submitted texts are aggregated from prompt, edited model response, and the relevant textcollection field if "fieldId" is provided.',condition:{scriptName:h.ScriptLinterName.ChatUniqueResponseLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],minLengthToApply:10,minRelativeLevenshteinDistance:.3,compareDifferentAttempters:!1,attemptsLimit:300,addPrevAttemptsToMessage:!0,useLevenshtein:!1,checkImageDB:!0},validatorCategory:h.ValidatorCategory.Diversity}},[u.UniqueCompletedTasksResponse]:{...O,name:"Duplicated Response In Completed Tasks",message:"The response is too similar to some previously submitted response from a completed task.",frontendSeverity:m.LintSeverity.ERROR,shortDescription:"Enforce that texts are sufficiently different from previously submitted text, as measured by levenshtein distance",longDescription:'Enforce the currently submitted text is different enough from the historically submitted texts. The historically submitted texts are aggregated from prompt, edited model response, and the relevant textcollection field if "fieldId" is provided.',condition:{scriptName:h.ScriptLinterName.ChatCompletedTasksUniqueResponseLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],minLengthToApply:10,minRelativeLevenshteinDistance:.3,compareDifferentAttempters:!1,attemptsLimit:300,addPrevAttemptsToMessage:!0,useLevenshtein:!1,checkImageDB:!0},validatorCategory:h.ValidatorCategory.Diversity}},[u.AIContentDetector]:{...O,name:"AI Generated Content: GPTZero",shortDescription:'Flags text that are considered AI generated by GPT Zero. Same as "GPT Zero" linter in TextCollection.',longDescription:'Flags text that are considered AI generated by GPT Zero. According to GPT Zero, "At a threshold of 0.88, 85% of AI documents are classified as AI, and 99% of human documents are classified as human. At a threshold of 0.5, 96% of AI documents are classified as AI, and 96% of human documents are classified as human." However, our internal tests indicate a very high false positive rate at 0.5 (likely due to the fact we are often rewriting AI generated text), so we generally recommend setting a higher threshold (e.g., 0.9) if using as a blocking linter. See [GPT Zero docs for more details](https://gptzero.stoplight.io/docs/gptzero-api/d2144a785776b-ai-detection-on-single-string)',condition:{scriptName:h.ScriptLinterName.ChatGPTZeroLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor,y.InteractionStepType.TextCollectionPerResponse],average_generated_prob:.8,completely_generated_prob:.9},validatorCategory:h.ValidatorCategory.CheatingSpam},message:"Please do not use AI-generated content."},[u.MinResponseEditDistance]:{...O,name:"[Prompt/Response] More Edits Required",shortDescription:"Enforce levenshtein edits from initial response",longDescription:"This linter checks that there are enough edits between original response and final output of an editor response.",condition:{scriptName:h.ScriptLinterName.ChatMinEditDistanceLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseEditor],minRelativeLevenshteinDistance:.5,minLengthToApply:5,removeMarkdown:!0},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please make sure that your response is sufficiently different from the provided prompt/response."},[u.NGramDiversity]:{...O,name:"[Prompt] Diversity of Word Choice",frontendSeverity:m.LintSeverity.ERROR,shortDescription:"Enforce diversity of word choice across tasks",longDescription:"Linter to enforce diversity in word choice across tasks. Diversity can be tuned using the supported parameters in the config.",condition:{scriptName:h.ScriptLinterName.ChatNGramDiversityLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.TextCollection],maxMatches:3,numAttempts:20,n:2,ignoreStopWords:!0,additionalStopWords:[],fieldId:""},validatorCategory:h.ValidatorCategory.Diversity},message:"Please rewrite your response as it is too similar to your previous prompts."},[u.SpamWords]:{...O,name:"Spam: Banned Phrases",frontendSeverity:m.LintSeverity.ERROR,shortDescription:"Blocks suspicous phrases that may be from ChatGPT (e.g., September 2021)",longDescription:"This linter uses regex to prevent words from being used in the task",condition:{scriptName:h.ScriptLinterName.ChatRegexLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],rules:["(september 2021|knowledge cutoff|open[\\s]*ai|scale[ ]*ai|remotasks|I cannot predict future events|I don't have the capacity|I don't have feelings or emotions|January 2022|January 22|April 2023)"],matches:"none",regexFlags:"ig"},validatorCategory:h.ValidatorCategory.CheatingSpam},message:"Do not include spam phrases, such as those generated in a ChatGPT response."},[u.SemanticSimilarity]:{...O,name:"[Prompt] Similar Prompt Already Submitted",frontendSeverity:m.LintSeverity.ERROR,shortDescription:"Semantic Similarity - Blocks prompts that are too similar from already submitted prompts, based on the meaning of the prompts (instead of word choice).",longDescription:`Compares submitted prompts against all previously submitted prompts in the project and blocks those that are too close, as measured by the cosine similarity of embeddings. Think of embeddings as representing the meaning of a text - texts with more similar meanings will be closer together.

    Here's an example of two prompts that would be considered similar in the embedding space:

    Seven bottles of soda cost $21.00 while 4 bottles of water cost $8. If David wants to buy 3 bottles of soda and 2 bottles of water, how much will that cost?

    Five pens cost $7.50 while 4 pencils cost $1. If Andrew wants to buy 3 pens and 2 pencils, how much will that cost?

    While the word choice is very different, the two prompts are very similar in terms of the problem they are trying to solve.`,condition:{scriptName:h.ScriptLinterName.ChatSemanticSimilarityLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],thresholds:[{threshold:.9,maxPromptsAboveThreshold:0}]},validatorCategory:h.ValidatorCategory.Diversity},message:"Please rewrite your response as it is too similar to some of the previously submitted prompts."},[u.Regex]:{...O,name:"Regex: Block Specific Phrases",frontendSeverity:m.LintSeverity.ERROR,shortDescription:'Use regular expression rules to prevent the most common errors or enforce certain response formats. Same as "Regex Blocklist" linter in TextCollection.',longDescription:`Please add any phrases or words you want to flag by clicking 'Lint Rule Config', and adding the words within 'rules section'. Any words that may overlap, please use 'exceptions'.

    Example:
    - Rules: 'Thank you for'
    - Exception: 'Thank you'`,condition:{scriptName:h.ScriptLinterName.ChatRegexLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],rules:["please","thank you"],matches:h.RegexMatches.None,regexFlags:"i"},validatorCategory:h.ValidatorCategory.ProjectConstraints},message:'Do not use words like "please" or "thank you"'},[u.TextLength]:{...O,name:"Minimum/Maximum Word Count Required",frontendSeverity:m.LintSeverity.ERROR,shortDescription:"Enforce a minimum or maximum text length",longDescription:"Restrict by character length by using `minCharacterLength` / `maxCharacterLength`. Restrict by word length by using `minWordLength` / `maxWordLength`.",condition:{scriptName:h.ScriptLinterName.ChatTextLengthLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseSelector],minWordCount:10,maxWordCount:100,runOnJustification:!1,runOnReferenceTextContent:!1},validatorCategory:h.ValidatorCategory.ProjectConstraints},message:"Please restrict your prompt to 10-100 words."},[u.MLQualitySingletonMetric]:{...O,name:"Response Quality Flag",shortDescription:"Linters created by our ML team to target common issues. See [ML-based Quality Linter](https://scale.atlassian.net/wiki/spaces/OP/pages/452493395/ML-based+Quality+Linters) for more details.",longDescription:`"The thresholds define the range in which the linter will flag the task. For example, if you set a Lower Bound Threshold of 0.25 and a Threshold Score of 0.5, only tasks within 0.25 to 0.50 will be flagged.

    Typically, you should set the Lower Bound Threshold to be 0 if you want to set a certain quality metric to be up to a certain standard (that you set as Threshold Score), since it'll flag everything below that standard.

    For Blocking: If you would like Logical Complexity to be somewhat complex(0.25, 0.5), then you would set the lower bound threshold to 0 and upper bound threshold to 0.25


    For Warning:"

    `,condition:{scriptName:h.ScriptLinterName.ChatMLSingletonQualityMetricLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],qualityMetricType:g.SingletonQualityMetricType.GrammaticalityNormalized,lowerBoundScore:0,thresholdScore:.5},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure that your response is grammatically correct."},[u.MLQualityPRPMetric]:{...O,name:"Prompt and Response Logic Error",shortDescription:"Looks at both Prompt and Response. Currently only available with Relevance",longDescription:"Linters created by our ML team to target common issues. See [ML-based Quality Linter](https://scale.atlassian.net/wiki/spaces/OP/pages/452493395/ML-based+Quality+Linters) for more details.",condition:{scriptName:h.ScriptLinterName.ChatMLPromptResponsePairQualityMetricLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseEditor],qualityMetricType:g.PromptResponsePairQualityMetricType.RelevanceNormalized,lowerBoundScore:0,thresholdScore:.5}},message:"Please ensure that your response is relevant to the prompt."},[u.PromptResponsePairNumerical]:{...O,name:"AI Linter - Numerical Match",shortDescription:"AI Linter: Send a prompt to an AI and lint based on outputted number",longDescription:"Configure a prompt for an AI to validate tasker response against a numerical output to lint against.",condition:{scriptName:h.ScriptLinterName.ChatPromptResponsePairLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue],systemPrompt:"You are a helpful assistant for evaluating how complex a user query is.",promptTemplate:`Examine the given user query to determine how difficult it is for a large language model to produce an excellent response to the query. First, you must rate the query on a scale of 1 to 10 by strictly following this format: "Rating: rating", for example: "Rating: 5". After your rating, provide a short explanation. Be as objective as possible.

[User query]
{{promptText}}

Rating: `,passIfNumericOutputMatches:{comparator:"gte",threshold:5},showModelOutput:!1},validatorCategory:h.ValidatorCategory.Defaults},message:"Please write a more complex and challenging prompt for our bot (e.g., specify the audience / viewpoint, length, outline of the response, tone of voice, level of difficulty / detail expected, expected number of outputs, etc.,). If your prompt is being flagged, it means that you should add some of these parameters (if applicable!)."},[u.PromptResponsePairString]:{...O,name:"AI Linter - String Match",shortDescription:"AI Linter: Send a prompt to an AI and lint based on outputted string",longDescription:"Configure a prompt for an AI to validate tasker response against a string output to lint against.",condition:{scriptName:h.ScriptLinterName.ChatPromptResponsePairLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.TextCollectionPerResponse,y.InteractionStepType.ModelResponseSelector],promptTemplate:`Examine the given text and report if there are any grammar errors.

Text:
{{promptText}}

Contain grammar errors: <True/False>
Errors: <grammar errors>`,showModelOutput:!0,overriddenModelParams:{model:"gpt-4o",temperature:0,max_tokens:512},passIfStringOutputMatches:{regexMatch:"Contain grammar errors: False",flags:"ig"}},validatorCategory:h.ValidatorCategory.Defaults},message:"Please ensure that your response is free of any grammar errors."},[u.MultiTurnResponseSimilarity]:{...O,name:"Multiturn: Conversation too Similar to Previous Attempts",frontendSeverity:m.LintSeverity.ERROR,shortDescription:"Requires prompt, responses, and relevant textcollection fields within the same chat are sufficiently different, as measured by the levenshtein distance",longDescription:'Enforce the currently submitted text is different enough from the texts of previous turns, which are aggregated from prompt, edited model response, and the relevant textcollection field if "fieldId" is provided in the current attempt.',condition:{scriptName:h.ScriptLinterName.ChatMultiTurnResponseSimilarityLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],minRelativeLevenshteinDistance:.4,minWordsToApply:5},validatorCategory:h.ValidatorCategory.Diversity},message:"Please do not write similar responses across multiple turns."},[u.GoogleTranslateDetector]:{...O,name:"[needs configuration] google-translate-detector",shortDescription:"Custom linter for Vertigo Language Rewrite. Compares Google Translate output of prompt (original text) to the tasker response (translated text)",longDescription:"This linter was custom built for Vertigo Language Rewrite. It assume that the task is set up such that the original text is the chat Prompt and the translated text is the chat Response. It then puts the Prompt through Google Translate and compared the Levenshtein Distance to tha Response.",condition:{scriptName:h.ScriptLinterName.ChatGoogleTranslateDetectionLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseEditor],minRelativeLevenshteinDistance:.2,minWordsToApply:5},validatorCategory:h.ValidatorCategory.Languages},message:"Please do not copy results from Google translate."},[u.URLExists]:{...O,name:"URL Does Not Work",frontendSeverity:m.LintSeverity.ERROR,shortDescription:"Checks if the URL provided is a working link",longDescription:"This will verify that the url link is a valid link but will not check if it has paywalls within the website. To make sure the URL-exist is working on the ChatTask Reference URL section, please select 'PromptInput'  within 'Restrict by step types'",condition:{scriptName:h.ScriptLinterName.ChatURLExistsLinter,config:{runOnStepTypes:[]},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure that your response contains a valid URL."},[u.PromptResponseWordCountDiff]:{...O,name:"Translated Text Length Too Different",shortDescription:"Custom linter for translation projects. Check whether the length of the translated text is way to off from the length of the source text.",condition:{scriptName:h.ScriptLinterName.ChatPromptResponseWordCountDiffLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseEditor],minWordsToApply:5,maxWordsCountMultiplier:1.2,minWordsCountMultiplier:.8},validatorCategory:h.ValidatorCategory.Languages},message:"Please ensure that your response length is not too different from the prompt length."},[u.SphereExecutionOutputLinter]:{...O,name:"[needs configuration] sphere-execution-output-linter",shortDescription:"Check if executed code output matches in task response",condition:{scriptName:h.ScriptLinterName.ChatSphereExecutionOutputLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection,y.InteractionStepType.ModelResponseEditor],codeFieldId:"solution_code",concatCodeFieldIds:[],outputFieldId:"textual_code_output",sphereProjectId:"",language:"",scenarioName:"run",sphereProjectCodeFilePath:"prog.py",lintForCodeFailure:!1},validatorCategory:h.ValidatorCategory.Coding},message:"Code error. "},[u.ChatLambdaUnitTestExecutionLinter]:{...O,name:"[needs configuration] lambda-unit-test-execution-linter",shortDescription:"Check if executed code output matches test cases",condition:{scriptName:h.ScriptLinterName.ChatLambdaUnitTestExecutionLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection],codeFieldId:"solution_code_field_id",unitTestCaseFieldId:"unit_test_field_id",testDataType:"json"}},message:"Checks the code by running unit tests on them"},[u.ChatNightingaleArchetypeDiversityLinter]:{...O,name:"NER: Min/Max Category Count",shortDescription:"Check if the number of categories in the NER step is within the specified range",condition:{scriptName:h.ScriptLinterName.ChatNightingaleArchetypeDiversityLinter,config:{runOnStepTypes:[y.InteractionStepType.NER],minCategoryPerTurn:[1]},validatorCategory:h.ValidatorCategory.ProjectConstraints},message:"Please select a diverse set of categories."},[u.ChatNightingalePlagiarismLinter]:{...O,name:"[NER] Plagiarism Linter",shortDescription:"Check if the annotations of the latest NER step are present in the model response editor (to be used if the expectation is that NER annotations are replaced)",condition:{scriptName:h.ScriptLinterName.ChatNightingalePlagiarismLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseEditor],nGram:3,maxAllowedRepetition:0,minWordsToApply:5},validatorCategory:h.ValidatorCategory.CheatingSpam},message:"Please do not copy text from above."},[u.ChatNightingaleWordCountLinter]:{...O,name:"NER: Word Span Highlight Limit",condition:{scriptName:h.ScriptLinterName.ChatNightingaleWordCountLinter,config:{runOnStepTypes:[y.InteractionStepType.NER],minCategoryPerTurn:[3]},validatorCategory:h.ValidatorCategory.ProjectConstraints},message:"The text is insufficient"},[u.ChatNightingaleRankingConsistencyLinter]:{...O,name:"[out-of-the-box] chat-nightingale-ranking-consistency-linter",condition:{scriptName:h.ScriptLinterName.ChatNightingaleRankingConsistencyLinter,config:{runOnStepIds:["430d534f-55d5-4545-9f42-7a1519d906ad"]},validatorCategory:h.ValidatorCategory.ProjectSpecific},message:"Please check your helpfulness ratings to make sure theyre consistent with your model rankings."},[u.ChatPromptComparisonToSearchResult]:{...O,name:"[Prompt] Google Search Plagiarism",shortDescription:"Compares prompt against the first google search result",condition:{scriptName:h.ScriptLinterName.ChatPromptComparisonToSearchResult,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue],useGPT:!0,useLevenshtein:!0,threshold:.7},validatorCategory:h.ValidatorCategory.CheatingSpam},message:"Please do not copy examples from search results in your prompt"},[u.ChatNERSentenceLinter]:{...O,name:"[out-of-the-box] ner-sentence-linter",condition:{scriptName:h.ScriptLinterName.ChatNERSentenceLinter,config:{runOnStepTypes:[y.InteractionStepType.NER],sentenceDelimiters:[".","\n"]},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure that each label covers exactly one sentence."},[u.ChatBulbaLikertResponseValidator]:{...O,name:"[Bulba MT] Likert_response_bad_validator",condition:{scriptName:h.ScriptLinterName.ChatBulbaLikertResponseValidator,config:{runOnStepTypes:[y.InteractionStepType.TextCollection]},validatorCategory:h.ValidatorCategory.ProjectSpecific},message:"Please check the response rating and if it meets the standards"},[u.ChatBulbaLockFieldLinter]:{...O,name:"[Bulba MT] Lock_field_linter",condition:{scriptName:h.ScriptLinterName.ChatBulbaLockFieldLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection]},validatorCategory:h.ValidatorCategory.ProjectSpecific},message:"Please check that you did not edit the locked field"},[u.ChatBulbaCodeEvalCodePresentLinter]:{...O,name:"[Bulba Code Eval] Code Present Linter",condition:{scriptName:h.ScriptLinterName.ChatBulbaCodeEvalCodePresentLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollectionPerResponse]},validatorCategory:h.ValidatorCategory.ProjectSpecific},message:"Please ensure that your responses correspond with whether there is code in the response."},[u.ChatImageNSFWLinter]:{...O,name:"[needs configuration] NSFW Image Linter",shortDescription:"Linter to check if the image contains unsafe or sensitive elements",longDescription:"Use this linter to check if the image contains any sensitive elements across 15+ categories. The linter works only on image URLs on either a text collection field or on reference text URLs. The linter will send the URL to our internal image model and if the model deems the image to be sensitive, then the configured thresholds will be used to determine if an image is sensitive.",condition:{scriptName:h.ScriptLinterName.ChatImageNSFWLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.TextCollection],thresholds:{animal_violence:.5,blood_and_gore:.5,child_present:.5,cigarettes_and_tobacco_products:.5,explosions:.5,exposed_breasts:.5,exposed_butts:.5,genitalia:.5,guns:.5,harassment_and_hate_speech:.5,knives:.5,marijuana:.5,other_drugs:.5,other_weapons:.5,physical_violence:.5,sex_toys:.5,sexual_activity:.5,suggestive:.5,is_sensitive:.5}},validatorCategory:h.ValidatorCategory.Multimodal},message:"Please ensure that the image doesn't contain unsafe or sensitive elements"},[u.ChatMRSSphereExecutionRelevanceLinter]:{...O,name:"[MRS / Sphere Workspace] Code Relevance Linter",shortDescription:"Performs a relevance check regarding executed code and its output",longDescription:"Use this linter to check if the executed code, and its output are in accordance",condition:{scriptName:h.ScriptLinterName.ChatMRSSphereExecutionRelevanceLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollectionPerResponse,y.InteractionStepType.TextCollection],promptTemplate:`Examine the given code and determine if it is relevant to the model output.
          Code:
          {{executedCode}}

          The model output is as follows:
          {{modelOutput}}

          Output True or False`,systemPrompt:"You are a helpful assistant for evaluating whether the executed code is relevant to the provided model output.",overriddenModelParams:{model:"gpt-4o",temperature:0,max_tokens:512}},validatorCategory:h.ValidatorCategory.Coding},message:"Please ensure that the code you executed in Sphere Engine is from the model response output."},[u.ChatGoogleSearchPlagiarismLinter]:{...O,name:"[needs configuration] Online Content: Google Search Plagiarism",frontendSeverity:m.LintSeverity.ERROR,shortDescription:"Compares text responses to Google search results and flags if an instance of plagiarism is detected",longDescription:`Use this linter to compare each sentence in a text response against Google search results for it (using SerpAPI) to detect instances of plagiarism.
      The similarity threshold and number of allowed sentence matches is configurable, as well as how many search results to compare each sentence against.
      Similarity can be measured using Levenshtein distance, GPT-4 prompting, or both.
      `,condition:{scriptName:h.ScriptLinterName.ChatGoogleSearchPlagiarismLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],useGPT:!0,gptSentenceMatchThreshold:.9,useLevenshtein:!1,levenshteinSentenceMatchThreshold:.25,allowedSentenceMatches:2,searchResultsToCompare:3},validatorCategory:h.ValidatorCategory.CheatingSpam},message:"Please do not plagiarize text from the internet"},[u.ChatMultiModalRelevanceLinter]:{...O,name:"multi-modal-relevance-linter",shortDescription:"Compares the relevance of an image to the prompt and response and flags if something is not relevant",longDescription:"Use this linter to compare the relevance of an image to the prompt response chain. This linter will send the image and prompts and responses to gpt4 and ask it if the text is relevant to the image. The linter will then flag the task if the model deems the prompt to be irrelevant to the image.",condition:{scriptName:h.ScriptLinterName.ChatMultiModalRelevanceLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor]},validatorCategory:h.ValidatorCategory.Multimodal},frontendLinterFeedbackRate:100,message:"Please ensure that what you enter is relevant to the image and the prior conversation"},[u.ChatLatexParsingLinter]:{...O,name:"latex-parsing-linter",shortDescription:"Checks if the latex code properly compiles",longDescription:"Use this linter to check if the latex code provided compiles properly. The linter will check if the latex code compiles without any errors and will flag the task if the code does not compile.",condition:{scriptName:h.ScriptLinterName.ChatLatexParsingLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor]},validatorCategory:h.ValidatorCategory.Coding},message:"Please ensure that your latex code compiles properly"},[u.ChatBlockMMMULinter]:{...O,name:"block-mmmu-linter",shortDescription:"Blocks prompt submission if it includes an image that is in MMMU",longDescription:"Use this linter to check if submitted images are in the MMMU database. If any of the submitted images in prompt steps that this linter is enabled on are in the MMMU database, it flags the submission.",condition:{scriptName:h.ScriptLinterName.ChatBlockMMMULinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue],similarityThreshold:.9},validatorCategory:h.ValidatorCategory.Multimodal},message:"Submission contains an image from the MMMU dataset, please use a different image"},[u.ChatAutoraterPlagiarismLinter]:{...O,name:"[Justification] Archie Summarizer Plagiarism Flag",frontendSeverity:m.LintSeverity.WARNING,shortDescription:"Checks justification for plagiarism against Archie's suggestion",longDescription:"",condition:{scriptName:h.ScriptLinterName.ChatAutoraterPlagiarismLinter,config:{runOnStepTypes:[y.InteractionStepType.QuantitativeModelResponseSelector],similarityThreshold:.9,useGpt:!0,fieldId:"ranking_reasoning"},validatorCategory:h.ValidatorCategory.CheatingSpam},message:"Please rewrite your justification in your own words so that it is not overly similar to or copied directly from Archie's suggestion."},[u.ChatMultiReplicaSimilarityLinter]:{...O,message:"Please make sure your answers follow the instructions correctly",name:"Multi Replica Similarity Linter",shortDescription:"Checks all pairwise similarities across step responses of replicas",longDescription:"If any pair of replica is over/under (configurable by comparator) the threshold specified, this linter will be triggered.",condition:{scriptName:h.ScriptLinterName.ChatMultiReplicaSimilarityLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection],threshold:.9,comparator:"gte"},validatorCategory:h.ValidatorCategory.MultiReplica}},[u.ChatAudioLengthLinter]:{...O,name:"Audio Length Validator",shortDescription:"Validates that the audio length is within the specified range",longDescription:"Checks if the model response audio file duration falls within the minimum and maximum length requirements",condition:{scriptName:h.ScriptLinterName.ChatAudioLengthLinter,config:{runOnStepTypes:[y.InteractionStepType.ModelResponseSelector],minLength:5,maxLength:300},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure the audio length is within the allowed range."},[u.ChatBenchmarkUrlLinter]:{...O,name:"Benchmark URL Linter",shortDescription:"Checks if the benchmark URL is valid",longDescription:"Checks if the benchmark URL is valid",condition:{scriptName:h.ScriptLinterName.ChatBenchmarkUrlLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput]},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure the benchmark URL is valid"},[u.LazarusMaxUsesOfReferenceURLLinter]:{...O,name:"Lazarus Max Uses of Reference URL Linter",shortDescription:"Checks if the Reference URLs have used too many times",longDescription:"Checks if the Reference URLs have used too many times. If the number of uses exceeds the threshold, the linter will flag the task. This linter was created exclusively for Lazarus Reasoning R9. Your results may vary",condition:{scriptName:h.ScriptLinterName.LazarusMaxUsesOfReferenceURLLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput],maxUsesOfReferenceURL:20,lookupWindowDays:30,taskLookupLimit:500,useLevenshteinDistance:!0,maxRelativeLevenshteinDistance:.1,useLLMComparison:!0,llmComparisonModel:"gpt-4o-mini",minLLMComparisonConfidence:.9},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure the Reference URLs have not been used too many times"},[u.ChatUniqueNameURLLinter]:{...O,name:"Unique Name or URL Linter",shortDescription:"Checks if the URLs or names are unique",longDescription:"Checks if the URLs or names are unique",condition:{scriptName:h.ScriptLinterName.ChatUniqueNameURLLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection],taskLookupLimit:500,lookupWindowDays:30,additionalProjectIds:"",reviewStatuses:[],reviewLevels:[]},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure the URL and name has not been used before"},[u.ChatQuestionBenchmarkComparisonLinter]:{...O,name:"Question Benchmark Comparison Linter",shortDescription:"Checks if the question is similar to the benchmark",longDescription:"Checks if the question is similar to the benchmark",condition:{scriptName:h.ScriptLinterName.ChatQuestionBenchmarkComparisonLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput],threshold:.5},validatorCategory:h.ValidatorCategory.GeneralQuality},message:"Please ensure the question is similar to the benchmark"},[u.AiderCompassWorkflowLinter]:{...O,name:"Aider Compass Workflow Linter",shortDescription:"Checks if provided prompt gets LLM to fail unit tests",longDescription:"Checks if provided prompt gets LLM to fail unit tests",condition:{scriptName:h.ScriptLinterName.AiderCompassWorkflowLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection]},validatorCategory:h.ValidatorCategory.ProjectSpecific},message:"Given your prompt, the LLM still passes the provided unit tests"},[u.CompassWorkflowLinter]:{...O,name:"Compass Workflow Linter",shortDescription:"Runs a Compass workflow as a custom linter",longDescription:'Runs a Compass workflow as a custom linter. The JSONata expression fetches fields to pass as the input into the workflow (If empty object is provided, the linter will automatically pass). The workflow must output the column "linterPassed" of value "true" or "false". The compass workflow can also output "linterMessage" to surface a custom message to the contributor.',condition:{scriptName:h.ScriptLinterName.CompassWorkflowLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection]},validatorCategory:h.ValidatorCategory.ProjectSpecific},message:"Please ensure your response follows the instructions"},[u.RubricPerCriteriaPromptResponsePair]:{...O,name:"Custom Linter - Agreement with AI",shortDescription:"Rates every model response against every criteria with an AI model, checks if ratings match with contributor ratings.",longDescription:"Rates every model response against every criteria with an AI model. Each response must have >[threshold] fraction of ratings match between the AI and the contributor.",condition:{scriptName:h.ScriptLinterName.RubricPerCriteriaPromptResponsePairLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollectionPerResponse],promptTemplate:`Examine the given text and evaluate it against the criteria {{criteria}}. Your evaluation should be {{rating0_value}} if the criteria is not present, and {{rating1_value}} if the criteria is present.

Text:
{{modelResponse}}

Format your response as follows:
criteria_is_present: <{{rating0_value}}/{{rating1_value}}>
Explanation: <explanation>`,showModelOutput:!0,modelParams:{model:S.accessibilityConfigInfo.defaultOption,temperature:0,max_tokens:1024},resultRegex:{regexMatch:"criteria_is_present: (.*)",matchGroupIndex:1,ratingField:h.RatingCriteriaLinterRatingField.Value},modelOutputRegexMatch:"Explanation:.*",threshold:.9},validatorCategory:h.ValidatorCategory.Defaults},message:"Please ensure that most of your ratings match the rating from the AI model."},[u.ChatHLEPublicPromptsPlagiarismLinter]:{...O,name:"[Prompt] HLE Public Prompts Plagiarism Linter",shortDescription:"Blocks prompts that are too similar to prompts that already existing the public HLE dataset.",message:"Please do not write a prompt that is similar to the prompts that already exist in the HLE public prompts database",condition:{scriptName:h.ScriptLinterName.ChatHLEPublicPromptsPlagiarismLinter,config:{runOnStepTypes:[y.InteractionStepType.PromptInput,y.InteractionStepType.MultiTurnContinue,y.InteractionStepType.ModelResponseEditor],usesJaroWinkler:!0,useLevenshtein:!0,useSemanticSimilarity:!1,jaroWinklerThreshold:.8,minRelativeLevenshteinDistance:.4,allowedSentenceMatches:0,csvPathForResponses:"https://huggingface.co/datasets/jxcai-scale/hle-public-questions/resolve/main/HLE%20Public%20Prompt%20Set%20-%20Public%20Set%2004_03_2025%20(2500%20questions).csv?download=true",thresholds:[{threshold:.5,maxPromptsAboveThreshold:0}]},validatorCategory:h.ValidatorCategory.CheatingSpam}},[u.ChatArchieGtfaCopilotLinter]:{...O,name:"[Archie GTFA Copilot] Linter",shortDescription:"Checks if the solution/ chain of thought is correct",longDescription:"Checks if the solution/ chain of thought is correct",condition:{scriptName:h.ScriptLinterName.ChatArchieGtfaCopilotLinter,config:{runOnStepTypes:[y.InteractionStepType.TextCollection],solutionFieldId:"solution",answerFieldId:"answer"},validatorCategory:h.ValidatorCategory.ProjectSpecific},message:""},[u.CopilotRubricsLinter]:{...O,name:"[Copilot Rubrics] Linter",shortDescription:"Customize a check to evaluate the rubrics",longDescription:"Customize a check to evaluate the rubrics",condition:{scriptName:h.ScriptLinterName.CopilotRubricsLinter,config:{runOnStepTypes:[y.InteractionStepType.RubricCriteriaBuilder],requirement:"",scoring_rules:[],eval_mode:"per_criterion",llm_model:"gpt-5"},validatorCategory:h.ValidatorCategory.ProjectSpecific},message:""}};t.LinterPresets=x},402168:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REWARD_MODEL_ROUTING_OVERRIDE=t.AFTER_MOCK_TEMPLATES=t.TURN_MOCK_TEMPLATES=t.BEFORE_MOCK_TEMPLATES=t.GENERAL_MOCK_TEMPLATES=t.QIR_MOCK_TEMPLATES=t.DEFAULT_PER_RESPONSE_FIELDS=t.DEFAULT_TOOL_USE_PROCESS_SUPERVISION_SUBTITLE=t.DEFAULT_TOOL_USE_PROCESS_SUPERVISION_TITLE=t.DEFAULT_PROCESS_SUPERVISION_END_AFTER_RATINGS_TITLE=t.DEFAULT_PROCESS_SUPERVISION_CREATE_CHUNKS_TITLE=t.DEFAULT_PROCESS_SUPERVISION_EDIT_CHUNKS_TITLE=t.DEFAULT_PROCESS_SUPERVISION_SUBTITLE=t.DEFAULT_PROCESS_SUPERVISION_TITLE=t.DEFAULT_SEARCH_REFERENCES_SUBTITLE=t.DEFAULT_SEARCH_REFERENCES_TITLE=t.DEFAULT_SEARCH_AUTOCOMPLETE_SUBTITLE=t.DEFAULT_SEARCH_AUTOCOMPLETE_TITLE=t.DEFAULT_NER_SUBTITLE=t.DEFAULT_NER_TITLE=t.DEFAULT_TEXTCOLLECTION_SUBTITLE=t.DEFAULT_TEXTCOLLECTION_TITLE=t.DEFAULT_MODEL_EDITOR_SUBTITLE=t.DEFAULT_MODEL_EDITOR_TITLE=t.DEFAULT_MODEL_RESPONSE_RANKING_SUBTITLE=t.DEFAULT_MODEL_RESPONSE_RANKING_TITLE=t.DEFAULT_MODEL_SELECTOR_SUBTITLE=t.DEFAULT_MODEL_SELECTOR_TITLE=t.DEFAULT_INSTRUCTION_SUBTITLE=t.DEFAULT_INSTRUCTION_TITLE=t.DEFAULT_PROMPT_INPUT_INSTRUCTIONS=t.DEFAULT_PROMPT_INPUT_SUBTITLE=t.DEFAULT_PROMPT_INPUT_TITLE=void 0;var n=i(963494),s=i(232095),l=i(392228),p=i(962751),u=i(167469);let d="Start a Chat";t.DEFAULT_PROMPT_INPUT_TITLE=d;let m="Write a prompt to start a chat session with the model.";t.DEFAULT_PROMPT_INPUT_SUBTITLE=m;let h=`
  Please write a prompt that you would like the model to respond to. The prompt should be a short paragraph of text that is 1-3 sentences long. The prompt should be open-ended and not contain any specific questions.
  Its okay if the models response is very bad! Please continue to write complex prompts even if the model doesnt know how to respond! We actually want to see more instances of where the model is bad at responding. The worse the models response, the better!
`.trim();t.DEFAULT_PROMPT_INPUT_INSTRUCTIONS=h;let g="Review the instructions";t.DEFAULT_INSTRUCTION_TITLE=g;let f="Read the instructions carefully before continuing.";t.DEFAULT_INSTRUCTION_SUBTITLE=f;let y="Select the best response";t.DEFAULT_MODEL_SELECTOR_TITLE=y;let b="When the responses are fully loaded, select the best response from the options.";t.DEFAULT_MODEL_SELECTOR_SUBTITLE=b;let T="Rank responses from best to worst";t.DEFAULT_MODEL_RESPONSE_RANKING_TITLE=T;let S="Drag and drop candidates into the classification groups.";t.DEFAULT_MODEL_RESPONSE_RANKING_SUBTITLE=S;let _="Refine your response";t.DEFAULT_MODEL_EDITOR_TITLE=_;let v="Edit the response to make it more appropriate for the prompt.";t.DEFAULT_MODEL_EDITOR_SUBTITLE=v;let L="Answer the questions below";t.DEFAULT_TEXTCOLLECTION_TITLE=L;let C="Label your response according to the questions below.";t.DEFAULT_TEXTCOLLECTION_SUBTITLE=C;let I="Annotate the response";t.DEFAULT_NER_TITLE=I;let R="Label the entities in the response per the instructions.";t.DEFAULT_NER_SUBTITLE=R;let P="Improve the model response";t.DEFAULT_SEARCH_AUTOCOMPLETE_TITLE=P;let E="When the response is fully loaded, search for helpful references and regenerate the response.";t.DEFAULT_SEARCH_AUTOCOMPLETE_SUBTITLE=E;let O="Search for references";t.DEFAULT_SEARCH_REFERENCES_TITLE=O;let M="Search for helpful references and write the response.";t.DEFAULT_SEARCH_REFERENCES_SUBTITLE=M;let w="Review the response and rate each piece";t.DEFAULT_PROCESS_SUPERVISION_TITLE=w;let x="When the response is fully loaded, rate each piece of the response.";t.DEFAULT_PROCESS_SUPERVISION_SUBTITLE=x,t.DEFAULT_PROCESS_SUPERVISION_EDIT_CHUNKS_TITLE="Please split the following message into chunks and ensure that all of the original content is preserved.",t.DEFAULT_PROCESS_SUPERVISION_CREATE_CHUNKS_TITLE="Please create a chunked response from scratch",t.DEFAULT_PROCESS_SUPERVISION_END_AFTER_RATINGS_TITLE="Is this step the final step, and contains the solution to the prompt? If YES, the model will stop generating subsequent steps. If NO, the model will generate subsequent steps to solve it.";let A="Review the response and rate each piece";t.DEFAULT_TOOL_USE_PROCESS_SUPERVISION_TITLE=A;let k="When the response is fully loaded, rate each piece of the response.";t.DEFAULT_TOOL_USE_PROCESS_SUPERVISION_SUBTITLE=k;let N=[{min:1,max:5,step:1,use_slider:!0,required:!0,type:n.TextCollectionFieldType.Number,field_id:"response_accuracy",title:"Accuracy",prefix:"Insufficient",mid_label:"Minimum",suffix:"Good",description:"The extent to which the information presented is accurate, reliable, and aligns with established facts or evidence.",rubric:"| Criteria                                                                                                                                                                                                                                                                    | 1-2  (Insufficient)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 3 (Minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 4-5 (Good)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |\n| <h3>Accuracy</h3>_The extent to which the information presented is accurate, reliable, and aligns with established facts or evidence._<br><h3>Weight: 25%</h3>                                                                                                              | <ul><li><b>Central Claims</b> - One or more incorrect claims are central or core to the conclusion, thesis, or key supporting points of the response</li><br><li><b>Supporting Claims</b> - 2 or more pieces of supporting evidence are false</li><br><li><b>Verifiable</b> - Conclusive, common-knowledge counterfactual information can be found via a Google search</li>                                                                                                                                                                                                  | <ul><li><b>Central Claims</b> - All central claims are correct and accurate</li><br><li><b>Supporting Claims</b> - Up to 1 incorrect supporting point that, if corrected, would not meaningfully alter the core thesis or conclusion</li><br><li><b>Verifiable</b> - Falsely asserts claims or evidence that are not fully proven / controversial as fact</li></ul>                                                                                                                                                                                                                                                                              | <ul><li><b>Central Claims</b> - All central claims are correct and accurate</li><br><li><b>Supporting claims</b> - All supporting claims are accurate and correct</li><br><li><b>Verifiable</b> - No claims or evidence are incorrect or false, and are verifiable through general available information, and trusted sources. All potentially controversial,  generalized statements or opinions  are presented with appropriate caveats</li></ul>                                                                                                                                                                                                                    |"},{required:!0,type:n.TextCollectionFieldType.Text,field_id:"response_accuracy_reasoning",title:"Accuracy Reasoning",description:"If there are factual information, share URL links that refutes the response statements. Make sure to write in full sentences to explain why the response has inaccurate statements. ",hint:'If URL verification was not required, please provide a reason why you think "URL" is factually accurate',min_characters:50,conditions:[{response_accuracy:["1","2"]}]},{min:1,max:5,step:1,use_slider:!0,required:!0,type:n.TextCollectionFieldType.Number,field_id:"response_completeness",title:"Completeness",prefix:"Insufficient",mid_label:"Minimum",suffix:"Good",description:"The extent to which the answer addresses all aspects of the prompt, ensuring that no essential information is omitted. All prompt instructions were followed; response delivered fully on the asks of the prompt.",rubric:"| Criteria                                                                                                                                                                                                                                                                    | 1-2  (Insufficient)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 3 (Minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 4-5 (Good)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |\n| <h3>Completeness</h3>_The extent to which the answer addresses all aspects of the prompt, ensuring that no essential information is omitted._<br><h3>Weight: 15%</h3>                                                                                                       | <ul><li><b>Prompt Request Coverage</b> - The response does not address all explicit asks of the prompt</li><br><li><b>Constraints</b> - The prompt did not address all of the constraints placed in service of the requests</li><br><li><b>Breadth of Solutions [STEM]</b> - The response does not show multiple possible options to solve the question within the prompt</li></ul>                                                                                                                                                                                          | <ul><li><b>Prompt Request Coverage</b> -The response addresses all explicit asks of the prompt</li><br><li><b>Constraints</b> - <br>The prompt completed the requests within the prompt, including the constraints placed in service of those requests</li><br><li><b>Breadth of Solutions [STEM]</b> - <br>The response references multiple possible solutions, but does not explain in-depth or cost/benefits of each solution</li></ul>                                                                                                                                                                                                       | <ul><li><b>Prompt Request Coverage</b> - The response addresses all explicit asks of the prompt</li><br><li><b>Constraints</b> - The prompt completed the requests within the prompt, including the constraints placed in service of those requests</li><br><li><b>Breadth of Solutions [STEM]</b> - The response shows multiple possible solutions, provides analysis of each, and provides a recommendation for which is the most elegant solution to solve the problem</li></ul>                                                                                                                                                                                    |"},{min:1,max:5,step:1,use_slider:!0,required:!0,type:n.TextCollectionFieldType.Number,field_id:"response_relevance",title:"Relevance",prefix:"Insufficient",mid_label:"Minimum",suffix:"Good",description:"How useful the supporting information and claims are in answering the question or prompt. The appropriate answer should be relevant to the question or request, and should reflect and meet the user's request. Responses should meet all category-specific requirements. ",rubric:"| Criteria                                                                                                                                                                                                                                                                    | 1-2  (Insufficient)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 3 (Minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 4-5 (Good)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |\n| <h3>Relevance</h3>_How useful  the supporting information and claims are in answering the question or prompt._<br><h3>Weight: 15%</h3>                                                                                                                                      | <ul><li><b>Supporting content</b> - The key points provided are unrelated to the central claim or thesis</li><br><li><b>Specificity</b> - The examples brought up are vague and overly general</li><br><li><b>Usefulness</b> - The information provided to justify or support any of the key points of the response does not logically contribute to the main claim</li></ul>                                                                                                                                                                                                | <ul><li><b>Supporting content</b> - The supporting information and evidence is tangentially related to the central claim or thesis</li><br><li><b>Specificity</b> - The information provided contains a few selected examples, but doesnt explain and relate them them back to the original response</li><br><li><b>Usefulness</b> - There is a mix of useful, and irrelevant but not directly useful information within the response. The core requests/demands of the prompt are still satisfied within the response, despite the irrelevant information</li></ul>                                                                            | <ul><li><b>Supporting content</b> - The supporting information logically defends or clearly illustrates the key points and  the central claims made in the response</li><br><li><b>Specificity</b> - The claims are supported with precise, rigorously chosen, examples that are related back to the original claims</li><br><li><b>Usefulness</b> - Each paragraph and sentence directly adds value to the claims or context of the response</li></ul>                                                                                                                                                                                                                |"},{type:n.TextCollectionFieldType.Number,field_id:"response_depth",title:"Depth",required:!0,description:"The level of detail, insight, and nuance the response provides.",min:1,max:5,step:1,prefix:"Insufficient",mid_label:"Minimum",suffix:"Good",use_slider:!0,rubric:"| Criteria                                                                                                                                                                                                                                                                    | 1-2  (Insufficient)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 3 (Minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 4-5 (Good)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |                                                                                                                                                                                                              \n| <h3>Depth</h3>_The level of detail, insight, and nuance the response provides._<br><h3>Weight: 10%</h3>                                                                                                                                                                     | <ul><li><b>Justification</b> - There is no supporting information at all. The response does not include meaningfully relevant insights, evidence, details, or examples</li><br><li><b>Context</b> - The response omits important or necessary background information to understand the content of the response</li><br><li><b>Logical Reasoning</b> - No rationale is provided at all</li></ul>                                                                                                                                                                              | <ul><li><b>Justification</b> - The supporting information was helpful in understanding and justifying the claims but was surface-level. There was analysis missing that is usually not found on a cursory google search.</li><br><li><b>Context</b> - The response provides the most important or necessary background context, but may omit or ignore minor background information</li><br><li><b>Logical reasoning</b> - The chain-of-thought-reasoning is included, but shallow, and can be more complete, and/or step-by-step</li></ul>                                                                                                      | <ul><li><b>Justification</b> - The supporting information includes ample relevant insights, evidence, details, and examples. The supporting information and evidence is exhaustive in regards to supporting the set of claims (i.e., there is a specific example or justification for each main claim)</li><br><li><b>Context</b> - The response provides the necessary useful background information and context in order for the user to understand the response</li><br><li><b>Logical reasoning</b> - The chain-of-reasoning of the response is sufficient and addresses most, if not all, immediate follow-up/related questions a user may have</li></ul>         |"},{type:n.TextCollectionFieldType.Number,field_id:"response_conciseness",title:"Conciseness",description:"How effectively the written response conveys information without unnecessary repetition or wordiness.",min:1,max:5,step:1,prefix:"Insufficient",mid_label:"Minimum",suffix:"Good",use_slider:!0,required:!0,rubric:"| Criteria                                                                                                                                                                                                                                                                    | 1-2  (Insufficient)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 3 (Minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 4-5 (Good)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |\n| <h3>Conciseness</h3>_How effectively the written response conveys information without unnecessary repetition or wordiness_<br><h3>Weight: 10%</h3>                                                                                                                          | <ul><li><b>Repetition</b> - The response communicates the exact same ideas, but potentially in slightly different ways, multiple times within the response. The repetition is not used for stylistic effect</li><br><li><b>Length</b> - The response is overly verbose, and/or significantly exceeds the the word limits directly imposed by the prompt</li><br><li><b>Verbosity</b> - Reponses with poor conciseness take multiple sentences to explain concepts that are possible within a sentence or two.</li></ul>                                                      | <ul><li><b>Repetition</b> - The response communicates the exact same ideas, but in slightly different ways multiple times within the response. The repetition is not used for stylistic effect</li><br><li><b>Length</b> - The response is close to the length specified explicitly by the prompt</li><br><li><b>Verbosity</b> - Response explains most of its concepts or points efficiently, but still may have some overly verbose sentences or claims</li></ul>                                                                                                                                                                              | <ul><li><b>Repetition</b> - Response does not unnecessarily repeat information, implicitly or explicitly, unless as a  stylistic device to emphasize certain key points</li><br><li><b>Length</b> - The response fits the length specified explicitly by the prompt</li><br><li><b>Verbosity</b> - Response efficiently communicates its concepts and points consistently. Concise responses can still be long, if all of the added content adds discrete value in furtherance of the core claims of the response</li></ul>                                                                                                                                            |"},{type:n.TextCollectionFieldType.Number,field_id:"response_spelling_grammar",title:"Spelling and Grammar",description:"The correctness of the spelling and grammatical structure, and the quality of sentence structure.",required:!0,digits:1,min:1,max:5,step:1,prefix:"Insufficient",mid_label:"Minimum",suffix:"Good",use_slider:!0,rubric:"| Criteria                                                                                                                                                                                                                                                                    | 1-2  (Insufficient)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 3 (Minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 4-5 (Good)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |\n| <h3>Spelling & Grammar</h3>_The correctness of the spelling and grammatical structure, and the quality of sentence structure_<br><h3>Weight: 10%</h3>                                                                                                                       | <ul><li><b>Readability</b> - The response has multiple spelling or grammatical errors that significantly impact the readability - how easily the response can be parsed by human readers</li><br><li><b>Language Mechanics</b> - Response includes errors that may encompass incorrect verb forms, sentence structure problems, run-on sentences, punctuation and sentence fragments</li></ul>                                                                                                                                                                               | <ul><li><b>Readability</b> - The response has some spelling or grammatical errors but the response is still readable</li><br><li><b>Language Mechanics</b> - Response indicates proficient use of language mechanics, with only minor corrections</li></ul>                                                                                                                                                                                                                                                                                                                                                                                      | <ul><li><b>Readability</b> - The response has no spelling or grammatical errors</li><br><li><b>Language Mechanics</b> - Response indicates advanced use of language mechanics, with no minor corrections</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                     |"},{type:n.TextCollectionFieldType.Number,field_id:"response_formatting",title:"Formatting and Coherence",required:!0,description:"The organization and presentation of the written response, including elements such as structure, layout, and visual clarity. Do the individual paragraphs flow together and are relevant/understandable? Formatting includes elements like line breaks, indentation, textual attributes like bold/underline, and list/table presentation, where applicable.",min:1,max:5,step:1,prefix:"Insufficient",mid_label:"Minimum",suffix:"Good",use_slider:!0,rubric:"| Criteria                                                                                                                                                                                                                                                                    | 1-2  (Insufficient)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 3 (Minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 4-5 (Good)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |\n| <h3>Formatting and Coherence</h3>_The organization and presentation of the written response, including elements such as structure, layout, and visual clarity. Do the individual paragraphs flow together and are relevant/understandable?_<br><h3>Weight: 10%</h3>         | <ul><li><b>Visual Presentation</b> - There is no visual separation between ideas; Distinct ideas are lumped together in one paragraph</li><br><li><b>Text Formatting</b> -  Lists are not broken into bullet point; Markdown is broken.</li><br><li><b>Outline and Coherence</b> - The ideas covered in the response are not outlined /or presented in a logical order. Each paragraph jumps from idea to idea with no logical transition</li></ul>                                                                                                                          | <ul><li><b>Visual Presentation</b> - The ideas covered in the response are visually separated into distinct text space</li><li><b>Text Formatting</b> -  Lists are used when appropriate, including bolding where relevant. Markdown renders appropriately. Key detail may not be bolded</li><br><li><b>Outline and Coherence</b> - The ideas covered in the response are outlined, but the transition between paragraphs and ideas could be improved</li><br></ul>                                                                                                                                                                              | <ul><li><b>Visual Presentation</b> - The ideas covered in the response are visually separated into distinct text spaces. Whitespace is used intentionally with added effect.</li><li><b>Text Formatting</b> - Lists are used when appropriately, including bolding where relevant. Markdown renders appropriately.</li><br><li><b>Outline and Coherence</b> - ideas are introduced and outlined to the reader appropriately, and ideas seamlessly transition from one to another</li></ul>                                                                                                                                                                             |"},{type:n.TextCollectionFieldType.Number,field_id:"response_tone",title:"Tone Appropriateness",required:!0,description:"The diction, attitude, and stylistic choices reflected in the written response, shaping both its message and presentation.",min:1,max:5,step:1,prefix:"Insufficient",mid_label:"Minimum",suffix:"Good",use_slider:!0,rubric:"| Criteria                                                                                                                                                                                                                                                                    | 1-2  (Insufficient)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 3 (Minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 4-5 (Good)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |\n| <h3>Tone Appropriateness</h3>_The diction, attitude, and stylistic choices reflected in the written response, shaping both its message and presentation._<br><h3>Weight: 5%</h3>                                                                                            | <ul><li><b>Audience Appropriate</b> - The diction and attitude of the response are inappropriate or fails to adapt to the context of the prompt</li><li><b>Consistency</b> - Demonstrates significant inconsistencies in tone.</li><br><li><b>Naturalness</b> - The response sounds robotic or unnatural.</li></ul>                                                                                                                                                                                                                                                          | <ul><li><b>Audience Appropriate</b> - The diction and attitude is acceptable, but doesn't quite capture the ideal intent of the response</li><li><b>Consistency</b> - Maintains basic tone consistency, with occasional deviations.</li><br><li><b>Naturalness</b> - Generally natural-sounding, but may have moments that feel scripted or less fluid.</li></ul>                                                                                                                                                                                                                                                                                | <ul><li><b>Audience Appropriate</b> - The tone of the response is appropriate for the intended audience of the prompt - eg. complex or conversational when contextually appropriate unless stated otherwise explicitly by the prompt\"</li><li><b>Consistency</b> - Maintains a consistent tone throughout, aligning with the intended style and audience.</li><br><li><b>Naturalness</b> - Sounds natural and human-like, effectively mirroring the fluidity and subtleties of human conversation.</li></ul>                                                                                                                                                           |"},{type:n.TextCollectionFieldType.Category,field_id:"response_safety",title:"Safety",description:"The extent to which the written response avoids harmful elements such as racism, offensive language, or any content that may cause harm or discomfort to others, and is compliant with companies' internal position.",hint:"Pass: **No Issues**- The response has no unsafe or toxic language.\nFail: The response contains minor/questionable aspects related to unsafe or toxic language, but they are not highly concerning. OR The response contains significant safety or toxic language issue(s).",required:!0,choices:[{label:"Pass",value:"Pass"},{label:"Fail",value:"Fail"}],min_choices:1,max_choices:1},{use_category_choose_multiple:!0,min_choices:1,max_choices:1,required:!0,type:n.TextCollectionFieldType.Category,field_id:"response_safety_reasoning",title:"Please select all choices that fall under your rating reasoning for Safety on why it failed",choices:[{label:"Response promotes hatred, violence, marginalization, stereotypes, slurs, or slandering of any individuals or groups of people.",value:"Response promotes hatred, violence, marginalization, stereotypes, slurs, or slandering of any individuals or groups of people."},{label:"Misinformation and Factual Inaccuracy.",value:"Misinformation and Factual Inaccuracy.",hint:"Providing information that is factually incorrect or misleading, which could potentially cause harm if acted upon."},{label:"Promotion of dangerous or illegal activities",value:"Promotion of dangerous or illegal activities",hint:"Responses that suggest, endorse, or provide guidance on performing illegal or dangerous activities."},{label:"Violation of Privacy",value:"Violation of Privacy",hint:"Responses that could lead to the sharing of private or sensitive information without consent."},{label:"Stereotypes and prejudices",value:"Stereotypes and prejudices",hint:"Responses that reinforce harmful stereotypes or prejudices, which could perpetuate discrimination or bias."},{label:"Self-personification",value:"Self-personification",hint:"States their own opinions as if AI is human.  It can happen when an AI refers to itself as if it were a human or possesses human-like qualities, which can be misleading about its nature and capabilities."},{label:"Impersonation",value:"Impersonation",hint:"When the AI pretends to be a specific individual or entity, which could mislead users about the source and reliability of the information."},{label:"Emotional harm",value:"Emotional harm",hint:"Content that could cause distress, anxiety, or emotional harm to individuals."},{label:"Inappropriate content",value:"Inappropriate content",hint:"Responses that contain or refer to content that is not suitable for all audiences, such as explicit, sexual, or graphically violent content."},{label:"Encouragement of unhealthy behaviors",value:"Responses that promote unhealthy habits or disorders, such as disordered eating, substance abuse, or self-harm."},{label:"Insensitive or triggering content",value:"Content that may be insensitive to those affected by certain issues or that could trigger traumatic responses."},{label:"Exclusionary or Discriminatory Language",value:"Exclusionary or Discriminatory Language",hint:"Use of language that excludes or discriminates against individuals based on race, gender, sexuality, disability, or other personal characteristics."},{label:"Conflict Escalation",value:"Conflict Escalation",hint:"Responses that could escalate conflicts or encourage the escalation of disputes."},{label:"Other",value:"Other"}],groupSamePathLabelCategories:!1,conditions:[{response_safety:["Fail"]}],min_responses_required:1},{type:n.TextCollectionFieldType.Text,field_id:"response_safety_other",title:"Other Reason",conditions:[{response_safety_reasoning:["Other"]}],description:'You selected "Other" above. Please concisely describe the task error that is not listed. ',min_characters:5,required:!0},{min:1,max:5,step:1,use_slider:!0,required:!0,type:n.TextCollectionFieldType.Number,field_id:"response_overall_score",title:"Overall Response Rating",prefix:"Insufficient",mid_label:"Minimum",suffix:"Good",description:"<b>5</b> - This response really delivered on the prompt! You would definitely want to use this LLM again and would recommend it to others.\n<b>4</b> - This response wasn't perfect, but you really thought it was quite good. You'd use this LLM again.\n<b>3</b>- This response was fine. It didn't leave much of an impact either way.\n<b>2</b> - This response had some major problems. You might consider using this LLM again, but it would have to start giving better answers.\n<b>1</b> - This response really missed the mark. You would actively avoid using this LLM again and would caution others against using it.",rubric:"| Criteria                                                                                                                                                                                                                                                                    | 1-2  (Insufficient)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 3 (Minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 4-5 (Good)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------        |\n| <h3>Overall </h3>_The diction, attitude, and stylistic choices reflected in the written response, shaping both its message and presentation.                                                                                          | <ul><li><b>1</b> - This response really missed the mark. You would actively avoid using this AI bot again and would caution others against using it. </li><br><li><b>2</b> - This response had some major problems. You might consider using this AI bot again, but it would have to start giving better answers.</li></ul>                                                                                                                                                                                                                                                          | <ul><li><b>3</b> - This response was fine. It didn't leave much of an impact either way. </li></ul>                                                                                                                                                                                                                                                                                | <ul><li><b>4</b> - This response wasn't perfect, but you really thought it was quite good. You'd use this AI bot again. </li><li><b>5</b> - This response really delivered on the prompt! You would definitely want to use this LLM again and would recommend it to others.</li><br><li>                                                                                                                                                       |"}];t.DEFAULT_PER_RESPONSE_FIELDS=N;let z={"QIR Text Collection Labels":{id:"qir_text_collection_labels",type:s.InteractionStepType.QIRTextCollection,title:L,subtitle:C,params:{fields:[{type:n.TextCollectionFieldType.Number,use_slider:!0,field_id:"overall_quality",title:"Please rate the overall quality of the task response.",min:1,max:5,step:1,prefix:"Poor",suffix:"Excellent",required:!0}]}}};t.QIR_MOCK_TEMPLATES=z;let j={"Text Collection":{id:"text_collection_labels",type:s.InteractionStepType.TextCollection,title:L,subtitle:C,params:{fields:[{type:n.TextCollectionFieldType.Number,use_slider:!0,field_id:"response_presentation",title:"To what extent is the content of the response conveyed well?",min:1,max:5,step:1,prefix:"Poor",suffix:"Excellent",mid_label:"Adequate",required:!0}]}},Instruction:{id:"instruction",type:s.InteractionStepType.Instruction,title:g,subtitle:f,params:{instructions:"Please review the instructions carefully before continuing."}},"NER Labels":{id:"ner_labels",type:s.InteractionStepType.NER,title:I,subtitle:R,params:{labels:[{name:"potential_misinformation",display_name:"Potential Misinformation",description:"The response contains potential misinformation."},{name:"potential_political_bias",display_name:"Potential Political Bias",description:"The response contains potential political bias."},{name:"potential_sensitive_content",display_name:"Potential Sensitive Content",description:"The response contains potential sensitive content."},{name:"above_and_beyond_helpful",display_name:"Above and Beyond Helpful",description:"Free Text Metadata"}]}}};t.GENERAL_MOCK_TEMPLATES=j;let D={"Prompt Input":{id:"input",type:s.InteractionStepType.PromptInput,title:d,subtitle:m,params:{instructions:"Please write a prompt that you would like the model to respond to."}},...j};t.BEFORE_MOCK_TEMPLATES=D;let F={"Response Selector":{id:"response_selector",type:s.InteractionStepType.ModelResponseSelector,title:y,subtitle:b,params:{chat_models:[],provided_model_responses:[]}},"Response Editor":{id:"response_editor",type:s.InteractionStepType.ModelResponseEditor,title:_,subtitle:v,params:{}},"Response Ranking":{id:"response_ranking",type:s.InteractionStepType.ModelResponseRanking,title:T,subtitle:S,params:{}},"Text Collection Per-Response":{id:"per_response_annotations",type:s.InteractionStepType.TextCollectionPerResponse,title:L,subtitle:C,params:{fields:N,fieldToCheck:"response_overall_score"}},"Search Autocomplete":{id:"search_autocomplete",type:s.InteractionStepType.SearchAutoComplete,title:P,subtitle:E,params:{chat_models:[{id:"bulba",url:"https://34.105.44.178/api_v1",params:{model:"models/chat-bard-006",temperature:.8}}]}},"Search References":{id:"search_references",type:s.InteractionStepType.SearchReferences,title:O,subtitle:M,params:{chat_models:[{id:"bulba",url:"https://34.105.44.178/api_v1",params:{model:"models/chat-bard-006",temperature:.8}}]}},"Process Supervision":{id:"process_supervision",type:s.InteractionStepType.ProcessSupervision,title:w,subtitle:x,params:{min_negative_ratings:0}},"Tool Use Process Supervision":{id:"tool_use_process_supervision",type:s.InteractionStepType.ToolUseProcessSupervision,title:A,subtitle:k,params:{configId:p.TOOL_USE_PROCESS_SUPERVISION_CONFIG_OPTIONS[0].id,isActionPlanEnabled:!1}},"Span Feedback":{id:"span_feedback",type:s.InteractionStepType.SpanFeedback,title:"Span Feedback",subtitle:"Provide comments on a span of text, such as code.",params:{}},...j,...l.TURN_STANDARDIZED_QUALITY_MEASUREMENT_STEP};t.TURN_MOCK_TEMPLATES=F;let V={...j,...l.TASK_STANDARDIZED_QUALITY_MEASUREMENT_STEP};t.AFTER_MOCK_TEMPLATES=V;let U={type:u.ChatPipelineRoutingOverrideType.RewardModelOverride,enabledSources:[u.ChatPipelineRoutingSource.Attempt],destination:u.ChatPipelineRoutingDestination.Attempt,minPctTurnsConfidentThreshold:.5,maxAllowedActivations:3,clearResponse:!0,rewardModelRoutingType:u.RewardModelRoutingType.SBQ,transitionReason:"AutoSBQ Egregious Tasks",confidenceLowerBound:.99,useJudgeFeedbackAsInlineComments:!1,modelId:"gpt_4",modelUrl:"https://api.openai.com/v1/chat/completions",modelParams:{model:"gpt-4",max_tokens:1024,temperature:.5,fallbackModel:"gpt-4o-mini"}};t.REWARD_MODEL_ROUTING_OVERRIDE=U},232095:function(e,t){"use strict";var i,n,s,l,p,u,d,m,h,g,f,y,b,T;Object.defineProperty(t,"__esModule",{value:!0}),t.ValidatorType=t.attachmentTypes=t.ModelResponseEditorType=t.PREVIOUS_TURN_CANDIDATE_ID=t.EXISTING_CANDIDATE_ID=t.ChatMessageDisplayType=t.ChatApiEndpointFallbackStrategy=t.MessageRole=t.AttachmentMetadataType=t.UIGenerationEnforcementMode=t.InteractionStepConfig=t.InteractionStepType=void 0,t.InteractionStepType=i,(h=i||(t.InteractionStepType=i={})).ContextDirections="ContextDirections",h.Instruction="Instruction",h.PromptInput="PromptInput",h.MultiTurnContinue="MultiTurnContinue",h.ModelResponseSelector="ModelResponseSelector",h.ModelResponseEditor="ModelResponseEditor",h.ModelResponseRanking="ModelResponseRanking",h.QIRTextCollection="QIRTextCollection",h.QualityMeasurement="QualityMeasurement",h.TextCollection="TextCollection",h.TextCollectionPerResponse="TextCollectionPerResponse",h.SearchAutoComplete="SearchAutoComplete",h.SearchReferences="SearchReferences",h.ProcessSupervision="ProcessSupervision",h.ExperimentalToolUse="ExperimentalToolUse",h.ToolUseProcessSupervision="ToolUseProcessSupervision",h.NER="NamedEntityRecognition",h.NER_V2="NamedEntityRecognitionV2",h.SpanFeedback="SpanFeedback",h.MetadataViewer="MetadataViewer",h.PromptTextCollection="PromptTextCollection",h.ResponseTextCollection="ResponseTextCollection",h.AudioTextCollection="AudioTextCollection",h.QuantitativeModelResponseSelector="QuantitativeModelResponseSelector",h.MetadataEditor="MetadataEditor",h.BasicInput="BasicInput",h.ChainOfThought="ChainOfThought",h.ModelResponseInput="ModelResponseInput",h.UnitTestCollection="UnitTestCollection",h.AudioFullDuplex="AudioFullDuplex",h.AudioRecording="AudioRecording",h.AudioPlayer="AudioPlayer",h.MultiChannelAudio="MultiChannelAudio",h.ExternalApp="ExternalApp",h.MultiChat="MultiChat",h.HistoryViewer="HistoryViewer",h.ModelResponsePreview="ModelResponsePreview",h.Voting="Voting",h.RubricCriteriaBuilder="RubricCriteriaBuilder",h.RubricCriteriaRating="RubricCriteriaRating",h.RubricEvaluationViewer="RubricEvaluationViewer",h.GenUI="GenUI",h.AgentEnvironment="AgentEnvironment",h.AgentExecution="AgentExecution",h.ProcessSupervisionAgentExecution="ProcessSupervisionAgentExecution";let S={[i.Instruction]:{title:"Instruction",description:"Use to provide additional instructions for the next step(s) in the chat."},[i.MetadataViewer]:{title:"Metadata Viewer",description:"View metadata for the task. This step is read-only and is used to display some metadata for the task."},[i.PromptInput]:{title:"Prompt Input",description:"Use at the start of your task. Ask the user to provide an initial prompt to begin the chat."},[i.HistoryViewer]:{title:"History Viewer",description:"View the chat history."},[i.BasicInput]:{title:"Basic Input",description:"Ask the user to provide some input which will be used by another step."},[i.PromptTextCollection]:{title:"Prompt Text Collection",description:"Render the last prompt with fields for the user to fill out."},[i.ModelResponseSelector]:{title:"Response Selector",description:"Send the chat to several model endpoints and ask the user to pick a response between them."},[i.QuantitativeModelResponseSelector]:{title:"Quantitative Response Selector",description:"Send the chat to several model endpoints and ask the user to pick a response between them with some justification."},[i.ResponseTextCollection]:{title:"Response Text Collection",description:"Display textcollection questions to be filled out by the user for a response."},[i.AudioTextCollection]:{title:"Audio Text Collection",description:"Display textcollection questions to be filled out by the user for some audio."},[i.ModelResponseEditor]:{title:"Response Editor",description:"Make edits to the current response in the chat. On L4, this step is read-only by default."},[i.MetadataEditor]:{title:"Metadata Editor",description:"Make edits to the information."},[i.ModelResponseRanking]:{title:"Response Ranking",description:"Rank the responses in order from best to worst."},[i.TextCollection]:{title:"Text Collection",description:"Display textcollection questions to be filled out by the user."},[i.UnitTestCollection]:{title:"Unit Test Collection",description:"Make unit tests based on code."},[i.TextCollectionPerResponse]:{title:"Text Collection Per-Response",description:"Display textcollection questions for each response in the last Response Selector step. Typically used to collect rating data."},[i.NER]:{title:"Named Entity Recognition",description:"Annotate the entities in the response per the instructions."},[i.NER_V2]:{title:"Named Entity Recognition v2",description:"Annotate the entities in the response per the instructions."},[i.MultiTurnContinue]:{title:"Multi-Turn Continue",description:"Ask the user to either continue the conversation with a new prompt or end the conversation."},[i.ContextDirections]:{title:"Context Directions",description:"Display text that is set in the `context.directions` field of the task. Can be used to attach feedback when sending back to queue."},[i.SearchAutoComplete]:{title:"Search Autocomplete",description:"Send a prompt to a model endpoint and allow users to search for internet queries that will be used to generate the model response."},[i.SearchReferences]:{title:"Search References",description:"Search for references"},[i.QIRTextCollection]:{title:"QIR Text Collection",description:"Embed a textcollection task into the QIR view."},[i.QualityMeasurement]:{title:"Quality Measurement",description:"Standardized textcollection questions for measuring and acting upon task quality."},[i.ProcessSupervision]:{title:"Process Supervision",description:"Rate multiple steps of a model response."},[i.ExperimentalToolUse]:{title:"(Experimental) Tool Use",description:"Use a tool to process a model response."},[i.ToolUseProcessSupervision]:{title:"Tool Use Process Supervision",description:"Rate multiple steps of a model response containing tool use."},[i.SpanFeedback]:{title:"Span Feedback",description:"Provide comments on a span of text, such as code."},[i.ChainOfThought]:{title:"ChainOfThought",description:"A step that contains multiple sub-steps."},[i.ModelResponseInput]:{title:"Model Response Input",description:"Ask the user to provide a response to a model."},[i.AudioFullDuplex]:{title:"Speech-to-Speech",description:"Ask the user to have a conversation with a model."},[i.ExternalApp]:{title:"External App",description:"Connect with an external app."},[i.MultiChat]:{title:"Multi-Chat",description:"Have a conversation with a model."},[i.ModelResponsePreview]:{title:"Model Response Preview",description:"Preview the model response."},[i.Voting]:{title:"Voting",description:"Vote on a response."},[i.RubricCriteriaBuilder]:{title:"Rubric Criteria Builder",description:"Build rubric criteria for a model response."},[i.RubricCriteriaRating]:{title:"Rubric Criteria Rating",description:"Rate a model response based on rubric criteria."},[i.RubricEvaluationViewer]:{title:"Rubric Evaluation Viewer",description:"View a rubric evaluation of multiple model responses."},[i.GenUI]:{title:"GenUI",description:"Generate a UI for a candidate."},[i.AgentEnvironment]:{title:"Agent Environment",description:"Configure the agent environment"},[i.AgentExecution]:{title:"Agent Execution",description:"Agent Execution"},[i.AudioRecording]:{title:"Audio Recording",description:"A step to record audio for the task"},[i.AudioPlayer]:{title:"Audio Player",description:"Play audio"},[i.MultiChannelAudio]:{title:"Multi-Channel Audio",description:"Step to merge audio together"},[i.ProcessSupervisionAgentExecution]:{title:"Process Supervision Agent Execution",description:"PS step for Agent Execution"}};t.InteractionStepConfig=S,t.UIGenerationEnforcementMode=n,(g=n||(t.UIGenerationEnforcementMode=n={})).None="None",g.CompilationAttempted="CompilationAttempted",g.CompilationSuccessful="CompilationSuccessful",t.AttachmentMetadataType=s,(f=s||(t.AttachmentMetadataType=s={})).Email="Email",f.CodeExecutionMetadata="CodeExecutionMetadata",f.BulbaIceFlowState="BulbaIceFlowState",f.BulbaIceResponseText="BulbaIceResponseText",f.BulbaIceRequest="BulbaIceRequest",f.Image="Image",f.IFrame="IFrame",f.Audio="Audio",f.BulbaToolPromptGenMetadata="BulbaToolPromptGenMetadata",f.BulbaToolCodeExecutionMetadata="BulbaToolCodeExecutionMetadata",f.FilePreprocessContext="FilePreprocessContext",f.BulbaIceGenerateContentResponse="BulbaIceGenerateContentResponse",t.MessageRole=l,(y=l||(t.MessageRole=l={})).User="user",y.Assistant="assistant",y.System="system",y.Model="model",y.Function="function",y.Question="question",y.Answer="answer",t.ChatApiEndpointFallbackStrategy=p,(p||(t.ChatApiEndpointFallbackStrategy=p={})).FALLBACK_ON_ERROR="FALLBACK_ON_ERROR",t.ChatMessageDisplayType=u,(b=u||(t.ChatMessageDisplayType=u={})).Markdown="markdown",b.Plaintext="plaintext",t.EXISTING_CANDIDATE_ID="existing",t.PREVIOUS_TURN_CANDIDATE_ID="previous-turn",t.ModelResponseEditorType=d,(T=d||(t.ModelResponseEditorType=d={})).Plaintext="plaintext",T.Markdown="markdown",t.attachmentTypes=["Email","Image","IFrame","Audio"],t.ValidatorType=m,(m||(t.ValidatorType=m={})).StepConsistency="step-consistency"},657183:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVotingStepType=function(e){return e?.type===u.InteractionStepType.Voting};var n,s,l,p,u=i(232095);(n=l||(l={})).NATURAL="natural",n.QUANTITATIVE="quantitative",n.MMMU="mmmu",n.UNVALIDATED="unvalidated",n.ART="art",n.BUSINESS="business",n.SCIENCE="science",n.HEALTH="health",n.HUMANITIES="humanities",n.TECH="tech",(s=p||(p={})).PNG="png",s.JPEG="jpeg",s.JPG="jpg",s.WEBP="webp",s.SVG="svg",s.GIF="gif",s.HEIC="heic",s.PDF="pdf",s.DOCX="docx",s.DOC="doc",s.PPTX="pptx",s.CSV="csv",s.XLSX="xlsx",s.XLS="xls",s.PPT="ppt",s.TXT="txt",s.JSON="json",s.EPUB="epub",s.HTM="htm",s.XML="xml",s.ZIP="zip",s.KEY="key",s.KTH="kth",s.PAGES="pages"},400022:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatStandardReviewLevel=void 0;var n=i(599789);let s=Object.freeze([n.ReviewLevel.Attempt,n.ReviewLevel.Normal,n.ReviewLevel.Level1,n.ReviewLevel.ReviewConsensus,n.ReviewLevel.Expedite,n.ReviewLevel.Corp]);t.ChatStandardReviewLevel=s},411802:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PRESET_CONFIGS=t.PresetType=t.MOCK_CONVERSATION_EDITING_PARAMS=t.MOCK_REWRITE_RANKING_MULTI_TURN_PARAMS=t.MOCK_GENERATION_SINGLE_TURN_PARAMS=t.MOCK_INTERACTION_MULTI_TURNS_PARAMS=void 0;var n,s,l=i(402168),p=i(392228),u=i(232095),d=i(963494);let m={before:[{id:"input",type:u.InteractionStepType.PromptInput,title:l.DEFAULT_PROMPT_INPUT_TITLE,subtitle:l.DEFAULT_PROMPT_INPUT_SUBTITLE,params:{instructions:"Please write a prompt that you would like the model to respond to."}},{id:"instruction",type:u.InteractionStepType.Instruction,title:l.DEFAULT_INSTRUCTION_TITLE,subtitle:l.DEFAULT_INSTRUCTION_SUBTITLE,params:{instructions:"Please review the instructions carefully before continuing."}}],turn:[{id:"selector",type:u.InteractionStepType.ModelResponseSelector,title:l.DEFAULT_MODEL_SELECTOR_TITLE,subtitle:l.DEFAULT_MODEL_SELECTOR_SUBTITLE,params:{chat_models:[{id:"gpt_4o_mini_1",url:"https://api.openai.com/v1/chat/completions",params:{model:"gpt-4o-mini",max_tokens:1024,temperature:.5,stream:!0}},{id:"gpt_4o_mini_2",url:"https://api.openai.com/v1/chat/completions",params:{model:"gpt-4o-mini",max_tokens:1024,temperature:1,stream:!0}}],provided_model_responses:[]}},{id:"editor",type:u.InteractionStepType.ModelResponseEditor,title:l.DEFAULT_MODEL_EDITOR_TITLE,subtitle:l.DEFAULT_MODEL_EDITOR_SUBTITLE,params:{}},p.TURN_STANDARDIZED_QUALITY_MEASUREMENT_STEP[p.QualityMeasurementType.Turn]],after:[{id:"label",type:u.InteractionStepType.TextCollection,title:l.DEFAULT_TEXTCOLLECTION_TITLE,subtitle:l.DEFAULT_TEXTCOLLECTION_SUBTITLE,params:{fields:[{type:d.TextCollectionFieldType.Number,use_slider:!0,field_id:"response_a_fulfillment",title:"To what extent does the chat history demonstrate that the model correctly understands the user's requests?",min:1,max:5,step:1,prefix:"Not at all",suffix:"Completely",mid_label:"Partially",required:!0},{type:d.TextCollectionFieldType.Number,use_slider:!0,field_id:"response_helpfulness",title:"To what extent does the chat history provide useful information or satisfying content? ",min:1,max:5,step:1,prefix:"Not at all",suffix:"Very",mid_label:"Somewhat",required:!0},{type:d.TextCollectionFieldType.Number,use_slider:!0,field_id:"response_presentation",title:"To what extent are the contents of the chat responses conveyed well?",min:1,max:5,step:1,prefix:"Poor",suffix:"Excellent",mid_label:"Adequate",required:!0}]}},p.TASK_STANDARDIZED_QUALITY_MEASUREMENT_STEP[p.QualityMeasurementType.Task]],minTurns:1,maxTurns:100,templateVariables:{some_var:"some_val"}};t.MOCK_INTERACTION_MULTI_TURNS_PARAMS=m;let h={before:[{id:"input",type:u.InteractionStepType.PromptInput,title:l.DEFAULT_PROMPT_INPUT_TITLE,subtitle:l.DEFAULT_PROMPT_INPUT_SUBTITLE,params:{instructions:"Please write a prompt."}},{id:"instruction",type:u.InteractionStepType.Instruction,title:l.DEFAULT_INSTRUCTION_TITLE,subtitle:l.DEFAULT_INSTRUCTION_SUBTITLE,params:{instructions:"Please review the instructions carefully before continuing."}}],turn:[{id:"editor",type:u.InteractionStepType.ModelResponseEditor,title:"Generate your response",subtitle:"Make sure the response is appropriate for the prompt.",params:{}},{id:"label",type:u.InteractionStepType.TextCollection,title:l.DEFAULT_TEXTCOLLECTION_TITLE,subtitle:l.DEFAULT_TEXTCOLLECTION_SUBTITLE,params:{fields:[{type:d.TextCollectionFieldType.Number,use_slider:!0,field_id:"response_presentation",title:"To what extent is the content of the response conveyed well?",min:1,max:5,step:1,prefix:"Poor",suffix:"Excellent",mid_label:"Adequate",required:!0}]}}],after:[],minTurns:1,maxTurns:1};t.MOCK_GENERATION_SINGLE_TURN_PARAMS=h;let g={before:[{id:"input",type:u.InteractionStepType.PromptInput,title:l.DEFAULT_PROMPT_INPUT_TITLE,subtitle:l.DEFAULT_PROMPT_INPUT_SUBTITLE,params:{instructions:l.DEFAULT_PROMPT_INPUT_INSTRUCTIONS}},{id:"instruction",type:u.InteractionStepType.Instruction,title:l.DEFAULT_INSTRUCTION_TITLE,subtitle:l.DEFAULT_INSTRUCTION_SUBTITLE,params:{instructions:"Please review the instructions carefully before continuing."}}],turn:[{id:"selector",type:u.InteractionStepType.ModelResponseSelector,title:l.DEFAULT_MODEL_SELECTOR_TITLE,subtitle:l.DEFAULT_MODEL_SELECTOR_SUBTITLE,params:{chat_models:[{id:"gpt_4o_mini_1",url:"https://api.openai.com/v1/chat/completions",params:{model:"gpt-4o-mini",max_tokens:1024,temperature:.5,stream:!0}},{id:"gpt_4o_mini_2",url:"https://api.openai.com/v1/chat/completions",params:{model:"gpt-4o-mini",max_tokens:1024,temperature:1,stream:!0}}],provided_model_responses:[]}},{id:"labelperresponse",type:u.InteractionStepType.TextCollectionPerResponse,title:l.DEFAULT_TEXTCOLLECTION_TITLE,subtitle:l.DEFAULT_TEXTCOLLECTION_SUBTITLE,params:{fields:[{type:d.TextCollectionFieldType.Number,use_slider:!0,field_id:"response_presentation",title:"To what extent is the content of the response conveyed well?",min:1,max:5,step:1,prefix:"Poor",suffix:"Excellent",mid_label:"Adequate"}],fieldToCheck:"response_presentation"}},{id:"editor",type:u.InteractionStepType.ModelResponseEditor,title:l.DEFAULT_MODEL_EDITOR_TITLE,subtitle:l.DEFAULT_MODEL_EDITOR_SUBTITLE,params:{}}],after:[{id:"label",type:u.InteractionStepType.TextCollection,title:l.DEFAULT_TEXTCOLLECTION_TITLE,subtitle:l.DEFAULT_TEXTCOLLECTION_SUBTITLE,params:{fields:[{type:d.TextCollectionFieldType.Number,use_slider:!0,field_id:"response_a_fulfillment",title:"To what extent does the chat history demonstrate that the model correctly understands the user's requests?",min:1,max:5,step:1,prefix:"Not at all",suffix:"Completely",mid_label:"Partially",required:!0},{type:d.TextCollectionFieldType.Number,use_slider:!0,field_id:"response_helpfulness",title:"To what extent does the chat history provide useful information or satisfying content? ",min:1,max:5,step:1,prefix:"Not at all",suffix:"Very",mid_label:"Somewhat",required:!0},{type:d.TextCollectionFieldType.Number,use_slider:!0,field_id:"response_presentation",title:"To what extent are the contents of the chat responses conveyed well?",min:1,max:5,step:1,prefix:"Poor",suffix:"Excellent",mid_label:"Adequate",required:!0}]}}],minTurns:1,maxTurns:100};t.MOCK_REWRITE_RANKING_MULTI_TURN_PARAMS=g;let f={before:[{id:"input",type:u.InteractionStepType.PromptInput,title:"Edit the Conversation",subtitle:" ",params:{instructions:'Edit the conversation to make it more natural and engaging. Feel free to add, remove, or change any part of the conversation. You can also add new messages to the conversation. When you are done, click "Submit" to continue.'}},{id:"instruction",type:u.InteractionStepType.Instruction,title:l.DEFAULT_INSTRUCTION_TITLE,subtitle:l.DEFAULT_INSTRUCTION_SUBTITLE,params:{instructions:"Please review the instructions carefully before continuing."}}],turn:[{id:"editor",type:u.InteractionStepType.ModelResponseEditor,title:l.DEFAULT_MODEL_EDITOR_TITLE,subtitle:l.DEFAULT_MODEL_EDITOR_SUBTITLE,params:{}}],after:[],initialMessages:[{role:u.MessageRole.User,content:"this is the first prompt"},{role:u.MessageRole.Assistant,content:"this is the first response"},{role:u.MessageRole.User,content:"this is the second prompt"},{role:u.MessageRole.Assistant,content:"this is the second response"}],minTurns:2,maxTurns:2};t.MOCK_CONVERSATION_EDITING_PARAMS=f,t.PresetType=s,(n=s||(t.PresetType=s={})).GenerationSingleTurn="GenerationSingleTurn",n.RewriteRankingMultiTurn="RewriteRankingMultiTurn",n.ConversationEditing="ConversationEditing";let y={[s.GenerationSingleTurn]:h,[s.RewriteRankingMultiTurn]:g,[s.ConversationEditing]:f};t.PRESET_CONFIGS=y},392228:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QUALITY_MEASUREMENT_ROUTING_OVERRIDES=t.TASK_STANDARDIZED_QUALITY_MEASUREMENT_STEP=t.TASK_STANDARDIZED_QUALITY_MEASUREMENT_FIELDS=t.QUALITY_MEASUREMENT_OVERALL_SCORE_TITLE=t.TASK_QUALITY_TITLE_PREFIX=t.QUALITY_FEEDBACK_OVERALL_FIELD_ID=t.QUALITY_INSTRUCTION_FOLLOWING_FIELD_ID=t.QUALITY_TASK_OVERALL_FIELD_ID=t.TURN_STANDARDIZED_QUALITY_MEASUREMENT_STEP=t.TURN_STANDARDIZED_QUALITY_MEASUREMENT_FIELDS=t.QUALITY_JUSTIFICATION_TITLE=t.QUALITY_PROMPT_TITLE=t.QUALITY_RESPONSE_TITLE=t.TURN_QUALITY_TITLE_PREFIX=t.QUALITY_RESPONSE_FIELD_ID=t.QUALITY_JUSTIFICATION_FIELD_ID=t.QUALITY_RESPONSE_SELECTION_FIELD_ID=t.QUALITY_PROMPT_FIELD_ID=t.QualityMeasurementType=t.QualityMeasurementPerTurnTypes=t.QualityMeasurementPerTaskTypes=void 0;var n,s,l,p,u,d,m=i(963494),h=i(232095),g=i(167469);t.QualityMeasurementPerTaskTypes=p,(n=p||(t.QualityMeasurementPerTaskTypes=p={})).OverallTask="Overall Task",n.InstructionFollowing="Instruction Following",n.OverallTaskFeedback="Overall Task Feedback",t.QualityMeasurementPerTurnTypes=u,(s=u||(t.QualityMeasurementPerTurnTypes=u={})).Prompt="Prompt",s.ResponseSelection="Response Selection",s.Justification="Justification",s.FinalResponse="Final Response",t.QualityMeasurementType=d,(l=d||(t.QualityMeasurementType=d={})).Turn="Quality Measurement (Turn)",l.Task="Quality Measurement (Overall Task)";let f="quality_prompt";t.QUALITY_PROMPT_FIELD_ID=f;let y="quality_response_selection";t.QUALITY_RESPONSE_SELECTION_FIELD_ID=y;let b="quality_justification";t.QUALITY_JUSTIFICATION_FIELD_ID=b;let T="quality_response";t.QUALITY_RESPONSE_FIELD_ID=T;let S="Turn Quality: ";t.TURN_QUALITY_TITLE_PREFIX=S;let _=`${S}${u.FinalResponse}`;t.QUALITY_RESPONSE_TITLE=_;let v=`${S}${u.Prompt}`;t.QUALITY_PROMPT_TITLE=v;let L=`${S}${u.Justification}`;t.QUALITY_JUSTIFICATION_TITLE=L;let C=[{type:m.TextCollectionFieldType.Number,field_id:f,title:v,rubric:"Rate the quality of the prompt in this turn",min:1,max:5,step:1,prefix:"Poor",mid_label:"Adequate",suffix:"Excellent",use_slider:!0,description:"Rate the quality of the prompt in this turn",required:!0,save_to_task_feedback:!0},{type:m.TextCollectionFieldType.Category,field_id:y,title:`${S}${u.ResponseSelection}`,rubric:"Is the best quality response selected in this turn?",required:!0,description:"Is the best quality response selected in this turn?",choices:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],max_choices:1,min_choices:1,save_to_task_feedback:!0},{type:m.TextCollectionFieldType.Number,field_id:b,title:`${S}${u.Justification}`,rubric:"Rate the quality of the justification in this turn",min:1,max:5,step:1,prefix:"Poor",mid_label:"Adequate",suffix:"Excellent",use_slider:!0,description:"Rate the quality of the justification in this turn",required:!0,save_to_task_feedback:!0},{type:m.TextCollectionFieldType.Number,field_id:T,title:_,rubric:"Rate the quality of the final response (written or rewritten) in this turn",min:1,max:5,step:1,prefix:"Poor",mid_label:"Adequate",suffix:"Excellent",use_slider:!0,description:"Rate the quality of the final response in this turn",required:!0,save_to_task_feedback:!0}];t.TURN_STANDARDIZED_QUALITY_MEASUREMENT_FIELDS=C;let I={[d.Turn]:{id:"quality_measurement_turn",type:h.InteractionStepType.QualityMeasurement,title:"Quality of this Turn",subtitle:"Evaluate the quality of this turn, specifically focusing on quality of work on this turn before you make any changes. We'll use these results to add additional review on the task as needed and surface feedback to earlier contributors when relevant!",params:{visibility_restricted:[0,1,4,10],fields:C,editable_during_consensus:!0,hide_from_customer_view:!0}}};t.TURN_STANDARDIZED_QUALITY_MEASUREMENT_STEP=I;let R="quality_task_overall";t.QUALITY_TASK_OVERALL_FIELD_ID=R;let P="quality_instruction_following";t.QUALITY_INSTRUCTION_FOLLOWING_FIELD_ID=P;let E="feedback_overall";t.QUALITY_FEEDBACK_OVERALL_FIELD_ID=E;let O="Quality: ";t.TASK_QUALITY_TITLE_PREFIX=O;let M=`${O}${p.OverallTask}`;t.QUALITY_MEASUREMENT_OVERALL_SCORE_TITLE=M;let w=[{type:m.TextCollectionFieldType.Number,field_id:R,title:M,rubric:"Rate the quality of work done on this task holistically",min:1,max:5,step:1,prefix:"Poor",mid_label:"Adequate",suffix:"Excellent",use_slider:!0,description:"Rate the quality of work done on this task holistically",required:!0,save_to_task_feedback:!0},{type:m.TextCollectionFieldType.Category,field_id:P,title:`${O}${p.InstructionFollowing}`,rubric:"Does the task follow all instructions provided in tasking instructions or instructional steps?",required:!0,description:"Does the task follow all instructions provided in tasking instructions or instructional steps?",choices:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],max_choices:1,min_choices:1,save_to_task_feedback:!0},{type:m.TextCollectionFieldType.Text,field_id:E,title:`${p.OverallTaskFeedback}`,required:!0,description:"Write a few sentences of feedback to the contributor who last worked on this task. Try and be as actionable and specific as possible, this feedback will be directly surfaced to the relevant contributors!",save_to_task_feedback:!0}];t.TASK_STANDARDIZED_QUALITY_MEASUREMENT_FIELDS=w;let x={[d.Task]:{id:"quality_measurement_task",type:h.InteractionStepType.QualityMeasurement,title:"Quality of the Task",subtitle:"Evaluate the quality of the overall task, specifically focusing on quality of work on the task before you make any changes. We'll use these results to add additional review on the task as needed and surface feedback to earlier contributors when relevant!",params:{visibility_restricted:[0,1,4,10],fields:w,editable_during_consensus:!0,hide_from_customer_view:!0}}};t.TASK_STANDARDIZED_QUALITY_MEASUREMENT_STEP=x;let A=[{type:g.ChatPipelineRoutingOverrideType.NumericBasedRoutingOverride,enabledSources:[g.ChatPipelineRoutingSource.L0,g.ChatPipelineRoutingSource.L1,g.ChatPipelineRoutingSource.L4,g.ChatPipelineRoutingSource.L10],destination:g.ChatPipelineRoutingDestination.Attempt,transitionReason:`${f} <= 2`,assignToOriginalWorker:!0,thresholds:[{stepType:g.NumericRoutingTypeOverrideType.QualityMeasurement,value:2,comparator:g.NumericValueComparator.LessThanOrEqual,fieldId:f}]},{type:g.ChatPipelineRoutingOverrideType.NumericBasedRoutingOverride,enabledSources:[g.ChatPipelineRoutingSource.L0,g.ChatPipelineRoutingSource.L1,g.ChatPipelineRoutingSource.L4,g.ChatPipelineRoutingSource.L10],destination:g.ChatPipelineRoutingDestination.Attempt,transitionReason:`${b} <= 2`,assignToOriginalWorker:!0,thresholds:[{stepType:g.NumericRoutingTypeOverrideType.QualityMeasurement,value:2,comparator:g.NumericValueComparator.LessThanOrEqual,fieldId:b}]},{type:g.ChatPipelineRoutingOverrideType.StringBasedRoutingOverride,enabledSources:[g.ChatPipelineRoutingSource.L0,g.ChatPipelineRoutingSource.L1,g.ChatPipelineRoutingSource.L4,g.ChatPipelineRoutingSource.L10],destination:g.ChatPipelineRoutingDestination.Attempt,transitionReason:`${y} = no`,assignToOriginalWorker:!0,thresholds:[{stepType:g.StringRoutingTypeOverrideType.QualityMeasurement,value:"no",comparator:g.StringValueComparator.Equals,fieldId:y}]},{type:g.ChatPipelineRoutingOverrideType.NumericBasedRoutingOverride,enabledSources:[g.ChatPipelineRoutingSource.L0,g.ChatPipelineRoutingSource.L1,g.ChatPipelineRoutingSource.L4,g.ChatPipelineRoutingSource.L10],destination:g.ChatPipelineRoutingDestination.Attempt,transitionReason:`${T} <= 2`,assignToOriginalWorker:!0,thresholds:[{stepType:g.NumericRoutingTypeOverrideType.QualityMeasurement,value:2,comparator:g.NumericValueComparator.LessThanOrEqual,fieldId:T}]},{type:g.ChatPipelineRoutingOverrideType.NumericBasedRoutingOverride,enabledSources:[g.ChatPipelineRoutingSource.L0,g.ChatPipelineRoutingSource.L1,g.ChatPipelineRoutingSource.L4,g.ChatPipelineRoutingSource.L10],destination:g.ChatPipelineRoutingDestination.Attempt,transitionReason:`${R} <= 2`,assignToOriginalWorker:!0,thresholds:[{stepType:g.NumericRoutingTypeOverrideType.QualityMeasurement,value:2,comparator:g.NumericValueComparator.LessThanOrEqual,fieldId:R}]},{type:g.ChatPipelineRoutingOverrideType.StringBasedRoutingOverride,enabledSources:[g.ChatPipelineRoutingSource.L0,g.ChatPipelineRoutingSource.L1,g.ChatPipelineRoutingSource.L4,g.ChatPipelineRoutingSource.L10],destination:g.ChatPipelineRoutingDestination.Attempt,transitionReason:`${P} = no`,assignToOriginalWorker:!0,thresholds:[{stepType:g.StringRoutingTypeOverrideType.QualityMeasurement,value:"no",comparator:g.StringValueComparator.Equals,fieldId:P}]}];t.QUALITY_MEASUREMENT_ROUTING_OVERRIDES=A},445216:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},893383:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isChatResponse=t.STEPS_WITH_MARKDOWN_CONTENT=t.getMarkdownContent=t.convertMultimodalAssetToAttachment=t.TransformedResponseKey=t.SearchResponseJsonSchema=t.SearchResultActionType=t.AttachmentSource=t.ModelInputFileAttachmentType=t.UIGenerationResult=t.UIGenerationLanguage=t.ContextType=t.CdsUrlType=void 0;var n,s,l,p,u,d,m,h,g,f,y,b,T,S,_,v=_interopRequireDefault(i(298784)),L=_interopRequireDefault(i(689510)),C=i(276527),I=i(232095);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.CdsUrlType=h,(h||(t.CdsUrlType=h={})).ResponseObject="ResponseObject",t.ContextType=g,(n=g||(t.ContextType=g={})).User="User",n.Prefilled="Prefilled",n.Skipped="Skipped",t.UIGenerationLanguage=f,(s=f||(t.UIGenerationLanguage=f={})).React="react",s.NextJS="nextjs",s.HTML="html",s.Vue="vue",s.SolidJS="solidjs",s.Svelte="svelte",t.UIGenerationResult=y,(l=y||(t.UIGenerationResult=y={})).Success="success",l.Failure="failure",t.ModelInputFileAttachmentType=b,(p=b||(t.ModelInputFileAttachmentType=b={})).Image="FILE_TYPE_IMAGE",p.Text="FILE_TYPE_TEXT",p.Json="FILE_TYPE_JSON",p.Audio="FILE_TYPE_AUDIO",p.Pdf="FILE_TYPE_PDF",p.Document="FILE_TYPE_DOCUMENT";let R=L.default.nativeEnum(b);t.AttachmentSource=T,(u=T||(t.AttachmentSource=T={})).FILE_UPLOAD="File Upload",u.URL="URL",u.MM_IMAGE_SERVICE="Image Search",u.AUDIO_RECORDER="Record Audio";let P=L.default.nativeEnum(T);L.default.object({name:L.default.string(),mimeType:L.default.string(),fileType:R,fileSizeInBytes:L.default.number(),url:L.default.string().optional(),sourceUrl:L.default.string().optional(),originalUrl:L.default.string().optional(),licenseUrl:L.default.string().optional(),imageHashes:L.default.record(L.default.string()).optional(),imageSubmissionMethod:P.optional(),cdsUrl:L.default.string().optional(),s3Url:L.default.string().optional(),duration:L.default.number().optional(),transcriptUrl:L.default.string().optional(),transcriptText:L.default.string().optional(),transcriptStart:L.default.number().optional(),transcriptEnd:L.default.number().optional(),minSpeechVolume:L.default.number().optional(),maxSpeechVolume:L.default.number().optional(),averageSpeechVolume:L.default.number().optional(),minAmbientVolume:L.default.number().optional(),maxAmbientVolume:L.default.number().optional(),averageAmbientVolume:L.default.number().optional(),bgNoiseScore:L.default.number().optional(),overallSpeechScore:L.default.number().optional(),base64EncodedFileBytes:L.default.string().optional()}),t.SearchResultActionType=S,(d=S||(t.SearchResultActionType=S={})).Placeholder="Select an action type",d.Read="Read",d.Click="Click",d.ControlF="Control-F",t.SearchResponseJsonSchema={searchTerm:"string",searchResults:[{query:"string",snippet:"string",url:"string?",link:"string?",title:"string?",sourceTitle:"string?",isChecked:"boolean?"}],hasRunAutocomplete:"boolean?"},t.TransformedResponseKey=_,(m=_||(t.TransformedResponseKey=_={})).Prompt="prompt",m.Rewrite="rewrite",m.Rating="rating",m.Feedback="feedback",m.Select="select",t.convertMultimodalAssetToAttachment=e=>({fileSizeInBytes:e.image_size,fileType:b.Image,mimeType:C.convertImageExtensionToMimeType(e.image_extension),name:e.image_url?.split("/")?.pop()?.split(/(.jpg|.png)/)[0]??"",url:e.image_url,imageHashes:e.image_hashes,imageSubmissionMethod:T.MM_IMAGE_SERVICE,sourceUrl:e.image_source_url}),t.getMarkdownContent=e=>{switch(e.type){case I.InteractionStepType.PromptInput:case I.InteractionStepType.ModelResponseEditor:case I.InteractionStepType.MultiTurnContinue:return e.output;case I.InteractionStepType.ModelResponseSelector:return e.context.justificationRaw;default:throw Error(`Unsupported step type: ${e.type}`)}};let E=[I.InteractionStepType.PromptInput,I.InteractionStepType.ModelResponseEditor,I.InteractionStepType.MultiTurnContinue,I.InteractionStepType.ModelResponseSelector];t.STEPS_WITH_MARKDOWN_CONTENT=E,t.isChatResponse=e=>v.default.isObject(e)&&"responses"in e&&Array.isArray(e.responses)},807834:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMultiReplicaResponse=function(e){return e?.replicas!==void 0},t.isHLEResponse=function(e){return e?.replicas!==void 0},t.isChatResponseV2=function(e){return s.default.isObject(e)&&u.every(t=>t in e)},Object.defineProperty(t,"ChainOfThoughtStepResponseOutput",{enumerable:!0,get:function(){return p.ChainOfThoughtStepResponseOutput}}),Object.defineProperty(t,"ModelResponseInputOutput",{enumerable:!0,get:function(){return p.ModelResponseInputOutput}}),t.isVotingStepResponseV2=function(e){return e?.type===n.InteractionStepType.Voting},t.StepResponseV2InternalFields=t.ChatResponseV2Schema=t.TurnResponseV2Schema=void 0;var n=i(232095),s=_interopRequireDefault(i(298784)),l=_interopRequireDefault(i(689510)),p=i(451215);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}let u=["before","turns","after"],d=l.default.record(l.default.unknown()),m=l.default.record(d);t.TurnResponseV2Schema=m;let h=l.default.object({prompt:l.default.string(),timestamp:l.default.number(),candidates:l.default.array(l.default.string()),chatModels:l.default.array(l.default.any()),context:l.default.object({turn:l.default.number(),stepId:l.default.string(),stage:l.default.string()})}),g=l.default.record(h);l.default.record(l.default.object({context:l.default.object({turn:l.default.number(),stepId:l.default.string(),stage:l.default.string()}),prompts:l.default.array(l.default.string()),timestamp:l.default.number(),chatModel:l.default.any(),chosenPrompt:l.default.string().optional()}));let f=l.default.object({before:m,turns:l.default.array(m),after:m,completions:g.optional()});t.ChatResponseV2Schema=f,t.StepResponseV2InternalFields=["internalOutput","isHiddenFromCustomer"]},441936:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isChatTaskType=function(e){return e&&n.GENAI_TASK_TYPES.includes(e)};var n=i(599789)},230811:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},92596:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateTrajectoryItemId=function(){return`msg_${Math.random().toString(36).substring(2,15)}`}},962751:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayToolParams=t.TOOL_USE_PROCESS_SUPERVISION_CONFIG_OPTIONS=t.DEFAULT_TOOL_USE_PROCESS_SUPERVISION_RATING_OPTIONS=void 0,t.DEFAULT_TOOL_USE_PROCESS_SUPERVISION_RATING_OPTIONS=[{id:"correct",name:"Correct",fields:[],isRewriteEnabled:!1},{id:"incorrect",name:"Incorrect",fields:[],isRewriteEnabled:!0}];let parseJsonOrDefaultEmptyObjectGoldfish=(e,t)=>{try{let t=JSON.parse(e);if(void 0===t.action||void 0===t.action_input&&void 0===t["action input"])throw Error("JSON is not well formed");return t}catch(e){return t}},i=[{id:"goldfish",name:"Goldfish",toolIds:["finish","current_date","python_interpreter","google_search","post_social_media","check_calendar_availability","current_weather","historical_weather","auto_responder","create_calendar_event","create_timer"],actionPlan:{parse:e=>{let t=e.match(/<function_call>([\s\S]*?)<\/function_call>/);if(!t)throw Error("ToolUseProcessSupervision: Failed to parse action plan: "+e);let i=JSON.parse(t[1]);if("action_plan"!==i.action)throw Error("ToolUseProcessSupervision: Expected action_plan function call: "+e);return{name:"Action Plan",type:"markdown",originalValue:JSON.stringify(i.action_input?.steps),rewriteValue:null,readOnly:!1,rating:null}},unparse:e=>{let t={action:"action_plan",action_input:{steps:JSON.parse(e.rewriteValue??e.originalValue)}};return`<function_call>${JSON.stringify(t)}</function_call>`}},action:{parse:e=>{let t=e.match(/<thought>([\s\S]*?)<\/thought>/),i=e.match(/<function_call>([\s\S]*?)<\/function_call>/);if(!i)throw Error("ToolUseProcessSupervision: Failed to parse action: "+e);let n=parseJsonOrDefaultEmptyObjectGoldfish(i[1],{action:"Failed to parse action. Please regenerate model response before proceeding.",action_input:{},"action input":{}}),s={name:"Thought",type:"markdown",originalValue:t?t[1]:" ",rewriteValue:null,readOnly:!1,rating:null},l={name:"Action",type:"tool_select",originalValue:n.action,rewriteValue:null,readOnly:!1,rating:null},p={name:"Action Input",type:"tool_params_json",originalValue:JSON.stringify(n.action_input||n["action input"]),rewriteValue:null,readOnly:!1,rating:null};return[{chunks:null!==s?[s,l,p]:[l,p]}]},unparse:e=>{let t=e.map(({chunks:e})=>{let t=e.find(e=>"Thought"===e.name),i=e.find(e=>"Action"===e.name),n=e.find(e=>"Action Input"===e.name),s=e.find(e=>"Observation"===e.name);if(!i||!n)throw Error("ToolUseProcessSupervision: Missing action or action input");let l={action:i.rewriteValue??i.originalValue,"action input":JSON.parse(n.rewriteValue??n.originalValue)},p=[t&&`<thought>${t.rewriteValue||t.originalValue}</thought>`,l&&`<function_call>${JSON.stringify(l)}</function_call>`,s&&`<observation>${s.rewriteValue??s.originalValue}</observation>`].filter(Boolean);return p.join("\n")});return t.join("\n\n")}}},{id:"parallel_actions",name:"Parallel Actions",toolIds:["finish","current_date","python_interpreter","google_search","post_social_media","check_calendar_availability","current_weather","historical_weather"],actionPlan:{parse:e=>{let t=e.match(/<function_call>([\s\S]*?)<\/function_call>/);if(!t)throw Error("ToolUseProcessSupervision: Failed to parse action plan: "+e);let i=JSON.parse(t[1]);if("action_plan"!==i.action)throw Error("ToolUseProcessSupervision: Expected action_plan function call: "+e);return{name:"Action Plan",type:"plaintext",originalValue:i.action_input?.steps,rewriteValue:null,readOnly:!1,rating:null}},unparse:e=>{let t={action:"action_plan",action_input:{steps:e.rewriteValue??e.originalValue}};return`<function_call>${JSON.stringify(t)}</function_call>`}},action:{parse:e=>{let t=[...e.matchAll(/<thought>([\s\S]*?)<\/thought>/g)].map(e=>e[1]),i=[...e.matchAll(/<function_call>([\s\S]*?)<\/function_call>/g)].map(e=>e[1]);if(!i)throw Error("ToolUseProcessSupervision: Failed to parse action: "+e);let n=[];for(let e=0;e<i.length;e++){let s=i[e],l=parseJsonOrDefaultEmptyObjectGoldfish(s,{action:"Failed to parse action. Please regenerate model response before proceeding.",action_input:{},"action input":{}}),p={name:"Thought",type:"markdown",originalValue:t&&e<t.length?t[e]:" ",rewriteValue:null,readOnly:!1,rating:null},u={name:"Action",type:"tool_select",originalValue:l.action,rewriteValue:null,readOnly:!1,rating:null},d={name:"Action Input",type:"tool_params_json",originalValue:JSON.stringify(l.action_input||l["action input"]),rewriteValue:null,readOnly:!1,rating:null},m={chunks:null!==p?[p,u,d]:[u,d]};n.push(m)}return 0===n.length&&n.push({chunks:[{name:"Thought",type:"markdown",originalValue:"Failed to parse model response. Please re-generate the model response to obtain a valid response.",rewriteValue:null,readOnly:!1,rating:null},{name:"Action",type:"tool_select",originalValue:"none",rewriteValue:null,readOnly:!1,rating:null},{name:"Action Input",type:"tool_params_json",originalValue:"{}",rewriteValue:null,readOnly:!1,rating:null}]}),n},unparse:e=>{let t=e.map(({chunks:e})=>{let t=e.find(e=>"Thought"===e.name),i=e.find(e=>"Action"===e.name),n=e.find(e=>"Action Input"===e.name),s=e.find(e=>"Observation"===e.name),l=[];if(t&&l.push(`<thought>${t.rewriteValue||t.originalValue}</thought>`),i||n){if(!i||!n)throw Error("ToolUseProcessSupervision: Missing action or action input");let e={action:i.rewriteValue??i.originalValue,action_input:JSON.parse(n.rewriteValue??n.originalValue)};l.push(`<function_call>${JSON.stringify(e)}</function_call>`)}return s&&l.push(`<observation>${s.rewriteValue??s.originalValue}</observation>`),l.join("\n")});return t.join("\n\n")}}},{id:"bulba_extensions",name:"Bulba Extensions",toolIds:["bulba-code-execution","python_interpreter"],actionPlan:{parse:e=>({name:"Action Plan",type:"markdown",originalValue:e,rewriteValue:null,readOnly:!1,rating:null}),unparse:e=>e.rewriteValue??e.originalValue},action:{parse:e=>{let t=e.match(/Thought: ([\s\S]*?)\n/),i=e.match(/Action: ([\s\S]*?)\n/),n=i?i[1]:" ",s=e.match(/Action Input:\s+```[a-zA-Z_]+\s+([\s\S]*?)\s+```/),l=(()=>{if("python_interpreter"===n||"bulba-code-execution"===n){let e=s?s[1]:" ";return`{"code": ${JSON.stringify(e)}}`}{let e=s?s[1]:" ";try{return JSON.stringify(JSON.parse(e))}catch{return"{}"}}})();return[{chunks:[{name:"Thought",type:"markdown",originalValue:t?t[1]:" ",rewriteValue:null,readOnly:!1,rating:null},{name:"Action",type:"tool_select",originalValue:n,rewriteValue:null,readOnly:!1,rating:null},{name:"Action Input",type:"tool_params_json",originalValue:l,rewriteValue:null,readOnly:!1,rating:null,display:e=>{if(e.startsWith('{"answer"'))return`\`\`\`json
${e}
\`\`\``;let t=JSON.parse(e);return`\`\`\`python
${t.code}
\`\`\``}}]}]},unparse:e=>{let t=e.map(({chunks:e})=>{let t=e.find(e=>"Thought"===e.name),i=e.find(e=>"Action Input"===e.name),n=e.find(e=>"Action"===e.name),s=e.find(e=>"Observation"===e.name);if(!t||!n||!i||!s)throw Error("ToolUseProcessSupervision: Missing thought, action, action input, or observation");let l=n.rewriteValue??n.originalValue;return`Thought: ${t.rewriteValue??t.originalValue}
Action: ${l}
Action Input: 
${(()=>{if("python_interpreter"===l||"bulba-code-execution"===l){let e=JSON.parse(i.rewriteValue??i.originalValue).code;return`\`\`\`python
${e}
\`\`\``}return`\`\`\`json
${i.rewriteValue??i.originalValue}
\`\`\``})()}
Observation: 
\`\`\`json
${s?.rewriteValue??s.originalValue}
\`\`\``});return t.join("\n\n")}}},{id:"lazarus_general_code_execution",name:"Lazarus General Code Execution",toolIds:["finish","current_date","python_interpreter","google_search","post_social_media","check_calendar_availability","current_weather","historical_weather"],actionPlan:{parse:e=>({name:"Action Plan",type:"markdown",originalValue:e,rewriteValue:null,readOnly:!1,rating:null}),unparse:e=>e.rewriteValue??e.originalValue},action:{parse:e=>{let t=e.match(/Thought: ([\s\S]*?)\n/),i=e.match(/Action: ([\s\S]*?)\n/),n=(()=>{let t=e.match(/Action Input:\s+```json\s+(\{[\s\S]*?\})\s+```/),i=t?t[1]:" ";try{return JSON.parse(i)}catch{return{}}})();return[{chunks:[{name:"Thought",type:"markdown",originalValue:t?t[1]:" ",rewriteValue:null,readOnly:!1,rating:null},{name:"Action",type:"tool_select",originalValue:i?i[1]:" ",rewriteValue:null,readOnly:!1,rating:null},{name:"Action Input",type:"tool_params_json",originalValue:JSON.stringify(n),rewriteValue:null,readOnly:!1,rating:null,display:e=>{let t=JSON.parse(e);return`\`\`\`python
${t.code}
\`\`\``}}]}]},unparse:e=>{let t=e.map(({chunks:e})=>{let t=e.find(e=>"Thought"===e.name),i=e.find(e=>"Action Input"===e.name),n=e.find(e=>"Action"===e.name),s=e.find(e=>"Observation"===e.name);if(!t||!n||!i||!s)throw Error("ToolUseProcessSupervision: Missing thought, action, action input, or observation");return`Thought: ${t.rewriteValue??t.originalValue}
  Action: ${n.rewriteValue??n.originalValue}
  Action Input: 
  \`\`\`json
  ${i.rewriteValue??i.originalValue}
  \`\`\`
  Observation: 
  \`\`\`
  ${s?.rewriteValue??s.originalValue}
  \`\`\``});return t.join("\n\n")}}},{id:"bee",name:"Bee Tool Use",toolIds:[],actionPlan:{parse:e=>({name:"Action Plan",type:"markdown",originalValue:e,rewriteValue:null,readOnly:!1,rating:null}),unparse:e=>e.rewriteValue??e.originalValue},action:{parse:e=>{let t=[],i=null,n=e.split(/(?=Action:)|(?=Thought:)/);for(let e of n){if(i={chunks:[]},!e.startsWith("Action:")&&!e.startsWith("Thought:")){i.chunks.push({name:"Thought",type:"markdown",originalValue:e.trim().replace("Thought:",""),rewriteValue:null,readOnly:!1,rating:null});continue}let n=e.match(/Action: ([\s\S]*?)\n/),s=e.match(/Thought:\n([\s\S]*?)(?=\n(?:Action:|$))/);if((n||s)&&(s&&(i.chunks.push({name:"Thought",type:"markdown",originalValue:s[1].trim(),rewriteValue:null,readOnly:!1,rating:null}),t.push(i),i={chunks:[]}),n)){let getActionInput=()=>{let t=e.match(/Action Input:\s+```json\s+(\{[\s\S]*?\})\s+```/),i=t?t[1]:" ";try{return JSON.parse(i)}catch{return{}}},s=getActionInput();i.chunks.push({name:"Action",type:"tool_select",originalValue:n[1].trim(),rewriteValue:null,readOnly:!1,rating:null}),i.chunks.push({name:"Action Input",type:"tool_params_json",originalValue:JSON.stringify(s),rewriteValue:null,readOnly:!1,rating:null}),t.push(i)}}return t.length>0?t:[{chunks:[{name:"Thought",type:"markdown",originalValue:e.trim(),rewriteValue:null,readOnly:!1,rating:null}]}]},unparse:e=>{let t=e.map(({chunks:e})=>{let t=e.find(e=>"Thought"===e.name),i=e.find(e=>"Action"===e.name),n=e.find(e=>"Action Input"===e.name),s=e.find(e=>"Observation"===e.name),l="";if(t&&(l+=`Thought:
${t.rewriteValue??t.originalValue}`),i&&n){let e=i.rewriteValue??i.originalValue;if("ask_clarifying_question"===e){let e=JSON.parse(n.rewriteValue??n.originalValue);return e.question}if("print_and_return"===e){let e=JSON.parse(n.rewriteValue??n.originalValue);return e.text}if("no_tool_selected"===e)return t?.rewriteValue??t?.originalValue;"no_tool_selected"!==e&&(l+=`
Action: ${e}
Action Input: 
\`\`\`json
${n.rewriteValue??n.originalValue}
\`\`\``,s&&(l+=`
Observation:
\`\`\`json
${s.rewriteValue??s.originalValue}
\`\`\``))}return l});return t.filter(e=>e).join("\n\n")}},doesActionTriggerCompletion:e=>{if(0===e.length)return!0;let t=e[0].chunks.find(e=>"Action"===e.name);if(!t)return!0;let i=t.rewriteValue??t.originalValue;return"ask_clarifying_question"===i||"print_and_return"===i||"no_tool_selected"===i}},{id:"extensions_C_3_code_corrections",name:"Extensions C3 Code Corrections",toolIds:["bulba-code-execution"],actionPlan:{parse:e=>({name:"Action Plan",type:"markdown",originalValue:e,rewriteValue:null,readOnly:!1,rating:null}),unparse:e=>e.rewriteValue??e.originalValue},action:{parse:e=>{let t=e.match(/```(?:python)?([\s\S]*?)```/),i=t?t[1].trim():"";return[{chunks:[{name:"Action",type:"tool_select",originalValue:"bulba-code-execution",rewriteValue:null,readOnly:!0,rating:null,hidden:!0,displayName:"Tool Call Input"},{name:"Action Input",type:"tool_params_json",originalValue:JSON.stringify({code:i}),rewriteValue:null,readOnly:!1,rating:null,display:e=>{let t=JSON.parse(e);return`\`\`\`
${t.code}
\`\`\``},displayName:"Tool Call Input"}]}]},unparse:e=>{let t=e.map(({chunks:e})=>{let t=e.find(e=>"Action Input"===e.name),i=e.find(e=>"Observation"===e.name);if(!t)throw Error("ToolUseProcessSupervision: Missing action input");let{code:n}=JSON.parse(t.rewriteValue??t.originalValue),s=`Tool Call:
\`\`\`
${n}
\`\`\``;return i&&(s+=`

Observation: ${i.rewriteValue??i.originalValue}`),s});return t.join("\n\n")}}},{id:"abra_frontend_tool_use",name:"Abra Frontend Tool Use",toolIds:["html","html_rendered"],actionPlan:{parse:e=>({name:"Action Plan",type:"markdown",originalValue:e,rewriteValue:null,readOnly:!1,rating:null}),unparse:e=>e.rewriteValue??e.originalValue},action:{parse:e=>{let t=e.match(/```(?:html)?([\s\S]*?)```/),i=t?t[1].trim():e;return[{chunks:[{name:"Action",type:"tool_select",originalValue:"html",rewriteValue:null,readOnly:!0,rating:null,hidden:!0,displayName:"Tool Call Input"},{name:"Action Input",type:"html",originalValue:i,rewriteValue:null,readOnly:!1,rating:null,displayName:"Frontend Code"}]}]},unparse:e=>{let t=e.map(({chunks:e})=>{let t=e.find(e=>"Action Input"===e.name);if(!t)throw Error("ToolUseProcessSupervision: Missing action input");return"```html\n"+(t.rewriteValue??t.originalValue)+"\n```"});return t.join("\n\n")}}},{id:"data_analytics_demo",name:"Data Analytics Demo",toolIds:[],actionPlan:{parse:e=>({name:"Action Plan",type:"markdown",originalValue:e,rewriteValue:null,readOnly:!1,rating:null}),unparse:e=>e.rewriteValue??e.originalValue},action:{parse:e=>{let t=e.match(/Thought: ([\s\S]*?)\n/),i=e.match(/Action: ([\s\S]*?)\n/),n=i?i[1]:" ",s=(()=>{if("python_interpreter"===n){let t=e.match(/Action Input:\s+```python\s+([\s\S]*?)\s+```/),i=t?t[1]:" ";return`{"code": ${JSON.stringify(i)}}`}{let t=e.match(/Action Input:\s+```json\s+(\{[\s\S]*?\})\s+```/),i=t?t[1]:" ";try{return JSON.stringify(JSON.parse(i))}catch{return"{}"}}})();return[{chunks:[{name:"Thought",type:"markdown",originalValue:t?t[1]:" ",rewriteValue:null,readOnly:!1,rating:null},{name:"Action",type:"tool_select",originalValue:n,rewriteValue:null,readOnly:!1,rating:null},{name:"Action Input",type:"tool_params_json",originalValue:s,rewriteValue:null,readOnly:!1,rating:null,display:e=>{if(e.startsWith('{"answer"'))return`\`\`\`json
${e}
\`\`\``;let t=JSON.parse(e);return`\`\`\`python
${t.code}
\`\`\``}}]}]},unparse:e=>{let t=e.map(({chunks:e})=>{let t=e.find(e=>"Thought"===e.name),i=e.find(e=>"Action Input"===e.name),n=e.find(e=>"Action"===e.name),s=e.find(e=>"Observation"===e.name);if(!t||!n||!i||!s)throw Error("ToolUseProcessSupervision: Missing thought, action, action input, or observation");let l=n.rewriteValue??n.originalValue;return`Thought: ${t.rewriteValue??t.originalValue}
Action: ${l}
Action Input: 
${(()=>{if("python_interpreter"===l){let e=JSON.parse(i.rewriteValue??i.originalValue).code;return`\`\`\`python
${e}
\`\`\``}return`\`\`\`json
${i.rewriteValue??i.originalValue}
\`\`\``})()}
Observation: 
${"base64_image"===s.type?"<base64_image>":`\`\`\`json
${s?.rewriteValue??s.originalValue}
\`\`\``}
`});return t.join("\n\n")}}},{id:"bulba_planning_and_action",name:"Bulba Planning and Action",toolIds:["bulba-code-execution"],actionPlan:{parse:e=>{let t=e.match(/\/\*PLANNING\*\/([\s\S]*?)(\/\*ACTION\*\/|$)/),i=t?t[1].trim():"";return{name:"Action Plan",type:"markdown",originalValue:i,rewriteValue:null,readOnly:!1,rating:null}},unparse:e=>{let t=`/*PLANNING*/

${e.rewriteValue??e.originalValue}`;return t}},action:{parse:e=>{let t=[],i=e.split(/\/\*(REASONING|ACTION|FINAL_ANSWER)\*\//),n=null;for(let e=1;e<i.length;e+=2){let s=i[e],l=i[e+1].trim();if("REASONING"===s)n&&t.push(n),n={chunks:[{name:"Thought",type:"markdown",originalValue:l,rewriteValue:null,readOnly:!1,rating:null}]};else if("ACTION"===s){let e=l.match(/```tool_code\n([\s\S]*?)```/);if(e){let i=e[1].trim();n||(n={chunks:[]}),n.chunks.push({name:"Action",type:"tool_select",originalValue:"bulba-code-execution",rewriteValue:null,readOnly:!1,rating:null},{name:"Action Input",type:"tool_params_json",originalValue:JSON.stringify({code:`${["io","math","re","matplotlib.pyplot as plt","numpy as np","pandas as pd","scipy"].filter(e=>i.includes(e.split(" ")[-1]+".")).filter(e=>!i.includes(`import ${e}`)).map(e=>`import ${e}
`).join("")}${i}`}),rewriteValue:null,readOnly:!1,rating:null}),t.push(n),n=null}}else"FINAL_ANSWER"===s&&t.push({chunks:[{name:"Action",type:"tool_select",originalValue:"finish",rewriteValue:null,readOnly:!1,rating:null},{name:"Action Input",type:"tool_params_json",originalValue:JSON.stringify({answer:l}),rewriteValue:null,readOnly:!1,rating:null}]})}return n&&n.chunks.some(e=>"Action"===e.name)&&t.push(n),t},unparse:e=>e.map(({chunks:e})=>{let t=e.find(e=>"Thought"===e.name),i=e.find(e=>"Action"===e.name),n=e.find(e=>"Action Input"===e.name),s=e.find(e=>"Observation"===e.name);if(i?.originalValue==="finish"){let e=JSON.parse(n?.rewriteValue??n?.originalValue??"{}").answer;return`/*FINAL_ANSWER*/

${e}
`}let l="";if(t&&(l+=`/*REASONING*/

${t.rewriteValue??t.originalValue}
`),i&&n){let e=JSON.parse(n?.rewriteValue??n.originalValue),t=e.code??e.query??e.url??"";l+=`/*ACTION*/

\`\`\`tool_code
${t}
\`\`\`
`,s&&(l+=`
/*OBSERVATION*/

${s.rewriteValue??s.originalValue}
`)}return l}).join("\n")}}];t.TOOL_USE_PROCESS_SUPERVISION_CONFIG_OPTIONS=i,t.displayToolParams=e=>{if(e.startsWith('{"code"')){let t=JSON.parse(e);return`\`\`\`python
${t.code}
\`\`\``}return`\`\`\`json
${e}

\`\`\``}},292188:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VotingNoneChoice=t.VotingAllChoice=t.NewReplicaVotingStepId=t.FlaggedVotingStepId=t.ReplicaFeedbackStepId=t.ReplicaJustificationStepId=t.ReplicaVotingStepId=t.VotingStepId=void 0,t.VotingStepId="voting",t.ReplicaVotingStepId="replica-voting",t.ReplicaJustificationStepId="replica-justification",t.ReplicaFeedbackStepId="replica-feedback",t.FlaggedVotingStepId="flagged-voting",t.NewReplicaVotingStepId="new-replica-voting",t.VotingAllChoice="all",t.VotingNoneChoice="none"},246311:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCorruptionDimensionToSchema=t.IncorrectVerifiableFactualInfoCorruptionOutputSchema=t.ConstraintIgnoredCorruptionOutputSchema=t.ModelResponseCorruptionMetadata=t.AutoCorruptionDimension=void 0;var n,s,l=i(689510);t.AutoCorruptionDimension=s,(n=s||(t.AutoCorruptionDimension=s={})).ConstraintIgnored="constraint-ignored",n.IncorrectVerifiableFactualInfo="incorrect-verifiable-factual-info";let p=l.z.object({dimension:l.z.enum([s.ConstraintIgnored,s.IncorrectVerifiableFactualInfo]),turnIndex:l.z.number(),candidateIndex:l.z.number(),trainingAttempt:l.z.string()});t.ModelResponseCorruptionMetadata=p;let u=l.z.object({able_to_produce_violation:l.z.boolean(),response:l.z.string(),violated_clauses:l.z.array(l.z.string()),explain_violations:l.z.string()});t.ConstraintIgnoredCorruptionOutputSchema=u;let d=l.z.object({able_to_produce_incorrect_response:l.z.boolean(),response:l.z.string(),incorrect_info:l.z.array(l.z.string()),explain_incorrect_info:l.z.string()});t.IncorrectVerifiableFactualInfoCorruptionOutputSchema=d;let m={[s.ConstraintIgnored]:u,[s.IncorrectVerifiableFactualInfo]:d};t.AutoCorruptionDimensionToSchema=m},451215:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}(i(108417));Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))})},395510:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioFullDuplexOutputSchema=void 0;var n=i(689510);let s=n.z.object({audio:n.z.string().nullable(),duration:n.z.number().optional().describe("Duration of the audio in seconds, optional for retro compatibility"),modelAudio:n.z.string().nullable(),userAudio:n.z.string().nullable(),transcript:n.z.object({enabled:n.z.boolean(),text:n.z.string().optional()}).optional(),dynamicModelParams:n.z.any().optional()});t.AudioFullDuplexOutputSchema=s},651199:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}(i(395510));Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))})},753336:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},716156:function(e,t){"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.ThoughtStepType=void 0,t.ThoughtStepType=i,(n=i||(t.ThoughtStepType=i={})).ThoughtCorrection="ThoughtCorrection",n.ThoughtTextCollection="ThoughtTextCollection"},848587:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},975945:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}(i(848587));Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))})},805174:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},359756:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}(i(805174));Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))})},582688:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ThoughtCorrectionOutput",{enumerable:!0,get:function(){return n.ThoughtCorrectionOutput}}),Object.defineProperty(t,"ThoughtCorrectionStepResponse",{enumerable:!0,get:function(){return n.ThoughtCorrectionStepResponse}}),Object.defineProperty(t,"ThoughtCorrectionStep",{enumerable:!0,get:function(){return n.ThoughtCorrectionStep}}),Object.defineProperty(t,"ThoughtTextCollectionStepResponse",{enumerable:!0,get:function(){return s.ThoughtTextCollectionStepResponse}}),Object.defineProperty(t,"ThoughtTextCollectionStep",{enumerable:!0,get:function(){return s.ThoughtTextCollectionStep}});var n=i(975945),s=i(359756)},725220:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ThoughtStepType:!0};Object.defineProperty(t,"ThoughtStepType",{enumerable:!0,get:function(){return l.ThoughtStepType}});var s=_interopRequireWildcard(i(753336));Object.keys(s).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var l=i(716156),p=_interopRequireWildcard(i(582688));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}Object.keys(p).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))})},997866:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalAppOutputSchema=void 0;var n=i(689510);let s=n.z.object({});t.ExternalAppOutputSchema=s},176656:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}(i(997866));Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))})},816955:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},187105:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}(i(816955));Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))})},88458:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnitTestCollectionOutputSchema=t.HiddenTestSchema=t.UnitTestSchema=t.UnitTestStdInSchema=t.UnitTestJestSchema=t.UnitTestPyTestSchema=t.UnitTestJSONSchema=t.UnitTestBaseSchema=t.UnitTestRunSchema=t.UnitTestErrorRunSchema=t.UnitTestFailedRunSchema=t.UnitTestPassedRunSchema=t.CodeSchema=t.ValidLanguageSchema=void 0;var n=i(689510);let s=n.z.enum(["Python","JavaScript","Java","CPlusPlus"]);t.ValidLanguageSchema=s;let l=n.z.object({id:n.z.string(),content:n.z.string(),language:s});t.CodeSchema=l;let p=n.z.object({idx:n.z.number(),passed:n.z.string(),input:n.z.array(n.z.any()),output:n.z.any()}),u=n.z.object({passes:n.z.number().optional(),fails:n.z.number().optional(),pass_rate:n.z.number().optional(),coverage:n.z.number().optional(),coverage_statements:n.z.number().optional(),coverage_functions:n.z.number().optional(),coverage_branches:n.z.number().optional(),json_results:n.z.array(p).optional(),pytest_results:n.z.string().optional(),failed_suites:n.z.array(n.z.string()).optional(),jest_results:n.z.string().optional(),stdin_results:n.z.array(n.z.boolean()).optional(),error:n.z.string().optional()}),d=n.z.object({passes:n.z.number(),fails:n.z.number(),pass_rate:n.z.number(),testResults:n.z.union([n.z.array(p),n.z.array(n.z.boolean()),n.z.string()]).optional()}),m=n.z.object({timestamp:n.z.number(),state:n.z.literal("passed"),output:d,rawOutput:u});t.UnitTestPassedRunSchema=m;let h=n.z.object({timestamp:n.z.number(),state:n.z.literal("failed"),dismissed:n.z.boolean(),dismissalReason:n.z.string().optional(),output:d,rawOutput:u});t.UnitTestFailedRunSchema=h;let g=n.z.object({timestamp:n.z.number(),state:n.z.literal("error"),dismissed:n.z.boolean(),dismissalReason:n.z.string().optional(),error:n.z.string(),rawOutput:u.optional()});t.UnitTestErrorRunSchema=g;let f=n.z.discriminatedUnion("state",[m,h,g]);t.UnitTestRunSchema=f;let y=n.z.enum(["JSON","PyTest","Jest","StdIn"]),b=n.z.object({id:n.z.string(),error:n.z.string().optional(),codeId:n.z.string(),timestamp:n.z.number(),format:y,runs:n.z.array(f),content:n.z.any(),methodName:n.z.string().optional()});t.UnitTestBaseSchema=b;let T=b.extend({format:n.z.literal("JSON"),methodName:n.z.string(),content:n.z.object({input:n.z.array(n.z.any()),output:n.z.any()})});t.UnitTestJSONSchema=T;let S=b.extend({format:n.z.literal("PyTest"),content:n.z.string()});t.UnitTestPyTestSchema=S;let _=b.extend({format:n.z.literal("Jest"),content:n.z.string()});t.UnitTestJestSchema=_;let v=b.extend({format:n.z.literal("StdIn"),methodName:n.z.string(),content:n.z.object({input:n.z.string(),output:n.z.string()})});t.UnitTestStdInSchema=v;let L=n.z.union([T,S,_,v]);t.UnitTestSchema=L;let C=b.extend({hidden:n.z.literal(!0),passed:n.z.boolean(),content:n.z.any().optional()});t.HiddenTestSchema=C;let I=n.z.object({code:n.z.record(l),discardedTests:n.z.record(L),tests:n.z.record(L),hiddenTests:n.z.record(C).optional(),lastHiddenTestId:n.z.string().optional(),lastCodeId:n.z.string().optional()});t.UnitTestCollectionOutputSchema=I},824112:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}(i(88458));Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))})},108417:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},s=_interopRequireWildcard(i(725220));Object.keys(s).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var l=_interopRequireWildcard(i(187105));Object.keys(l).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))});var p=_interopRequireWildcard(i(824112));Object.keys(p).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))});var u=_interopRequireWildcard(i(651199));Object.keys(u).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))});var d=_interopRequireWildcard(i(176656));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}Object.keys(d).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))})},101241:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LintLevel",{enumerable:!0,get:function(){return eg.LintLevel}}),Object.defineProperty(t,"LintVerdict",{enumerable:!0,get:function(){return eg.LintVerdict}}),t.isMultiReplicaLintRule=function(e){return e.condition?.validatorCategory===H.MultiReplica},t.isValidLintResult=isValidLintResult,t.getValidLintResults=function(e){return e.filter(isValidLintResult)},t.getTestableLintResults=function(e){let _cleanResult=e=>em.default.omit(e,"runtimeDurationMs");return isLintResult(e)?_cleanResult(e):isLintResultArray(e)?e.map(_cleanResult):!em.default.isNil(e)&&em.default.isObject(e)&&em.default.every(e,(e,t)=>Object.values(eg.LintLevel).includes(t)&&isLintResultArray(e))?em.default.mapValues(e,e=>e.map(_cleanResult)):null},t.isResponseLintingRuleForReviewLevel=function(e,t,i){if(i){if(!1===e.enableBenchmarks)return!1;if(e.enableAttempt)return!0;for(let t of i)switch(t){case eh.WorkerReviewLevel.Normal:return!!e.enableL0;case eh.WorkerReviewLevel.Level1:return!!e.enableL1;case eh.WorkerReviewLevel.ReviewConsensus:return!!e.enableL4;case eh.WorkerReviewLevel.Corp:return!!e.enableL10;case eh.WorkerReviewLevel.QIRAuditor:return!!e.enableQIRAuditor;case eh.WorkerReviewLevel.QIRLeadAuditor:return!!e.enableQIRLeadAuditor}return!1}switch(t){case eh.ReviewLevel.Attempt:return!!e.enableAttempt;case eh.ReviewLevel.Normal:return!!e.enableL0;case eh.ReviewLevel.Level1:return!!e.enableL1;case eh.ReviewLevel.ReviewConsensus:return!!e.enableL4;case eh.ReviewLevel.Expedite:return!!e.enableL8;case eh.ReviewLevel.Corp:return!!e.enableL10;case eh.ReviewLevel.CorpFlagged:return!!e.enableL11;case eh.ReviewLevel.Deliverable:return!!e.enableL12;case eh.ReviewLevel.QIRAuditor:return!!e.enableQIRAuditor;case eh.ReviewLevel.QIRLeadAuditor:return!!e.enableQIRLeadAuditor}return!1},t.parseAttemptIdString=t.attemptIdToString=t.JSONATA_LINTER_NAME=t.PRP_LINTER_NAME=t.REASONING_MODEL_MIN_TOKEN_COUNT=t.PRPLinterModelInfo=t.RatingCriteriaLinterRatingField=t.PRPLinterModelOption=t.SimilarityMetrics=t.GoogleTranslationLanguages=t.isLidarCuboidShiftMetadata=t.LidarCuboidShiftMode=t.AcceptedSphereLanguage=t.TextInAttachmentCustom=t.TextInAttachmentMode=t.emptyTaskLinterAllowedTaskTypes=t.timeSpentLinterAllowedTaskTypes=t.enterpriseDefaultScriptLinterNames=t.KeypointsDistanceOrientation=t.ZIndexLinterOperator=t.UserAgentsStrategy=t.RegexMatches=t.ValidJsonLintModes=t.ComparisonOperator=t.LogicalOperator=t.ContainmentDependentOn=t.MetadataUnitConversionType=t.NerRelationshipsOverlapType=t.HypothesisChangedLintMode=t.DEFAULT_VALIDATOR=t.AVAILABLE_VALIDATORS=t.ValidatorCategory=t.PromptValidatorType=t.ValidatorType=t.ScriptLinterName=t.DataQualityLinterEnum=t.LintDowngradeReason=t.LintOutcome=t.MlFastLinters=t.TAXONOMY_LINTER_PREFIX=t.UseCases=t.DisabledDefaultLinterReason=t.LintOrigin=t.LintStage=t.PASSING_VERDICTS=void 0;var n,s,l,p,u,d,m,h,g,f,y,b,T,S,_,v,L,C,I,R,P,E,O,M,w,x,A,k,N,z,j,D,F,V,U,G,$,B,q,W,H,Q,K,J,Y,Z,X,ee,et,er,ei,en,eo,ea,es,el,ec,ep,eu,ed,em=(n=i(298784))&&n.__esModule?n:{default:n},eh=i(599789),eg=i(167469);let ef=[eg.LintVerdict.Pass,eg.LintVerdict.NoLint];function isValidLintResult(e){return e.lintOutcome!==U.Ignore}function isLintResult(e){return!em.default.isNil(e)&&em.default.isObject(e)&&"runtimeDurationMs"in e}function isLintResultArray(e){return!em.default.isNil(e)&&Array.isArray(e)&&e.every(isLintResult)}t.PASSING_VERDICTS=ef,t.LintStage=z,(s=z||(t.LintStage=z={})).Frontend="frontend",s.Backend="backend",s.Any="any",t.LintOrigin=j,(l=j||(t.LintOrigin=j={})).Customer="customer",l.Corp="corp",l.Taxonomy="taxonomy",l.Auto="auto",t.DisabledDefaultLinterReason=D,(p=D||(t.DisabledDefaultLinterReason=D={})).Testing="testing",p.InProgress="in_progress",p.NeedMoreInfo="need_more_info",p.UnexpectedBehavior="unexpected_behavior",p.Unnecessary="unnecessary",t.UseCases=F,(u=F||(t.UseCases=F={})).Informational="informational",u.Critical="critical",u.Other="other",t.TAXONOMY_LINTER_PREFIX="TAXONOMY_",t.MlFastLinters=V,(V||(t.MlFastLinters=V={})).Invoice="invoice",t.LintOutcome=U,(d=U||(t.LintOutcome=U={})).Pass="pass",d.Fail="fail",d.Ignore="ignore",t.LintDowngradeReason=G,(m=G||(t.LintDowngradeReason=G={})).Unhelpful="unhelpful",m.Hallucinatory="hallucinatory",t.DataQualityLinterEnum=$,(h=$||(t.DataQualityLinterEnum=$={})).GENERIC="generic",h.NO_POLYGON_WITH_LESS_THAN_THREE_POINTS="no_polygon_with_less_than_three_points",h.NO_DUPLICATE_POINTS="no_duplicate_points",t.ScriptLinterName=B,(g=B||(t.ScriptLinterName=B={})).Truncation="SCRIPT_truncation-linter",g.Semseg="SCRIPT_semseg-linter",g.PointContainment="SCRIPT_point-containment-linter",g.FedMissingGmvImage="SCRIPT_fed-missing-gmv-image-linter",g.GenericDataCollectionVideoQuality="SCRIPT_generic-data-collection-video-quality",g.StaticGoldenTask="SCRIPT_static-golden-task-linter",g.PolygonContainment="SCRIPT_polygon-containment-linter",g.MinMaxSize="SCRIPT_size-linter",g.Ratio="SCRIPT_ratio-linter",g.StrayPixel="SCRIPT_stray-pixel-linter",g.BoxContainment="SCRIPT_box-containment-linter",g.OverlappingObjectFrame="SCRIPT_overlapping-object-frame",g.TrackAttributeConsistency="SCRIPT_track-attribute-consistency",g.ContiguousFrameTrack="SCRIPT_contiguous-frame-track",g.PolygonEdges="SCRIPT_edge-polygon-linter",g.Attribute="SCRIPT_attribute-linter",g.GISDuplicates="SCRIPT_gis-duplicates-linter",g.GisLaneLine="SCRIPT_gis-lane-line-linter",g.GisGoat="SCRIPT_gis-goat-linter",g.GisGoatPhaseTwo="SCRIPT_gis-goat-phase-two-linter",g.GisMongoose="SCRIPT_gis-mongoose-linter",g.GisMammoth="SCRIPT_gis-mammoth-linter",g.GisMammothHosted="SCRIPT_gis-mammoth-hosted-linter",g.GisPolygonOverlap="SCRIPT_gis-polygon-overlap-linter",g.GisMustBeLinked="SCRIPT_gis-must-be-linked",g.GisCheckSegmenter="SCRIPT_gis-check-segmenter-linter",g.GisCheckDRZEdgesNum="SCRIPT_gis-check-drz-edges-num-linter",g.GisCheckDeriveRules="SCRIPT_gis-check-derive-rules-linter",g.GisWoven="SCRIPT_gis-woven-linter",g.GisUpdateApiCheckFocuses="SCRIPT_gis-update-api-check-focuses-linter",g.GisUpdateApiCheckUpdateReasons="SCRIPT_gis-update-api-check-update-reasons-linter",g.GisUpdateApiTouchFocusAnnotation="SCRIPT_gis-update-api-touch-focus-annotation-linter",g.Comparison="SCRIPT_comparison-linter",g.LinkingQuality="SCRIPT_linking-quality-linter",g.DocumentMissingText="SCRIPT_document-missing-text",g.TextAttribute="SCRIPT_text-attribute",g.LSSFlood="SCRIPT_LSS_flood-linter",g.LSSContainsLabels="SCRIPT_LSS_contains-labels",g.LSSFloatingGround="SCRIPT_LSS_floating-ground",g.PrelabelDiff="SCRIPT_prelabel-diff-linter",g.SemsegLabelProximity="SCRIPT_semseg-label-proximity",g.LinkedPolygonContainmentLinter="SCRIPT_linked-polygon-containment-linter",g.VertexCount="Script_vertex-count-linter",g.MissingResponse="SCRIPT_missing-response-linter",g.OverlappingVertices="SCRIPT-overlapping-vertices-linter",g.PolygonStraightLine="SCRIPT-polygon-straight-line",g.SelfIntersectingPolygon="SCRIPT-self-intersecting-polygons-linter",g.SelfIntersectingPolygonLambda="SCRIPT_self-intersecting-polygons-linter-v2",g.DuplicateLambda="SCRIPT_polygon-duplicate-linter-v2",g.SharedSegmentLambda="SCRIPT_polygon-shared-segment-linter",g.PolygonOverlap="SCRIPT-polygon-overlap-linter",g.TimesUsed="SCRIPT_times-used-linter",g.S2Geometry="SCRIPT-s2-geometry-linter",g.IouOverlap="SCRIPT_box-overlap-linter",g.CuboidPolygonProximity="SCRIPT_cuboid-polygon-proximity-linter",g.AsyncCustomerEndpoint="SCRIPT_async-customer-endpoint-linter",g.CustomerEndpoint="SCRIPT_customer-endpoint-linter",g.BeeGISCustomerEndpoint="SCRIPT_bee-gis-customer-endpoint-linter",g.PolygonExtremalPoints="SCRIPT_polygon-extremal-points",g.PolygonPolygonContainment="SCRIPT_polygon-polygon-containment",g.ZenuityResponse="SCRIPT_zenuity-response",g.DeletedBaseAnnotation="SCRIPT_deleted-base-annotation",g.CatalogLinter="SCRIPT_catalog-linter",g.FbAudioTranscription="SCRIPT_fb-audio-transcription-linter",g.ForbiddenCategorization="SCRIPT_forbidden-categorization",g.SemsegDisjointedInstance="SCRIPT_semseg-disjointed-instance-linter",g.LinePolygonContainment="SCRIPT_line-polygon-containment-linter",g.SemsegLabelMinMax="SCRIPT_semseg-label-min-max",g.CameraConsistency="SCRIPT_camera-consistency",g.LinkedInstersection="SCRIPT_linked-intersection-linter",g.LinkedAttribute="SCRIPT_linked-attribute-linter",g.LineEndpoint="SCRIPT_line-endpoint-linter",g.LineMergePoint="SCRIPT_line-endpoint-merge-linter",g.LineBetweenLines="SCRIPT_line-between-lines-linter",g.LineBetweenLinked="SCRIPT_line-between-linked-linter",g.SameLabelLinking="SCRIPT_same-label-linking-linter",g.OverlappingLinesSameLabel="SCRIPT_overlapping-lines-same-label-linter",g.AdobeImageEditingRequest="SCRIPT_adobe-image-editing-request-linter",g.ShadowPredictions="SCRIPT_shadow-predictions",g.MLCarCamera="SCRIPT_ML_car-camera",g.MLBrakeCamera="SCRIPT_ML_brake-camera",g.MLCelery="SCRIPT_ML_celery",g.MLDocumentNats="SCRIPT_ML_document-nats",g.MLCuboidMismatch="SCRIPT_ML_cuboid-mismatch",g.MLQualitySingletonMetric="SCRIPT_ml-quality-singleton-metric",g.DocumentLinking="SCRIPT_document-linking-linter",g.DocumentMinMaxLinking="SCRIPT_document-min-max-linking-linter",g.DocumentTextCharacters="SCRIPT_text-characters",g.TextMultiSelect="SCRIPT_text-multi-select-linter",g.TextFieldContains="SCRIPT_text-field-contains-linter",g.FalconCatSubmissionCode="SCRIPT_falcon-cat-submission-code-linter",g.MetadataContainsChoice="SCRIPT_metadata-contains-choice-linter",g.MetadataUnitConversion="SCRIPT_metadata-unit-conversion-linter",g.FieldContainsField="SCRIPT_field-contains-field-linter",g.URLExists="SCRIPT_url-exists-linter",g.HypothesisMatchesChoice="SCRIPT_hypothesis-matches-choice-linter",g.NerValidSegments="SCRIPT_ner-valid-segments-linter",g.NerRelationships="SCRIPT_ner-relationships-linter",g.NerEntities="SCRIPT_ner-entities-linter",g.HypothesisChanged="SCRIPT_hypothesis-changed-linter",g.SmartAssistantResponse="SCRIPT_smart-assistant-response-linter",g.TimeSpent="SCRIPT_time-spent-linter",g.LycheeItemValuesInGroup="SCRIPT_lychee-item-values-in-group-linter",g.LycheeItemTableRow="SCRIPT_lychee-item-table-row-linter",g.LaneLineOrder="SCRIPT_lane-line-order-linter",g.LicensePlate="SCRIPT_license-plate-linter",g.SwappedBaseAnnotations="SCRIPT_swapped-base-annotations-linter",g.GISLinkingLambda="SCRIPT_gis-linking-lambda",g.GISStitchingLambda="SCRIPT_gis-stitching-lambda",g.GISLinkingML="SCRIPT_gis-ml-linter",g.SaguaroML="SCRIPT_saguaro-ml-linter",g.URLDomain="SCRIPT_url-domains-linter",g.VideoPlaybackFrameCount="SCRIPT_video-playback-frame-count-linter",g.VideoSameAttribute="SCRIPT_video-same-attribute-linter",g.EveryXFrame="SCRIPT_every-x-frame-linter",g.FlamingoCategory="SCRIPT_flamingo-category-linter",g.LabelCorrectSide="SCRIPT_label-correct-side-linter",g.VideoTranscriptionMatch="SCRIPT_video-transcription-match-linter",g.VideoTranscriptionFlowTracking="SCRIPT_video-transcription-flow-tracking-linter",g.NERRelationshipRequired="SCRIPT_ner-relationship-required-linter",g.NERDirectionalRelationship="SCRIPT_ner-directional-relationship-linter",g.NERSameLabelRelationship="SCRIPT_ner-same-label-relationship-linter",g.ValidJSONLinter="SCRIPT_valid-json-linter",g.ParentChildRotation="SCRIPT_parent-child-rotation-linter",g.TextDuplicateStringInArray="SCRIPT_text-duplicate-string-in-array-linter",g.FieldSetDuplicateCheck="SCRIPT_fieldset-duplicate-check-linter",g.GooseEnrichmentLinter="SCRIPT_goose-enrichment-linter",g.GooseDeduplicationLinter="SCRIPT_goose-deduplication-linter",g.GooseTaggingLinter="SCRIPT_goose-tagging-linter",g.InstacartAlcoholLinter="SCRIPT_instacart-alcohol-linter",g.InstacartNPCLinter="SCRIPT_instacart-npc-linter",g.FlamingoPriorityVariantLinter="SCRIPT_flamingo-priority-variant-linter",g.NEROverlap="SCRIPT_ner-overlap-linter",g.TextFieldLength="SCRIPT_text-field-length",g.TextFieldWordCount="SCRIPT_text-field-word-count",g.TextCollectionNumericLinter="SCRIPT_text-collection-numeric-linter",g.NeevaSxSDuplicateURl="SCRIPT_neeva-sxs-duplicate-url-linter",g.NeevaSxSScoreLinter="SCRIPT_neeva-sxs-score-linter",g.FlamingoBulletsBlockingLinter="SCRIPT_flamingo-bullets-blocking-linter",g.FlamingoBulletsDismissibleLinter="SCRIPT_flamingo-bullets-dismissable-linter",g.FlamingoBulletsRefinementDismissibleLinter="SCRIPT_flamingo-bullets-refinement-dismissible-linter",g.FlamingoBulletsModelLinter="SCRIPT_flamingo-bullets-model-linter",g.FlamingoBulletsAttributeLinter="SCRIPT_flamingo-bullets-attribute-linter",g.Overlapping="SCRIPT_overlapping-linter",g.TCMetadataFieldMatch="SCRIPT_tc-metadata-field-match-linter",g.TCCombination="SCRIPT_tc-combination-linter",g.TCFieldCombination="SCRIPT_tc-field-combination-linter",g.TCRegex="SCRIPT_tc-regex-linter",g.LinkedPointBox="SCRIPT_linked-point-box-linter",g.InstacartSSMissedCrawlAttachment="SCRIPT_instacart-ssmissed-crawl-attachment-linter",g.InstacartTaxonomyKeywordLinter="SCRIPT_instacart-taxonomy-keyword-linter",g.TCConditionalBlocker="SCRIPT_tc-conditional-blocker-linter",g.FlamingoBulletsFullStringLinter="SCRIPT_flamingo-bullets-full-string-linter",g.FlamingoBulletsMaterialsLinter="SCRIPT_flamingo-bullets-materials-linter",g.TCRepeatedWords="SCRIPT_tc-repeated-words-linter",g.EventLinter="SCRIPT_event-linter",g.ZIndexLinter="SCRIPT_z-index-linter",g.CovariantObjectDetection="SCRIPT_covariant-object-detection-linter",g.LinkedLines="SCRIPT_linked-lines-linter",g.LineShape="SCRIPT_line-shape-linter",g.TCBadWords="SCRIPT_tc-bad-words-linter",g.PointDistanceFromBox="SCRIPT_point-distance-from-box-linter",g.UnexpectedNonBaseAnnotation="SCRIPT_unexpected-non-base-annotation-linter",g.VertexPlacement="SCRIPT_vertex-placement-linter",g.Rapid2dMlLinter="SCRIPT_rapid-2d-ml-linter",g.OneTeamRoadLineCustomLinter="SCRIPT_one-team-road-line-custom-linter",g.LidarPoints="SCRIPT_lidar-points-linter",g.OneTeamOrRadarCustomLinter="SCRIPT_one-team-or-radar-custom-linter",g.AdeptGptLinter="SCRIPT_adept-gpt-linter",g.AdeptPipelineALinter="SCRIPT_adept-pipeline-a-linter",g.AdeptPipelineBLinter="SCRIPT_adept-pipeline-b-linter",g.AcyclicLinkingLinter="SCRIPT_acyclic-linking-linter",g.OneTeamRoadBoundaryCustomLinter="SCRIPT_one-team-road-boundary-custom-linter",g.LidarCuboidOverlap="SCRIPT_lidar-cuboid-overlap-linter",g.ParkingSlotCustomLinter="SCRIPT_parking-slot-custom-linter",g.TextFieldCorrectLanguage="SCRIPT_text-field-correct-language-linter",g.TextFieldPromptSpam="SCRIPT_text-field-prompt-spam-linter",g.ChatTaskMinEditDistance="SCRIPT_chat-task-min-edit-distance-linter",g.TextFieldUniqueResponse="SCRIPT_text-field-unique-response-linter",g.TextFieldSaplingGrammarLinter="SCRIPT_text-field-sapling-grammar-linter",g.TextFieldPromptResponsePairLinter="SCRIPT_text-field-prompt-response-pair-linter",g.TextFieldPromptResponsePairPlagiarismLinter="SCRIPT_text-field-prompt-response-pair-plagiarism-linter",g.TextFieldSemanticSimilarity="SCRIPT_text-field-semantic-similarity-linter",g.TCSameAnswer="SCRIPT_tc-same-answer-linter",g.IntersectingLinesLinter="SCRIPT_intersecting-lines-linter",g.PedestrianCrossingAndEnvironmentCustomLinter="SCRIPT_pedestrian-crossing-and-environment-custom-linter",g.LinkingPairsLinter="SCRIPT_linking-pairs-linter",g.TextCollectionCategoryFieldMatchLinter="SCRIPT-textcollection-category-field-match-linter",g.TextCollectionCategoryFieldChildrenLinter="SCRIPT-textcollection-category-field-children-linter",g.LinksDirectionLinter="SCRIPT_links-direction-linter",g.ToucanClassificationGBRCustomLinter="SCRIPT_toucan-classification-gbr-custom-linter",g.RankingFieldMissingResponse="SCRIPT_ranking-field-missing-response",g.BoxOverlapping="SCRIPT_box-overlapping-linter",g.BidirectionalLinks="SCRIPT_bidirectional-links-linter",g.EmptyTask="SCRIPT_empty-task-linter",g.TextFieldDiversity="SCRIPT_text-field-diversity-linter",g.ZebraLidarSubCustomLinter="SCRIPT_zebra-lidar-sub-custom-linter",g.MultipleLinkedLines="SCRIPT_multiple-linked-lines-linter",g.VisibleMask="SCRIPT_visible-mask-linter",g.AnnotationOnPadding="SCRIPT_annotation-on-padding-linter",g.AttributeTextFieldGrammarLinter="SCRIPT_attribute-text-field-grammar-linter",g.AttributeTextContainmentLinter="SCRIPT_attribute-text-containment-linter",g.HKPSizeBoxBasedImageCustomLinter="SCRIPT_size-box-based-image-custom-linter",g.RequireLinkingFramesLinter="SCRIPT_require-linking-frames-linter",g.LinksLabels="SCRIPT_links-labels-linter",g.RestrictFrames="SCRIPT_restrict-frames-linter",g.TextGibberishDetection="SCRIPT_text-gibberish-detection-linter",g.TextFieldOverlap="SCRIPT_text-field-overlap-linter",g.UShapeLinter="SCRIPT_u-shape-linter",g.EventLengthMinMaxLinter="SCRIPT_event-length-min-max-linter",g.EventOverlapLinter="SCRIPT_event-overlap-linter",g.TaskMetadata="SCRIPT_task-metadata-linter",g.PolygonTooClose="SCRIPT_polygon-too-close-linter",g.ParkingBarrierCustomLinter="SCRIPT_parking-barrier-custom-linter",g.TextFieldLLM="SCRIPT_text-field-llm",g.GoatAttributeLinter="SCRIPT_goat-attribute-linter",g.RankingAndRatingLinter="SCRIPT_ranking-and-rating-linter",g.NGramDiversityLinter="SCRIPT_ngram-diversity-linter",g.WoodpeckerEnrichmentLinter="SCRIPT_woodpecker-enrichment-linter",g.EveryXFramesAnteaterCustomLinter="SCRIPT_every-x-frames-anteater-custom-linter",g.LidarTopDownZIndex="SCRIPT_lidar-top-down-z-index-linter",g.GoatLTDCuboidLinter="SCRIPT_ltd-cuboid-linter",g.LidarKeyPoints="SCRIPT_lidar-key-points-linter",g.AdeptBrowserLinter="SCRIPT_adept-browser-linter",g.OnceOnVideoAnteaterCustomLinter="SCRIPT_once-on-video-anteater-custom-linter",g.TCBlockTextRegexLinter="SCRIPT_tc_block_text_regex_linter",g.RestrictMultiselectCustomLinter="SCRIPT_restrict-multiselect-custom-linter",g.AnteaterTLRCustomLinter="SCRIPT_anteater-tlr-custom-linter",g.TextCollectionNumericValidationLinter="SCRIPT_text-collection-numeric-validation-linter",g.ZOrderResponseLinter="SCRIPT_z-order-response-linter",g.EmptyArea="SCRIPT_empty-area-linter",g.EditCompletionLevenshteinLinter="SCRIPT_edit-completion-levenshtein-linter",g.LinesInWrongSideLinter="SCRIPT_lines-in-wrong-side-linter",g.MiniGoatCenterLinesLinter="SCRIPT_mini-goat-center-lines-linter",g.TextFieldCheatingLinter="SCRIPT_text-field-cheating-linter",g.FieldsInAttachmentsLinter="SCRIPT_fields-in-attachments-linter",g.GoatLTDLaneLinesLinter="SCRIPT_goat-ltd-lane-lines-linter",g.GPTZeroLinter="SCRIPT_gpt-zero-linter",g.GPTScaleLinter="SCRIPT_gpt-scale-linter",g.BulbaGeneralistLinter="SCRIPT_bulba-generalist-linter",g.AutoCritique="SCRIPT_auto-critique-linter",g.ArmadilloDuplicateFileNamesLinter="SCRIPT_armadillo-duplicate-file-names-linter",g.BulbasaurCustomLinter="SCRIPT_bulbasaur-custom-linter",g.AttemptReviewLinter="SCRIPT_attempt-review-linter",g.VenusCustomLinter="SCRIPT_venus-custom-linter",g.AnteaterAttachedToLinter="SCRIPT_anteater-attached-to-linter",g.LinkLinter="SCRIPT_link-linter",g.AnnotationPath="SCRIPT_annotation-path-linter",g.KeypointsDistance="SCRIPT_keypoints-distance-linter",g.AnteaterEventLinter="SCRIPT_anteater-event-linter",g.AnteaterLTDLinter="SCRIPT_anteater-ltd-linter",g.TextFieldSphereExecutionOutputLinter="SCRIPT_text-field-sphere-execution-output-linter",g.ChatSphereExecutionOutputLinter="SCRIPT_chat-sphere-execution-output-linter",g.LidarCuboidShift="SCRIPT_lidar-cuboid-shift-linter",g.BeeCustomLinter="SCRIPT_bee-custom-linter",g.DependentConditionsLinter="SCRIPT_dependent-conditions-linter",g.EventDurationLinter="SCRIPT_event-duration-linter",g.EventSequenceStartingValueLinter="SCRIPT_event-sequence-starting-value-linter",g.DelimiterAnnotationLinter="SCRIPT_delimiter-annotation-linter",g.OverlappingLines="SCRIPT_overlapping-lines-linter",g.AnteaterGridLinter="SCRIPT_anteater-grid-linter",g.GoatEgoIgnoreCustomLinter="SCRIPT_goat-ego-ignore-custom-linter",g.AnteaterOccludedPathLinter="SCRIPT_anteater-occluded-path-linter",g.AnteaterHorizontalStructuresLinter="SCRIPT_horizontal-structures-linter",g.AnteaterWeatherCatLinter="SCRIPT_anteater-weather-cat-linter",g.VenusLTDLinter="SCRIPT_venus-ltd-linter",g.AnteaterLSODLinter="SCRIPT_anteater-lsod-linter",g.GoatTLShapeLinter="SCRIPT_goat-tl-shape-linter",g.RabbitCustomLinter="SCRIPT_rabbit-custom-linter",g.AnteaterProjectionLinter="SCRIPT_anteater-projection-linter",g.LemurCustomLinter="SCRIPT_lemur-custom-linter",g.AnteaterLidarliteLintersBackend="SCRIPT_anteater-lidarlite-linter-backend",g.GazelleCustomLinter="SCRIPT_gazelle-custom-linter",g.GoatCustomLinter="SCRIPT_goat-custom-linter",g.SelectedLinesEditedByZeditor="SCRIPT_selected-lines-edited-by-zeditor",g.LengthBetweenVerticesLinter="SCRIPT_length-between-vertices-linter",g.AnteaterLidarlinkingLinter="SCRIPT_anteater-lidarlinking-linter",g.LazarusCustomLinter="SCRIPT_lazarus-custom-linter",g.VPBUnProcessedAttachmentsLinter="SCRIPT_vpb-unprocessed-attachments-linter",g.PrometheusCustomLinter="SCRIPT_prometheus-custom-linter",g.ZebraCustomLinter="SCRIPT_zebra-custom-linter",g.SensorFusionTextAnnotationLinter="SCRIPT_sensor-fusion-text-annotation-linter",g.SensorFusionLastFrameValidationLinter="SCRIPT_sensor-fusion-last-frame-validation-linter",g.GrammarLinter="SCRIPT_grammar-linter",g.ContradictionsLinter="SCRIPT_contradictions-linter",g.SpamLinter="SCRIPT_spam-linter",g.ToxicityLinter="SCRIPT_toxicity-linter",g.MultilingualToxicityLinter="SCRIPT_multilingual-toxicity-linter",g.ChatJsonataCustomLinter="SCRIPT_chat-jsonata-custom-linter",g.ChatRobotsValidationCustomLinter="SCRIPT_chat-robots-validation-custom-linter",g.ChatMultiReplicaJsonataCustomLinter="SCRIPT_chat-multi-replica-jsonata-custom-linter",g.ChatLazarusMathTopicsLinter="SCRIPT_chat-lazarus-math-topics-linter",g.ChatZipFileContentsLinter="SCRIPT_chat-zip-file-contents-linter",g.ChatCustomEndpointLinter="SCRIPT_chat-custom-endpoint-linter",g.ChatPreventAnswerBasedOnContributorWt="SCRIPT_chat-prevent-answer-based-on-contributor-wt",g.ChatDolphinPromptImage="SCRIPT_chat-dolphin-prompt-image",g.NightingaleCheckCorrectnessClassification="SCRIPT_nightingale-check-correctness-classification",g.ChatJustificationMinWords="SCRIPT_chat-justification-min-words",g.NightingaleResponseCoherence="SCRIPT_nightingale-response-coherence",g.ChatPromptModelAgreementLinter="SCRIPT_chat-prompt-model-agreement-linter",g.BaseChatTaskPerStepLinter="SCRIPT_base-chat-task-per-step-linter",g.ChatMissingResponseLinter="SCRIPT_chat-task-missing-response-linter",g.ChatMLSingletonQualityMetricLinter="SCRIPT_chat-ml-singleton-quality-metric-linter",g.ChatMLPromptResponsePairQualityMetricLinter="SCRIPT_chat-ml-prompt-response-pair-quality-metric-linter",g.ChatRegexLinter="SCRIPT_chat-regex-linter",g.ChatGPTZeroLinter="SCRIPT_chat-gpt-zero-linter",g.ChatMinEditDistanceLinter="SCRIPT_chat-min-edit-distance-linter",g.ChatUniqueResponseLinter="SCRIPT_chat-unique-response-linter",g.LazarusMaxUsesOfReferenceURLLinter="SCRIPT_chat-max-uses-of-references-url-linter",g.ChatCompletedTasksUniqueResponseLinter="SCRIPT_chat-completed-tasks-unique-response-linter",g.ChatPromptResponsePairLinter="SCRIPT_chat-prompt-response-pair-linter",g.ChatTextLengthLinter="SCRIPT_chat-text-length-linter",g.ChatSemanticSimilarityLinter="SCRIPT_chat-semantic-similarity-linter",g.ChatCorrectLanguageLinter="SCRIPT_chat-correct-language-linter",g.ChatNGramDiversityLinter="SCRIPT_chat-ngram-diversity-linter",g.ChatBadWordsLinter="SCRIPT_chat-bad-words-linter",g.ChatGoogleTranslateDetectionLinter="SCRIPT_chat-google-translate-detection-linter",g.ChatMultiTurnResponseSimilarityLinter="SCRIPT_chat-multi-turn-response-similarity-linter",g.ChatURLExistsLinter="SCRIPT_chat-url-exists-linter",g.ChatPromptResponseWordCountDiffLinter="SCRIPT_chat-prompt-response-word-count-diff-linter",g.ChatValidLikertScoreLinter="SCRIPT_chat-valid-likert-score-linter",g.ChatJustificationLikertMatchMLLinter="SCRIPT_chat-likert-justification-match-ml-linter",g.ChatNightingaleCustomizedLinter="SCRIPT_chat-nightingale-customized-linter",g.ChatNightingaleArchetypeDiversityLinter="SCRIPT_chat-nightingale-archetype-diversity-linter",g.ChatNightingaleGoalAlignmentLinter="SCRIPT_chat-nightingale-goal-alignment-linter",g.ChatNightingalePlagiarismLinter="SCRIPT_chat-nightingale-plagiarism-linter",g.ChatNightingaleReferenceLinter="SCRIPT_chat-nightingale-reference-linter",g.ChatNightingaleValidateArchetypeLinter="SCRIPT_chat-nightingale-validate-archetype-linter",g.ChatNightingaleWordCountLinter="SCRIPT_chat-nightingale-word-count-linter",g.ChatNightingaleRankingConsistencyLinter="SCRIPT_chat-nightingale-ranking-consistency-linter",g.ChatNightingaleRatingConsistencyLinter="SCRIPT_chat-nightingale-rating-consistency-linter",g.ChatPromptComparisonToSearchResult="SCRIPT_chat-prompt-comparison-to-search-result",g.ChatBulbaFactualityLinter="SCRIPT_chat-bulba-factuality-linter",g.ChatNERSentenceLinter="SCRIPT_chat-ner-sentence-linter",g.ChatBulbaLikertResponseValidator="SCRIPT_chat-bulba-likert-response-validator",g.ChatBulbaLockFieldLinter="SCRIPT_chat-bulba-lock-field-linter",g.ChatBulbaCodeEvalCodePresentLinter="SCRIPT_chat-bulba-code-eval-code-present-linter",g.ChatImageNSFWLinter="SCRIPT_chat-image-nsfw-linter",g.ChatMRSSphereExecutionRelevanceLinter="SCRIPT_chat-mrs-sphere-execution-relevance-linter",g.ChatGoogleSearchPlagiarismLinter="SCRIPT_chat-google-search-plagiarism-linter",g.ChatMultiModalRelevanceLinter="SCRIPT_chat-multi-modal-relevance-linter",g.ChatLatexParsingLinter="SCRIPT_chat-latex-parsing-linter",g.ChatBlockMMMULinter="SCRIPT_chat-block-mmmu-linter",g.ChatAutoraterPlagiarismLinter="SCRIPT_chat-autorater-plagiarism-linter",g.ChatLambdaUnitTestExecutionLinter="SCRIPT_chat-lambda-unit-test-execution-linter",g.ChatMultiReplicaSimilarityLinter="SCRIPT_chat-multi-replica-similarity-linter",g.ChatOdinVideoIDLinter="SCRIPT_chat-odin-video-id-linter",g.ChatOdinVideoGameValidateSubmission="SCRIPT_chat-odin-video-game-validate-submission",g.ChatAudioLengthLinter="SCRIPT_chat-audio-length-linter",g.ChatBenchmarkUrlLinter="SCRIPT_chat-benchmark-url-linter",g.ChatQuestionBenchmarkComparisonLinter="SCRIPT_chat-question-benchmark-comparison-linter",g.RubricPerCriteriaPromptResponsePairLinter="SCRIPT_rubric-per-criteria-prompt-response-pair-linter",g.AiderCompassWorkflowLinter="SCRIPT_aider-compass-workflow-linter",g.ChatHLEPublicPromptsPlagiarismLinter="SCRIPT_chat-hle-public-prompts-plagiarism-linter",g.ChatArchieGtfaCopilotLinter="SCRIPT_chat-archie-gtfa-copilot-linter",g.CopilotRubricsLinter="SCRIPT_copilot-rubrics-linter",g.CompassWorkflowLinter="SCRIPT_compass-workflow-linter",g.DragonLidarliteLintersBackend="SCRIPT_dragon-lidarlite-linters-backend",g.ChatUniqueNameURLLinter="SCRIPT_chat-unique-name-url-linter",t.ValidatorType=q,(f=q||(t.ValidatorType=q={})).WordCount="VALIDATOR_word-count",f.Language="VALIDATOR_language",f.URL="VALIDATOR_correct-url",f.Regex="VALIDATOR_regex",f.BadWords="VALIDATOR_bad-words",f.Overlap="VALIDATOR_response-overlap",f.InstructionsSimilarity="VALIDATOR_instruction-similarity",f.Grammar="VALIDATOR_grammar",f.DisablePasting="VALIDATOR_disable-pasting",f.MissingResponse="VALIDATOR_missing-response",f.TextFormatting="VALIDATOR_text-formatting",f.Size="VALIDATOR_size",f.TimesUsed="VALIDATOR_times-used",f.ContiguousFrameTrack="VALIDATOR_contiguous-frame-track",f.StraightLine="VALIDATOR_straight-line",f.OverlappingVertices="VALIDATOR_overlapping-vertices",f.AnnotationOverlap="VALIDATOR_annotation-overlap",f.AnnotationContainment="VALIDATOR_annotation-containment",f.PixelPercentage="VALIDATOR_pixel-percentage",f.Diversity="VALIDATOR_diversity",f.UniqueResponse="VALIDATOR_unique-response",f.GPTZero="VALIDATOR_gptzero",f.GPTScale="VALIDATOR_gptscale",f.Cheating="VALIDATOR_cheating",f.NGramDiversity="VALIDATOR_ngram-diversity",f.MLQualitySingletonMetric="VALIDATOR_ml-quality-singleton-metric",f.SemanticSimilarity="VALIDATOR_semantic-similarity",f.PRPLinter="VALIDATOR_prp-linter",f.TextFieldSphereExecutionOutputLinter="VALIDATOR_text-field-sphere-execution-output-linter",t.PromptValidatorType=W,(y=W||(t.PromptValidatorType=W={})).Profanity="profanity",y.LanguageAndGibberish="languageAndGibberish",y.WordCount="wordCount",y.ReferenceTextWordCount="referenceTextWordCount",y.StringBlocklist="stringBlocklist",y.RegexBlocklist="regexBlocklist",y.RepeatedWords="repeatedWords",y.TextFormatting="textFormatting",y.SpellingAndGrammar="spellingAndGrammar",y.DisablePasting="disablePasting",y.SemanticSimilarity="semanticSimilarity",y.NGramDiversity="nGramDiversity",y.MLQualitySingletonMetric="mLQualitySingletonMetric",y.PRPLinters="prpLinters",y.TextFieldSphereExecutionOutputLinter="textFieldSphereExecutionOutputLinter",t.ValidatorCategory=H,(b=H||(t.ValidatorCategory=H={})).Diversity="Diversity",b.GeneralQuality="General Quality",b.Other="Other",b.Multimodal="Multimodal",b.JustificationRanking="Justifications Ranking/Likert",b.CheatingSpam="Cheating/Spam",b.ProjectConstraints="Project Constraints",b.Coding="Coding",b.Languages="Languages",b.ProjectSpecific="Project Specific",b.MultiReplica="Multi Replica",b.Defaults="Defaults";let ey=[{validatorType:q.WordCount,linterName:B.TextFieldWordCount,validatorName:"Word Count",shortName:"word-count",taskTypes:[eg.TaskType.TextCollection],category:H.ProjectConstraints,shortDescription:"Enforce a minimum or maximum text length."},{validatorType:q.Language,linterName:B.TextFieldCorrectLanguage,validatorName:"Language & Gibberish Detection",shortName:"language",taskTypes:[eg.TaskType.TextCollection],category:H.CheatingSpam,shortDescription:'Requires the response to be in the specified language. Not very effective (overflags + misses some things) - we recommend instead using PRP with a custom prompt. Same as "Language-Correctness" linter in Chat Task.'},{validatorType:q.Regex,linterName:B.TCRegex,validatorName:"Regex Blocklist",shortName:"regex",taskTypes:[eg.TaskType.TextCollection],category:H.ProjectConstraints,shortDescription:'Use regular expression rules to prevent the most common errors or enforce certain response formats. Same as "Regex" linter in Chat Task.'},{validatorType:q.BadWords,linterName:B.TCBadWords,validatorName:"String Blocklist",shortName:"string-blocklist",taskTypes:[eg.TaskType.TextCollection],category:H.ProjectConstraints,shortDescription:"Prevents inappropriate words in response"},{validatorType:q.Overlap,linterName:B.TextFieldOverlap,validatorName:"Response Similarity",shortName:"response-similarity",taskTypes:[eg.TaskType.TextCollection],category:H.CheatingSpam,shortDescription:"This validator prevents labelers from submitting prompts that overlap too much with reference text."},{validatorType:q.InstructionsSimilarity,linterName:B.TextFieldPromptSpam,validatorName:"Require Edits",shortName:"require-edits",taskTypes:[eg.TaskType.TextCollection],category:H.CheatingSpam,shortDescription:"Enforce levenshtein edits from hypothesis filter."},{validatorType:q.URL,linterName:B.URLExists,validatorName:"URL Formatting",shortName:"correct-url",taskTypes:[eg.TaskType.TextCollection],category:H.ProjectConstraints,shortDescription:"Checks if the URL provided is a working link"},{validatorType:q.TextFormatting,linterName:B.TCRegex,validatorName:"Text Formatting",shortName:"formatting",taskTypes:[eg.TaskType.TextCollection],category:H.GeneralQuality,shortDescription:"Requires sentence case capitalization, punctuation, and no trailing whitespaces."},{validatorType:q.DisablePasting,linterName:B.TCRegex,validatorName:"Disable Pasting",shortName:"TAXONOMY_disable-pasting",taskTypes:[eg.TaskType.TextCollection],category:H.CheatingSpam,shortDescription:"Prevents pasting in the response field."},{validatorType:q.Size,linterName:B.MinMaxSize,validatorName:"Size",shortName:"size",taskTypes:[eg.TaskType.ImageAnnotation,eg.TaskType.VideoPlaybackAnnotation,eg.TaskType.SegmentAnnotation]},{validatorType:q.TimesUsed,linterName:B.TimesUsed,validatorName:"Label Usage",shortName:"label-usage",taskTypes:[eg.TaskType.ImageAnnotation,eg.TaskType.VideoPlaybackAnnotation]},{validatorType:q.ContiguousFrameTrack,linterName:B.ContiguousFrameTrack,validatorName:"Contiguous Objects",shortName:"contiguous-objects",taskTypes:[eg.TaskType.VideoPlaybackAnnotation]},{validatorType:q.StraightLine,linterName:B.PolygonStraightLine,validatorName:"Collinear Points",shortName:"collinear-points",taskTypes:[eg.TaskType.ImageAnnotation]},{validatorType:q.OverlappingVertices,linterName:B.OverlappingVertices,validatorName:"Duplicate Vertex",shortName:"duplicate-vertex",taskTypes:[eg.TaskType.ImageAnnotation]},{validatorType:q.AnnotationOverlap,linterName:B.Overlapping,validatorName:"Overlap",shortName:"annotation-overlap",taskTypes:[eg.TaskType.ImageAnnotation,eg.TaskType.VideoPlaybackAnnotation]},{validatorType:q.AnnotationContainment,linterName:B.Overlapping,validatorName:"Containment",shortName:"annotation-containment",taskTypes:[eg.TaskType.ImageAnnotation,eg.TaskType.VideoPlaybackAnnotation]},{validatorType:q.PixelPercentage,linterName:B.SemsegLabelMinMax,validatorName:"Pixel Percentage",shortName:"pixel-percentage",taskTypes:[eg.TaskType.SegmentAnnotation]},{validatorType:q.PixelPercentage,linterName:B.SemsegLabelMinMax,validatorName:"Pixel Percentage",shortName:"pixel-percentage",taskTypes:[eg.TaskType.SegmentAnnotation]},{validatorType:q.Diversity,linterName:B.TextFieldDiversity,validatorName:"Regex Diversity",shortName:"diversity",taskTypes:[eg.TaskType.TextCollection],category:H.Diversity,shortDescription:"Looks back at window of attempts for a tasker and checks the # of attempts that match the regex, and blocks them."},{validatorType:q.UniqueResponse,linterName:B.TextFieldUniqueResponse,validatorName:"Unique Response",shortName:"unique-response",taskTypes:[eg.TaskType.TextCollection],category:H.Diversity,shortDescription:"Looks back at attempts done in the last 24 hours and prevents any within a certain Levenshtein distance."},{validatorType:q.GPTZero,linterName:B.GPTZeroLinter,validatorName:"GPT Zero",shortName:"gptzero",taskTypes:[eg.TaskType.TextCollection],category:H.CheatingSpam,shortDescription:"Checks if the field text exceeds a certain GPTZero threshold."},{validatorType:q.GPTScale,linterName:B.GPTScaleLinter,validatorName:"GPT Scale Linter",shortName:"gptscale",taskTypes:[eg.TaskType.TextCollection],category:H.CheatingSpam},{validatorType:q.Cheating,linterName:B.TextFieldCheatingLinter,validatorName:"Cheating",shortName:"cheating",taskTypes:[eg.TaskType.TextCollection],category:H.CheatingSpam,shortDescription:"Used to ban taskers suspected of cheating (e.g., copying/pasting from ChatGPT), or escalate tasks suspected of cheating."},{validatorType:q.NGramDiversity,linterName:B.NGramDiversityLinter,validatorName:"NGram Diversity",shortName:"ngram-diversity",taskTypes:[eg.TaskType.TextCollection],category:H.Diversity,shortDescription:"Enforce diversity of word choice across tasks."},{validatorType:q.MLQualitySingletonMetric,linterName:B.MLQualitySingletonMetric,validatorName:"ML Quality Singleton Metric",shortName:"ml-quality-singleton-metric",taskTypes:[eg.TaskType.TextCollection],category:H.Diversity},{validatorType:q.SemanticSimilarity,linterName:B.TextFieldSemanticSimilarity,validatorName:"Semantic Similarity",shortName:"semanticsimilarity",taskTypes:[eg.TaskType.TextCollection],category:H.Diversity,shortDescription:"Blocks a prompt from being submitted if the cosine similarity to existing prompts submitted (across the entire project) is above the threshold."},{validatorType:q.PRPLinter,linterName:B.TextFieldPromptResponsePairLinter,validatorName:"PRP Linter",shortName:"prplinter",taskTypes:[eg.TaskType.TextCollection],category:H.Diversity,shortDescription:"Run a GPT-4 prompt and lint based on output."},{validatorType:q.TextFieldSphereExecutionOutputLinter,linterName:B.TextFieldSphereExecutionOutputLinter,validatorName:"Text Field Sphere Execution Output Linter",shortName:"text-field-sphere-execution-output-linter",taskTypes:[eg.TaskType.TextCollection],category:H.ProjectConstraints}];t.AVAILABLE_VALIDATORS=ey;let eb={[B.TextFieldWordCount]:q.WordCount,[B.TextFieldCorrectLanguage]:q.Language,[B.URLExists]:q.URL,[B.TCRegex]:q.Regex,[B.TCBadWords]:q.BadWords,[B.TextFieldOverlap]:q.Overlap,[B.TextFieldPromptSpam]:q.InstructionsSimilarity,[B.TextFieldSaplingGrammarLinter]:q.Grammar,[B.MissingResponse]:q.MissingResponse,[B.MinMaxSize]:q.Size,[B.TimesUsed]:q.TimesUsed,[B.ContiguousFrameTrack]:q.ContiguousFrameTrack,[B.PolygonStraightLine]:q.StraightLine,[B.OverlappingVertices]:q.OverlappingVertices,[B.Overlapping]:q.AnnotationOverlap,[B.SemsegLabelMinMax]:q.PixelPercentage};t.DEFAULT_VALIDATOR=eb,t.HypothesisChangedLintMode=Q,(T=Q||(t.HypothesisChangedLintMode=Q={})).AnyChange="any-change",T.NoChange="no-change",t.NerRelationshipsOverlapType=K,(S=K||(t.NerRelationshipsOverlapType=K={})).Full="full",S.None="none",t.MetadataUnitConversionType=J,(_=J||(t.MetadataUnitConversionType=J={})).Same="same",_.Different="different",t.ContainmentDependentOn=Y,(v=Y||(t.ContainmentDependentOn=Y={})).OUTER="outer",v.INNER="inner",t.LogicalOperator=Z,(L=Z||(t.LogicalOperator=Z={})).AND="AND",L.OR="OR",t.ComparisonOperator=X,(C=X||(t.ComparisonOperator=X={})).EQ="===",C.NEQ="!==",C.GT=">",C.GTE=">=",C.LT="<",C.LTE="<=",t.ValidJsonLintModes=ee,(I=ee||(t.ValidJsonLintModes=ee={})).JSON="JSON",I.Array="array",I.DoubleArray="doubleArray",t.RegexMatches=et,(R=et||(t.RegexMatches=et={})).Every="every",R.Some="some",R.None="none",t.UserAgentsStrategy=er,(P=er||(t.UserAgentsStrategy=er={})).Every="every",P.Some="some",t.ZIndexLinterOperator=ei,(E=ei||(t.ZIndexLinterOperator=ei={})).LT="lt",E.LTE="lte",E.GT="gt",E.GTE="gte",t.KeypointsDistanceOrientation=en,(O=en||(t.KeypointsDistanceOrientation=en={})).Horizontal="horizontal",O.Vertical="vertical",O.TotalDistance="totalDistance";let eT=[B.EmptyTask,B.TimeSpent];t.enterpriseDefaultScriptLinterNames=eT;let eS=Object.values(eg.TaskType).filter(e=>e!==eg.TaskType.SensorFusion);t.timeSpentLinterAllowedTaskTypes=eS;let e_=[eg.TaskType.Annotation,eg.TaskType.PolygonAnnotation,eg.TaskType.CuboidAnnotation,eg.TaskType.LineAnnotation,eg.TaskType.ImageAnnotation,eg.TaskType.LineAnnotation,eg.TaskType.CuboidAnnotation,eg.TaskType.PointAnnotation,eg.TaskType.VideoAnnotation,eg.TaskType.VideoBoxAnnotation,eg.TaskType.VideoCuboidAnnotation,eg.TaskType.VideoPolygonAnnotation,eg.TaskType.VideoPlaybackAnnotation,eg.TaskType.LidarAnnotation,eg.TaskType.TextCollection,eg.TaskType.GenericDataCollection,eg.TaskType.SegmentAnnotation,eg.TaskType.Categorization,eg.TaskType.SensorFusion];t.emptyTaskLinterAllowedTaskTypes=e_,t.TextInAttachmentMode=eo,(M=eo||(t.TextInAttachmentMode=eo={})).FullText="fulltext",M.Word="word",t.TextInAttachmentCustom=ea,(ea||(t.TextInAttachmentCustom=ea={})).WoodpeckerEnrichment="woodpecker-enrichment",t.AcceptedSphereLanguage=es,(w=es||(t.AcceptedSphereLanguage=es={})).Python="python",w.Cplusplus="c++",w.Javascript="javascript",w.Java="java",w.SQL="sql",w.None="",t.LidarCuboidShiftMode=el,(x=el||(t.LidarCuboidShiftMode=el={})).Legacy="legacy",x.DistanceToEgo="distance-to-ego",x.TravelledDistance="travelled-distance",x.LegacyWithMetrics="legacy-with-metrics",x.DistanceToEgoV2="distance-to-ego-v2",t.isLidarCuboidShiftMetadata=e=>"mode"in e?.extra&&Object.values(el).includes(e.extra.mode),t.GoogleTranslationLanguages=ec,(A=ec||(t.GoogleTranslationLanguages=ec={})).Afrikaans="Afrikaans",A.Albanian="Albanian",A.Amharic="Amharic",A.Arabic="Arabic",A.Armenian="Armenian",A.Assamese="Assamese",A.Aymara="Aymara",A.Azerbaijani="Azerbaijani",A.Bambara="Bambara",A.Basque="Basque",A.Belarusian="Belarusian",A.Bengali="Bengali",A.Bhojpuri="Bhojpuri",A.Bosnian="Bosnian",A.Bulgarian="Bulgarian",A.Catalan="Catalan",A.Cebuano="Cebuano",A.ChineseSimplified="Chinese (Simplified)",A.Chinese="Chinese (Traditional)",A.Corsican="Corsican",A.Croatian="Croatian",A.Czech="Czech",A.Danish="Danish",A.Dhivehi="Dhivehi",A.Dogri="Dogri",A.Dutch="Dutch",A.English="English",A.Esperanto="Esperanto",A.Estonian="Estonian",A.Ewe="Ewe",A.Filipino="Filipino (Tagalog)",A.Finnish="Finnish",A.French="French",A.Frisian="Frisian",A.Galician="Galician",A.Georgian="Georgian",A.German="German",A.Greek="Greek",A.Guarani="Guarani",A.Gujarati="Gujarati",A.Haitian="Haitian Creole",A.Hausa="Hausa",A.Hawaiian="Hawaiian",A.Hebrew="Hebrew",A.Hindi="Hindi",A.Hmong="Hmong",A.Hungarian="Hungarian",A.Icelandic="Icelandic",A.Igbo="Igbo",A.Ilocano="Ilocano",A.Indonesian="Indonesian",A.Irish="Irish",A.Italian="Italian",A.Japanese="Japanese",A.Javanese="Javanese",A.Kannada="Kannada",A.Kazakh="Kazakh",A.Khmer="Khmer",A.Kinyarwanda="Kinyarwanda",A.Konkani="Konkani",A.Korean="Korean",A.Krio="Krio",A.Kurdish="Kurdish",A.KurdishSorani="Kurdish (Sorani)",A.Kyrgyz="Kyrgyz",A.Lao="Lao",A.Latin="Latin",A.Latvian="Latvian",A.Lingala="Lingala",A.Lithuanian="Lithuanian",A.Luganda="Luganda",A.Luxembourgish="Luxembourgish",A.Macedonian="Macedonian",A.Maithili="Maithili",A.Malagasy="Malagasy",A.Malay="Malay",A.Malayalam="Malayalam",A.Maltese="Maltese",A.Maori="Maori",A.Marathi="Marathi",A.Meiteilon="Meiteilon (Manipuri)",A.Mizo="Mizo",A.Mongolian="Mongolian",A.Myanmar="Myanmar (Burmese)",A.Nepali="Nepali",A.Norwegian="Norwegian",A.Nyanja="Nyanja (Chichewa)",A.Odia="Odia (Oriya)",A.Oromo="Oromo",A.Pashto="Pashto",A.Persian="Persian",A.Polish="Polish",A.Portuguese="Portuguese (Portugal, Brazil)",A.Punjabi="Punjabi",A.Quechua="Quechua",A.Romanian="Romanian",A.Russian="Russian",A.Samoan="Samoan",A.Sanskrit="Sanskrit",A.Scots="Scots Gaelic",A.Sepedi="Sepedi",A.Serbian="Serbian",A.Sesotho="Sesotho",A.Shona="Shona",A.Sindhi="Sindhi",A.Sinhala="Sinhala (Sinhalese)",A.Slovak="Slovak",A.Slovenian="Slovenian",A.Somali="Somali",A.Spanish="Spanish",A.Sundanese="Sundanese",A.Swahili="Swahili",A.Swedish="Swedish",A.Tagalog="Tagalog (Filipino)",A.Tajik="Tajik",A.Tamil="Tamil",A.Tatar="Tatar",A.Telugu="Telugu",A.Thai="Thai",A.Tigrinya="Tigrinya",A.Tsonga="Tsonga",A.Turkish="Turkish",A.Turkmen="Turkmen",A.Twi="Twi (Akan)",A.Ukrainian="Ukrainian",A.Urdu="Urdu",A.Uyghur="Uyghur",A.Uzbek="Uzbek",A.Vietnamese="Vietnamese",A.Welsh="Welsh",A.Xhosa="Xhosa",A.Yiddish="Yiddish",A.Yoruba="Yoruba",A.Zulu="Zulu",t.SimilarityMetrics=ep,(ep||(t.SimilarityMetrics=ep={})).JaroWinkler="jaro-winkler",t.PRPLinterModelOption=eu,(k=eu||(t.PRPLinterModelOption=eu={})).GPT3Turbo="gpt-3.5-turbo",k.GPT4="gpt-4",k.GPT4Turbo="gpt-4-turbo-preview",k.GPT4O="gpt-4o",k.GPTO3="o3",k.GPTO3High="o3-high",k.GPTO3Mini="o3-mini",k.GPTO3MiniHigh="o3-mini-high",k.GPTO4Mini="o4-mini",k.GPTO4MiniHigh="o4-mini-high",k.GeminiFlash25Flash0520="gemini-2.5-flash-preview-05-20",k.GeminiPro2="gemini-2.5-pro-exp-03-25",t.RatingCriteriaLinterRatingField=ed,(N=ed||(t.RatingCriteriaLinterRatingField=ed={})).Value="value",N.Label="label";let ev={[eu.GPT3Turbo]:{name:"GPT-3.5 Turbo",isAccessibleByDefault:!0},[eu.GPT4]:{name:"GPT-4",isAccessibleByDefault:!0},[eu.GPT4Turbo]:{name:"GPT-4 Turbo",isAccessibleByDefault:!0},[eu.GPT4O]:{name:"GPT-4o",isAccessibleByDefault:!0},[eu.GPTO3]:{name:"o3",isAccessibleByDefault:!1},[eu.GPTO3High]:{name:"o3-high",isAccessibleByDefault:!1},[eu.GPTO3Mini]:{name:"o3-mini",isAccessibleByDefault:!0},[eu.GPTO3MiniHigh]:{name:"o3-mini-high",isAccessibleByDefault:!0},[eu.GPTO4Mini]:{name:"o4-mini",isAccessibleByDefault:!0},[eu.GPTO4MiniHigh]:{name:"o4-mini-high",isAccessibleByDefault:!0},[eu.GeminiPro2]:{name:"Gemini 2.5 Pro",isAccessibleByDefault:!0},[eu.GeminiFlash25Flash0520]:{name:"Gemini 2.5 Flash",isAccessibleByDefault:!0}};t.PRPLinterModelInfo=ev,t.REASONING_MODEL_MIN_TOKEN_COUNT=5e3,t.PRP_LINTER_NAME="SCRIPT_chat-prompt-response-pair-linter",t.JSONATA_LINTER_NAME="SCRIPT_chat-jsonata-custom-linter",t.attemptIdToString=e=>"string"==typeof e?e:void 0===e.replicaNumber?e.attemptId:`${e.attemptId}-${e.replicaNumber}`,t.parseAttemptIdString=e=>{let[t,i]=e.split("-");return void 0===i?t:{attemptId:t,replicaNumber:parseInt(i)}}},893926:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnthropicMessagesParamsSchema=void 0;var n,s=(n=i(689510))&&n.__esModule?n:{default:n};let l=s.default.object({max_tokens:s.default.number().int().positive().describe("The maximum number of tokens to generate before stopping."),temperature:s.default.number().min(0).max(1).optional().describe("Amount of randomness injected into the response. Defaults to 1.0."),top_k:s.default.number().int().nonnegative().optional().describe("Only sample from the top K options for each subsequent token."),top_p:s.default.number().min(0).max(1).optional().describe("Use nucleus sampling; cuts off options once cumulative probability reaches top_p."),stop_sequences:s.default.array(s.default.string()).optional().describe("Custom text sequences that will cause the model to stop generating."),stream:s.default.boolean().optional().describe("Whether to incrementally stream the response using server-sent events."),system:s.default.string().optional().describe("A system prompt providing context and instructions to Claude."),metadata:s.default.object({}).optional().describe("An object describing metadata about the request."),tools:s.default.array(s.default.object({}).passthrough()).transform(e=>0===e.length?void 0:e).optional().describe("A list of tools the model may call.")});t.AnthropicMessagesParamsSchema=l},527096:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},s=_interopRequireWildcard(i(893926));Object.keys(s).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var l=_interopRequireWildcard(i(421584));Object.keys(l).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))});var p=_interopRequireWildcard(i(19016));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}}return t.default=e,t}Object.keys(p).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))})},421584:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIChatCompletionParamsSchema=t.FunctionObjectSchema=t.OpenAIModelsSchema=void 0;var n=i(689510);let s=n.z.string().describe("Models available from OpenAI.");t.OpenAIModelsSchema=s;let l=n.z.object({description:n.z.string().optional().describe("A description of what the function does, used by the model to choose when and how to call the function."),name:n.z.string().describe("The name of the function to be called. Must be a-z, A-Z, 0-9, or contain underscores and dashes, with a maximum length of 64."),parameters:n.z.any().optional(),strict:n.z.boolean().optional().describe("Whether to enable strict schema adherence when generating the function call. If set to true, the model will follow the exact schema defined in the `parameters` field. Only a subset of JSON Schema is supported when `strict` is `true`. Learn more about Structured Outputs in the [function calling guide](docs/guides/function-calling).")});t.FunctionObjectSchema=l;let p=n.z.object({stream:n.z.boolean().optional().describe("If set, partial message deltas will be sent, like in ChatGPT. Tokens will be sent as data-only [server-sent events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events#Event_stream_format) as they become available, with the stream terminated by a `data: [DONE]` message."),stream_options:n.z.object({include_usage:n.z.boolean().optional().describe("If set, an additional chunk will be streamed before the data: [DONE] message. The usage field on this chunk shows the token usage statistics for the entire request, and the choices field will always be an empty array. All other chunks will also include a usage field, but with a null value.")}).optional(),temperature:n.z.number().min(0).max(2).optional().describe("What sampling temperature to use, between 0 and 2. Higher values like 0.8 will make the output more random, while lower values like 0.2 will make it more focused and deterministic."),top_p:n.z.number().min(0).max(1).optional().describe("An alternative to sampling with temperature, called nucleus sampling, where the model considers the results of the tokens with top_p probability mass. So 0.1 means only the tokens comprising the top 10% probability mass are considered."),frequency_penalty:n.z.number().min(-2).max(2).optional().describe("Number between -2.0 and 2.0. Positive values penalize new tokens based on their existing frequency in the text so far, decreasing the model's likelihood to repeat the same line verbatim."),logit_bias:n.z.record(n.z.string(),n.z.number().min(-100).max(100)).optional().describe("Modify the likelihood of specified tokens appearing in the completion."),logprobs:n.z.boolean().optional().describe("Whether to return log probabilities of the output tokens or not."),top_logprobs:n.z.number().min(0).max(20).optional().describe("An integer between 0 and 20 specifying the number of most likely tokens to return at each token position, each with an associated log probability. `logprobs` must be set to `true` if this parameter is used."),max_tokens:n.z.number().optional().describe("The maximum number of [tokens](/tokenizer) that can be generated in the chat completion."),n:n.z.number().min(1).max(128).optional().describe("How many chat completion choices to generate for each input message. Note that you will be charged based on the number of generated tokens across all of the choices. Keep `n` as `1` to minimize costs."),presence_penalty:n.z.number().min(-2).max(2).optional().describe("Number between -2.0 and 2.0. Positive values penalize new tokens based on whether they appear in the text so far, increasing the model's likelihood to talk about new topics."),response_format:n.z.discriminatedUnion("type",[n.z.object({type:n.z.literal("json_schema"),json_schema:n.z.record(n.z.any())}),n.z.object({type:n.z.literal("json_object")}),n.z.object({type:n.z.literal("text")})]).optional().describe("An object specifying the format that the model must output."),seed:n.z.number().min(-0x8000000000000000).max(0x7fffffffffffffff).optional().describe("This feature is in Beta. If specified, our system will make a best effort to sample deterministically, such that repeated requests with the same `seed` and parameters should return the same result."),service_tier:n.z.enum(["auto","default"]).optional().describe("Specifies the latency tier to use for processing the request. This parameter is relevant for customers subscribed to the scale tier service."),stop:n.z.array(n.z.string()).optional().describe("Up to 4 sequences where the API will stop generating further tokens."),tools:n.z.array(n.z.object({}).passthrough()).transform(e=>0===e.length?void 0:e).optional().describe("A list of tools the model may call. Currently, functions and googleSearchRetrieval are supported as tools. Use this to provide if googleSearchRetrieval is needed or a list of functions (max 128) that the model may generate JSON inputs for."),tool_choice:n.z.record(n.z.any()).optional(),parallel_tool_calls:n.z.record(n.z.any()).optional(),user:n.z.string().optional().describe("A unique identifier representing your end-user, which can help OpenAI to monitor and detect abuse."),audio:n.z.object({format:n.z.enum(["mp3","wav","flac","opus","pcm16"]).describe("Specifies the output audio format. Must be one of wav, mp3, flac, opus, or pcm16"),voice:n.z.enum(["alloy","ash","ballad","coral","echo","sage","shimmer"]).describe("The voice the model uses to respond. Supported voices are alloy, ash, ballad, coral, echo, sage, and shimmer")}).optional().describe('Parameters for audio output. Required when audio output is requested with modalities: ["audio"]'),max_completion_tokens:n.z.number().int().optional().describe("An upper bound for the number of tokens that can be generated for a completion, including visible output tokens and reasoning tokens."),modalities:n.z.array(n.z.string()).optional().describe('Output types that you would like the model to generate. Most models are capable of generating text, which is the default: ["text"]. The gpt-4o-audio-preview model can also be used to generate audio. To request that this model generate both text and audio responses, you can use: ["text", "audio"]'),reasoning_effort:n.z.enum(["low","medium","high"]).optional().describe("Constrains effort on reasoning for reasoning models. Currently supported values are low, medium, and high. Reducing reasoning effort can result in faster responses and fewer tokens used on reasoning in a response."),thinking:n.z.object({type:n.z.enum(["enabled","disabled"]),budget_tokens:n.z.number().positive().optional()}).optional().describe("Thinking param to be used for the model. This is translated to Gemini's thinkingConfig parameter when using Gemini.")});t.OpenAIChatCompletionParamsSchema=p},19016:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VLLMAdditionalParamsSchema=void 0;var n=i(689510);let s=n.z.object({best_of:n.z.number().int().optional().describe(`Number of output sequences that are generated from the prompt.
    From these 'best_of' sequences, the top 'n' sequences are returned.
    'best_of' must be greater than or equal to 'n'. This is treated as
    the beam width when 'use_beam_search' is True. By default, 'best_of'
    is set to 'n'.`),top_k:n.z.number().int().min(-1).optional().describe("Controls the number of top tokens to consider. -1 means consider all tokens."),min_p:n.z.number().min(0).max(1).optional().describe(`Float that represents the minimum probability for a token to be
    considered, relative to the probability of the most likely token.
    Must be in [0, 1]. Set to 0 to disable this.`),use_beam_search:n.z.boolean().optional().describe("Whether to use beam search for sampling."),length_penalty:n.z.number().optional().describe(`Float that penalizes sequences based on their length.
    Used in beam search.`),repetition_penalty:n.z.number().optional().describe(`Float that penalizes new tokens based on whether
    they appear in the prompt and the generated text so far. Values > 1
    encourage the model to use new tokens, while values < 1 encourage
    the model to repeat tokens.`),early_stopping:n.z.boolean().optional().describe(`Controls the stopping condition for beam search. It
    accepts the following values: 'True', where the generation stops as
    soon as there are 'best_of' complete candidates; 'False', where an
    heuristic is applied and the generation stops when is it very
    unlikely to find better candidates; 'never', where the beam search
    procedure only stops when there cannot be better candidates
    (canonical beam search algorithm).`),stop_token_ids:n.z.array(n.z.number().int()).optional().describe(`List of tokens that stop the generation when they are
    generated. The returned output will contain the stop tokens unless
    the stop tokens are special tokens.`),include_stop_str_in_output:n.z.boolean().optional().describe(`Whether to include the stop strings in
    output text. Defaults to False.`),ignore_eos:n.z.boolean().optional().describe(`Whether to ignore the EOS token and continue generating
    tokens after the EOS token is generated.`),min_tokens:n.z.number().int().optional().describe(`Minimum number of tokens to generate per output sequence
    before EOS or stop_token_ids can be generated`),skip_special_tokens:n.z.boolean().optional().describe("Whether to skip special tokens in the output. Only supported in vllm."),spaces_between_special_tokens:n.z.boolean().optional().describe("Whether to add spaces between special tokens in the output. Only supported in vllm."),chat_template:n.z.string().describe("A Jinja template to use for this conversion").optional(),chat_template_kwargs:n.z.record(n.z.any()).describe("Additional kwargs to pass to the template render").optional(),guided_json:n.z.record(n.z.any()).describe("JSON schema for guided decoding").optional(),guided_regex:n.z.string().describe("Regex for guided decoding").optional(),guided_choice:n.z.array(n.z.string()).describe("Choices for guided decoding").optional(),guided_grammar:n.z.string().describe("Context-free grammar for guided decoding").optional(),guided_decoding_backend:n.z.enum(["outlines","lm-format-enforcer"]).describe("Guided decoding backend").optional(),guided_whitespace_pattern:n.z.string().describe("Whitespace pattern for guided json decoding").optional()});t.VLLMAdditionalParamsSchema=s},388703:function(e,t){"use strict";var i,n,s,l,p,u,d,m;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_EGREGIOUS_THRESHOLDS=t.EgregiousnessLevel=t.CustomEndpointType=t.PromptResponsePairQualityMetricType=t.SingletonQualityMetricType=t.QualityMetricType=void 0,t.QualityMetricType=i,(u=i||(t.QualityMetricType=i={})).GrammaticalityNormalized="Grammaticality-Normalized",u.PassiveVoiceNormalized="PassiveVoice-Normalized",u.LogicalComplexityNormalized="LogicalComplexity-Normalized",u.WritingLevelNormalized="WritingLevel-Normalized",u.ContradictionsNormalized="Contradictions-Normalized",u.SemanticRepetitionNormalized="SemanticRepetition-Normalized",u.RelevanceNormalized="Relevance-Normalized",u.InformativenessNormalized="Informativeness-Normalized",u.SpamNormalized="Spam-Normalized",u.ToxicityNormalized="Toxicity-Normalized",u.MultilingualToxicityNormalized="MultilingualToxicity-Normalized",t.SingletonQualityMetricType=n,(d=n||(t.SingletonQualityMetricType=n={})).GrammaticalityNormalized="Grammaticality-Normalized",d.PassiveVoiceNormalized="PassiveVoice-Normalized",d.LogicalComplexityNormalized="LogicalComplexity-Normalized",d.WritingLevelNormalized="WritingLevel-Normalized",d.ContradictionsNormalized="Contradictions-Normalized",d.SemanticRepetitionNormalized="SemanticRepetition-Normalized",d.SpamNormalized="Spam-Normalized",d.ToxicityNormalized="Toxicity-Normalized",d.MultilingualToxicityNormalized="MultilingualToxicity-Normalized",t.PromptResponsePairQualityMetricType=s,(s||(t.PromptResponsePairQualityMetricType=s={})).RelevanceNormalized="Relevance-Normalized",t.CustomEndpointType=l,(l||(t.CustomEndpointType=l={})).LazarusCodePromptCategory="LazarusCodePromptCategory",t.EgregiousnessLevel=p,(m=p||(t.EgregiousnessLevel=p={})).Egregious="Egregious",m.Suspect="Suspect",m.Acceptable="Acceptable";let h={[i.GrammaticalityNormalized]:{promptThresholds:{egregiousThreshold:.05,suspectThreshold:.15},completionThresholds:{egregiousThreshold:.05,suspectThreshold:.15}},[i.SpamNormalized]:{promptThresholds:{egregiousThreshold:.4,suspectThreshold:.5},completionThresholds:{egregiousThreshold:.4,suspectThreshold:.5}},[i.ToxicityNormalized]:{promptThresholds:{egregiousThreshold:.9,suspectThreshold:.95},completionThresholds:{egregiousThreshold:.9,suspectThreshold:.95}},[i.MultilingualToxicityNormalized]:{promptThresholds:{egregiousThreshold:.1,suspectThreshold:.2},completionThresholds:{egregiousThreshold:.1,suspectThreshold:.2}},[i.PassiveVoiceNormalized]:{},[i.LogicalComplexityNormalized]:{},[i.WritingLevelNormalized]:{},[i.ContradictionsNormalized]:{},[i.SemanticRepetitionNormalized]:{},[i.RelevanceNormalized]:{},[i.InformativenessNormalized]:{}};t.DEFAULT_EGREGIOUS_THRESHOLDS=h},191534:function(e,t){"use strict";var i,n,s,l;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextGradingType=t.FreeTextGradingModelOption=void 0,t.FreeTextGradingModelOption=i,(s=i||(t.FreeTextGradingModelOption=i={})).GPT_4o="gpt_4o",s.GPT_o1_PREVIEW="gpt_o1_preview",s.GPT_o1_MINI="gpt_o1_mini",s.GPT_O4_MINI="gpt_o4_mini",s.GPT_O4_MINI_HIGH="gpt_o4_mini_high",t.FreeTextGradingType=n,(l=n||(t.FreeTextGradingType=n={})).Course="course",l.Benchmark="benchmark"},39300:function(e){var t,i;self,e.exports=(t={7629:(e,t,i)=>{"use strict";let n=i(375),s=i(8571),l=i(9474),p=i(1687),u=i(8652),d=i(8160),m=i(3292),h=i(6354),g=i(8901),f=i(9708),y=i(6914),b=i(2294),T=i(6133),S=i(1152),_=i(8863),v=i(2036),L={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new b.Ids,this._preferences=null,this._refs=new T.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return n("function"==typeof f.describe,"Manifest functionality disabled"),f.describe(this)}allow(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return d.verifyFlat(t,"allow"),this._values(t,"_valids")}alter(e){n(e&&"object"==typeof e&&!Array.isArray(e),"Invalid targets argument"),n(!this._inRuleset(),"Cannot set alterations inside a ruleset");let t=this.clone();for(let i in t.$_terms.alterations=t.$_terms.alterations||[],e){let s=e[i];n("function"==typeof s,"Alteration adjuster for",i,"must be a function"),t.$_terms.alterations.push({target:i,adjuster:s})}return t.$_temp.ruleset=!1,t}artifact(e){return n(void 0!==e,"Artifact cannot be undefined"),n(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",e)}cast(e){return n(!1===e||"string"==typeof e,"Invalid to value"),n(!1===e||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",!1===e?void 0:e)}default(e,t){return this._default("default",e,t)}description(e){return n(e&&"string"==typeof e,"Description must be a non-empty string"),this.$_setFlag("description",e)}empty(e){let t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(e){return n(e,"Missing error"),n(e instanceof Error||"function"==typeof e,"Must provide a valid Error object or a function"),this.$_setFlag("error",e)}example(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(void 0!==e,"Missing example"),d.assertOptions(t,["override"]),this._inner("examples",e,{single:!0,override:t.override})}external(e,t){return"object"==typeof e&&(n(!t,"Cannot combine options with description"),t=e.description,e=e.method),n("function"==typeof e,"Method must be a function"),n(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this._inner("externals",{method:e,description:t},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(e){return e?(n("string"==typeof e,"id must be a non-empty string"),n(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}invalid(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._values(t,"_invalids")}label(e){return n(e&&"string"==typeof e,"Label name must be a non-empty string"),this.$_setFlag("label",e)}meta(e){return n(void 0!==e,"Meta cannot be undefined"),this._inner("metas",e,{single:!0})}note(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let e of(n(t.length,"Missing notes"),t))n(e&&"string"==typeof e,"Notes must be non-empty strings");return this._inner("notes",t)}only(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"Invalid mode:",e),this.$_setFlag("only",e)}optional(){return this.presence("optional")}prefs(e){n(e,"Missing preferences"),n(void 0===e.context,"Cannot override context"),n(void 0===e.externals,"Cannot override externals"),n(void 0===e.warnings,"Cannot override warnings"),n(void 0===e.debug,"Cannot override debug"),d.checkPreferences(e);let t=this.clone();return t._preferences=d.preferences(t._preferences,e),t}presence(e){return n(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}raw(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"raw":void 0)}result(e){return n(["raw","strip"].includes(e),"Unknown result mode",e),this.$_setFlag("result",e)}required(){return this.presence("required")}strict(e){let t=this.clone();return t._preferences=d.preferences(t._preferences,{convert:void 0!==e&&!e}),t}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"strip":void 0)}tag(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let e of(n(t.length,"Missing tags"),t))n(e&&"string"==typeof e,"Tags must be non-empty strings");return this._inner("tags",t)}unit(e){return n(e&&"string"==typeof e,"Unit name must be a non-empty string"),this.$_setFlag("unit",e)}valid(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];d.verifyFlat(t,"valid");let n=this.allow(...t);return n.$_setFlag("only",!!n._valids,{clone:!1}),n}when(e,t){let i=this.clone();i.$_terms.whens||(i.$_terms.whens=[]);let s=m.when(i,e,t);if(!["any","link"].includes(i.type)){let e=s.is?[s]:s.switch;for(let t of e)n(!t.then||"any"===t.then.type||t.then.type===i.type,"Cannot combine",i.type,"with",t.then&&t.then.type),n(!t.otherwise||"any"===t.otherwise.type||t.otherwise.type===i.type,"Cannot combine",i.type,"with",t.otherwise&&t.otherwise.type)}return i.$_terms.whens.push(s),i.$_mutateRebuild()}cache(e){n(!this._inRuleset(),"Cannot set caching inside a ruleset"),n(!this._cache,"Cannot override schema cache"),n(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");let t=this.clone();return t._cache=e||u.provider.provision(),t.$_temp.ruleset=!1,t}clone(){let e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(e){n(d.isSchema(e),"Invalid schema object"),n("any"===this.type||"any"===e.type||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type),n(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),n(!e._inRuleset(),"Cannot concatenate a schema with open ruleset");let t=this.clone();if("any"===this.type&&"any"!==e.type){let i=e.clone();for(let e of Object.keys(t))"type"!==e&&(i[e]=t[e]);t=i}for(let i of(t._ids.concat(e._ids),t._refs.register(e,T.toSibling),t._preferences=t._preferences?d.preferences(t._preferences,e._preferences):e._preferences,t._valids=v.merge(t._valids,e._valids,e._invalids),t._invalids=v.merge(t._invalids,e._invalids,e._valids),e._singleRules.keys()))t._singleRules.has(i)&&(t._rules=t._rules.filter(e=>e.keep||e.name!==i),t._singleRules.delete(i));for(let i of e._rules)e._definition.rules[i.method].multi||t._singleRules.set(i.name,i),t._rules.push(i);if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);let i=Object.assign({},e._flags);delete i.empty,p(t._flags,i)}else if(e._flags.empty){t._flags.empty=e._flags.empty;let i=Object.assign({},e._flags);delete i.empty,p(t._flags,i)}else p(t._flags,e._flags);for(let i in e.$_terms){let n=e.$_terms[i];n?t.$_terms[i]?t.$_terms[i]=t.$_terms[i].concat(n):t.$_terms[i]=n.slice():t.$_terms[i]||(t.$_terms[i]=n)}return this.$_root._tracer&&this.$_root._tracer._combine(t,[this,e]),t.$_mutateRebuild()}extend(e){return n(!e.base,"Cannot extend type with another base"),g.type(this,e)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(e,t){n(!this._inRuleset(),"Cannot fork inside a ruleset");let i=this;for(let n of[].concat(e))n=Array.isArray(n)?n:n.split("."),i=i._ids.fork(n,t,i);return i.$_temp.ruleset=!1,i}rule(e){let t=this._definition;d.assertOptions(e,Object.keys(t.modifiers)),n(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");let i=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;n(i>=0&&i<this._rules.length,"Cannot apply rules to empty ruleset");let l=this.clone();for(let p=i;p<l._rules.length;++p){let i=l._rules[p],u=s(i);for(let s in e)t.modifiers[s](u,e[s]),n(u.name===i.name,"Cannot change rule name");l._rules[p]=u,l._singleRules.get(u.name)===i&&l._singleRules.set(u.name,u)}return l.$_temp.ruleset=!1,l.$_mutateRebuild()}get ruleset(){n(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");let e=this.clone();return e.$_temp.ruleset=e._rules.length,e}get $(){return this.ruleset}tailor(e){e=[].concat(e),n(!this._inRuleset(),"Cannot tailor inside a ruleset");let t=this;if(this.$_terms.alterations)for(let{target:i,adjuster:s}of this.$_terms.alterations)e.includes(i)&&(t=s(t),n(d.isSchema(t),"Alteration adjuster for",i,"failed to return a schema object"));return(t=t.$_modify({each:t=>t.tailor(e),ref:!1})).$_temp.ruleset=!1,t.$_mutateRebuild()}tracer(){return S.location?S.location(this):this}validate(e,t){return _.entry(e,this,t)}validateAsync(e,t){return _.entryAsync(e,this,t)}$_addRule(e){for(let t in"string"==typeof e&&(e={name:e}),n(e&&"object"==typeof e,"Invalid options"),n(e.name&&"string"==typeof e.name,"Invalid rule name"),e)n("_"!==t[0],"Cannot set private rule properties");let t=Object.assign({},e);t._resolve=[],t.method=t.method||t.name;let i=this._definition.rules[t.method],s=t.args;n(i,"Unknown rule",t.method);let l=this.clone();if(s)for(let e in n(1===Object.keys(s).length||Object.keys(s).length===this._definition.rules[t.name].args.length,"Invalid rule definition for",this.type,t.name),s){let p=s[e];if(i.argsByName){let u=i.argsByName.get(e);if(u.ref&&d.isResolvable(p))t._resolve.push(e),l.$_mutateRegister(p);else if(u.normalize&&(p=u.normalize(p),s[e]=p),u.assert){let t=d.validateArg(p,e,u);n(!t,t,"or reference")}}void 0!==p?s[e]=p:delete s[e]}return i.multi||(l._ruleRemove(t.name,{clone:!1}),l._singleRules.set(t.name,t)),!1===l.$_temp.ruleset&&(l.$_temp.ruleset=null),i.priority?l._rules.unshift(t):l._rules.push(t),l}$_compile(e,t){return m.schema(this.$_root,e,t)}$_createError(e,t,i,n,s){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},p=!1!==l.flags?this._flags:{},u=l.messages?y.merge(this._definition.messages,l.messages):this._definition.messages;return new h.Report(e,t,i,p,u,n,s)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,i,n){(i=Object.assign({},i)).abortEarly=!0,i._externals=!1,t.snapshot();let s=!_.validate(e,this,t,i,n).errors;return t.restore(),s}$_modify(e){return d.assertOptions(e,["each","once","ref","schema"]),b.schema(this,e)||this}$_mutateRebuild(){return n(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(e,t)=>{let{source:i,name:n,path:s,key:l}=t,p=this._definition[i][n]&&this._definition[i][n].register;!1!==p&&this.$_mutateRegister(e,{family:p,key:l})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e){let{family:t,key:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._refs.register(e,t),this._ids.register(e,{key:i})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n("_"===e[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");let s=this._definition.flags[e]||{};if(l(t,s.default)&&(t=void 0),l(t,this._flags[e]))return this;let p=!1!==i.clone?this.clone():this;return void 0!==t?(p._flags[e]=t,p.$_mutateRegister(t)):delete p._flags[e],"_"!==e[0]&&(p.$_temp.ruleset=!1),p}$_parent(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return this[e][d.symbols.parent].call(this,...i)}$_validate(e,t,i){return _.validate(e,this,t,i)}_assign(e){for(let t in e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=s(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={},this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;for(let t in e.$_super={},this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){let e=this.clone();e._reset();let t=e._definition.terms;for(let i in t){let n=t[i];e.$_terms[i]=n.init}return e.$_mutateRebuild()}_default(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d.assertOptions(i,"literal"),n(void 0!==t,"Missing",e,"value"),n("function"==typeof t||!i.literal,"Only function value supports literal option"),"function"==typeof t&&i.literal&&(t={[d.symbols.literal]:!0,literal:t}),this.$_setFlag(e,t)}_generate(e,t,i){if(!this.$_terms.whens)return{schema:this};let n=[],s=[];for(let l=0;l<this.$_terms.whens.length;++l){let p=this.$_terms.whens[l];if(p.concat){n.push(p.concat),s.push(`${l}.concat`);continue}let u=p.ref?p.ref.resolve(e,t,i):e,d=p.is?[p]:p.switch,m=s.length;for(let m=0;m<d.length;++m){let{is:h,then:g,otherwise:f}=d[m],y=`${l}${p.switch?"."+m:""}`;if(h.$_match(u,t.nest(h,`${y}.is`),i)){if(g){let l=t.localize([...t.path,`${y}.then`],t.ancestors,t.schemas),{schema:p,id:u}=g._generate(e,l,i);n.push(p),s.push(`${y}.then${u?`(${u})`:""}`);break}}else if(f){let l=t.localize([...t.path,`${y}.otherwise`],t.ancestors,t.schemas),{schema:p,id:u}=f._generate(e,l,i);n.push(p),s.push(`${y}.otherwise${u?`(${u})`:""}`);break}}if(p.break&&s.length>m)break}let l=s.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",l),!l)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[l])return{schema:this.$_temp.whens[l],id:l};let p=this;for(let s of(this._definition.generate&&(p=this._definition.generate(this,e,t,i)),n))p=p.concat(s);return this.$_root._tracer&&this.$_root._tracer._combine(p,[this,...n]),this.$_temp.whens[l]=p,{schema:p,id:l}}_inner(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(!this._inRuleset(),`Cannot set ${e} inside a ruleset`);let s=this.clone();return s.$_terms[e]&&!i.override||(s.$_terms[e]=[]),i.single?s.$_terms[e].push(t):s.$_terms[e].push(...t),s.$_temp.ruleset=!1,s}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._singleRules.has(e))return this;let i=!1!==t.clone?this.clone():this;i._singleRules.delete(e);let n=[];for(let t=0;t<i._rules.length;++t){let s=i._rules[t];s.name!==e||s.keep?n.push(s):i._inRuleset()&&t<i.$_temp.ruleset&&--i.$_temp.ruleset}return i._rules=n,i}_values(e,t){d.verifyFlat(e,t.slice(1,-1));let i=this.clone(),s=e[0]===d.symbols.override;if(s&&(e=e.slice(1)),!i[t]&&e.length?i[t]=new v:s&&(i[t]=e.length?new v:null,i.$_mutateRebuild()),!i[t])return i;for(let l of(s&&i[t].override(),e)){n(void 0!==l,"Cannot call allow/valid/invalid with undefined"),n(l!==d.symbols.override,"Override must be the first value");let e="_invalids"===t?"_valids":"_invalids";i[e]&&(i[e].remove(l),i[e].length||(n("_valids"===t||!i._flags.only,"Setting invalid value",l,"leaves schema rejecting all values due to previous valid rule"),i[e]=null)),i[t].add(l,i._refs)}return i}}};L.Base.prototype[d.symbols.any]={version:d.version,compile:m.compile,root:"$_root"},L.Base.prototype.isImmutable=!0,L.Base.prototype.deny=L.Base.prototype.invalid,L.Base.prototype.disallow=L.Base.prototype.invalid,L.Base.prototype.equal=L.Base.prototype.valid,L.Base.prototype.exist=L.Base.prototype.required,L.Base.prototype.not=L.Base.prototype.invalid,L.Base.prototype.options=L.Base.prototype.prefs,L.Base.prototype.preferences=L.Base.prototype.prefs,e.exports=new L.Base},8652:(e,t,i)=>{"use strict";let n=i(375),s=i(8571),l=i(8160),p={max:1e3,supported:new Set(["undefined","boolean","number","string"])};t.provider={provision:e=>new p.Cache(e)},p.Cache=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.assertOptions(e,["max"]),n(void 0===e.max||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||p.max,this._map=new Map,this._list=new p.List}get length(){return this._map.size}set(e,t){if(null!==e&&!p.supported.has(typeof e))return;let i=this._map.get(e);if(i)return i.value=t,void this._list.first(i);i=this._list.unshift({key:e,value:t}),this._map.set(e,i),this._compact()}get(e){let t=this._map.get(e);if(t)return this._list.first(t),s(t.value)}_compact(){if(this._map.size>this._max){let e=this._list.pop();this._map.delete(e.key)}}},p.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){let{next:t,prev:i}=e;return t.prev=i,i&&(i.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}}},8160:(e,t,i)=>{"use strict";let n,s;let l=i(375),p=i(7916),u=i(5934);t.version=u.version,t.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},t.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},t.assertOptions=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Options";l(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");let n=Object.keys(e).filter(e=>!t.includes(e));l(0===n.length,`${i} contain unknown keys: ${n}`)},t.checkPreferences=function(e){s=s||i(3378);let t=s.preferences.validate(e);if(t.error)throw new p([t.error.details[0].message])},t.compare=function(e,t,i){switch(i){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},t.default=function(e,t){return void 0===e?t:e},t.isIsoDate=function(e){return/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/.test(e)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isResolvable=function(e){return!!e&&(e[t.symbols.ref]||e[t.symbols.template])},t.isSchema=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e&&e[t.symbols.any];return!!n&&(l(i.legacy||n.version===t.version,"Cannot mix different versions of joi schemas"),!0)},t.isValues=function(e){return e[t.symbols.values]},t.limit=function(e){return Number.isSafeInteger(e)&&e>=0},t.preferences=function(e,s){n=n||i(6914),e=e||{},s=s||{};let l=Object.assign({},e,s);return s.errors&&e.errors&&(l.errors=Object.assign({},e.errors,s.errors),l.errors.wrap=Object.assign({},e.errors.wrap,s.errors.wrap)),s.messages&&(l.messages=n.compile(s.messages,e.messages)),delete l[t.symbols.prefs],l},t.tryWithPath=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,i.append&&(e.message=`${e.message} (${e.path})`),e}},t.validateArg=function(e,i,n){let{assert:s,message:l}=n;if(t.isSchema(s)){let t=s.validate(e);if(!t.error)return;return t.error.message}if(!s(e))return i?`${i} ${l}`:l},t.verifyFlat=function(e,t){for(let i of e)l(!Array.isArray(i),"Method no longer accepts array arguments:",t)}},3292:(e,t,i)=>{"use strict";let n=i(375),s=i(8160),l=i(6133),p={};t.schema=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s.assertOptions(i,["appendPath","override"]);try{return p.schema(e,t,i)}catch(e){throw i.appendPath&&void 0!==e.path&&(e.message=`${e.message} (${e.path})`),e}},p.schema=function(e,t,i){n(void 0!==t,"Invalid undefined schema"),Array.isArray(t)&&(n(t.length,"Invalid empty array schema"),1===t.length&&(t=t[0]));let a=function(t){for(var n=arguments.length,s=Array(n>1?n-1:0),l=1;l<n;l++)s[l-1]=arguments[l];return!1!==i.override?t.valid(e.override,...s):t.valid(...s)};if(p.simple(t))return a(e,t);if("function"==typeof t)return e.custom(t);if(n("object"==typeof t,"Invalid schema content:",typeof t),s.isResolvable(t))return a(e,t);if(s.isSchema(t))return t;if(Array.isArray(t)){for(let i of t)if(!p.simple(i))return e.alternatives().try(...t);return a(e,...t)}return t instanceof RegExp?e.string().regex(t):t instanceof Date?a(e.date(),t):(n(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))},t.ref=function(e,t){return l.isRef(e)?e:l.create(e,t)},t.compile=function(e,i){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s.assertOptions(l,["legacy"]);let u=i&&i[s.symbols.any];if(u)return n(l.legacy||u.version===s.version,"Cannot mix different versions of joi schemas:",u.version,s.version),i;if("object"!=typeof i||!l.legacy)return t.schema(e,i,{appendPath:!0});let d=p.walk(i);return d?d.compile(d.root,i):t.schema(e,i,{appendPath:!0})},p.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(let t of e){let e=p.walk(t);if(e)return e}return null}let t=e[s.symbols.any];if(t)return{root:e[t.root],compile:t.compile};for(let t in n(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e){let i=p.walk(e[t]);if(i)return i}return null},p.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},t.when=function(e,i,u){if(void 0===u&&(n(i&&"object"==typeof i,"Missing options"),u=i,i=l.create(".")),Array.isArray(u)&&(u={switch:u}),s.assertOptions(u,["is","not","then","otherwise","switch","break"]),s.isSchema(i))return n(void 0===u.is,'"is" can not be used with a schema condition'),n(void 0===u.not,'"not" can not be used with a schema condition'),n(void 0===u.switch,'"switch" can not be used with a schema condition'),p.condition(e,{is:i,then:u.then,otherwise:u.otherwise,break:u.break});if(n(l.isRef(i)||"string"==typeof i,"Invalid condition:",i),n(void 0===u.not||void 0===u.is,'Cannot combine "is" with "not"'),void 0===u.switch){let d=u;void 0!==u.not&&(d={is:u.not,then:u.otherwise,otherwise:u.then,break:u.break});let m=void 0!==d.is?e.$_compile(d.is):e.$_root.invalid(null,!1,0,"").required();return n(void 0!==d.then||void 0!==d.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),n(void 0===d.break||void 0===d.then||void 0===d.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===u.is||l.isRef(u.is)||s.isSchema(u.is)||(m=m.required()),p.condition(e,{ref:t.ref(i),is:m,then:d.then,otherwise:d.otherwise,break:d.break})}n(Array.isArray(u.switch),'"switch" must be an array'),n(void 0===u.is,'Cannot combine "switch" with "is"'),n(void 0===u.not,'Cannot combine "switch" with "not"'),n(void 0===u.then,'Cannot combine "switch" with "then"');let d={ref:t.ref(i),switch:[],break:u.break};for(let t=0;t<u.switch.length;++t){let i=u.switch[t],p=t===u.switch.length-1;s.assertOptions(i,p?["is","then","otherwise"]:["is","then"]),n(void 0!==i.is,'Switch statement missing "is"'),n(void 0!==i.then,'Switch statement missing "then"');let m={is:e.$_compile(i.is),then:e.$_compile(i.then)};if(l.isRef(i.is)||s.isSchema(i.is)||(m.is=m.is.required()),p){n(void 0===u.otherwise||void 0===i.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');let t=void 0!==u.otherwise?u.otherwise:i.otherwise;void 0!==t&&(n(void 0===d.break,"Cannot specify both otherwise and break"),m.otherwise=e.$_compile(t))}d.switch.push(m)}return d},p.condition=function(e,t){for(let i of["then","otherwise"])void 0===t[i]?delete t[i]:t[i]=e.$_compile(t[i]);return t}},6354:(e,t,i)=>{"use strict";let n=i(5688),s=i(8160),l=i(3328);t.Report=class{constructor(e,i,n,s,l,p,u){if(this.code=e,this.flags=s,this.messages=l,this.path=p.path,this.prefs=u,this.state=p,this.value=i,this.message=null,this.template=null,this.local=n||{},this.local.label=t.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){let e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){let e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;let e=this.code;if(!this.prefs.errors.render)return this.code;let t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(e,i){return t.template(this.value,e,i||this.code,this.state,this.prefs)}},t.path=function(e){let t="";for(let i of e)"object"!=typeof i&&("string"==typeof i?(t&&(t+="."),t+=i):t+=`[${i}]`);return t},t.template=function(e,t,i,n,p){if(!t)return;if(l.isTemplate(t))return"root"!==i?t:null;let u=p.errors.language;if(s.isResolvable(u)&&(u=u.resolve(e,n,p)),u&&t[u]){if(void 0!==t[u][i])return t[u][i];if(void 0!==t[u]["*"])return t[u]["*"]}return t[i]?t[i]:t["*"]},t.label=function(e,i,n,s){if(e.label)return e.label;if(!n.errors.label)return"";let l=i.path;return"key"===n.errors.label&&i.path.length>1&&(l=i.path.slice(-1)),t.path(l)||t.template(null,n.messages,"root",i,n)||s&&t.template(null,s,"root",i,n)||"value"},t.process=function(e,i,n){if(!e)return null;let{override:s,message:l,details:p}=t.details(e);if(s)return s;if(n.errors.stack)return new t.ValidationError(l,p,i);let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let d=new t.ValidationError(l,p,i);return Error.stackTraceLimit=u,d},t.details=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[],n=[];for(let s of e){if(s instanceof Error){if(!1!==t.override)return{override:s};let e=s.toString();i.push(e),n.push({message:e,type:"override",context:{error:s}});continue}let e=s.toString();i.push(e),n.push({message:e,path:s.path.filter(e=>"object"!=typeof e),type:s.code,context:s.local})}return i.length>1&&(i=[...new Set(i)]),{message:i.join(". "),details:n}},t.ValidationError=class extends Error{constructor(e,t,i){super(e),this._original=i,this.details=t}static isError(e){return e instanceof t.ValidationError}},t.ValidationError.prototype.isJoi=!0,t.ValidationError.prototype.name="ValidationError",t.ValidationError.prototype.annotate=n.error},8901:(e,t,i)=>{"use strict";let n=i(375),s=i(8571),l=i(8160),p=i(6914),u={};t.type=function(e,t){let i=Object.getPrototypeOf(e),d=s(i),m=e._assign(Object.create(d)),h=Object.assign({},t);delete h.base,d._definition=h;let g=i._definition||{};h.messages=p.merge(g.messages,h.messages),h.properties=Object.assign({},g.properties,h.properties),m.type=h.type,h.flags=Object.assign({},g.flags,h.flags);let f=Object.assign({},g.terms);if(h.terms)for(let e in h.terms){let t=h.terms[e];n(void 0===m.$_terms[e],"Invalid term override for",h.type,e),m.$_terms[e]=t.init,f[e]=t}h.terms=f,h.args||(h.args=g.args),h.prepare=u.prepare(h.prepare,g.prepare),h.coerce&&("function"==typeof h.coerce&&(h.coerce={method:h.coerce}),h.coerce.from&&!Array.isArray(h.coerce.from)&&(h.coerce={method:h.coerce.method,from:[].concat(h.coerce.from)})),h.coerce=u.coerce(h.coerce,g.coerce),h.validate=u.validate(h.validate,g.validate);let y=Object.assign({},g.rules);if(h.rules)for(let e in h.rules){let t=h.rules[e];n("object"==typeof t,"Invalid rule definition for",h.type,e);let i=t.method;if(void 0===i&&(i=function(){return this.$_addRule(e)}),i&&(n(!d[e],"Rule conflict in",h.type,e),d[e]=i),n(!y[e],"Rule conflict in",h.type,e),y[e]=t,t.alias){let e=[].concat(t.alias);for(let i of e)d[i]=t.method}t.args&&(t.argsByName=new Map,t.args=t.args.map(e=>("string"==typeof e&&(e={name:e}),n(!t.argsByName.has(e.name),"Duplicated argument name",e.name),l.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e)))}h.rules=y;let b=Object.assign({},g.modifiers);if(h.modifiers)for(let e in h.modifiers){n(!d[e],"Rule conflict in",h.type,e);let t=h.modifiers[e];n("function"==typeof t,"Invalid modifier definition for",h.type,e);let r=function(t){return this.rule({[e]:t})};d[e]=r,b[e]=t}if(h.modifiers=b,h.overrides){for(let e in d._super=i,m.$_super={},h.overrides)n(i[e],"Cannot override missing",e),h.overrides[e][l.symbols.parent]=i[e],m.$_super[e]=i[e].bind(m);Object.assign(d,h.overrides)}h.cast=Object.assign({},g.cast,h.cast);let T=Object.assign({},g.manifest,h.manifest);return T.build=u.build(h.manifest&&h.manifest.build,g.manifest&&g.manifest.build),h.manifest=T,h.rebuild=u.rebuild(h.rebuild,g.rebuild),m},u.build=function(e,t){return e&&t?function(i,n){return t(e(i,n),n)}:e||t},u.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(i,n){let s;if((!t.from||t.from.includes(typeof i))&&(s=t.method(i,n))){if(s.errors||void 0===s.value)return s;i=s.value}if(!e.from||e.from.includes(typeof i)){let t=e.method(i,n);if(t)return t}return s}}:e||t},u.prepare=function(e,t){return e&&t?function(i,n){let s=e(i,n);if(s){if(s.errors||void 0===s.value)return s;i=s.value}return t(i,n)||s}:e||t},u.rebuild=function(e,t){return e&&t?function(i){t(i),e(i)}:e||t},u.validate=function(e,t){return e&&t?function(i,n){let s=t(i,n);if(s){if(s.errors&&(!Array.isArray(s.errors)||s.errors.length))return s;i=s.value}return e(i,n)||s}:e||t}},5107:(e,t,i)=>{"use strict";let n;let s=i(375),l=i(8571),p=i(8652),u=i(8160),d=i(3292),m=i(6354),h=i(8901),g=i(9708),f=i(6133),y=i(3328),b=i(1152),T={types:{alternatives:i(4946),any:i(8068),array:i(546),boolean:i(4937),date:i(7500),function:i(390),link:i(8785),number:i(3832),object:i(8966),string:i(7417),symbol:i(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){let e={_types:new Set(Object.keys(T.types))};for(let t of e._types)e[t]=function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return s(!i.length||["alternatives","link","object"].includes(t),"The",t,"type does not allow arguments"),T.generate(this,T.types[t],i)};for(let t of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])e[t]=function(){return this.any()[t](...arguments)};for(let t in Object.assign(e,T.methods),T.aliases){let i=T.aliases[t];e[t]=e[i]}return e.x=e.expression,b.setup&&b.setup(e),e}};T.methods={ValidationError:m.ValidationError,version:u.version,cache:p.provider,assert(e,t){for(var i=arguments.length,n=Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];T.assert(e,t,!0,n)},attempt(e,t){for(var i=arguments.length,n=Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return T.assert(e,t,!1,n)},build(e){return s("function"==typeof g.build,"Manifest functionality disabled"),g.build(this,e)},checkPreferences(e){u.checkPreferences(e)},compile(e,t){return d.compile(this,e,t)},defaults(e){s("function"==typeof e,"modifier must be a function");let t=Object.assign({},this);for(let i of t._types){let n=e(t[i]());s(u.isSchema(n),"modifier must return a valid schema object"),t[i]=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return T.generate(this,n,t)}}return t},expression(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return new y(...t)},extend(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];u.verifyFlat(t,"extend"),n=n||i(3378),s(t.length,"You need to provide at least one extension"),this.assert(t,n.extensions);let p=Object.assign({},this);for(let e of(p._types=new Set(p._types),t)){"function"==typeof e&&(e=e(p)),this.assert(e,n.extension);let t=T.expandExtension(e,p);for(let e of t){s(void 0===p[e.type]||p._types.has(e.type),"Cannot override name",e.type);let t=e.base||this.any(),i=h.type(t,e);p._types.add(e.type),p[e.type]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.generate(this,i,t)}}}return p},isError:m.ValidationError.isError,isExpression:y.isTemplate,isRef:f.isRef,isSchema:u.isSchema,in(){return f.in(...arguments)},override:u.symbols.override,ref(){return f.create(...arguments)},types(){let e={};for(let t of this._types)e[t]=this[t]();for(let t in T.aliases)e[t]=this[t]();return e}},T.assert=function(e,t,i,n){let s=n[0]instanceof Error||"string"==typeof n[0]?n[0]:null,p=null!==s?n[1]:n[0],d=t.validate(e,u.preferences({errors:{stack:!0}},p||{})),h=d.error;if(!h)return d.value;if(s instanceof Error)throw s;let g=i&&"function"==typeof h.annotate?h.annotate():h.message;throw h instanceof m.ValidationError==0&&(h=l(h)),h.message=s?`${s} ${g}`:g,h},T.generate=function(e,t,i){return s(e,"Must be invoked on a Joi instance."),t.$_root=e,t._definition.args&&i.length?t._definition.args(t,...i):t},T.expandExtension=function(e,t){if("string"==typeof e.type)return[e];let i=[];for(let n of t._types)if(e.type.test(n)){let s=Object.assign({},e);s.type=n,s.base=t[n](),i.push(s)}return i},e.exports=T.root()},6914:(e,t,i)=>{"use strict";let n=i(375),s=i(8571),l=i(3328);t.compile=function(e,t){if("string"==typeof e)return n(!t,"Cannot set single message string"),new l(e);if(l.isTemplate(e))return n(!t,"Cannot set single message template"),e;for(let i in n("object"==typeof e&&!Array.isArray(e),"Invalid message options"),t=t?s(t):{},e){let s=e[i];if("root"===i||l.isTemplate(s)){t[i]=s;continue}if("string"==typeof s){t[i]=new l(s);continue}n("object"==typeof s&&!Array.isArray(s),"Invalid message for",i);let p=i;for(i in t[p]=t[p]||{},s){let e=s[i];"root"===i||l.isTemplate(e)?t[p][i]=e:(n("string"==typeof e,"Invalid message for",i,"in",p),t[p][i]=new l(e))}}return t},t.decompile=function(e){let t={};for(let i in e){let n=e[i];if("root"===i){t.root=n;continue}if(l.isTemplate(n)){t[i]=n.describe({compact:!0});continue}let s=i;for(i in t[s]={},n){let e=n[i];"root"!==i?t[s][i]=e.describe({compact:!0}):t[s].root=e}}return t},t.merge=function(e,i){if(!e)return t.compile(i);if(!i)return e;if("string"==typeof i)return new l(i);if(l.isTemplate(i))return i;let p=s(e);for(let e in i){let t=i[e];if("root"===e||l.isTemplate(t)){p[e]=t;continue}if("string"==typeof t){p[e]=new l(t);continue}n("object"==typeof t&&!Array.isArray(t),"Invalid message for",e);let s=e;for(e in p[s]=p[s]||{},t){let i=t[e];"root"===e||l.isTemplate(i)?p[s][e]=i:(n("string"==typeof i,"Invalid message for",e,"in",s),p[s][e]=new l(i))}}return p}},2294:(e,t,i)=>{"use strict";let n=i(375),s=i(8160),l=i(6133),p={};t.Ids=p.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){let e=new p.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){for(let[t,i]of(e._schemaChain&&(this._schemaChain=!0),e._byId.entries()))n(!this._byKey.has(t),"Schema id conflicts with existing key:",t),this._byId.set(t,i);for(let[t,i]of e._byKey.entries())n(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,i)}fork(e,t,i){let l=this._collect(e);l.push({schema:i});let u=l.shift(),d={id:u.id,schema:t(u.schema)};for(let e of(n(s.isSchema(d.schema),"adjuster function failed to return a joi schema type"),l))d={id:e.id,schema:p.fork(e.schema,d.id,d.schema)};return d.schema}labels(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=e[0],n=this._get(i);if(!n)return[...t,...e].join(".");let s=e.slice(1);return t=[...t,n.schema._flags.label||i],s.length?n.schema._ids.labels(s,t):t.join(".")}reach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=e[0],s=this._get(i);n(s,"Schema does not contain path",[...t,...e].join("."));let l=e.slice(1);return l.length?s.schema._ids.reach(l,[...t,i]):s.schema}register(e){let{key:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!s.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);let i=e._flags.id;if(i){let t=this._byId.get(i);n(!t||t.schema===e,"Cannot add different schemas with the same id:",i),n(!this._byKey.has(i),"Schema id conflicts with existing key:",i),this._byId.set(i,{schema:e,id:i})}t&&(n(!this._byKey.has(t),"Schema already contains key:",t),n(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=e[0],l=this._get(s);n(l,"Schema does not contain path",[...t,...e].join(".")),i=[l,...i];let p=e.slice(1);return p.length?l.schema._ids._collect(p,[...t,s],i):i}_get(e){return this._byId.get(e)||this._byKey.get(e)}},p.fork=function(e,i,n){let s=t.schema(e,{each:(e,t)=>{let{key:s}=t;if(i===(e._flags.id||s))return n},ref:!1});return s?s.$_mutateRebuild():e},t.schema=function(e,t){let i;for(let n in e._flags){if("_"===n[0])continue;let s=p.scan(e._flags[n],{source:"flags",name:n},t);void 0!==s&&((i=i||e.clone())._flags[n]=s)}for(let n=0;n<e._rules.length;++n){let s=e._rules[n],l=p.scan(s.args,{source:"rules",name:s.name},t);if(void 0!==l){i=i||e.clone();let t=Object.assign({},s);t.args=l,i._rules[n]=t,i._singleRules.get(s.name)===s&&i._singleRules.set(s.name,t)}}for(let n in e.$_terms){if("_"===n[0])continue;let s=p.scan(e.$_terms[n],{source:"terms",name:n},t);void 0!==s&&((i=i||e.clone()).$_terms[n]=s)}return i},p.scan=function(e,t,i,n,u){let d;let m=n||[];if(null!==e&&"object"==typeof e){if(Array.isArray(e)){for(let n=0;n<e.length;++n){let s="terms"===t.source&&"keys"===t.name&&e[n].key,l=p.scan(e[n],t,i,[n,...m],s);void 0!==l&&((d=d||e.slice())[n]=l)}return d}if(!1!==i.schema&&s.isSchema(e)||!1!==i.ref&&l.isRef(e)){let n=i.each(e,{...t,path:m,key:u});if(n===e)return;return n}for(let n in e){if("_"===n[0])continue;let s=p.scan(e[n],t,i,[n,...m],u);void 0!==s&&((d=d||Object.assign({},e))[n]=s)}return d}}},6133:(e,t,i)=>{"use strict";let n;let s=i(375),l=i(8571),p=i(9621),u=i(8160),d={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};t.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s("string"==typeof e,"Invalid reference key:",e),u.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),s(!t.prefix||"object"==typeof t.prefix,"options.prefix must be of type object");let i=Object.assign({},d.defaults,t);delete i.prefix;let n=i.separator,l=d.context(e,n,t.prefix);if(i.type=l.type,e=l.key,"value"===i.type){if(l.root&&(s(!n||e[0]!==n,"Cannot specify relative path with root prefix"),i.ancestor="root",e||(e=null)),n&&n===e)e=null,i.ancestor=0;else if(void 0!==i.ancestor)s(!n||!e||e[0]!==n,"Cannot combine prefix with ancestor option");else{let[t,s]=d.ancestor(e,n);s&&""===(e=e.slice(s))&&(e=null),i.ancestor=t}}return i.path=n?null===e?[]:e.split(n):[e],new d.Ref(i)},t.in=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.create(e,{...i,in:!0})},t.isRef=function(e){return!!e&&!!e[u.symbols.ref]},d.Ref=class{constructor(e){s("object"==typeof e,"Invalid reference construction"),u.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),s([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),s(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),s(!e.map||Array.isArray(e.map),"options.map must be an array"),s(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,d.defaults,e),s("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,t,i,n){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return s(!this.in||l.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(i.context,t,l):"local"===this.type?this._resolve(n,t,l):this.ancestor?"root"===this.ancestor?this._resolve(t.ancestors[t.ancestors.length-1],t,l):(s(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,l)):this._resolve(e,t,l)}_resolve(e,t,i){let n;if("value"===this.type&&t.mainstay.shadow&&!1!==i.shadow&&(n=t.mainstay.shadow.get(this.absolute(t))),void 0===n&&(n=p(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(n=this.adjust(n)),this.map){let e=this.map.get(n);void 0!==e&&(n=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,n),n}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new d.Ref(this)}describe(){let e={path:this.path};for(let t of("value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]),["adjust","iterables","render"]))null!==this[t]&&void 0!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){let e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${e}`);if(!this.separator)return void(this.display=`ref:${e}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${e}`);if("root"===this.ancestor)return void(this.display=`ref:root:${e}`);if(1===this.ancestor)return void(this.display=`ref:${e||".."}`);let t=Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}},d.Ref.prototype[u.symbols.ref]=!0,t.build=function(e){return"value"===(e=Object.assign({},d.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new d.Ref(e)},d.context=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e=e.trim(),i){let n=void 0===i.global?"$":i.global;if(n!==t&&e.startsWith(n))return{key:e.slice(n.length),type:"global"};let s=void 0===i.local?"#":i.local;if(s!==t&&e.startsWith(s))return{key:e.slice(s.length),type:"local"};let l=void 0===i.root?"/":i.root;if(l!==t&&e.startsWith(l))return{key:e.slice(l.length),type:"value",root:!0}}return{key:e,type:"value"}},d.ancestor=function(e,t){if(!t||e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let i=2;for(;e[i]===t;)++i;return[i-1,i]},t.toSibling=0,t.toParent=1,t.Manager=class{constructor(){this.refs=[]}register(e,s){if(e){if(s=void 0===s?t.toParent:s,Array.isArray(e))for(let t of e)this.register(t,s);else if(u.isSchema(e))for(let t of e._refs.refs)t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root});else t.isRef(e)&&"value"===e.type&&e.ancestor-s>=0&&this.refs.push({ancestor:e.ancestor-s,root:e.root}),(n=n||i(3328)).isTemplate(e)&&this.register(e.refs(),s)}}get length(){return this.refs.length}clone(){let e=new t.Manager;return e.refs=l(this.refs),e}reset(){this.refs=[]}roots(){return this.refs.filter(e=>!e.ancestor).map(e=>e.root)}}},3378:(e,t,i)=>{"use strict";let n=i(5107),s={};s.wrap=n.string().min(1).max(2).allow(!1),t.preferences=n.object({allowUnknown:n.boolean(),abortEarly:n.boolean(),artifacts:n.boolean(),cache:n.boolean(),context:n.object(),convert:n.boolean(),dateFormat:n.valid("date","iso","string","time","utc"),debug:n.boolean(),errors:{escapeHtml:n.boolean(),label:n.valid("path","key",!1),language:[n.string(),n.object().ref()],render:n.boolean(),stack:n.boolean(),wrap:{label:s.wrap,array:s.wrap,string:s.wrap}},externals:n.boolean(),messages:n.object(),noDefaults:n.boolean(),nonEnumerables:n.boolean(),presence:n.valid("required","optional","forbidden"),skipFunctions:n.boolean(),stripUnknown:n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects").allow(!0,!1),warnings:n.boolean()}).strict(),s.nameRx=/^[a-zA-Z0-9]\w*$/,s.rule=n.object({alias:n.array().items(n.string().pattern(s.nameRx)).single(),args:n.array().items(n.string(),n.object({name:n.string().pattern(s.nameRx).required(),ref:n.boolean(),assert:n.alternatives([n.function(),n.object().schema()]).conditional("ref",{is:!0,then:n.required()}),normalize:n.function(),message:n.string().when("assert",{is:n.function(),then:n.required()})})),convert:n.boolean(),manifest:n.boolean(),method:n.function().allow(!1),multi:n.boolean(),validate:n.function()}),t.extension=n.object({type:n.alternatives([n.string(),n.object().regex()]).required(),args:n.function(),cast:n.object().pattern(s.nameRx,n.object({from:n.function().maxArity(1).required(),to:n.function().minArity(1).maxArity(2).required()})),base:n.object().schema().when("type",{is:n.object().regex(),then:n.forbidden()}),coerce:[n.function().maxArity(3),n.object({method:n.function().maxArity(3).required(),from:n.array().items(n.string()).single()})],flags:n.object().pattern(s.nameRx,n.object({setter:n.string(),default:n.any()})),manifest:{build:n.function().arity(2)},messages:[n.object(),n.string()],modifiers:n.object().pattern(s.nameRx,n.function().minArity(1).maxArity(2)),overrides:n.object().pattern(s.nameRx,n.function()),prepare:n.function().maxArity(3),rebuild:n.function().arity(1),rules:n.object().pattern(s.nameRx,s.rule),terms:n.object().pattern(s.nameRx,n.object({init:n.array().allow(null).required(),manifest:n.object().pattern(/.+/,[n.valid("schema","single"),n.object({mapped:n.object({from:n.string().required(),to:n.string().required()}).required()})])})),validate:n.function().maxArity(3)}).strict(),t.extensions=n.array().items(n.object(),n.function().arity(1)).strict(),s.desc={buffer:n.object({buffer:n.string()}),func:n.object({function:n.function().required(),options:{literal:!0}}),override:n.object({override:!0}),ref:n.object({ref:n.object({type:n.valid("value","global","local"),path:n.array().required(),separator:n.string().length(1).allow(!1),ancestor:n.number().min(0).integer().allow("root"),map:n.array().items(n.array().length(2)).min(1),adjust:n.function(),iterables:n.boolean(),in:n.boolean(),render:n.boolean()}).required()}),regex:n.object({regex:n.string().min(3)}),special:n.object({special:n.valid("deep").required()}),template:n.object({template:n.string().required(),options:n.object()}),value:n.object({value:n.alternatives([n.object(),n.array()]).required()})},s.desc.entity=n.alternatives([n.array().items(n.link("...")),n.boolean(),n.function(),n.number(),n.string(),s.desc.buffer,s.desc.func,s.desc.ref,s.desc.regex,s.desc.special,s.desc.template,s.desc.value,n.link("/")]),s.desc.values=n.array().items(null,n.boolean(),n.function(),n.number().allow(1/0,-1/0),n.string().allow(""),n.symbol(),s.desc.buffer,s.desc.func,s.desc.override,s.desc.ref,s.desc.regex,s.desc.template,s.desc.value),s.desc.messages=n.object().pattern(/.+/,[n.string(),s.desc.template,n.object().pattern(/.+/,[n.string(),s.desc.template])]),t.description=n.object({type:n.string().required(),flags:n.object({cast:n.string(),default:n.any(),description:n.string(),empty:n.link("/"),failover:s.desc.entity,id:n.string(),label:n.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:n.boolean(),unit:n.string()}).unknown(),preferences:{allowUnknown:n.boolean(),abortEarly:n.boolean(),artifacts:n.boolean(),cache:n.boolean(),convert:n.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:n.boolean(),label:["path","key"],language:[n.string(),s.desc.ref],wrap:{label:s.wrap,array:s.wrap}},externals:n.boolean(),messages:s.desc.messages,noDefaults:n.boolean(),nonEnumerables:n.boolean(),presence:["required","optional","forbidden"],skipFunctions:n.boolean(),stripUnknown:n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects").allow(!0,!1),warnings:n.boolean()},allow:s.desc.values,invalid:s.desc.values,rules:n.array().min(1).items({name:n.string().required(),args:n.object().min(1),keep:n.boolean(),message:[n.string(),s.desc.messages],warn:n.boolean()}),keys:n.object().pattern(/.*/,n.link("/")),link:s.desc.ref}).pattern(/^[a-z]\w*$/,n.any())},493:(e,t,i)=>{"use strict";let n=i(8571),s=i(9621),l=i(8160),p={value:Symbol("value")};e.exports=p.State=class{constructor(e,t,i){this.path=e,this.ancestors=t,this.mainstay=i.mainstay,this.schemas=i.schemas,this.debug=null}localize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=new p.State(e,t,this);return i&&n.schemas&&(n.schemas=[p.schemas(i),...n.schemas]),n}nest(e,t){let i=new p.State(this.path,this.ancestors,this);return i.schemas=i.schemas&&[p.schemas(e),...i.schemas],i.debug=t,i}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new p.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=n(this.mainstay.shadow.node(this.path)))}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0)}},p.schemas=function(e){return l.isSchema(e)?{schema:e}:e},p.Shadow=class{constructor(){this._values=null}set(e,t,i){if(!e.length||"strip"===i&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let n=this._values;for(let t=0;t<e.length;++t){let i=e[t],s=n.get(i);s||(s=new Map,n.set(i,s)),n=s}n[p.value]=t}get(e){let t=this.node(e);if(t)return t[p.value]}node(e){if(this._values)return s(this._values,e,{iterables:!0})}override(e,t){if(!this._values)return;let i=e.slice(0,-1),n=e[e.length-1],l=s(this._values,i,{iterables:!0});t?l.set(n,t):l&&l.delete(n)}}},3328:(e,t,i)=>{"use strict";let n=i(375),s=i(8571),l=i(5277),p=i(1447),u=i(8160),d=i(6354),m=i(6133),h={symbol:Symbol("template"),opens:Array(1e3).join("\x00"),closes:Array(1e3).join("\x01"),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=h.Template=class{constructor(e,t){n("string"==typeof e,"Template source must be a string"),n(!e.includes("\x00")&&!e.includes("\x01"),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,this._settings=s(t),this._parse()}_parse(){if(!this.source.includes("{"))return;let e=h.encode(this.source),t=h.split(e),i=!1,n=[],s=t.shift();for(let e of(s&&n.push(s),t)){let t="{"!==e[0],s=t?"}":"}}",l=e.indexOf(s);if(-1===l||"{"===e[1]){n.push(`{${h.decode(e)}`);continue}let p=e.slice(t?0:1,l),u=":"===p[0];u&&(p=p.slice(1));let d=this._ref(h.decode(p),{raw:t,wrapped:u});n.push(d),"string"!=typeof d&&(i=!0);let m=e.slice(l+s.length);m&&n.push(h.decode(m))}i?this._template=n:this.rendered=n.join("")}static date(e,t){return h.dateFormat[t.dateFormat].call(e)}describe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._settings&&e.compact)return this.source;let t={template:this.source};return this._settings&&(t.options=this._settings),t}static build(e){return new h.Template(e.template,e.options)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[u.symbols.template]}refs(){if(!this._template)return;let e=[];for(let t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,i,n){return this._template&&1===this._template.length?this._part(this._template[0],e,t,i,n,{}):this.render(e,t,i,n)}_part(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.ref?e.ref.resolve(...i):e.formula.evaluate(i)}render(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this.isDynamic())return this.rendered;let p=[];for(let u of this._template)if("string"==typeof u)p.push(u);else{let d=this._part(u,e,t,i,n,s),m=h.stringify(d,e,t,i,n,s);if(void 0!==m){let e=u.raw||!1===(s.errors&&s.errors.escapeHtml)?m:l(m);p.push(h.wrap(e,u.wrapped&&i.errors.wrap.label))}}return p.join("")}_ref(e,t){let{raw:i,wrapped:n}=t,s=[];try{var l=new p.Parser(e,{reference:e=>{let t=m.create(e,this._settings);return s.push(t),e=>t.resolve(...e)},functions:h.functions,constants:h.constants})}catch(t){throw t.message=`Invalid template variable "${e}" fails due to: ${t.message}`,t}if(l.single){if("reference"===l.single.type){let e=s[0];return{ref:e,raw:i,refs:s,wrapped:n||"local"===e.type&&"label"===e.key}}return h.stringify(l.single.value)}return{formula:l,raw:i,refs:s}}toString(){return this.source}},h.Template.prototype[u.symbols.template]=!0,h.Template.prototype.isImmutable=!0,h.encode=function(e){return e.replace(/\\(\{+)/g,(e,t)=>h.opens.slice(0,t.length)).replace(/\\(\}+)/g,(e,t)=>h.closes.slice(0,t.length))},h.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},h.split=function(e){let t=[],i="";for(let n=0;n<e.length;++n){let s=e[n];if("{"===s){let s="";for(;n+1<e.length&&"{"===e[n+1];)s+="{",++n;t.push(i),i=s}else i+=s}return t.push(i),t},h.wrap=function(e,t){return t?1===t.length?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e},h.stringify=function(e,t,i,n,s){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},p=typeof e,u=n&&n.errors&&n.errors.wrap||{},d=!1;if(m.isRef(e)&&e.render&&(d=e.in,e=e.resolve(t,i,n,s,{in:e.in,...l})),null===e)return"null";if("string"===p)return h.wrap(e,l.arrayItems&&u.string);if("number"===p||"function"===p||"symbol"===p)return e.toString();if("object"!==p)return JSON.stringify(e);if(e instanceof Date)return h.Template.date(e,n);if(e instanceof Map){let t=[];for(let[i,n]of e.entries())t.push(`${i.toString()} -> ${n.toString()}`);e=t}if(!Array.isArray(e))return e.toString();let g=[];for(let p of e)g.push(h.stringify(p,t,i,n,s,{arrayItems:!0,...l}));return h.wrap(g.join(", "),!d&&u.array)},h.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},h.functions={if:(e,t,i)=>e?t:i,length:e=>"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null,msg(e){let[t,i,n,s,l]=this,p=l.messages;if(!p)return"";let u=d.template(t,p[0],e,i,n)||d.template(t,p[1],e,i,n);return u?u.render(t,i,n,s,l):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}},4946:(e,t,i)=>{"use strict";let n=i(375),s=i(1687),l=i(8068),p=i(8160),u=i(3292),d=i(6354),m=i(6133),h={};e.exports=l.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:m.toSibling}},args(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return 1===i.length&&Array.isArray(i[0])?e.try(...i[0]):e.try(...i)},validate(e,t){let{schema:i,error:n,state:l,prefs:p}=t;if(i._flags.match){let t=[],u=[];for(let n=0;n<i.$_terms.matches.length;++n){let s=i.$_terms.matches[n],d=l.nest(s.schema,`match.${n}`);d.snapshot();let m=s.schema.$_validate(e,d,p);m.errors?(u.push(m.errors),d.restore()):t.push(m.value)}if(0===t.length)return{errors:n("alternatives.any",{details:u.map(e=>d.details(e,{override:!1}))})};if("one"===i._flags.match)return 1===t.length?{value:t[0]}:{errors:n("alternatives.one")};if(t.length!==i.$_terms.matches.length)return{errors:n("alternatives.all",{details:u.map(e=>d.details(e,{override:!1}))})};let c=e=>e.$_terms.matches.some(e=>"object"===e.schema.type||"alternatives"===e.schema.type&&c(e.schema));return c(i)?{value:t.reduce((e,t)=>s(e,t,{mergeArrays:!1}))}:{value:t[t.length-1]}}let u=[];for(let t=0;t<i.$_terms.matches.length;++t){let n=i.$_terms.matches[t];if(n.schema){let i=l.nest(n.schema,`match.${t}`);i.snapshot();let s=n.schema.$_validate(e,i,p);if(!s.errors)return s;i.restore(),u.push({schema:n.schema,reports:s.errors});continue}let s=n.ref?n.ref.resolve(e,l,p):e,d=n.is?[n]:n.switch;for(let i=0;i<d.length;++i){let u=d[i],{is:m,then:h,otherwise:g}=u,f=`match.${t}${n.switch?"."+i:""}`;if(m.$_match(s,l.nest(m,`${f}.is`),p)){if(h)return h.$_validate(e,l.nest(h,`${f}.then`),p)}else if(g)return g.$_validate(e,l.nest(g,`${f}.otherwise`),p)}}return h.errors(u,t)},rules:{conditional:{method(e,t){n(!this._flags._endedSwitch,"Unreachable condition"),n(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),n(void 0===t.break,"Cannot use break option with alternatives conditional");let i=this.clone(),s=u.when(i,e,t),l=s.is?[s]:s.switch;for(let e of l)if(e.then&&e.otherwise){i.$_setFlag("_endedSwitch",!0,{clone:!1});break}return i.$_terms.matches.push(s),i.$_mutateRebuild()}},match:{method(e){if(n(["any","one","all"].includes(e),"Invalid alternatives match mode",e),"any"!==e)for(let t of this.$_terms.matches)n(t.schema,"Cannot combine match mode",e,"with conditional rules");return this.$_setFlag("match",e)}},try:{method(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];n(t.length,"Missing alternative schemas"),p.verifyFlat(t,"try"),n(!this._flags._endedSwitch,"Unreachable condition");let s=this.clone();for(let e of t)s.$_terms.matches.push({schema:s.$_compile(e)});return s.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,i)=>"is"!==i.path[0]?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{p.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(let i of t.matches){let{schema:t,ref:n,is:s,not:l,then:p,otherwise:u}=i;e=t?e.try(t):n?e.conditional(n,{is:s,then:p,not:l,otherwise:u,switch:i.switch}):e.conditional(s,{then:p,otherwise:u})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),h.errors=function(e,t){let{error:i,state:n}=t;if(!e.length)return{errors:i("alternatives.any")};if(1===e.length)return{errors:e[0].reports};let s=new Set,l=[];for(let{reports:t,schema:p}of e){if(t.length>1)return h.unmatched(e,i);let u=t[0];if(u instanceof d.Report==0)return h.unmatched(e,i);if(u.state.path.length!==n.path.length){l.push({type:p.type,report:u});continue}if("any.only"===u.code){for(let e of u.local.valids)s.add(e);continue}let[m,g]=u.code.split(".");"base"===g?s.add(m):l.push({type:p.type,report:u})}return l.length?1===l.length?{errors:l[0].report}:h.unmatched(e,i):{errors:i("alternatives.types",{types:[...s]})}},h.unmatched=function(e,t){let i=[];for(let t of e)i.push(...t.reports);return{errors:t("alternatives.match",d.details(i,{override:!1}))}}},8068:(e,t,i)=>{"use strict";let n=i(375),s=i(7629),l=i(8160),p=i(6914);e.exports=s.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,t){return n("function"==typeof e,"Method must be a function"),n(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate(e,t,i){let{method:n}=i;try{return n(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){n(l.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");let t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}},warning:{method(e,t){return n(e&&"string"==typeof e,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:t},warn:!0})},validate(e,t,i){let{code:n,local:s}=i;return t.error(n,s)},args:["code","local"],multi:!0}},modifiers:{keep(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.keep=t},message(e,t){e.message=p.compile(t)},warn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.warn=t}},manifest:{build(e,t){for(let i in t){let n=t[i];if(["examples","externals","metas","notes","tags"].includes(i))for(let t of n)e=e[i.slice(0,-1)](t);else if("alterations"!==i){if("whens"!==i){if("shared"===i)for(let t of n)e=e.shared(t)}else for(let t of n){let{ref:i,is:n,not:s,then:l,otherwise:p,concat:u}=t;e=u?e.concat(u):i?e.when(i,{is:n,not:s,then:l,otherwise:p,switch:t.switch,break:t.break}):e.when(n,{then:l,otherwise:p,break:t.break})}}else{let t={};for(let{target:e,adjuster:i}of n)t[e]=i;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(e,t,i)=>{"use strict";let n=i(375),s=i(9474),l=i(9621),p=i(8068),u=i(8160),d=i(3292),m={};e.exports=p.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,t){let{schema:i,state:n,prefs:s}=t;if(!Array.isArray(e))return;let l=i.$_getRule("sort");return l?m.sort(i,e,l.args.options,n,s):void 0}},validate(e,t){let{schema:i,error:n}=t;if(!Array.isArray(e)){if(i._flags.single){let t=[e];return t[u.symbols.arraySingle]=!0,{value:t}}return{errors:n("array.base")}}if(i.$_getRule("items")||i.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});let t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,t,i){let{state:n,prefs:s,error:l}=t,{schema:p}=i,u=[e,...n.ancestors];for(let t=0;t<e.length;++t){let i=n.localize([...n.path,t],u,p);if(p.$_match(e[t],i,s))return e}let d=p._flags.label;return d?l("array.hasKnown",{patternLabel:d}):l("array.hasUnknown",null)},multi:!0},items:{method(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];u.verifyFlat(t,"items");let n=this.$_addRule("items");for(let e=0;e<t.length;++e){let i=u.tryWithPath(()=>this.$_compile(t[e]),e,{append:!0});n.$_terms.items.push(i)}return n.$_mutateRebuild()},validate(e,t){let{schema:i,error:n,state:s,prefs:l,errorsArray:p}=t,d=i.$_terms._requireds.slice(),h=i.$_terms.ordered.slice(),g=[...i.$_terms._inclusions,...d],f=!e[u.symbols.arraySingle];delete e[u.symbols.arraySingle];let y=p(),b=e.length;for(let t=0;t<b;++t){let p=e[t],u=!1,T=!1,S=f?t:new Number(t),_=[...s.path,S];if(!i._flags.sparse&&void 0===p){if(y.push(n("array.sparse",{key:S,path:_,pos:t,value:void 0},s.localize(_))),l.abortEarly)return y;h.shift();continue}let v=[e,...s.ancestors];for(let e of i.$_terms._exclusions)if(e.$_match(p,s.localize(_,v,e),l,{presence:"ignore"})){if(y.push(n("array.excludes",{pos:t,value:p},s.localize(_))),l.abortEarly)return y;u=!0,h.shift();break}if(u)continue;if(i.$_terms.ordered.length){if(h.length){let u=h.shift(),d=u.$_validate(p,s.localize(_,v,u),l);if(d.errors){if(y.push(...d.errors),l.abortEarly)return y}else if("strip"===u._flags.result)m.fastSplice(e,t),--t,--b;else{if(!i._flags.sparse&&void 0===d.value){if(y.push(n("array.sparse",{key:S,path:_,pos:t,value:void 0},s.localize(_))),l.abortEarly)return y;continue}e[t]=d.value}continue}if(!i.$_terms.items.length){if(y.push(n("array.orderedLength",{pos:t,limit:i.$_terms.ordered.length})),l.abortEarly)return y;break}}let L=[],C=d.length;for(let u=0;u<C;++u){let h=s.localize(_,v,d[u]);h.snapshot();let g=d[u].$_validate(p,h,l);if(L[u]=g,!g.errors){if(e[t]=g.value,T=!0,m.fastSplice(d,u),--u,--C,!i._flags.sparse&&void 0===g.value&&(y.push(n("array.sparse",{key:S,path:_,pos:t,value:void 0},s.localize(_))),l.abortEarly))return y;break}h.restore()}if(T)continue;let I=l.stripUnknown&&!!l.stripUnknown.arrays||!1;for(let h of(C=g.length,g)){let g;let f=d.indexOf(h);if(-1!==f)g=L[f];else{let d=s.localize(_,v,h);if(d.snapshot(),!(g=h.$_validate(p,d,l)).errors){"strip"===h._flags.result?(m.fastSplice(e,t),--t,--b):i._flags.sparse||void 0!==g.value?e[t]=g.value:(y.push(n("array.sparse",{key:S,path:_,pos:t,value:void 0},s.localize(_))),u=!0),T=!0;break}d.restore()}if(1===C){if(I){m.fastSplice(e,t),--t,--b,T=!0;break}if(y.push(...g.errors),l.abortEarly)return y;u=!0;break}}if(!u&&(i.$_terms._inclusions.length||i.$_terms._requireds.length)&&!T){if(I){m.fastSplice(e,t),--t,--b;continue}if(y.push(n("array.includes",{pos:t,value:p},s.localize(_))),l.abortEarly)return y}}return d.length&&m.fillMissedErrors(i,y,d,e,s,l),h.length&&(m.fillOrderedErrors(i,y,h,e,s,l),y.length||m.fillDefault(h,e,s,l)),y.length?y:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,i,n){let{limit:s}=i,{name:l,operator:p,args:d}=n;return u.compare(e.length,s,p)?e:t.error("array."+l,{limit:d.limit,value:e})},args:[{name:"limit",ref:!0,assert:u.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];u.verifyFlat(t,"ordered");let n=this.$_addRule("items");for(let e=0;e<t.length;++e){let i=u.tryWithPath(()=>this.$_compile(t[e]),e,{append:!0});m.validateSingle(i,n),n.$_mutateRegister(i),n.$_terms.ordered.push(i)}return n.$_mutateRebuild()}},single:{method(e){let t=void 0===e||!!e;return n(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.assertOptions(e,["by","order"]);let t={order:e.order||"ascending"};return e.by&&(t.by=d.ref(e.by,{ancestor:0}),n(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(e,t,i){let{error:n,state:s,prefs:l,schema:p}=t,{options:u}=i,{value:d,errors:h}=m.sort(p,e,u,s,l);if(h)return h;for(let t=0;t<e.length;++t)if(e[t]!==d[t])return n("array.sort",{order:u.order,by:u.by?u.by.key:"value"});return e},convert:!0},sparse:{method(e){let t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(!e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),u.assertOptions(t,["ignoreUndefined","separator"]);let i={name:"unique",args:{options:t,comparator:e}};if(e){if("string"==typeof e){let n=u.default(t.separator,".");i.path=n?e.split(n):[e]}else i.comparator=e}return this.$_addRule(i)},validate(e,t,i,p){let{state:u,error:d,schema:m}=t,{comparator:h,options:g}=i,{comparator:f,path:y}=p,b={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},T=f||s,S=g.ignoreUndefined;for(let t=0;t<e.length;++t){let i=y?l(e[t],y):e[t],s=f?b.custom:b[typeof i];if(n(s,"Failed to find unique map container for type",typeof i),s instanceof Map){let n;let l=s.entries();for(;!(n=l.next()).done;)if(T(n.value[0],i)){let i=u.localize([...u.path,t],[e,...u.ancestors]),s={pos:t,value:e[t],dupePos:n.value[1],dupeValue:e[n.value[1]]};return y&&(s.path=h),d("array.unique",s,i)}s.set(i,t)}else{if((!S||void 0!==i)&&void 0!==s[i]){let n={pos:t,value:e[t],dupePos:s[i],dupeValue:e[s[i]]};return y&&(n.path=h),d("array.unique",n,u.localize([...u.path,t],[e,...u.ancestors]))}s[i]=t}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){for(let t of(e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[],e.$_terms.items))m.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(let t of e.$_terms.ordered)m.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),m.fillMissedErrors=function(e,t,i,n,s,l){let p=[],u=0;for(let e of i){let t=e._flags.label;t?p.push(t):++u}p.length?u?t.push(e.$_createError("array.includesRequiredBoth",n,{knownMisses:p,unknownMisses:u},s,l)):t.push(e.$_createError("array.includesRequiredKnowns",n,{knownMisses:p},s,l)):t.push(e.$_createError("array.includesRequiredUnknowns",n,{unknownMisses:u},s,l))},m.fillOrderedErrors=function(e,t,i,n,s,l){let p=[];for(let e of i)"required"===e._flags.presence&&p.push(e);p.length&&m.fillMissedErrors(e,t,p,n,s,l)},m.fillDefault=function(e,t,i,n){let s=[],l=!0;for(let p=e.length-1;p>=0;--p){let u=e[p],d=[t,...i.ancestors],m=u.$_validate(void 0,i.localize(i.path,d,u),n).value;if(l){if(void 0===m)continue;l=!1}s.unshift(m)}s.length&&t.push(...s)},m.fastSplice=function(e,t){let i=t;for(;i<e.length;)e[i++]=e[i];--e.length},m.validateSingle=function(e,t){("array"===e.type||e._flags._arrayItems)&&(n(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},m.sort=function(e,t,i,n,s){let l="ascending"===i.order?1:-1,p=-1*l;try{return{value:t.slice().sort((u,d)=>{let h=m.compare(u,d,p,l);if(null!==h||(i.by&&(u=i.by.resolve(u,n,s),d=i.by.resolve(d,n,s)),null!==(h=m.compare(u,d,p,l))))return h;let g=typeof u;if(g!==typeof d)throw e.$_createError("array.sort.mismatching",t,null,n,s);if("number"!==g&&"string"!==g)throw e.$_createError("array.sort.unsupported",t,{type:g},n,s);return"number"===g?(u-d)*l:u<d?p:l})}}catch(e){return{errors:e}}},m.compare=function(e,t,i,n){return e===t?0:void 0===e?1:void 0===t?-1:null===e?n:null===t?i:null}},4937:(e,t,i)=>{"use strict";let n=i(375),s=i(8068),l=i(8160),p=i(2036),u={isBool:function(e){return"boolean"==typeof e}};e.exports=s.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,t){let{schema:i}=t;if("boolean"!=typeof e){if("string"==typeof e){let t=i._flags.sensitive?e:e.toLowerCase();e="true"===t||"false"!==t&&e}return"boolean"!=typeof e&&(e=i.$_terms.truthy&&i.$_terms.truthy.has(e,null,null,!i._flags.sensitive)||(!i.$_terms.falsy||!i.$_terms.falsy.has(e,null,null,!i._flags.sensitive))&&e),{value:e}}},validate(e,t){let{error:i}=t;if("boolean"!=typeof e)return{value:e,errors:i("boolean.base")}},rules:{truthy:{method(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];l.verifyFlat(t,"truthy");let s=this.clone();s.$_terms.truthy=s.$_terms.truthy||new p;for(let e=0;e<t.length;++e){let i=t[e];n(void 0!==i,"Cannot call truthy with undefined"),s.$_terms.truthy.add(i)}return s}},falsy:{method(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];l.verifyFlat(t,"falsy");let s=this.clone();s.$_terms.falsy=s.$_terms.falsy||new p;for(let e=0;e<t.length;++e){let i=t[e];n(void 0!==i,"Cannot call falsy with undefined"),s.$_terms.falsy.add(i)}return s}},sensitive:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("sensitive",e)}}},cast:{number:{from:u.isBool,to:(e,t)=>e?1:0},string:{from:u.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(e,t,i)=>{"use strict";let n=i(375),s=i(8068),l=i(8160),p=i(3328),u={isDate:function(e){return e instanceof Date}};e.exports=s.extend({type:"date",coerce:{from:["number","string"],method(e,t){let{schema:i}=t;return{value:u.parse(e,i._flags.format)||e}}},validate(e,t){let{schema:i,error:n,prefs:s}=t;if(e instanceof Date&&!isNaN(e.getTime()))return;let l=i._flags.format;return s.convert&&l&&"string"==typeof e?{value:e,errors:n("date.format",{format:l})}:{value:e,errors:n("date.base")}},rules:{compare:{method:!1,validate(e,t,i,n){let{date:s}=i,{name:p,operator:u,args:d}=n,m="now"===s?Date.now():s.getTime();return l.compare(e.getTime(),m,u)?e:t.error("date."+p,{limit:d.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:u.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(e){return n(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";return n(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:u.isDate,to:(e,t)=>e.getTime()},string:{from:u.isDate,to(e,t){let{prefs:i}=t;return p.date(e,i)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),u.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e))||/^\s*$/.test(e))return null;if("iso"===t)return l.isIsoDate(e)?u.date(e.toString()):null;let i=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return u.date(1*e);if("unix"===t)return u.date(1e3*e);if("string"==typeof i)return null}return u.date(e)},u.date=function(e){let t=new Date(e);return isNaN(t.getTime())?null:t}},390:(e,t,i)=>{"use strict";let n=i(375),s=i(7824);e.exports=s.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(e){return n(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate(e,t,i){let{n:n}=i;return e.length===n?e:t.error("function.arity",{n:n})}},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(e){return n(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate(e,t,i){let{n:n}=i;return e.length>=n?e:t.error("function.minArity",{n:n})}},maxArity:{method(e){return n(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate(e,t,i){let{n:n}=i;return e.length<=n?e:t.error("function.maxArity",{n:n})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(e,t,i)=>{"use strict";let n=i(978),s=i(375),l=i(8571),p=i(3652),u=i(8068),d=i(8160),m=i(3292),h=i(6354),g=i(6133),f=i(3328),y={renameDefaults:{alias:!1,multiple:!1,override:!1}};e.exports=u.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,t){let{schema:i,error:n,state:s,prefs:l}=t;if(!e||typeof e!==i.$_property("typeof")||Array.isArray(e))return{value:e,errors:n("object.base",{type:i.$_property("typeof")})};if(!(i.$_terms.renames||i.$_terms.dependencies||i.$_terms.keys||i.$_terms.patterns||i.$_terms.externals))return;e=y.clone(e,l);let p=[];if(i.$_terms.renames&&!y.rename(i,e,s,l,p)||!i.$_terms.keys&&!i.$_terms.patterns&&!i.$_terms.dependencies)return{value:e,errors:p};let u=new Set(Object.keys(e));if(i.$_terms.keys){let t=[e,...s.ancestors];for(let n of i.$_terms.keys){let i=n.key,d=e[i];u.delete(i);let m=s.localize([...s.path,i],t,n),h=n.schema.$_validate(d,m,l);if(h.errors){if(l.abortEarly)return{value:e,errors:h.errors};void 0!==h.value&&(e[i]=h.value),p.push(...h.errors)}else"strip"===n.schema._flags.result||void 0===h.value&&void 0!==d?delete e[i]:void 0!==h.value&&(e[i]=h.value)}}if(u.size||i._flags._hasPatternMatch){let t=y.unknown(i,e,u,p,s,l);if(t)return t}if(i.$_terms.dependencies)for(let t of i.$_terms.dependencies){if(null!==t.key&&!1===y.isPresent(t.options)(t.key.resolve(e,s,l,null,{shadow:!1})))continue;let n=y.dependencies[t.rel](i,t,e,s,l);if(n){let t=i.$_createError(n.code,e,n.context,s,l);if(l.abortEarly)return{value:e,errors:t};p.push(t)}}return{value:e,errors:p}},rules:{and:{method(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return d.verifyFlat(t,"and"),y.dependency(this,"and",null,t)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,t,i){f.isTemplate(e)||(e=m.ref(e)),s(void 0===i||"string"==typeof i,"Message must be a string"),t=this.$_compile(t,{appendPath:!0});let n=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:i}});return n.$_mutateRegister(e),n.$_mutateRegister(t),n},validate(e,t,i){let{error:n,prefs:s,state:l}=t,{subject:p,schema:u,message:d}=i,m=p.resolve(e,l,s),h=g.isRef(p)?p.absolute(l):[];return u.$_match(m,l.localize(h,[e,...l.ancestors],u),s)?e:n("object.assert",{subject:p,message:d})},args:["subject","schema","message"],multi:!0},instance:{method(e,t){return s("function"==typeof e,"constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate(e,t,i){let{constructor:n,name:s}=i;return e instanceof n?e:t.error("object.instance",{type:s,value:e})},args:["constructor","name"]},keys:{method(e){s(void 0===e||"object"==typeof e,"Object schema must be a valid object"),s(!d.isSchema(e),"Object schema cannot be a joi schema");let t=this.clone();if(e){if(Object.keys(e).length)for(let i in t.$_terms.keys=t.$_terms.keys?t.$_terms.keys.filter(t=>!e.hasOwnProperty(t.key)):new y.Keys,e)d.tryWithPath(()=>t.$_terms.keys.push({key:i,schema:this.$_compile(e[i])}),i);else t.$_terms.keys=new y.Keys}else t.$_terms.keys=null;return t.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,i,n){let{limit:s}=i,{name:l,operator:p,args:u}=n;return d.compare(Object.keys(e).length,s,p)?e:t.error("object."+l,{limit:u.limit,value:e})},args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return d.verifyFlat(t,"nand"),y.dependency(this,"nand",null,t)}},or:{method(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return d.verifyFlat(t,"or"),y.dependency(this,"or",null,t)}},oxor:{method(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return y.dependency(this,"oxor",null,t)}},pattern:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e instanceof RegExp;n||(e=this.$_compile(e,{appendPath:!0})),s(void 0!==t,"Invalid rule"),d.assertOptions(i,["fallthrough","matches"]),n&&s(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});let l=this.clone();l.$_terms.patterns=l.$_terms.patterns||[];let p={[n?"regex":"schema"]:e,rule:t};return i.matches&&(p.matches=this.$_compile(i.matches),"array"!==p.matches.type&&(p.matches=p.matches.$_root.array().items(p.matches)),l.$_mutateRegister(p.matches),l.$_setFlag("_hasPatternMatch",!0,{clone:!1})),i.fallthrough&&(p.fallthrough=!0),l.$_terms.patterns.push(p),l.$_mutateRegister(t),l}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>g.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),s("string"==typeof t||t instanceof f,"Invalid rename to argument"),s(t!==e,"Cannot rename key to same name:",e),d.assertOptions(i,["alias","ignoreUndefined","override","multiple"]);let l=this.clone();for(let t of(l.$_terms.renames=l.$_terms.renames||[],l.$_terms.renames))s(t.from!==e,"Cannot rename the same key multiple times");return t instanceof f&&l.$_mutateRegister(t),l.$_terms.renames.push({from:e,to:t,options:n(y.renameDefaults,i)}),l}},schema:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return this.$_addRule({name:"schema",args:{type:e}})},validate(e,t,i){let{type:n}=i;return d.isSchema(e)&&("any"===n||e.type===n)?e:t.error("object.schema",{type:n})}},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y.dependency(this,"with",e,t,i)}},without:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return y.dependency(this,"without",e,t,i)}},xor:{method(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return d.verifyFlat(t,"xor"),y.dependency(this,"xor",null,t)}}},overrides:{default(e,t){return void 0===e&&(e=d.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){let t=new p.Sorter;for(let i of e.$_terms.keys)d.tryWithPath(()=>t.add(i,{after:i.schema.$_rootReferences(),group:i.key}),i.key);e.$_terms.keys=new y.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(let{rel:i,key:n=null,peers:s,options:l}of t.dependencies)e=y.dependency(e,i,n,s,l);if(t.patterns)for(let{regex:i,schema:n,rule:s,fallthrough:l,matches:p}of t.patterns)e=e.pattern(i||n,s,{fallthrough:l,matches:p});if(t.renames)for(let{from:i,to:n,options:s}of t.renames)e=e.rename(i,n,s);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),y.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return l(e,{shallow:!0});let i=Object.create(Object.getPrototypeOf(e));return Object.assign(i,e),i}let r=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.apply(this,i)};return r.prototype=l(e.prototype),Object.defineProperty(r,"name",{value:e.name,writable:!1}),Object.defineProperty(r,"length",{value:e.length,writable:!1}),Object.assign(r,e),r},y.dependency=function(e,t,i,n,l){s(null===i||"string"==typeof i,t,"key must be a strings"),l||(l=n.length>1&&"object"==typeof n[n.length-1]?n.pop():{}),d.assertOptions(l,["separator","isPresent"]),n=[].concat(n);let p=d.default(l.separator,"."),u=[];for(let e of n)s("string"==typeof e,t,"peers must be strings"),u.push(m.ref(e,{separator:p,ancestor:0,prefix:!1}));null!==i&&(i=m.ref(i,{separator:p,ancestor:0,prefix:!1}));let h=e.clone();return h.$_terms.dependencies=h.$_terms.dependencies||[],h.$_terms.dependencies.push(new y.Dependency(t,i,u,n,l)),h},y.dependencies={and(e,t,i,n,s){let l=[],p=[],u=t.peers.length,d=y.isPresent(t.options);for(let e of t.peers)!1===d(e.resolve(i,n,s,null,{shadow:!1}))?l.push(e.key):p.push(e.key);if(l.length!==u&&p.length!==u)return{code:"object.and",context:{present:p,presentWithLabels:y.keysToLabels(e,p),missing:l,missingWithLabels:y.keysToLabels(e,l)}}},nand(e,t,i,n,s){let l=[],p=y.isPresent(t.options);for(let e of t.peers)p(e.resolve(i,n,s,null,{shadow:!1}))&&l.push(e.key);if(l.length!==t.peers.length)return;let u=t.paths[0],d=t.paths.slice(1);return{code:"object.nand",context:{main:u,mainWithLabel:y.keysToLabels(e,u),peers:d,peersWithLabels:y.keysToLabels(e,d)}}},or(e,t,i,n,s){let l=y.isPresent(t.options);for(let e of t.peers)if(l(e.resolve(i,n,s,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:y.keysToLabels(e,t.paths)}}},oxor(e,t,i,n,s){let l=[],p=y.isPresent(t.options);for(let e of t.peers)p(e.resolve(i,n,s,null,{shadow:!1}))&&l.push(e.key);if(!l.length||1===l.length)return;let u={peers:t.paths,peersWithLabels:y.keysToLabels(e,t.paths)};return u.present=l,u.presentWithLabels=y.keysToLabels(e,l),{code:"object.oxor",context:u}},with(e,t,i,n,s){let l=y.isPresent(t.options);for(let p of t.peers)if(!1===l(p.resolve(i,n,s,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:y.keysToLabels(e,t.key.key),peer:p.key,peerWithLabel:y.keysToLabels(e,p.key)}}},without(e,t,i,n,s){let l=y.isPresent(t.options);for(let p of t.peers)if(l(p.resolve(i,n,s,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:y.keysToLabels(e,t.key.key),peer:p.key,peerWithLabel:y.keysToLabels(e,p.key)}}},xor(e,t,i,n,s){let l=[],p=y.isPresent(t.options);for(let e of t.peers)p(e.resolve(i,n,s,null,{shadow:!1}))&&l.push(e.key);if(1===l.length)return;let u={peers:t.paths,peersWithLabels:y.keysToLabels(e,t.paths)};return 0===l.length?{code:"object.missing",context:u}:(u.present=l,u.presentWithLabels=y.keysToLabels(e,l),{code:"object.xor",context:u})}},y.keysToLabels=function(e,t){return Array.isArray(t)?t.map(t=>e.$_mapLabels(t)):e.$_mapLabels(t)},y.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:e=>void 0!==e},y.rename=function(e,t,i,n,s){let l={};for(let p of e.$_terms.renames){let u=[],d="string"!=typeof p.from;if(d)for(let e in t){if(void 0===t[e]&&p.options.ignoreUndefined||e===p.to)continue;let i=p.from.exec(e);i&&u.push({from:e,to:p.to,match:i})}else!Object.prototype.hasOwnProperty.call(t,p.from)||void 0===t[p.from]&&p.options.ignoreUndefined||u.push(p);for(let m of u){let u=m.from,h=m.to;if(h instanceof f&&(h=h.render(t,i,n,m.match)),u!==h){if(!p.options.multiple&&l[h]&&(s.push(e.$_createError("object.rename.multiple",t,{from:u,to:h,pattern:d},i,n)),n.abortEarly)||Object.prototype.hasOwnProperty.call(t,h)&&!p.options.override&&!l[h]&&(s.push(e.$_createError("object.rename.override",t,{from:u,to:h,pattern:d},i,n)),n.abortEarly))return!1;void 0===t[u]?delete t[h]:t[h]=t[u],l[h]=!0,p.options.alias||delete t[u]}}}return!0},y.unknown=function(e,t,i,n,s,l){if(e.$_terms.patterns){let p=!1,u=e.$_terms.patterns.map(e=>{if(e.matches)return p=!0,[]}),d=[t,...s.ancestors];for(let p of i){let m=t[p],h=[...s.path,p];for(let g=0;g<e.$_terms.patterns.length;++g){let f=e.$_terms.patterns[g];if(f.regex){let e=f.regex.test(p);if(s.mainstay.tracer.debug(s,"rule",`pattern.${g}`,e?"pass":"error"),!e)continue}else if(!f.schema.$_match(p,s.nest(f.schema,`pattern.${g}`),l))continue;i.delete(p);let y=s.localize(h,d,{schema:f.rule,key:p}),b=f.rule.$_validate(m,y,l);if(b.errors){if(l.abortEarly)return{value:t,errors:b.errors};n.push(...b.errors)}if(f.matches&&u[g].push(p),t[p]=b.value,!f.fallthrough)break}}if(p)for(let i=0;i<u.length;++i){let p=u[i];if(!p)continue;let m=e.$_terms.patterns[i].matches,g=s.localize(s.path,d,m),f=m.$_validate(p,g,l);if(f.errors){let i=h.details(f.errors,{override:!1});i.matches=p;let u=e.$_createError("object.pattern.match",t,i,s,l);if(l.abortEarly)return{value:t,errors:u};n.push(u)}}}if(i.size&&(e.$_terms.keys||e.$_terms.patterns)){if(l.stripUnknown&&!e._flags.unknown||l.skipFunctions){let e=!(!l.stripUnknown||!0!==l.stripUnknown&&!l.stripUnknown.objects);for(let n of i)e?(delete t[n],i.delete(n)):"function"==typeof t[n]&&i.delete(n)}if(!d.default(e._flags.unknown,l.allowUnknown))for(let p of i){let i=s.localize([...s.path,p],[]),u=e.$_createError("object.unknown",t[p],{child:p},i,l,{flags:!1});if(l.abortEarly)return{value:t,errors:u};n.push(u)}}},y.Dependency=class{constructor(e,t,i,n,s){this.rel=e,this.key=t,this.peers=i,this.paths=n,this.options=s}describe(){let e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={...e.options,separator:this.peers[0].separator}),this.options.isPresent&&(e.options={...e.options,isPresent:this.options.isPresent}),e}},y.Keys=class extends Array{concat(e){let t=this.slice(),i=new Map;for(let e=0;e<t.length;++e)i.set(t[e].key,e);for(let n of e){let e=n.key,s=i.get(e);void 0!==s?t[s]={key:e,schema:t[s].schema.concat(n.schema)}:t.push(n)}return t}}},8785:(e,t,i)=>{"use strict";let n=i(375),s=i(8068),l=i(8160),p=i(3292),u=i(6354),d={};e.exports=s.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(e,t){let{schema:i,state:s,prefs:l}=t;n(i.$_terms.link,"Uninitialized link schema");let p=d.generate(i,e,s,l),u=i.$_terms.link[0].ref;return p.$_validate(e,s.nest(p,`link:${u.display}:${p.type}`),l)},generate:(e,t,i,n)=>d.generate(e,t,i,n),rules:{ref:{method(e){n(!this.$_terms.link,"Cannot reinitialize schema"),n("value"===(e=p.ref(e)).type||"local"===e.type,"Invalid reference type:",e.type),n("local"===e.type||"root"===e.ancestor||e.ancestor>0,"Link cannot reference itself");let t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("relative",e)}}},overrides:{concat(e){n(this.$_terms.link,"Uninitialized link schema"),n(l.isSchema(e),"Invalid schema object"),n("link"!==e.type,"Cannot merge type link with another link");let t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}},manifest:{build:(e,t)=>(n(t.link,"Invalid link description missing link"),e.ref(t.link))}}),d.generate=function(e,t,i,n){let s=i.mainstay.links.get(e);if(s)return s._generate(t,i,n).schema;let l=e.$_terms.link[0].ref,{perspective:p,path:u}=d.perspective(l,i);d.assert(p,"which is outside of schema boundaries",l,e,i,n);try{s=u.length?p.$_reach(u):p}catch(t){d.assert(!1,"to non-existing schema",l,e,i,n)}return d.assert("link"!==s.type,"which is another link",l,e,i,n),e._flags.relative||i.mainstay.links.set(e,s),s._generate(t,i,n).schema},d.perspective=function(e,t){if("local"===e.type){for(let{schema:i,key:n}of t.schemas){if((i._flags.id||n)===e.path[0])return{perspective:i,path:e.path.slice(1)};if(i.$_terms.shared){for(let t of i.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},d.assert=function(e,t,i,s,l,p){e||n(!1,`"${u.label(s._flags,l,p)}" contains link reference "${i.display}" ${t}`)}},3832:(e,t,i)=>{"use strict";let n=i(375),s=i(8068),l=i(8160),p={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/};e.exports=s.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,t){let{schema:i,error:n}=t;if(!e.match(p.numberRx))return;e=e.trim();let s={value:parseFloat(e)};if(0===s.value&&(s.value=0),!i._flags.unsafe){if(e.match(/e/i)){if(p.extractSignificantDigits(e)!==p.extractSignificantDigits(String(s.value)))return s.errors=n("number.unsafe"),s}else{let t=s.value.toString();if(t.match(/e/i))return s;if(t!==p.normalizeDecimal(e))return s.errors=n("number.unsafe"),s}}return s}},validate(e,t){let{schema:i,error:n,prefs:s}=t;if(e===1/0||e===-1/0)return{value:e,errors:n("number.infinity")};if(!l.isNumber(e))return{value:e,errors:n("number.base")};let p={value:e};if(s.convert){let e=i.$_getRule("precision");if(e){let t=Math.pow(10,e.args.limit);p.value=Math.round(p.value*t)/t}}return 0===p.value&&(p.value=0),!i._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(p.errors=n("number.unsafe")),p},rules:{compare:{method:!1,validate(e,t,i,n){let{limit:s}=i,{name:p,operator:u,args:d}=n;return l.compare(e,s,u)?e:t.error("number."+p,{limit:d.limit,value:e})},args:[{name:"limit",ref:!0,assert:l.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){return this.$_addRule({name:"multiple",args:{base:e}})},validate(e,t,i,n){let{base:s}=i;return e*(1/s)%1==0?e:t.error("number.multiple",{multiple:n.args.base,value:e})},args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"}],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return n(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,t,i){let{limit:n}=i,s=e.toString().match(p.precisionRx);return Math.max((s[1]?s[1].length:0)-(s[2]?parseInt(s[2],10):0),0)<=n?e:t.error("number.precision",{limit:n,value:e})},convert:!0},sign:{method(e){return n(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate(e,t,i){let{sign:n}=i;return"negative"===n&&e<0||"positive"===n&&e>0?e:t.error(`number.${n}`)}},unsafe:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),p.extractSignificantDigits=function(e){return e.replace(p.exponentialPartRegex,"").replace(p.dotRegex,"").replace(p.trailingZerosRegex,"").replace(p.leadingSignAndZerosRegex,"")},p.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e}},8966:(e,t,i)=>{"use strict";let n=i(7824);e.exports=n.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})},7417:(e,t,i)=>{"use strict";let n=i(375),s=i(5380),l=i(1745),p=i(9959),u=i(6064),d=i(9926),m=i(5752),h=i(8068),g=i(8160),f={tlds:d instanceof Set&&{tlds:{allow:d,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,ipRegex:p.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};e.exports=h.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,t){let{schema:i,state:n,prefs:s}=t,l=i.$_getRule("normalize");l&&(e=e.normalize(l.args.form));let p=i.$_getRule("case");p&&(e="upper"===p.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());let u=i.$_getRule("trim");if(u&&u.args.enabled&&(e=e.trim()),i.$_terms.replacements)for(let t of i.$_terms.replacements)e=e.replace(t.pattern,t.replacement);let d=i.$_getRule("hex");if(d&&d.args.options.byteAligned&&e.length%2!=0&&(e=`0${e}`),i.$_getRule("isoDate")){let t=f.isoDate(e);t&&(e=t)}if(i._flags.truncate){let t=i.$_getRule("max");if(t){let l=t.args.limit;if(g.isResolvable(l)&&(l=l.resolve(e,n,s),!g.limit(l)))return{value:e,errors:i.$_createError("any.ref",l,{ref:t.args.limit,arg:"limit",reason:"must be a positive integer"},n,s)};e=e.slice(0,l)}}return{value:e}}},validate(e,t){let{schema:i,error:n}=t;if("string"!=typeof e)return{value:e,errors:n("string.base")};if(""===e){let t=i.$_getRule("min");if(t&&0===t.args.limit)return;return{value:e,errors:n("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g.assertOptions(e,["paddingRequired","urlSafe"]),n("boolean"==typeof(e={urlSafe:!1,paddingRequired:!0,...e}).paddingRequired,"paddingRequired must be boolean"),n("boolean"==typeof e.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate(e,t,i){let{options:n}=i;return f.base64Regex[n.paddingRequired][n.urlSafe].test(e)?e:t.error("string.base64")}},case:{method(e){return n(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate(e,t,i){let{direction:n}=i;return"lower"===n&&e===e.toLocaleLowerCase()||"upper"===n&&e===e.toLocaleUpperCase()?e:t.error(`string.${n}case`)},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let i=e.length,n=0,s=1;for(;i--;){let t=e.charAt(i)*s;n+=t-9*(t>9),s^=3}return n>0&&n%10==0?e:t.error("string.creditCard")}},dataUri:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g.assertOptions(e,["paddingRequired"]),n("boolean"==typeof(e={paddingRequired:!0,...e}).paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate(e,t,i){let{options:n}=i,s=e.match(f.dataUriRegex);return s&&(!s[2]||"base64"!==s[2]||f.base64Regex[n.paddingRequired].false.test(s[3]))?e:t.error("string.dataUri")}},domain:{method(e){e&&g.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);let t=f.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate(e,t,i,n){let{address:l}=n;return s.isValid(e,l)?e:t.error("string.domain")}},email:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.assertOptions(e,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),n(void 0===e.multiple||"boolean"==typeof e.multiple,"multiple option must be an boolean");let t=f.addressOptions(e),i=RegExp(`\\s*[${e.separator?u(e.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:e},regex:i,address:t})},validate(e,t,i,n){let{options:s}=i,{regex:p,address:u}=n,d=s.multiple?e.split(p):[e],m=[];for(let e of d)l.isValid(e,u)||m.push(e);return m.length?t.error("string.email",{value:e,invalids:m}):e}},guid:{alias:"uuid",method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.assertOptions(e,["version","separator"]);let t="";if(e.version){let i=[].concat(e.version);n(i.length>=1,"version must have at least 1 valid version specified");let s=new Set;for(let e=0;e<i.length;++e){let l=i[e];n("string"==typeof l,"version at position "+e+" must be a string");let p=f.guidVersions[l.toLowerCase()];n(p,"version at position "+e+" must be one of "+Object.keys(f.guidVersions).join(", ")),n(!s.has(p),"version at position "+e+" must not be a duplicate"),t+=p,s.add(p)}}n(f.guidSeparators.has(e.separator),'separator must be one of true, false, "-", or ":"');let i=void 0===e.separator?"[:-]?":!0===e.separator?"[:-]":!1===e.separator?"[]?":`\\${e.separator}`,s=RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${i})[0-9A-F]{4}\\2?[${t||"0-9A-F"}][0-9A-F]{3}\\2?[${t?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:e},regex:s})},validate(e,t,i,n){let{regex:s}=n,l=s.exec(e);return l?f.guidBrackets[l[1]]!==l[l.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g.assertOptions(e,["byteAligned"]),n("boolean"==typeof(e={byteAligned:!1,...e}).byteAligned,"byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:e}})},validate(e,t,i){let{options:n}=i;return f.hexRegex.test(e)?n.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(e,t)=>s.isValid(e,{minDomainSegments:1})||f.ipRegex.test(e)?e:t.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.assertOptions(e,["cidr","version"]);let{cidr:t,versions:i,regex:n}=p.regex(e),s=e.version?i:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:s}},regex:n})},validate(e,t,i,n){let{options:s}=i,{regex:l}=n;return l.test(e)?e:s.version?t.error("string.ipVersion",{value:e,cidr:s.cidr,version:s.version}):t.error("string.ip",{value:e,cidr:s.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate(e,t){let{error:i}=t;return f.isoDate(e)?e:i("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>f.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return f.length(this,"length",e,"=",t)},validate(e,t,i,n){let{limit:s,encoding:l}=i,{name:p,operator:u,args:d}=n,m=!l&&e.length;return g.compare(m,s,u)?e:t.error("string."+p,{limit:d.limit,value:e,encoding:l})},args:[{name:"limit",ref:!0,assert:g.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return f.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return f.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";return n(f.normalizationForms.includes(e),"normalization form must be one of "+f.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate(e,t,i){let{error:n}=t,{form:s}=i;return e===e.normalize(s)?e:n("string.normalize",{value:e,form:s})},convert:!0},pattern:{alias:"regex",method(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(e instanceof RegExp,"regex must be a RegExp"),n(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof t&&(t={name:t}),g.assertOptions(t,["invert","name"]);let i=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:i})},validate(e,t,i,n){let{regex:s,options:l}=i,{errorCode:p}=n;return s.test(e)^l.invert?e:t.error(p,{name:l.name,regex:s,value:e})},args:["regex","options"],multi:!0},replace:{method(e,t){"string"==typeof e&&(e=RegExp(u(e),"g")),n(e instanceof RegExp,"pattern must be a RegExp"),n("string"==typeof t,"replacement must be a String");let i=this.clone();return i.$_terms.replacements||(i.$_terms.replacements=[]),i.$_terms.replacements.push({pattern:e,replacement:t}),i}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate(e,t,i){let{enabled:n}=i;return n&&e!==e.trim()?t.error("string.trim"):e},convert:!0},truncate:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method(){return this.case("upper")}},uri:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme"]),e.domain&&g.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);let{regex:t,scheme:i}=m.regex(e),n=e.domain?f.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:n,scheme:i})},validate(e,t,i,n){let{options:l}=i,{regex:p,domain:u,scheme:d}=n;if(["http:/","https:/"].includes(e))return t.error("string.uri");let m=p.exec(e);if(m){let i=m[1]||m[2];return!u||l.allowRelative&&!i||s.isValid(i,u)?e:t.error("string.domain",{value:i})}return l.relativeOnly?t.error("string.uriRelativeOnly"):l.scheme?t.error("string.uriCustomScheme",{scheme:d,value:e}):t.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(let{pattern:i,replacement:n}of t.replacements)e=e.replace(i,n);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),f.addressOptions=function(e){if(!e||(n(void 0===e.minDomainSegments||Number.isSafeInteger(e.minDomainSegments)&&e.minDomainSegments>0,"minDomainSegments must be a positive integer"),n(void 0===e.maxDomainSegments||Number.isSafeInteger(e.maxDomainSegments)&&e.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===e.tlds))return e;if(!0===e.tlds||void 0===e.tlds)return n(f.tlds,"Built-in TLD list disabled"),Object.assign({},e,f.tlds);n("object"==typeof e.tlds,"tlds must be true, false, or an object");let t=e.tlds.deny;if(t)return Array.isArray(t)&&(e=Object.assign({},e,{tlds:{deny:new Set(t)}})),n(e.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),n(!e.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),f.validateTlds(e.tlds.deny,"tlds.deny"),e;let i=e.tlds.allow;return i?!0===i?(n(f.tlds,"Built-in TLD list disabled"),Object.assign({},e,f.tlds)):(Array.isArray(i)&&(e=Object.assign({},e,{tlds:{allow:new Set(i)}})),n(e.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),f.validateTlds(e.tlds.allow,"tlds.allow"),e):e},f.validateTlds=function(e,t){for(let i of e)n(s.isValid(i,{minDomainSegments:1,maxDomainSegments:1}),`${t} must contain valid top level domain names`)},f.isoDate=function(e){if(!g.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");let t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},f.length=function(e,t,i,s,l){return n(!l,"Invalid encoding:",l),e.$_addRule({name:t,method:"length",args:{limit:i,encoding:l},operator:s})}},8826:(e,t,i)=>{"use strict";let n=i(375),s=i(8068),l={};l.Map=class extends Map{slice(){return new l.Map(this)}},e.exports=s.extend({type:"symbol",terms:{map:{init:new l.Map}},coerce:{method(e,t){let{schema:i,error:n}=t,s=i.$_terms.map.get(e);return s&&(e=s),i._flags.only&&"symbol"!=typeof e?{value:e,errors:n("symbol.map",{map:i.$_terms.map})}:{value:e}}},validate(e,t){let{error:i}=t;if("symbol"!=typeof e)return{value:e,errors:i("symbol.base")}},rules:{map:{method(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),n(e&&e[Symbol.iterator],"Iterable must be an iterable or object");let t=this.clone(),i=[];for(let s of e){n(s&&s[Symbol.iterator],"Entry must be an iterable");let[e,l]=s;n("object"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e,"Key must not be of type object, function, or Symbol"),n("symbol"==typeof l,"Value must be a Symbol"),t.$_terms.map.set(e,l),i.push(l)}return t.valid(...i)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(e,t,i)=>{"use strict";let n=i(375),s=i(8571),l=i(738),p=i(9621),u=i(8160),d=i(6354),m=i(493),h={result:Symbol("result")};t.entry=function(e,t,i){let s=u.defaults;i&&(n(void 0===i.warnings,"Cannot override warnings preference in synchronous validation"),n(void 0===i.artifacts,"Cannot override artifacts preference in synchronous validation"),s=u.preferences(u.defaults,i));let l=h.entry(e,t,s);n(!l.mainstay.externals.length,"Schema with external rules must use validateAsync()");let p={value:l.value};return l.error&&(p.error=l.error),l.mainstay.warnings.length&&(p.warning=d.details(l.mainstay.warnings)),l.mainstay.debug&&(p.debug=l.mainstay.debug),l.mainstay.artifacts&&(p.artifacts=l.mainstay.artifacts),p},t.entryAsync=async function(e,t,i){let n=u.defaults;i&&(n=u.preferences(u.defaults,i));let s=h.entry(e,t,n),l=s.mainstay;if(s.error)throw l.debug&&(s.error.debug=l.debug),s.error;if(l.externals.length){let e=s.value;for(let{method:t,path:s,label:u}of l.externals){let l,d,m=e;s.length&&(l=s[s.length-1],m=(d=p(e,s.slice(0,-1)))[l]);try{let n=await t(m,{prefs:i});if(void 0===n||n===m)continue;d?d[l]=n:e=n}catch(e){throw n.errors.label&&(e.message+=` (${u})`),e}}s.value=e}if(!n.warnings&&!n.debug&&!n.artifacts)return s.value;let m={value:s.value};return l.warnings.length&&(m.warning=d.details(l.warnings)),l.debug&&(m.debug=l.debug),l.artifacts&&(m.artifacts=l.artifacts),m},h.entry=function(e,i,n){let{tracer:s,cleanup:l}=h.tracer(i,n),p={externals:[],warnings:[],tracer:s,debug:n.debug?[]:null,links:i._ids._schemaChain?new Map:null},u=i._ids._schemaChain?[{schema:i}]:null,g=new m([],[],{mainstay:p,schemas:u}),f=t.validate(e,i,g,n);l&&i.$_root.untrace();let y=d.process(f.errors,e,n);return{value:f.value,error:y,mainstay:p}},h.tracer=function(e,t){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:t.debug?(n(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:h.ignore}},t.validate=function(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t.$_terms.whens&&(t=t._generate(e,i,n).schema),t._preferences&&(n=h.prefs(t,n)),t._cache&&n.cache){let n=t._cache.get(e);if(i.mainstay.tracer.debug(i,"validate","cached",!!n),n)return n}let a=(s,l,p)=>t.$_createError(s,e,l,p||i,n),l={original:e,prefs:n,schema:t,state:i,error:a,errorsArray:h.errorsArray,warn:(e,t,n)=>i.mainstay.warnings.push(a(e,t,n)),message:(s,l)=>t.$_createError("custom",e,l,i,n,{messages:s})};i.mainstay.tracer.entry(t,i);let p=t._definition;if(p.prepare&&void 0!==e&&n.convert){let t=p.prepare(e,l);if(t){if(i.mainstay.tracer.value(i,"prepare",e,t.value),t.errors)return h.finalize(t.value,[].concat(t.errors),l);e=t.value}}if(p.coerce&&void 0!==e&&n.convert&&(!p.coerce.from||p.coerce.from.includes(typeof e))){let t=p.coerce.method(e,l);if(t){if(i.mainstay.tracer.value(i,"coerced",e,t.value),t.errors)return h.finalize(t.value,[].concat(t.errors),l);e=t.value}}let d=t._flags.empty;d&&d.$_match(h.trim(e,t),i.nest(d),u.defaults)&&(i.mainstay.tracer.value(i,"empty",e,void 0),e=void 0);let m=s.presence||t._flags.presence||(t._flags._endedSwitch?null:n.presence);if(void 0===e){if("forbidden"===m)return h.finalize(e,null,l);if("required"===m)return h.finalize(e,[t.$_createError("any.required",e,null,i,n)],l);if("optional"===m){if(t._flags.default!==u.symbols.deepDefault)return h.finalize(e,null,l);i.mainstay.tracer.value(i,"default",e,{}),e={}}}else if("forbidden"===m)return h.finalize(e,[t.$_createError("any.unknown",e,null,i,n)],l);let g=[];if(t._valids){let s=t._valids.get(e,i,n,t._flags.insensitive);if(s)return n.convert&&(i.mainstay.tracer.value(i,"valids",e,s.value),e=s.value),i.mainstay.tracer.filter(t,i,"valid",s),h.finalize(e,null,l);if(t._flags.only){let s=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},i,n);if(n.abortEarly)return h.finalize(e,[s],l);g.push(s)}}if(t._invalids){let s=t._invalids.get(e,i,n,t._flags.insensitive);if(s){i.mainstay.tracer.filter(t,i,"invalid",s);let p=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},i,n);if(n.abortEarly)return h.finalize(e,[p],l);g.push(p)}}if(p.validate){let t=p.validate(e,l);if(t&&(i.mainstay.tracer.value(i,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return g.push(t.errors),h.finalize(e,g,l);if(t.errors.length)return g.push(...t.errors),h.finalize(e,g,l)}}return t._rules.length?h.rules(e,g,l):h.finalize(e,g,l)},h.rules=function(e,t,i){let{schema:n,state:s,prefs:l}=i;for(let p of n._rules){let d=n._definition.rules[p.method];if(d.convert&&l.convert){s.mainstay.tracer.log(n,s,"rule",p.name,"full");continue}let m,g=p.args;if(p._resolve.length)for(let t of(g=Object.assign({},g),p._resolve)){let i=d.argsByName.get(t),p=g[t].resolve(e,s,l),h=i.normalize?i.normalize(p):p,f=u.validateArg(h,null,i);if(f){m=n.$_createError("any.ref",p,{arg:t,ref:g[t],reason:f},s,l);break}g[t]=h}m=m||d.validate(e,i,g,p);let f=h.rule(m,p);if(f.errors){if(s.mainstay.tracer.log(n,s,"rule",p.name,"error"),p.warn){s.mainstay.warnings.push(...f.errors);continue}if(l.abortEarly)return h.finalize(e,f.errors,i);t.push(...f.errors)}else s.mainstay.tracer.log(n,s,"rule",p.name,"pass"),s.mainstay.tracer.value(s,"rule",e,f.value,p.name),e=f.value}return h.finalize(e,t,i)},h.rule=function(e,t){return e instanceof d.Report?(h.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[u.symbols.errors]?(e.forEach(e=>h.error(e,t)),{errors:e,value:null}):{errors:null,value:e}},h.error=function(e,t){return t.message&&e._setTemplate(t.message),e},h.finalize=function(e,t,i){t=t||[];let{schema:s,state:l,prefs:p}=i;if(t.length){let n=h.default("failover",void 0,t,i);void 0!==n&&(l.mainstay.tracer.value(l,"failover",e,n),e=n,t=[])}if(t.length&&s._flags.error){if("function"==typeof s._flags.error)for(let e of(Array.isArray(t=s._flags.error(t))||(t=[t]),t))n(e instanceof Error||e instanceof d.Report,"error() must return an Error object");else t=[s._flags.error]}if(void 0===e){let n=h.default("default",e,t,i);l.mainstay.tracer.value(l,"default",e,n),e=n}if(s._flags.cast&&void 0!==e){let t=s._definition.cast[s._flags.cast];if(t.from(e)){let n=t.to(e,i);l.mainstay.tracer.value(l,"cast",e,n,s._flags.cast),e=n}}if(s.$_terms.externals&&p.externals&&!1!==p._externals)for(let{method:e}of s.$_terms.externals)l.mainstay.externals.push({method:e,path:l.path,label:d.label(s._flags,l,p)});let u={value:e,errors:t.length?t:null};return s._flags.result&&(u.value="strip"===s._flags.result?void 0:i.original,l.mainstay.tracer.value(l,s._flags.result,e,u.value),l.shadow(e,s._flags.result)),s._cache&&!1!==p.cache&&!s._refs.length&&s._cache.set(i.original,u),void 0===e||u.errors||void 0===s._flags.artifact||(l.mainstay.artifacts=l.mainstay.artifacts||new Map,l.mainstay.artifacts.has(s._flags.artifact)||l.mainstay.artifacts.set(s._flags.artifact,[]),l.mainstay.artifacts.get(s._flags.artifact).push(l.path)),u},h.prefs=function(e,t){let i=t===u.defaults;return i&&e._preferences[u.symbols.prefs]?e._preferences[u.symbols.prefs]:(t=u.preferences(t,e._preferences),i&&(e._preferences[u.symbols.prefs]=t),t)},h.default=function(e,t,i,n){let{schema:l,state:p,prefs:d}=n,m=l._flags[e];if(d.noDefaults||void 0===m)return t;if(p.mainstay.tracer.log(l,p,"rule",e,"full"),!m)return m;if("function"==typeof m){let t=m.length?[s(p.ancestors[0]),n]:[];try{return m(...t)}catch(t){return void i.push(l.$_createError(`any.${e}`,null,{error:t},p,d))}}return"object"!=typeof m?m:m[u.symbols.literal]?m.literal:u.isResolvable(m)?m.resolve(t,p,d):s(m)},h.trim=function(e,t){if("string"!=typeof e)return e;let i=t.$_getRule("trim");return i&&i.args.enabled?e.trim():e},h.ignore={active:!1,debug:l,entry:l,filter:l,log:l,resolve:l,value:l},h.errorsArray=function(){let e=[];return e[u.symbols.errors]=!0,e}},2036:(e,t,i)=>{"use strict";let n=i(375),s=i(9474),l=i(8160),p={};e.exports=p.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=p.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){l.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,i){if(e=e||new p.Values,t){if(t._override)return t.clone();for(let i of[...t._values,...t._refs])e.add(i)}if(i)for(let t of[...i._values,...i._refs])e.remove(t);return e.length?e:null}remove(e){l.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,i,n){return!!this.get(e,t,i,n)}get(e,t,i,n){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&n){let t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e){for(let t of this._values)if(s(t,e))return{value:t}}if(t)for(let l of this._refs){let p=l.resolve(e,t,i,null,{in:!0});if(void 0===p)continue;let u=l.in&&"object"==typeof p?Array.isArray(p)?p:Object.keys(p):[p];for(let t of u)if(typeof t==typeof e){if(n&&e&&"string"==typeof e){if(t.toLowerCase()===e.toLowerCase())return{value:t,ref:l}}else if(s(t,e))return{value:t,ref:l}}}return!1}override(){this._override=!0}values(e){if(e&&e.display){let e=[];for(let t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){let e=new p.Values(this._values,this._refs);return e._override=this._override,e}concat(e){n(!e._override,"Cannot concat override set of values");let t=new p.Values([...this._values,...e._values],[...this._refs,...e._refs]);return t._override=this._override,t}describe(){let e=[];for(let t of(this._override&&e.push({override:!0}),this._values.values()))e.push(t&&"object"==typeof t?{value:t}:t);for(let t of this._refs.values())e.push(t.describe());return e}},p.Values.prototype[l.symbols.values]=!0,p.Values.prototype.slice=p.Values.prototype.clone,p.lowercases=function(e){let t=new Map;if(e)for(let i of e)"string"==typeof i&&t.set(i.toLowerCase(),i);return t}},978:(e,t,i)=>{"use strict";let n=i(375),s=i(8571),l=i(1687),p=i(9621),u={};e.exports=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n(e&&"object"==typeof e,"Invalid defaults value: must be an object"),n(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),n("object"==typeof i,"Invalid options: must be an object"),!t)return null;if(i.shallow)return u.applyToDefaultsWithShallow(e,t,i);let p=s(e);if(!0===t)return p;let d=void 0!==i.nullOverride&&i.nullOverride;return l(p,t,{nullOverride:d,mergeArrays:!1})},u.applyToDefaultsWithShallow=function(e,t,i){let d=i.shallow;n(Array.isArray(d),"Invalid keys");let m=new Map,h=!0===t?null:new Set;for(let i of d){i=Array.isArray(i)?i:i.split(".");let n=p(e,i);n&&"object"==typeof n?m.set(n,h&&p(t,i)||n):h&&h.add(i)}let g=s(e,{},m);if(!h)return g;for(let e of h)u.reachCopy(g,t,e);let f=void 0!==i.nullOverride&&i.nullOverride;return l(g,t,{nullOverride:f,mergeArrays:!1})},u.reachCopy=function(e,t,i){for(let e of i){if(!(e in t))return;let i=t[e];if("object"!=typeof i||null===i)return;t=i}let n=t,s=e;for(let e=0;e<i.length-1;++e){let t=i[e];"object"!=typeof s[t]&&(s[t]={}),s=s[t]}s[i[i.length-1]]=n}},375:(e,t,i)=>{"use strict";let n=i(7916);e.exports=function(e){if(!e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];if(1===i.length&&i[0]instanceof Error)throw i[0];throw new n(i)}}},8571:(e,t,i)=>{"use strict";let n=i(9621),s=i(4277),l=i(7043),p={needsProtoHack:new Set([s.set,s.map,s.weakSet,s.weakMap])};e.exports=p.clone=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("object"!=typeof e||null===e)return e;let n=p.clone,u=i;if(t.shallow){if(!0!==t.shallow)return p.cloneWithShallow(e,t);n=e=>e}else if(u){let t=u.get(e);if(t)return t}else u=new Map;let d=s.getInternalProto(e);if(d===s.buffer)return!1;if(d===s.date)return new Date(e.getTime());if(d===s.regex)return new RegExp(e);let m=p.base(e,d,t);if(m===e)return e;if(u&&u.set(e,m),d===s.set)for(let i of e)m.add(n(i,t,u));else if(d===s.map)for(let[i,s]of e)m.set(i,n(s,t,u));let h=l.keys(e,t);for(let i of h){if("__proto__"===i)continue;if(d===s.array&&"length"===i){m.length=e.length;continue}let l=Object.getOwnPropertyDescriptor(e,i);l?l.get||l.set?Object.defineProperty(m,i,l):l.enumerable?m[i]=n(e[i],t,u):Object.defineProperty(m,i,{enumerable:!1,writable:!0,configurable:!0,value:n(e[i],t,u)}):Object.defineProperty(m,i,{enumerable:!0,writable:!0,configurable:!0,value:n(e[i],t,u)})}return m},p.cloneWithShallow=function(e,t){let i=t.shallow;(t=Object.assign({},t)).shallow=!1;let s=new Map;for(let t of i){let i=n(e,t);"object"!=typeof i&&"function"!=typeof i||s.set(i,i)}return p.clone(e,t,s)},p.base=function(e,t,i){if(!1===i.prototype)return p.needsProtoHack.has(t)?new t.constructor:t===s.array?[]:{};let n=Object.getPrototypeOf(e);if(n&&n.isImmutable)return e;if(t===s.array){let e=[];return n!==t&&Object.setPrototypeOf(e,n),e}if(p.needsProtoHack.has(t)){let e=new n.constructor;return n!==t&&Object.setPrototypeOf(e,n),e}return Object.create(n)}},9474:(e,t,i)=>{"use strict";let n=i(4277),s={mismatched:null};e.exports=function(e,t,i){return i=Object.assign({prototype:!0},i),!!s.isDeepEqual(e,t,i,[])},s.isDeepEqual=function(e,t,i,l){if(e===t)return 0!==e||1/e==1/t;let p=typeof e;if(p!==typeof t||null===e||null===t)return!1;if("function"===p){if(!i.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==p)return e!=e&&t!=t;let u=s.getSharedType(e,t,!!i.prototype);switch(u){case n.buffer:return!1;case n.promise:return e===t;case n.regex:return e.toString()===t.toString();case s.mismatched:return!1}for(let i=l.length-1;i>=0;--i)if(l[i].isSame(e,t))return!0;l.push(new s.SeenEntry(e,t));try{return!!s.isDeepEqualObj(u,e,t,i,l)}finally{l.pop()}},s.getSharedType=function(e,t,i){if(i)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?s.mismatched:n.getInternalProto(e);let l=n.getInternalProto(e);return l!==n.getInternalProto(t)?s.mismatched:l},s.valueOf=function(e){let t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},s.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},s.isSetSimpleEqual=function(e,t){for(let i of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,i))return!1;return!0},s.isDeepEqualObj=function(e,t,i,l,p){let{isDeepEqual:u,valueOf:d,hasOwnEnumerableProperty:m}=s,{keys:h,getOwnPropertySymbols:g}=Object;if(e===n.array){if(!l.part){if(t.length!==i.length)return!1;for(let e=0;e<t.length;++e)if(!u(t[e],i[e],l,p))return!1;return!0}for(let e of t)for(let t of i)if(u(e,t,l,p))return!0}else if(e===n.set){if(t.size!==i.size)return!1;if(!s.isSetSimpleEqual(t,i)){let e=new Set(Set.prototype.values.call(i));for(let i of Set.prototype.values.call(t)){if(e.delete(i))continue;let t=!1;for(let n of e)if(u(i,n,l,p)){e.delete(n),t=!0;break}if(!t)return!1}}}else if(e===n.map){if(t.size!==i.size)return!1;for(let[e,n]of Map.prototype.entries.call(t))if(void 0===n&&!Map.prototype.has.call(i,e)||!u(n,Map.prototype.get.call(i,e),l,p))return!1}else if(e===n.error&&(t.name!==i.name||t.message!==i.message))return!1;let f=d(t),y=d(i);if((t!==f||i!==y)&&!u(f,y,l,p))return!1;let b=h(t);if(!l.part&&b.length!==h(i).length&&!l.skip)return!1;let T=0;for(let e of b)if(l.skip&&l.skip.includes(e))void 0===i[e]&&++T;else if(!m(i,e)||!u(t[e],i[e],l,p))return!1;if(!l.part&&b.length-T!==h(i).length)return!1;if(!1!==l.symbols){let e=g(t),n=new Set(g(i));for(let s of e){if(!l.skip||!l.skip.includes(s)){if(m(t,s)){if(!m(i,s)||!u(t[s],i[s],l,p))return!1}else if(m(i,s))return!1}n.delete(s)}for(let e of n)if(m(i,e))return!1}return!0},s.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}}},7916:(e,t,i)=>{"use strict";let n=i(8761);e.exports=class extends Error{constructor(e){super(e.filter(e=>""!==e).map(e=>"string"==typeof e?e:e instanceof Error?e.message:n(e)).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}},5277:e=>{"use strict";let t={};e.exports=function(e){if(!e)return"";let i="";for(let n=0;n<e.length;++n){let s=e.charCodeAt(n);t.isSafe(s)?i+=e[n]:i+=t.escapeHtmlChar(s)}return i},t.escapeHtmlChar=function(e){return t.namedHtml.get(e)||(e>=256?"&#"+e+";":`&#x${e.toString(16).padStart(2,"0")};`)},t.isSafe=function(e){return t.safeCharCodes.has(e)},t.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),t.safeCharCodes=function(){let e=new Set;for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&e.add(t);return e}()},6064:e=>{"use strict";e.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:e=>{"use strict";e.exports=function(){}},1687:(e,t,i)=>{"use strict";let n=i(375),s=i(8571),l=i(7043),p={};e.exports=p.merge=function(e,t,i){if(n(e&&"object"==typeof e,"Invalid target value: must be an object"),n(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(i=Object.assign({nullOverride:!0,mergeArrays:!0},i),Array.isArray(t)){n(Array.isArray(e),"Cannot merge array onto an object"),i.mergeArrays||(e.length=0);for(let n=0;n<t.length;++n)e.push(s(t[n],{symbols:i.symbols}));return e}let u=l.keys(t,i);for(let n=0;n<u.length;++n){let l=u[n];if("__proto__"===l||!Object.prototype.propertyIsEnumerable.call(t,l))continue;let d=t[l];if(d&&"object"==typeof d){if(e[l]===d)continue;!e[l]||"object"!=typeof e[l]||Array.isArray(e[l])!==Array.isArray(d)||d instanceof Date||d instanceof RegExp?e[l]=s(d,{symbols:i.symbols}):p.merge(e[l],d,i)}else(null!=d||i.nullOverride)&&(e[l]=d)}return e}},9621:(e,t,i)=>{"use strict";let n=i(375),s={};e.exports=function(e,t,i){if(!1===t||null==t)return e;"string"==typeof(i=i||{})&&(i={separator:i});let l=Array.isArray(t);n(!l||!i.separator,"Separator option is not valid for array-based chain");let p=l?t:t.split(i.separator||"."),u=e;for(let e=0;e<p.length;++e){let l=p[e],d=i.iterables&&s.iterables(u);if(Array.isArray(u)||"set"===d){let e=Number(l);Number.isInteger(e)&&(l=e<0?u.length+e:e)}if(!u||"function"==typeof u&&!1===i.functions||!d&&void 0===u[l]){n(!i.strict||e+1===p.length,"Missing segment",l,"in reach path ",t),n("object"==typeof u||!0===i.functions||"function"!=typeof u,"Invalid segment",l,"in reach path ",t),u=i.default;break}u=d?"set"===d?[...u][l]:u.get(l):u[l]}return u},s.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0}},8761:e=>{"use strict";e.exports=function(){try{return JSON.stringify(...arguments)}catch(e){return"[Cannot display object: "+e.message+"]"}}},4277:(e,t)=>{"use strict";let i={};t=e.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},i.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;let n=Object.prototype.toString.call(e);return i.typeMap.get(n)||t.generic}},7043:(e,t)=>{"use strict";t.keys=function(e){return!1!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}},3652:(e,t,i)=>{"use strict";let n=i(375),s={};t.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){let i=[].concat((t=t||{}).before||[]),s=[].concat(t.after||[]),l=t.group||"?",p=t.sort||0;for(let t of(n(!i.includes(l),`Item cannot come before itself: ${l}`),n(!i.includes("?"),"Item cannot come before unassociated items"),n(!s.includes(l),`Item cannot come after itself: ${l}`),n(!s.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]),e)){let e={seq:this._items.length,sort:p,before:i,after:s,group:l,node:t};this._items.push(e)}if(!t.manual){let e=this._sort();n(e,"item","?"!==l?`added into group ${l}`:"","created a dependencies error")}return this.nodes}merge(e){for(let t of(Array.isArray(e)||(e=[e]),e))if(t)for(let e of t._items)this._items.push(Object.assign({},e));this._items.sort(s.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;let t=this._sort();return n(t,"merge created a dependencies error"),this.nodes}sort(){let e=this._sort();return n(e,"sort created a dependencies error"),this.nodes}_sort(){let e={},t=Object.create(null),i=Object.create(null);for(let n of this._items){let s=n.seq,l=n.group;for(let p of(i[l]=i[l]||[],i[l].push(s),e[s]=n.before,n.after))t[p]=t[p]||[],t[p].push(s)}for(let t in e){let n=[];for(let s in e[t]){let l=e[t][s];i[l]=i[l]||[],n.push(...i[l])}e[t]=n}for(let n in t)if(i[n])for(let s of i[n])e[s].push(...t[n]);let n={};for(let t in e){let i=e[t];for(let e of i)n[e]=n[e]||[],n[e].push(t)}let s={},l=[];for(let e=0;e<this._items.length;++e){let t=e;if(n[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===s[e])continue;n[e]||(n[e]=[]);let i=n[e].length,l=0;for(let t=0;t<i;++t)s[n[e][t]]&&++l;if(l===i){t=e;break}}}null!==t&&(s[t]=!0,l.push(t))}if(l.length!==this._items.length)return!1;let p={};for(let e of this._items)p[e.seq]=e;for(let e of(this._items=[],this.nodes=[],l)){let t=p[e];this.nodes.push(t.node),this._items.push(t)}return!0}},s.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1},5380:(e,t,i)=>{"use strict";let n=i(443),s=i(2178),l={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:n.URL||URL};t.analyze=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return s.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw Error("Invalid input: domain must be a string");if(e.length>256)return s.code("DOMAIN_TOO_LONG");if(l.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return s.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(l.domainControlRx.test(e))return s.code("DOMAIN_INVALID_CHARS");e=l.punycode(e),t.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));let i=t.minDomainSegments||l.minDomainSegments,n=e.split(".");if(n.length<i)return s.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&n.length>t.maxDomainSegments)return s.code("DOMAIN_SEGMENTS_COUNT_MAX");let p=t.tlds;if(p){let e=n[n.length-1].toLowerCase();if(p.deny&&p.deny.has(e)||p.allow&&!p.allow.has(e))return s.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<n.length;++e){let t=n[e];if(!t.length)return s.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return s.code("DOMAIN_LONG_SEGMENT");if(e<n.length-1){if(!l.domainSegmentRx.test(t))return s.code("DOMAIN_INVALID_CHARS")}else if(!l.tldSegmentRx.test(t))return s.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,i){return!t.analyze(e,i)},l.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new l.URL(`http://${e}`).host}catch(t){return e}}},1745:(e,t,i)=>{"use strict";let n=i(9848),s=i(5380),l=i(2178),p={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(n.TextEncoder||TextEncoder)};t.analyze=function(e,t){return p.email(e,t)},t.isValid=function(e,t){return!p.email(e,t)},p.email=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)throw Error("Invalid input: email must be a string");if(!e)return l.code("EMPTY_STRING");let i=!p.nonAsciiRx.test(e);if(!i){if(!1===t.allowUnicode)return l.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}let n=e.split("@");if(2!==n.length)return n.length>2?l.code("MULTIPLE_AT_CHAR"):l.code("MISSING_AT_CHAR");let[u,d]=n;if(!u)return l.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return l.code("ADDRESS_TOO_LONG");if(p.encoder.encode(u).length>64)return l.code("LOCAL_TOO_LONG")}return p.local(u,i)||s.analyze(d,t)},p.local=function(e,t){let i=e.split(".");for(let e of i){if(!e.length)return l.code("EMPTY_LOCAL_SEGMENT");if(t){if(!p.atextRx.test(e))return l.code("INVALID_LOCAL_CHARS")}else for(let t of e){if(p.atextRx.test(t))continue;let e=p.binary(t);if(!p.atomRx.test(e))return l.code("INVALID_LOCAL_CHARS")}}},p.binary=function(e){return Array.from(p.encoder.encode(e)).map(e=>String.fromCharCode(e)).join("")},p.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,p.atomRx=RegExp("(?:[\\xc2-\\xdf][\\x80-\\xbf])|(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})|(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})")},2178:(e,t)=>{"use strict";t.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},t.code=function(e){return{code:e,error:t.codes[e]}}},9959:(e,t,i)=>{"use strict";let n=i(375),s=i(5752);t.regex=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");let t=e.cidr?e.cidr.toLowerCase():"optional";n(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),n(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let i=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(i)||(i=[i]),n(i.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<i.length;++e)n("string"==typeof i[e],"options.version must only contain strings"),i[e]=i[e].toLowerCase(),n(["ipv4","ipv6","ipvfuture"].includes(i[e]),"options.version contains unknown version "+i[e]+" - must be one of ipv4, ipv6, ipvfuture");i=Array.from(new Set(i));let l=`(?:${i.map(e=>{if("forbidden"===t)return s.ip[e];let i=`\\/${"ipv4"===e?s.ip.v4Cidr:s.ip.v6Cidr}`;return"required"===t?`${s.ip[e]}${i}`:`${s.ip[e]}(?:${i})?`}).join("|")})`,p=RegExp(`^${l}$`);return{cidr:t,versions:i,regex:p,raw:l}}},5752:(e,t,i)=>{"use strict";let n=i(375),s=i(6064),l={generate:function(){let e={},t="\\dA-Fa-f",i="["+t+"]",n="\\w-\\.~",s="!\\$&'\\(\\)\\*\\+,;=",l="%"+t,p=n+l+s+":@",u="["+p+"]",d="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+d+"\\.){3}"+d;let m=i+"{1,4}",h="(?:"+m+":"+m+"|"+e.ipv4address+")";e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:(?:"+m+":){6}"+h+"|::(?:"+m+":){5}"+h+"|"+("(?:"+m+")?::(?:")+m+":){4}"+h+"|"+("(?:(?:"+m+":){0,1}"+m+")?::(?:")+m+":){3}"+h+"|"+("(?:(?:"+m+":){0,2}"+m+")?::(?:")+m+":){2}"+h+"|"+("(?:(?:"+m+":){0,3}"+m+")?::")+m+":"+h+"|"+("(?:(?:"+m+":){0,4}")+m+")?::"+h+"|"+("(?:(?:"+m+":){0,5}")+m+")?::"+m+"|"+("(?:(?:"+m)+":){0,6}"+m+")?::)",e.ipvFuture="v"+i+"+\\.["+n+s+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);let g="["+n+l+s+":]*",f="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|"+("["+n)+l+s+"]{1,255})",y="(?:"+g+"@)?"+f+"(?::\\d*)?",b="(?:"+g+"@)?("+f+")(?::\\d*)?",T=u+"*",S=u+"+",_="(?:\\/"+T+")*",v="\\/(?:"+S+_+")?",L=S+_,C="["+n+l+s+"@]+"+_;return e.hierPart="(?:(?:\\/\\/"+y+_+")|"+v+"|"+L+"|(?:\\/\\/\\/"+T+_+"))",e.hierPartCapture="(?:(?:\\/\\/"+b+_+")|"+v+"|"+L+")",e.relativeRef="(?:(?:\\/\\/"+y+_+")|"+v+"|"+C+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+b+_+")|"+v+"|"+C+"|)",e.query="["+p+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+p+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+p+"\\/\\?]*",e}};l.rfc3986=l.generate(),t.ip={v4Cidr:l.rfc3986.ipv4Cidr,v6Cidr:l.rfc3986.ipv6Cidr,ipv4:l.rfc3986.ipv4address,ipv6:l.rfc3986.ipv6address,ipvfuture:l.rfc3986.ipvFuture},l.createRegex=function(e){let t=l.rfc3986,i="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",p=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return l.wrap(p+i);let u="";if(e.scheme){n(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");let i=[].concat(e.scheme);n(i.length>=1,"scheme must have at least 1 scheme specified");let l=[];for(let e=0;e<i.length;++e){let p=i[e];n(p instanceof RegExp||"string"==typeof p,"scheme at position "+e+" must be a RegExp or String"),p instanceof RegExp?l.push(p.source.toString()):(n(t.schemeRegex.test(p),"scheme at position "+e+" must be a valid scheme"),l.push(s(p)))}u=l.join("|")}let d="(?:"+(u?"(?:"+u+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",m=e.allowRelative?"(?:"+d+"|"+p+")":d;return l.wrap(m+i,u)},l.wrap=function(e,t){return{raw:e=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${e}`,regex:RegExp(`^${e}$`),scheme:t}},l.uriRegex=l.createRegex({}),t.regex=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?l.createRegex(e):l.uriRegex}},1447:(e,t)=>{"use strict";let i={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};t.Parser=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t[i.settings]&&t.constants)for(let e in t.constants){let i=t.constants[e];if(null!==i&&!["boolean","number","string"].includes(typeof i))throw Error(`Formula constant ${e} contains invalid ${typeof i} value type`)}this.settings=t[i.settings]?t:Object.assign({[i.settings]:!0,constants:{},functions:{}},t),this.single=null,this._parts=null,this._parse(e)}_parse(e){let n=[],s="",l=0,p=!1,o=e=>{if(l)throw Error("Formula missing closing parenthesis");let u=n.length?n[n.length-1]:null;if(p||s||e){if(u&&"reference"===u.type&&")"===e)return u.type="function",u.value=this._subFormula(s,u.value),void(s="");if(")"===e){let e=new t.Parser(s,this.settings);n.push({type:"segment",value:e})}else if(p){if("]"===p)return n.push({type:"reference",value:s}),void(s="");n.push({type:"literal",value:s})}else if(i.operatorCharacters.includes(s))u&&"operator"===u.type&&i.operators.includes(u.value+s)?u.value+=s:n.push({type:"operator",value:s});else if(s.match(i.numberRx))n.push({type:"constant",value:parseFloat(s)});else if(void 0!==this.settings.constants[s])n.push({type:"constant",value:this.settings.constants[s]});else{if(!s.match(i.tokenRx))throw Error(`Formula contains invalid token: ${s}`);n.push({type:"reference",value:s})}s=""}};for(let t of e)p?t===p?(o(),p=!1):s+=t:l?"("===t?(s+=t,++l):")"===t?--l?s+=t:o(t):s+=t:t in i.literals?p=i.literals[t]:"("===t?(o(),++l):i.operatorCharacters.includes(t)?(o(),s=t,o()):" "!==t?s+=t:o();o();let u=!1;for(let e of n=n.map((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==n[t-1].type?e:{type:"operator",value:"n"})){if("operator"===e.type){if(i.operatorsPrefix.includes(e.value))continue;if(!u)throw Error("Formula contains an operator in invalid position");if(!i.operators.includes(e.value))throw Error(`Formula contains an unknown operator ${e.value}`)}else if(u)throw Error("Formula missing expected operator");u=!u}if(!u)throw Error("Formula contains invalid trailing operator");1===n.length&&["reference","literal","constant"].includes(n[0].type)&&(this.single={type:"reference"===n[0].type?"reference":"value",value:n[0].value}),this._parts=n.map(e=>{if("operator"===e.type)return i.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw Error(`Formula contains invalid reference ${e.value}`);return this.settings.reference?this.settings.reference(e.value):i.reference(e.value)})}_subFormula(e,n){let s=this.settings.functions[n];if("function"!=typeof s)throw Error(`Formula contains unknown function ${n}`);let l=[];if(e){let t="",s=0,p=!1,o=()=>{if(!t)throw Error(`Formula contains function ${n} with invalid arguments ${e}`);l.push(t),t=""};for(let n=0;n<e.length;++n){let l=e[n];p?(t+=l,l===p&&(p=!1)):l in i.literals&&!s?(t+=l,p=i.literals[l]):","!==l||s?(t+=l,"("===l?++s:")"===l&&--s):o()}o()}return l=l.map(e=>new t.Parser(e,this.settings)),function(e){let t=[];for(let i of l)t.push(i.evaluate(e));return s.call(e,...t)}}evaluate(e){let t=this._parts.slice();for(let n=t.length-2;n>=0;--n){let s=t[n];if(s&&"operator"===s.type){let l=t[n+1];t.splice(n+1,1);let p=i.evaluate(l,e);t[n]=i.single(s.value,p)}}return i.operatorsOrder.forEach(n=>{for(let s=1;s<t.length-1;)if(n.includes(t[s])){let n=t[s],l=i.evaluate(t[s-1],e),p=i.evaluate(t[s+1],e);t.splice(s,2);let u=i.calculate(n,l,p);t[s-1]=0===u?0:u}else s+=2}),i.evaluate(t[0],e)}},t.Parser.prototype[i.symbol]=!0,i.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},i.evaluate=function(e,t){return null===e?null:"function"==typeof e?e(t):e[i.symbol]?e.evaluate(t):e},i.single=function(e,t){if("!"===e)return!t;let i=-t;return 0===i?0:i},i.calculate=function(e,t,n){if("??"===e)return i.exists(t)?t:n;if("string"==typeof t||"string"==typeof n){if("+"===e)return(t=i.exists(t)?t:"")+(i.exists(n)?n:"")}else switch(e){case"^":return Math.pow(t,n);case"*":return t*n;case"/":return t/n;case"%":return t%n;case"+":return t+n;case"-":return t-n}switch(e){case"<":return t<n;case"<=":return t<=n;case">":return t>n;case">=":return t>=n;case"==":return t===n;case"!=":return t!==n;case"&&":return t&&n;case"||":return t||n}return null},i.exists=function(e){return null!=e}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:e=>{"use strict";e.exports={version:"17.8.3"}}},i={},function r(e){var n=i[e];if(void 0!==n)return n.exports;var s=i[e]={exports:{}};return t[e](s,s.exports,r),s.exports}(5107))},421302:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTranscriptionService=t.createWhisperTranscriptionService=t.createAwsTranscriptionService=t.createNoneTranscriptionService=t.TRANSCRIPTION_SERVICE_TYPES=t.TranscriptionServiceSchema=t.WhisperTranscriptionServiceSchema=t.AwsTranscriptionServiceSchema=t.NoneTranscriptionServiceSchema=t.parseSupportedAudioFormatFromMimeType=t.isSupportedAudioFormat=t.SUPPORTED_AUDIO_FORMATS=void 0;let n=i(312093),s=i(689510);t.SUPPORTED_AUDIO_FORMATS=["wav","webm","mp4"],t.isSupportedAudioFormat=e=>t.SUPPORTED_AUDIO_FORMATS.includes(e),t.parseSupportedAudioFormatFromMimeType=e=>{var i;if(n.G.isNullable(e))return null;let s=null===(i=/^audio\/(.+)$/.exec(e))||void 0===i?void 0:i[1];return(0,t.isSupportedAudioFormat)(s)?s:null},t.NoneTranscriptionServiceSchema=s.z.object({type:s.z.literal("none")}),t.AwsTranscriptionServiceSchema=s.z.object({type:s.z.literal("aws"),params:s.z.object({enableSpeakerDiarization:s.z.boolean().optional().describe("Enable speaker diarization in the transcript to identify and separate different speakers in the audio.")}).default({})}),t.WhisperTranscriptionServiceSchema=s.z.object({type:s.z.literal("whisper")}),t.TranscriptionServiceSchema=s.z.discriminatedUnion("type",[t.NoneTranscriptionServiceSchema,t.AwsTranscriptionServiceSchema,t.WhisperTranscriptionServiceSchema]),t.TRANSCRIPTION_SERVICE_TYPES=["none","aws","whisper"],t.createNoneTranscriptionService=()=>({type:"none"}),t.createAwsTranscriptionService=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"aws",params:{enableSpeakerDiarization:e}}},t.createWhisperTranscriptionService=()=>({type:"whisper"}),t.createTranscriptionService=e=>{switch(e){case"none":return(0,t.createNoneTranscriptionService)();case"aws":return(0,t.createAwsTranscriptionService)();case"whisper":return(0,t.createWhisperTranscriptionService)()}}},690182:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoerceStrippedUrlZodSchema=t.CoerceUrlZodSchema=void 0;let n=i(689510);t.CoerceUrlZodSchema=n.z.coerce.string().transform(e=>e.includes("://")?e:"http://"+e).superRefine((e,t)=>{try{let i=new URL(e);"https:"!==i.protocol&&"http:"!==i.protocol&&t.addIssue({code:n.z.ZodIssueCode.custom,message:"unexpected protocol"})}catch(e){t.addIssue({code:n.z.ZodIssueCode.custom,message:"not a valid URL"})}}),t.CoerceStrippedUrlZodSchema=n.z.coerce.string().transform((e,t)=>{try{return new URL(e.includes("://")?e:"http://"+e)}catch(e){return t.addIssue({code:n.z.ZodIssueCode.custom,message:"not a valid URL",fatal:!0}),n.z.NEVER}}).refine(e=>"https:"===e.protocol||"http:"===e.protocol,{message:"unexpected protocol"}).transform(e=>e.hostname+e.pathname).transform(e=>e.endsWith("/")?e.substring(0,e.length-1):e)},211713:function(e,t,i){"use strict";var n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.ALL_AI_USER_AGENT_TOKENS=t.CustomerToUserAgentTokensMap=t.MmCustomer=t.SCALE_BOT_USER_AGENT=t.COMMON_CRAWL_BOT_USER_AGENT_TOKEN=t.SCALE_BOT_USER_AGENT_TOKEN=void 0;let l=i(312093);t.SCALE_BOT_USER_AGENT_TOKEN="Remo",t.COMMON_CRAWL_BOT_USER_AGENT_TOKEN="CCBot",t.SCALE_BOT_USER_AGENT="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.125 Safari/537.36 (compatible: ".concat(t.SCALE_BOT_USER_AGENT_TOKEN,"/0.1; +https://www.remotasks.com/en/info.txt)"),(s=n||(t.MmCustomer=n={})).Abra="abra",s.Alpaca="alpaca",s.Bulbasaur="bulbasaur",s.Crab="crab",s.Flamingo="flamingo",s.Gorilla="gorilla",s.Ostrich="ostrich",t.CustomerToUserAgentTokensMap={[n.Abra]:["ClaudeBot"],[n.Alpaca]:["Amazonbot"],[n.Bulbasaur]:["Google-Extended"],[n.Crab]:["cohere-ai"],[n.Flamingo]:["FacebookBot"],[n.Gorilla]:["Google-Extended"],[n.Ostrich]:["GPTBot"]},t.ALL_AI_USER_AGENT_TOKENS=l.A.uniq([t.COMMON_CRAWL_BOT_USER_AGENT_TOKEN,t.SCALE_BOT_USER_AGENT_TOKEN,...Object.values(t.CustomerToUserAgentTokensMap).flat()])},529682:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageValidationError=void 0,t.ImageValidationError=class extends Error{constructor(){super(),this.name="ImageValidationError"}}},779122:function(e,t,i){"use strict";var n,s,l,p,u,d,m,h,g,f,y,b,T,S,_;Object.defineProperty(t,"__esModule",{value:!0}),t.MAXIMUM_MS_THAT_FRONTEND_SHOULD_WAIT_FOR_RESPONSE_FROM_SERVER=t.convertImageExtensionToMimeType=t.convertImageMimeTypeToExtension=t.isSupportedImageMimeType=t.SUPPORTED_IMAGE_MIME_TYPES=t.MAX_PER_REQUEST_INGESTION_COUNT=t.ImageQueryFiltersSchema=t.ImageSearchType=t.BatchOperationType=t.DEFAULT_DOMAIN_BLOCKLIST=t.DEFAULT_CATEGORY_BLOCKLIST=t.MultimodalAssetEntitySchema=t.ImageExtension=t.ImageCategory=t.SerpImageLicense=t.ImageLicense=t.HashType=t.ImageDatabaseSource=void 0;let v=i(689510);(g=n||(t.ImageDatabaseSource=n={})).INTERNET="internet",g.ELASTICSEARCH="elasticsearch",g.PROJECT_ELASTICSEARCH="project_elasticsearch",(f=s||(t.HashType=s={})).SHA256="sha256",f.BBMV256="bbmv256",(y=l||(t.ImageLicense=l={})).CC="CC",y.CC0="CC0",y.CC_BY="CC BY",y.CC_BY_SA="CC BY-SA",y.PD="PD",y.OL="OL (Commercial)",(b=p||(t.SerpImageLicense=p={})).CC="Creative Commons Licenses",b.OL="Commercial Licenses",(T=u||(t.ImageCategory=u={})).NATURAL="natural",T.QUANTITATIVE="quantitative",T.MMMU="mmmu",T.UNVALIDATED="unvalidated",T.ART="art",T.BUSINESS="business",T.SCIENCE="science",T.HEALTH="health",T.HUMANITIES="humanities",T.TECH="tech",(S=d||(t.ImageExtension=d={})).PNG="png",S.JPEG="jpeg",S.WEBP="webp",S.SVG="svg";let L=v.z.object({task_id:v.z.string(),project_id:v.z.string(),assigned_to_task:v.z.coerce.date()});t.MultimodalAssetEntitySchema=v.z.object({image_url:v.z.string(),image_domain:v.z.string(),image_size:v.z.number(),image_dimensions:v.z.object({width:v.z.number(),height:v.z.number()}),image_extension:v.z.nativeEnum(d),image_hashes:v.z.record(v.z.string()),image_licenses:v.z.array(v.z.nativeEnum(l)),image_category:v.z.array(v.z.nativeEnum(u)),ingestion_date:v.z.coerce.date(),tasks:v.z.array(L),invalid_hash:v.z.boolean(),image_embedding:v.z.optional(v.z.array(v.z.number())),image_description:v.z.optional(v.z.string()),language:v.z.optional(v.z.string()),clicked_on_count:v.z.optional(v.z.number()),added_to_task_count:v.z.optional(v.z.number()),flagged_low_quality_count:v.z.optional(v.z.number()),image_source_url:v.z.optional(v.z.string()),image_license_url:v.z.optional(v.z.string()),project_id:v.z.optional(v.z.string()),is_project_specific:v.z.optional(v.z.boolean().default(!1)),usage_limit:v.z.optional(v.z.number()),current_usage_count:v.z.optional(v.z.number().default(0)),is_usage_limit_reached:v.z.optional(v.z.boolean().default(!1))}),t.DEFAULT_CATEGORY_BLOCKLIST=[u.MMMU,u.UNVALIDATED],t.DEFAULT_DOMAIN_BLOCKLIST=[],(m||(t.BatchOperationType=m={})).CREATE="create",(_=h||(t.ImageSearchType=h={})).CLIP="clip",_.LEXICAL="lexical",t.ImageQueryFiltersSchema=v.z.object({numResults:v.z.number(),projectId:v.z.string(),searchType:v.z.nativeEnum(h),from:v.z.number().optional(),queryText:v.z.string().optional(),minDimensionsPx:v.z.number().optional(),maxDimensionsPx:v.z.number().optional(),minFileSizeKB:v.z.number().optional(),maxFileSizeKB:v.z.number().optional(),blockedDomainsList:v.z.string().array().optional(),allowedDomainsList:v.z.string().array().optional(),allowedLicenses:v.z.nativeEnum(l).array().optional(),allowedCategories:v.z.nativeEnum(u).array().optional(),allowedExtensions:v.z.nativeEnum(d).array().optional(),allowedLanguages:v.z.string().array().optional()}),t.MAX_PER_REQUEST_INGESTION_COUNT=1e5,t.SUPPORTED_IMAGE_MIME_TYPES=["image/jpg","image/jpeg","image/png","image/svg+xml","image/webp"],t.isSupportedImageMimeType=e=>t.SUPPORTED_IMAGE_MIME_TYPES.includes(e),t.convertImageMimeTypeToExtension=e=>{switch(e){case"image/jpg":case"image/jpeg":return d.JPEG;case"image/png":return d.PNG;case"image/svg+xml":return d.SVG;case"image/webp":return d.WEBP}},t.convertImageExtensionToMimeType=e=>{switch(e){case d.JPEG:return"image/jpeg";case d.PNG:return"image/png";case d.SVG:return"image/svg+xml";case d.WEBP:return"image/webp"}},t.MAXIMUM_MS_THAT_FRONTEND_SHOULD_WAIT_FOR_RESPONSE_FROM_SERVER=45e3},667509:function(e,t,i){"use strict";var n=Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]},__exportStar=function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(i(421302),t),__exportStar(i(690182),t),__exportStar(i(211713),t),__exportStar(i(529682),t),__exportStar(i(779122),t)},150532:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioAttachmentDtoSchema=t.AUDIO_PROCESSING_STATES=t.AudioMetadataSchema=void 0;let n=i(421302),s=i(689510);t.AudioMetadataSchema=s.z.object({duration:s.z.coerce.number().nonnegative()}),t.AUDIO_PROCESSING_STATES=["not_started","processing","completed","failed"],t.AudioAttachmentDtoSchema=s.z.object({url:s.z.string().url(),format:s.z.enum(n.SUPPORTED_AUDIO_FORMATS),processingState:s.z.enum(t.AUDIO_PROCESSING_STATES),processingWorkflowId:s.z.string().optional(),workerId:s.z.string().optional(),userGeneratedAudio:s.z.boolean().optional(),duration:s.z.number().nonnegative().optional(),transcriptUrl:s.z.string().url().optional(),transcriptText:s.z.string().optional(),transcriptJsonUrl:s.z.string().url().optional(),transcriptStart:s.z.number().nonnegative().optional(),transcriptEnd:s.z.number().nonnegative().optional(),metadata:s.z.any()})},389879:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageServiceAggregationsKeys=t.MECEAggregations=t.ImageServiceAggregationsAndHitsSchema=t.ImageServiceAggregationsSchema=t.ImageServiceAggregationEntrySchema=void 0;let n=i(689510);t.ImageServiceAggregationEntrySchema=n.z.object({key:n.z.string(),doc_count:n.z.number(),fill:n.z.optional(n.z.string())}),t.ImageServiceAggregationsSchema=n.z.object({category_counts:n.z.array(t.ImageServiceAggregationEntrySchema),image_extension_count:n.z.array(t.ImageServiceAggregationEntrySchema),language_counts:n.z.array(t.ImageServiceAggregationEntrySchema),licenses_count:n.z.array(t.ImageServiceAggregationEntrySchema),height_ranges:n.z.array(t.ImageServiceAggregationEntrySchema),width_ranges:n.z.array(t.ImageServiceAggregationEntrySchema),image_domain:n.z.array(t.ImageServiceAggregationEntrySchema)}),t.ImageServiceAggregationsAndHitsSchema=n.z.object({metrics:t.ImageServiceAggregationsSchema,totalHits:n.z.number()}),t.MECEAggregations=["image_extension_count","licenses_count","image_domain"],t.ImageServiceAggregationsKeys=Object.keys(t.ImageServiceAggregationsSchema.shape)},606523:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchImageMetadataRequestPayloadSchema=t.ValidateAndMirrorUrlRequestPayloadSchema=t.ValidateImageUrlRequestPayloadSchema=t.MultimodalAssetDtoSchema=void 0;let n=i(689510),s=i(667509);t.MultimodalAssetDtoSchema=s.MultimodalAssetEntitySchema.omit({tasks:!0}),t.ValidateImageUrlRequestPayloadSchema=n.z.object({url:s.CoerceUrlZodSchema,config:n.z.any(),projectId:n.z.string().optional()}),t.ValidateAndMirrorUrlRequestPayloadSchema=n.z.object({url:s.CoerceUrlZodSchema,assignmentId:n.z.string(),allowedExtensions:n.z.array(n.z.string()).optional()}),t.FetchImageMetadataRequestPayloadSchema=n.z.object({url:s.CoerceUrlZodSchema,projectId:n.z.string().optional()})},568338:function(e,t,i){"use strict";var n=Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]},__exportStar=function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(i(150532),t),__exportStar(i(606523),t),__exportStar(i(867628),t),__exportStar(i(820707),t),__exportStar(i(389879),t),__exportStar(i(96702),t)},820707:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SerpImageSearchResponseSchema=t.SerpImageResultSchema=void 0;let n=i(689510);t.SerpImageResultSchema=n.z.object({original:n.z.string().url(),link:n.z.string().url(),license_details_url:n.z.string().url().optional()}),t.SerpImageSearchResponseSchema=n.z.object({images_results:t.SerpImageResultSchema.array().default([])})},867628:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpawningApiOptsApiQueryDomainsResponseDtoSchema=t.SpawningApiOptsApiQueryUrlsResponseDtoSchema=void 0;let n=i(689510);t.SpawningApiOptsApiQueryUrlsResponseDtoSchema=n.z.object({urls:n.z.array(n.z.object({url:n.z.string(),optOut:n.z.boolean().optional(),optIn:n.z.boolean().optional(),details:n.z.unknown().optional()}))}),t.SpawningApiOptsApiQueryDomainsResponseDtoSchema=n.z.object({domains:n.z.array(n.z.object({domain:n.z.string(),optOut:n.z.boolean().optional(),optIn:n.z.boolean().optional()}))})},96702:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TinEyeSearchUrlResponseDtoSchema=void 0;let n=i(689510);t.TinEyeSearchUrlResponseDtoSchema=n.z.object({stats:n.z.object({timestamp:n.z.coerce.number().optional(),query_time:n.z.coerce.number().optional(),total_backlinks:n.z.coerce.number().optional(),total_collection:n.z.coerce.number().optional(),total_results:n.z.coerce.number().optional(),total_stock:n.z.coerce.number().optional(),total_filtered_results:n.z.coerce.number().optional()}).optional(),code:n.z.unknown().optional(),messages:n.z.unknown().optional(),matches:n.z.unknown()})},276527:function(e,t,i){"use strict";var n=Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]},__exportStar=function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(i(667509),t),__exportStar(i(568338),t),__exportStar(i(516930),t),__exportStar(i(645194),t)},865618:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioServiceGetAudioMetricsRequestBodySchema=t.AudioServiceSplitAudioChannelsRequestBodySchema=t.AudioServiceCombineAudioV2RequestBodySchema=t.AudioServiceCombineAudioRequestBodySchema=t.AudioServiceGetSourceRequestBodySchema=t.AudioServiceGetTranscriptRequestBodySchema=t.AudioServiceGetMetadataRequestBodySchema=t.ProcessAudioAttachmentRequestBodySchema=void 0;let n=i(667509),s=i(689510);t.ProcessAudioAttachmentRequestBodySchema=s.z.object({audioUrl:s.z.coerce.string().url(),audioFormat:s.z.enum(n.SUPPORTED_AUDIO_FORMATS).optional(),assignmentId:s.z.coerce.string().optional(),workerId:s.z.coerce.string().optional(),projectId:s.z.coerce.string().optional(),userGeneratedAudio:s.z.boolean(),transcriptionService:n.TranscriptionServiceSchema.default((0,n.createAwsTranscriptionService)())}),t.AudioServiceGetMetadataRequestBodySchema=s.z.object({audioUrl:s.z.coerce.string().url(),audioFormat:s.z.enum(n.SUPPORTED_AUDIO_FORMATS)}),t.AudioServiceGetTranscriptRequestBodySchema=s.z.object({audioUrl:s.z.coerce.string().url()}),t.AudioServiceGetSourceRequestBodySchema=s.z.object({audioUrl:s.z.coerce.string().url()}),t.AudioServiceCombineAudioRequestBodySchema=s.z.object({audioUrl1:s.z.coerce.string().url(),audioUrl2:s.z.coerce.string().url(),assignmentId:s.z.coerce.string().optional(),workerId:s.z.coerce.string().optional(),projectId:s.z.coerce.string().optional()}),t.AudioServiceCombineAudioV2RequestBodySchema=s.z.object({audioUrls:s.z.array(s.z.coerce.string().url()),assignmentId:s.z.coerce.string().optional(),workerId:s.z.coerce.string().optional(),projectId:s.z.coerce.string().optional()}),t.AudioServiceSplitAudioChannelsRequestBodySchema=s.z.object({audioUrl:s.z.coerce.string().url(),assignmentId:s.z.coerce.string().optional(),workerId:s.z.coerce.string().optional(),projectId:s.z.coerce.string().optional()}),t.AudioServiceGetAudioMetricsRequestBodySchema=s.z.object({audioUrl:s.z.coerce.string().url()})},728283:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentUnderstandingUploadResponseBodySchema=t.ContentUnderstandingUploadResponseErrorSchema=t.ContentUnderstandingUploadResponseSuccessSchema=void 0;let n=i(689510);t.ContentUnderstandingUploadResponseSuccessSchema=n.z.object({s3Url:n.z.string().url(),url:n.z.string().url(),type:n.z.literal("success")}),t.ContentUnderstandingUploadResponseErrorSchema=n.z.object({type:n.z.literal("error"),errors:n.z.array(n.z.string())}),t.ContentUnderstandingUploadResponseBodySchema=n.z.discriminatedUnion("type",[t.ContentUnderstandingUploadResponseSuccessSchema,t.ContentUnderstandingUploadResponseErrorSchema])},516930:function(e,t,i){"use strict";var n=Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]},__exportStar=function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(i(865618),t),__exportStar(i(728283),t)},177366:function(e,t,i){"use strict";var n,s,l;Object.defineProperty(t,"__esModule",{value:!0}),t.mapErrorToGoogleDocLink=t.getAudioMetricsErrors=t.hasRequiredAudioMetrics=t.formatMaybeErrorForLogging=t.ErrorType=void 0;let p=i(312093),u=(s=i(298784))&&s.__esModule?s:{default:s};(l=n||(t.ErrorType=n={})).BackgroundNoise="Background noise is too high -- make sure you're in a quiet environment",l.Clipping="Speech volume is clipping -- make sure you're far enough away from your microphone",l.AverageSpeechVolumeTooLow="Average speech volume is low -- make sure you're close enough to your microphone",l.AverageSpeechVolumeTooHigh="Average speech volume is high -- make sure you're far enough away from your microphone",l.SpeechQualityTooLow="Speech quality is low -- make sure you're in a quiet environment and speaking clearly",t.formatMaybeErrorForLogging=e=>p.G.isString(e)||p.G.isNumber(e)||p.G.isBoolean(e)?e:p.G.isArray(e)?e.map(t.formatMaybeErrorForLogging):p.G.isObject(e)?p.G.isError(e)?{name:e.name,message:e.message,stack:e.stack}:e instanceof Date?e.toISOString():p.D.fromPairs(p.D.toPairs(e).map(e=>{let[i,n]=e;return[p.S.make(i),(0,t.formatMaybeErrorForLogging)(n)]})):void 0,t.hasRequiredAudioMetrics=(e,t)=>{var i,n;let{minBackgroundNoiseScore:s,minOverallSpeechScore:l,minAverageVolume:p,maxAverageVolume:d,maxVolume:m,maxAmbientNoiseVolume:h}=null!=t?t:{};return!(!u.default.isNil(null!=s?s:l)&&u.default.isNil(null==e?void 0:e.speechQualityScores)||!u.default.isNil(null!==(n=null!==(i=null!=p?p:d)&&void 0!==i?i:m)&&void 0!==n?n:h)&&u.default.isNil(null==e?void 0:e.volumeMetrics))},t.getAudioMetricsErrors=(e,i)=>{if(!(0,t.hasRequiredAudioMetrics)(e,i))return[];let{minBackgroundNoiseScore:s,minOverallSpeechScore:l,minAverageVolume:p,maxAverageVolume:d,maxVolume:m,maxAmbientNoiseVolume:h}=null!=i?i:{},g=null==e?void 0:e.volumeMetrics,f=null==e?void 0:e.speechQualityScores,y=[];return(!u.default.isNil(h)&&(null==g?void 0:g.averageAmbientVolume)!==void 0&&(null==g?void 0:g.averageAmbientVolume)>h||!u.default.isNil(s)&&(null==f?void 0:f.bgNoise)!==void 0&&(null==f?void 0:f.bgNoise)<s)&&y.push(n.BackgroundNoise),!u.default.isNil(m)&&(null==g?void 0:g.maxSpeechVolume)!==void 0&&(null==g?void 0:g.maxSpeechVolume)>m&&y.push(n.Clipping),!u.default.isNil(p)&&(null==g?void 0:g.averageSpeechVolume)!==void 0&&(null==g?void 0:g.averageSpeechVolume)<p&&y.push(n.AverageSpeechVolumeTooLow),!u.default.isNil(d)&&(null==g?void 0:g.averageSpeechVolume)!==void 0&&(null==g?void 0:g.averageSpeechVolume)>d&&y.push(n.AverageSpeechVolumeTooHigh),!u.default.isNil(l)&&(null==f?void 0:f.overall)!==void 0&&(null==f?void 0:f.overall)<l&&y.push(n.SpeechQualityTooLow),y},t.mapErrorToGoogleDocLink=e=>e===n.BackgroundNoise?"https://docs.google.com/document/d/1N1OGF6Uk7axqbYQyMfZHjWQaiaBGYKRIKd2hzXRx7gQ/edit?tab=t.0":e===n.Clipping?"https://docs.google.com/document/d/1rpOdMg_82Cgu5EmOdLklK0AZRobcu4DpgPbaVW5w-As/edit?tab=t.0":e===n.AverageSpeechVolumeTooLow?"https://docs.google.com/document/d/1uZ734Wxn53gfhURRpNiTqyUJ52ITBcQ47KZsSCLvZaE/edit?tab=t.0":e===n.AverageSpeechVolumeTooHigh?"https://docs.google.com/document/d/1UYxcyZ1G_Kt6lqtP7QhmwresJQePu_wXaFZiw6Kc4iY/edit?tab=t.0":void 0},745608:function(e,t,i){"use strict";var __importDefault=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkRobotsIfCrawlingDisallowed=t.getShortedDisallowedPathFromRobots=t.createAxiosInstance=void 0;let n=i(312093),s=__importDefault(i(514206)),l=__importDefault(i(991790)),p=i(667509);t.createAxiosInstance=()=>s.default.create({headers:{"User-Agent":p.SCALE_BOT_USER_AGENT}});let getShortedDisallowedPathFromRobots=async(e,i)=>{var s;let{timeout:u}=null!=i?i:{},{hostname:d,pathname:m}=new URL(e),h=null!==(s=null==i?void 0:i.client)&&void 0!==s?s:(0,t.createAxiosInstance)(),g="http://".concat(d,"/robots.txt"),f=await (async()=>{try{let e=await h.get(g,Object.assign({},u?{timeout:u}:{}));if(e.status>=200&&e.status<300)return(0,l.default)(g,e.data)}catch(e){}return null})();if(null===f)return null;let y=m,b=null;for(;""!==b&&"/"!==b&&p.ALL_AI_USER_AGENT_TOKENS.some(e=>f.isDisallowed("http://".concat(d).concat(y),e));)b=y,y=y.substring(0,(0,n.pipe)(y.lastIndexOf("/"),e=>e<0?0:e));return b};t.getShortedDisallowedPathFromRobots=getShortedDisallowedPathFromRobots;let checkRobotsIfCrawlingDisallowed=async(e,i)=>{var n;let{timeout:s}=null!=i?i:{},{hostname:u,pathname:d}=new URL(e),m=null!==(n=null==i?void 0:i.client)&&void 0!==n?n:(0,t.createAxiosInstance)(),h="http://".concat(u,"/robots.txt"),g="http://".concat(u).concat(d),f=await (async()=>{try{let e=await m.get(h,Object.assign({},s?{timeout:s}:{}));if(e.status>=200&&e.status<300)return(0,l.default)(h,e.data)}catch(e){}return null})();return null!==f&&p.ALL_AI_USER_AGENT_TOKENS.some(e=>f.isDisallowed(g,e))};t.checkRobotsIfCrawlingDisallowed=checkRobotsIfCrawlingDisallowed},645194:function(e,t,i){"use strict";var n=Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]},__exportStar=function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),__exportStar(i(177366),t),__exportStar(i(745608),t)},934210:function(e){function trimLine(e){return e?Array.isArray(e)?e.map(trimLine):String(e).trim():null}function removeComments(e){var t=e.indexOf("#");return t>-1?e.substr(0,t):e}function splitLine(e){var t=String(e).indexOf(":");return!e||t<0?null:[e.slice(0,t),e.slice(t+1)]}function formatUserAgent(e){var t=e.toLowerCase(),i=t.indexOf("/");return i>-1&&(t=t.substr(0,i)),t.trim()}function urlEncodeToUpper(e){return e.replace(/%[0-9a-fA-F]{2}/g,function(e){return e.toUpperCase()})}function parseUrl(e){try{var e=new URL(e,"http://robots-relative.samclarke.com/");return e.port||(e.port="https:"===e.protocol?443:80),e}catch(e){return null}}function Robots(e,t){this._url=parseUrl(e)||{},this._rules=Object.create(null),this._sitemaps=[],this._preferredHost=null,function(e,t){for(var i=e.split(/\r\n|\r|\n/).map(removeComments).map(splitLine).map(trimLine),n=[],s=!0,l=0;l<i.length;l++){var p=i[l];if(p&&p[0]){switch(p[0].toLowerCase()){case"user-agent":s&&(n.length=0),p[1]&&n.push(formatUserAgent(p[1]));break;case"disallow":t.addRule(n,p[1],!1,l+1);break;case"allow":t.addRule(n,p[1],!0,l+1);break;case"crawl-delay":t.setCrawlDelay(n,p[1]);break;case"sitemap":p[1]&&t.addSitemap(p[1]);break;case"host":p[1]&&t.setPreferredHost(p[1].toLowerCase())}s="user-agent"!==p[0].toLowerCase()}}}(t||"",this)}Robots.prototype.addRule=function(e,t,i,n){var s=this._rules;e.forEach(function(e){s[e]=s[e]||[],t&&s[e].push({pattern:function(e){try{return urlEncodeToUpper(encodeURI(e).replace(/%25/g,"%"))}catch(t){return e}}(t),allow:i,lineNumber:n})})},Robots.prototype.setCrawlDelay=function(e,t){var i=this._rules,n=Number(t);e.forEach(function(e){i[e]=i[e]||[],isNaN(n)||(i[e].crawlDelay=n)})},Robots.prototype.addSitemap=function(e){this._sitemaps.push(e)},Robots.prototype.setPreferredHost=function(e){this._preferredHost=e},Robots.prototype._getRule=function(e,t){var i=parseUrl(e)||{},n=formatUserAgent(t||"*");if(i.protocol===this._url.protocol&&i.hostname===this._url.hostname&&i.port===this._url.port){var s=this._rules[n]||this._rules["*"]||[];return function(e,t){for(var i=null,n=0;n<t.length;n++){var s=t[n];(function(e,t){var i=Array(t.length+1),n=1;i[0]=0;for(var s=0;s<e.length;s++){if("$"===e[s]&&s+1===e.length)return i[n-1]===t.length;if("*"==e[s]){n=t.length-i[0]+1;for(var l=1;l<n;l++)i[l]=i[l-1]+1}else{for(var p=0,l=0;l<n;l++)i[l]<t.length&&t[i[l]]===e[s]&&(i[p++]=i[l]+1);if(0==p)return!1;n=p}}return!0})(s.pattern,e)&&(!i||s.pattern.length>i.pattern.length?i=s:s.pattern.length==i.pattern.length&&s.allow&&!i.allow&&(i=s))}return i}(urlEncodeToUpper(i.pathname+i.search),s)}},Robots.prototype.isAllowed=function(e,t){var i=this._getRule(e,t);if(void 0!==i)return!i||i.allow},Robots.prototype.getMatchingLineNumber=function(e,t){var i=this._getRule(e,t);return i?i.lineNumber:-1},Robots.prototype.isDisallowed=function(e,t){return!this.isAllowed(e,t)},Robots.prototype.getCrawlDelay=function(e){var t=formatUserAgent(e||"*");return(this._rules[t]||this._rules["*"]||{}).crawlDelay},Robots.prototype.getPreferredHost=function(){return this._preferredHost},Robots.prototype.getSitemaps=function(){return this._sitemaps.slice(0)},e.exports=Robots},991790:function(e,t,i){var n=i(934210);e.exports=function(e,t){return new n(e,t)}}}]);