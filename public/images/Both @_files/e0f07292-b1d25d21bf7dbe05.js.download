"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29594],{757700:function(t,r,a){a.d(r,{Ak:function(){return n1}});var n=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,wl=(t,r,a)=>r in t?n(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,m=(t,r)=>{for(var a in r||(r={}))d.call(r,a)&&wl(t,a,r[a]);if(c)for(var a of c(r))h.call(r,a)&&wl(t,a,r[a]);return t},g=(t,r)=>s(t,l(r)),Oa=t=>"symbol"==typeof t?t:t+"",Jr=(t,r)=>{var a={};for(var n in t)d.call(t,n)&&0>r.indexOf(n)&&(a[n]=t[n]);if(null!=t&&c)for(var n of c(t))0>r.indexOf(n)&&h.call(t,n)&&(a[n]=t[n]);return a};function Q(t){return Array.isArray(t)}function ue(){return"window"in globalThis&&"document"in globalThis}function Wo(){return"function"==typeof navigator.vibrate}function Vt(){var t,r;if(!ue())return"other";let a=null!=(r=null==(t=navigator.userAgentData)?void 0:t.platform)?r:navigator.platform;return/^mac/i.test(a)?5===navigator.maxTouchPoints?"ios":"macos":/^win/i.test(a)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}var p={strings:{en:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.command":"LaTeX Command Mode","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.alphabetic":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.undo":"Undo","menu.insert matrix":"Insert Matrix","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Delimiters","menu.array.add row above":"Add Row After","menu.array.add row below":"Add Row Before","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","submenu.array.insert separator":"Insert Separator","menu.insert table":"Insert Table","submenu.table style":"Table Style"},ar:{"keyboard.tooltip.functions":"مهام","keyboard.tooltip.symbols":"حرف او رمز","keyboard.tooltip.greek":"حروف يونانية","keyboard.tooltip.command":"حالة تلقي الأوامر اللاتك","keyboard.tooltip.numeric":"الرقمية","keyboard.tooltip.alphabetic":"رموز الاحرف الرومانية","tooltip.copy to clipboard":"نسخ إلى الحافظة","tooltip.cut to clipboard":"قص إلى الحافظة","tooltip.paste from clipboard":"لصق من الحافظة","tooltip.redo":"الإعادة","tooltip.toggle virtual keyboard":"تبديل لوحة المفاتيح الإفتراضية","tooltip.undo":"إلغاء","menu.insert matrix":"أدخل المصفوفة","menu.insert vector":"أدخل متجه","submenu.array.matrix delimiters":"محددات المصفوفة","menu.array.add row above":"أضف صفًا بعد ذلك","menu.array.add row below":"أضف الصف قبل","menu.array.add column after":"أضف العمود بعد ذلك","menu.array.add column before":"أضف العمود قبل","menu.array.delete row":"احذف صف","menu.array.delete rows":"حذف الصفوف المحددة","menu.array.delete column":"حذف العمود","menu.array.delete columns":"حذف الأعمدة المحددة","submenu.array.insert separator":"أدخل فاصل","menu.insert table":"إدراج جدول","submenu.table style":"نمط الجدول"},bg:{"keyboard.tooltip.functions":"Функции","keyboard.tooltip.symbols":"Символи","keyboard.tooltip.greek":"Гръцки букви","keyboard.tooltip.command":"Команден режим на латекс","keyboard.tooltip.numeric":"Числови","keyboard.tooltip.alphabetic":"Римски букви","tooltip.copy to clipboard":"Копиране в клипборда","tooltip.redo":"Повторно","tooltip.toggle virtual keyboard":"Превключване на виртуална клавиатура","tooltip.undo":"Отмяна","menu.insert matrix":"Вмъкване на матрица","menu.insert vector":"Вмъкване на вектор","submenu.array.matrix delimiters":"Матрични разделители","menu.array.add row above":"Добавяне на ред след","menu.array.add row below":"Добавяне на ред преди","menu.array.add column after":"Добавяне на колона след","menu.array.add column before":"Добавяне на колона преди","menu.array.delete row":"Изтриване на реда","menu.array.delete rows":"Изтриване на избраните редове","menu.array.delete column":"Изтриване на колона","menu.array.delete columns":"Изтриване на избраните колони","submenu.array.insert separator":"Поставете разделител","menu.insert table":"Вмъкване на таблица","submenu.table style":"Табличен стил"},bs:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grčka slova","keyboard.tooltip.command":"LaTeX naredbeni način","keyboard.tooltip.numeric":"Numerički","keyboard.tooltip.alphabetic":"Rimska slova","tooltip.copy to clipboard":"Kopirati u clipboard","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uključi / isključi virtualnu tipkovnicu","tooltip.undo":"Poništi","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matrični razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj red prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbriši red","menu.array.delete rows":"Izbriši odabrane redove","menu.array.delete column":"Izbriši stupac","menu.array.delete columns":"Izbriši odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Ubaci tabelu","submenu.table style":"Stil tabele"},cs:{"keyboard.tooltip.functions":"Funkce","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"Řeck\xe9 dopisy","keyboard.tooltip.command":"Př\xedkazov\xfd režim LaTeX","keyboard.tooltip.numeric":"Č\xedseln\xe9","keyboard.tooltip.alphabetic":"Ř\xedmsk\xe9 dopisy","tooltip.copy to clipboard":"Zkop\xedrovat do schr\xe1nky","tooltip.redo":"Předělat","tooltip.toggle virtual keyboard":"Přepnout virtu\xe1ln\xed kl\xe1vesnici","tooltip.undo":"Vr\xe1tit","menu.insert matrix":"Vložte matici","menu.insert vector":"Vložit vektor","submenu.array.matrix delimiters":"Oddělovače matic","menu.array.add row above":"Přidat ř\xe1dek za","menu.array.add row below":"Přidat ř\xe1dek před","menu.array.add column after":"Přidat sloupec za","menu.array.add column before":"Přidat sloupec dř\xedve","menu.array.delete row":"Odstranit ř\xe1dek","menu.array.delete rows":"Odstranit vybran\xe9 ř\xe1dky","menu.array.delete column":"Odstranit sloupec","menu.array.delete columns":"Odstranit vybran\xe9 sloupce","submenu.array.insert separator":"Vložte oddělovač","menu.insert table":"Vložit tabulku","submenu.table style":"Styl tabulky"},da:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Gr\xe6ske bogstaver","keyboard.tooltip.command":"LaTeX kommandotilstand","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.alphabetic":"Romerske breve","tooltip.copy to clipboard":"Kopier til udklipsholder","tooltip.redo":"Gentag igen","tooltip.toggle virtual keyboard":"Skift virtuelt tastatur","tooltip.undo":"Fortryd","menu.insert matrix":"Inds\xe6t matrix","menu.insert vector":"Inds\xe6t vektor","submenu.array.matrix delimiters":"Matrixafgr\xe6nsere","menu.array.add row above":"Tilf\xf8j r\xe6kke efter","menu.array.add row below":"Tilf\xf8j r\xe6kke f\xf8r","menu.array.add column after":"Tilf\xf8j kolonne efter","menu.array.add column before":"Tilf\xf8j kolonne f\xf8r","menu.array.delete row":"Slet r\xe6kke","menu.array.delete rows":"Slet valgte r\xe6kker","menu.array.delete column":"Slet kolonne","menu.array.delete columns":"Slet valgte kolonner","submenu.array.insert separator":"Inds\xe6t separator","menu.insert table":"Inds\xe6t tabel","submenu.table style":"Tabelstil"},de:{"keyboard.tooltip.functions":"Funktionen","keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.command":"LaTeX-Befehlsmodus","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.alphabetic":"R\xf6mische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einf\xfcgen","menu.insert vector":"Vektor einf\xfcgen","submenu.array.matrix delimiters":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzuf\xfcgen nach","menu.array.add row below":"Zeile hinzuf\xfcgen vor","menu.array.add column after":"Spalte hinzuf\xfcgen nach","menu.array.add column before":"Spalte hinzuf\xfcgen vor","menu.array.delete row":"Zeile l\xf6schen","menu.array.delete rows":"Ausgew\xe4hlte Zeilen l\xf6schen","menu.array.delete column":"Spalte l\xf6schen","menu.array.delete columns":"Ausgew\xe4hlte Spalten l\xf6schen","submenu.array.insert separator":"Trennzeichen einf\xfcgen","menu.insert table":"Tabelle einf\xfcgen","submenu.table style":"Tabellenstil"},el:{"keyboard.tooltip.functions":"συναρτήσεις","keyboard.tooltip.symbols":"σύμβολα","keyboard.tooltip.greek":"ελληνικά γράμματα","keyboard.tooltip.command":"Λειτουργία εντολών LaTeX","keyboard.tooltip.numeric":"Αριθμητικός","keyboard.tooltip.alphabetic":"Ρωμαϊκά γράμματα","tooltip.copy to clipboard":"Αντιγραφή στο πρόχειρο","tooltip.redo":"Ξανακάνω","tooltip.toggle virtual keyboard":"Εναλλαγή εικονικού πληκτρολογίου","tooltip.undo":"Ξεκάνω","menu.insert matrix":"Εισαγωγή Matrix","menu.insert vector":"Εισαγωγή διανύσματος","submenu.array.matrix delimiters":"Οριοθέτες Matrix","menu.array.add row above":"Προσθήκη σειράς μετά","menu.array.add row below":"Προσθήκη σειράς πριν","menu.array.add column after":"Προσθήκη στήλης μετά","menu.array.add column before":"Προσθήκη στήλης πριν","menu.array.delete row":"Διαγραφή σειράς","menu.array.delete rows":"Διαγραφή επιλεγμένων σειρών","menu.array.delete column":"Διαγραφή στήλης","menu.array.delete columns":"Διαγραφή επιλεγμένων στηλών","submenu.array.insert separator":"Εισαγωγή διαχωριστικού","menu.insert table":"Εισαγωγή πίνακα","submenu.table style":"Στυλ πίνακα"},es:{"keyboard.tooltip.functions":"Funciones","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.command":"Modo Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"A\xf1adir Matriz","menu.insert vector":"A\xf1adir vector","submenu.array.matrix delimiters":"Delimitadores de Matriz","menu.array.add row above":"A\xf1adir L\xednea Antes","menu.array.add row below":"A\xf1adir L\xednea Despues","menu.array.add column after":"A\xf1adir Columna Despues","menu.array.add column before":"A\xf1adir Columna Antes","menu.array.delete row":"Borrar L\xednea","menu.array.delete rows":"Borrar L\xedneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","submenu.array.insert separator":"Insertar un Separador","menu.insert table":"Insertar Tabla","submenu.table style":"Estilo de Tabla"},et:{"keyboard.tooltip.functions":"Funktsioonid","keyboard.tooltip.symbols":"S\xfcmbolid","keyboard.tooltip.greek":"Kreeka kirjad","keyboard.tooltip.command":"LaTeXi k\xe4surežiim","keyboard.tooltip.numeric":"Numbriline","keyboard.tooltip.alphabetic":"Rooma kirjad","tooltip.copy to clipboard":"Kopeerida l\xf5ikelauale","tooltip.redo":"Tee uuesti","tooltip.toggle virtual keyboard":"L\xfclitage sisse virtuaalne klaviatuur","tooltip.undo":"V\xf5ta tagasi","menu.insert matrix":"Sisesta maatriks","menu.insert vector":"Sisesta vektor","submenu.array.matrix delimiters":"Maatriksi eraldajad","menu.array.add row above":"Lisa rida p\xe4rast","menu.array.add row below":"Lisa rida enne","menu.array.add column after":"Lisa veerg p\xe4rast","menu.array.add column before":"Lisa veerg enne","menu.array.delete row":"Kustuta rida","menu.array.delete rows":"Kustuta valitud read","menu.array.delete column":"Kustuta veerg","menu.array.delete columns":"Kustuta valitud veerud","submenu.array.insert separator":"Sisestage eraldaja","menu.insert table":"Sisesta tabeli","submenu.table style":"Tabeli stiilis"},fa:{"keyboard.tooltip.functions":"توابع","keyboard.tooltip.symbols":"نمادها","keyboard.tooltip.greek":"حروف یونانی","keyboard.tooltip.command":"حالت دستور لاتک","keyboard.tooltip.numeric":"عددی","keyboard.tooltip.alphabetic":"حروف رومی","tooltip.copy to clipboard":"کپی به کلیپبورد","tooltip.redo":"بازگشت به بعد","tooltip.toggle virtual keyboard":"نمایش/نهفتن کیبورد مجازی","tooltip.undo":"بازگشت به قبل","menu.insert matrix":"ماتریس را وارد کنید","menu.insert vector":"درج بردار","submenu.array.matrix delimiters":"مرزهای ماتریس","menu.array.add row above":"بعد از آن ردیف اضافه کنید","menu.array.add row below":"ردیف را قبل اضافه کنید","menu.array.add column after":"اضافه کردن ستون بعد","menu.array.add column before":"ستون قبل را اضافه کنید","menu.array.delete row":"ردیف را حذف کنید","menu.array.delete rows":"ردیف های انتخاب شده را حذف کنید","menu.array.delete column":"حذف ستون","menu.array.delete columns":"ستون های انتخاب شده را حذف کنید","submenu.array.insert separator":"درج جدا کننده","menu.insert table":"قرار دادن جدول","submenu.table style":"سبک میز"},fi:{"keyboard.tooltip.functions":"Toiminnot","keyboard.tooltip.symbols":"Symbolit","keyboard.tooltip.greek":"Kreikkalaiset kirjeet","keyboard.tooltip.command":"LaTeX-komentotila","keyboard.tooltip.numeric":"Numeerinen","keyboard.tooltip.alphabetic":"Roomalaiset kirjeet","tooltip.copy to clipboard":"Kopioi leikep\xf6yd\xe4lle","tooltip.redo":"Tee uudelleen","tooltip.toggle virtual keyboard":"Vaihda virtuaalin\xe4pp\xe4imist\xf6","tooltip.undo":"Kumoa","menu.insert matrix":"Lis\xe4\xe4 matriisi","menu.insert vector":"Lis\xe4\xe4 vektori","submenu.array.matrix delimiters":"Matriisin erottimet","menu.array.add row above":"Lis\xe4\xe4 rivi j\xe4lkeen","menu.array.add row below":"Lis\xe4\xe4 rivi ennen","menu.array.add column after":"Lis\xe4\xe4 sarake j\xe4lkeen","menu.array.add column before":"Lis\xe4\xe4 sarake ennen","menu.array.delete row":"Poista rivi","menu.array.delete rows":"Poista valitut rivit","menu.array.delete column":"Poista sarake","menu.array.delete columns":"Poista valitut sarakkeet","submenu.array.insert separator":"Aseta erotin","menu.insert table":"Lis\xe4\xe4 taulukko","submenu.table style":"Taulukon tyyli"},fr:{"keyboard.tooltip.functions":"Fonctions","keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.command":"Mode de commandes LaTeX","keyboard.tooltip.numeric":"Num\xe9rique","keyboard.tooltip.alphabetic":"Lettres romaines","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"R\xe9tablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Ins\xe9rer une Matrice","menu.insert vector":"Ins\xe9rer un Vecteur","submenu.array.matrix delimiters":"D\xe9limiteurs de la Matrice","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Apr\xe8s","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Apr\xe8s","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes S\xe9lection\xe9es","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes S\xe9lection\xe9es","submenu.array.insert separator":"Ins\xe9rer un S\xe9parateur","menu.insert table":"Ins\xe9rer une Table","submenu.table style":"Style de la  Table"},ga:{"keyboard.tooltip.functions":"Feidhmeanna","keyboard.tooltip.symbols":"Siombail\xed","keyboard.tooltip.greek":"Litreacha na Gr\xe9ige","keyboard.tooltip.command":"M\xf3d Ord\xfa LaTeX","keyboard.tooltip.numeric":"Uimhri\xfail","keyboard.tooltip.alphabetic":"Litreacha R\xf3mh\xe1nacha","tooltip.copy to clipboard":"C\xf3ipe\xe1il chuig an Ghearrthaisce","tooltip.redo":"Athdh\xe9an","tooltip.toggle virtual keyboard":"M\xe9archl\xe1ir F\xedor\xfail a Fh\xe1il","tooltip.undo":"Cealaigh","menu.insert matrix":"Cuir isteach Maitr\xeds","menu.insert vector":"Cuir isteach Veicteoir","submenu.array.matrix delimiters":"Delimiters Maitr\xeds","menu.array.add row above":"Cuir Rae Tar \xe9is","menu.array.add row below":"Cuir Rae Roimh","menu.array.add column after":"Cuir Col\xfan Tar \xe9is","menu.array.add column before":"Cuir Col\xfan Roimh","menu.array.delete row":"Scrios Rae","menu.array.delete rows":"Scrios Sraitheanna Roghnaithe","menu.array.delete column":"Scrios Col\xfan","menu.array.delete columns":"Scrios Col\xfain Roghnaithe","submenu.array.insert separator":"Cuir Deighilteoir isteach","menu.insert table":"Ions\xe1igh T\xe1bla","submenu.table style":"St\xedl T\xe1bla"},he:{"keyboard.tooltip.functions":"פונקציות","keyboard.tooltip.symbols":"סמלים","keyboard.tooltip.greek":"אותיות יווניות","keyboard.tooltip.command":"מצב פקודה לטקס","keyboard.tooltip.numeric":"מספרי","keyboard.tooltip.alphabetic":"מכתבים רומיים","tooltip.copy to clipboard":"העתק ללוח","tooltip.redo":"לַעֲשׂוֹת שׁוּב","tooltip.toggle virtual keyboard":"החלף את המקלדת הווירטואלית","tooltip.undo":"לבטל","menu.insert matrix":"הכנס מטריקס","menu.insert vector":"הכנס וקטור","submenu.array.matrix delimiters":"מפרידי מטריקס","menu.array.add row above":"הוסף שורה אחרי","menu.array.add row below":"הוסף שורה לפני","menu.array.add column after":"הוסף עמודה אחרי","menu.array.add column before":"הוסף עמודה לפני","menu.array.delete row":"מחק שורה","menu.array.delete rows":"מחק שורות שנבחרו","menu.array.delete column":"מחק עמודה","menu.array.delete columns":"מחק עמודות שנבחרו","submenu.array.insert separator":"הכנס מפריד","menu.insert table":"הכנס טבלה","submenu.table style":"טבלה סִגְנוֹן"},hr:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grčka slova","keyboard.tooltip.command":"LaTeX naredbeni način","keyboard.tooltip.numeric":"Numerički","keyboard.tooltip.alphabetic":"Rimska slova","tooltip.copy to clipboard":"Kopirati u međuspremnik","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uključi / isključi virtualnu tipkovnicu","tooltip.undo":"Poništi","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matrični razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj redak prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbriši redak","menu.array.delete rows":"Izbriši odabrane retke","menu.array.delete column":"Izbriši stupac","menu.array.delete columns":"Izbriši odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Umetni tablicu","submenu.table style":"Stil tabele"},id:{"keyboard.tooltip.functions":"Fungsi","keyboard.tooltip.symbols":"Simbol","keyboard.tooltip.greek":"Huruf Yunani","keyboard.tooltip.command":"Mode Perintah LaTeX","keyboard.tooltip.numeric":"Numerik","keyboard.tooltip.alphabetic":"Surat Romawi","tooltip.copy to clipboard":"Menyalin ke clipboard","tooltip.redo":"Mengulangi","tooltip.toggle virtual keyboard":"Alihkan Keyboard Virtual","tooltip.undo":"Membuka","menu.insert matrix":"Sisipkan Matriks","menu.insert vector":"Sisipkan Vektor","submenu.array.matrix delimiters":"Pembatas Matriks","menu.array.add row above":"Tambahkan Baris Setelah","menu.array.add row below":"Tambahkan Baris Sebelumnya","menu.array.add column after":"Tambahkan Kolom Setelah","menu.array.add column before":"Tambahkan Kolom Sebelumnya","menu.array.delete row":"Hapus Baris","menu.array.delete rows":"Hapus Baris yang Dipilih","menu.array.delete column":"Hapus Kolom","menu.array.delete columns":"Hapus Kolom yang Dipilih","submenu.array.insert separator":"Sisipkan Pemisah","menu.insert table":"Sisipkan Tabel","submenu.table style":"Gaya Tabel"},hi:{"keyboard.tooltip.functions":"कार्यों","keyboard.tooltip.symbols":"प्रतीक","keyboard.tooltip.greek":"ग्रीक अक्षर","keyboard.tooltip.command":"लाटेक्स कमांड मोड","keyboard.tooltip.numeric":"संख्यात्मक","keyboard.tooltip.alphabetic":"रोमन पत्र","tooltip.copy to clipboard":"क्लिपबोर्ड पर कॉपी करें","tooltip.redo":"फिर से करें","tooltip.toggle virtual keyboard":"वर्चुअल कीबोर्ड टॉगल करें","tooltip.undo":"पूर्ववत","menu.insert matrix":"मैट्रिक्स डालें","menu.insert vector":"वेक्टर डालें","submenu.array.matrix delimiters":"मैट्रिक्स सीमांकक","menu.array.add row above":"बाद में पंक्ति जोड़ें","menu.array.add row below":"पहले पंक्ति जोड़ें","menu.array.add column after":"बाद में कॉलम जोड़ें","menu.array.add column before":"पहले कॉलम जोड़ें","menu.array.delete row":"पंक्ति को हटाएं","menu.array.delete rows":"चयनित पंक्तियों को हटाएं","menu.array.delete column":"कॉलम हटाएं","menu.array.delete columns":"चयनित कॉलम हटाएं","submenu.array.insert separator":"विभाजक डालें","menu.insert table":"टेबल इंसर्ट करें","submenu.table style":"टेबल स्टाइल"},hu:{"keyboard.tooltip.functions":"Funkci\xf3k","keyboard.tooltip.symbols":"Szimb\xf3lumok","keyboard.tooltip.greek":"G\xf6r\xf6g levelek","keyboard.tooltip.command":"LaTeX Parancs m\xf3d","keyboard.tooltip.numeric":"Numerikus","keyboard.tooltip.alphabetic":"R\xf3mai levelek","tooltip.copy to clipboard":"M\xe1solja a v\xe1g\xf3lapra","tooltip.redo":"\xdajra","tooltip.toggle virtual keyboard":"V\xe1lt\xe1s a virtu\xe1lis billentyűzetre","tooltip.undo":"Visszavon\xe1s","menu.insert matrix":"Helyezze be a M\xe1trixot","menu.insert vector":"Vektor besz\xfar\xe1sa","submenu.array.matrix delimiters":"M\xe1trixhat\xe1rol\xf3k","menu.array.add row above":"Sor hozz\xe1ad\xe1sa ut\xe1n","menu.array.add row below":"Add Add Sor előtt","menu.array.add column after":"Oszlop hozz\xe1ad\xe1sa ut\xe1n","menu.array.add column before":"Add oszlop előtt","menu.array.delete row":"Sor t\xf6rl\xe9se","menu.array.delete rows":"Kijel\xf6lt sorok t\xf6rl\xe9se","menu.array.delete column":"Oszlop t\xf6rl\xe9se","menu.array.delete columns":"A kijel\xf6lt oszlopok t\xf6rl\xe9se","submenu.array.insert separator":"Helyezze be az elv\xe1laszt\xf3t","menu.insert table":"Helyezze be a t\xe1bl\xe1zatot","submenu.table style":"T\xe1bl\xe1zatos st\xedlus"},it:{"keyboard.tooltip.functions":"Funzioni","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.command":"Modalit\xe0 di comando LaTeX","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.alphabetic":"Lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare","menu.insert matrix":"Inserisci una Matrice","menu.insert vector":"Inserisci Vettore","submenu.array.matrix delimiters":"Delimitatori di Matrice","menu.array.add row above":"Aggiungi una Riga Prima","menu.array.add row below":"Aggiungi una Riga Dopo","menu.array.add column before":"Aggiungi una Colonna Prima","menu.array.add column after":"Aggiungi una Colonna Dopo","menu.array.delete row":"Rimuovi una Riga","menu.array.delete rows":"Rimuovi le Righe Selezionate","menu.array.delete column":"Rimuovi una Colonna","menu.array.delete columns":"Rimuovi le Colonne Selezionate","submenu.array.insert separator":"Inserisci un Separatore","menu.insert table":"Inserisci Tabella","submenu.table style":"Stile tabella"},is:{"keyboard.tooltip.functions":"A\xf0ger\xf0ir","keyboard.tooltip.symbols":"T\xe1kn","keyboard.tooltip.greek":"Gr\xedsk br\xe9f","keyboard.tooltip.command":"LaTeX stj\xf3rnunarstilling","keyboard.tooltip.numeric":"T\xf6lulegt","keyboard.tooltip.alphabetic":"R\xf3mversk br\xe9f","tooltip.copy to clipboard":"Afrita\xf0u \xe1 klemmuspjald","tooltip.redo":"Endurtaka","tooltip.toggle virtual keyboard":"Skiptu um s\xfdndarlyklabor\xf0","tooltip.undo":"Afturkalla","menu.insert matrix":"Settu fylki inn","menu.insert vector":"Settu inn Vector","submenu.array.matrix delimiters":"Matrix afm\xf6rkun","menu.array.add row above":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1 eftir","menu.array.add row below":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1\xf0ur","menu.array.add column after":"B\xe6ta vi\xf0 d\xe1lki \xe1 eftir","menu.array.add column before":"B\xe6ta vi\xf0 d\xe1lki \xe1\xf0ur","menu.array.delete row":"Ey\xf0a r\xf6\xf0","menu.array.delete rows":"Ey\xf0a v\xf6ldum l\xednum","menu.array.delete column":"Ey\xf0a d\xe1lki","menu.array.delete columns":"Ey\xf0a v\xf6ldum d\xe1lkum","submenu.array.insert separator":"Settu skiljuna \xed","menu.insert table":"Settu inn t\xf6flu","submenu.table style":"T\xf6flu st\xedl"},ja:{"keyboard.tooltip.functions":"関数","keyboard.tooltip.symbols":"シンボル","keyboard.tooltip.greek":"ギリシャ文字","keyboard.tooltip.command":"ラテックスコマンドモード","keyboard.tooltip.numeric":"数値","keyboard.tooltip.alphabetic":"ローマ字","tooltip.copy to clipboard":"クリップボードにコピー","tooltip.redo":"やり直し","tooltip.toggle virtual keyboard":"仮想キーボードの切り替え","tooltip.undo":"元に戻す","menu.insert matrix":"マトリックスを挿入","menu.insert vector":"ベクトルを挿入","submenu.array.matrix delimiters":"行列区切り文字","menu.array.add row above":"後に行を追加","menu.array.add row below":"前に行を追加","menu.array.add column after":"後に列を追加","menu.array.add column before":"前に列を追加","menu.array.delete row":"行を削除","menu.array.delete rows":"選択した行を削除する","menu.array.delete column":"列を削除","menu.array.delete columns":"選択した列を削除する","submenu.array.insert separator":"セパレーターを挿入","menu.insert table":"テーブルを挿入","submenu.table style":"テーブルスタイル"},ko:{"keyboard.tooltip.functions":"기능","keyboard.tooltip.symbols":"기호","keyboard.tooltip.greek":"그리스 문자","keyboard.tooltip.command":"유액 명령 모드","keyboard.tooltip.numeric":"숫자","keyboard.tooltip.alphabetic":"로마 문자","tooltip.copy to clipboard":"클립 보드에 복사","tooltip.redo":"다시 하다","tooltip.toggle virtual keyboard":"가상 키보드 전환","tooltip.undo":"실행 취소","menu.insert matrix":"매트릭스 삽입","menu.insert vector":"벡터 삽입","submenu.array.matrix delimiters":"행렬 구분 기호","menu.array.add row above":"뒤에 행 추가","menu.array.add row below":"앞에 행 추가","menu.array.add column after":"뒤에 열 추가","menu.array.add column before":"앞에 열 추가","menu.array.delete row":"행 삭제","menu.array.delete rows":"선택한 행 삭제","menu.array.delete column":"열 삭제","menu.array.delete columns":"선택한 열 삭제","submenu.array.insert separator":"구분자 삽입","menu.insert table":"표 삽입","submenu.table style":"테이블 스타일"},lv:{"keyboard.tooltip.functions":"Funkcijas","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grieķu burti","keyboard.tooltip.command":"LaTeX komandu režīms","keyboard.tooltip.numeric":"Ciparu skaitlis","keyboard.tooltip.alphabetic":"Romiešu vēstules","tooltip.copy to clipboard":"Kopēt starpliktuvē","tooltip.redo":"Pārtaisīt","tooltip.toggle virtual keyboard":"Pārslēgt virtuālo tastatūru","tooltip.undo":"Atsaukt","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobežotāji","menu.array.add row above":"Pievienot rindu pēc","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu pēc","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dzēst rindu","menu.array.delete rows":"Dzēst atlasītās rindas","menu.array.delete column":"Dzēst kolonnu","menu.array.delete columns":"Dzēst atlasītās kolonnas","submenu.array.insert separator":"Ievietojiet atdalītāju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Galda stils"},lt:{"keyboard.tooltip.functions":"Funkcijos","keyboard.tooltip.symbols":"Simboliai","keyboard.tooltip.greek":"Graikiškos raidės","keyboard.tooltip.command":"LaTeX komandų režimas","keyboard.tooltip.numeric":"Skaitmeninis","keyboard.tooltip.alphabetic":"Romos laiškai","tooltip.copy to clipboard":"Nukopijuoti į iškarpinę","tooltip.redo":"Perdaryti","tooltip.toggle virtual keyboard":"Perjungti virtualiąją klaviatūrą","tooltip.undo":"Atšaukti","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobežotāji","menu.array.add row above":"Pievienot rindu pēc","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu pēc","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dzēst rindu","menu.array.delete rows":"Dzēst atlasītās rindas","menu.array.delete column":"Dzēst kolonnu","menu.array.delete columns":"Dzēst atlasītās kolonnas","submenu.array.insert separator":"Ievietojiet atdalītāju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Tabulas stili"},lu:{"keyboard.tooltip.functions":"Funktiounen","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Griichesch Br\xe9iwer","keyboard.tooltip.command":"LaTeX Kommando Modus","keyboard.tooltip.numeric":"Numeresch","keyboard.tooltip.alphabetic":"R\xe9imesch Br\xe9iwer","tooltip.copy to clipboard":"Kop\xe9iert op Clipboard","tooltip.redo":"Nees nei maachen","tooltip.toggle virtual keyboard":"Wiesselt Virtuell Tastatur","tooltip.undo":"Undoen","menu.insert matrix":"Matrix asetzen","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Ofgrenzer","menu.array.add row above":"Dob\xe4izemaachen Rei No","menu.array.add row below":"F\xfc\xfcgt Rei vir","menu.array.add column after":"Dob\xe4izemaachen Kolonn No","menu.array.add column before":"Kolonn derb\xe4i Virun","menu.array.delete row":"Rad l\xe4schen","menu.array.delete rows":"L\xe4scht Ausgewielte Reien","menu.array.delete column":"L\xe4scht Kolonn","menu.array.delete columns":"L\xe4scht Ausgewielte Kolonnen","submenu.array.insert separator":"Insert Separator","menu.insert table":"D\xebsch anzeginn","submenu.table style":"D\xebsch Style"},nl:{"keyboard.tooltip.functions":"Functies","keyboard.tooltip.symbols":"Symbolen","keyboard.tooltip.greek":"Griekse letters","keyboard.tooltip.command":"LaTeX commando mode","keyboard.tooltip.numeric":"Numeriek","keyboard.tooltip.alphabetic":"Romeinse letters","tooltip.copy to clipboard":"Kopi\xebren naar klembord","tooltip.redo":"Opnieuw","tooltip.toggle virtual keyboard":"Schakel naar virtueel toetsenbord","tooltip.undo":"Ongedaan maken","menu.insert matrix":"Matrix invoegen","menu.insert vector":"Vector invoegen","submenu.array.matrix delimiters":"Matrixscheidingstekens","menu.array.add row above":"Rij toevoegen na","menu.array.add row below":"Rij toevoegen eerder","menu.array.add column after":"Kolom toevoegen na","menu.array.add column before":"Kolom toevoegen voor","menu.array.delete row":"Verwijder rij","menu.array.delete rows":"Geselecteerde rijen verwijderen","menu.array.delete column":"Kolom verwijderen","menu.array.delete columns":"Geselecteerde kolommen verwijderen","submenu.array.insert separator":"Scheidingsteken invoegen","menu.insert table":"Tabel invoegen","submenu.table style":"Tabelstijl"},no:{"keyboard.tooltip.functions":"Funksjoner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Greske bokstaver","keyboard.tooltip.command":"LaTeX kommandomodus","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.alphabetic":"Romerske bokstaver","tooltip.copy to clipboard":"Kopiere til utklippstavle","tooltip.redo":"Gj\xf8re om","tooltip.toggle virtual keyboard":"Bytt virtuelt tastatur","tooltip.undo":"Angre","menu.insert matrix":"Sett inn matrise","menu.insert vector":"Sett inn vektor","submenu.array.matrix delimiters":"Matrix avgrensere","menu.array.add row above":"Legg til rad etter","menu.array.add row below":"Legg til rad f\xf8r","menu.array.add column after":"Legg til kolonne etter","menu.array.add column before":"Legg til kolonne f\xf8r","menu.array.delete row":"Slett rad","menu.array.delete rows":"Slett valgte rader","menu.array.delete column":"Slett kolonne","menu.array.delete columns":"Slett valgte kolonner","submenu.array.insert separator":"Sett inn skilletegn","menu.insert table":"Sett inn tabell","submenu.table style":"Tabellstil"},mk:{"keyboard.tooltip.functions":"Функции","keyboard.tooltip.symbols":"Симболи","keyboard.tooltip.greek":"Грчки букви","keyboard.tooltip.command":"Режим на команда во латекс","keyboard.tooltip.numeric":"Нумерички","keyboard.tooltip.alphabetic":"Римски писма","tooltip.copy to clipboard":"Копирајте во клипборд","tooltip.redo":"Повторно","tooltip.toggle virtual keyboard":"Вклучете ја виртуелната тастатура","tooltip.undo":"Врати","menu.insert matrix":"Вметнете матрица","menu.insert vector":"Вметни вектор","submenu.array.matrix delimiters":"Разграничувачи на матрица","menu.array.add row above":"Додадете ред после","menu.array.add row below":"Додади ред пред тоа","menu.array.add column after":"Додадете колона после","menu.array.add column before":"Додадете колона пред тоа","menu.array.delete row":"Избриши го редот","menu.array.delete rows":"Избришете ги избраните редови","menu.array.delete column":"Избриши ја колоната","menu.array.delete columns":"Избриши ја колоната","submenu.array.insert separator":"Вметнете сепаратор","menu.insert table":"Вметни табела","submenu.table style":"Табела стил"},pl:{"keyboard.tooltip.functions":"Funkcje","keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.command":"Tryb poleceń LaTeX","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.alphabetic":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywr\xf3ć","tooltip.toggle virtual keyboard":"Przełącz wirtualną klawiaturę","tooltip.undo":"Cofnij","menu.insert matrix":"Wstaw macierz","menu.insert vector":"Wstaw wektor","submenu.array.matrix delimiters":"Ograniczniki macierzy","menu.array.add row above":"Dodaj wiersz po","menu.array.add row below":"Dodaj wiersz przed","menu.array.add column after":"Dodaj kolumnę po","menu.array.add column before":"Dodaj kolumnę przed","menu.array.delete row":"Usuń wiersz","menu.array.delete rows":"Usuń wybrane wiersze","menu.array.delete column":"Usuń kolumnę","menu.array.delete columns":"Usuń wybrane kolumny","submenu.array.insert separator":"Wstaw separator","menu.insert table":"Wypełnij tabelę","submenu.table style":"Styl tabelę"},pt:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.command":"Modo de Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar para \xe1rea de transfer\xeancia","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.insert vector":"Inserir vetor","submenu.array.matrix delimiters":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","submenu.array.insert separator":"Inserir Separador","menu.insert table":"Insira a tabela","submenu.table style":"Estilo tabela"},ro:{"keyboard.tooltip.functions":"Funcții","keyboard.tooltip.symbols":"Simboluri","keyboard.tooltip.greek":"Scrisori grecești","keyboard.tooltip.command":"Modul de comandă latex","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.alphabetic":"Scrisori romane","tooltip.copy to clipboard":"Copiați \xeen clipboard","tooltip.redo":"A reface","tooltip.toggle virtual keyboard":"Comutați tastatura virtuală","tooltip.undo":"Anula","menu.insert matrix":"Introduceți Matrix","menu.insert vector":"Inserați Vector","submenu.array.matrix delimiters":"Delimitatori de matrice","menu.array.add row above":"Adăugați r\xe2ndul după","menu.array.add row below":"Adăugați r\xe2ndul \xeenainte","menu.array.add column after":"Adăugați o coloană după","menu.array.add column before":"Adăugați o coloană \xeenainte","menu.array.delete row":"Ștergeți r\xe2ndul","menu.array.delete rows":"Ștergeți r\xe2ndurile selectate","menu.array.delete column":"Ștergeți coloana","menu.array.delete columns":"Ștergeți coloanele selectate","submenu.array.insert separator":"Introduceți separatorul","menu.insert table":"Introduceți tabelul","submenu.table style":"Table style"},ru:{"keyboard.tooltip.functions":"Функции","keyboard.tooltip.symbols":"Символы","keyboard.tooltip.greek":"Греческие буквы","keyboard.tooltip.command":"Режим командной строки Латекс","keyboard.tooltip.numeric":"числовой","keyboard.tooltip.alphabetic":"Латинские буквы","tooltip.copy to clipboard":"Скопировать в буфер обмена","tooltip.redo":"переделывать","tooltip.toggle virtual keyboard":"Переключить виртуальную клавиатуру","tooltip.undo":"расстегивать","menu.insert matrix":"Вставить матрицу","menu.insert vector":"Вставить вектор","submenu.array.matrix delimiters":"Матричные разделители","menu.array.add row above":"Добавить строку после","menu.array.add row below":"Добавить строку перед","menu.array.add column after":"Добавить столбец после","menu.array.add column before":"Добавить столбец перед","menu.array.delete row":"Удалить строку","menu.array.delete rows":"Удалить выбранные строки","menu.array.delete column":"Удалить столбец","menu.array.delete columns":"Удалить выбранные столбцы","submenu.array.insert separator":"Вставить разделитель","menu.insert table":"Вставить таблицу","submenu.table style":"Табличный стиль"},sk:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"Gr\xe9cke listy","keyboard.tooltip.command":"Pr\xedkazov\xfd režim LaTeX","keyboard.tooltip.numeric":"Numerick\xe9","keyboard.tooltip.alphabetic":"R\xedmske listy","tooltip.copy to clipboard":"Skop\xedrovať do schr\xe1nky","tooltip.redo":"Znova","tooltip.toggle virtual keyboard":"Prepn\xfať virtu\xe1lnu kl\xe1vesnicu","tooltip.undo":"Vr\xe1tenie sp\xe4ť","menu.insert matrix":"Vložte maticu","menu.insert vector":"Vložte vektor","submenu.array.matrix delimiters":"Oddeľovače mat\xedc","menu.array.add row above":"Pridajte riadok za","menu.array.add row below":"Pridajte riadok pred","menu.array.add column after":"Pridať stĺpec za","menu.array.add column before":"Pridajte stĺpec predt\xfdm","menu.array.delete row":"Odstr\xe1niť riadok","menu.array.delete rows":"Odstr\xe1niť vybrat\xe9 riadky","menu.array.delete column":"Odstr\xe1niť stĺpec","menu.array.delete columns":"Odstr\xe1niť vybrat\xe9 stĺpce","submenu.array.insert separator":"Vložte oddeľovač","menu.insert table":"Vložte tabuľku","submenu.table style":"Št\xfdl tabuľky"},sl:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grška pisma","keyboard.tooltip.command":"Ukazni način LaTeX","keyboard.tooltip.numeric":"Številsko","keyboard.tooltip.alphabetic":"Rimska pisma","tooltip.copy to clipboard":"Kopirati v odložišče","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Preklop navidezne tipkovnice","tooltip.undo":"Razveljavi","menu.insert matrix":"Vstavi matrico","menu.insert vector":"Vstavi vektor","submenu.array.matrix delimiters":"Matrični ločevalniki","menu.array.add row above":"Dodaj vrstico po","menu.array.add row below":"Dodaj vrstico prej","menu.array.add column after":"Dodaj stolpec po","menu.array.add column before":"Dodaj stolpec prej","menu.array.delete row":"Izbriši vrstico","menu.array.delete rows":"Izbriši izbrane vrstice","menu.array.delete column":"Izbriši stolpec","menu.array.delete columns":"Izbriši izbrane stolpce","submenu.array.insert separator":"Vstavi ločilo","menu.insert table":"Vstavi tabelo","submenu.table style":"Tabela slog"},sq:{"keyboard.tooltip.functions":"Funksione","keyboard.tooltip.symbols":"Simbolet","keyboard.tooltip.greek":"Letrat Greke","keyboard.tooltip.command":"Modaliteti i komand\xebs latex","keyboard.tooltip.numeric":"Numerike","keyboard.tooltip.alphabetic":"Letrat romake","tooltip.copy to clipboard":"Kopjoni n\xeb Clipboard","tooltip.redo":"Riparo","tooltip.toggle virtual keyboard":"Aktivizo tastier\xebn virtuale","tooltip.undo":"Zhb\xebj","menu.insert matrix":"Vendosni Matric\xebn","menu.insert vector":"Vendos vektorin","submenu.array.matrix delimiters":"P\xebrcaktuesit e matric\xebs","menu.array.add row above":"Shto Rreshtin Pas","menu.array.add row below":"Shto Rreshtin Para","menu.array.add column after":"Shto kolon\xebn pas","menu.array.add column before":"Shto kolon\xebn para","menu.array.delete row":"Fshi Rreshtin","menu.array.delete rows":"Fshi rreshtat e zgjedhur","menu.array.delete column":"Fshi kolon\xebn","menu.array.delete columns":"Fshi kolonat e zgjedhura","submenu.array.insert separator":"Vendos Ndar\xebsin","menu.insert table":"Vendos tabel\xebn","submenu.table style":"Stili tabel\xebn"},sr:{"keyboard.tooltip.functions":"Функције","keyboard.tooltip.symbols":"Симболи","keyboard.tooltip.greek":"Греек Леттерс","keyboard.tooltip.command":"ЛаТеКс командни режим","keyboard.tooltip.numeric":"Нумерички","keyboard.tooltip.alphabetic":"Римска писма","tooltip.copy to clipboard":"Копирајте у међуспремник","tooltip.redo":"Понови","tooltip.toggle virtual keyboard":"Укључи / искључи виртуелну тастатуру","tooltip.undo":"Опозови","menu.insert matrix":"Уметни матрицу","menu.insert vector":"Уметни вектор","submenu.array.matrix delimiters":"Матрик Делимитерс","menu.array.add row above":"Додај ред после","menu.array.add row below":"Додај ред пре","menu.array.add column after":"Додај колону после","menu.array.add column before":"Додај колону пре","menu.array.delete row":"Избриши ред","menu.array.delete rows":"Избриши изабране редове","menu.array.delete column":"Избриши колону","menu.array.delete columns":"Избриши изабране колоне","submenu.array.insert separator":"Уметни сепаратор","menu.insert table":"Убаци табелу","submenu.table style":"Табеларни стил"},sv:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Grekiska bokst\xe4ver","keyboard.tooltip.command":"LaTeX kommandol\xe4ge","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.alphabetic":"Romerska bokst\xe4ver","tooltip.copy to clipboard":"Kopiera till Urklipp","tooltip.redo":"G\xf6ra om","tooltip.toggle virtual keyboard":"V\xe4xla virtuellt tangentbord","tooltip.undo":"\xc5ngra","menu.insert matrix":"S\xe4tt in matris","menu.insert vector":"Infoga vektor","submenu.array.matrix delimiters":"Matrisavgr\xe4nsare","menu.array.add row above":"L\xe4gg till rad efter","menu.array.add row below":"L\xe4gg till rad f\xf6re","menu.array.add column after":"L\xe4gg till kolumn efter","menu.array.add column before":"L\xe4gg till kolumn f\xf6re","menu.array.delete row":"Radera rad","menu.array.delete rows":"Ta bort valda rader","menu.array.delete column":"Ta bort kolumn","menu.array.delete columns":"Ta bort valda kolumner","submenu.array.insert separator":"S\xe4tt i separator","menu.insert table":"Infoga tabell","submenu.table style":"Tabellstil"},th:{"keyboard.tooltip.functions":"ฟังก์ชั่น","keyboard.tooltip.symbols":"สัญลักษณ์","keyboard.tooltip.greek":"อักษรกรีก","keyboard.tooltip.command":"โหมดคำสั่ง น้ำยาง","keyboard.tooltip.numeric":"ตัวเลข","keyboard.tooltip.alphabetic":"อักษรโรมัน","tooltip.copy to clipboard":"คัดลอกไปที่คลิปบอร์ด","tooltip.redo":"ทำซ้ำ","tooltip.toggle virtual keyboard":"สลับแป้นพิมพ์เสมือน","tooltip.undo":"เลิกทำ","menu.insert matrix":"แทรกเมทริกซ์","menu.insert vector":"แทรกเวกเตอร์","submenu.array.matrix delimiters":"ตัวคั่นเมทริกซ์","menu.array.add row above":"เพิ่มแถวหลัง","menu.array.add row below":"เพิ่มแถวก่อน","menu.array.add column after":"เพิ่มคอลัมน์หลัง","menu.array.add column before":"เพิ่มคอลัมน์ก่อน","menu.array.delete row":"ลบแถว","menu.array.delete rows":"ลบแถวที่เลือก","menu.array.delete column":"ลบคอลัมน์","menu.array.delete columns":"ลบคอลัมน์ที่เลือก","submenu.array.insert separator":"ตัวคั่นแทรก","menu.insert table":"แทรกตาราง","submenu.table style":"สไตล์ตาราง"},tr:{"keyboard.tooltip.functions":"Fonksiyonlar","keyboard.tooltip.symbols":"Semboller","keyboard.tooltip.greek":"Yunan harfleri","keyboard.tooltip.command":"LaTeX Komut Modu","keyboard.tooltip.numeric":"Sayısal","keyboard.tooltip.alphabetic":"Roma Harfleri","tooltip.copy to clipboard":"Panoya kopyala","tooltip.redo":"Yeniden yap","tooltip.toggle virtual keyboard":"Sanal Klavyeyi A\xe7/Kapat","tooltip.undo":"Geri alma","menu.insert matrix":"Matris Ekle","menu.insert vector":"Vekt\xf6r Ekle","submenu.array.matrix delimiters":"Matris Sınırlayıcılar","menu.array.add row above":"Satırdan Sonra Ekle","menu.array.add row below":"\xd6nce Satır Ekle","menu.array.add column after":"Sonra S\xfctun Ekle","menu.array.add column before":"\xd6nce S\xfctun Ekle","menu.array.delete row":"Sırayı sil","menu.array.delete rows":"Se\xe7ili Satırları Sil","menu.array.delete column":"S\xfctunu Sil","menu.array.delete columns":"Se\xe7ili S\xfctunları Sil","submenu.array.insert separator":"Ayırıcı Ekle","menu.insert table":"Tablo Ekle","submenu.table style":"Tablo Stili"},uk:{"keyboard.tooltip.functions":"Функції","keyboard.tooltip.symbols":"Символи","keyboard.tooltip.greek":"Грецькі літери","keyboard.tooltip.command":"Командний режим латексу","keyboard.tooltip.numeric":"Числовий","keyboard.tooltip.alphabetic":"Римські літери","tooltip.copy to clipboard":"Копіювати в буфер обміну","tooltip.redo":"Повторити","tooltip.toggle virtual keyboard":"Переключити віртуальну клавіатуру","tooltip.undo":"Скасувати","menu.insert matrix":"Вставити матрицю","menu.insert vector":"Вставити вектор","submenu.array.matrix delimiters":"Матричні роздільники","menu.array.add row above":"Додати рядок після","menu.array.add row below":"Додати рядок до","menu.array.add column after":"Додати стовпець після","menu.array.add column before":"Додати стовпець перед","menu.array.delete row":"Видалити рядок","menu.array.delete rows":"Видалити вибрані рядки","menu.array.delete column":"Видалити стовпець","menu.array.delete columns":"Видалити вибрані стовпці","submenu.array.insert separator":"Вставте роздільник","menu.insert table":"Вставити таблицю","submenu.table style":"Стиль таблиці"},vi:{"keyboard.tooltip.functions":"Chức năng","keyboard.tooltip.symbols":"K\xfd hiệu","keyboard.tooltip.greek":"Chữ Hy Lạp","keyboard.tooltip.command":"Chế độ lệnh LaTeX","keyboard.tooltip.numeric":"Số","keyboard.tooltip.alphabetic":"Chữ c\xe1i La m\xe3","tooltip.copy to clipboard":"Sao ch\xe9p v\xe0o clipboard","tooltip.redo":"L\xe0m lại","tooltip.toggle virtual keyboard":"Chuyển đổi b\xe0n ph\xedm ảo","tooltip.undo":"Ho\xe0n t\xe1c","menu.insert matrix":"Ch\xe8n ma trận","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Dấu ph\xe2n c\xe1ch ma trận","menu.array.add row above":"Th\xeam h\xe0ng sau","menu.array.add row below":"Th\xeam h\xe0ng trước","menu.array.add column after":"Th\xeam cột sau","menu.array.add column before":"Th\xeam cột trước","menu.array.delete row":"X\xf3a h\xe0ng","menu.array.delete rows":"X\xf3a h\xe0ng đ\xe3 chọn","menu.array.delete column":"X\xf3a cột","menu.array.delete columns":"X\xf3a c\xe1c cột đ\xe3 chọn","submenu.array.insert separator":"Ch\xe8n dấu ph\xe2n c\xe1ch","menu.insert table":"Ch\xe8n bảng","submenu.table style":"Kiểu bảng"},zh_cn:{"keyboard.tooltip.functions":"职能","keyboard.tooltip.symbols":"符号","keyboard.tooltip.greek":"希腊字母","keyboard.tooltip.command":"乳胶 命令模式","keyboard.tooltip.numeric":"数字","keyboard.tooltip.alphabetic":"罗马字母","tooltip.copy to clipboard":"复制到剪贴板","tooltip.redo":"重做","tooltip.toggle virtual keyboard":"切换虚拟键盘","tooltip.undo":"撤消","menu.insert matrix":"插入矩阵","menu.insert vector":"插入向量","submenu.array.matrix delimiters":"矩阵分隔符","menu.array.add row above":"在后面添加行","menu.array.add row below":"在前面添加行","menu.array.add column after":"在后面添加列r","menu.array.add column before":"在前面添加列","menu.array.delete row":"删除行","menu.array.delete rows":"删除选定行","menu.array.delete column":"删除列","menu.array.delete columns":"删除选定的列","submenu.array.insert separator":"插入分隔符","menu.insert table":"插入表格","submenu.table style":"表格样式"},zh_tw:{"keyboard.tooltip.functions":"職能","keyboard.tooltip.symbols":"符號","keyboard.tooltip.greek":"希臘字母","keyboard.tooltip.command":"乳膠命令模式","keyboard.tooltip.numeric":"數字","keyboard.tooltip.alphabetic":"羅馬字母","tooltip.copy to clipboard":"複製到剪貼板","tooltip.redo":"重做","tooltip.toggle virtual keyboard":"切換虛擬鍵盤","tooltip.undo":"撤消","menu.insert matrix":"插入矩陣","menu.insert vector":"插入向量","submenu.array.matrix delimiters":"矩陣分隔符","menu.array.add row above":"在後面添加行","menu.array.add row below":"在前面添加行","menu.array.add column after":"在後面添加列","menu.array.add column before":"在前面添加列","menu.array.delete row":"刪除行","menu.array.delete rows":"刪除選定行","menu.array.delete column":"刪除列","menu.array.delete columns":"刪除選定的列","submenu.array.insert separator":"插入分隔符","menu.insert table":"插入表格","submenu.table style":"表格樣式"}},_locale:"",get locale(){return p._locale||(p._locale=ue()?navigator.language.slice(0,5):"en"),p._locale},set locale(e){p._locale=e},merge(t,r){if(t&&r){let a=p._locale;p.locale=t,p.strings[t]=m(m({},p.strings[t]),r),p.locale=a}else if(t&&!r)for(let r of Object.keys(t))p.merge(r,t[r])}};function je(t){if(void 0===t)return;let r=p.locale.slice(0,2),a="";if(p.strings[p.locale]&&(a=p.strings[p.locale][t]),!a&&p.strings[r]&&(a=p.strings[r][t]),a||(a=p.strings.en[t]),a)return a}var y={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},v={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},k={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},w={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},_={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},S={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function yr(t){var r,a,n,s,l,c;let d=t.split("!"),h,p,k,M=255,C=255,z=255,A=-1,E=d.length>0&&d[0].startsWith("-");E&&(d[0]=d[0].slice(1));for(let t=0;t<d.length;t++){h=M,p=C,k=z;let E=null==(r=d[t].trim().match(/^([A-Za-z\d]+)/))?void 0:r[1],T=null==E?void 0:E.toLowerCase(),$=E&&null!=(c=null!=(l=null!=(s=null!=(n=null!=(a=w[T])?a:w[_[E]])?n:v[E])?s:S[E])?l:y[E])?c:d[t].trim(),P=$.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(null!=P&&P[1]&&P[2]&&P[3])M=Math.max(0,Math.min(255,Number.parseInt(P[1],16))),C=Math.max(0,Math.min(255,Number.parseInt(P[2],16))),z=Math.max(0,Math.min(255,Number.parseInt(P[3],16)));else if(null!=(P=$.match(/^#([\da-f]{3})$/i))&&P[1]){let t=Number.parseInt(P[1][0],16),r=Number.parseInt(P[1][1],16),a=Number.parseInt(P[1][2],16);M=Math.max(0,Math.min(255,16*t+t)),C=Math.max(0,Math.min(255,16*r+r)),z=Math.max(0,Math.min(255,16*a+a))}else{if(null==(P=$.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i))||!P[1]||!P[2]||!P[3])return;M=Math.max(0,Math.min(255,Number.parseInt(P[1]))),C=Math.max(0,Math.min(255,Number.parseInt(P[2]))),z=Math.max(0,Math.min(255,Number.parseInt(P[3])))}A>=0&&(M=(1-A)*M+A*h,C=(1-A)*C+A*p,z=(1-A)*z+A*k,A=-1),t+1<d.length&&(A=Math.max(0,Math.min(100,Number.parseInt(d[++t])))/100)}return A>=0&&(M=A*M+(1-A)*h,C=A*C+(1-A)*p,z=A*z+(1-A)*k),E&&(M=255-M,C=255-C,z=255-z),"#"+("00"+Math.round(M).toString(16)).slice(-2)+("00"+Math.round(C).toString(16)).slice(-2)+("00"+Math.round(z).toString(16)).slice(-2)}function Gr(t){var r,a;return null!=(a=null!=(r=k[(t=t.trim()).toLowerCase()])?r:k[_[t]])?a:yr(t)}function za(t,r,a){return a<0&&(a+=6),a>=6&&(a-=6),a<1?(r-t)*a+t:a<3?r:a<4?(r-t)*(4-a)+t:t}function Ra(t){return t<0?0:t>255?255:Math.round(t)}var M={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},C=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function L(t){return t?Array.isArray(t)?t:"object"==typeof t&&"group"in t?t.group:[]:[]}var z,A,E={},T={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},$={},P={},q={iff:"\\;⟺\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",rd:"\\mathrm{d}",rD:"\\mathrm{D}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}",mathstrut:{def:"\\vphantom{(}",primitive:!0},tripledash:{def:"\\vphantom{-}\\raise{4mu}{\\mkern1.5mu\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2mu}}",expand:!0},"braket.sty":{package:{bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace"}},"amsmath.sty":{package:{varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},primitive:!0},"texvc.sty":{package:{darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",N:"\\mathbb{N}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",lArr:"\\Leftarrow",Larr:"\\Leftarrow",lrarr:"\\leftrightarrow",lrArr:"\\Leftrightarrow",Lrarr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",plusmn:"\\pm",rarr:"\\rightarrow",rArr:"\\Rightarrow",Rarr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",weierp:"\\wp",Zeta:"\\mathrm{Z}"},primitive:!1}},F={" ":32,"\\#":35,"\\&":38,"\\$":36,"\\%":37,"-":45,"\\_":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbraceleft":123,"\\textbraceright":125,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"–":8211,"—":8212,"‘":8216,"’":8217,"“":8220,"”":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},R=/[\w!@*()-=+{}[\]\\';:?/.,~<>`|$%#&^" ]/;function Na(t,r,a="mord",n){void 0!==r&&(E[t]={definitionType:"symbol",type:a,variant:n,codepoint:r},T[r]||(T[r]=t),F[t]||(F[t]=r))}function de(t,r,a){if("string"==typeof t){for(let r=0;r<t.length;r++){let a=t.charAt(r);Na(a,a.codePointAt(0))}return}for(let[n,s,l,c]of t)Na(n,s,null!=l?l:r,null!=c?c:a)}function Va(t,r){for(let a=t;a<=r;a++)Na(String.fromCodePoint(a),a)}function Dl(t){let r="auto",a=t.match(/:([^=]+)/);return a&&(r=a[1].trim()),r}function Xo(t){if(!t)return[];let r=[],a=t.split("]");if(a[0].startsWith("[")){r.push({isOptional:!0,type:Dl(a[0].slice(1))});for(let t=1;t<=a.length;t++)r.push(...Xo(a[t]))}else if((a=t.split("}"))[0].startsWith("{")){r.push({isOptional:!1,type:Dl(a[0].slice(1))});for(let t=1;t<=a.length;t++)r.push(...Xo(a[t]))}return r}function $a(t){if(!t)return"";let r="",a=!0;for(let n of t)"string"==typeof n.value?r+=n.value:a=!1;return a?r:""}function qa(t,r){"string"==typeof t&&(t=[t]);let a={tabular:!1,params:[],createAtom:r};for(let r of t)P[r]=a}function at(t,r,a){"string"==typeof t&&(t=[t]);let n={tabular:!0,params:Xo(r),createAtom:a};for(let r of t)P[r]=n}function x(t,r,a){var n,s;a||(a={});let l={definitionType:"function",params:Xo(r),ifMode:a.ifMode,isFunction:null!=(n=a.isFunction)&&n,applyMode:a.applyMode,infix:null!=(s=a.infix)&&s,createAtom:a.createAtom,applyStyle:a.applyStyle,serialize:a.serialize,render:a.render};if("string"==typeof t)$["\\"+t]=l;else for(let r of t)$["\\"+r]=l}function Zr(t){return aY||(aY=Zo(q)),t?Zo(m(m({},aY),t)):aY}function Bl(t,r){var a,n,s,l;if("string"==typeof t){let s=0;return/(^|[^\\])#1/.test(t)&&(s=1),/(^|[^\\])#2/.test(t)&&(s=2),/(^|[^\\])#3/.test(t)&&(s=3),/(^|[^\\])#4/.test(t)&&(s=4),/(^|[^\\])#5/.test(t)&&(s=5),/(^|[^\\])#6/.test(t)&&(s=6),/(^|[^\\])#7/.test(t)&&(s=7),/(^|[^\\])#8/.test(t)&&(s=8),/(^|[^\\])#9/.test(t)&&(s=9),{expand:null==(a=null==r?void 0:r.expand)||a,captureSelection:null==(n=null==r?void 0:r.captureSelection)||n,args:s,def:t}}return m({expand:null==(s=null==r?void 0:r.expand)||s,captureSelection:null==(l=null==r?void 0:r.captureSelection)||l,args:0},t)}function Zo(t){if(!t)return{};let r={};for(let a of Object.keys(t)){let n=t[a];if(null==n)delete r[a];else if("object"==typeof n&&"package"in n)for(let t of Object.keys(n.package))r[t]=Bl(n.package[t],{expand:!n.primitive,captureSelection:n.captureSelection});else r[a]=Bl(n)}return r}function ee(t,r="math"){if(!t||0===t.length)return null;let a=null;if(t.startsWith("\\")){if(a=$[t])return a.ifMode&&a.ifMode!==r?null:a;"math"===r?a=E[t]:F[t]&&(a={definitionType:"symbol",type:"mord",codepoint:F[t]})}else if("math"===r){if(!(a=E[t])&&1===t.length){let r=Xi("math",t.codePointAt(0));return r.startsWith("\\")?g(m({},ee(r,"math")),{command:r}):null}}else F[t]?a={definitionType:"symbol",type:"mord",codepoint:F[t]}:"text"===r&&(a={definitionType:"symbol",type:"mord",codepoint:t.codePointAt(0)});return a&&"symbol"===a.definitionType&&"mord"===a.type&&(102===a.codepoint||103===a.codepoint||104===a.codepoint)&&(a.isFunction=!0),null!=a?a:null}function Yo(t,r){return t.startsWith("\\")?r[t.slice(1)]:null}function Xi(t,r){if(void 0===r)return"";if("math"===t&&T[r])return T[r];if("text"===t){let t=Object.keys(F).find(t=>F[t]===r);if(!t){let a=r.toString(16);t="^".repeat(a.length)+a}return t}return String.fromCodePoint(r)}!function(){if(!ue())return!0;if(/firefox/i.test(navigator.userAgent)){let t=navigator.userAgent.match(/firefox\/(\d+)/i);return!!t&&parseInt(t[1])>=78}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let t=navigator.userAgent.match(/edg\/(\d+)/i);return!!t&&parseInt(t[1])>=79}return!0}()?(z=/[a-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒößÖẞìíòúÌÍÒÚáñÁÑ]/,A=/[\da-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒößÖẞìíòúÌÍÒÚáñÁÑ]/):(z=RegExp("\\p{Letter}","u"),A=RegExp("[0-9\\p{Letter}]","u"));var V=[0,.68889,0,0,.72222],j=[0,.68889,0,0,.66667],H=[0,.68889,0,0,.77778],W=[0,.68889,0,0,.61111],X=[.16667,.68889,0,0,.77778],J=[0,.68889,0,0,.55556],Z=[0,0,0,0,.25],ei=[0,.825,0,0,2.33334],er=[0,.9,0,0,2.33334],eo=[0,.68889,0,0,.54028],en=[-.03598,.46402,0,0,.5],es=[-.13313,.36687,0,0,1],ec=[.01354,.52239,0,0,1],ed=[.01354,.52239,0,0,1.11111],eu=[0,.54986,0,0,1],eh=[0,.69224,0,0,.5],ep=[0,.43056,0,0,1],ef=[.08198,.58198,0,0,.77778],ey=[.19444,.69224,0,0,.41667],eg=[.1808,.675,0,0,1],eb=[.19444,.69224,0,0,.83334],ev=[.13667,.63667,0,0,1],ex=[-.064,.437,0,0,1.334],ek=[.08167,.58167,0,0,.77778],ew=[0,.69224,0,0,.72222],e_=[0,.69224,0,0,.66667],eS=[-.13313,.36687,0,0,.77778],eM=[.06062,.54986,0,0,.77778],eL=[0,.69224,0,0,.77778],eC=[.25583,.75583,0,0,.77778],ez=[.25142,.75726,0,0,.77778],eA=[.20576,.70576,0,0,.77778],eD=[.30274,.79383,0,0,.77778],eK=[.22958,.72958,0,0,.77778],eE=[.1808,.675,0,0,.77778],eT=[.13667,.63667,0,0,.77778],eB=[.13597,.63597,0,0,.77778],e$=[.03517,.54986,0,0,.77778],eP=[0,.675,0,0,.77778],eO=[.19444,.69224,0,0,.61111],eN=[0,.54986,0,0,.76042],eq=[0,.54986,0,0,.66667],eF=[.0391,.5391,0,0,.77778],eR=[.03517,.54986,0,0,1.33334],eI=[.38569,.88569,0,0,.77778],eV=[.23222,.74111,0,0,.77778],ej=[.19444,.69224,0,0,.77778],eH=[0,.37788,0,0,.5],eW=[0,.54986,0,0,.72222],eU=[0,.69224,0,0,.83334],eX=[.11111,.69224,0,0,.66667],eJ=[.26167,.75726,0,0,.77778],eG=[.48256,.98256,0,0,.77778],eZ=[.28481,.79383,0,0,.77778],eY=[.08167,.58167,0,0,.22222],eQ=[.08167,.58167,0,0,.38889],e0=[0,.43056,.04028,0,.66667],e1=[.41951,.91951,0,0,.77778],e4=[.24982,.74947,0,0,.38865],e2=[.08319,.58283,0,0,.75623],e3=[0,.10803,0,0,.27764],e6=[0,.47534,0,0,.50181],e8=[.18906,.47534,0,0,.50181],e5=[0,.69141,0,0,.50181],e7=[.24982,.74947,0,0,.27764],e9=[0,.69141,0,0,.21471],ti=[.25,.75,0,0,.44722],to=[0,.64444,0,0,.575],tn=[.08556,.58556,0,0,.89444],ts=[0,.69444,0,0,.89444],tc=[0,.68611,0,0,.9],td=[0,.68611,0,0,.86944],tu=[.25,.75,0,0,.575],th=[.25,.75,0,0,.31944],tp=[0,.69444,0,0,.63889],tm=[0,.69444,0,0,.31944],tf=[0,.44444,0,0,.63889],ty=[0,.44444,0,0,.51111],tg=[0,.69444,0,0,.575],tb=[.13333,.63333,0,0,.89444],tv=[0,.44444,0,0,.31944],tx=[0,.69444,0,0,.86944],tk=[0,.68611,0,0,.69166],tw=[0,.68611,0,0,.83055],t_=[0,.68611,0,0,.89444],tS=[0,.69444,0,0,.60278],tM=[.19444,.69444,0,0,.51111],tL=[0,.69444,0,0,.83055],tC=[-.10889,.39111,0,0,1.14999],tz=[.19444,.69444,0,0,.575],tA=[.19444,.69444,0,0,1.14999],tD=[.19444,.69444,0,0,.70277],tK=[.05556,.75,0,0,.575],tE=[0,.68611,0,0,.95833],tT=[.08556,.58556,0,0,.76666],tB=[-.02639,.47361,0,0,.575],t$=[0,.44444,0,0,.89444],tP=[0,.55556,0,0,.76666],tO=[-.10889,.39111,0,0,.89444],tN=[.00222,.50222,0,0,.89444],tq=[.19667,.69667,0,0,.89444],tF=[.08556,.58556,0,0,1.14999],tR=[0,.69444,0,0,.70277],tI=[-.02778,.47222,0,0,.575],tV=[.25,.75,0,0,.51111],tj=[-.13889,.36111,0,0,1.14999],tH=[.19444,.69444,0,0,1.02222],tW=[.12963,.69444,0,0,.89444],tU=[.19444,.69444,0,0,.44722],tX=[0,.64444,.13167,0,.59111],tJ=[.19444,.64444,.13167,0,.59111],tG=[0,.68611,.17208,0,.8961],tZ=[.19444,.44444,.105,0,.53222],tY=[0,.44444,.085,0,.82666],tQ=[0,.69444,.06709,0,.59111],t0=[0,.69444,.12945,0,.35555],t1=[0,.69444,0,0,.94888],t4=[0,.69444,.11472,0,.59111],t2=[0,.68611,.10778,0,.88555],t3=[0,.69444,.07939,0,.62055],t6=[0,.69444,.12417,0,.30667],t8=[0,.64444,.13556,0,.51111],t5=[.19444,.64444,.13556,0,.51111],t7=[0,.68333,.16389,0,.74333],t9=[.19444,.43056,.08847,0,.46],ie=[0,.43056,.07514,0,.71555],ii=[0,.69444,.06646,0,.51111],ir=[0,.69444,0,0,.83129],ia=[0,.69444,.1225,0,.51111],io=[0,.68333,.09403,0,.76666],is=[0,.68333,.11111,0,.76666],il=[0,.69444,.06961,0,.51444],ic=[0,.69444,0,0,.27778],id=[.25,.75,0,0,.38889],iu=[0,.64444,0,0,.5],ih=[0,.69444,0,0,.77778],ip=[0,.68333,0,0,.75],im=[0,.68333,0,0,.77778],iy=[0,.68333,0,0,.68056],ig=[0,.68333,0,0,.72222],ib=[.25,.75,0,0,.5],iv=[.25,.75,0,0,.27778],ix=[0,.69444,0,0,.5],ik=[0,.69444,0,0,.55556],iw=[0,.43056,0,0,.44445],i_=[0,.43056,0,0,.5],iS=[.19444,.43056,0,0,.55556],iM=[0,.43056,0,0,.55556],iL=[.08333,.58333,0,0,.77778],iC=[0,.43056,0,0,.27778],iz=[0,.66786,0,0,.27778],iA=[0,.69444,0,0,.75],iD=[0,.66786,0,0,.5],iK=[0,.68333,0,0,.625],iE=[.19444,.69444,0,0,.44445],iT=[0,.69444,0,0,.72222],iB=[.19444,.69444,0,0,.5],i$=[.19444,.69444,0,0,1],iP=[.011,.511,0,0,1.126],iO=[.19444,.69444,0,0,.61111],iN=[.05556,.75,0,0,.5],iq=[0,.68333,0,0,.83334],iF=[.0391,.5391,0,0,.66667],iR=[-.05555,.44445,0,0,.5],iI=[0,.43056,0,0,.77778],iV=[0,.55556,0,0,.66667],ij=[-.03625,.46375,0,0,.77778],iH=[-.01688,.48312,0,0,.77778],iW=[.0391,.5391,0,0,1],iU=[0,.69444,0,0,.61111],iX=[-.03472,.46528,0,0,.5],iJ=[.25,.75,0,0,.44445],iG=[-.14236,.35764,0,0,1],iZ=[.244,.744,0,0,.412],iY=[.19444,.69444,0,0,.88889],iQ=[.12963,.69444,0,0,.77778],i0=[.19444,.69444,0,0,.38889],i1=[.011,.511,0,0,1.638],i4=[.19444,.69444,0,0,0],i2=[0,.44444,0,0,.575],i3=[.19444,.44444,0,0,.575],i6=[0,.68611,0,0,.75555],i8=[0,.69444,0,0,.66759],i5=[0,.68611,0,0,.80555],i7=[0,.68611,.08229,0,.98229],i9=[0,.68611,0,0,.76666],rt=[0,.44444,0,0,.58472],ri=[.19444,.44444,0,0,.6118],ro=[.19444,.43056,0,0,.5],rn=[0,.68333,.02778,.08334,.76278],rs=[0,.68333,.08125,.05556,.83125],rl=[0,.43056,0,.05556,.48472],rc=[.19444,.43056,0,.08334,.51702],rd=[.25,.75,0,0,.42778],ru=[0,.69444,0,0,.55],rh=[0,.69444,0,0,.73334],rp=[0,.69444,0,0,.79445],rm=[0,.69444,0,0,.51945],rf=[0,.69444,0,0,.70278],ry=[0,.69444,0,0,.76389],rg=[.25,.75,0,0,.34306],rb=[0,.69444,0,0,.56111],rv=[0,.69444,0,0,.25556],rx=[.19444,.45833,0,0,.56111],rk=[0,.45833,0,0,.56111],rw=[0,.69444,0,0,.30556],r_=[0,.69444,0,0,.58056],rS=[0,.69444,0,0,.67223],rM=[0,.69444,0,0,.85556],rL=[0,.69444,0,0,.55834],rC=[0,.65556,.11156,0,.5],rz=[0,.69444,.08094,0,.70834],rA=[.17014,0,0,0,.44445],rD=[0,.69444,.0799,0,.5],rK=[0,.69444,0,0,.73752],rE=[0,.69444,.09205,0,.5],rT=[0,.69444,.09031,0,.77778],rB=[0,.69444,.07816,0,.27778],r$=[0,.69444,.00316,0,.5],rP=[.19444,.69444,0,0,.83334],rO=[.05556,.75,0,0,.83334],rN=[0,.75,0,0,.5],rq=[.125,.08333,0,0,.27778],rF=[0,.08333,0,0,.27778],rR=[0,.65556,0,0,.5],rI=[0,.69444,0,0,.47222],rV=[0,.69444,0,0,.66667],rj=[0,.69444,0,0,.59722],rH=[0,.69444,0,0,.54167],rW=[0,.69444,0,0,.70834],rU=[.25,.75,0,0,.28889],rX=[0,.69444,0,0,.51667],rJ=[0,.44444,0,0,.44445],rG=[.19444,.44444,0,0,.51667],rZ=[0,.44444,0,0,.38333],rY=[0,.44444,0,0,.51667],rQ=[0,.69444,0,0,.83334],r0=[.35001,.85,0,0,.45834],r1=[.35001,.85,0,0,.57778],r4=[.35001,.85,0,0,.41667],r2=[.35001,.85,0,0,.58334],r3=[0,.72222,0,0,.55556],r6=[1e-5,.6,0,0,.66667],r8=[1e-5,.6,0,0,.77778],r5=[.25001,.75,0,0,.94445],r7=[.306,.805,.19445,0,.47222],r9=[.30612,.805,.19445,0,.47222],ae=[.25001,.75,0,0,.83334],ai=[.35001,.85,0,0,.47222],ar=[.25001,.75,0,0,1.11111],ao=[.65002,1.15,0,0,.59722],an=[.65002,1.15,0,0,.81111],as=[.65002,1.15,0,0,.47222],ac=[.65002,1.15,0,0,.66667],ad=[0,.75,0,0,1],au=[.55001,1.05,0,0,1.27778],ah=[.862,1.36,.44445,0,.55556],ap=[.86225,1.36,.44445,0,.55556],af=[.55001,1.05,0,0,1.11111],ay=[.65002,1.15,0,0,.52778],ag=[.65002,1.15,0,0,.61111],ab=[.55001,1.05,0,0,1.51112],av=[.95003,1.45,0,0,.73611],ax=[.95003,1.45,0,0,1.04445],ak=[.95003,1.45,0,0,.52778],aw=[.95003,1.45,0,0,.75],a_=[0,.75,0,0,1.44445],aS=[.95003,1.45,0,0,.58334],aM=[1.25003,1.75,0,0,.79167],aL=[1.25003,1.75,0,0,1.27778],aC=[1.25003,1.75,0,0,.58334],az=[1.25003,1.75,0,0,.80556],aA=[0,.825,0,0,1.8889],aD=[1.25003,1.75,0,0,.63889],aK=[.64502,1.155,0,0,.875],aE=[1e-5,.6,0,0,.875],aT=[-.00099,.601,0,0,.66667],aB=[.64502,1.155,0,0,.66667],a$=[1e-5,.9,0,0,.88889],aP=[.65002,1.15,0,0,.88889],aO=[.90001,0,0,0,.88889],aN=[-.00499,.605,0,0,1.05556],aq=[0,.12,0,0,.45],aF=[0,.61111,0,0,.525],aR=[.08333,.69444,0,0,.525],aI=[-.08056,.53055,0,0,.525],aV=[-.05556,.55556,0,0,.525],aj=[0,.43056,0,0,.525],aH=[.22222,.43056,0,0,.525],aW=[0,0,0,0,.525],aU={"AMS-Regular":{32:Z,65:V,66:j,67:V,68:V,69:j,70:W,71:H,72:H,73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:H,76:j,77:[0,.68889,0,0,.94445],78:V,79:X,80:W,81:X,82:V,83:J,84:j,85:V,86:V,87:[0,.68889,0,0,1],88:V,89:V,90:j,107:J,160:Z,165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:J,295:eo,710:ei,732:er,770:ei,771:er,989:ek,1008:e0,8245:[0,.54986,0,0,.275],8463:eo,8487:V,8498:J,8502:j,8503:[0,.68889,0,0,.44445],8504:j,8513:[0,.68889,0,0,.63889],8592:en,8594:en,8602:es,8603:es,8606:ec,8608:ec,8610:ed,8611:ed,8619:eu,8620:eu,8621:[-.13313,.37788,0,0,1.38889],8622:es,8624:eh,8625:eh,8630:ep,8631:ep,8634:ef,8635:ef,8638:ey,8639:ey,8642:ey,8643:ey,8644:eg,8646:eg,8647:eg,8648:eb,8649:eg,8650:eb,8651:ec,8652:ec,8653:es,8654:es,8655:es,8666:ev,8667:ev,8669:[-.13313,.37788,0,0,1],8672:ex,8674:ex,8705:[0,.825,0,0,.5],8708:J,8709:ek,8717:[0,.43056,0,0,.42917],8722:en,8724:[.08198,.69224,0,0,.77778],8726:ek,8733:eL,8736:ew,8737:ew,8738:[.03517,.52239,0,0,.72222],8739:eY,8740:[.25142,.74111,0,0,.27778],8741:eQ,8742:[.25142,.74111,0,0,.5],8756:e_,8757:e_,8764:eS,8765:[-.13313,.37788,0,0,.77778],8769:eS,8770:ij,8774:eD,8776:iH,8778:ek,8782:eM,8783:eM,8785:ef,8786:ef,8787:ef,8790:eL,8791:eK,8796:[.08198,.91667,0,0,.77778],8806:eC,8807:eC,8808:ez,8809:ez,8812:[.25583,.75583,0,0,.5],8814:eA,8815:eA,8816:eD,8817:eD,8818:eK,8819:eK,8822:eE,8823:eE,8828:eT,8829:eT,8830:eK,8831:eK,8832:eA,8833:eA,8840:eD,8841:eD,8842:eB,8843:eB,8847:e$,8848:e$,8858:ef,8859:ef,8861:ef,8862:eP,8863:eP,8864:eP,8865:eP,8872:[0,.69224,0,0,.61111],8873:ew,8874:[0,.69224,0,0,.88889],8876:W,8877:W,8878:V,8879:V,8882:e$,8883:e$,8884:eT,8885:eT,8888:[0,.54986,0,0,1.11111],8890:iS,8891:eO,8892:eO,8901:[0,.54986,0,0,.27778],8903:ek,8905:ek,8906:ek,8907:eL,8908:eL,8909:[-.03598,.46402,0,0,.77778],8910:eN,8911:eN,8912:e$,8913:e$,8914:eq,8915:eq,8916:e_,8918:eF,8919:eF,8920:eR,8921:eR,8922:eI,8923:eI,8926:eT,8927:eT,8928:eD,8929:eD,8934:eV,8935:eV,8936:eV,8937:eV,8938:eA,8939:eA,8940:eD,8941:eD,8994:ej,8995:ej,9416:[.15559,.69224,0,0,.90222],9484:eh,9488:eh,9492:eH,9496:eH,9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:eP,9633:eP,9650:eW,9651:eW,9654:e$,9660:eW,9661:eW,9664:e$,9674:eX,9733:[.19444,.69224,0,0,.94445],10003:eU,10016:eU,10731:eX,10846:[.19444,.75583,0,0,.61111],10877:eT,10878:eT,10885:eC,10886:eC,10887:eB,10888:eB,10889:eJ,10890:eJ,10891:eG,10892:eG,10901:eT,10902:eT,10933:ez,10934:ez,10935:eJ,10936:eJ,10937:eJ,10938:eJ,10949:eC,10950:eC,10955:eZ,10956:eZ,57350:eY,57351:eQ,57352:ek,57353:e0,57356:ez,57357:ez,57358:e1,57359:eD,57360:eD,57361:e1,57366:ez,57367:ez,57368:ez,57369:ez,57370:eB,57371:eB},"Caligraphic-Regular":{32:Z,65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:Z},"Fraktur-Regular":{32:Z,33:[0,.69141,0,0,.29574],34:e9,38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:e4,41:e4,42:[0,.62119,0,0,.27764],43:e2,44:e3,45:e2,46:e3,47:[.24982,.74947,0,0,.50181],48:e6,49:e6,50:e6,51:e8,52:e8,53:e8,54:e5,55:e8,56:e5,57:e8,58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:e7,93:e7,94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:Z,8216:e9,8217:e9,58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:Z,33:[0,.69444,0,0,.35],34:tS,35:[.19444,.69444,0,0,.95833],36:tK,37:[.05556,.75,0,0,.95833],38:ts,39:tm,40:ti,41:ti,42:[0,.75,0,0,.575],43:tb,44:[.19444,.15556,0,0,.31944],45:rZ,46:[0,.15556,0,0,.31944],47:tu,48:to,49:to,50:to,51:to,52:to,53:to,54:to,55:to,56:to,57:to,58:tv,59:[.19444,.44444,0,0,.31944],60:tn,61:tO,62:tn,63:[0,.69444,0,0,.54305],64:ts,65:td,66:[0,.68611,0,0,.81805],67:tw,68:[0,.68611,0,0,.88194],69:i6,70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:tc,73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:tk,77:[0,.68611,0,0,1.09166],78:tc,79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:td,89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:th,92:tu,93:th,94:tg,95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:tp,99:ty,100:tp,101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:tp,105:tm,106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:tm,109:[0,.44444,0,0,.95833],110:tf,111:i2,112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:tf,118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:ty,123:tu,124:th,125:tu,126:[.35,.34444,0,0,.575],160:Z,163:[0,.69444,0,0,.86853],168:tg,172:[0,.44444,0,0,.76666],176:tx,177:tb,184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:tb,216:[.04861,.73472,0,0,.89444],223:rj,230:[0,.44444,0,0,.83055],247:tb,248:[.09722,.54167,0,0,.575],305:tv,338:[0,.68611,0,0,1.16944],339:t$,567:[.19444,.44444,0,0,.35139],710:tg,711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:tg,715:tg,728:tg,729:tm,730:tx,732:tg,733:tg,915:tk,916:tE,920:t_,923:i5,926:i9,928:tc,931:tw,933:t_,934:tw,936:t_,937:tw,8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:tm,8217:tm,8220:tS,8221:tS,8224:tM,8225:tM,8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:i8,8465:tL,8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:tL,8501:tR,8592:tC,8593:tz,8594:tC,8595:tz,8596:tC,8597:tu,8598:tA,8599:tA,8600:tA,8601:tA,8636:tC,8637:tC,8640:tC,8641:tC,8656:tC,8657:tD,8658:tC,8659:tD,8660:tC,8661:[.25,.75,0,0,.70277],8704:tp,8706:[0,.69444,.06389,0,.62847],8707:tp,8709:tK,8711:tE,8712:tT,8715:tT,8722:tb,8723:tb,8725:tu,8726:tu,8727:tI,8728:tB,8729:tB,8730:[.18,.82,0,0,.95833],8733:t$,8734:[0,.44444,0,0,1.14999],8736:ew,8739:th,8741:tu,8743:tP,8744:tP,8745:tP,8746:tP,8747:[.19444,.69444,.12778,0,.56875],8764:tO,8768:[.19444,.69444,0,0,.31944],8771:tN,8776:[.02444,.52444,0,0,.89444],8781:tN,8801:tN,8804:tq,8805:tq,8810:tF,8811:tF,8826:tn,8827:tn,8834:tn,8835:tn,8838:tq,8839:tq,8846:tP,8849:tq,8850:tq,8851:tP,8852:tP,8853:tb,8854:tb,8855:tb,8856:tb,8857:tb,8866:tR,8867:tR,8868:ts,8869:ts,8900:tB,8901:[-.02639,.47361,0,0,.31944],8902:tI,8968:tV,8969:tV,8970:tV,8971:tV,8994:tj,8995:tj,9651:tH,9657:tI,9661:tH,9667:tI,9711:tA,9824:tW,9825:tW,9826:tW,9827:tW,9837:[0,.75,0,0,.44722],9838:tU,9839:tU,10216:ti,10217:ti,10815:tc,10927:tq,10928:tq,57376:i4},"Main-BoldItalic":{32:Z,33:[0,.69444,.11417,0,.38611],34:t3,35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:t0,40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:tX,49:tX,50:tX,51:tX,52:tJ,53:tX,54:tX,55:tJ,56:tX,57:tX,58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:t4,64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:tG,73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:tG,79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:tQ,95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:tZ,104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:tZ,114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:Z,168:[0,.69444,.11473,0,.59111],176:t1,184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:tY,248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:tY,567:[.19444,.44444,.04611,0,.385],710:tQ,711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:t0,730:t1,732:t4,733:t4,915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:tG,931:[0,.68611,.11431,0,.82666],933:t2,934:[0,.68611,.05632,0,.82666],936:t2,937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:t0,8217:t0,8220:[0,.69444,.16772,0,.62055],8221:t3},"Main-Italic":{32:Z,33:t6,34:il,35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:t6,40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:t8,49:t8,50:t8,51:t8,52:t5,53:t8,54:t8,55:t5,56:t8,57:t8,58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:ia,64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:t7,73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:t7,79:io,80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:t7,86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:ii,95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:t9,104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:t9,114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:Z,168:[0,.66786,.10474,0,.51111],176:ir,184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:ie,248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:ie,710:ii,711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:ir,732:[0,.66786,.11585,0,.51111],733:ia,915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:io,923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:t7,931:[0,.68333,.12028,0,.71555],933:is,934:[0,.68333,.05986,0,.71555],936:is,937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:t6,8217:t6,8220:[0,.69444,.1685,0,.51444],8221:il,8463:eo},"Main-Regular":{32:Z,33:ic,34:ix,35:rP,36:iN,37:rO,38:ih,39:ic,40:id,41:id,42:rN,43:iL,44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:ib,48:iu,49:iu,50:iu,51:iu,52:iu,53:iu,54:iu,55:iu,56:iu,57:iu,58:iC,59:[.19444,.43056,0,0,.27778],60:eF,61:eS,62:eF,63:rI,64:ih,65:ip,66:[0,.68333,0,0,.70834],67:ig,68:[0,.68333,0,0,.76389],69:iy,70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:ip,73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:im,76:iK,77:[0,.68333,0,0,.91667],78:ip,79:im,80:iy,81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:ig,85:ip,86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:ip,89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:iv,92:ib,93:iv,94:ix,95:[.31,.12056,.02778,0,.5],97:i_,98:ik,99:iw,100:ik,101:iw,102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:ik,105:iz,106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:ic,109:[0,.43056,0,0,.83334],110:iM,111:i_,112:iS,113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:iM,118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:iw,123:ib,124:iv,125:ib,126:[.35,.31786,0,0,.5],160:Z,163:[0,.69444,0,0,.76909],167:iE,168:iD,172:[0,.43056,0,0,.66667],176:iA,177:iL,182:iO,184:rA,198:[0,.68333,0,0,.90278],215:iL,216:[.04861,.73194,0,0,.77778],223:ix,230:[0,.43056,0,0,.72222],247:iL,248:[.09722,.52778,0,0,.5],305:iC,338:[0,.68333,0,0,1.01389],339:iI,567:[.19444,.43056,0,0,.30556],710:ix,711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:ix,715:ix,728:ix,729:iz,730:iA,732:iD,733:ix,915:iK,916:iq,920:im,923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:ip,931:ig,933:im,934:ig,936:im,937:ig,8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:ic,8217:ic,8220:ix,8221:ix,8224:iE,8225:iE,8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:eo,8465:iT,8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:iT,8501:iU,8592:es,8593:iB,8594:es,8595:iB,8596:es,8597:ib,8598:i$,8599:i$,8600:i$,8601:i$,8614:[.011,.511,0,0,1],8617:iP,8618:iP,8636:es,8637:es,8640:es,8641:es,8652:[.011,.671,0,0,1],8656:es,8657:iO,8658:es,8659:iO,8660:es,8661:[.25,.75,0,0,.61111],8704:ik,8706:[0,.69444,.05556,.08334,.5309],8707:ik,8709:iN,8711:iq,8712:iF,8715:iF,8722:iL,8723:iL,8725:ib,8726:ib,8727:iX,8728:iR,8729:iR,8730:[.2,.8,0,0,.83334],8733:iI,8734:ep,8736:ew,8739:iv,8741:ib,8743:iV,8744:iV,8745:iV,8746:iV,8747:[.19444,.69444,.11111,0,.41667],8764:eS,8768:[.19444,.69444,0,0,.27778],8771:ij,8773:[-.022,.589,0,0,1],8776:iH,8781:ij,8784:[-.133,.67,0,0,.778],8801:ij,8804:eB,8805:eB,8810:iW,8811:iW,8826:eF,8827:eF,8834:eF,8835:eF,8838:eB,8839:eB,8846:iV,8849:eB,8850:eB,8851:iV,8852:iV,8853:iL,8854:iL,8855:iL,8856:iL,8857:iL,8866:iU,8867:iU,8868:ih,8869:ih,8872:[.249,.75,0,0,.867],8900:iR,8901:[-.05555,.44445,0,0,.27778],8902:iX,8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:iJ,8969:iJ,8970:iJ,8971:iJ,8994:iG,8995:iG,9136:iZ,9137:iZ,9651:iY,9657:iX,9661:iY,9667:iX,9711:i$,9824:iQ,9825:iQ,9826:iQ,9827:iQ,9837:[0,.75,0,0,.38889],9838:i0,9839:i0,10216:id,10217:id,10222:iZ,10223:iZ,10229:[.011,.511,0,0,1.609],10230:i1,10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:i1,10815:ip,10927:eB,10928:eB,57376:i4},"Math-BoldItalic":{32:Z,48:i2,49:i2,50:i2,51:i3,52:i3,53:i3,54:to,55:i3,56:to,57:i3,65:td,66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:i7,73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:i6,77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:i8,105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:rt,112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:Z,915:[0,.68611,.15972,0,.65694],916:tE,920:[0,.68611,.03194,0,.86722],923:i5,926:[0,.68611,.07458,0,.84125],928:i7,931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:i9,936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:rt,960:[0,.44444,.03704,0,.68241],961:ri,962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:ri,1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:Z,48:i_,49:i_,50:i_,51:ro,52:ro,53:ro,54:iu,55:ro,56:iu,57:ro,65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:rs,73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:rn,80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:rl,112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:Z,915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:rn,923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:rs,931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:rl,960:[0,.43056,.03588,0,.57003],961:rc,962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:rc,1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:Z,33:[0,.69444,0,0,.36667],34:rL,35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:rw,40:rd,41:rd,42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:ru,49:ru,50:ru,51:ru,52:ru,53:ru,54:ru,55:ru,56:ru,57:ru,58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:rm,64:rh,65:rh,66:rh,67:rf,68:rp,69:[0,.69444,0,0,.64167],70:iU,71:rh,72:rp,73:[0,.69444,0,0,.33056],74:rm,75:ry,76:r_,77:[0,.69444,0,0,.97778],78:rp,79:rp,80:rf,81:[.10556,.69444,0,0,.79445],82:rf,83:iU,84:rh,85:ry,86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:rh,89:[0,.69444,.0275,0,.73334],90:rS,91:rg,93:rg,94:ru,95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:rb,99:[0,.45833,0,0,.48889],100:rb,101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:rb,105:rv,106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:rv,109:[0,.45833,0,0,.86667],110:rk,111:[0,.45833,0,0,.55],112:rx,113:rx,114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:rk,118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:Z,168:ru,176:rh,180:ru,184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:ru,711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:ru,729:rw,730:rh,732:ru,733:ru,915:r_,916:[0,.69444,0,0,.91667],920:rM,923:rS,926:rh,928:rp,931:rp,933:rM,934:rp,936:rM,937:rp,8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:rw,8217:rw,8220:rL,8221:rL},"SansSerif-Italic":{32:Z,33:[0,.69444,.05733,0,.31945],34:r$,35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:rB,40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:rq,45:[0,.44444,.01946,0,.33333],46:rF,47:[.25,.75,.13164,0,.5],48:rC,49:rC,50:rC,51:rC,52:rC,53:rC,54:rC,55:rC,56:rC,57:rC,58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:rV,66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:rz,73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:rH,77:[0,.69444,.08094,0,.875],78:rz,79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:rD,95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:Z,168:[0,.67937,.06385,0,.5],176:rK,184:rA,305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:rD,711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:rE,715:ix,728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:rK,732:[0,.67659,.08826,0,.5],733:rE,915:[0,.69444,.13372,0,.54167],916:rQ,920:[0,.69444,.07555,0,.77778],923:iU,926:[0,.69444,.12816,0,.66667],928:rz,931:[0,.69444,.11983,0,.72222],933:rT,934:[0,.69444,.04603,0,.72222],936:rT,937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:rB,8217:rB,8220:[0,.69444,.14205,0,.5],8221:r$},"SansSerif-Regular":{32:Z,33:[0,.69444,0,0,.31945],34:ix,35:rP,36:iN,37:rO,38:[0,.69444,0,0,.75834],39:ic,40:id,41:id,42:rN,43:iL,44:rq,45:[0,.44444,0,0,.33333],46:rF,47:ib,48:rR,49:rR,50:rR,51:rR,52:rR,53:rR,54:rR,55:rR,56:rR,57:rR,58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:rI,64:rV,65:rV,66:rV,67:tp,68:[0,.69444,0,0,.72223],69:rj,70:[0,.69444,0,0,.56945],71:rV,72:rW,73:ic,74:rI,75:[0,.69444,0,0,.69445],76:rH,77:[0,.69444,0,0,.875],78:rW,79:[0,.69444,0,0,.73611],80:tp,81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:ik,84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:rV,89:[0,.69444,.025,0,.66667],90:iU,91:rU,93:rU,94:ix,95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:rX,99:rJ,100:rX,101:rJ,102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:rX,105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:rY,111:[0,.44444,0,0,.5],112:rG,113:rG,114:[0,.44444,.01389,0,.34167],115:rZ,116:[0,.57143,0,0,.36111],117:rY,118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:Z,168:[0,.67937,0,0,.5],176:rV,184:rA,305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:ix,711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:ix,715:ix,728:ix,729:[0,.67937,0,0,.27778],730:rV,732:[0,.67659,0,0,.5],733:ix,915:rH,916:rQ,920:ih,923:iU,926:rV,928:rW,931:iT,933:ih,934:iT,936:ih,937:iT,8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:ic,8217:ic,8220:ix,8221:ix},"Script-Regular":{32:Z,65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:Z},"Size1-Regular":{32:Z,40:r0,41:r0,47:r1,91:r4,92:r1,93:r4,123:r2,125:r2,160:Z,710:r3,732:r3,770:r3,771:r3,8214:[-.00099,.601,0,0,.77778],8593:r6,8595:r6,8657:r8,8659:r8,8719:r5,8720:r5,8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:r9,8748:r7,8749:r7,8750:r9,8896:ae,8897:ae,8898:ae,8899:ae,8968:ai,8969:ai,8970:ai,8971:ai,9168:aT,10216:ai,10217:ai,10752:ar,10753:ar,10754:ar,10756:ae,10758:ae},"Size2-Regular":{32:Z,40:ao,41:ao,47:an,91:as,92:an,93:as,123:ac,125:ac,160:Z,710:ad,732:ad,770:ad,771:ad,8719:au,8720:au,8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:ap,8748:ah,8749:ah,8750:ap,8896:af,8897:af,8898:af,8899:af,8968:ay,8969:ay,8970:ay,8971:ay,10216:ag,10217:ag,10752:ab,10753:ab,10754:ab,10756:af,10758:af},"Size3-Regular":{32:Z,40:av,41:av,47:ax,91:ak,92:ax,93:ak,123:aw,125:aw,160:Z,710:a_,732:a_,770:a_,771:a_,8730:[.95003,1.45,0,0,1],8968:aS,8969:aS,8970:aS,8971:aS,10216:aw,10217:aw},"Size4-Regular":{32:Z,40:aM,41:aM,47:aL,91:aC,92:aL,93:aC,123:az,125:az,160:Z,710:aA,732:aA,770:aA,771:aA,8730:[1.25003,1.75,0,0,1],8968:aD,8969:aD,8970:aD,8971:aD,9115:aK,9116:aE,9117:aK,9118:aK,9119:aE,9120:aK,9121:aB,9122:aT,9123:aB,9124:aB,9125:aT,9126:aB,9127:a$,9128:aP,9129:aO,9130:[0,.3,0,0,.88889],9131:a$,9132:aP,9133:aO,9143:[.88502,.915,0,0,1.05556],10216:az,10217:az,57344:aN,57345:aN,57680:aq,57681:aq,57682:aq,57683:aq},"Typewriter-Regular":{32:aW,33:aF,34:aF,35:aF,36:aR,37:aR,38:aF,39:aF,40:aR,41:aR,42:[0,.52083,0,0,.525],43:aI,44:[.13889,.125,0,0,.525],45:aI,46:[0,.125,0,0,.525],47:aR,48:aF,49:aF,50:aF,51:aF,52:aF,53:aF,54:aF,55:aF,56:aF,57:aF,58:aj,59:[.13889,.43056,0,0,.525],60:aV,61:[-.19549,.41562,0,0,.525],62:aV,63:aF,64:aF,65:aF,66:aF,67:aF,68:aF,69:aF,70:aF,71:aF,72:aF,73:aF,74:aF,75:aF,76:aF,77:aF,78:aF,79:aF,80:aF,81:[.13889,.61111,0,0,.525],82:aF,83:aF,84:aF,85:aF,86:aF,87:aF,88:aF,89:aF,90:aF,91:aR,92:aR,93:aR,94:aF,95:[.09514,0,0,0,.525],96:aF,97:aj,98:aF,99:aj,100:aF,101:aj,102:aF,103:aH,104:aF,105:aF,106:[.22222,.61111,0,0,.525],107:aF,108:aF,109:aj,110:aj,111:aj,112:aH,113:aH,114:aj,115:aj,116:[0,.55358,0,0,.525],117:aj,118:aj,119:aj,120:aj,121:aH,122:aj,123:aR,124:aR,125:aR,126:aF,127:aF,160:aW,176:aF,184:[.19445,0,0,0,.525],305:aj,567:aH,711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:aF,715:aF,728:aF,730:aF,770:aF,771:aF,776:aF,915:aF,916:aF,920:aF,923:aF,926:aF,928:aF,931:aF,933:aF,934:aF,936:aF,937:aF,8216:aF,8217:aF,8242:aF,9251:[.11111,.21944,0,0,.525]}},aX=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,aJ={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.5,.732,.925],num2:[.394,.384,.5],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},aG=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],aZ={"\xa0":" ","​":" ",Å:"A",Ç:"C",Ð:"D",Þ:"o",å:"a",ç:"c",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function Tt(t,r){void 0===t&&(t=77);let a=aU[r][t];if(a)return{defaultMetrics:!1,depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]};if(11034===t)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0,width:.8};let n=String.fromCodePoint(t);if(n in aZ)t=aZ[n].codePointAt(0);else if(aX.test(n))return t=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0,width:1};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0,width:.8}}var aY,aQ,a0={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],longrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],longleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],longleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],longrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],longleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],longleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],longRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716],longLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},a1={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},a4={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:`m 529 160
  c -179 0 -524 -115 -524 -115
  c -5 -1 -9 -5 -9 -10
  c 0 -1 1 -2 1 -3
  l 4 -22
  c 1 -5 5 -9 11 -9
  h 2
  s 338 93 512 92
  c 174 0 513 -92 513 -92
  h 2
  c 5 0 9 4 11 9
  l 5 22
  c 1 6 -2 12 -8 13
  c 0 0 -342 115 -520 115
  z
  `,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,widetilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,widetilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,widetilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,widetilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},a2=[[8205,1],[65038,2],[127995,5],[129456,4],[917536,96]];function Kd(t){var r;if(void 0===aQ)for(let t of(aQ={},a2))for(let r=t[0];r<=t[0]+t[1]-1;r++)aQ[r]=!0;return null!=(r=aQ[t])&&r}function qn(t){if(/^[\u0020-\u00FF]*$/.test(t))return t;let r=[],a=function(t){let r=[];for(let a=0;a<t.length;a++){let n=t.charCodeAt(a);if(13===n&&10===t.charCodeAt(a+1)&&(n=10,a++),(13===n||12===n)&&(n=10),0===n&&(n=65533),n>=55296&&n<=56319){let r=t.charCodeAt(a+1);r>=56320&&r<=57343&&(n=65536+1024*(n-55296)+(r-56320),a++)}r.push(n)}return r}(t),n=0;for(;n<a.length;){let t=a[n++],s=a[n];if(8205===s){let t=n-1;for(n+=2;8205===a[n];)n+=2;r.push(String.fromCodePoint(...a.slice(t,n-t+1)))}else if(Kd(s)){let t=n-1;for(;Kd(a[n]);)n+=8205===a[n]?2:1;r.push(String.fromCodePoint(...a.slice(t,2*n-t-1)))}else t>=127462&&t<=127487?(n+=1,r.push(String.fromCodePoint(...a.slice(n-2,2)))):r.push(String.fromCodePoint(t))}return r}var a3=class{constructor(t){this.s=qn(t),this.pos=0,this.obeyspaces=!1}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(t){let r="string"==typeof this.s?t.exec(this.s.slice(this.pos)):t.exec(this.s.slice(this.pos).join(""));return null!=r&&r[0]?(this.pos+=r[0].length,r[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let t=this.get();if("\\"===t){if(!this.end()){let t=this.match(/^[a-zA-Z\*]+/);return t?this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/):t=this.get(),"\\"+t}}else{if("{"===t)return"<{>";if("}"===t)return"<}>";if("^"===t){if("^"===this.peek()){this.get();let t=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(t)return String.fromCodePoint(Number.parseInt(t.slice(t.lastIndexOf("^")+1),16))}}else if("#"===t){if(!this.end()){let t=!1;if(/[\d?@]/.test(this.peek())&&(t=!0,this.pos+1<this.s.length)){let r=this.s[this.pos+1];t=/[^\dA-Za-z]/.test(r)}return t?"#"+this.get():"#"}}else if("$"===t)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return t}};function mo(t,r=null){let a=[],n="";for(let r of t.toString().split(/\r?\n/)){n&&a.push(n),n=" ";let t=r.match(/((?:\\%)|[^%])*/);null!==t&&a.push(t[0])}let s=new a3(a.join("")),l=[];do l.push(...function(t,r){var a,n,s,l;let c=[],d=t.next();if(d&&"\\relax"!==d){if("\\noexpand"===d)(d=t.next())&&c.push(d);else if("\\obeyspaces"===d)t.obeyspaces=!0;else if("\\bgroup"===d)c.push("<{>");else if("\\egroup"===d)c.push("<}>");else if("\\string"===d){if(d=t.next()){if(d.startsWith("\\"))for(let t of d)c.push("\\"===t?"\\backslash":t);else"<{>"===d?c.push("\\{"):"<space>"===d?c.push("~"):"<}>"===d&&c.push("\\}")}}else if("\\csname"===d){for(;"<space>"===t.peek();)t.next();let s="",l=!1,h=[];do{if(0===h.length){if(/^#[\d?@]$/.test(t.peek())){let s=t.get().slice(1);d=(h=mo(null!=(n=null!=(a=null==r?void 0:r(s))?a:null==r?void 0:r("?"))?n:"\\placeholder{}",r))[0]}else h=(d=t.next())?[d]:[]}(l=0===h.length)||"\\endcsname"!==d||(l=!0,h.shift()),l||(l="<$>"===d||"<$$>"===d||"<{>"===d||"<}>"===d||"string"==typeof d&&d.length>1&&d.startsWith("\\")),l||(s+=h.shift())}while(!l);s&&c.push("\\"+s),c.push(...h)}else if("\\endcsname"!==d){if(d.length>1&&d.startsWith("#")){let t=d.slice(1);c.push(...mo(null!=(l=null!=(s=null==r?void 0:r(t))?s:null==r?void 0:r("?"))?l:"\\placeholder{}",r))}else c.push(d)}}return c}(s,r));while(!s.end());return l}function D(t){let r="",a=[];for(let n of t)n&&(r&&/^[a-zA-Z\*]/.test(n)&&a.push(r),a.push(n),/^\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(n)&&a.push(" "),r=/\\[a-zA-Z]+\*?$/.test(n)?" ":"");return a.join("")}function O(t,...r){return t.startsWith("\\"),0===r.length?t:D([t,...r.map(t=>`{${t}}`)])}function ui(t){return D(t.map(t=>{var r;return null!=(r=({"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"})[t])?r:t}))}var a6=class Sr{constructor(t){Sr._registry[t]=this}static createAtom(t,r,a){return Sr._registry[t].createAtom(r,ee(r,t),a)}static serialize(t,r){var a;if(!t||0===t.length)return"";if(null!=(a=r.skipStyles)&&a){let a=[];for(let n of zd(t)){let t=Sr._registry[n[0].mode];a.push(...t.serialize(n,r))}return D(a)}return D(function(t,r){if(0===t.length)return[];let{parent:a}=t[0],n=null==a?void 0:a.computedStyle.fontSize,s=[];for(let l of ht(t,"fontSize")){let t=l[0].computedStyle.fontSize,c=function(t,r){let{parent:a}=t[0],n=null==a?void 0:a.computedStyle.backgroundColor;return ht(t,"backgroundColor").map(t=>{var s;if(t.length>0||"box"!==t[0].type){let l=t[0].computedStyle;if(l.backgroundColor&&"none"!==l.backgroundColor&&(!a||n!==l.backgroundColor))return O("\\colorbox",null!=(s=l.verbatimBackgroundColor)?s:l.backgroundColor,D(Od(t,g(m({},r),{defaultMode:"text"}))))}return D(Od(t,r))})}(l,r);c&&(t&&"auto"!==t&&(!a||n!==t)?s.push(["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][t],...c):s.push(...c))}return s}(t,r))}static getFont(t,r,a){return Sr._registry[t].getFont(r,a)}};a6._registry={};var a8=a6;function zd(t){let r=[],a=[],n="NONE";for(let s of t)"first"!==s.type&&(s.mode!==n?(a.length>0&&r.push(a),a=[s],n=s.mode):a.push(s));return a.length>0&&r.push(a),r}function ht(t,r){let a=[],n=[],s;for(let l of t)if("first"!==l.type&&l.style){let t;"variant"===r?(t=l.style.variant,l.style.variantStyle&&"up"!==l.style.variantStyle&&(t+="-"+l.style.variantStyle)):t=l.style[r],t===s?n.push(l):(n.length>0&&a.push(n),n=[l],s=t)}return n.length>0&&a.push(n),a}function Od(t,r){var a;let{parent:n}=t[0],s=null==n?void 0:n.computedStyle.color,l=[];for(let c of zd(t)){let t=r.defaultMode;for(let d of ht(c,"color")){let c=d[0].computedStyle,h=a8._registry[d[0].mode].serialize(d,g(m({},r),{defaultMode:"text"===t?"text":"math"}));r.skipStyles||!c.color||"none"===c.color||n&&s===c.color?l.push(D(h)):l.push(O("\\textcolor",null!=(a=c.verbatimColor)?a:c.color,D(h)))}}return l}function jn(t){return t?({mord:"ord",mbin:"bin",mop:"op",mrel:"rel",mopen:"open",mclose:"close",mpunct:"punct",minner:"inner",spacing:"ignore",latex:"latex",composition:"inner",error:"inner",placeholder:"ord",supsub:"ignore"})[t]:void 0}function _r(t){if(0===t.length)return"ord";let r=jn(t[0].type),a=jn(t[t.length-1].type);return r&&r===a?r:"ord"}function Hn(t,r){if("string"==typeof t)return t;if("number"==typeof t){Number.isFinite(t);let a=Math.ceil(100*t)/100;return 0===a?"0":a.toString()+(null!=r?r:"")}return""}var a5=class e{constructor(t,r){var a,n,s,l,c,d;if("number"==typeof t?this.value=String.fromCodePoint(t):"string"==typeof t?this.value=t:Q(t)?this.children=t.filter(t=>null!==t):t&&t instanceof e&&(this.children=[t]),this.children)for(let t of this.children)t.parent=this;if(this.type=null!=(a=null==r?void 0:r.type)?a:"ignore",this.isSelected=(null==r?void 0:r.isSelected)===!0,null!=r&&r.caret&&(this.caret=r.caret),this.classes=null!=(n=null==r?void 0:r.classes)?n:"",this.isTight=null!=(s=null==r?void 0:r.isTight)&&s,null!=r&&r.properties)for(let t of Object.keys(r.properties))this.setStyle(t,r.properties[t]);null!=r&&r.attributes&&(this.attributes=r.attributes);let h=null==r?void 0:r.fontFamily;if(null!=r&&r.style&&this.value&&(h=null!=(c=a8.getFont(null!=(l=r.mode)?l:"math",this,g(m({variant:"normal"},r.style),{letterShapeStyle:r.letterShapeStyle})))?c:void 0),h||(h="Main-Regular"),this.height=0,this.depth=0,this._width=0,this.hasExplicitWidth=!1,this.skew=0,this.italic=0,this.maxFontSize=0,this.scale=1,"latex"===this.type)this.height=.8,this.depth=.2,this._width=1;else if("number"==typeof t){let r=Tt(t,h);this.height=r.height,this.depth=r.depth,this._width=r.width,this.skew=r.skew,this.italic=r.italic}else if(this.value){this.height=-1/0,this.depth=-1/0,this._width=0,this.skew=-1/0,this.italic=-1/0;for(let t=0;t<this.value.length;t++){let r=Tt(this.value.codePointAt(t),h);this.height=Math.max(this.height,r.height),this.depth=Math.max(this.depth,r.depth),this._width+=r.width,this.skew=r.skew,this.italic=r.italic}}else if(this.children&&this.children.length>0){if(1===this.children.length){let t=this.children[0];this.height=t.height,this.depth=t.depth,this._width=t.width,this.maxFontSize=t.maxFontSize,this.skew=t.skew,this.italic=t.italic}else{let t=-1/0,r=-1/0,a=0,n=0;for(let s of this.children)s.height>t&&(t=s.height),s.depth>r&&(r=s.depth),n=Math.max(n,null!=(d=s.maxFontSize)?d:0),a+=s.width;this.height=t,this.depth=r,this._width=a,this.maxFontSize=n}}(null==r?void 0:r.height)!==void 0&&(this.height=r.height),(null==r?void 0:r.depth)!==void 0&&(this.depth=r.depth),(null==r?void 0:r.width)!==void 0&&(this.width=r.width),(null==r?void 0:r.maxFontSize)!==void 0&&(this.maxFontSize=r.maxFontSize)}set atomID(t){void 0===t||0===t.length||(this.id=t)}selected(t){if(this.isSelected!==t&&(this.isSelected=t,this.children))for(let r of this.children)r.selected(t)}setStyle(t,r,a){if(void 0===r)return;let n=Hn(r,a);n.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[t]=n)}setTop(t){Number.isFinite(t)&&Math.abs(t)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=Hn(t,"em"),this.height-=t,this.depth+=t)}get left(){var t;return null!=(t=this.cssProperties)&&t["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(t){Number.isFinite(t)&&(0===t?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=Hn(t,"em")))}set right(t){Number.isFinite(t)&&(0===t?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=Hn(t,"em")))}get width(){return this._width}set width(t){this._width=t,this.hasExplicitWidth=!0}wrap(t){let r=t.parent;if(!r)return this;t.isPhantom&&this.setStyle("opacity",0);let a=t.color;a&&a!==r.color&&this.setStyle("color",a);let n=t.backgroundColor;this.isSelected&&(n=function(t){let r=function(t){let r;if(t&&"#"===t[0])return(t=t.slice(1)).length<=4?(r={r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)},4===t.length&&(r.a=parseInt(t[3]+t[3],16)/255)):(r={r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)},8===t.length&&(r.a=parseInt(t[6]+t[7],16)/255)),r&&void 0===r.a&&(r.a=1),r}(t);if(!r)return t;let{h:a,s:n,l:s}=function(t){let{r:r,g:a,b:n}=t,s=Math.min(r/=255,a/=255,n/=255),l=Math.max(r,a,n),c=l-s,d;l===s?d=0:r===l?d=(a-n)/c:a===l?d=2+(n-r)/c:n===l&&(d=4+(r-a)/c),(d=Math.min(60*d,360))<0&&(d+=360);let h=(s+l)/2;return{h:d,s:l===s?0:h<=.5?c/(l+s):c/(2-l-s),l:h}}(r);return function(t){let{r:r,g:a,b:n}=t,s=(16777216+(Ra(r)<<16)+(Ra(a)<<8)+Ra(n)).toString(16).slice(1);return s[0]===s[1]&&s[2]===s[3]&&s[4]===s[5]&&s[6]===s[7]&&(s=s[0]+s[2]+s[4]),"#"+s}(function(t){let[r,a,n]=[t.h,t.s,t.l];r=(r+360)%360/60,n=Math.max(0,Math.min(n,1)),a=Math.max(0,Math.min(a,1));let s=n<=.5?n*(a+1):n+a-n*a,l=2*n-s;return{r:Math.round(255*za(l,s,r+2)),g:Math.round(255*za(l,s,r)),b:Math.round(255*za(l,s,r-2))}}({h:a,s:n+=.1,l:s-=.1}))}(n)),n&&n!==r.backgroundColor&&(this.setStyle("background-color",n),this.setStyle("display","inline-block")),this.scale;let s=t.scalingFactor;return this.scale=s,this.height*=s,this.depth*=s,this._width*=s,this.skew*=s,this.italic*=s,this}toMarkup(){var t,r,a,n;let s=null!=(t=this.value)?t:"";if(this.children)for(let t of this.children)s+=t.toMarkup();let l="";if(this.svgBody)l=function(t){if(a1[t]){let[r,a,n]=a1[t],s=`<span class="stretchy" style="height:${n}em"><svg width="100%" height="${n}em" viewBox="0 0 ${r} ${a}" preserveAspectRatio="none" ><path fill="currentcolor" d="${a4[t]}"></path></svg></span>`;return`<span style="display:inline-block;height:${n/2}em;min-width:0">${s}</span>`}let[r,a,n,s]=a0[t],l,c,d=n/1e3;3===r.length?(l=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],c=["xMinYMin","xMidYMin","xMaxYMin"]):2===r.length?(l=["slice-1-of-2","slice-2-of-2"],c=["xMinYMin","xMaxYMin"]):(l=["slice-1-of-1"],c=[s]);let h=r.map((t,r)=>`<span class="${l[r]}" style=height:${d}em><svg width=400em height=${d}em viewBox="0 0 400000 ${n}" preserveAspectRatio="${c[r]} slice"><path fill="currentcolor" d="${a4[t]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${d}em;min-width:${a}em;">${h}</span>`}(this.svgBody);else if(this.svgOverlay){l=`<span style="display: inline-block;height:${this.height+this.depth}em;vertical-align:${this.depth}em;">`+s+'</span><svg style="position:absolute;overflow:overlay;'+`height:${this.height+this.depth}em;`;let t=null==(r=this.cssProperties)?void 0:r.padding;t?l+=`top:${t};left:${t};width:calc(100% - 2 * ${t} );`:l+="top:0;left:0;width:100%;",l+='z-index:2;"',this.svgStyle&&(l+=` style="${this.svgStyle}"`),l+=`>${this.svgOverlay}</svg>`}let c="",d=this.classes.split(" ");d.push(null!=(a=({latex:"ML__latex",placeholder:"ML__placeholder",error:"ML__error"})[this.type])?a:""),"latex"===this.caret&&d.push("ML__latex-caret"),this.isSelected&&d.push("ML__selected");let h=1===d.length?d[0]:d.filter((t,r,a)=>t.length>0&&a.indexOf(t)===r).join(" ");if(h.length>0&&(c+=` class="${h}"`),this.id&&(c+=` data-atom-id=${this.id}`),this.cssId&&(c+=` id="${this.cssId.replace(/ /g,"-")}" `),this.attributes&&(c+=" "+Object.keys(this.attributes).map(t=>`${t}="${this.attributes[t]}"`).join(" ")),this.htmlData)for(let t of this.htmlData.split(",")){let r=t.match(/([^=]+)=(.+$)/);if(r){let t=r[1].trim().replace(/ /g,"-");t&&(c+=` data-${t}="${r[2]}" `)}else{let r=t.trim().replace(/ /g,"-");r&&(c+=` data-${r} `)}}let p=null!=(n=this.cssProperties)?n:{};this.hasExplicitWidth&&(p.width,p.width=`${Math.round(100*this._width)/100}em`);let y=Object.keys(p).map(t=>`${t}:${p[t]}`);if(void 0!==this.scale&&1!==this.scale&&(s.length>0||l.length>0)&&y.push(`font-size: ${Math.round(1e4*this.scale)/100}%`),this.htmlStyle){let t=this.htmlStyle.split(";"),r="";for(let a of t){let t=a.match(/([^=]+):(.+$)/);if(t){let a=t[1].trim().replace(/ /g,"-");a&&(r+=`${a}:${t[2]};`)}}r&&(c+=` style="${r}"`)}y.length>0&&(c+=` style="${y.join(";")}"`);let v="";return v=c.length>0||l.length>0?`<span${c}>${s}${l}</span>`:s,"text"===this.caret?v+='<span class="ML__text-caret"></span>':"math"===this.caret&&(v+='<span class="ML__caret"></span>'),v}tryCoalesceWith(t){if(this.svgBody||!this.value||t.svgBody||!t.value)return!1;let r=this.children&&this.children.length>0,a=t.children&&t.children.length>0;if(r||a)return!1;if(t.cssProperties||this.cssProperties){for(let r of["border","border-left","border-right","border-right-width","left","margin","margin-left","margin-right","padding","position","width"])if(t.cssProperties&&r in t.cssProperties||this.cssProperties&&r in this.cssProperties)return!1}let n=this.cssProperties?Object.keys(this.cssProperties).length:0;if(n!==(t.cssProperties?Object.keys(t.cssProperties).length:0))return!1;if(n>0){for(let r of Object.keys(this.cssProperties))if(this.cssProperties[r]!==t.cssProperties[r])return!1}let s=this.classes.trim().replace(/\s+/g," ").split(" "),l=t.classes.trim().replace(/\s+/g," ").split(" ");if(s.length!==l.length)return!1;for(let[t,r]of(s.sort(),l.sort(),s.entries()))if("vertical-separator"===r||r!==l[t])return!1;return this.value+=t.value,this.height=Math.max(this.height,t.height),this.depth=Math.max(this.depth,t.depth),this._width=this._width+t._width,this.maxFontSize=Math.max(this.maxFontSize,t.maxFontSize),this.italic=t.italic,!0}};function tr(t){return t.children&&(t.children=function Cs(t){if(!t||0===t.length)return[];t[0].children=Cs(t[0].children);let r=[t[0]];for(let a=1;a<t.length;a++)r[r.length-1].tryCoalesceWith(t[a])||(t[a].children=Cs(t[a].children),r.push(t[a]));return r}(t.children)),t}function rr(t,r){if(!t)return new a5(null,r);let a=new a5(null,{classes:"ML__strut",type:"ignore"});a.setStyle("height",Math.max(0,t.height),"em");let n=[a];if(0!==t.depth){let r=new a5(null,{classes:"ML__strut--bottom",type:"ignore"});r.setStyle("height",t.height+t.depth,"em"),r.setStyle("vertical-align",-t.depth,"em"),n.push(r)}return n.push(t),new a5(n,g(m({},r),{type:"lift"}))}function Wn(t,r,a){return t.svgOverlay=r,t.svgStyle=a,t}function di(t){let r=(a0[t]?a0[t][2]/1e3:a1[t][2])/2,a=new a5(null,{height:r+.166,depth:r-.166,maxFontSize:0});return a.svgBody=t,a}var a7=class extends a5{constructor(t,r){var a;let[n,s,l]=function(t){var r;let[a,n]=function(t){if("individualShift"in t){let r=t.individualShift,a=r[0],n=[a],s=-a.shift-a.box.depth,l=s;for(let t=1;t<r.length;t++){let s=r[t],c=-s.shift-l-s.box.depth,d=c-(a.box.height+a.box.depth);l+=c,n.push(d),n.push(s),a=s}return[n,s]}if("top"in t){let r=t.top;for(let a of t.children)r-="number"==typeof a?a:a.box.height+a.box.depth;return[t.children,r]}if("bottom"in t)return[t.children,-t.bottom];if("firstBaseline"in t){let r=t.firstBaseline[0];if("number"==typeof r)throw Error("First child must be an element.");return[t.firstBaseline,-r.box.depth]}if("shift"in t){let r=t.children[0];if("number"==typeof r)throw Error("First child must be an element.");return[t.children,-r.box.depth-t.shift]}return[null,0]}(t);if(!a)return[[],0,0];let s=0;for(let t of a)if("number"!=typeof t){let r=t.box;s=Math.max(s,r.maxFontSize,r.height)}s+=2;let l=new a5(null,{classes:"pstrut",height:s});l.setStyle("height",s,"em");let c=[],d=n,h=n,p=n;for(let t of a){if("number"==typeof t)p+=t;else{let a=t.box,n=null!=(r=t.classes)?r:[],d=new a5([l,a],{classes:n.join(" "),style:t.style});a.setStyle("height",a.height+a.depth,"em"),a.setStyle("display","inline-block"),d.setStyle("top",-s-p-a.depth,"em"),t.marginLeft&&d.setStyle("margin-left",t.marginLeft,"em"),t.marginRight&&d.setStyle("margin-right",t.marginRight,"em"),c.push(d),p+=a.height+a.depth}d=Math.min(d,p),h=Math.max(h,p)}let y=new a5(c,{classes:"vlist"});if(y.setStyle("height",h,"em"),d>=0)return[[new a5(y,{classes:"vlist-r"})],h,-d];let v=new a5(new a5(null),{classes:"vlist"});v.setStyle("height",-d,"em");let k=new a5(8203,{classes:"vlist-s",maxFontSize:0,height:0,depth:0});return[[new a5([y,k],{classes:"vlist-r"}),new a5(v,{classes:"vlist-r"})],h,-d]}(t);super(1===n.length?n[0]:n,{classes:(null!=(a=null==r?void 0:r.classes)?a:"")+" vlist-t"+(2===n.length?" vlist-t2":""),height:s,depth:l,type:null==r?void 0:r.type})}},a9=class{constructor(t,r,a){this.id=t,this.sizeDelta=r,this.cramped=a;let n={"-4":2,"-3":1,0:0}[r];this.metrics=Object.keys(aJ).reduce((t,r)=>g(m({},t),{[r]:aJ[r][n]}),{})}getFontSize(t){return Math.max(1,t+this.sizeDelta)}get sup(){return oi[[0,1,0,1,2,3,2,3][this.id]]}get sub(){return oi[[0,0,0,0,2,2,2,2][this.id]]}get fracNum(){return oi[[0,1,0,1,2,3,4,5][this.id]]}get fracDen(){return oi[[0,0,0,0,2,2,4,4][this.id]]}get cramp(){return oi[[0,0,2,2,4,4,6,6][this.id]]}get isTight(){return this.sizeDelta<0}},ot={7:new a9(7,0,!1),6:new a9(6,0,!0),5:new a9(5,0,!1),4:new a9(4,0,!0),3:new a9(3,-3,!1),2:new a9(2,-3,!0),1:new a9(1,-4,!1),0:new a9(0,-4,!0)},oi=g(m({},ot),{displaystyle:ot[7],textstyle:ot[5],scriptstyle:ot[3],scriptscriptstyle:ot[1]});function Ts(t,r){var a;if(!t)return 0;let n={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:10,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[null!=(a=t.unit)?a:"pt"];if(Number.isFinite(r)){let a=10**r;return Math.round(t.dimension/10*n*a)/a}return t.dimension*n}function Jn(t,r){if(null===t)return 0;let a=Ts(t)/10;if(Number.isFinite(r)){let t=10**r;return Math.round(a*t)/t}return a}function Es(t){var r;return`${t.dimension}${null!=(r=t.unit)?r:"pt"}`}function le(t){var r,a;let n;if(null==t)return null;let s="";if("dimension"in t&&(s=`${t.dimension}${null!=(r=t.unit)?r:"pt"}`),"glue"in t&&(n=Es(t.glue),t.grow&&0!==t.grow.dimension&&(n+=` plus ${Es(t.grow)}`),t.shrink&&0!==t.shrink.dimension&&(n+=` minus ${Es(t.shrink)}`),s=n),"number"in t){if("base"in t&&"decimal"!==t.base){if("alpha"===t.base)s=`\`${String.fromCodePoint(t.number)}`;else{let r=Math.round(t.number)>>>0;"hexadecimal"===t.base?(s=Number(r).toString(16).toUpperCase(),s=r<=255?s.padStart(2,"0"):r<=65535?s.padStart(4,"0"):r<=16777215?s.padStart(6,"0"):s.padStart(8,"0"),s=`"${s}`):"octal"===t.base&&(s=Number(r).toString(8),s=r<=63?s.padStart(2,"0"):r<=30583?s.padStart(4,"0"):s.padStart(8,"0"),s=`'${s}`)}}else s=Number(t.number).toString()}return"register"in t&&("factor"in t&&(-1===t.factor?s="-":1!==t.factor&&(s=Number(t.factor).toString())),"global"in t&&t.global&&(s+="\\global"),s+=`\\${t.register}`),"string"in t&&(s=t.string),null!=(a=t.relax)&&a&&(s+="\\relax"),s}function Xe(t,r){return null==t?null:"number"in t?g(m({},t),{number:t.number*r}):"register"in t?"factor"in t&&t.factor?g(m({},t),{factor:t.factor*r}):g(m({},t),{factor:r}):"dimension"in t?g(m({},t),{dimension:t.dimension*r}):"glue"in t?t.shrink&&t.grow?{glue:Xe(t.glue,r),shrink:Xe(t.shrink,r),grow:Xe(t.grow,r)}:t.shrink?{glue:Xe(t.glue,r),shrink:Xe(t.shrink,r)}:t.grow?{glue:Xe(t.glue,r),grow:Xe(t.grow,r)}:{glue:Xe(t.glue,r)}:null}var or={"p@":{dimension:1},"z@":{dimension:0},maxdimen:{dimension:16383.99999},hfuzz:{dimension:.1},vfuzz:{dimension:.1},overfullrule:{dimension:5},hsize:{dimension:6.5,unit:"in"},vsize:{dimension:8.9,unit:"in"},parindent:{dimension:20},maxdepth:{dimension:4},splitmaxdepth:{register:"maxdimen"},boxmaxdepth:{register:"maxdimen"},delimitershortfall:{dimension:5},nulldelimiterspace:{dimension:1.2,unit:"pt"},scriptspace:{dimension:.5},topskip:{dimension:10},splittopskip:{dimension:10},normalbaselineskip:{dimension:12},normallineskip:{dimension:1},normallineskiplimit:{dimension:0},jot:{dimension:3},doublerulesep:{dimension:2},arrayrulewidth:{dimension:.4},arraycolsep:{dimension:5},fboxsep:{dimension:3},fboxrule:{dimension:.4},"z@skip":{glue:{dimension:0},shrink:{dimension:0},grow:{dimension:0}},hideskip:{glue:{dimension:-1e3},grow:{dimension:1,unit:"fill"}},"@flushglue":{glue:{dimension:0},grow:{dimension:1,unit:"fill"}},parskip:{glue:{dimension:0},grow:{dimension:1}},abovedisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},abovedisplayshortskip:{glue:{dimension:0},grow:{dimension:3}},belowdisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},belowdisplayshortskip:{glue:{dimension:7},grow:{dimension:3},shrink:{dimension:4}},parfillskip:{glue:{dimension:0},grow:{dimension:1,unit:"fil"}},thinmuskip:{glue:{dimension:3,unit:"mu"}},medmuskip:{glue:{dimension:4,unit:"mu"},grow:{dimension:2,unit:"mu"},shrink:{dimension:4,unit:"mu"}},thickmuskip:{glue:{dimension:5,unit:"mu"},grow:{dimension:5,unit:"mu"}},smallskipamount:{glue:{dimension:3},grow:{dimension:1},shrink:{dimension:1}},medskipamount:{glue:{dimension:6},grow:{dimension:2},shrink:{dimension:3}},bigskipamount:{glue:{dimension:12},grow:{dimension:2},shrink:{dimension:4}},pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:1,month:new Date().getMonth()+1,day:new Date().getDate(),year:new Date().getFullYear()},oa=class e{constructor(t,r){var a,n,s,l,c,d,h,y,v,k,w,_,S,M,C;let z;null!=t&&t.parent?(this.parent=t.parent,z=t.parent,this.registers={}):(z=m(m({},{registers:m({},or),smartFence:!1,renderPlaceholder:void 0,placeholderSymbol:"▢",letterShapeStyle:p.locale.startsWith("fr")?"french":"tex",minFontScale:0,colorMap:yr,backgroundColorMap:Gr,getMacro:t=>Yo(t,Zr())}),null!=(a=null==t?void 0:t.from)?a:{}),this.registers=z.registers),z.atomIdsSettings&&(this.atomIdsSettings=m({},z.atomIdsSettings)),this.renderPlaceholder=z.renderPlaceholder,this.isPhantom=null!=(l=null!=(s=null==t?void 0:t.isPhantom)?s:null==(n=this.parent)?void 0:n.isPhantom)&&l,this.letterShapeStyle=z.letterShapeStyle,this.minFontScale=z.minFontScale,null!=r&&r.color&&"none"!==r.color?this.color=r.color:this.color=null!=(d=null==(c=this.parent)?void 0:c.color)?d:"",null!=r&&r.backgroundColor&&"none"!==r.backgroundColor?this.backgroundColor=r.backgroundColor:this.backgroundColor=null!=(y=null==(h=this.parent)?void 0:h.backgroundColor)?y:"",null!=r&&r.fontSize&&"auto"!==r.fontSize&&r.fontSize!==(null==(v=this.parent)?void 0:v.size)?this.size=r.fontSize:this.size=null!=(w=null==(k=this.parent)?void 0:k.size)?w:5;let A=null!=(S=null==(_=this.parent)?void 0:_.mathstyle)?S:oi.displaystyle;if("string"==typeof(null==t?void 0:t.mathstyle)){if(z instanceof e)switch(t.mathstyle){case"cramp":A=A.cramp;break;case"superscript":A=A.sup;break;case"subscript":A=A.sub;break;case"numerator":A=A.fracNum;break;case"denominator":A=A.fracDen}switch(t.mathstyle){case"textstyle":A=oi.textstyle;break;case"displaystyle":A=oi.displaystyle;break;case"scriptstyle":A=oi.scriptstyle;break;case"scriptscriptstyle":A=oi.scriptscriptstyle}}this.mathstyle=A,this.smartFence=z.smartFence,this.placeholderSymbol=z.placeholderSymbol,this.colorMap=null!=(M=z.colorMap)?M:t=>t,this.backgroundColorMap=null!=(C=z.backgroundColorMap)?C:t=>t,this.getMacro=z.getMacro,void 0!==this.parent||this.registers}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if("number"!=typeof this.atomIdsSettings.seed)return`${Date.now().toString(36).slice(-2)}${Math.floor(1e5*Math.random()).toString(36)}`;let t=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,t}scale(t){return t*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return 7===this.mathstyle.id||6===this.mathstyle.id}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get metrics(){return this.mathstyle.metrics}get effectiveFontSize(){return Math.max(aG[Math.max(1,this.size+this.mathstyle.sizeDelta)],this.minFontScale)}getRegister(t){var r;return null!=(r=this.registers)&&r[t]?this.registers[t]:this.parent?this.parent.getRegister(t):void 0}getRegisterAsNumber(t){let r=this.getRegister(t);return"number"==typeof r?r:"string"==typeof r?Number(r):void 0}getRegisterAsGlue(t){var r;if(null!=(r=this.registers)&&r[t]){let r=this.registers[t];return"object"==typeof r&&"glue"in r?r:"object"==typeof r&&"dimension"in r?{glue:{dimension:r.dimension}}:"number"==typeof r?{glue:{dimension:r}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(t)}getRegisterAsEm(t,r){return Jn(this.getRegisterAsDimension(t),r)}getRegisterAsDimension(t){var r;if(null!=(r=this.registers)&&r[t]){let r=this.registers[t];return"object"==typeof r&&"glue"in r?r.glue:"object"==typeof r&&"dimension"in r?r:"number"==typeof r?{dimension:r}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(t)}setRegister(t,r){if(void 0===r){delete this.registers[t];return}this.registers[t]=r}evaluate(t){if(!t||!("register"in t))return t;let r=this;if("global"in t&&t.global)for(;r.parent;)r=r.parent;let a=1;"factor"in t&&1!==t.factor&&void 0!==t.factor&&(a=t.factor);let n=r.getRegister(t.register);if(void 0===n)return;if("string"==typeof n)return{string:Number(n).toString()+n};if("number"==typeof n)return{number:a*n};let s=r.evaluate(n);if(void 0!==s)return"string"in s?{string:Number(n).toString()+s.string}:"number"in s?{number:a*s.number}:"dimension"in s?g(m({},s),{dimension:a*s.dimension}):"glue"in s?g(m({},s),{glue:g(m({},s.glue),{dimension:a*s.glue.dimension}),shrink:s.shrink?g(m({},s.shrink),{dimension:a*s.shrink.dimension}):void 0,grow:s.grow?g(m({},s.grow),{dimension:a*s.grow.dimension}):void 0}):t}toDimension(t){let r=this.evaluate(t);return void 0===r?null:"dimension"in r?r:"glue"in r?r.glue:"number"in r?{dimension:r.number}:null}toEm(t,r){if(null===t)return 0;let a=this.toDimension(t);return null===a?0:Ts(a,r)/10}toNumber(t){if(null===t)return null;let r=this.evaluate(t);return void 0===r?null:"number"in r?r.number:"dimension"in r?r.dimension:"glue"in r?r.glue.dimension:"string"in r?Number(r.string):null}toColor(t){var r,a;if(null===t)return null;let n=this.evaluate(t);return void 0===n?null:"string"in n?null!=(a=null==(r=this.colorMap)?void 0:r.call(this,n.string))?a:n.string:null}toBackgroundColor(t){var r,a;if(null===t)return null;let n=this.evaluate(t);return void 0===n?null:"string"in n?null!=(a=null==(r=this.backgroundColorMap)?void 0:r.call(this,n.string))?a:n.string:null}},oo=["body","above","below","superscript","subscript"];function nr(t){return"string"==typeof t&&oo.includes(t)}function yo(t){return void 0!==t&&Array.isArray(t)&&2===t.length}var on=class e{constructor(t){var r,a,n,s,l,c,d,h,p;this.subsupPlacement=void 0,this.explicitSubsupPlacement=!1,this.type=t.type,"string"==typeof t.value&&(this.value=t.value),this.command=null!=(a=null!=(r=t.command)?r:this.value)?a:"",this.mode=null!=(n=t.mode)?n:"math",this.isFunction=null!=(s=t.isFunction)&&s,this.subsupPlacement=t.limits,this.style=null!=(l=m({},t.style))?l:{},this.displayContainsHighlight=null!=(c=t.displayContainsHighlight)&&c,this.captureSelection=null!=(d=t.captureSelection)&&d,this.skipBoundary=null!=(h=t.skipBoundary)&&h,this.verbatimLatex=null!=(p=t.verbatimLatex)?p:void 0,t.args&&(this.args=t.args),t.body&&(this.body=t.body),this._changeCounter=0}static createBox(t,r,a){var n;if(!r)return null;let s=function(t){let r,a=[],n=[];for(let s of t)if(r||s.style){let t=s.computedStyle;r&&t.color===r.color&&t.backgroundColor===r.backgroundColor&&t.fontSize===r.fontSize?n.push(s):(n.length>0&&a.push(n),n=[s],r=t)}else n.push(s);return n.length>0&&a.push(n),a}(r),l=[];for(let r of s){let a=r[0].style,n=function(t,r,a){var n,s,l,c,d;if(!r||0===r.length)return null;let h=new oa({parent:t},a.style),p=!(null!=(n=h.atomIdsSettings)&&n.groupNumbers),y=[];if(1===r.length){let t=r[0],a=t.render(h);a&&(p&&t.isSelected&&a.selected(!0),y=[a])}else{let t="",a=!0;for(let n of r){null!=(s=h.atomIdsSettings)&&s.groupNumbers&&t&&(a&&n.isDigit()||!a&&Ps(n))&&(h.atomIdsSettings.overrideID=t);let r=n.render(h);h.atomIdsSettings&&(h.atomIdsSettings.overrideID=void 0),r&&(null==(l=h.atomIdsSettings)||!l.groupNumbers||((n.isDigit()||Ps(n))&&(!t||a!==n.isDigit())&&(a=n.isDigit(),t=null!=(c=n.id)?c:""),!t||(n.isDigit()||Ps(n))&&n.hasEmptyBranch("superscript")&&n.hasEmptyBranch("subscript")||(t="")),p&&n.isSelected&&r.selected(!0),y.push(r))}}if(0===y.length)return null;let v=new a5(y,g(m({isTight:h.isTight},a),{type:null!=(d=a.type)?d:"lift"}));return v.isSelected=y.every(t=>t.isSelected),v.wrap(h)}(t,r,{style:{color:a.color,backgroundColor:a.backgroundColor,fontSize:a.fontSize}});n&&l.push(n)}if(0===l.length)return null;let c=(null!=(n=null==a?void 0:a.classes)?n:"").trim();return 1!==l.length||c||null!=a&&a.type?new a5(l,{classes:c,type:null==a?void 0:a.type}).wrap(t):l[0].wrap(t)}static serialize(t,r){return a8.serialize(t,r)}static commonAncestor(t,r){if(t===r||t.parent===r.parent)return t.parent;let a=new WeakSet,{parent:n}=t;for(;n;)a.add(n),n=n.parent;for(n=r.parent;n;){if(a.has(n))return n;n=n.parent}}static fromJson(t){return new e("string"==typeof t?{type:"mord",value:t,mode:"math"}:t)}get latexMode(){return"math"===this.mode?"math":"text"}toJson(){let t={};if(this.type&&(t.type=this.type),"math"!==this.mode&&(t.mode=this.mode),this.command&&this.command!==this.value&&(t.command=this.command),void 0!==this.value&&(t.value=this.value),this.style&&Object.keys(this.style).length>0&&(t.style=m({},this.style)),void 0!==this.verbatimLatex&&(t.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(t.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(t.explicitSubsupPlacement=!0),this.isFunction&&(t.isFunction=!0),this.displayContainsHighlight&&(t.displayContainsHighlight=!0),this.isExtensibleSymbol&&(t.isExtensibleSymbol=!0),this.skipBoundary&&(t.skipBoundary=!0),this.captureSelection&&(t.captureSelection=!0),this.args&&(t.args=this.args.map(t=>null===t?"<null>":Array.isArray(t)&&t[0]instanceof on?{atoms:t.map(t=>t.toJson())}:"object"==typeof t&&"group"in t?{group:t.group.map(t=>t.toJson())}:t)),this._branches)for(let r of Object.keys(this._branches))this._branches[r]&&(t[r]=this._branches[r].filter(t=>"first"!==t.type).map(t=>t.toJson()));return"mord"===t.type&&2===Object.keys(t).length&&"value"in t?t.value:t}get changeCounter(){return this.parent?this.parent.changeCounter:this._changeCounter}set isDirty(t){if(t){this.parent||this._changeCounter++,"verbatimLatex"in this&&(this.verbatimLatex=void 0),this._children=void 0;let{parent:t}=this;for(;t;)t.parent||t._changeCounter++,"verbatimLatex"in t&&(t.verbatimLatex=void 0),t._children=void 0,t=t.parent}}_serialize(t){var r;if(!(t.expandMacro||t.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let a=ee(this.command,this.mode);return null!=a&&a.serialize?a.serialize(this,t):this.body&&this.command?D([O(this.command,this.bodyToLatex(t)),this.supsubToLatex(t)]):this.body?D([this.bodyToLatex(t),this.supsubToLatex(t)]):this.value&&"​"!==this.value?null!=(r=this.command)?r:function(t,r){var a;let n;if("text"===t)return null!=(a=Xi(t,r.codePointAt(0)))?a:r;if(n=Xi(t,r.codePointAt(0)))return n;let s=function(t){var r;if((t<119808||t>120831)&&(t<8448||t>8527))return{char:String.fromCodePoint(t)};for(let a in M)if(M[a]===t){t=null!=(r=a.codePointAt(0))?r:0;break}for(let r of C)if(t>=r.start&&t<r.start+r.len)return{char:String.fromCodePoint(t-r.start+r.offset),variant:r.variant,style:r.style};return{char:String.fromCodePoint(t)}}(r.codePointAt(0));return s.style||s.variant?(n=s.char,s.variant&&(n="\\"+s.variant+"{"+n+"}"),"bold"===s.style?n="\\mathbf{"+n+"}":"italic"===s.style?n="\\mathit{"+n+"}":"bolditalic"===s.style&&(n="\\mathbfit{"+n+"}"),"\\mathord{"+n+"}"):""}(this.mode,this.value):""}bodyToLatex(t){var r;return a8.serialize(this.body,g(m({},t),{defaultMode:null!=(r=t.defaultMode)?r:this.latexMode}))}aboveToLatex(t){return a8.serialize(this.above,t)}belowToLatex(t){return a8.serialize(this.below,t)}supsubToLatex(t){let r="";if(t=g(m({},t),{defaultMode:"math"}),void 0!==this.branch("subscript")){let a=a8.serialize(this.subscript,t);0===a.length?r+="_{}":1===a.length&&/^[0-9]$/.test(a)?r+=`_${a}`:r+=`_{${a}}`}if(void 0!==this.branch("superscript")){let a=a8.serialize(this.superscript,t);0===a.length?r+="^{}":1===a.length?"′"===a?r+="^\\prime ":"″"===a?r+="^\\doubleprime ":/^[0-9]$/.test(a)?r+=`^${a}`:r+=`^{${a}}`:r+=`^{${a}}`}return r}get treeDepth(){let t=1,r=this.parent;for(;r;)r=r.parent,t+=1;return t}get inCaptureSelection(){let t=this;for(;t;){if(t.captureSelection)return!0;t=t.parent}return!1}get parentPrompt(){let t=this.parent;for(;t;){if("prompt"===t.type&&!t.captureSelection)return t;t=t.parent}return null}branch(t){if(nr(t)&&this._branches)return this._branches[t]}get branches(){if(!this._branches)return[];let t=[];for(let r of oo)this._branches[r]&&t.push(r);return t}createBranch(t){return nr(t),nr(t)?(this._branches?this._branches[t]||(this._branches[t]=[this.makeFirstAtom(t)]):this._branches={[t]:[this.makeFirstAtom(t)]},this.isDirty=!0,this._branches[t]):[]}get row(){return yo(this.parentBranch)?this.parentBranch[0]:-1}get col(){return yo(this.parentBranch)?this.parentBranch[1]:-1}get body(){var t;return null==(t=this._branches)?void 0:t.body}set body(t){this.setChildren(t,"body")}get superscript(){var t;return null==(t=this._branches)?void 0:t.superscript}set superscript(t){this.setChildren(t,"superscript")}get subscript(){var t;return null==(t=this._branches)?void 0:t.subscript}set subscript(t){this.setChildren(t,"subscript")}get above(){var t;return null==(t=this._branches)?void 0:t.above}set above(t){this.setChildren(t,"above")}get below(){var t;return null==(t=this._branches)?void 0:t.below}set below(t){this.setChildren(t,"below")}get computedStyle(){var t,r;let a="string"==typeof this.style.verbatimColor,n="string"==typeof this.style.verbatimBackgroundColor,s=m(m({},null!=(r=null==(t=this.parent)?void 0:t.computedStyle)?r:{}),this.style);return delete s.variant,delete s.variantStyle,n||delete s.verbatimBackgroundColor,a||delete s.verbatimColor,s}applyStyle(t){for(let r of(this.isDirty=!0,this.style=m(m({},this.style),t),"none"===this.style.fontFamily&&delete this.style.fontFamily,"auto"===this.style.fontShape&&delete this.style.fontShape,"auto"===this.style.fontSeries&&delete this.style.fontSeries,"none"===this.style.color&&(delete this.style.color,delete this.style.verbatimColor),"none"===this.style.backgroundColor&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),"auto"===this.style.fontSize&&delete this.style.fontSize,this.children))r.applyStyle(t)}getInitialBaseElement(){var t,r,a;return this.hasEmptyBranch("body")?this:(null==(t=this.body)||t[0].type,null!=(a=null==(r=this.body[1])?void 0:r.getInitialBaseElement())?a:this)}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){return"leftright"!==this.type&&"genfrac"!==this.type&&"subsup"!==this.type&&"delim"!==this.type&&"array"!==this.type&&"surd"!==this.type&&"mord"===this.getFinalBaseElement().type}hasEmptyBranch(t){let r=this.branch(t);return!r||(r.length,r[0].type,1===r.length)}setChildren(t,r){var a;if(!t||(nr(r),!nr(r)))return;null==(a=t[0])||a.type;let n=[this.makeFirstAtom(r),...t];for(let a of(this._branches?this._branches[r]=n:this._branches={[r]:n},t))a.parent=this,a.parentBranch=r;this.isDirty=!0}makeFirstAtom(t){let r=new e({type:"first",mode:this.mode});return r.parent=this,r.parentBranch=t,r}addChild(t,r){t.type,this.createBranch(r).push(t),this.isDirty=!0,t.parent=this,t.parentBranch=r}addChildBefore(t,r){r.parentBranch;let a=this.createBranch(r.parentBranch);a.splice(a.indexOf(r),0,t),this.isDirty=!0,t.parent=this,t.parentBranch=r.parentBranch}addChildAfter(t,r){r.parentBranch;let a=this.createBranch(r.parentBranch);a.splice(a.indexOf(r)+1,0,t),this.isDirty=!0,t.parent=this,t.parentBranch=r.parentBranch}addChildren(t,r){let a=this.createBranch(r);for(let n of t)n.parent=this,n.parentBranch=r,a.push(n);this.isDirty=!0}addChildrenAfter(t,r){0===t.length||t[0].type,r.parentBranch;let a=this.createBranch(r.parentBranch);for(let n of(a.splice(a.indexOf(r)+1,0,...t),this.isDirty=!0,t))n.parent=this,n.parentBranch=r.parentBranch;return t[t.length-1]}removeBranch(t){let r=this.branch(t);if(nr(t)&&(this._branches[t]=void 0),!r)return[];for(let t of r)t.parent=void 0,t.parentBranch=void 0;return r[0].type,r.shift(),this.isDirty=!0,r}removeChild(t){if(t.parent,"first"===t.type)return;let r=this.branch(t.parentBranch),a=r.indexOf(t);r.splice(a,1),this.isDirty=!0,t.parent=void 0,t.parentBranch=void 0}get siblings(){return this.parent?this.parent.branch(this.parentBranch):[]}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:t}=this;return t[t.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return 1===this.siblings.length}get leftSibling(){this.parent;let t=this.parent.branch(this.parentBranch);return t[t.indexOf(this)-1]}get rightSibling(){this.parent;let t=this.parent.branch(this.parentBranch);return t[t.indexOf(this)+1]}get hasChildren(){return!!(this._branches&&this.children.length>0)}get firstChild(){return this.hasChildren,this.children[0]}get lastChild(){this.hasChildren;let{children:t}=this;return t[t.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let t=[];for(let r of oo)if(this._branches[r])for(let a of this._branches[r])t.push(...a.children),t.push(a);return this._children=t,t}render(t){if("first"===this.type&&!t.atomIdsSettings)return null;let r=ee(this.command,this.mode);if(null!=r&&r.render)return r.render(this,t);let a=new oa({parent:t},this.style),n=this.createBox(a,{classes:this.parent?"":"ML__base"});return n?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(n=this.attachSupsub(a,{base:n})),n.wrap(a)):null}attachSupsub(t,r){var a;let n;let s=r.base,l=this.superscript,c=this.subscript;if(!l&&!c)return s;let d=null,h=null,p=null!=(a=r.isCharacterBox)?a:this.isCharacterBox(),y=0;if(l){let r=new oa({parent:t,mathstyle:"superscript"});d=e.createBox(r,l),p||(y=s.height-t.metrics.supDrop*r.scalingFactor)}let v=0;if(c){let r=new oa({parent:t,mathstyle:"subscript"});h=e.createBox(r,c),p||(v=s.depth+t.metrics.subDrop*r.scalingFactor)}n=t.isDisplayStyle?t.metrics.sup1:t.isCramped?t.metrics.sup3:t.metrics.sup2;let k=.05/t.scalingFactor,w=null;if(h&&d){y=Math.max(y,n,d.depth+.25*t.metrics.xHeight),v=Math.max(v,t.metrics.sub2);let r=t.metrics.defaultRuleThickness;if(y-d.depth-(h.height-v)<4*r){v=4*r-(y-d.depth)+h.height;let a=.8*t.metrics.xHeight-(y-d.depth);a>0&&(y+=a,v-=a)}let a=this.isExtensibleSymbol&&s.italic?-s.italic:0;w=new a7({individualShift:[{box:h,shift:v,marginLeft:a},{box:d,shift:-y}]}).wrap(t)}else h&&!d?(v=Math.max(v,t.metrics.sub1,h.height-.3448),w=new a7({shift:v,children:[{box:h,marginRight:k,marginLeft:this.isCharacterBox()?-s.italic:0}]})):!h&&d&&(y=Math.max(y,n,d.depth+.10775),w=new a7({shift:-y,children:[{box:d,marginRight:k}]}));return new a5([s,new a5(w,{caret:this.caret,isSelected:this.isSelected,classes:"msubsup"})],{type:r.type})}attachLimits(t,r){let a=this.superscript?e.createBox(new oa({parent:t,mathstyle:"superscript"},this.style),this.superscript):null,n=this.subscript?e.createBox(new oa({parent:t,mathstyle:"subscript"},this.style),this.subscript):null;return a||n?function(t,r){var a,n,s,l,c;let d=t.metrics,h=new a5(r.base),p=null!=(a=r.baseShift)?a:0,y=null!=(n=r.slant)?n:0,v=0,k=0;r.above&&(v=null!=(s=r.aboveShift)?s:Math.max(d.bigOpSpacing1,d.bigOpSpacing3-r.above.depth)),r.below&&(k=null!=(l=r.belowShift)?l:Math.max(d.bigOpSpacing2,d.bigOpSpacing4-r.below.height));let w=null;if(r.below&&r.above){let a=d.bigOpSpacing5+r.below.height+r.below.depth+k+h.depth+p;w=new a7({bottom:a,children:[d.bigOpSpacing5,{box:r.below,marginLeft:-y,classes:["ML__center"]},k,{box:h,classes:["ML__center"]},v,{box:r.above,marginLeft:y,classes:["ML__center"]},d.bigOpSpacing5]}).wrap(t)}else if(r.below&&!r.above)w=new a7({top:h.height-p,children:[d.bigOpSpacing5,{box:r.below,marginLeft:-y,classes:["ML__center"]},k,{box:h,classes:["ML__center"]}]}).wrap(t);else if(!r.below&&r.above){let a=h.depth+p;w=new a7({bottom:a,children:[{box:h,classes:["ML__center"]},v,{box:r.above,marginLeft:y,classes:["ML__center"]},d.bigOpSpacing5]}).wrap(t)}else{let r=h.depth+p;w=new a7({bottom:r,children:[{box:h},d.bigOpSpacing5]}).wrap(t)}return new a5(w,{type:null!=(c=r.type)?c:"op"})}(t,g(m({},r),{above:a,below:n})):r.base.wrap(t)}bind(t,r){if(!r||t.isPhantom||"​"===this.value)return r;let a=this.parent;for(;a&&!a.captureSelection;)a=a.parent;return null!=a&&a.captureSelection||(this.id||(this.id=t.makeID()),r.atomID=this.id),r}createBox(t,r){var a,n,s,l;let c=null!=(a=this.value)?a:this.body,d=null!=(n=null==r?void 0:r.boxType)?n:jn(this.type),h=null!=(s=null==r?void 0:r.classes)?s:"";"text"===this.mode&&(h+=" ML__text");let p="string"==typeof c||void 0===c?new a5(null!=c?c:null,{type:d,isSelected:this.isSelected,mode:this.mode,maxFontSize:t.scalingFactor,style:g(m({variant:"normal"},this.style),{fontSize:Math.max(1,t.size+t.mathstyle.sizeDelta)}),letterShapeStyle:t.letterShapeStyle,classes:h}):null!=(l=e.createBox(t,c,{type:d,classes:h}))?l:new a5(null);return t.isTight&&(p.isTight=!0),("math"!==this.mode||"main"===this.style.variant)&&(p.italic=0),p.right=p.italic,this.bind(t,p),!this.caret||this.superscript||this.subscript||(p.caret=this.caret),p}isDigit(){var t;return"mord"===this.type&&this.value?/^[\d,\.]$/.test(this.value):"group"===this.type&&(null==(t=this.body)?void 0:t.length)===2&&"first"===this.body[0].type&&","===this.body[1].value}asDigit(){var t;return"mord"===this.type&&this.value&&/^[\d,\.]$/.test(this.value)?this.value:"group"===this.type&&(null==(t=this.body)?void 0:t.length)===2&&"first"===this.body[0].type&&","===this.body[1].value?".":""}};function Ps(t){return"text"===t.mode}var os=class e extends on{constructor(t,r,a){super({type:"text",command:t,mode:"text",displayContainsHighlight:!0}),this.value=r,this.verbatimLatex=r,this.applyStyle(a)}static fromJson(t){return new e(t.command,t.value,t.style)}render(t){let r=this.createBox(t);return this.caret&&(r.caret=this.caret),r}_serialize(t){var r;return null!=(r=this.verbatimLatex)?r:Xi("text",this.value.codePointAt(0))}};function G(t){let r=1/0,a=-1/0;for(let n of t.ranges)r=Math.min(r,n[0],n[1]),a=Math.max(a,n[0],n[1]);return[r,a]}function bo(t,r,a){return a?function(t,r){if(!r)return"";if("string"==typeof r)return r;if(!t||void 0===r.after)return r.value;let a=!1,n=!1,s=!1,l=!1,c=!1,d=!1,h=!1,p=!1,y=!1,v=!1,k=!1,w=!1,_=!1,S=!1,M=!1,C=t[0],A=0;for(;null!=C&&C.type&&/msubsup|placeholder/.test(C.type);)A+=1,C=t[A];return a=!C||"first"===C.type,C&&(n=!(S="text"===C.mode)&&"mord"===C.type&&z.test(C.value),s=!S&&"mord"===C.type&&/\d+$/.test(C.value),l=!S&&C.isFunction,c="genfrac"===C.type,d="surd"===C.type,h="mbin"===C.type,p="mrel"===C.type,y="mop"===C.type,v="mpunct"===C.type||"minner"===C.type,k="array"===C.type,w="mopen"===C.type,_="mclose"===C.type||"leftright"===C.type,M="space"===C.type),r.after.includes("nothing")&&a||r.after.includes("letter")&&n||r.after.includes("digit")&&s||r.after.includes("function")&&l||r.after.includes("frac")&&c||r.after.includes("surd")&&d||r.after.includes("binop")&&h||r.after.includes("relop")&&p||r.after.includes("operator")&&y||r.after.includes("punct")&&v||r.after.includes("array")&&k||r.after.includes("openfence")&&w||r.after.includes("closefence")&&_||r.after.includes("text")&&S||r.after.includes("space")&&M?r.value:""}(t,a[r]):""}var oc={"&":"\\&","%":"\\%",$:"\\$","''":"^{\\doubleprime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","∞":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"∑":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","∆":"\\differentialD","∂":"\\differentialD",arcsin:"\\arcsin",arccos:"\\arccos",arctan:"\\arctan",arcsec:"\\arcsec",arccsc:"\\arccsc",arsinh:"\\arsinh",arcosh:"\\arcosh",artanh:"\\artanh",arcsech:"\\arcsech",arccsch:"\\arccsch",arg:"\\arg",ch:"\\ch",cosec:"\\cosec",cosh:"\\cosh",cot:"\\cot",cotg:"\\cotg",coth:"\\coth",csc:"\\csc",ctg:"\\ctg",cth:"\\cth",sec:"\\sec",sinh:"\\sinh",sh:"\\sh",tanh:"\\tanh",tg:"\\tg",th:"\\th",sin:"\\sin",cos:"\\cos",tan:"\\tan",lg:"\\lg",lb:"\\lb",log:"\\log",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",xx:"\\times","+-":"\\pm","≠":"\\ne","!=":"\\ne","≥":"\\ge",">=":"\\ge","≤":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","≈":"\\approx","?=":"\\questeq","\xf7":"\\div","\xac":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},µ:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",Ω:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\mod",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\operatorname{gcd}",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","-->...":"\\longrightarrow\\cdots","->":"\\to","|->":"\\mapsto","-->":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}","*":"\\cdot","**":"\\star","***":"\\ast","//":"\\slash","\\\\":"\\backslash",setminus:"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div",divide:"\\div","@":"\\circ","^^":"\\wedge","^^^":"\\bigwedge",vv:"\\vee",vvv:"\\bigvee",nn:"\\cap",nnn:"\\bigcap",uu:"\\cup",uuu:"\\bigcup","-=":"\\equiv","~=":"\\cong",lt:"<","lt=":"\\leq",gt:">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq",prop:"\\propto",diamond:"\\diamond",square:"\\square",iff:"\\iff",sub:"\\subset",sup:"\\supset",sube:"\\subseteq",supe:"\\supseteq",uarr:"\\uparrow",darr:"\\downarrow",rarr:"\\rightarrow",rArr:"\\Rightarrow",larr:"\\leftarrow",lArr:"\\Leftarrow",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",aleph:"\\aleph",and:"\\land",or:"\\lor",not:"\\neg","_|_":"\\bot",TT:"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceil","~|":"\\rceil",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail",frac:"\\frac{#?}{#?}",cbrt:"\\sqrt[3]{#?}",nthroot:"\\sqrt[#?]{#?}"};function Cr(t,r){var a,n;let s;let l=null!=(a=null==r?void 0:r.format)?a:"auto";return"auto"===l&&([l,t]=(n=(n=t).trim()).length<=1?["latex",n]:([s,n]=Zn(n),s?["latex",n]:n.startsWith("`")&&n.endsWith("`")?["ascii-math",n=n.substring(1,n.length-1)]:n.includes("\\")?["latex",n]:/\$.+\$/.test(n)?["latex",`\\text{${n}}`]:[void 0,n])),"ascii-math"===l?["ascii-math",Ae(t=(t=(t=(t=(t=(t=t.replace(/\u2061/gu,"")).replace(/\u3016/gu,"{")).replace(/\u3017/gu,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),{inlineShortcuts:null==r?void 0:r.inlineShortcuts})]:["latex",t]}function Ae(t,r){var a,n,s;if(!t)return"";let l=!1,c,d=null!=(a=r.inlineShortcuts)?a:oc;if(!l&&(t.startsWith("^")||t.startsWith("_"))&&(c=Lr(t.slice(1),{inlineShortcuts:d,noWrap:!0}),t=t[0]+"{"+c.match+"}"+Ae(c.rest,r),l=!0),l||(c=t.match(/^(sqrt|\u221A)(.*)/))&&(t="\\sqrt{"+(null!=(n=(c=Lr(c[2],{inlineShortcuts:d,noWrap:!0})).match)?n:"\\placeholder{}")+"}"+Ae(c.rest,r),l=!0),l||(c=t.match(/^(\\cbrt|\u221B)(.*)/))&&(t="\\sqrt[3]{"+(null!=(s=(c=Lr(c[2],{inlineShortcuts:d,noWrap:!0})).match)?s:"\\placeholder{}")+"}"+Ae(c.rest,r),l=!0),l||(c=t.match(/^abs(.*)/))&&(t="\\left|"+(c=Lr(c[1],{inlineShortcuts:d,noWrap:!0})).match+"\\right|"+Ae(c.rest,r),l=!0),l||(c=t.match(/^["”“](.*?)["”“](.*)/))&&(t="\\text{"+c[1]+"}"+Ae(c[2],r),l=!0),l||(c=t.match(/^([^a-zA-Z\(\{\[\_\^\\\s"]+)(.*)/))&&(t=Nd(c[1],d)+Ae(c[2],r),l=!0),!l&&/^([fgh])[^a-zA-Z]/.test(t)&&(c=Lr(t.slice(1),{inlineShortcuts:d,noWrap:!0}),t=("("===t[1]?t[0]+"\\left("+c.match+"\\right)":t[0]+c.match)+Ae(c.rest,r),l=!0),l||(c=t.match(/^([a-zA-Z]+)(.*)/))&&(t=Nd(c[1],d)+Ae(c[2],r),l=!0),!l){if((c=Lr(t,{inlineShortcuts:d,noWrap:!0})).match&&"/"===c.rest[0]){let a=Lr(c.rest.slice(1),{inlineShortcuts:d,noWrap:!0});a.match&&(t="\\frac{"+c.match+"}{"+a.match+"}"+Ae(a.rest,r)),l=!0}else c.match&&(t=t.startsWith("(")?"\\left("+c.match+"\\right)"+Ae(c.rest,r):c.match+Ae(c.rest,r),l=!0)}return l||(c=t.match(/^(\s+)(.*)$/))&&(t=" "+Ae(c[2],r),l=!0),t}function Lr(t,r){let a="",n=t=t.trim(),s=t.charAt(0),l={"(":")","{":"}","[":"]"}[s];if(l){let c=1,d=1;for(;d<t.length&&c>0;)t[d]===s&&c++,t[d]===l&&c--,d++;0===c?(r.noWrap&&"("===s?a=Ae(t.substring(1,d-1),r):("{"===s&&"}"===l&&(s="\\{",l="\\}"),a="\\left"+s+Ae(t.substring(1,d-1),r)+"\\right"+l),n=t.slice(Math.max(0,d))):(a=t.substring(1,d),n="")}else{let s=t.match(/^([a-zA-Z]+)/);if(s){let a=bo(null,t,r.inlineShortcuts);if(a)return{match:a=(a=a.replace("_{#?}","")).replace("^{#?}",""),rest:t.slice(a.length)}}if(s=t.match(/^([a-zA-Z])/))return{match:s[1],rest:t.slice(1)};if(s=t.match(/^(-)?\d+(\.\d*)?/))return{match:s[0],rest:t.slice(s[0].length)};/^\\(left|right)/.test(t)||(s=t.match(/^(\\[a-zA-Z]+)/))&&(n=t.slice(s[1].length),a=s[1])}return{match:a,rest:n}}function Nd(t,r){let a=bo(null,t,r);return a?(a=a.replace("_{#?}","")).replace("^{#?}","")+" ":t}var od=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function Zn(t){let r=t.trim();for(let t of od)if(r.startsWith(t[0])&&r.endsWith(t[1]))return[!0,r.substring(t[0].length,r.length-t[1].length)];return[!1,t]}var Id=(t,r,a)=>(od.some(t=>r.startsWith(t[0])&&r.endsWith(t[1]))||(r=`$$ ${r} $$`),r),ou=class mi{constructor(t){mi._modes[t]=this}static onPaste(t,r,a){var n;if(!r.contentEditable&&"none"===r.userSelect)return r.model.announce("plonk"),!1;if("string"==typeof a){let t=new DataTransfer;t.setData("text/plain",a),a=t}let s=new ClipboardEvent("paste",{clipboardData:a,cancelable:!0});return!!(null!=(n=r.host)&&n.dispatchEvent(s))&&mi._modes[t].onPaste(r,a)}static onCopy(t,r){var a;if(!r.clipboardData)return;if(!t.contentEditable&&"none"===t.userSelect){t.model.announce("plonk");return}let n=t.model,s=n.selectionIsCollapsed?[0,n.lastOffset]:G(n.selection),l=n.getAtoms(s);if(l.every(t=>"text"===t.mode||!t.mode))r.clipboardData.setData("text/plain",l.filter(t=>t instanceof os).map(t=>t.value).join(""));else if(l.every(t=>"latex"===t.mode))r.clipboardData.setData("text/plain",n.getAtoms(s,{includeChildren:!0}).map(t=>{var r;return null!=(r=t.value)?r:""}).join(""));else{let c;c=1===l.length&&void 0!==l[0].verbatimLatex?l[0].verbatimLatex:n.getValue(s,"latex-expanded"),r.clipboardData.setData("application/x-latex",c);try{r.clipboardData.setData("text/plain",t.options.onExport(t,c,s))}catch(t){}if(1===l.length){let t=l[0];("root"===t.type||"group"===t.type)&&(l=t.body.filter(t=>"first"!==t.type))}try{r.clipboardData.setData("application/json+mathlive",JSON.stringify(l.map(t=>t.toJson())))}catch(t){}if(null!=(a=window[Symbol.for("io.cortexjs.compute-engine")])&&a.ComputeEngine){let t=window.MathfieldElement.computeEngine;if(t)try{t.jsonSerializationOptions={metadata:["latex"]};let a=t.parse(n.getValue(s,"latex-unstyled")),l=JSON.stringify(a.json);l&&r.clipboardData.setData("application/json",l)}catch(t){}}}r.preventDefault()}static insert(t,r,a={}){var n;let s="auto"===a.mode?t.mode:null!=(n=a.mode)?n:t.mode;return mi._modes[s].insert(t,r,a)}onPaste(t,r){return!1}insert(t,r,a){return!1}};ou._modes={};var oh=ou,op=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",command:"moveToNextGroup"},{key:"shift+[Tab]",command:"moveToPreviousGroup"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:"complete"},{key:"[Enter]",ifMode:"latex",command:"complete"},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"cmd+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"ctrl+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"cmd+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"ctrl+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"cmd+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+alt+[KeyT]",ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"shift+alt+[KeyT]",ifMode:"text",command:["switchMode","math","",""]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"alt+[Tab]",ifMode:"math",command:"addColumnAfter"},{key:"shift+alt+[Tab]",ifMode:"math",command:"addColumnBefore"},{key:"alt+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Enter]",ifMode:"math",command:"addRowBefore"},{key:"alt+[Return]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Return]",ifMode:"math",command:"addRowBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]}],of={"\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\infty":"alt+[Digit5]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function pi(t,r,a,n){for(let s of r.split(" ")){let r=s.match(/(.*):(.*)/);if(r){let s=null!=n?n:{};"active"===r[2]?s.passive=!1:s[r[2]]=!0,t.addEventListener(r[1],a,s)}else t.addEventListener(s,a,n)}}function xo(t,r,a,n){for(let s of r.split(" ")){let r=s.match(/(.*):(.*)/);if(r){let s=null!=n?n:{};"active"===r[2]?s.passive=!1:s[r[2]]=!0,t.removeEventListener(r[1],a,s)}else t.removeEventListener(s,a,n)}}function Pt(t){var r;return(null==(r=t.element)?void 0:r.mathfield)===t}function hi(t){var r,a;let n=null!=(a=null!=(r=t.querySelector(".ML__caret"))?r:t.querySelector(".ML__text-caret"))?a:t.querySelector(".ML__latex-caret");if(!n)return null;let s=n.getBoundingClientRect();return{x:s.right,y:s.bottom,height:s.height}}function Bs(t,r,a){if(!r)return null;let n=t.field.getBoundingClientRect(),s=r.right-r.left,l=r.bottom-r.top,c=Math.ceil(r.left-n.left+t.field.scrollLeft*a),d=Math.ceil(r.top-n.top);return{left:c,right:c+s,top:d,bottom:d+l}}function sr(t,r){var a,n;if(!r.id)return null;let s=null!=(n=null==(a=t.atomBoundsCache)?void 0:a.get(r.id))?n:null;if(null!==s)return s;let l=t.fieldContent.querySelector(`[data-atom-id="${r.id}"]`);return s=l?function qd(t){let r=t.getBoundingClientRect(),a=parseInt(getComputedStyle(t).marginRight),n={top:r.top-1,bottom:r.bottom,left:r.left,right:r.right-1+a};if(0===t.children.length||"SVG"===t.tagName.toUpperCase())return n;for(let r of t.children)if(1===r.nodeType&&"atomId"in r.dataset&&!r.classList.contains("pstrut")){let t=qd(r);n.left=Math.min(n.left,t.left),n.right=Math.max(n.right,t.right),n.top=Math.min(n.top,t.top),n.bottom=Math.max(n.bottom,t.bottom)}return n}(l):null,t.atomBoundsCache&&(s?t.atomBoundsCache.set(r.id,s):t.atomBoundsCache.delete(r.id)),null!=s?s:null}function Yn(t,r){return t.model.selection.ranges.reduce((a,n)=>a.concat(...function(t,r,a){let n=new Map;for(let s of t.model.getAtoms(r,{includeChildren:!0})){if(null!=a&&a.excludeAtomsWithBackground&&s.style.backgroundColor)continue;let r=t.field,l=parseFloat(getComputedStyle(r).width),c=r.getBoundingClientRect().width/l;c=isNaN(c)?1:c;let d=Bs(t,sr(t,s),c);if(d){let t=function(t){var r;return t.parent?(null!=(r=t.parent.id)?r:"")+("string"==typeof t.parentBranch?"-"+t.parentBranch:`-${t.parentBranch[0]}/${t.parentBranch[0]}`):"root"}(s);if(n.has(t)){let r=n.get(t);n.set(t,{left:Math.min(r.left,d.left),right:Math.max(r.right,d.right),top:Math.min(r.top,d.top),bottom:Math.max(r.bottom,d.bottom)})}else n.set(t,d)}}return[...n.values()]}(t,n,r)),[])}function fi(t,r){return"*"===t||"none"===r||("same-origin"===r?!window.origin||t===window.origin:"function"==typeof r&&r(t))}function Ks(t){let r=0,a=0,n=t.offsetWidth,s=t.offsetHeight;for(;t instanceof HTMLElement;)r+=t.offsetTop,a+=t.offsetLeft,t=t.offsetParent;return new DOMRect(a,r,n,s)}var oy=`@keyframes ML__caret-blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}
.ML__container {
  display: inline-flex;
  flex-flow: row;
  justify-content: space-between;
  align-items: flex-end;
  min-height: 39px;
  /* Need some room for the virtual keyboard toggle */
  width: 100%;
  /* Encourage browsers to consider allocating a hardware accelerated
   layer for this element. */
  isolation: isolate;
  /* Prevent the browser from trying to interpret touch gestures in the field */
  /* "Disabling double-tap to zoom removes the need for browsers to
        delay the generation of click events when the user taps the screen." */
  touch-action: none;
  --_caret-color: var(--caret-color, hsl(var(--_hue), 40%, 49%));
  --_selection-color: var(--selection-color, #000);
  --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 70%, 85%));
  --_text-highlight-background-color: var(--highlight-text, hsla(var(--_hue), 40%, 50%, 0.1));
  --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 40%, 95%));
  --_smart-fence-color: var(--smart-fence-color, currentColor);
  --_smart-fence-opacity: var(--smart-fence-opacity, 0.5);
  --_latex-color: var(--latex-color, hsl(var(--_hue), 40%, 50%));
  --_correct-color: var(--correct-color, #10a000);
  --_incorrect-color: var(--incorrect-color, #a01b00);
  --_composition-background-color: var(--composition-background-color, #fff1c2);
  --_composition-text-color: var(--composition-text-color, black);
  --_composition-underline-color: var(--composition-underline-color, transparent);
}
/* This is the actual field content (formula) */
.ML__content {
  display: flex;
  align-items: center;
  align-self: center;
  position: relative;
  overflow: hidden;
  padding: 2px 0 2px 1px;
  width: 100%;
}
.ML__virtual-keyboard-toggle {
  box-sizing: border-box;
  display: flex;
  align-self: center;
  align-items: center;
  flex-shrink: 0;
  flex-direction: column;
  justify-content: center;
  width: 34px;
  height: 34px;
  padding: 0;
  margin-right: 4px;
  cursor: pointer;
  /* Avoid some weird blinking with :hover */
  border-radius: 8px;
  border: 1px solid transparent;
  transition: background 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  color: hsl(var(--_hue), 40%, 50%);
  fill: currentColor;
  background: transparent;
}
.ML__virtual-keyboard-toggle:hover {
  background: hsla(0, 0%, 70%, 0.3);
  color: #333;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle > span {
  display: flex;
  align-self: center;
  align-items: center;
}
/* The invisible element used to capture keyboard events. We're just trying
 really hard to make sure it doesn't show. */
.ML__keyboard-sink {
  display: inline-block;
  resize: none;
  outline: none;
  border: none;
  /* Need these for Microsoft Edge */
  position: fixed;
  clip: rect(0 0 0 0);
  /* Need this to prevent iOS Safari from auto-zooming */
  font-size: 1em;
  font-family: KaTeX_Main;
}
.ML__composition {
  background: var(--_composition-background-color);
  color: var(--_composition-text-color);
  text-decoration: underline var(--_composition-underline-color);
}
.ML__caret:after {
  content: '';
  border: none;
  border-radius: 2px;
  border-right: 2px solid var(--_caret-color);
  margin-right: -2px;
  position: relative;
  left: -1px;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__text-caret:after {
  content: '';
  border: none;
  border-radius: 1px;
  border-right: 1px solid var(--_caret-color);
  margin-right: -1px;
  position: relative;
  left: 0;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__latex-caret:after {
  content: '_';
  border: none;
  margin-right: 0;
  margin-right: calc(-1ex - 2px);
  position: relative;
  color: var(--_caret-color);
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__focused .ML__text {
  background: var(--_text-highlight-background-color);
}
/* When using smartFence, the anticipated closing fence is displayed
with this style */
.ML__smart-fence__close {
  opacity: var(--_smart-fence-opacity);
  color: var(--_smart-fence-color);
}
.ML__selected,
.ML__focused .ML__selected .ML__contains-caret,
.ML__focused .ML__selected .ML__smart-fence__close,
.ML__focused .ML__selected .ML__placeholder {
  color: var(--_selection-color);
  opacity: 1;
}
:host(:focus) .ML__selection {
  box-sizing: border-box;
  background: var(--_selection-background-color) !important;
}
.ML__contains-caret.ML__close,
.ML__contains-caret.ML__open,
.ML__contains-caret > .ML__close,
.ML__contains-caret > .ML__open,
.ML__contains-caret .ML__sqrt-sign,
.ML__contains-caret .ML__sqrt-line {
  color: var(--_caret-color);
}
.ML__contains-highlight {
  background: var(--_contains-highlight-background-color);
  box-sizing: border-box;
}
.ML__latex {
  font-family: 'Berkeley Mono', 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  font-weight: 400;
  color: var(--_latex-color);
}
.ML__suggestion {
  opacity: 0.5;
}
.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle:focus {
  outline: none;
  border-radius: 8px;
  border: 2px solid hsl(var(--_hue), 40%, 50%);
}
.ML__virtual-keyboard-toggle.is-pressed,
.ML__virtual-keyboard-toggle.is-active:hover,
.ML__virtual-keyboard-toggle.is-active {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
/* Add an attribute 'data-ML__tooltip' to automatically show a
   tooltip over a element on hover.
   Use 'data-position="top"' to place the tooltip above the
   element rather than below.
   Use 'data-delay' to delay the triggering of the tooltip.
*/
[data-ML__tooltip] {
  position: relative;
}
[data-ML__tooltip][data-placement='top']::after {
  top: inherit;
  bottom: 100%;
}
[data-ML__tooltip]::after {
  content: attr(data-ML__tooltip);
  position: absolute;
  display: none;
  z-index: 2;
  right: 110%;
  left: calc(100% + 8px);
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  border-radius: 2px;
  background: #616161;
  color: #fff;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  text-align: center;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-style: normal;
  font-weight: 400;
  font-size: 12px;
  /* Phone */
  opacity: 0;
  transform: scale(0.5);
  transition: all 0.15s cubic-bezier(0.4, 0, 1, 1);
}
@media only screen and (max-width: 767px) {
  [data-ML__tooltip]::after {
    padding: 8px 16px;
    font-size: 16px;
  }
}
:not(.tracking) [data-ML__tooltip]:hover {
  position: relative;
}
:not(.tracking) [data-ML__tooltip]:hover::after {
  visibility: visible;
  display: inline-table;
  opacity: 1;
  transform: scale(1);
}
[data-ML__tooltip][data-delay]::after {
  transition-delay: 0s;
}
[data-ML__tooltip][data-delay]:hover::after {
  transition-delay: 1s;
  /* attr(data-delay); Should work. But doesn't. */
}
.ML__prompt {
  border-radius: 2px;
}
.ML__editablePromptBox {
  outline: 1px solid #acacac;
  border-radius: 2px;
  z-index: -1;
}
.ML__focusedPromptBox {
  outline: highlight auto 1px;
}
.ML__lockedPromptBox {
  background-color: rgba(142, 142, 141, 0.4);
  z-index: -1;
}
.ML__correctPromptBox {
  outline: 1px solid var(--_correct-color);
  box-shadow: 0 0 5px var(--_correct-color);
}
.ML__incorrectPromptBox {
  outline: 1px solid var(--_incorrect-color);
  box-shadow: 0 0 5px var(--_incorrect-color);
}
`,og=`.ML__container {
  min-height: auto !important;
  --_hue: var(--hue, 212);
  --_placeholder-color: var(--placeholder-color, hsl(var(--_hue), 40%, 49%));
  --_placeholder-opacity: var(--placeholder-opacity, 0.4);
  --_text-font-family: var(--text-font-family, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif);
}
.ML__sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}
.ML__is-inline {
  display: inline-block;
}
.ML__base {
  visibility: inherit;
  display: inline-block;
  position: relative;
  cursor: text;
  padding: 0;
  margin: 0;
  box-sizing: content-box;
  border: 0;
  outline: 0;
  vertical-align: baseline;
  font-weight: inherit;
  font-family: inherit;
  font-style: inherit;
  text-decoration: none;
  width: min-content;
}
.ML__strut,
.ML__strut--bottom {
  display: inline-block;
  min-height: 0.5em;
}
.ML__small-delim {
  font-family: KaTeX_Main;
}
/* Text mode */
.ML__text {
  font-family: var(--_text-font-family);
  white-space: pre;
}
/* Use cmr for 'math upright' */
.ML__cmr {
  font-family: KaTeX_Main;
  font-style: normal;
}
.ML__mathit {
  font-family: KaTeX_Math;
  /* The KaTeX_Math font is italic by default, so the font-style below is only 
     useful when a fallback font is used
  */
  font-style: italic;
}
.ML__mathbf {
  font-family: KaTeX_Main;
  font-weight: bold;
}
/* Lowercase greek symbols should stick to math font when \\mathbf is applied 
   to match TeX idiosyncratic behavior */
.lcGreek.ML__mathbf {
  font-family: KaTeX_Math;
  font-weight: normal;
}
.ML__mathbfit {
  font-family: KaTeX_Math;
  font-weight: bold;
  font-style: italic;
}
.ML__ams {
  font-family: KaTeX_AMS;
}
/* Blackboard */
.ML__bb {
  font-family: KaTeX_AMS;
}
.ML__cal {
  font-family: KaTeX_Caligraphic;
}
.ML__frak {
  font-family: KaTeX_Fraktur;
}
.ML__tt {
  font-family: KaTeX_Typewriter;
}
.ML__script {
  font-family: KaTeX_Script;
}
.ML__sans {
  font-family: KaTeX_SansSerif;
}
.ML__series_ul {
  font-weight: 100;
}
.ML__series_el {
  font-weight: 100;
}
.ML__series_l {
  font-weight: 200;
}
.ML__series_sl {
  font-weight: 300;
}
.ML__series_sb {
  font-weight: 500;
}
.ML__bold,
.ML__boldsymbol {
  font-weight: 700;
}
.ML__series_eb {
  font-weight: 800;
}
.ML__series_ub {
  font-weight: 900;
}
.ML__series_uc {
  font-stretch: ultra-condensed;
}
.ML__series_ec {
  font-stretch: extra-condensed;
}
.ML__series_c {
  font-stretch: condensed;
}
.ML__series_sc {
  font-stretch: semi-condensed;
}
.ML__series_sx {
  font-stretch: semi-expanded;
}
.ML__series_x {
  font-stretch: expanded;
}
.ML__series_ex {
  font-stretch: extra-expanded;
}
.ML__series_ux {
  font-stretch: ultra-expanded;
}
.ML__it {
  font-style: italic;
}
.ML__shape_ol {
  -webkit-text-stroke: 1px black;
  text-stroke: 1px black;
  color: transparent;
}
.ML__shape_sc {
  font-variant: small-caps;
}
.ML__shape_sl {
  font-style: oblique;
}
/* First level emphasis */
.ML__emph {
  color: #bc2612;
}
/* Second level emphasis */
.ML__emph .ML__emph {
  color: #0c7f99;
}
.ML__highlight {
  color: #007cb2;
  background: #edd1b0;
}
.ML__center {
  text-align: center;
}
.ML__label_padding {
  padding: 0 0.5em;
}
.ML__frac-line {
  width: 100%;
  min-height: 1px;
}
.ML__frac-line:after {
  content: '';
  display: block;
  margin-top: max(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  /* There's a bug since Chrome 62 where 
      sub-pixel border lines don't draw at some zoom 
      levels (110%, 90%). 
      Setting the min-height used to work around it, but that workaround
      broke in Chrome 84 or so.
      Setting the background (and the min-height) seems to work for now.
      */
  background: currentColor;
  box-sizing: content-box;
  /* Vuetify sets the box-sizing to inherit 
            causes the fraction line to not draw at all sizes (see #26) */
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
}
.ML__sqrt {
  display: inline-block;
}
.ML__sqrt-sign {
  display: inline-block;
  position: relative;
}
.ML__sqrt-line {
  display: inline-block;
  height: max(1px, 0.04em);
  width: 100%;
}
.ML__sqrt-line:before {
  content: '';
  display: block;
  margin-top: min(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  background: currentColor;
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
}
.ML__sqrt-line:after {
  border-bottom-width: 1px;
  content: ' ';
  display: block;
  margin-top: -0.1em;
}
.ML__sqrt-index {
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}
.ML__delim-size1 {
  font-family: KaTeX_Size1;
}
.ML__delim-size2 {
  font-family: KaTeX_Size2;
}
.ML__delim-size3 {
  font-family: KaTeX_Size3;
}
.ML__delim-size4 {
  font-family: KaTeX_Size4;
}
.ML__delim-mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}
.ML__delim-mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}
.ML__accent-body > span {
  font-family: KaTeX_Main;
  width: 0;
}
.ML__accent-vec {
  position: relative;
  left: 0.24em;
}
.ML__mathlive {
  display: inline-block;
  direction: ltr;
  text-align: left;
  text-indent: 0;
  text-rendering: auto;
  font-family: KaTeX_Main, 'Times New Roman', serif;
  font-style: normal;
  font-size-adjust: none;
  font-stretch: normal;
  font-variant-caps: normal;
  letter-spacing: normal;
  line-height: 1.2;
  word-wrap: normal;
  word-spacing: normal;
  white-space: nowrap;
  text-shadow: none;
  -webkit-user-select: none;
  user-select: none;
  width: min-content;
}
.ML__mathlive .style-wrap {
  position: relative;
}
.ML__mathlive .mfrac,
.ML__mathlive .left-right {
  display: inline-block;
}
.ML__mathlive .vlist-t {
  display: inline-table;
  table-layout: fixed;
  border-collapse: collapse;
}
.ML__mathlive .vlist-r {
  display: table-row;
}
.ML__mathlive .vlist {
  display: table-cell;
  vertical-align: bottom;
  position: relative;
}
.ML__mathlive .vlist > span {
  display: block;
  height: 0;
  position: relative;
}
.ML__mathlive .vlist > span > span {
  display: inline-block;
}
.ML__mathlive .vlist > span > .pstrut {
  overflow: hidden;
  width: 0;
}
.ML__mathlive .vlist-t2 {
  margin-right: -2px;
}
.ML__mathlive .vlist-s {
  display: table-cell;
  vertical-align: bottom;
  font-size: 1px;
  width: 2px;
  min-width: 2px;
}
.ML__mathlive .msubsup {
  text-align: left;
}
.ML__mathlive .negativethinspace {
  display: inline-block;
  margin-left: -0.16667em;
  height: 0.71em;
}
.ML__mathlive .thinspace {
  display: inline-block;
  width: 0.16667em;
  height: 0.71em;
}
.ML__mathlive .mediumspace {
  display: inline-block;
  width: 0.22222em;
  height: 0.71em;
}
.ML__mathlive .thickspace {
  display: inline-block;
  width: 0.27778em;
  height: 0.71em;
}
.ML__mathlive .enspace {
  display: inline-block;
  width: 0.5em;
  height: 0.71em;
}
.ML__mathlive .quad {
  display: inline-block;
  width: 1em;
  height: 0.71em;
}
.ML__mathlive .qquad {
  display: inline-block;
  width: 2em;
  height: 0.71em;
}
.ML__mathlive .llap,
.ML__mathlive .rlap {
  width: 0;
  position: relative;
  display: inline-block;
}
.ML__mathlive .llap > .inner,
.ML__mathlive .rlap > .inner {
  position: absolute;
}
.ML__mathlive .llap > .fix,
.ML__mathlive .rlap > .fix {
  display: inline-block;
}
.ML__mathlive .llap > .inner {
  right: 0;
}
.ML__mathlive .rlap > .inner {
  left: 0;
}
.ML__mathlive .rule {
  display: inline-block;
  border: solid 0;
  position: relative;
  box-sizing: border-box;
}
.ML__mathlive .overline .overline-line,
.ML__mathlive .underline .underline-line {
  width: 100%;
}
.ML__mathlive .overline .overline-line:before,
.ML__mathlive .underline .underline-line:before {
  content: '';
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  display: block;
}
.ML__mathlive .overline .overline-line:after,
.ML__mathlive .underline .underline-line:after {
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  content: '';
  display: block;
  margin-top: -1px;
}
.ML__mathlive .stretchy {
  display: block;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__mathlive .stretchy:before,
.ML__mathlive .stretchy:after {
  content: '';
}
.ML__mathlive .stretchy svg {
  display: block;
  position: absolute;
  width: 100%;
  height: inherit;
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
}
.ML__mathlive .slice-1-of-2 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__mathlive .slice-2-of-2 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__mathlive .slice-1-of-3 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__mathlive .slice-2-of-3 {
  display: inline-flex;
  position: absolute;
  left: 25%;
  width: 50%;
  overflow: hidden;
}
.ML__mathlive .slice-3-of-3 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__mathlive .slice-1-of-1 {
  display: inline-flex;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__mathlive .nulldelimiter {
  display: inline-block;
}
.ML__mathlive .op-group {
  display: inline-block;
}
.ML__mathlive .op-symbol {
  position: relative;
}
.ML__mathlive .op-symbol.small-op {
  font-family: KaTeX_Size1;
}
.ML__mathlive .op-symbol.large-op {
  font-family: KaTeX_Size2;
}
.ML__mathlive .mtable .vertical-separator {
  display: inline-block;
  min-width: 1px;
  box-sizing: border-box;
}
.ML__mathlive .mtable .arraycolsep {
  display: inline-block;
}
.ML__mathlive .mtable .col-align-m > .vlist-t {
  text-align: center;
}
.ML__mathlive .mtable .col-align-c > .vlist-t {
  text-align: center;
}
.ML__mathlive .mtable .col-align-l > .vlist-t {
  text-align: left;
}
.ML__mathlive .mtable .col-align-r > .vlist-t {
  text-align: right;
}
.ML__error {
  display: inline-block;
  background-image: radial-gradient(ellipse at center, hsl(341, 100%, 40%), rgba(0, 0, 0, 0) 70%);
  background-color: hsla(341, 100%, 40%, 0.1);
  background-repeat: repeat-x;
  background-size: 3px 3px;
  padding-bottom: 3px;
  background-position: 0 100%;
}
.ML__error > .ML__error {
  background: transparent;
  padding: 0;
}
.ML__placeholder {
  color: var(--_placeholder-color);
  opacity: var(--_placeholder-opacity);
  padding-left: 0.4ex;
  padding-right: 0.4ex;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
}
.ML__notation {
  position: absolute;
  box-sizing: border-box;
  line-height: 0;
}
/* This class is used to implement the \`\\mathtip\` and \`\\texttip\` commands
   For UI elements, see \`[data-ML__tooltip]\`
*/
.ML__tooltip-container {
  position: relative;
  transform: scale(0);
}
.ML__tooltip-container .ML__tooltip-content {
  position: fixed;
  display: inline-table;
  visibility: hidden;
  z-index: 2;
  width: max-content;
  max-width: 400px;
  padding: 12px 12px;
  border-radius: 8px;
  background: #616161;
  --_selection-color: #fff;
  color: #fff;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  opacity: 0;
  transition: opacity 0.15s cubic-bezier(0.4, 0, 1, 1);
}
.ML__tooltip-container .ML__tooltip-content .ML__text {
  white-space: normal;
}
.ML__tooltip-container .ML__tooltip-content .ML__base {
  display: contents;
}
.ML__tooltip-container:hover .ML__tooltip-content {
  visibility: visible;
  opacity: 1;
  font-size: 0.75em;
  transform: scale(1) translate(0, 3em);
}
`,ob=`#mathlive-environment-popover.is-visible {
  visibility: visible;
}
#mathlive-environment-popover {
  --_environment-panel-height: var(--environment-panel-height, 70px);
  --_accent-color: var(--accent-color, #0c75d8);
  --_background: var(--environment-panel-background, #0c75d8);
  --_button-background: var(--environment-panel-button-background, white);
  --_button-background-hover: var(--environment-panel-button-background-hover, #f5f5f7);
  --_button-background-active: var(--environment-panel-button-background-active, #f5f5f7);
  --_button-text: var(--environment-panel-button-text, #e3e4e8);
  position: absolute;
  width: calc(var(--_environment-panel-height) * 2);
  height: var(--_environment-panel-height);
  border-radius: 4px;
  border: 1.5px solid var(--_accent-color);
  background-color: var(--_background);
  box-shadow: 0 0 30px 0 var(--environment-shadow, rgba(0, 0, 0, 0.4));
  pointer-events: all;
  visibility: hidden;
}
#mathlive-environment-popover .MLEP__array-buttons {
  height: calc(var(--_environment-panel-height) * 5/4);
  width: calc(var(--_environment-panel-height) * 5/4);
  margin-left: calc(0px - var(--_environment-panel-height) * 0.16);
  margin-top: calc(0px - var(--_environment-panel-height) * 0.19);
}
#mathlive-environment-popover .MLEP__array-buttons .font {
  fill: white;
}
#mathlive-environment-popover .MLEP__array-buttons circle {
  fill: #7f7f7f;
  transition: fill 300ms;
}
#mathlive-environment-popover .MLEP__array-buttons .MLEP__array-insert-background {
  fill-opacity: 1;
  fill: var(--_background);
  stroke: var(--_accent-color);
  stroke-width: 3px;
}
#mathlive-environment-popover .MLEP__array-buttons line {
  stroke: var(--_accent-color);
  stroke-opacity: 0;
  stroke-width: 40;
  pointer-events: none;
  transition: stroke-opacity 300ms;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover circle {
  fill: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover line {
  stroke-opacity: 1;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls {
  height: 100%;
  width: 50%;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options {
  width: var(--_environment-panel-height);
  height: var(--_environment-panel-height);
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  justify-content: space-around;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg {
  pointer-events: all;
  margin-top: 2px;
  width: calc(var(--_environment-panel-height) / 3 * 28 / 24);
  height: calc(var(--_environment-panel-height) / 3 - 2px);
  border-radius: calc(var(--_environment-panel-height) / 25);
  background-color: var(--_button-background);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg:hover {
  background-color: var(--_button-background-hover);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg line {
  stroke: var(--_button-text);
  stroke-width: 2;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg rect,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path {
  fill-opacity: 0;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active {
  pointer-events: none;
  background-color: var(--_button-background-active);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active line {
  stroke: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active circle {
  fill: var(--_accent-color);
}
`,ov=`/* The element that display info while in latex mode */
#mathlive-suggestion-popover {
  background-color: rgba(97, 97, 97);
  color: #fff;
  text-align: center;
  border-radius: 8px;
  position: fixed;
  z-index: 1;
  display: none;
  flex-direction: column;
  justify-content: center;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
}
#mathlive-suggestion-popover.top-tip::after {
  content: '';
  position: absolute;
  top: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-bottom: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.bottom-tip::after {
  content: '';
  position: absolute;
  bottom: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-top: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.is-animated {
  transition: all 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  animation: ML__fade-in cubic-bezier(0, 0, 0.2, 1) 0.15s;
}
#mathlive-suggestion-popover.is-visible {
  display: flex;
}
@keyframes ML__fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
/* The wrapper class for the entire content of the popover panel */
#mathlive-suggestion-popover ul {
  display: flex;
  flex-flow: column;
  list-style: none;
  margin: 0;
  padding: 0;
  align-items: flex-start;
  max-height: 400px;
  overflow-y: auto;
}
#mathlive-suggestion-popover li {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  margin: 8px;
  padding: 8px;
  width: calc(100% - 16px - 16px);
  column-gap: 1em;
  border-radius: 8px;
  cursor: pointer;
  /* Since the content can be clicked on, provide feedback on hover */
}
#mathlive-suggestion-popover li a {
  color: #5ea6fd;
  padding-top: 0.3em;
  margin-top: 0.4em;
  display: block;
}
#mathlive-suggestion-popover li a:hover {
  color: #5ea6fd;
  text-decoration: underline;
}
#mathlive-suggestion-popover li:hover,
#mathlive-suggestion-popover li.is-pressed,
#mathlive-suggestion-popover li.is-active {
  background: rgba(255, 255, 255, 0.1);
}
/* The command inside a popover (inside a #mathlive-suggestion-popover) */
.ML__popover__command {
  font-size: 1.6rem;
  font-family: KaTeX_Main;
}
.ML__popover__current {
  background: #5ea6fd;
  color: #fff;
}
.ML__popover__latex {
  font-family: 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  align-self: center;
}
/* The keyboard shortcuts for a symbol as displayed in the popover */
.ML__popover__keybinding {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 0.8em;
  opacity: 0.7;
}
/* Style for the character that joins the modifiers of a keyboard shortcut 
(usually a "+" sign)*/
.ML__shortcut-join {
  opacity: 0.5;
}
`,ox=`/* The element that displays the keys as the user type them */
#mathlive-keystroke-caption-panel {
  visibility: hidden;
  /*min-width: 160px;*/
  /*background-color: rgba(97, 97, 200, .95);*/
  background: var(--secondary, hsl(var(--_hue), 19%, 26%));
  border-color: var(--secondary-border, hsl(0, 0%, 91%));
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
  text-align: center;
  border-radius: 6px;
  padding: 16px;
  position: absolute;
  z-index: 1;
  display: flex;
  flex-direction: row-reverse;
  justify-content: center;
  --keystroke: white;
  --on-keystroke: #555;
  --keystroke-border: #f7f7f7;
}
@media (prefers-color-scheme: dark) {
  body:not([theme='light']) #mathlive-keystroke-caption-panel {
    --keystroke: hsl(var(--_hue), 50%, 30%);
    --on-keystroke: hsl(0, 0%, 98%);
    --keystroke-border: hsl(var(--_hue), 50%, 25%);
  }
}
body[theme='dark'] #mathlive-keystroke-caption-panel {
  --keystroke: hsl(var(--_hue), 50%, 30%);
  --on-keystroke: hsl(0, 0%, 98%);
  --keystroke-border: hsl(var(--_hue), 50%, 25%);
}
#mathlive-keystroke-caption-panel > span {
  min-width: 14px;
  /*height: 8px;*/
  margin: 0 8px 0 0;
  padding: 4px;
  background-color: var(--keystroke);
  color: var(--on-keystroke);
  fill: currentColor;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 1em;
  border-radius: 6px;
  border: 2px solid var(--keystroke-border);
  /*box-shadow: 0 7px 14px rgba(0,0,0,0.25), 0 5px 5px rgba(0,0,0,0.22);*/
}
`,ok=`.ML__keyboard {
  --_keyboard-height: 0;
  --_keyboard-zindex: var(--keyboard-zindex, 105);
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_padding-horizontal: var(--keyboard-padding-horizontal, 0px);
  --_padding-top: var(--keyboard-padding-top, 5px);
  --_padding-bottom: var(--keyboard-padding-bottom, 0px);
  --_row-padding-left: var(--keyboard-row-padding-left, 0px);
  --_row-padding-right: var(--keyboard-row-padding-right, 0px);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-text-active: var(--keyboard-toolbar-text-active, var(--_accent-color));
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_toolbar-font-size: var(--keyboard-toolbar-font-size, "135%");
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, white);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-primary-background: var(--keycap-primary-background, var(--_accent-color));
  --_keycap-primary-text: var(--keycap-primary-text, #ddd);
  --_keycap-primary-background-hover: var(--keycap-primary-background-hover, #0d80f2);
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_keycap-height: var(--keycap-height, 60px);
  /* Keycap width (incl. margin) */
  --_keycap-max-width: var(--keycap-max-width, 100px);
  --_keycap-gap: var(--keycap-gap, 8px);
  --_keycap-font-size: var(--keycap-font-size, clamp(16px, 4cqw, 24px));
  --_keycap-small-font-size: var(--keycap-small-font-size, calc(var(--keycap-font-size) * 0.8));
  --_keycap-extra-small-font-size: var(--keycap-extra-small-font-size, calc(var(--keycap-font-size) / 1.42));
  --_variant-panel-background: var(--variant-panel-background, #fff);
  --_variant-keycap-text: var(--variant-keycap-text, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
  --_variant-keycap-length: var(--variant-keycap-length, 70px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 30px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 12px);
  --_keycap-shift-font-size: var(--keycap-shift-font-size, 16px);
  --_keycap-shift-color: var(--keycap-shift-color, var(--_accent-color));
  --_box-placeholder-color: var(--box-placeholder-color, var(--_accent-color));
}
.if-can-undo,
.if-can-redo,
.if-can-copy,
.if-can-cut,
.if-can-paste {
  opacity: 0.4;
  pointer-events: none;
}
.can-undo .if-can-undo,
.can-redo .if-can-redo,
.can-copy .if-can-copy,
.can-cut .if-can-cut,
.can-paste .if-can-paste {
  opacity: 1;
  pointer-events: all;
}
body > .ML__keyboard {
  position: fixed;
  --_padding-bottom: calc(var(--_padding-bottom) + env(safe-area-inset-bottom, 0));
}
body > .ML__keyboard.is-visible > .MLK__backdrop {
  box-shadow: 0 -5px 6px rgba(0, 0, 0, 0.08);
  border-top: 1px solid var(--_border);
}
body > .ML__keyboard.backdrop-is-transparent.is-visible > .MLK__backdrop {
  box-shadow: none;
  border: none;
}
body > .ML__keyboard.is-visible.animate > .MLK__backdrop {
  transition: 0.28s cubic-bezier(0, 0, 0.2, 1);
  transition-property: transform, opacity;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__keyboard {
  position: relative;
  overflow: hidden;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  z-index: var(--_keyboard-zindex);
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  opacity: 1;
  transform: none;
  pointer-events: none;
}
.ML__keyboard :where(div) {
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  transform: none;
}
.MLK__backdrop {
  position: absolute;
  bottom: calc(-1 * var(--_keyboard-height));
  width: 100%;
  height: var(--_keyboard-height);
  box-sizing: border-box;
  padding-top: var(--_padding-top);
  padding-bottom: var(--_padding-bottom);
  padding-left: var(--_padding-horizontal);
  padding-right: var(--_padding-horizontal);
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0);
  background: var(--_background);
}
.backdrop-is-transparent .MLK__backdrop {
  background: transparent;
}
/* If a custom layout has a custom container/backdrop
  (backdrop-is-transparent), make sure to let pointer event go through. */
.backdrop-is-transparent .MLK__plate {
  background: transparent;
  pointer-events: none;
}
/* If a custom layout has a custom container/backdrop, make sure to 
   allow pointer events on it. */
.backdrop-is-transparent .MLK__layer > div > div {
  pointer-events: all;
}
.ML__keyboard.is-visible > .MLK__backdrop {
  transform: translate(0, calc(-1 * var(--_keyboard-height)));
  opacity: 1;
  visibility: visible;
}
.caps-lock-indicator {
  display: none;
  width: 8px;
  height: 8px;
  background: #0cbc0c;
  box-shadow: inset 0 0 4px 0 #13ca13, 0 0 4px 0 #a9ef48;
  border-radius: 8px;
  right: 8px;
  top: 8px;
  position: absolute;
}
.ML__keyboard.is-caps-lock .caps-lock-indicator {
  display: block;
}
.ML__keyboard.is-caps-lock .shift {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
}
.MLK__plate {
  position: absolute;
  top: 0;
  left: var(--_padding-horizontal);
  width: calc(100% - 2 * var(--_padding-horizontal));
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  container-type: inline-size;
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
  pointer-events: all;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 16px;
  /* Size of toolbar labels */
  font-weight: 400;
  text-shadow: none;
}
.ML__box-placeholder {
  color: var(--_box-placeholder-color);
}
.MLK__tex {
  font-family: KaTeX_Main, KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__tex-math {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
  font-style: italic;
}
.MLK__layer {
  display: none;
  outline: none;
}
.MLK__layer.is-visible {
  display: flex;
  flex-flow: column;
}
/* Keyboard layouts are made or rows of keys... */
.MLK__rows {
  display: flex;
  flex-flow: column;
  align-items: center;
  border-collapse: separate;
  clear: both;
  border: 0;
  margin: 0;
  margin-bottom: var(--_keycap-gap);
  gap: var(--_keycap-gap);
  /* If the styling include, e.g., some shadows, they will be
  cut off by the overflow. In that case, set the padding to 
  compensate. */
  padding-left: var(--_row-padding-left);
  padding-right: var(--_row-padding-right);
  overflow-x: auto;
  touch-action: none;
}
.MLK__rows > .row {
  display: flex;
  flex-flow: row;
  justify-content: center;
  width: 100%;
  gap: var(--_keycap-gap);
  margin: 0;
  padding: 0;
  /* For the alignment of the text on some modifiers (e.g. shift) */
  /* Extra spacing between two adjacent keys */
  /** A regular keycap */
}
.MLK__rows > .row .tex {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .row .tex-math {
  font-family: KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .row .big-op {
  font-size: calc(1.25 * var(--_keycap-font-size));
}
.MLK__rows > .row .small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__rows > .row .bottom {
  justify-content: flex-end;
}
.MLK__rows > .row .left {
  align-items: flex-start;
  padding-left: 12px;
}
.MLK__rows > .row .right {
  align-items: flex-end;
  padding-right: 12px;
}
.MLK__rows > .row .w0 {
  width: 0;
}
.MLK__rows > .row .w5 {
  width: calc(min(var(--_keycap-max-width, 100px), 10%) / 2 - var(--_keycap-gap));
}
.MLK__rows > .row .w15 {
  width: calc(1.5 * min(var(--_keycap-max-width, 100px), 10%) - var(--_keycap-gap));
}
.MLK__rows > .row .w20 {
  width: calc(2 * min(var(--_keycap-max-width, 100px), 10%) - var(--_keycap-gap));
}
.MLK__rows > .row .w50 {
  width: calc(5 * min(var(--_keycap-max-width, 100px), 10%) - var(--_keycap-gap));
}
.MLK__rows > .row .MLK__keycap.w50 {
  font-size: 80%;
  padding-top: 10px;
  font-weight: 100;
}
.MLK__rows > .row .separator {
  background: transparent;
  border: none;
  pointer-events: none;
}
.MLK__rows > .row .horizontal-rule {
  height: 6px;
  margin-top: 3px;
  margin-bottom: 0;
  width: 100%;
  border-radius: 0;
  border-top: var(--_horizontal-rule);
}
.MLK__rows > .row .ghost {
  background: var(--_toolbar-background);
  border: none;
  color: var(--_toolbar-text);
}
.MLK__rows > .row .ghost:hover {
  background: var(--_toolbar-background-hover);
}
.MLK__rows > .row .bigfnbutton {
  font-size: var(--_keycap-extra-small-font-size);
}
.MLK__rows > .row .shift,
.MLK__rows > .row .action {
  color: var(--_keycap-secondary-text);
  background: var(--_keycap-secondary-background);
  border-color: var(--_keycap-secondary-border);
  border-bottom-color: var(--_keycap-secondary-border-bottom);
  line-height: 0.8;
  font-size: min(1rem, var(--_keycap-small-font-size));
  font-weight: 600;
  padding: 8px 12px 8px 12px;
}
.MLK__rows > .row .shift:hover,
.MLK__rows > .row .action:hover {
  background: var(--_keycap-secondary-background-hover);
}
.MLK__rows > .row .action.primary {
  background: var(--_keycap-primary-background);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .row .action.primary:hover {
  background: var(--_keycap-primary-background-hover);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .row .shift.selected,
.MLK__rows > .row .action.selected {
  color: var(--_toolbar-text-active);
}
.MLK__rows > .row .shift.selected.is-pressed,
.MLK__rows > .row .action.selected.is-pressed,
.MLK__rows > .row .shift.selected.is-active,
.MLK__rows > .row .action.selected.is-active {
  color: white;
}
.MLK__rows > .row .warning {
  background: #cd0030;
  color: white;
}
.MLK__rows > .row .warning svg.svg-glyph {
  width: 24px;
  height: 24px;
  min-height: 24px;
}
.MLK__rows > .row div {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-evenly;
  width: calc(min(var(--_keycap-max-width), 10%) - var(--_keycap-gap));
  height: var(--_keycap-height);
  box-sizing: border-box;
  padding: 0;
  vertical-align: top;
  text-align: center;
  float: left;
  color: var(--_keycap-text);
  fill: currentColor;
  font-size: var(--_keycap-font-size);
  background: var(--_keycap-background);
  border: 1px solid var(--_keycap-border);
  border-bottom-color: var(--_keycap-border-bottom);
  border-radius: 6px;
  cursor: pointer;
  touch-action: none;
  /* Keys with a variants panel */
  position: relative;
  overflow: hidden;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
.MLK__rows > .row div:hover {
  background: var(--_keycap-background-hover);
}
.MLK__rows > .row div .ML__mathlive {
  pointer-events: none;
  touch-action: none;
}
.MLK__rows > .row div svg.svg-glyph {
  margin: 8px 0;
  width: 20px;
  height: 20px;
  min-height: 20px;
}
.MLK__rows > .row div svg.svg-glyph-lg {
  margin: 8px 0;
  width: 24px;
  height: 24px;
  min-height: 24px;
}
.MLK__rows > .row div.MLK__tex-math {
  font-size: 25px;
}
.MLK__rows > .row div.is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
}
.MLK__rows > .row div.MLK__keycap.is-active,
.MLK__rows > .row div.action.is-active,
.MLK__rows > .row div.MLK__keycap.is-pressed,
.MLK__rows > .row div.action.is-pressed {
  z-index: calc(var(--_keyboard-zindex) - 5);
}
.MLK__rows > .row div.MLK__keycap.is-active aside,
.MLK__rows > .row div.action.is-active aside,
.MLK__rows > .row div.MLK__keycap.is-pressed aside,
.MLK__rows > .row div.action.is-pressed aside {
  display: none;
}
.MLK__rows > .row div.MLK__keycap.is-active .MLK__shift,
.MLK__rows > .row div.action.is-active .MLK__shift,
.MLK__rows > .row div.MLK__keycap.is-pressed .MLK__shift,
.MLK__rows > .row div.action.is-pressed .MLK__shift {
  display: none;
}
.MLK__rows > .row div.shift.is-pressed,
.MLK__rows > .row div.MLK__keycap.is-pressed,
.MLK__rows > .row div.action.is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
}
.MLK__rows > .row div.shift.is-active,
.MLK__rows > .row div.MLK__keycap.is-active,
.MLK__rows > .row div.action.is-active {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
}
.MLK__rows > .row div small {
  color: var(--_keycap-secondary-text);
}
.MLK__rows > .row div aside {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 10px;
  line-height: 10px;
  color: var(--_keycap-secondary-text);
}
/* Add an attribute 'data-tooltip' to display a tooltip on hover.
Note there are a different set of tooltip rules for the keyboard toggle
(it's in a different CSS tree) */
.MLK__tooltip {
  position: relative;
}
.MLK__tooltip::after {
  position: absolute;
  display: inline-table;
  content: attr(data-tooltip);
  top: inherit;
  bottom: 100%;
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  background: #616161;
  color: #fff;
  text-align: center;
  z-index: 2;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  border-radius: 2px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-weight: 400;
  font-size: 12px;
  transition: all 0.15s cubic-bezier(0.4, 0, 1, 1) 1s;
  opacity: 0;
  transform: scale(0.5);
}
.MLK__tooltip:hover {
  position: relative;
}
.MLK__tooltip:hover::after {
  opacity: 1;
  transform: scale(1);
}
.MLK__toolbar {
  align-self: center;
  display: flex;
  flex-flow: row;
  justify-content: space-between;
  width: 100%;
  max-width: 996px;
  min-height: 32px;
  /* Icons for undo/redo, etc. */
}
.MLK__toolbar svg {
  height: 20px;
  width: 20px;
}
.MLK__toolbar > .left {
  position: relative;
  display: flex;
  justify-content: flex-start;
  flex-flow: row;
}
.MLK__toolbar > .right {
  display: flex;
  justify-content: flex-end;
  flex-flow: row;
}
.MLK__toolbar > div > div {
  /* "button" in the toolbar */
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--_toolbar-text);
  fill: currentColor;
  background: var(--_toolbar-background);
  font-size: var(--_toolbar-font-size);
  padding: 4px 15px;
  cursor: pointer;
  width: max-content;
  min-width: 42px;
  min-height: 22px;
  border: none;
  padding-left: 10px;
  padding-right: 10px;
  padding-bottom: 8px;
  padding-top: 8px;
  margin-top: 7px;
  margin-bottom: 8px;
  margin-left: 4px;
  margin-right: 4px;
  border-radius: 8px;
  box-shadow: none;
  border-bottom: 2px solid transparent;
}
.MLK__toolbar > div > div:not(.disabled):not(.selected):hover {
  background: var(--_toolbar-background-hover);
}
.MLK__toolbar > div > div.disabled svg,
.MLK__toolbar > div > div.disabled:hover svg,
.MLK__toolbar > div > div.disabled.is-pressed svg {
  color: var(--_toolbar-text);
  opacity: 0.2;
}
.MLK__toolbar > div > div:hover,
.MLK__toolbar > div > div:active,
.MLK__toolbar > div > div.is-pressed,
.MLK__toolbar > div > div.is-active {
  color: var(--_toolbar-text-active);
}
.MLK__toolbar > div > div.selected {
  color: var(--_toolbar-text-active);
  background: var(--_toolbar-background-selected);
  border-radius: 0;
  border-bottom-color: var(--_toolbar-text-active);
  padding-bottom: 4px;
  margin-bottom: 12px;
}
/* This is the element that displays variants on press+hold */
.MLK__variant-panel {
  visibility: hidden;
  position: fixed;
  display: flex;
  flex-flow: row wrap-reverse;
  justify-content: center;
  align-content: center;
  margin: 0;
  padding: 0;
  bottom: auto;
  top: 0;
  box-sizing: content-box;
  transform: none;
  z-index: calc(var(--_keyboard-zindex) + 1);
  touch-action: none;
  max-width: 350px;
  background: var(--_variant-panel-background);
  text-align: center;
  border-radius: 6px;
  padding: 6px;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
  transition: none;
}
.MLK__variant-panel.is-visible {
  visibility: visible;
}
.MLK__variant-panel.compact {
  --_variant-keycap-length: var(--variant-keycap-length, 50px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 10px);
}
.MLK__variant-panel .item {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: center;
  font-size: var(--_variant-keycap-font-size);
  height: var(--_variant-keycap-length);
  width: var(--_variant-keycap-length);
  margin: 0;
  box-sizing: border-box;
  border-radius: 5px;
  border: 1px solid transparent;
  background: transparent;
  pointer-events: all;
  cursor: pointer;
  color: var(--_variant-keycap-text);
  fill: currentColor;
}
@media (max-height: 412px) {
  .MLK__variant-panel .item {
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
.MLK__variant-panel .item .ML__mathlive {
  pointer-events: none;
}
.MLK__variant-panel .item.is-active {
  background: var(--_variant-keycap-background-active);
  color: var(--_variant-keycap-text-active);
}
.MLK__variant-panel .item.is-pressed {
  background: var(--_variant-keycap-background-pressed);
  color: var(--_variant-keycap-text-pressed);
}
.MLK__variant-panel .item.small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__variant-panel .item.swatch-button {
  box-sizing: border-box;
  background: #fbfbfb;
}
.MLK__variant-panel .item.swatch-button > span {
  display: inline-block;
  margin: 6px;
  width: calc(100% - 12px);
  height: calc(100% - 12px);
  border-radius: 50%;
}
.MLK__variant-panel .item.swatch-button:hover {
  background: #f0f0f0;
}
.MLK__variant-panel .item.swatch-button:hover > span {
  border-radius: 2px;
}
.MLK__variant-panel .item.box > div,
.MLK__variant-panel .item.box > span {
  border: 1px dashed rgba(0, 0, 0, 0.24);
}
.MLK__variant-panel .item .warning {
  min-height: 60px;
  min-width: 60px;
  background: #cd0030;
  color: white;
  padding: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 5px;
}
.MLK__variant-panel .item .warning.is-pressed,
.MLK__variant-panel .item .warning.is-active {
  background: red;
}
.MLK__variant-panel .item .warning svg.svg-glyph {
  width: 50px;
  height: 50px;
}
.MLK__variant-panel .item aside {
  font-size: var(--_variant-keycap-aside-font-size);
  line-height: 12px;
  opacity: 0.78;
  padding-top: 2px;
}
.MLK__keycap {
  position: relative;
}
.MLK__shift {
  display: block;
  position: absolute;
  right: 4px;
  top: 4px;
  font-size: var(--_keycap-shift-font-size);
  color: var(--_keycap-shift-color);
}
.hide-shift .MLK__shift {
  display: none;
}
@media (max-width: 414px) {
  .MLK__variant-panel {
    max-width: 350px;
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
/* @xs breakpoint: iPhone 5 */
@container (max-width: 414px) {
  .MLK__rows {
    --_keycap-gap: min(var(--_keycap-gap, 2px), 2px);
    --_keycap-height: min(var(--_keycap-height, 42px), 42px);
    --_keycap-max-width: min(var(--_keycap-max-width, 62px), 62px);
  }
  .MLK__toolbar > div > div {
    font-size: 100%;
    padding: 0;
    margin-left: 2px;
    margin-right: 2px;
  }
  .MLK__rows .shift,
  .MLK__rows .action {
    font-size: 65%;
  }
  .MLK__rows .warning svg.svg-glyph {
    width: 14px;
    height: 14px;
    min-height: 14px;
  }
}
@container (max-width: 744px) {
  .MLK__rows {
    --_keycap-gap: min(var(--keycap-gap, 2px), 2px);
    --_keycap-height: min(var(--keycap-height, 52px), 52px);
    --_keycap-max-width: min(var(--keycap-max-width, 62px), 62px);
  }
  .MLK__toolbar > div > div {
    padding-left: 0;
    padding-right: 0;
  }
  .MLK__tooltip::after {
    padding: 8px 16px;
    font-size: 16px;
  }
  .MLK__rows > .row > div.fnbutton {
    font-size: 16px;
  }
  .MLK__rows > .row > div.bigfnbutton {
    font-size: calc(var(--_keycap-extra-small-font-size) / 1.55);
  }
  .MLK__rows > .row > div.small {
    font-size: 13px;
  }
  .MLK__rows > .row > div > aside {
    display: none;
  }
  .MLK__shift {
    display: none;
  }
}
/* Medium breakpoint: larger phones */
@container (max-width: 768px) {
  .MLK__rows {
    --_keycap-height: min(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .row > div > small {
    font-size: 14px;
  }
}
@container (max-width: 1444px) {
  .MLK__rows .if-wide {
    display: none;
  }
}
@media (prefers-color-scheme: dark) {
  .ML__keyboard {
    --_accent-color: var(--keyboard-accent-color, #0b5c9c);
    --_background: var(--keyboard-background, #151515);
    --_border: var(--keyboard-border, transparent);
    --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
    --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
    --keyboard-toolbar-background-hover: #303030;
    --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
    --_keycap-background: var(--keycap-background, #1f2022);
    --_keycap-background-hover: var(--keycap-background, #2f3032);
    --_keycap-border: var(--_keycap-border, transparent);
    --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
    --_keycap-text: var(--keycap-text, #e3e4e8);
    --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
    --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
    --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
    --keycap-secondary-border: transparent;
    --keycap-secondary-border-bottom: transparent;
    --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
    --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
    --_variant-panel-background: var(--variant-panel-background, #303030);
    --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
  }
}
/* Same as the media query, but with a class */
[theme='dark'] .ML__keyboard .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0b5c9c);
  --_background: var(--keyboard-background, #151515);
  --_border: var(--keyboard-border, transparent);
  --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
  --keyboard-toolbar-background-hover: #303030;
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
  --_keycap-background: var(--keycap-background, #1f2022);
  --_keycap-background-hover: var(--keycap-background, #2f3032);
  --_keycap-border: var(--_keycap-border, transparent);
  --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
  --_keycap-text: var(--keycap-text, #e3e4e8);
  --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
  --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
  --keycap-secondary-border: transparent;
  --keycap-secondary-border-bottom: transparent;
  --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
  --_variant-panel-background: var(--variant-panel-background, #303030);
  --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
}
[theme='light'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, white);
  --_keycap-background-hover: var(--keycap-background, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--_keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--_keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_variant-panel-background: var(--variant-panel-background, #fff);
  --_variant-keycap-text: var(--variant-keycap-textvar, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
}
`;function gi(t){let r="";switch(t){case"mathfield-element":r=`
    :host { display: inline-block; background-color: field; color: fieldtext; border-width: 1px; border-style: solid; border-color: #acacac; border-radius: 2px; padding:4px; pointer-events: none;}
    :host([hidden]) { display: none; }
    :host([disabled]), :host([disabled]:focus), :host([disabled]:focus-within) { outline: none; opacity:  .5; }
    :host(:focus), :host(:focus-within) {
      outline: Highlight auto 1px;    /* For Firefox */
      outline: -webkit-focus-ring-color auto 1px;
    }
    :host([readonly]:focus), :host([readonly]:focus-within),
    :host([read-only]:focus), :host([read-only]:focus-within) {
      outline: none;
    }`;break;case"core":r=og;break;case"mathfield":r=oy;break;case"environment-popover":r=ob;break;case"suggestion-popover":r=ov;break;case"keystroke-caption":r=ox;break;case"virtual-keyboard":r=ok}return r}function vo(t){return nh||(nh={}),nh[t]||(nh[t]=new CSSStyleSheet,nh[t].replaceSync(gi(t))),nh[t]}function Pe(t){var r;if(!("adoptedStyleSheets"in document)){if(window.document.getElementById(`mathlive-style-${t}`))return;let r=window.document.createElement("style");r.id=`mathlive-style-${t}`,r.append(window.document.createTextNode(gi(t))),window.document.head.appendChild(r);return}if(np||(np={}),(null!=(r=np[t])?r:0)!==0)np[t]+=1;else{let r=vo(t);document.adoptedStyleSheets=[...document.adoptedStyleSheets,r],np[t]=1}}function Ne(t){if("adoptedStyleSheets"in document&&null!=np&&np[t]&&(np[t]-=1,np[t]<=0)){let r=nh[t];document.adoptedStyleSheets=document.adoptedStyleSheets.filter(t=>t!==r)}}var ow=class e extends on{constructor(t){var r;super(g(m({},t),{type:"accent",body:null!=(r=t.body)?r:void 0})),t.accentChar?this.accent=t.accentChar:this.svgAccent=null==t?void 0:t.svgAccent,this.skipBoundary=!0,this.captureSelection=!0}static fromJson(t){return new e(t)}toJson(){return g(m({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(t){var r;let a=new oa({parent:t,mathstyle:"cramp"},this.style),n=null!=(r=on.createBox(a,this.body))?r:new a5("▢",{style:this.style}),s=0;!this.hasEmptyBranch("body")&&2===this.body.length&&this.body[1].isCharacterBox()&&(s=n.skew);let l=Math.min(n.height,.431),c;if(this.svgAccent)c=di(this.svgAccent),l=a.metrics.bigOpSpacing1-l;else if(this.accent){let t=new a5(this.accent,{fontFamily:"Main-Regular"});t.italic=0;let r=8407===this.accent?" ML__accent-vec":"";c=new a5(new a5(t),{classes:"ML__accent-body"+r})}c=new a7({shift:0,children:[{box:new a5(n)},-l,{box:c,marginLeft:n.left+2*s,classes:["ML__center"]}]});let d=new a5(c,{type:"lift"});return this.caret&&(d.caret=this.caret),this.bind(a,d.wrap(a)),this.attachSupsub(a,{base:d})}},o_={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},oS=Object.fromEntries(Object.entries(o_).map(([t,r])=>[r,t]));function Qn(t){var r;return null!=(r=({"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"∣":8739,"∥":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730})[t])?r:t.codePointAt(0)}function Xd(t,r,a,n,s){var l,c;let d=new oa({parent:n,mathstyle:"textstyle"},null==s?void 0:s.style),h=new a5(Qn(t),{fontFamily:`Size${r}-Regular`,isSelected:s.isSelected,classes:(null!=(l=s.classes)?l:"")+` ML__delim-size${r}`,type:null!=(c=s.type)?c:"ignore"}).wrap(d);return a&&h.setTop((1-d.scalingFactor)*.25),h}function Zd(t,r,a,n,s){var l;let c,d,h,p;c=h=p=Qn(t),d=null;let y="Size1-Regular";"\\vert"===t||"\\lvert"===t||"\\rvert"===t||"\\mvert"===t||"\\mid"===t?h=c=p=8739:"\\Vert"===t||"\\lVert"===t||"\\rVert"===t||"\\mVert"===t||"\\|"===t?h=c=p=8741:"\\uparrow"===t?h=p=9168:"\\Uparrow"===t?h=p=8214:"\\downarrow"===t?c=h=9168:"\\Downarrow"===t?c=h=8214:"\\updownarrow"===t?(c=8593,h=9168,p=8595):"\\Updownarrow"===t?(c=8657,h=8214,p=8659):"["===t||"\\lbrack"===t?(c=9121,h=9122,p=9123,y="Size4-Regular"):"]"===t||"\\rbrack"===t?(c=9124,h=9125,p=9126,y="Size4-Regular"):"\\lfloor"===t||"⌊"===t?(h=c=9122,p=9123,y="Size4-Regular"):"\\lceil"===t||"⌈"===t?(c=9121,h=p=9122,y="Size4-Regular"):"\\rfloor"===t||"⌋"===t?(h=c=9125,p=9126,y="Size4-Regular"):"\\rceil"===t||"⌉"===t?(c=9124,h=p=9125,y="Size4-Regular"):"("===t||"\\lparen"===t?(c=9115,h=9116,p=9117,y="Size4-Regular"):")"===t||"\\rparen"===t?(c=9118,h=9119,p=9120,y="Size4-Regular"):"\\{"===t||"\\lbrace"===t?(c=9127,d=9128,p=9129,h=9130,y="Size4-Regular"):"\\}"===t||"\\rbrace"===t?(c=9131,d=9132,p=9133,h=9130,y="Size4-Regular"):"\\lgroup"===t||"⟮"===t?(c=9127,p=9129,h=9130,y="Size4-Regular"):"\\rgroup"===t||"⟯"===t?(c=9131,p=9133,h=9130,y="Size4-Regular"):"\\lmoustache"===t||"⎰"===t?(c=9127,p=9133,h=9130,y="Size4-Regular"):"\\rmoustache"===t||"⎱"===t?(c=9131,p=9129,h=9130,y="Size4-Regular"):"\\surd"===t?(c=57345,p=9143,h=57344,y="Size4-Regular"):"\\ulcorner"===t?(c=9484,h=p=32):"\\urcorner"===t?(c=9488,h=p=32):"\\llcorner"===t?(p=9492,h=c=32):"\\lrcorner"===t&&(c=9496,h=c=32);let v=Tt(c,y),k=v.height+v.depth,w=Tt(h,y),_=w.height+w.depth,S=Tt(p,y),M=S.height+S.depth,C=0,z=1;if(null!==d){let t=Tt(d,y);C=t.height+t.depth,z=2}let A=k+M+C,E=Math.max(0,Math.ceil((r-A)/(z*_))),T=A+E*z*_,$=.25;a&&($*=n.scalingFactor);let P=T/2-$,q=[];q.push({box:new a5(p,{fontFamily:y})}),q.push(-.008);let F=new a5(h,{fontFamily:y});if(null===d)for(let t=0;t<E;t++)q.push({box:F});else{for(let t=0;t<E;t++)q.push({box:F});q.push(-.008),q.push({box:new a5(d,{fontFamily:y})}),q.push(-.008);for(let t=0;t<E;t++)q.push({box:F})}q.push(-.008),q.push({box:new a5(c,{fontFamily:y})});let R="";"Size1-Regular"===y?R=" delim-size1":"Size4-Regular"===y&&(R=" delim-size4");let V=new a7({bottom:P,children:q},{classes:R});return new a5(V,g(m({},null!=s?s:{}),{classes:(null!=(l=null==s?void 0:s.classes)?l:"")+" ML__delim-mult"}))}var oM=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","⌊","⌋","⌈","⌉"]),oL=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","⟮","⟯","⎰","⎱"]),oC=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),oz=[0,1.2,1.8,2.4,3],oA=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],oD=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],oK=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function xi(t,r,a,n,s,l){var c,d,h;let p,y;if(!r||0===r.length||"."===r)return Dt(s);"<"===r||"\\lt"===r?r="\\langle":(">"===r||"\\gt"===r)&&(r="\\rangle"),p=oC.has(r)?oA:oM.has(r)?oK:oD;let v=function(t,r,a,n){let s={"-4":0,"-3":1,0:2}[n.mathstyle.sizeDelta];for(let c=s;c<a.length&&"stack"!==a[c].type;c++){var l;let s=Tt(t,"small"===(l=a[c]).type?"Main-Regular":"large"===l.type?"Size"+l.size+"-Regular":(l.type,"Size4-Regular"));if(s.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let d=s.height+s.depth;if("small"===a[c].type&&("scriptscriptstyle"===a[c].mathstyle?d*=Math.max(aG[Math.max(1,n.size-2)],n.minFontScale):"scriptstyle"===a[c].mathstyle&&(d*=Math.max(aG[Math.max(1,n.size-1)],n.minFontScale))),d>r)return a[c]}return a[a.length-1]}(Qn(r),a,p,s),k=new oa({parent:s,mathstyle:v.mathstyle},null==l?void 0:l.style);return"small"===v.type?(c=r,d=g(m({},l),{type:t}),y=new a5(Qn(c),{fontFamily:"Main-Regular",isSelected:d.isSelected,classes:"ML__small-delim "+(null!=(h=d.classes)?h:"")}).wrap(k),n&&y.setTop((1-k.scalingFactor)*.25),y):"large"===v.type?Xd(r,v.size,n,k,g(m({},l),{type:t})):(v.type,Zd(r,a,n,k,g(m({},l),{type:t})))}function Er(t,r,a,n,s,l){if("."===r)return Dt(s,null==l?void 0:l.classes);let c=.25*s.scalingFactor,d=Math.max(a-c,n+c);return xi(t,r,Math.max(d/500*901,2*d-.5),!0,s,l)}function Dt(t,r){return new a5(null,{classes:" nulldelimiter "+(null!=r?r:""),type:"ignore",width:t.getRegisterAsEm("nulldelimiterspace")}).wrap(new oa({parent:t,mathstyle:"textstyle"}))}var oE=class e extends on{constructor(t){var r;super({type:"placeholder",command:"\\placeholder",mode:null!=(r=null==t?void 0:t.mode)?r:"math",style:null==t?void 0:t.style}),this.captureSelection=!0}static fromJson(t){return new e(t)}toJson(){return super.toJson()}render(t){let r;return this.value=t.placeholderSymbol,r="function"==typeof t.renderPlaceholder?t.renderPlaceholder(t):this.createBox(t),this.caret&&(r.classes+=" ML__placeholder-selected"),r}_serialize(){return"\\placeholder{}"}},oT=["matrix","matrix*","pmatrix","pmatrix*","bmatrix","bmatrix*","Bmatrix","Bmatrix*","vmatrix","vmatrix*","Vmatrix","Vmatrix*"],oB=["cases","dcases","rcases"],o$=["align","align*","aligned","gather","gathered","split"],oP=["array","subequations","eqnarray"];function ea(t){return oT.includes(t)}var oO=class e extends on{constructor(t,r,a,n={}){var s;super({type:"array"}),this.environmentName=t,this.rowGaps=a,n.mathstyleName&&(this.mathstyleName=n.mathstyleName),n.columns&&(0===n.columns.length?this.colFormat=[{align:"l"}]:this.colFormat=n.columns),this.colFormat||(this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]),this.array=function(t,r,a){let n=0;for(let t of a)"align"in t&&(n+=1);let s=0,l=[];for(let a of r){let r=0;for(s=Math.max(s,Math.min(a.length,n));r<a.length;){let s=[],c=Math.min(a.length,r+n);for(;r<c;){let n=a[r];0===n.length?s.push([new on({type:"first",mode:t.mode})]):"first"!==n[0].type?s.push([new on({type:"first",mode:t.mode}),...n]):(n.slice(1).some(t=>"first"===t.type),s.push(n)),r+=1}l.push(s)}}l.length>0&&1===l[l.length-1].length&&1===l[l.length-1][0].length&&"first"===l[l.length-1][0][0].type&&l.pop();let c=[];for(let r of l){if(r.length!==s)for(let a=r.length;a<s;a++)r.push([new on({type:"first",mode:t.mode}),new oE]);c.push(r)}let d=0,h=0;for(let r of c){for(let a of(h=0,r)){for(let r of a)r.parent=t,r.parentBranch=[d,h];h+=1}d+=1}return t.isDirty=!0,c}(this,r,this.colFormat),n.leftDelim&&(this.leftDelim=n.leftDelim),n.rightDelim&&(this.rightDelim=n.rightDelim),void 0!==n.arraycolsep&&(this.arraycolsep=n.arraycolsep),this.colSeparationType=n.colSeparationType,void 0!==n.arraystretch&&(this.arraystretch=n.arraystretch),this.minColumns=null!=(s=n.minColumns)?s:1}static fromJson(t){return new e(t.environmentName,t.array,t.rowGaps,t)}toJson(){let t=g(m({},super.toJson()),{environmentName:this.environmentName,array:this.array.map(t=>t.map(t=>t.map(t=>t.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType});return void 0!==this.arraystretch&&(t.arraystretch=this.arraystretch),void 0!==this.arraycolsep&&(t.arraycolsep=this.arraycolsep),this.leftDelim&&(t.leftDelim=this.leftDelim),this.rightDelim&&(t.rightDelim=this.rightDelim),t}branch(t){var r;if(yo(t))return null!=(r=this.array[t[0]][t[1]])?r:void 0}createBranch(t){var r;return yo(t)?(this.isDirty=!0,null!=(r=this.branch(t))?r:[]):[]}get rowCount(){return this.array.length}get colCount(){return this.array[0].length}get maxColumns(){return this.colFormat.filter(t=>!!t.align).length}removeBranch(t){if(nr(t))return super.removeBranch(t);let r=this.branch(t);return this.array[t[0]][t[1]]=void 0,r.forEach(t=>{t.parent=void 0,t.parentBranch=void 0}),r[0].type,r.shift(),this.isDirty=!0,r}get hasChildren(){return this.children.length>0}get children(){let t=[];for(let r of this.array)for(let a of r)if(a)for(let r of a)t.push(...r.children),t.push(r);return[...t,...super.children]}render(t){var r,a,n,s,l,c;let d=new oa({parent:t,mathstyle:this.mathstyleName},this.style),h=d.getRegisterAsEm("arrayrulewidth"),p=d.getRegisterAsEm("arraycolsep"),y=d.getRegisterAsEm("doublerulesep"),v=null!=(a=null!=(r=this.arraystretch)?r:d.getRegisterAsNumber("arraystretch"))?a:1,k="number"==typeof this.arraycolsep?this.arraycolsep:p;"small"===this.colSeparationType&&(k=.2778*(new oa({parent:t,mathstyle:"scriptstyle"}).scalingFactor/t.scalingFactor));let w=1.2*v,_=.7*w,S=.3*w,M=0,C=[],z=0,A=this.array.length;for(let t=0;t<A;++t){let r=this.array[t];z=Math.max(z,r.length);let a=new oa({parent:d,mathstyle:this.mathstyleName},this.style),l=_/a.scalingFactor,c=S/a.scalingFactor,h={cells:[],height:0,depth:0,pos:0};for(let t of r){let r=null!=(n=on.createBox(a,t,{type:"ignore"}))?n:new a5(null,{type:"ignore"});c=Math.max(c,r.depth),l=Math.max(l,r.height),h.cells.push(r)}let p=null!=(s=Jn(this.rowGaps[t]))?s:0;p>0&&(p+=S,c=Math.max(c,p),p=0),t<A-1&&!ea(this.environmentName)&&"cases"!==this.environmentName&&"array"!==this.environmentName&&(c+=d.getRegisterAsEm("jot")),h.height=l,h.depth=c,M+=l,h.pos=M,M+=c+p,C.push(h)}let E=M/2+.25,T=[];for(let t=0;t<z;t++){let r=[];for(let a of C){let n=a.cells[t];n.depth=a.depth,n.height=a.height,r.push({box:n,shift:a.pos-E})}r.length>0&&T.push(new a7({individualShift:r}))}let $=[],P=!1,q=!1,F=0,R=!this.leftDelim,{colFormat:V}=this;for(let r of V){if("align"in r&&F>=T.length)break;if("align"in r)P?$.push(ra(2*k)):(q||R)&&$.push(ra(k)),$.push(new a5(T[F],{classes:"col-align-"+r.align})),F++,P=!0,q=!1,R=!1;else if("gap"in r){if("number"==typeof r.gap)$.push(ra(r.gap));else{let a=function(t,r,a,n){if(!n)return null;let s=[];for(let l of r){let r=on.createBox(t,n,{type:"ignore"});r&&(r.depth=l.depth,r.height=l.height,s.push({box:r,shift:l.pos-a}))}return new a7({individualShift:s}).wrap(t)}(t,C,E,r.gap);a&&$.push(a)}P=!1,q=!1,R=!1}else if("separator"in r){let t=new a5(null,{classes:"vertical-separator"});t.setStyle("height",M,"em"),t.setStyle("border-right",`${h}em ${r.separator} currentColor`),t.setStyle("vertical-align",-(M-E),"em");let a=0;q?a=y-h:P&&(a=k-h),t.left=a,$.push(t),P=!1,q=!0,R=!1}}P&&!this.rightDelim&&$.push(ra(k));let j=new a5($,{classes:"mtable"});if((!this.leftDelim||"."===this.leftDelim)&&(!this.rightDelim||"."===this.rightDelim))return this.caret&&(j.caret=this.caret),this.bind(t,j);let H=j.height,W=j.depth,X=this.bind(t,new a5([this.bind(t,Er("open",null!=(l=this.leftDelim)?l:".",H,W,d,{isSelected:this.isSelected})),j,this.bind(t,Er("close",null!=(c=this.rightDelim)?c:".",H,W,d,{isSelected:this.isSelected}))],{type:"ord"}));return X?(this.caret&&(X.caret=this.caret),this.bind(t,this.attachSupsub(t,{base:X}))):null}_serialize(t){var r;let a=[`\\begin{${this.environmentName}}`];if("array"===this.environmentName){if(a.push("{"),void 0!==this.colFormat)for(let t of this.colFormat)"align"in t&&"string"==typeof t.align?a.push(t.align):"separator"in t&&"solid"===t.separator?a.push("|"):"separator"in t&&"dashed"===t.separator&&a.push(":");a.push("}")}for(let n=0;n<this.array.length;n++){for(let r=0;r<this.array[n].length;r++)r>0&&a.push(" & "),a.push(on.serialize(this.array[n][r],t));if(n<this.array.length-1){let t=this.rowGaps[n];null!=t&&t.dimension?a.push(`\\\\[${t.dimension} ${null!=(r=t.unit)?r:"pt"}] `):a.push("\\\\ ")}}return a.push(`\\end{${this.environmentName}}`),D(a)}getCell(t,r){return this.array[t][r]}setCell(t,r,a){for(let a of("array"===this.type&&Array.isArray(this.array)&&this.array[t][r],this.array[t][r]))a.parent=void 0,a.parentBranch=void 0;let n=a;for(let s of((0===a.length||"first"!==a[0].type)&&(n=[new on({type:"first",mode:this.mode}),...a]),this.array[t][r]=n,n))s.parent=this,s.parentBranch=[t,r];this.isDirty=!0}addRowBefore(t){"array"===this.type&&Array.isArray(this.array);let r=[];for(let t=0;t<this.colCount;t++)r.push(ta(this));this.array.splice(t,0,r);for(let r=t;r<this.rowCount;r++)for(let t=0;t<this.colCount;t++){let a=this.array[r][t];if(a)for(let n of a)n.parentBranch=[r,t]}this.isDirty=!0}addRowAfter(t){"array"===this.type&&Array.isArray(this.array);let r=[];for(let t=0;t<this.colCount;t++)r.push(ta(this));this.array.splice(t+1,0,r);for(let r=t+1;r<this.rowCount;r++)for(let t=0;t<this.colCount;t++){let a=this.array[r][t];if(a)for(let n of a)n.parentBranch=[r,t]}this.isDirty=!0}removeRow(t){for(let r of("array"===this.type&&Array.isArray(this.array)&&this.rowCount,this.array.splice(t,1)))for(let t of r)if(t)for(let r of t)r.parent=void 0,r.parentBranch=void 0;for(let r=t;r<this.rowCount;r++)for(let t=0;t<this.colCount;t++){let a=this.array[r][t];if(a)for(let n of a)n.parentBranch=[r,t]}this.isDirty=!0}addColumnBefore(t){for(let r of("array"===this.type&&Array.isArray(this.array),this.array))r.splice(t,0,ta(this));for(let r=0;r<this.rowCount;r++)for(let a=t;a<this.colCount;a++){let t=this.array[r][a];if(t)for(let n of t)n.parentBranch=[r,a]}this.isDirty=!0}addColumnAfter(t){for(let r of("array"===this.type&&Array.isArray(this.array),this.array))r.splice(t+1,0,ta(this));for(let r=0;r<this.rowCount;r++)for(let a=t+1;a<this.colCount;a++){let t=this.array[r][a];if(t)for(let n of t)n.parentBranch=[r,a]}this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(t){for(let r of("array"===this.type&&Array.isArray(this.array)&&this.colCount,this.array))for(let a of r.splice(t,1))if(a)for(let t of a)t.parent=void 0,t.parentBranch=void 0;for(let r=0;r<this.rowCount;r++)for(let a=t;a<this.colCount;a++){let t=this.array[r][a];if(t)for(let n of t)n.parentBranch=[r,a]}this.isDirty=!0}get cells(){let t=[];for(let r of this.array)for(let a of r)a&&t.push(a.filter(t=>"first"!==t.type));return t}};function ta(t){let r=new on({type:"first",mode:t.mode});r.parent=t;let a=new oE;return a.parent=t,[r,a]}function ra(t){return new a5(null,{classes:"arraycolsep",width:t})}var oN=class e extends on{constructor(t){super({mode:t.mode,command:t.command,style:t.style,body:t.body,type:"box"}),this.framecolor=t.framecolor,this.backgroundcolor=t.backgroundcolor,this.padding=t.padding,this.offset=t.offset,this.border=t.border}static fromJson(t){return new e(t)}toJson(){return g(m({},super.toJson()),{framecolor:this.framecolor,backgroundcolor:this.backgroundcolor,padding:this.padding,offset:this.offset,border:this.border})}render(t){var r,a,n,s;let l=on.createBox(t,this.body,{type:"lift"});if(!l)return null;let c=t.toEm(null!=(r=this.offset)?r:{dimension:0});l.depth+=c;let d=new oa({parent:t},this.style),h=d.toEm(null!=(a=this.padding)?a:{register:"fboxsep"}),p=new a5(null,{classes:"ML__box"});p.height=l.height+h,p.depth=l.depth+h,p.setStyle("box-sizing","border-box"),p.setStyle("position","absolute"),p.setStyle("top",-h+.3,"em"),p.setStyle("height",p.height+p.depth,"em"),p.setStyle("left",0),p.setStyle("width","100%"),this.backgroundcolor&&p.setStyle("background-color",null!=(n=d.toColor(this.backgroundcolor))?n:"transparent"),this.framecolor&&p.setStyle("border",`${d.getRegisterAsEm("fboxrule",2)}em solid ${null!=(s=d.toColor(this.framecolor))?s:"black"}`),this.border&&p.setStyle("border",this.border),l.setStyle("display","inline-block"),l.setStyle("position","relative"),l.setStyle("height",l.height+l.depth,"em"),l.setStyle("vertical-align",-l.height,"em");let y=new a5([p,l],{type:"lift"});return y.setStyle("display","inline-block"),y.setStyle("position","relative"),y.setStyle("line-height",0),y.height=l.height+h+(c>0?c:0),y.depth=l.depth+h+(c<0?-c:0),y.setStyle("padding-left",h,"em"),y.setStyle("padding-right",h,"em"),y.setStyle("height",l.height+l.depth+2*h+Math.abs(c),"em"),y.setStyle("margin-top",-h,"em"),y.setStyle("top",l.depth-l.height+2*h-c,"em"),y.setStyle("vertical-align",l.depth+2*h,"em"),this.caret&&(y.caret=this.caret),this.attachSupsub(t,{base:y})}_serialize(t){return t.skipStyles?D([this.bodyToLatex(t),this.supsubToLatex(t)]):super._serialize(t)}},oq=class e extends on{constructor(t,r){var a;super({type:"composition",mode:null!=(a=null==r?void 0:r.mode)?a:"math",value:t})}static fromJson(t){return new e(t.value,t)}toJson(){return super.toJson()}get computedStyle(){return{}}render(t){let r=new a5(this.value,{classes:"ML__composition",type:"composition"});return this.bind(t,r),this.caret&&(r.caret=this.caret),r}_serialize(t){return""}},oF=class e extends on{constructor(t){super({type:"error",value:t,command:t,mode:"math"}),this.verbatimLatex=t}static fromJson(t){return new e(t.command)}toJson(){return super.toJson()}render(t){let r=this.createBox(t,{classes:"ML__error"});return this.caret&&(r.caret=this.caret),r}},oR=class e extends on{constructor(t,r,a){super({type:"group",mode:r,style:a}),this.body=t,this.boxType=t.length>1?"ord":"ignore",this.skipBoundary=!0,this.displayContainsHighlight=!1,t&&1===t.length&&","===t[0].command&&(this.captureSelection=!0)}static fromJson(t){return new e(t.body,t.mode,t.style)}render(t){let r=on.createBox(t,this.body,{type:this.boxType});return r?(this.caret&&(r.caret=this.caret),this.bind(t,r)):null}_serialize(t){if(!(t.expandMacro||t.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let r=ee(this.command,this.mode);return null!=r&&r.serialize?r.serialize(this,t):`{${this.bodyToLatex(t)}}`}},oI=class e extends on{constructor(t,r,a){super({type:"leftright",style:a.style,displayContainsHighlight:!0}),this.variant=t,this.body=r,this.leftDelim=a.leftDelim,this.rightDelim=a.rightDelim}static fromJson(t){var r;return new e(null!=(r=t.variant)?r:"",t.body,t)}toJson(){let t=super.toJson();return this.variant&&(t.variant=this.variant),this.leftDelim&&(t.leftDelim=this.leftDelim),this.rightDelim&&(t.rightDelim=this.rightDelim),t}_serialize(t){var r,a;let n=this.matchingRightDelim();return"left...right"===this.variant?D(["\\left",null!=(r=this.leftDelim)?r:".",this.bodyToLatex(t),"\\right",n]):"mleft...mright"===this.variant?D(["\\mleft",null!=(a=this.leftDelim)?a:".",this.bodyToLatex(t),"\\mright",n]):D([this.leftDelim&&"."!==this.leftDelim?this.leftDelim:"",this.bodyToLatex(t),n])}matchingRightDelim(){var t,r;if(this.rightDelim&&"?"!==this.rightDelim)return this.rightDelim;let a=null!=(t=this.leftDelim)?t:".";return null!=(r=o_[a])?r:a}render(t){var r,a,n;let s=new oa({parent:t},this.style);this.body;let l=new oa({parent:t,mathstyle:"textstyle"},this.style),c=null!=(r=on.createBox(s,this.body,{type:"inner"}))?r:new a5(null,{type:"inner"}),d=c.height/l.scalingFactor,h=c.depth/l.scalingFactor,p=[];if(this.leftDelim&&p.push(this.bind(l,Er("open",this.leftDelim,d,h,l,{isSelected:this.isSelected,classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),c&&(function s0(t,r,a,n,s){if(t)for(let l=0;l<t.length;l++){let c=t[l];"middle"===c.type?(t[l]=r.bind(a,Er("inner",c.value,n,s,a,{isSelected:r.isSelected})),t[l].caret=c.caret,t[l].isSelected=c.isSelected,t[l].cssId=c.cssId,t[l].htmlData=c.htmlData,t[l].htmlStyle=c.htmlStyle,t[l].attributes=c.attributes,t[l].cssProperties=c.cssProperties):c.children&&s0(c.children,r,a,n,s)}}(c.children,this,s,d,h),p.push(c)),this.rightDelim){let t=this.containsCaret?" ML__contains-caret":"",r=this.rightDelim;"?"===r&&(s.smartFence?(r=this.matchingRightDelim(),t+=" ML__smart-fence__close"):r="."),p.push(this.bind(l,Er("close",r,d,h,l,{isSelected:this.isSelected,classes:t+" ML__close",mode:this.mode,style:this.style})))}let y=null!=(n="mleft...mright"===this.variant||(null==(a=this.leftSibling)?void 0:a.isFunction))&&n,v=new a5(p,{type:y?"close":"inner",classes:"left-right"});return this.caret&&(v.caret=this.caret),this.bind(s,v.wrap(s))}},oV=class e extends on{constructor(t,r){var a;super({type:"macro",command:t,style:r.style}),this.body=r.body,void 0===r.captureSelection?r.args?this.captureSelection=!1:this.captureSelection=!0:this.captureSelection=r.captureSelection,this.macroArgs=r.args,this.expand=null!=(a=r.expand)&&a}static fromJson(t){return new e(t.command,t)}toJson(){let t=super.toJson();return this.expand&&(t.expand=!0),void 0!==this.captureSelection&&(t.captureSelection=this.captureSelection),this.macroArgs&&(t.args=this.macroArgs),t}_serialize(t){var r;return t.expandMacro&&this.expand?this.bodyToLatex(t):this.command+(null!=(r=this.macroArgs)?r:"")}render(t){let r=on.createBox(t,this.body);return r?(this.caret&&(r.caret=this.caret),this.bind(t,r)):null}},oj=class e extends on{constructor(){super({type:"macro-argument"})}static fromJson(t){return new e}toJson(){return super.toJson()}_serialize(t){return""}render(t){return null}},oH=class e extends on{constructor(t,r,a=!1,n,s){var l;super({type:"prompt",mode:null!=(l=null==s?void 0:s.mode)?l:"math",style:null==s?void 0:s.style,command:"\\placeholder"}),this.body=n,this.correctness=r,this.placeholderId=t,this.locked=a,this.captureSelection=this.locked}static fromJson(t){return new e(t.placeholderId,t.correctness,t.locked,t.body,t)}toJson(){let t=super.toJson();return this.placeholderId&&(t.placeholderId=this.placeholderId),this.body||delete t.body,this.body&&(t.body=this.body.filter(t=>"first"!==t.type).map(t=>t.toJson())),this.correctness&&(t.correctness=this.correctness),t.locked=this.locked,t}render(t){let r=new oa({parent:t}),a=r.getRegisterAsEm("fboxsep"),n=on.createBox(t,this.body);if(!n)return null;n.height||(n.height=.5),n.setStyle("vertical-align",-n.height,"em"),"correct"===this.correctness?n.setStyle("color","var(--correct-color, var(--ML__correct-color))"):"incorrect"===this.correctness&&n.setStyle("color","var(--incorrect-color, var(--ML__incorrect-color))");let s=new a5(n,{type:"ord"}),l="ML__prompt ";this.locked?l+=" ML__lockedPromptBox ":l+=" ML__editablePromptBox ","correct"===this.correctness?l+=" ML__correctPromptBox ":"incorrect"===this.correctness&&(l+=" ML__incorrectPromptBox "),this.containsCaret&&(l+=" ML__focusedPromptBox ");let c=new a5(null,{classes:l});c.height=s.height+a,c.depth=s.depth+a,c.setStyle("box-sizing","border-box"),c.setStyle("position","absolute"),c.setStyle("height",s.height+s.depth+2*a,"em"),0===a?c.setStyle("width","100%"):(c.setStyle("width",`calc(100% + ${2*a}em)`),c.setStyle("top",a,"em"),c.setStyle("left",-a,"em")),this.body&&1!==this.body.length||(c.setStyle("width",`calc(100% + ${3*a}em)`),c.setStyle("left",-1.5*a,"em"));let d="";"incorrect"===this.correctness&&(d+='<line x1="3%"  y1="97%" x2="97%" y2="3%" stroke-width="0.5" stroke="var(--incorrect-color, var(--ML__incorrect-color))" stroke-linecap="round" />'),d&&Wn(c,d,""),s.setStyle("display","inline-block"),s.setStyle("height",n.height+n.depth,"em"),s.setStyle("vertical-align",-a,"em");let h=new a5([c,s],{classes:"ML__prompt-atom"});return h.setStyle("position","relative"),h.setStyle("display","inline-block"),h.setStyle("line-height",0),h.height=s.height+a+.2,h.depth=s.depth+a,h.left=a,h.right=a,h.setStyle("height",s.height+a,"em"),h.setStyle("top",s.depth-s.height,"em"),h.setStyle("vertical-align",s.depth+a,"em"),h.setStyle("margin-left",.5,"em"),h.setStyle("margin-right",.5,"em"),this.caret&&(h.caret=this.caret),this.bind(r,this.attachSupsub(t,{base:h}))}_serialize(t){var r;let a=null!=(r=this.bodyToLatex(t))?r:"",n="\\placeholder";return this.placeholderId&&(n+=`[${this.placeholderId}]`),"correct"===this.correctness?n+="[correct]":"incorrect"===this.correctness&&(n+="[incorrect]"),this.locked&&(n+="[locked]"),O(n,a)}},oW=class e extends on{constructor(t){super({type:"subsup",style:null==t?void 0:t.style}),this.subsupPlacement="auto"}static fromJson(t){let r=new e(t);for(let a of oo)t[a]&&r.setChildren(t[a],a);return r}render(t){var r;let a=new oa({parent:t,isPhantom:!0}),n=this.leftSibling,s=null!=(r=n.render(a))?r:new a5(null),l=new a5(null,{height:s.height,depth:s.depth});return this.attachSupsub(t,{base:l,isCharacterBox:n.isCharacterBox(),type:"ignore"})}_serialize(t){return this.supsubToLatex(t)}};function Si(t){return!!t&&!/^(<$$>|<$>|<space>|<{>|<}>|#[0-9\?]|\\.+)$/.test(t)}var oU=class{constructor(t,r,a){var n,s,l,c;this.errors=[],this.index=0,this.endCount=0,null!=a||(a={}),this.tokens=t,this.context=r instanceof oa&&!(null!=a&&a.parseMode)&&!a.mathstyle?r:new oa({from:r,mathstyle:a.mathstyle},a.style),this.args=null!=(n=a.args)?n:void 0,this.smartFence=this.context.smartFence,this.parsingContext={parent:void 0,mathlist:[],style:null!=(s=a.style)?s:{},parseMode:null!=(l=a.parseMode)?l:"math",mathstyle:null!=(c=a.mathstyle)?c:"displaystyle",tabular:!1}}beginContext(t){var r,a,n;let s=this.parsingContext,l={parent:s,mathlist:[],style:m({},s.style),parseMode:null!=(r=null==t?void 0:t.mode)?r:s.parseMode,mathstyle:null!=(a=null==t?void 0:t.mathstyle)?a:s.mathstyle,tabular:null!=(n=null==t?void 0:t.tabular)&&n};this.parsingContext=l}endContext(){this.parsingContext=this.parsingContext.parent}onError(t){this.errors.push(m({before:ui(this.tokens.slice(this.index,this.index+10)),after:ui(this.tokens.slice(Math.max(0,this.index-10),this.index))},t))}get mathlist(){return this.parsingContext.mathlist}set mathlist(t){this.parsingContext.mathlist=t}get parseMode(){return this.parsingContext.parseMode}set parseMode(t){this.parsingContext.parseMode=t}get tabularMode(){return this.parsingContext.tabular}get style(){let t=this.parsingContext;for(;t;){if(t.style)return m({},t.style);t=t.parent}return{}}set style(t){this.parsingContext.style=t}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}next(){this.index+=1}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}match(t){return this.tokens[this.index]===t&&(this.index++,!0)}lastSubsupAtom(){let t;return this.mathlist.length>0&&("subsup"===(t=this.mathlist[this.mathlist.length-1]).type||void 0!==t.subsupPlacement)||(t=new oW({style:this.style}),this.mathlist.push(t)),t}hasPattern(t){return t.test(this.tokens[this.index])}hasInfixCommand(){var t;let{index:r}=this;if(r<this.tokens.length&&this.tokens[r].startsWith("\\")){let a=ee(this.tokens[r],this.parseMode);return!!(a&&"symbol"!==a.definitionType&&(!a.ifMode||a.ifMode.includes(this.parseMode)))&&null!=(t=a.infix)&&t}return!1}matchColumnSeparator(){return!!this.tabularMode&&"&"===this.peek()&&(this.index++,!0)}matchRowSeparator(){if(!this.tabularMode)return!1;let t=this.peek();return("\\\\"===t||"\\cr"===t||"\\tabularnewline"===t)&&(this.index++,!0)}placeholder(){var t;let r=null==(t=this.args)?void 0:t.call(this,"?");return r?oe(r,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new oE({mode:this.parseMode,style:this.style})]}skipWhitespace(){for(;this.match("<space>"););}skipUntilToken(t){let r=this.tokens[this.index];for(;r&&r!==t;)r=this.tokens[++this.index];r===t&&this.index++}skipFiller(){for(;this.match("\\relax")||this.match("<space>"););}matchKeyword(t){let r=this.index,a=this.end(),n="";for(;!a;){let r=this.get();Si(r)?(n+=r,a=this.end()||n.length>=t.length):a=!0}let s=t.toUpperCase()===n.toUpperCase();return s||(this.index=r),s}scanString(){let t="";for(;!this.end();){let r=this.peek();if("]"===r)break;if("<space>"===r)t+=" ";else if(r.startsWith("\\"))this.onError({code:"unexpected-command-in-string"}),t+=r.substring(1);else if(Si(r))t+=r;else break;this.next()}return t}scanBalancedString(){let t="",r=this.end(),a=1;for(;!r;){let n=this.get();"<space>"===n?t+=" ":"<{>"===n?(t+="{",a+=1):"<}>"===n?(a-=1)>0?t+="}":this.index-=1:"<$>"===n?t+="$":"<$$>"===n?t+="$$":t+=n,r=0===a||this.end()}return t}scanLiteralGroup(){var t;if(!this.match("<{>"))return"";let r="",a=1;for(;a>0&&!this.end();){let n=this.get();"<}>"===n?(a-=1)>0&&(r+="}"):"<{>"===n?(a+=1,r+="{"):(/\\[a-zA-Z]+$/.test(r)&&/^[a-zA-Z]/.test(n)&&(r+=" "),r+=null!=(t=({"<space>":" ","<$$>":"$$","<$>":"$"})[n])?t:n)}return r}scanNumber(t=!0){var r,a;let n=!1,s=this.peek();for(;"<space>"===s||"+"===s||"-"===s;)this.get(),"-"===s&&(n=!n),s=this.peek();t=!!t;let l=10,c=/\d/;if(this.match("'"))l=8,c=/[0-7]/,t=!0;else if(this.match('"'))l=16,c=/[\dA-F]/,t=!0;else if(this.match("x"))l=16,c=/[\dA-Fa-f]/,t=!0;else if(this.match("`"))return(s=this.get())?2===s.length&&s.startsWith("\\")?{number:(n?-1:1)*(null!=(r=s.codePointAt(1))?r:0),base:"alpha"}:{number:(n?-1:1)*(null!=(a=s.codePointAt(0))?a:0),base:"alpha"}:null;let d="";for(;this.hasPattern(c);)d+=this.get();if(!t&&(this.match(".")||this.match(",")))for(d+=".";this.hasPattern(c);)d+=this.get();let h=t?Number.parseInt(d,l):Number.parseFloat(d);return Number.isNaN(h)?null:{number:n?-h:h,base:16===l?"hexadecimal":8===l?"octal":"decimal"}}scanRegister(){var t;let r=this.index,a=this.scanNumber(!1);if(this.skipWhitespace(),this.match("\\relax"))return a;let n=!1;if(null===a)for(;;){let t=this.peek();if("-"===t)n=!n;else if("+"!==t)break;this.next(),this.skipWhitespace()}if(this.match("\\global")){this.skipWhitespace();let t=this.get();return t.startsWith("\\")?a?{register:t,global:!0,factor:(n?-1:1)*a.number}:n?{register:t,global:!0,factor:-1}:{register:t,global:!0}:(this.index=r,null)}let s=this.get();return null!=s&&s.startsWith("\\")?(s=s.substring(1),this.context.registers[s]?n&&null===a?{register:s}:{register:s,factor:(n?-1:1)*(null!=(t=null==a?void 0:a.number)?t:1)}:(this.index=r,null)):(this.index=r,null)}scanValue(){let t=this.scanRegister();if(t)return t;let r=this.index,a=this.scanGlueOrDimen();if(a&&("unit"in a||"glue"in a&&"unit"in a.glue))return a;this.index=r;let n=this.scanNumber();if(n)return n;if(this.end()||!Si(this.peek()))return null;let s=this.scanString();return s.length>0?{string:s}:null}scanDimen(){let t,r=this.scanNumber(!1);if(null===r)return null;let a=r.number;return this.skipWhitespace(),this.matchKeyword("true"),this.skipWhitespace(),this.matchKeyword("pt")?t="pt":this.matchKeyword("mm")?t="mm":this.matchKeyword("cm")?t="cm":this.matchKeyword("ex")?t="ex":this.matchKeyword("px")?t="px":this.matchKeyword("em")?t="em":this.matchKeyword("bp")?t="bp":this.matchKeyword("dd")?t="dd":this.matchKeyword("pc")?t="pc":this.matchKeyword("in")?t="in":this.matchKeyword("mu")&&(t="mu"),t?{dimension:a,unit:t}:{dimension:a}}scanGlueOrDimen(){let t=this.scanDimen();if(null===t)return null;if(this.skipWhitespace(),this.match("\\relax"))return t;let r={glue:t};if(this.matchKeyword("plus")){let t=this.scanDimen();if(!t)return r;r.grow=t}if(this.skipWhitespace(),this.match("\\relax"))return r;if(this.skipWhitespace(),this.matchKeyword("minus")){let t=this.scanDimen();if(!t)return r;r.shrink=t}return r.grow||r.shrink?r:t}scanColspec(){this.skipWhitespace();let t=[];for(;!this.end()&&!("<}>"===this.peek()||"]"===this.peek());){let r=this.get();"c"===r||"r"===r||"l"===r?t.push({align:r}):"|"===r?t.push({separator:"solid"}):":"===r?t.push({separator:"dashed"}):"@"===r&&(this.match("<{>")&&(this.beginContext({mode:"math"}),t.push({gap:this.scan(t=>"<}>"===t)}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return t}scanModeSet(){let t;if(this.match("\\(")&&(t="textstyle"),!t&&this.match("\\[")&&(t="displaystyle"),!t)return null;this.beginContext({mode:"math",mathstyle:t});let r=this.scan(r=>r===("displaystyle"===t?"\\]":"\\)"));return this.match("displaystyle"===t?"\\]":"\\)")||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),r}scanModeShift(){let t="";if(this.match("<$>")&&(t="<$>"),!t&&this.match("<$$>")&&(t="<$$>"),!t)return null;this.beginContext({mode:"math",mathstyle:"textstyle"});let r=this.scan(r=>r===t);return this.match(t)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),r}scanEnvironment(){var t;if(!this.match("\\begin"))return null;let r=this.scanArgument("string");if(!r)return null;let a=null!=(t=P[r])?t:null;if(!a)return this.onError({code:"unknown-environment",arg:r}),null;let n=[];if(a.params)for(let t of a.params)if(t.isOptional)n.push(this.scanOptionalArgument(t.type));else{let a=this.scanArgument(t.type);a||this.onError({code:"missing-argument",arg:r}),n.push(a)}this.beginContext({tabular:a.tabular});let s=[],l=[],c=[],d=!1;do if(this.end()&&(this.onError({code:"unbalanced-environment",arg:r}),d=!0),!d&&this.match("\\end")&&(this.scanArgument("string")!==r&&this.onError({code:"unbalanced-environment",arg:r}),d=!0),!d){if(this.matchColumnSeparator())c.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){c.push(this.mathlist),this.mathlist=[];let t=null;this.skipWhitespace(),this.match("[")&&(t=this.scanDimen(),this.skipWhitespace(),this.match("]")),l.push(null!=t?t:{dimension:0}),s.push(c),c=[]}else this.mathlist.push(...this.scan(t=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline"].includes(t)))}while(!d);return c.push(this.mathlist),c.length>0&&s.push(c),this.endContext(),a.createAtom(r,s,l,n)}scanExpression(){let t=this.mathlist;if(this.mathlist=[],this.parseExpression()){let r=this.mathlist;return this.mathlist=t,r}return this.mathlist=t,null}scan(t){let r;this.beginContext(),t||(t=t=>"<}>"===t);let a="",n=null,s=[],l=null;for(;!this.end()&&!t(this.peek());)this.hasInfixCommand()&&!a?((n=ee(a=this.get(),"math"))&&(s=this.scanArguments(n)[1]),l=this.mathlist,this.mathlist=[]):this.parseExpression();return a?(s.unshift(this.mathlist),l&&s.unshift(l),r=[n.createAtom({command:a,args:s,style:this.style,mode:this.parseMode})]):r=this.mathlist,this.endContext(),r}scanGroup(){let t=this.index;if(!this.match("<{>"))return null;let r=this.scan(t=>"<}>"===t);this.match("<}>")||this.onError({code:"unbalanced-braces"});let a=new oR(r,this.parseMode,this.style);return a.verbatimLatex=ui(this.tokens.slice(t,this.index)),a}scanSmartFence(){if(this.skipWhitespace(),!this.match("("))return null;this.beginContext();let t=1;for(;!this.end()&&0!==t;)this.match("(")&&(t+=1),this.match(")")&&(t-=1),0!==t&&this.parseExpression();0===t&&this.match(")");let r=new oI("",this.mathlist,{leftDelim:"(",rightDelim:0===t?")":"?"});return this.endContext(),r}scanDelim(){this.skipWhitespace();let t=this.peek();if(!t)return this.onError({code:"unexpected-end-of-string"}),null;if(!Si(t)&&!t.startsWith("\\"))return null;this.next();let r=ee(t,"math");return r?"function"===r.definitionType&&r.ifMode&&!r.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:t}),null):"symbol"===r.definitionType&&("mopen"===r.type||"mclose"===r.type)||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(t)?t:(this.onError({code:"unexpected-delimiter",arg:t}),null):(this.onError({code:"unknown-command",arg:t}),null)}scanLeftRight(){var t;if(this.match("\\right"))return this.onError({code:"unbalanced-braces"}),new oF("\\right");if(this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),new oF("\\mright");let r="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;r="\\mright"}let a=this.scanDelim();if(!a)return this.onError({code:"unexpected-delimiter"}),new oF("\\right"===r?"\\left":"\\mleft");for(this.beginContext();!this.end()&&!this.match(r);)this.parseExpression();let n=this.mathlist;this.endContext();let s=null!=(t=this.scanDelim())?t:".";return new oI("\\right"===r?"left...right":"mleft...mright",n,{leftDelim:a,rightDelim:s,style:this.style})}parseSupSub(){if("math"!==this.parseMode)return!1;let t=this.peek();if("^"!==t&&"_"!==t&&"'"!==t)return!1;let r=this.lastSubsupAtom();for(;"^"===t||"_"===t||"'"===t;)this.match("'")?this.match("'")?r.addChild(new on({type:"mord",command:"\\doubleprime",mode:"math",value:"′′"}),"superscript"):r.addChild(new on({type:"mord",command:"\\prime",mode:"math",value:"′"}),"superscript"):(this.match("^")||this.match("_"))&&r.addChildren(L(this.scanArgument("expression")),"_"===t?"subscript":"superscript"),t=this.peek();return!0}parseLimits(){if("math"!==this.parseMode)return!1;let t=this.match("\\limits"),r=!t&&this.match("\\nolimits"),a=!r&&!t&&this.match("\\displaylimits");if(!t&&!r&&!a)return!1;let n=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return null!==n&&"mop"===n.type&&(n.explicitSubsupPlacement=!0,t&&(n.subsupPlacement="over-under"),r&&(n.subsupPlacement="adjacent"),a&&(n.subsupPlacement="auto"),!0)}scanArguments(t){if(!(null!=t&&t.params))return[void 0,[]];let r,a=[],n=t.infix?2:0;for(;n<t.params.length;){let s=t.params[n];"rest"===s.type?a.push(this.scan(t=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline"].includes(t))):s.isOptional?a.push(this.scanOptionalArgument(s.type)):s.type.endsWith("*")?r=s.type.slice(0,-1):a.push(this.scanArgument(s.type)),n+=1}return[r,a]}scanSymbolOrLiteral(){let t,r=this.peek();if(!r)return null;if(this.next(),Si(r)){let t=a8.createAtom(this.parseMode,r,m({},this.style));return t?[t]:null}if(t=this.scanMacro(r))return[t];if(r.startsWith("\\")){let a=ee(r,this.parseMode);if(!a)return this.onError({code:"unknown-command",arg:r}),[new oF(r)];if("symbol"===a.definitionType){let n=m({},this.style);a.variant&&(n.variant=a.variant),t=new on({type:a.type,command:r,style:n,value:String.fromCodePoint(a.codepoint),mode:this.parseMode,verbatimLatex:r})}else{if(a.applyMode||a.applyStyle||a.infix)return this.onError({code:"invalid-command",arg:r}),[new oF(r)];a.createAtom&&(t=a.createAtom({command:r,args:[],style:this.style,mode:this.parseMode}))}}return t?[t]:null}scanArgument(t){var r;this.skipFiller();let a=this.parseMode;if("auto"===t&&(t=a),!this.match("<{>")){if("string"===t)return this.scanString();if("value"===t)return this.scanValue();if("delim"===t)return null!=(r=this.scanDelim())?r:".";if("expression"===t)return this.scanExpression();if("math"===t){t!==a&&this.beginContext({mode:"math"});let r=this.scanSymbolOrLiteral();return t!==a&&this.endContext(),r}if("text"===t){t!==a&&this.beginContext({mode:"text"});let r=this.scanSymbolOrLiteral();return t!==a&&this.endContext(),r}return null}if("text"===t){this.beginContext({mode:"text"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let t=this.mathlist;return this.endContext(),{group:t}}if("math"===t){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let t=this.mathlist;return this.endContext(),{group:t}}let n=null;if("expression"===t){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let t=this.mathlist;return this.endContext(),{group:t}}return"string"===t?n=this.scanString():"balanced-string"===t?n=this.scanBalancedString():"colspec"===t?n=this.scanColspec():"value"===t&&(n=this.scanValue()),this.skipUntilToken("<}>"),n}scanOptionalArgument(t){if(t="auto"===t?this.parseMode:t,this.skipFiller(),!this.match("["))return null;let r=null;for(;!this.end()&&!this.match("]");)if("string"===t)r=this.scanString();else if("value"===t)r=this.scanValue();else if("colspec"===t)r=this.scanColspec();else if("bbox"===t){let t={};for(let r of this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/)){let a=r.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(a)t.padding={dimension:parseInt(a[1]),unit:a[2]};else{let a=r.match(/^\s*border\s*:\s*(.*)/);a?t.border=a[1]:t.backgroundcolor={string:r}}}r=t}else"math"===t&&(this.beginContext({mode:"math"}),r=this.mathlist.concat(this.scan(t=>"]"===t)),this.endContext());return r}scanSymbolOrCommand(t){var r,a;if("\\placeholder"===t){let t=this.scanOptionalArgument("string"),r=this.scanOptionalArgument("math"),a=on.serialize(r,{defaultMode:"math"}),n=[],s;s||"correct"!==a?s||"incorrect"!==a?""!==a&&(n=r):s="incorrect":s="correct";let l="locked"===this.scanOptionalArgument("string"),c=this.scanArgument("auto"),d;return d=c&&Array.isArray(c)&&c.length>0?c:c&&"object"==typeof c&&"group"in c?c.group:n,t?[new oH(t,s,l,null!=d?d:n,{mode:this.parseMode,style:this.style})]:[new oE({mode:this.parseMode,style:this.style})]}let n=this.scanMacro(t);if(n)return[n];let s=ee(t,this.parseMode);if(!s)return this.onError({code:"unknown-command",arg:t}),"text"===this.parseMode?[...t].map(t=>new on({type:"text",value:t,mode:"text",style:this.style})):[new oF(t)];let l=this.index;if("symbol"===s.definitionType){let r=m({},this.style);s.variant&&(r.variant=s.variant),n=new on({type:s.type,command:t,style:r,value:String.fromCodePoint(s.codepoint),mode:this.parseMode})}else{if(s.ifMode&&!s.ifMode.includes(this.parseMode))return[];let l=this.parseMode;s.applyMode&&(this.parseMode=s.applyMode);let[c,d]=this.scanArguments(s);if(this.parseMode=l,s.applyMode&&!s.applyStyle&&!s.createAtom)return L(d[0]);if(s.infix)return this.onError({code:"too-many-infix-commands",arg:t}),null;if("function"==typeof s.createAtom)n=s.createAtom({command:t,args:d,style:this.style,mode:this.parseMode}),c&&(n.body=L(this.scanArgument(c)));else if("function"==typeof s.applyStyle){let r=m(m({},this.style),s.applyStyle(t,d,this.context)),a=this.parseMode;if(s.applyMode&&(this.parseMode=s.applyMode),c){let t=this.style;this.style=r;let n=this.scanArgument(c);return this.style=t,this.parseMode=a,L(n)}this.style=r}else n=new on({type:"mord",command:null!=(r=s.command)?r:t,style:m({},this.style),value:t,mode:null!=(a=s.applyMode)?a:this.parseMode})}if(!n)return null;if(n instanceof on&&void 0===n.verbatimLatex&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(t)){let r=D([t,ui(this.tokens.slice(l,this.index))]);r&&(n.verbatimLatex=r)}if(null===n.verbatimLatex&&(n.verbatimLatex=void 0),n.isFunction&&this.smartFence){let t=this.scanSmartFence();if(t)return[n,t]}return[n]}scanSymbolCommandOrLiteral(){let t=this.get();if(!t)return null;if(Si(t)){let r=a8.createAtom(this.parseMode,t,m({},this.style));if(!r)return null;if(r.isFunction&&this.smartFence){let t=this.scanSmartFence();if(t)return[r,t]}return[r]}return t.startsWith("\\")?this.scanSymbolOrCommand(t):"<space>"===t?"text"===this.parseMode?[new os(" "," ",this.style)]:null:("<}>"===t?this.onError({latex:"",code:"unbalanced-braces"}):this.onError({latex:"",code:"unexpected-token",arg:t}),null)}scanMacro(t){var r;let a=this.context.getMacro(t);if(!a)return null;let n=this.index,s=a.args,l={"?":null==(r=this.args)?void 0:r.call(this,"?")};for(let t=1;t<=s;t++)l[t]=this.scanLiteralGroup();return new oV(t,{expand:a.expand,captureSelection:a.captureSelection,args:n===this.index?null:ui(this.tokens.slice(n,this.index)),style:this.parsingContext.style,body:oe(a.def,{context:this.context,parseMode:this.parseMode,args:t=>l[t],mathstyle:this.parsingContext.mathstyle,style:this.parsingContext.style})})}parseExpression(){var t,r,a,n;let s=null!=(n=null!=(a=null!=(r=null!=(t=this.scanEnvironment())?t:this.scanModeShift())?r:this.scanModeSet())?a:this.scanGroup())?n:this.scanLeftRight();if(null===s){if(this.parseSupSub()||this.parseLimits())return!0;s=this.scanSymbolCommandOrLiteral()}return!!s&&(Array.isArray(s)?this.mathlist.push(...s):this.mathlist.push(s),!0)}};function oe(t,r){var a,n,s,l;let c=null!=(a=null==r?void 0:r.args)?a:void 0,d=new oU(mo(t,c),null==r?void 0:r.context,{args:c,mathstyle:null!=(n=null==r?void 0:r.mathstyle)?n:"displaystyle",parseMode:null!=(s=null==r?void 0:r.parseMode)?s:"math",style:null!=(l=null==r?void 0:r.style)?l:{}}),h=[];for(;!d.end();)h.push(...d.scan(()=>!1));return h}var oX=class e extends on{constructor(t,r){super({type:"chem"},{command:t,mode:"math"});let a=oG.go(oJ.go(r,"\\pu"===t?"pu":"ce"),!1);this.body=oe(a),this.verbatimLatex=t+"{"+r+"}",this.arg=r,this.captureSelection=!0}static fromJson(t){return new e(t.command,t.arg)}toJson(){return g(m({},super.toJson()),{arg:this.arg})}render(t){let r=on.createBox(t,this.body,{type:"inner"});return this.caret&&(r.caret=this.caret),this.bind(t,r)}_serialize(t){return this.verbatimLatex}};x(["ce","pu"],"{chemformula:balanced-string}",{createAtom:t=>{var r;return new oX(t.command,null!=(r=t.args[0])?r:"")}});var oJ={go:function(t,r){if(!t)return[];void 0===r&&(r="ce");var a="0",n={};n.parenthesisLevel=0,t=(t=(t=t.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var s,l=10,c=[];;){s!==t?(l=10,s=t):l--;for(var d=oJ.stateMachines[r],h=d.transitions[a]||d.transitions["*"],p=0;p<h.length;p++){var y=oJ.patterns.match_(h[p].pattern,t);if(y){for(var v,k=h[p].task,w=0;w<k.action_.length;w++){if(d.actions[k.action_[w].type_])v=d.actions[k.action_[w].type_](n,y.match_,k.action_[w].option);else if(oJ.actions[k.action_[w].type_])v=oJ.actions[k.action_[w].type_](n,y.match_,k.action_[w].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+k.action_[w].type_+")"];oJ.concatArray(c,v)}if(a=k.nextState||a,!(t.length>0))return c;if(k.revisit||(t=y.remainder),!k.toContinue)break}}if(l<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(t,r){if(r){if("[object Array]"===Object.prototype.toString.call(r))for(var a=0;a<r.length;a++)t.push(r[a]);else t.push(r)}},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(t){var r=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return r&&r[0]?{match_:r.slice(1),remainder:t.substr(r[0].length)}:null},"(-)(9)^(-9)":function(t){var r=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return r&&r[0]?{match_:r.slice(1),remainder:t.substr(r[0].length)}:null},"state of aggregation $":function(t){var r=oJ.patterns.findObserveGroups(t,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(r&&r.remainder.match(/^($|[\s,;\)\]\}])/))return r;var a=t.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return a?{match_:a[0],remainder:t.substr(a[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(t){return oJ.patterns.findObserveGroups(t,"^{","","","}")},"^($...$)":function(t){return oJ.patterns.findObserveGroups(t,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(t){return oJ.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(t){return oJ.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(t){return oJ.patterns.findObserveGroups(t,"_{","","","}")},"_($...$)":function(t){return oJ.patterns.findObserveGroups(t,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(t){return oJ.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(t){return oJ.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(t){return oJ.patterns.findObserveGroups(t,"","{","}","")},"{(...)}":function(t){return oJ.patterns.findObserveGroups(t,"{","","","}")},"$...$":function(t){return oJ.patterns.findObserveGroups(t,"","$","$","")},"${(...)}$":function(t){return oJ.patterns.findObserveGroups(t,"${","","","}$")},"$(...)$":function(t){return oJ.patterns.findObserveGroups(t,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(t){return oJ.patterns.findObserveGroups(t,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(t){return oJ.patterns.findObserveGroups(t,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(t){return oJ.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(t){return oJ.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(t){return oJ.patterns.findObserveGroups(t,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(t){return oJ.patterns.findObserveGroups(t,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(t){return oJ.patterns.findObserveGroups(t,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(t){return oJ.patterns.findObserveGroups(t,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(t){return oJ.patterns.findObserveGroups(t,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(t){return oJ.patterns.findObserveGroups(t,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(t){return oJ.patterns.findObserveGroups(t,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(t){return oJ.patterns.findObserveGroups(t,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(t){if(r=t.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:r[0],remainder:t.substr(r[0].length)};var r,a=oJ.patterns.findObserveGroups(t,"","$","$","");return a&&(r=a.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:r[0],remainder:t.substr(r[0].length)}:null},amount2:function(t){return this.amount(t)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(t){if(t.match(/^\([a-z]+\)$/))return null;var r=t.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return r?{match_:r[0],remainder:t.substr(r[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(t,r,a,n,s,l,c,d,h,p){var u=function(t,r){if("string"==typeof r)return 0!==t.indexOf(r)?null:r;var a=t.match(r);return a?a[0]:null},y=u(t,r);if(null===y||null===(y=u(t=t.substr(y.length),a)))return null;var v=function(t,r,a){for(var n=0;r<t.length;){var s=t.charAt(r),l=u(t.substr(r),a);if(null!==l&&0===n)return{endMatchBegin:r,endMatchEnd:r+l.length};if("{"===s)n++;else if("}"===s){if(0===n)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];n--}r++}return null}(t,y.length,n||s);if(null===v)return null;var k=t.substring(0,n?v.endMatchEnd:v.endMatchBegin);if(!l&&!c)return{match_:k,remainder:t.substr(v.endMatchEnd)};var w=this.findObserveGroups(t.substr(v.endMatchEnd),l,c,d,h);if(null===w)return null;var _=[k,w.match_];return{match_:p?_.join(""):_,remainder:w.remainder}},match_:function(t,r){var a=oJ.patterns.patterns[t];if(void 0===a)throw["MhchemBugP","mhchem bug P. Please report. ("+t+")"];if("function"==typeof a)return oJ.patterns.patterns[t](r);var n=r.match(a);return n?{match_:n[2]?[n[1],n[2]]:n[1]?n[1]:n[0],remainder:r.substr(n[0].length)}:null}},actions:{"a=":function(t,r){t.a=(t.a||"")+r},"b=":function(t,r){t.b=(t.b||"")+r},"p=":function(t,r){t.p=(t.p||"")+r},"o=":function(t,r){t.o=(t.o||"")+r},"q=":function(t,r){t.q=(t.q||"")+r},"d=":function(t,r){t.d=(t.d||"")+r},"rm=":function(t,r){t.rm=(t.rm||"")+r},"text=":function(t,r){t.text_=(t.text_||"")+r},insert:function(t,r,a){return{type_:a}},"insert+p1":function(t,r,a){return{type_:a,p1:r}},"insert+p1+p2":function(t,r,a){return{type_:a,p1:r[0],p2:r[1]}},copy:function(t,r){return r},rm:function(t,r){return{type_:"rm",p1:r||""}},text:function(t,r){return oJ.go(r,"text")},"{text}":function(t,r){var a=["{"];return oJ.concatArray(a,oJ.go(r,"text")),a.push("}"),a},"tex-math":function(t,r){return oJ.go(r,"tex-math")},"tex-math tight":function(t,r){return oJ.go(r,"tex-math tight")},bond:function(t,r,a){return{type_:"bond",kind_:a||r}},"color0-output":function(t,r){return{type_:"color0",color:r[0]}},ce:function(t,r){return oJ.go(r)},"1/2":function(t,r){var a=[];r.match(/^[+\-]/)&&(a.push(r.substr(0,1)),r=r.substr(1));var n=r.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return n[1]=n[1].replace(/\$/g,""),a.push({type_:"frac",p1:n[1],p2:n[2]}),n[3]&&(n[3]=n[3].replace(/\$/g,""),a.push({type_:"tex-math",p1:n[3]})),a},"9,9":function(t,r){return oJ.go(r,"9,9")}},createTransitions:function(t){var r,a,n,s,l={};for(r in t)for(a in t[r])for(n=a.split("|"),t[r][a].stateArray=n,s=0;s<n.length;s++)l[n[s]]=[];for(r in t)for(a in t[r])for(n=t[r][a].stateArray||[],s=0;s<n.length;s++){var c=t[r][a];if(c.action_){c.action_=[].concat(c.action_);for(var d=0;d<c.action_.length;d++)"string"==typeof c.action_[d]&&(c.action_[d]={type_:c.action_[d]})}else c.action_=[];for(var h=r.split("|"),p=0;p<h.length;p++)if("*"===n[s])for(var y in l)l[y].push({pattern:h[p],task:c});else l[n[s]].push({pattern:h[p],task:c})}return l},stateMachines:{}};oJ.stateMachines={ce:{transitions:oJ.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(t,r){var a;if((t.d||"").match(/^[0-9]+$/)){var n=t.d;t.d=void 0,a=this.output(t),t.b=n}else a=this.output(t);return oJ.actions["o="](t,r),a},"d= kv":function(t,r){t.d=r,t.dType="kv"},"charge or bond":function(t,r){if(t.beginsWithBond){var a=[];return oJ.concatArray(a,this.output(t)),oJ.concatArray(a,oJ.actions.bond(t,r,"-")),a}t.d=r},"- after o/d":function(t,r,a){var n=oJ.patterns.match_("orbital",t.o||""),s=oJ.patterns.match_("one lowercase greek letter $",t.o||""),l=oJ.patterns.match_("one lowercase latin letter $",t.o||""),c=oJ.patterns.match_("$one lowercase latin letter$ $",t.o||""),d="-"===r&&(n&&""===n.remainder||s||l||c);!d||t.a||t.b||t.p||t.d||t.q||n||!l||(t.o="$"+t.o+"$");var h=[];return d?(oJ.concatArray(h,this.output(t)),h.push({type_:"hyphen"})):(n=oJ.patterns.match_("digits",t.d||""),a&&n&&""===n.remainder?(oJ.concatArray(h,oJ.actions["d="](t,r)),oJ.concatArray(h,this.output(t))):(oJ.concatArray(h,this.output(t)),oJ.concatArray(h,oJ.actions.bond(t,r,"-")))),h},"a to o":function(t){t.o=t.a,t.a=void 0},"sb=true":function(t){t.sb=!0},"sb=false":function(t){t.sb=!1},"beginsWithBond=true":function(t){t.beginsWithBond=!0},"beginsWithBond=false":function(t){t.beginsWithBond=!1},"parenthesisLevel++":function(t){t.parenthesisLevel++},"parenthesisLevel--":function(t){t.parenthesisLevel--},"state of aggregation":function(t,r){return{type_:"state of aggregation",p1:oJ.go(r,"o")}},comma:function(t,r){var a=r.replace(/\s*$/,"");return a!==r&&0===t.parenthesisLevel?{type_:"comma enumeration L",p1:a}:{type_:"comma enumeration M",p1:a}},output:function(t,r,a){var n,s,l;for(var c in t.r?(s="M"===t.rdt?oJ.go(t.rd,"tex-math"):"T"===t.rdt?[{type_:"text",p1:t.rd||""}]:oJ.go(t.rd),l="M"===t.rqt?oJ.go(t.rq,"tex-math"):"T"===t.rqt?[{type_:"text",p1:t.rq||""}]:oJ.go(t.rq),n={type_:"arrow",r:t.r,rd:s,rq:l}):(n=[],(t.a||t.b||t.p||t.o||t.q||t.d||a)&&(t.sb&&n.push({type_:"entitySkip"}),t.o||t.q||t.d||t.b||t.p||2===a?t.o||t.q||t.d||!t.b&&!t.p?t.o&&"kv"===t.dType&&oJ.patterns.match_("d-oxidation$",t.d||"")?t.dType="oxidation":t.o&&"kv"===t.dType&&!t.q&&(t.dType=void 0):(t.o=t.a,t.d=t.b,t.q=t.p,t.a=t.b=t.p=void 0):(t.o=t.a,t.a=void 0),n.push({type_:"chemfive",a:oJ.go(t.a,"a"),b:oJ.go(t.b,"bd"),p:oJ.go(t.p,"pq"),o:oJ.go(t.o,"o"),q:oJ.go(t.q,"pq"),d:oJ.go(t.d,"oxidation"===t.dType?"oxidation":"bd"),dType:t.dType}))),t)"parenthesisLevel"!==c&&"beginsWithBond"!==c&&delete t[c];return n},"oxidation-output":function(t,r){var a=["{"];return oJ.concatArray(a,oJ.go(r,"oxidation")),a.push("}"),a},"frac-output":function(t,r){return{type_:"frac-ce",p1:oJ.go(r[0]),p2:oJ.go(r[1])}},"overset-output":function(t,r){return{type_:"overset",p1:oJ.go(r[0]),p2:oJ.go(r[1])}},"underset-output":function(t,r){return{type_:"underset",p1:oJ.go(r[0]),p2:oJ.go(r[1])}},"underbrace-output":function(t,r){return{type_:"underbrace",p1:oJ.go(r[0]),p2:oJ.go(r[1])}},"color-output":function(t,r){return{type_:"color",color1:r[0],color2:oJ.go(r[1])}},"r=":function(t,r){t.r=r},"rdt=":function(t,r){t.rdt=r},"rd=":function(t,r){t.rd=r},"rqt=":function(t,r){t.rqt=r},"rq=":function(t,r){t.rq=r},operator:function(t,r,a){return{type_:"operator",kind_:a||r}}}},a:{transitions:oJ.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:oJ.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:oJ.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(t){if(t.text_){var r={type_:"text",p1:t.text_};for(var a in t)delete t[a];return r}}}},pq:{transitions:oJ.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(t,r){return{type_:"state of aggregation subscript",p1:oJ.go(r,"o")}},"color-output":function(t,r){return{type_:"color",color1:r[0],color2:oJ.go(r[1],"pq")}}}},bd:{transitions:oJ.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(t,r){return{type_:"color",color1:r[0],color2:oJ.go(r[1],"bd")}}}},oxidation:{transitions:oJ.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(t,r){return{type_:"roman numeral",p1:r||""}}}},"tex-math":{transitions:oJ.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(t){if(t.o){var r={type_:"tex-math",p1:t.o};for(var a in t)delete t[a];return r}}}},"tex-math tight":{transitions:oJ.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(t,r){t.o=(t.o||"")+"{"+r+"}"},output:function(t){if(t.o){var r={type_:"tex-math",p1:t.o};for(var a in t)delete t[a];return r}}}},"9,9":{transitions:oJ.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:oJ.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(t,r){var a=[];return"+-"===r[0]||"+/-"===r[0]?a.push("\\pm "):r[0]&&a.push(r[0]),r[1]&&(oJ.concatArray(a,oJ.go(r[1],"pu-9,9")),r[2]&&(r[2].match(/[,.]/)?oJ.concatArray(a,oJ.go(r[2],"pu-9,9")):a.push(r[2])),(r[3]||r[4])&&("e"===r[3]||"*"===r[4]?a.push({type_:"cdot"}):a.push({type_:"times"}))),r[5]&&a.push("10^{"+r[5]+"}"),a},"number^":function(t,r){var a=[];return"+-"===r[0]||"+/-"===r[0]?a.push("\\pm "):r[0]&&a.push(r[0]),oJ.concatArray(a,oJ.go(r[1],"pu-9,9")),a.push("^{"+r[2]+"}"),a},operator:function(t,r,a){return{type_:"operator",kind_:a||r}},space:function(){return{type_:"pu-space-1"}},output:function(t){var r,a=oJ.patterns.match_("{(...)}",t.d||"");a&&""===a.remainder&&(t.d=a.match_);var n=oJ.patterns.match_("{(...)}",t.q||"");if(n&&""===n.remainder&&(t.q=n.match_),t.d&&(t.d=t.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.d=t.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),t.q){t.q=t.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.q=t.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var s={d:oJ.go(t.d,"pu"),q:oJ.go(t.q,"pu")};"//"===t.o?r={type_:"pu-frac",p1:s.d,p2:s.q}:(r=s.d,s.d.length>1||s.q.length>1?r.push({type_:" / "}):r.push({type_:"/"}),oJ.concatArray(r,s.q))}else r=oJ.go(t.d,"pu-2");for(var l in t)delete t[l];return r}}},"pu-2":{transitions:oJ.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(t,r){t.rm+="^{"+r+"}"},space:function(){return{type_:"pu-space-2"}},output:function(t){var r=[];if(t.rm){var a=oJ.patterns.match_("{(...)}",t.rm||"");r=a&&""===a.remainder?oJ.go(a.match_,"pu"):{type_:"rm",p1:t.rm}}for(var n in t)delete t[n];return r}}},"pu-9,9":{transitions:oJ.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(t){var r=[];if(t.text_=t.text_||"",t.text_.length>4){var a=t.text_.length%3;0===a&&(a=3);for(var n=t.text_.length-3;n>0;n-=3)r.push(t.text_.substr(n,3)),r.push({type_:"1000 separator"});r.push(t.text_.substr(0,a)),r.reverse()}else r.push(t.text_);for(var s in t)delete t[s];return r},"output-o":function(t){var r=[];if(t.text_=t.text_||"",t.text_.length>4){for(var a=t.text_.length-3,n=0;n<a;n+=3)r.push(t.text_.substr(n,3)),r.push({type_:"1000 separator"});r.push(t.text_.substr(n))}else r.push(t.text_);for(var s in t)delete t[s];return r}}}};var oG={go:function(t,r){if(!t)return"";for(var a="",n=!1,s=0;s<t.length;s++){var l=t[s];"string"==typeof l?a+=l:(a+=oG._go2(l),"1st-level escape"===l.type_&&(n=!0))}return r||n||!a||(a="{"+a+"}"),a},_goInner:function(t){return t&&oG.go(t,!0)},_go2:function(t){var r;switch(t.type_){case"chemfive":r="";var a={a:oG._goInner(t.a),b:oG._goInner(t.b),p:oG._goInner(t.p),o:oG._goInner(t.o),q:oG._goInner(t.q),d:oG._goInner(t.d)};a.a&&(a.a.match(/^[+\-]/)&&(a.a="{"+a.a+"}"),r+=a.a+"\\,"),(a.b||a.p)&&(r+="{\\vphantom{X}}"+("^{\\hphantom{"+(a.b||"")+"}}_{\\hphantom{")+(a.p||"")+"}}{\\vphantom{X}}^{\\smash[t]{\\vphantom{2}}\\llap{"+(a.b||"")+"}}_{\\vphantom{2}\\llap{\\smash[t]{"+(a.p||"")+"}}}"),a.o&&(a.o.match(/^[+\-]/)&&(a.o="{"+a.o+"}"),r+=a.o),"kv"===t.dType?((a.d||a.q)&&(r+="{\\vphantom{X}}"),a.d&&(r+="^{"+a.d+"}"),a.q&&(r+="_{\\smash[t]{"+a.q+"}}")):"oxidation"===t.dType?(a.d&&(r+="{\\vphantom{X}}^{"+a.d+"}"),a.q&&(r+="{\\vphantom{X}}_{\\smash[t]{"+a.q+"}}")):(a.q&&(r+="{\\vphantom{X}}_{\\smash[t]{"+a.q+"}}"),a.d&&(r+="{\\vphantom{X}}^{"+a.d+"}"));break;case"rm":case"roman numeral":r="\\mathrm{"+t.p1+"}";break;case"text":t.p1.match(/[\^_]/)?(t.p1=t.p1.replace(" ","~").replace("-","\\text{-}"),r="\\mathrm{"+t.p1+"}"):r="\\text{"+t.p1+"}";break;case"state of aggregation":r="\\mskip2mu "+oG._goInner(t.p1);break;case"state of aggregation subscript":r="\\mskip1mu "+oG._goInner(t.p1);break;case"bond":if(!(r=oG._getBond(t.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+t.kind_+")"];break;case"frac":var n="\\frac{"+t.p1+"}{"+t.p2+"}";r="\\mathchoice{\\textstyle"+n+"}{"+n+"}{"+n+"}{"+n+"}";break;case"pu-frac":var s="\\frac{"+oG._goInner(t.p1)+"}{"+oG._goInner(t.p2)+"}";r="\\mathchoice{\\textstyle"+s+"}{"+s+"}{"+s+"}{"+s+"}";break;case"tex-math":case"1st-level escape":r=t.p1+" ";break;case"frac-ce":r="\\frac{"+oG._goInner(t.p1)+"}{"+oG._goInner(t.p2)+"}";break;case"overset":r="\\overset{"+oG._goInner(t.p1)+"}{"+oG._goInner(t.p2)+"}";break;case"underset":r="\\underset{"+oG._goInner(t.p1)+"}{"+oG._goInner(t.p2)+"}";break;case"underbrace":r="\\underbrace{"+oG._goInner(t.p1)+"}_{"+oG._goInner(t.p2)+"}";break;case"color":r="{\\color{"+t.color1+"}{"+oG._goInner(t.color2)+"}}";break;case"color0":r="\\color{"+t.color+"}";break;case"arrow":var l={rd:oG._goInner(t.rd),rq:oG._goInner(t.rq)},c=oG._getArrow(t.r);l.rd||l.rq?"<=>"===t.r||"<=>>"===t.r||"<<=>"===t.r||"<-->"===t.r?(c="\\long"+c,l.rd&&(c="\\overset{"+l.rd+"}{"+c+"}"),l.rq&&(c="<-->"===t.r?"\\underset{\\lower2mu{"+l.rq+"}}{"+c+"}":"\\underset{\\lower6mu{"+l.rq+"}}{"+c+"}"),c=" {}\\mathrel{"+c+"}{} "):(l.rq&&(c+="[{"+l.rq+"}]"),c+="{"+l.rd+"}",c=" {}\\mathrel{\\x"+c+"}{} "):c=" {}\\mathrel{\\long"+c+"}{} ",r=c;break;case"operator":r=oG._getOperator(t.kind_);break;case"space":r=" ";break;case"entitySkip":case"pu-space-1":r="~";break;case"pu-space-2":r="\\mkern3mu ";break;case"1000 separator":r="\\mkern2mu ";break;case"commaDecimal":r="{,}";break;case"comma enumeration L":r="{"+t.p1+"}\\mkern6mu ";break;case"comma enumeration M":r="{"+t.p1+"}\\mkern3mu ";break;case"comma enumeration S":r="{"+t.p1+"}\\mkern1mu ";break;case"hyphen":r="\\text{-}";break;case"addition compound":r="\\,{\\cdot}\\,";break;case"electron dot":r="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":r="{\\times}";break;case"prime":r="\\prime ";break;case"cdot":r="\\cdot ";break;case"tight cdot":r="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":r="\\times ";break;case"circa":r="{\\sim}";break;case"^":r="uparrow";break;case"v":r="downarrow";break;case"ellipsis":r="\\ldots ";break;case"/":r="/";break;case" / ":r="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return r},_getArrow:function(t){switch(t){case"->":case"→":case"⟶":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"leftrightarrows";case"<=>":case"⇌":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(t){switch(t){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(t){switch(t){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},oZ=class e extends on{constructor(t){super(g(m({},t),{type:"delim"})),this.value=t.delim,this.size=t.size}static fromJson(t){return new e(t)}toJson(){return g(m({},super.toJson()),{delim:this.value,size:this.size})}render(t){return new a5(this.value,{type:"middle"})}_serialize(t){if(!(t.expandMacro||t.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let r=ee(this.command,this.mode);return null!=r&&r.serialize?r.serialize(this,t):O(this.command,this.value)}},oY=class e extends on{constructor(t){super(g(m({},t),{type:"sizeddelim",value:t.delim})),this.delimType=t.delimType,this.size=t.size}static fromJson(t){return new e(t)}toJson(){return g(m({},super.toJson()),{delim:this.value,size:this.size,delimType:this.delimType})}render(t){var r,a,n;let s=(r=this.value,a=this.size,n={classes:({open:"mopen",close:"mclose"})[this.delimType],type:this.delimType,isSelected:this.isSelected},void 0===r||"."===r?Dt(t,n.classes):("<"===r||"\\lt"===r||"⟨"===r?r="\\langle":(">"===r||"\\gt"===r||"⟩"===r)&&(r="\\rangle"),oM.has(r)||oC.has(r)?Xd(r,a,!1,t,n):oL.has(r)?Zd(r,oz[a],!1,t,n):null));return s?(s=this.bind(t,s),this.caret&&(s.caret=this.caret),s):null}_serialize(t){if(!(t.expandMacro||t.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let r=ee(this.command,this.mode);return null!=r&&r.serialize?r.serialize(this,t):O(this.command,this.value)}},oQ=class e extends on{constructor(t,r,a,n){super({type:"enclose",command:t,style:n.style}),this.body=r,this.backgroundcolor=n.backgroundcolor,a.updiagonalarrow&&(a.updiagonalstrike=!1),a.box&&(a.left=!1,a.right=!1,a.bottom=!1,a.top=!1),this.notation=a,this.shadow=n.shadow,this.strokeWidth=n.strokeWidth,this.strokeStyle=n.strokeStyle,this.svgStrokeStyle=n.svgStrokeStyle,this.strokeColor=n.strokeColor,this.borderStyle=n.borderStyle,this.padding=n.padding,this.captureSelection=!0}static fromJson(t){return new e(t.command,t.body,t.notation,t)}toJson(){return g(m({},super.toJson()),{notation:this.notation,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}_serialize(t){var r;if(!(t.expandMacro||t.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let a=ee(this.command,this.mode);if(null!=a&&a.serialize)return a.serialize(this,t);let n=null!=(r=this.command)?r:"";if("\\enclose"===this.command){n+="{"+Object.keys(this.notation).join(" ")+"}";let t="",r="";this.backgroundcolor&&"transparent"!==this.backgroundcolor&&(t+=r+'mathbackground="'+this.backgroundcolor+'"',r=","),this.shadow&&"auto"!==this.shadow&&(t+=r+'shadow="'+this.shadow+'"',r=","),this.strokeWidth||"solid"!==this.strokeStyle?(t+=r+this.borderStyle,r=","):this.strokeColor&&"currentColor"!==this.strokeColor&&(t+=r+'mathcolor="'+this.strokeColor+'"',r=","),t&&(n+=`[${t}]`)}return O(n,this.bodyToLatex(t))}render(t){var r;let a=new oa({parent:t},this.style),n=on.createBox(a,this.body);if(!n)return null;let s=a.toEm(this.padding&&"auto"!==this.padding?{string:this.padding}:{register:"fboxsep"}),l=function(t){if(!t)return"1px";let r=t.match(/([0-9][a-zA-Z\%]+)/);return null===r?"1px":r[1]}(this.borderStyle),c=new a5(null,{classes:"ML__notation"});c.setStyle("box-sizing","border-box"),c.setStyle("left",`calc(-${l} / 2 - ${s}em)`),c.setStyle("height",`calc(${n.height+n.depth+2*s}em)`),c.height=n.height+s,c.depth=n.depth+s,c.setStyle("width",`calc(100% + ${2*s}em + 2 * ${l})`),this.backgroundcolor&&c.setStyle("background-color",null!=(r=this.backgroundcolor)?r:"transparent"),this.notation.box&&c.setStyle("border",this.borderStyle),this.notation.actuarial&&(c.setStyle("border-top",this.borderStyle),c.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(c.setStyle("border-bottom",this.borderStyle),c.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(c.setStyle("border-radius","8px"),c.setStyle("border",this.borderStyle)),this.notation.circle&&(c.setStyle("border-radius","50%"),c.setStyle("border",this.borderStyle)),this.notation.top&&c.setStyle("border-top",this.borderStyle),this.notation.left&&c.setStyle("border-left",this.borderStyle),this.notation.right&&c.setStyle("border-right",this.borderStyle),this.notation.bottom&&c.setStyle("border-bottom",this.borderStyle);let d="";if(this.notation.horizontalstrike&&(d+=`<line x1="3%"  y1="50%" x2="97%" y2="50%" stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}" stroke-linecap="round"`,this.svgStrokeStyle&&(d+=` stroke-dasharray="${this.svgStrokeStyle}"`),d+="/>"),this.notation.verticalstrike&&(d+=`<line x1="50%"  y1="3%" x2="50%" y2="97%" stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}" stroke-linecap="round"`,this.svgStrokeStyle&&(d+=` stroke-dasharray="${this.svgStrokeStyle}"`),d+="/>"),this.notation.updiagonalstrike&&(d+=`<line x1="3%"  y1="97%" x2="97%" y2="3%" stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}" stroke-linecap="round"`,this.svgStrokeStyle&&(d+=` stroke-dasharray="${this.svgStrokeStyle}"`),d+="/>"),this.notation.downdiagonalstrike&&(d+=`<line x1="3%"  y1="3%" x2="97%" y2="97%" stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}" stroke-linecap="round"`,this.svgStrokeStyle&&(d+=` stroke-dasharray="${this.svgStrokeStyle}"`),d+="/>"),d){let t;"none"!==this.shadow&&(t="auto"===this.shadow?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+this.shadow+")"),Wn(c,d,t)}let h=new a5([c,n]);return h.setStyle("position","relative"),h.setStyle("display","inline"),h.height=n.height+s,h.depth=n.depth+s,h.left=s,h.right=s,this.caret&&(h.caret=this.caret),h.wrap(a)}},o0=class e extends on{constructor(t,r,a){var n,s;super(g(m({},a),{type:"genfrac",displayContainsHighlight:!0})),this.above=t,this.below=r,this.hasBarLine=null==(n=null==a?void 0:a.hasBarLine)||n,this.continuousFraction=null!=(s=null==a?void 0:a.continuousFraction)&&s,this.numerPrefix=null==a?void 0:a.numerPrefix,this.denomPrefix=null==a?void 0:a.denomPrefix,this.mathstyleName=null==a?void 0:a.mathstyleName,this.leftDelim=null==a?void 0:a.leftDelim,this.rightDelim=null==a?void 0:a.rightDelim,this.fractionNavigationOrder=null==a?void 0:a.fractionNavigationOrder}static fromJson(t){return new e(t.above,t.below,t)}toJson(){let t={};return this.continuousFraction&&(t.continuousFraction=!0),this.numerPrefix&&(t.numerPrefix=this.numerPrefix),this.denomPrefix&&(t.denomPrefix=this.denomPrefix),this.leftDelim&&(t.leftDelim=this.leftDelim),this.rightDelim&&(t.rightDelim=this.rightDelim),this.hasBarLine||(t.hasBarLine=!1),this.mathstyleName&&(t.mathstyleName=this.mathstyleName),this.fractionNavigationOrder&&(t.fractionNavigationOrder=this.fractionNavigationOrder),m(m({},super.toJson()),t)}get children(){if(this._children)return this._children;let t=[];if("denominator-numerator"===this.fractionNavigationOrder){for(let r of this.below)t.push(...r.children),t.push(r);for(let r of this.above)t.push(...r.children),t.push(r)}else{for(let r of this.above)t.push(...r.children),t.push(r);for(let r of this.below)t.push(...r.children),t.push(r)}return this._children=t,t}render(t){var r,a;let n=new oa({parent:t,mathstyle:this.mathstyleName},this.style),s=n.metrics,l=new oa({parent:n,mathstyle:this.continuousFraction?"":"numerator"},this.style),c=this.numerPrefix?new a5([new a5(this.numerPrefix),on.createBox(l,this.above)],{isTight:l.isTight,type:"ignore"}):null!=(r=on.createBox(l,this.above,{type:"ignore"}))?r:new a5(null,{type:"ignore"}),d=new oa({parent:n,mathstyle:this.continuousFraction?"":"denominator"},this.style),h=this.denomPrefix?new a5([new a5(this.denomPrefix),on.createBox(d,this.below,{type:"ignore"})]):null!=(a=on.createBox(d,this.below,{type:"ignore"}))?a:new a5(null,{type:"ignore"}),p=this.hasBarLine?s.defaultRuleThickness:0,y,v=0,k;n.isDisplayStyle?(y=l.metrics.num1,v=p>0?3*p:7*p,k=d.metrics.denom1):(p>0?(y=l.metrics.num2,v=p):(y=l.metrics.num3,v=3*s.defaultRuleThickness),k=d.metrics.denom2);let w=[];this.isSelected&&w.push("ML__selected");let _=c.depth,S=h.height,M;if(p<=0){let t=y-_-(S-k);t<v&&(y+=(v-t)/2,k+=(v-t)/2),M=new a7({individualShift:[{box:c,shift:-y,classes:[...w,"ML__center"]},{box:h,shift:k,classes:[...w,"ML__center"]}]}).wrap(n)}else{let t=.25+p/2,r=.25-p/2;y<v+_+t&&(y=v+_+t),k<v+S-r&&(k=v+S-r);let a=new a5(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});a.height=p/2,a.depth=p/2,M=new a7({individualShift:[{box:h,shift:k,classes:[...w,"ML__center"]},{box:a,shift:-r,classes:w},{box:c,shift:-y,classes:[...w,"ML__center"]}]}).wrap(n)}let C=n.isDisplayStyle?s.delim1:s.delim2,z=this.leftDelim?this.bind(t,xi("open",this.leftDelim,C,!0,t,{style:this.style,mode:this.mode,isSelected:this.isSelected})):Dt(n,"open"),A=null;A=this.continuousFraction?new a5(null,{type:"close"}):this.rightDelim?this.bind(t,xi("close",this.rightDelim,C,!0,t,{style:this.style,mode:this.mode,isSelected:this.isSelected})):Dt(n,"close");let E=this.bind(t,new a5([z,M,A],{isTight:n.isTight,type:"inner",classes:"mfrac"}));return E?(this.caret&&(E.caret=this.caret),this.attachSupsub(t,{base:E})):null}},o1=class e extends on{constructor(t,r){var a;super({type:"latex",value:t,mode:"latex"}),this.isSuggestion=null!=(a=null==r?void 0:r.isSuggestion)&&a,this.isError=!1}static fromJson(t){let r=new e(t.value);return t.isSuggestion&&(r.isSuggestion=!0),t.isError&&(r.isError=!0),r}toJson(){let t={};return this.isSuggestion&&(t.isSuggestion=!0),this.isError&&(t.isError=!0),m({type:"latex",value:this.value},t)}get computedStyle(){return{}}render(t){let r=new a5(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return r?(this.caret&&(r.caret=this.caret),this.bind(t,r)):null}},o4=class e extends on{constructor(t){super({type:"latexgroup",mode:"latex"}),this.body=[...t].map(t=>new o1(t)),this.skipBoundary=!1}static fromJson(t){return new e("")}toJson(){return super.toJson()}render(t){let r=on.createBox(t,this.body);return r?(this.caret&&(r.caret=this.caret),this.bind(t,r)):null}_serialize(t){var r,a;return null!=(a=null==(r=this.body)?void 0:r.map(t=>t.value).join(""))?a:""}},o2=class e extends on{constructor(t,r){var a,n,s;super(g(m({},r),{type:null!=(a=r.type)?a:"mop",isFunction:null==r?void 0:r.isFunction})),this.value=t,this.hasArgument=null!=(n=r.hasArgument)&&n,this.variant=null==r?void 0:r.variant,this.variantStyle=null==r?void 0:r.variantStyle,this.subsupPlacement=null==r?void 0:r.limits,this.isExtensibleSymbol=null!=(s=null==r?void 0:r.isExtensibleSymbol)&&s}static fromJson(t){return new e(t.symbol,t)}toJson(){let t=super.toJson();return this.hasArgument&&(t.hasArgument=!0),this.variant&&(t.variant=this.variant),this.variantStyle&&(t.variantStyle=this.variantStyle),this.subsupPlacement&&(t.limits=this.subsupPlacement),this.isExtensibleSymbol&&(t.isExtensibleSymbol=!0),this.value&&(t.symbol=this.value),t}render(t){var r;let a,n=0,s=0;if(this.isExtensibleSymbol){let r=t.isDisplayStyle&&"\\smallint"!==this.value;(a=new a5(this.value,{fontFamily:r?"Size2-Regular":"Size1-Regular",classes:"op-symbol "+(r?"large-op":"small-op"),type:"op",maxFontSize:t.scalingFactor,isSelected:this.isSelected})).right=a.italic,n=(a.height-a.depth)/2-.25*t.scalingFactor,s=a.italic,a.setTop(n)}else this.type,a=new a5(this.value,{type:"op",mode:"math",maxFontSize:t.scalingFactor,style:{variant:this.variant,variantStyle:this.variantStyle},isSelected:this.isSelected,letterShapeStyle:t.letterShapeStyle});let l=a;if(this.superscript||this.subscript){let c=null!=(r=this.subsupPlacement)?r:"auto";l="over-under"===c||"auto"===c&&t.isDisplayStyle?this.attachLimits(t,{base:a,baseShift:n,slant:s}):this.attachSupsub(t,{base:a})}return new a5(this.bind(t,l),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"op-group"}).wrap(t)}_serialize(t){if(!(t.expandMacro||t.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let r=ee(this.command,this.mode);if(null!=r&&r.serialize)return r.serialize(this,t);if("​"===this.value)return this.supsubToLatex(t);let a=[];return this.hasArgument?a.push(O(this.command,this.bodyToLatex(t))):a.push(this.command),this.explicitSubsupPlacement&&("over-under"===this.subsupPlacement&&a.push("\\limits"),"adjacent"===this.subsupPlacement&&a.push("\\nolimits"),"auto"===this.subsupPlacement&&a.push("\\displaylimits")),a.push(this.supsubToLatex(t)),D(a)}},o3=class e extends on{constructor(t){let r=t.body;super(g(m({},t),{type:"overlap",body:"string"==typeof r?[new on({value:r})]:r,style:null==t?void 0:t.style})),this.skipBoundary=!0,this.align=null==t?void 0:t.align,this.boxType=null==t?void 0:t.boxType}static fromJson(t){return new e(t)}toJson(){let t={};return this.align&&(t.align=this.align),this.boxType&&(t.boxType=this.boxType),m(m({},super.toJson()),t)}render(t){let r=on.createBox(t,this.body,{classes:"inner"});return r?(this.caret&&(r.caret=this.caret),this.bind(t,new a5([r,new a5(null,{classes:"fix"})],{classes:"right"===this.align?"rlap":"llap",type:this.boxType}))):null}},o6=class e extends on{constructor(t){var r,a,n,s;super({type:"overunder",command:t.command,style:t.style,mode:t.mode,body:t.body,skipBoundary:null==(r=t.skipBoundary)||r}),this.subsupPlacement=t.supsubPlacement,this.svgAbove=t.svgAbove,this.svgBelow=t.svgBelow,this.svgBody=t.svgBody,this.above=t.above,this.below=t.below,this.boxType=null!=(a=t.boxType)?a:"ord",this.paddedBody=null!=(n=t.paddedBody)&&n,this.paddedLabels=null!=(s=t.paddedLabels)&&s}static fromJson(t){return new e(t)}toJson(){let t=super.toJson();return this.skipBoundary||(t.skipBoundary=!1),this.subsupPlacement&&(t.subsupPlacement=this.subsupPlacement),this.svgAbove&&(t.svgAbove=this.svgAbove),this.svgBelow&&(t.svgBelow=this.svgBelow),this.svgBody&&(t.svgBody=this.svgBody),"ord"!==this.boxType&&(t.boxType=this.boxType),this.paddedBody&&(t.paddedBody=!0),this.paddedLabels&&(t.paddedLabels=!0),t}render(t){let r=this.svgBody?di(this.svgBody):on.createBox(t,this.body,{type:"ignore"}),a=new oa({parent:t,mathstyle:"scriptstyle"},this.style),n=null;this.svgAbove?n=di(this.svgAbove):this.above&&(n=on.createBox(a,this.above,{type:"ignore"}));let s=null;this.svgBelow?s=di(this.svgBelow):this.below&&(s=on.createBox(a,this.below,{type:"ignore"})),this.paddedBody&&(r=new a5([Dt(t,"open"),r,Dt(t,"close")],{type:"ignore"}));let l=function(t,r){if(!r.base)return null;if(!r.above&&!r.below){let t=new a5(r.base,{type:r.type});return t.setStyle("position","relative"),t}let a=0;r.above&&(a=t.metrics.bigOpSpacing5);let n=null,s=r.base,l=["ML__center"];if(r.paddedAboveBelow&&l.push("ML__label_padding"),r.below&&r.above){let c=t.metrics.bigOpSpacing5+r.below.height+r.below.depth+s.depth+0;n=new a7({bottom:c,children:[t.metrics.bigOpSpacing5,{box:r.below,classes:l},{box:s,classes:["ML__center"]},a,{box:r.above,classes:l},t.metrics.bigOpSpacing5]})}else r.below?n=new a7({top:s.height-0,children:[t.metrics.bigOpSpacing5,{box:r.below,classes:l},{box:s,classes:["ML__center"]}]}):r.above&&(n=new a7({bottom:s.depth+0,children:[{box:s,classes:["ML__center"]},a,{box:r.above,classes:l},t.metrics.bigOpSpacing5]}));return new a5(n,{type:r.type})}(t,{base:r,above:n,below:s,type:"bin"===this.boxType||"rel"===this.boxType?this.boxType:"ord",paddedAboveBelow:this.paddedLabels});return l?(l="over-under"===this.subsupPlacement?this.attachLimits(t,{base:l,type:l.type}):this.attachSupsub(t,{base:l}),this.caret&&(l.caret=this.caret),this.bind(t,l)):null}},o8=class e extends on{constructor(t){var r,a,n,s;super(g(m({},t),{type:"phantom"})),this.captureSelection=!0,this.isInvisible=null!=(r=t.isInvisible)&&r,this.smashDepth=null!=(a=t.smashDepth)&&a,this.smashHeight=null!=(n=t.smashHeight)&&n,this.smashWidth=null!=(s=t.smashWidth)&&s}static fromJson(t){return new e(t)}toJson(){let t={};return this.isInvisible&&(t.isInvisible=!0),this.smashDepth&&(t.smashDepth=!0),this.smashHeight&&(t.smashHeight=!0),this.smashWidth&&(t.smashWidth=!0),m(m({},super.toJson()),t)}render(t){let r=new oa({parent:t,isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return this.isInvisible,on.createBox(r,this.body,{classes:"inner"});let a=on.createBox(this.isInvisible?r:t,this.body);if(!a)return null;if(this.smashWidth){let r=new a5(null,{classes:"fix"});return new a5([a,r],{classes:"rlap"}).wrap(t)}if(!this.smashHeight&&!this.smashDepth)return a;if(this.smashHeight&&(a.height=0),this.smashDepth&&(a.depth=0),a.children)for(let t of a.children)this.smashHeight&&(t.height=0),this.smashDepth&&(t.depth=0);return new a7({firstBaseline:[{box:a}]},{type:a.type}).wrap(t)}},o5=class e extends on{constructor(t){var r;super(m({type:"spacing"},t)),this.width=null==t?void 0:t.width,this._braced=null!=(r=null==t?void 0:t.braced)&&r}static fromJson(t){return new e(t)}toJson(){let t=super.toJson();return void 0!==this.width&&(t.width=this.width),this._braced&&(t.braced=!0),t}render(t){var r;let a;if("space"===this.command)return new a5("math"===this.mode?null:" ");if(void 0!==this.width)(a=new a5(null,{classes:"mspace"})).left=t.toEm(this.width);else{let t=null!=(r=({"\\qquad":"qquad","\\quad":"quad","\\enspace":"enspace","\\;":"thickspace","\\:":"mediumspace","\\,":"thinspace","\\!":"negativethinspace"})[this.command])?r:"mediumspace";a=new a5(null,{classes:t})}return a=this.bind(t,a),this.caret&&(a.caret=this.caret),a}_serialize(t){var r;if(!t.expandMacro&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let a=ee(this.command,this.mode);if(null!=a&&a.serialize)return a.serialize(this,t);let n=null!=(r=this.command)?r:"";return void 0===this.width?n:!this._braced||"register"in this.width?`${n}${le(this.width)}`:`${n}{${le(this.width)}}`}},o7=class e extends on{constructor(t){var r;super(g(m({},t),{type:"surd",mode:null!=(r=t.mode)?r:"math",style:t.style,displayContainsHighlight:!0,body:t.body})),this.above=t.index}static fromJson(t){return new e(g(m({},t),{index:t.above}))}_serialize(t){if(!(t.expandMacro||t.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let r=ee(this.command,this.mode);if(null!=r&&r.serialize)return r.serialize(this,t);let a=this.command,n=this.bodyToLatex(t);return this.above&&!this.hasEmptyBranch("above")?O(`${a}[${this.aboveToLatex(t)}]`,n):/^[0-9]$/.test(n)?`${a}${n}`:O(a,n)}render(t){var r;let a=new oa({parent:t,mathstyle:"cramp"},this.style),n=null!=(r=on.createBox(a,this.body,{type:"inner"}))?r:new a5(null),s=a.scalingFactor,l=a.metrics.defaultRuleThickness/s,c=t.isDisplayStyle?.431:l,d=new a5(null,{classes:"ML__sqrt-line",style:this.style,height:l}),h=s*(l+c/4),p=Math.max(2*s*c,n.height+n.depth)+h+l,y=new oa({parent:t},this.style),v=this.bind(y,new a5(xi("inner","\\surd",p,!1,y,{isSelected:this.isSelected}),{isSelected:this.isSelected,classes:"ML__sqrt-sign",style:this.style}));if(!v)return null;let k=v.height+v.depth-l;k>n.height+n.depth+h&&(h=(h+k-(n.height+n.depth))/2),v.setTop(v.height-n.height-h);let w=this.bind(t,new a7({firstBaseline:[{box:new a5(n)},h-2*l,{box:d},l]})),_=on.createBox(new oa({parent:t,mathstyle:"scriptscriptstyle"}),this.above,{type:"ignore"});if(!_){let r=new a5([v,w],{classes:this.containsCaret?"ML__contains-caret":"",type:"inner"});return r.setStyle("display","inline-block"),r.setStyle("height",r.height+r.depth,"em"),this.caret&&(r.caret=this.caret),this.bind(t,r)}let S=new a7({shift:-.6*(Math.max(v.height,w.height)-Math.max(v.depth,w.depth)),children:[{box:_}]}),M=new a5([new a5(S,{classes:"ML__sqrt-index",type:"ignore"}),v,w],{type:"inner",classes:this.containsCaret?"ML__contains-caret":""});return M.height=v.height,M.depth=v.depth,this.caret&&(M.caret=this.caret),this.bind(t,M)}},o9=class extends a5{constructor(t){super(null,{type:"skip",width:t})}toMarkup(){return`<span style="display:inline-block;width:${Math.round(100*this.width)/100}em"></span>`}};function ko(t,r){if(!t.parent)return;let a=t.parent.children,n=a.indexOf(t),s=n-1;for(;s>=0&&"ignore"===a[s].type;)s-=1;if(s<0&&t.parent.parent&&"lift"===t.parent.type){ko(t.parent,r);return}if(n>0&&"skip"===a[n-1].type){a[n-1].width+=r;return}a.splice(n,0,new o9(r))}var nt={ord:{op:3,bin:4,rel:5,inner:3},op:{ord:3,op:3,rel:5,inner:3},bin:{ord:4,op:4,open:4,inner:4},rel:{ord:5,op:5,open:5,inner:5},close:{op:3,bin:4,rel:5,inner:3},punct:{ord:3,op:3,rel:3,open:3,punct:3,inner:3},inner:{ord:3,op:3,bin:4,rel:5,open:3,punct:3,inner:3}},ni={ord:{op:3},op:{ord:3,op:3},close:{op:3},inner:{op:3}};function vt(t,r){if(!t.children)return t;let a=t.children;Mo(a,(t,r)=>{"bin"===r.type&&(!t||/^(middle|bin|op|rel|open|punct)$/.test(t.type))&&(r.type="ord"),(null==t?void 0:t.type)==="bin"&&/^(rel|close|punct)$/.test(r.type)&&(t.type="ord"),"ignore"!==r.type&&(t=r)});let n=r.getRegisterAsEm("thinmuskip"),s=r.getRegisterAsEm("medmuskip"),l=r.getRegisterAsEm("thickmuskip");return Mo(a,(t,r)=>{var a,c,d;if(!t)return;let h=t.type,p=r.isTight?null!=(a=ni[h])?a:null:null!=(c=nt[h])?c:null,y=null!=(d=null==p?void 0:p[r.type])?d:null;3===y&&ko(r,n),4===y&&ko(r,s),5===y&&ko(r,l)}),t}function Mo(t,r,a){if(!t)return a;for(let n of t=[...t])"lift"===n.type?a=Mo(n.children,r,a):"ignore"===n.type?Mo(n.children,r):(r(a,n),Mo(n.children,r),a=n);return a}var na=class e extends on{constructor(t){super({type:"tooltip",command:t.command,mode:t.mode,style:t.style,body:t.body,displayContainsHighlight:!0}),this.tooltip=new on({type:"root",mode:t.content,body:t.tooltip,style:{}}),this.skipBoundary=!0,this.captureSelection=!1}static fromJson(t){return new e(g(m({},t),{tooltip:Qe(t.tooltip)}))}toJson(){var t;let r=null==(t=this.tooltip.body)?void 0:t.filter(t=>"first"!==t.type).map(t=>t.toJson());return g(m({},super.toJson()),{tooltip:r})}render(t){let r=on.createBox(new oa,this.body);if(!r)return null;let a=new oa({parent:t,mathstyle:"displaystyle"},{fontSize:5}),n=tr(vt(new a5(this.tooltip.render(a),{classes:"ML__tooltip-content"}),a)),s=new a5([n,r],{classes:"ML__tooltip-container"});return this.caret&&(s.caret=this.caret),this.bind(t,s)}};function Qe(t){if(Q(t))return t.map(t=>Qe(t));if("string"==typeof t)return on.fromJson(t);for(let r of(t=m({},t),oo))t[r]&&(t[r]=Qe(t[r]));t.args&&(t.args=function(t){if(t&&Array.isArray(t))return t.map(t=>"<null>"===t?null:"object"==typeof t&&"group"in t?{group:t.group.map(t=>Qe(t))}:"object"==typeof t&&"atoms"in t?t.atoms.map(t=>Qe(t)):t)}(t.args)),t.array&&(t.array=Qe(t.array));let r=t.type,a;for(let n of("accent"===r&&(a=ow.fromJson(t)),"array"===r&&(a=oO.fromJson(t)),"box"===r&&(a=oN.fromJson(t)),"chem"===r&&(a=oX.fromJson(t)),"composition"===r&&(a=oq.fromJson(t)),"delim"===r&&(a=oZ.fromJson(t)),"enclose"===r&&(a=oQ.fromJson(t)),"error"===r&&(a=oF.fromJson(t)),"genfrac"===r&&(a=o0.fromJson(t)),"group"===r&&(a=oR.fromJson(t)),"latex"===r&&(a=o1.fromJson(t)),"latexgroup"===r&&(a=o4.fromJson(t)),"leftright"===r&&(a=oI.fromJson(t)),"macro"===r&&(a=oV.fromJson(t)),"macro-argument"===r&&(a=oj.fromJson(t)),"subsup"===r&&(a=oW.fromJson(t)),"overlap"===r&&(a=o3.fromJson(t)),"overunder"===r&&(a=o6.fromJson(t)),"placeholder"===r&&(a=oE.fromJson(t)),"prompt"===r&&(a=oH.fromJson(t)),"phantom"===r&&(a=o8.fromJson(t)),"sizeddelim"===r&&(a=oY.fromJson(t)),"spacing"===r&&(a=o5.fromJson(t)),"surd"===r&&(a=o7.fromJson(t)),"text"===r&&(a=os.fromJson(t)),"tooltip"===r&&(a=na.fromJson(t)),"mop"===r&&(a=o2.fromJson(t)),a||(r&&["first","mbin","mrel","mclose","minner","mopen","mord","mpunct","root","space"].includes(r),a=on.fromJson(t)),oo))t[n]&&a.setChildren(t[n],n);return void 0!==t.verbatimLatex&&(a.verbatimLatex=t.verbatimLatex),t.subsupPlacement&&(a.subsupPlacement=t.subsupPlacement),t.explicitSubsupPlacement&&(a.explicitSubsupPlacement=!0),t.isFunction&&(a.isFunction=!0),t.isExtensibleSymbol&&(a.isExtensibleSymbol=!0),t.skipBoundary&&(a.skipBoundary=!0),t.captureSelection&&(a.captureSelection=!0),a}var no={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams"],"ams-italic":["AMS-Regular","ML__ams"],"ams-bolditalic":["AMS-Regular","ML__ams"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak"],"fraktur-italic":["Fraktur-Regular","ML__frak"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb"],"double-struck-italic":["AMS-Regular","ML__bb"],"double-struck-bolditalic":["AMS-Regular","ML__bb"]},nn={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^’‘]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},ns=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,nc=[/^[a-z]$/,/^[A-Z]$/,ns,/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/],nd={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]};function u0(t){if(!t)return"";let{style:r}=t;if(void 0===r.variant)return"";let a=r.variant;return r.variantStyle&&"up"!==r.variantStyle&&(a+="-"+r.variantStyle),a}new class extends a8{constructor(){super("math")}createAtom(t,r,a){var n,s,l,c,d;if(null===r)return new on({type:"mord",mode:"math",command:t,value:t,style:a});if("symbol"===r.definitionType){let c=new on({type:null!=(n=r.type)?n:"mord",mode:"math",command:null!=(s=r.command)?s:t,value:String.fromCodePoint(r.codepoint),style:a});return null!=(l=r.isFunction)&&l&&(c.isFunction=!0),t.startsWith("\\")&&(c.verbatimLatex=t),c}let h=new on({type:"mord",mode:"math",command:null!=(c=r.command)?c:t,value:t,style:a});return null!=(d=r.isFunction)&&d&&(h.isFunction=!0),t.startsWith("\\")&&(h.verbatimLatex=t),h}serialize(t,r){let a=function(t,r){let{parent:a}=t[0],n=u0(a);return ht(t,"variant").map(t=>{let a=u0(t[0]),s="";a&&a!==n&&(s=({calligraphic:"\\mathcal",fraktur:"\\mathfrak","double-struck":"\\mathbb",script:"\\mathscr",monospace:"\\mathtt","sans-serif":"\\mathsf",normal:"\\mathrm","normal-italic":"\\mathnormal","normal-bold":"\\mathbf","normal-bolditalic":"\\mathbfit",ams:"","ams-italic":"\\mathit","ams-bold":"\\mathbf","ams-bolditalic":"\\mathbfit",main:"","main-italic":"\\mathit","main-bold":"\\mathbf","main-bolditalic":"\\mathbfit"})[a]);let l=D(t.map(t=>t._serialize(r)));return s?O(s,l):l})}(t,g(m({},r),{defaultMode:"math"}));return 0===a.length||"text"!==r.defaultMode?a:["$ ",...a," $"]}getFont(t,r){r.variant;let{variant:a}=r,{variantStyle:n}=r;"normal"===a&&!n&&/[\u00A3\u0131\u0237]/.test(t.value)&&(a="main",n="italic"),"normal"!==a||n||1!==t.value.length||nc.forEach((a,s)=>{var l;a.test(t.value)&&"it"===nd[null!=(l=r.letterShapeStyle)?l:"tex"][s]&&(n="italic")}),"up"===n&&(n=void 0);let s=n?a+"-"+n:a;no[s];let[l,c]=no[s];return nn[a]&&!nn[a].test(t.value)?(t.value=function(t,r,a){if(!/[A-Za-z\d]/.test(t)||!r&&!a)return t;let n=t.codePointAt(0);if(void 0===n)return t;for(let t of C)if((!r||t.variant===r)&&(!a||t.style===a)&&n>=t.offset&&n<t.offset+t.len){let r=t.start+n-t.offset;return String.fromCodePoint(M[r]||r)}return t}(t.value,a,n),null):(ns.test(t.value)&&(t.classes+=" lcGreek"),c&&(t.classes+=" "+c),l)}};var nu={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"};function Is(t){let r=t.split("+"),a={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:r.pop()};return r.includes("shift")&&(a.shift=!0),r.includes("alt")&&(a.alt=!0),r.includes("ctrl")&&(a.ctrl=!0),r.includes("cmd")&&(a.cmd=!0),r.includes("win")&&(a.win=!0),r.includes("meta")&&(a.meta=!0),a}function _o(t){let r="";return t.shift&&(r+="shift+"),t.alt&&(r+="alt+"),t.ctrl&&(r+="ctrl+"),t.cmd&&(r+="cmd+"),t.win&&(r+="win+"),t.meta&&(r+="meta+"),r+t.key}new class extends a8{constructor(){super("text")}createAtom(t,r,a){return r&&"symbol"===r.definitionType?new os(t,String.fromCodePoint(r.codepoint),null!=a?a:{}):null}serialize(t,r){var a;let n=(a=g(m({},r),{defaultMode:"text"}),ht(t,"fontFamily").map(t=>{var r,n;let s=ht(t,"fontSize").map(t=>{var r,n;let s=ht(t,"fontSeries").map(t=>{let r=ht(t,"fontShape").map(t=>{let r=t.map(t=>t._serialize(a)),{fontShape:n}=t[0].style,s="";return"it"===n&&(s="\\textit"),"sl"===n&&(s="\\textsl"),"sc"===n&&(s="\\textsc"),"n"===n&&(s="\\textup"),!s&&n?`{${O("\\fontshape",n)}${D(r)}}`:s?O(s,D(r)):D(r)}),{fontSeries:n}=t[0].style,s="";return"b"===n&&(s="\\textbf"),"l"===n&&(s="\\textlf"),"m"===n&&(s="\\textmd"),n&&!s?`{${O("\\fontseries",n)}${D(r)}}`:s?O(s,D(r)):D(r)}),l=null!=(n=["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][null!=(r=t[0].style.fontSize)?r:""])?n:"";return l?`${l} ${D(s)}`:D(s)}),l=null!=(n=({roman:"textrm",monospace:"texttt","sans-serif":"textsf"})[null!=(r=t[0].style.fontFamily)?r:""])?n:"";return l?`\\${l}{${D(s)}}`:t[0].style.fontFamily?`{\\fontfamily{${t[0].style.fontFamily}} ${D(s)}}`:D(s)}));return 0===n.length||"text"===r.defaultMode?n:["\\text{",...n,"}"]}getFont(t,r){var a,n,s,l,c;let{fontFamily:d}=r;if(nu[d]?t.classes+=" "+nu[d]:d&&t.setStyle("font-family",d),r.fontShape&&(t.classes+=" ",t.classes+=null!=(a=({it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"})[r.fontShape])?a:""),r.fontSeries){let a=r.fontSeries.match(/(.?[lbm])?(.?[cx])?/);a&&(t.classes+=" ",t.classes+=null!=(s=({ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"})[null!=(n=a[1])?n:""])?s:"",t.classes+=" ",t.classes+=null!=(c=({uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"})[null!=(l=a[2])?l:""])?c:"")}return"Main-Regular"}},new class extends a8{constructor(){super("latex")}createAtom(t){return new o1(t)}serialize(t,r){return t.filter(t=>t instanceof o1&&!t.isSuggestion).map(t=>t.value)}getFont(){return null}};var nh,np,nf,ny="apple"===Ns()?{id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","∫","ı"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","∂","\xce"],KeyE:["e","E","\xb4","\xb4"],KeyF:["f","F","ƒ","\xcf"],KeyG:["g","G","\xa9","˝"],KeyH:["h","H","˙","\xd3"],KeyI:["i","I","ˆ","ˆ"],KeyJ:["j","J","∆","\xd4"],KeyK:["k","K","˚",""],KeyL:["l","L","\xac","\xd2"],KeyM:["m","M","\xb5","\xc2"],KeyN:["n","N","˜","˜"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","œ","Œ"],KeyR:["r","R","\xae","‰"],KeyS:["s","S","\xdf","\xcd"],KeyT:["t","T","†","ˇ"],KeyU:["u","U","\xa8","\xa8"],KeyV:["v","V","√","◊"],KeyW:["w","W","∑","„"],KeyX:["x","X","≈","˛"],KeyY:["y","Y","\xa5","\xc1"],KeyZ:["z","Z","Ω","\xb8"],Digit1:["1","!","\xa1","⁄"],Digit2:["2","@","™","€"],Digit3:["3","#","\xa3","‹"],Digit4:["4","$","\xa2","›"],Digit5:["5","%","∞","ﬁ"],Digit6:["6","^","\xa7","ﬂ"],Digit7:["7","&","\xb6","‡"],Digit8:["8","*","•","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","‚"],Space:[" "," "," "," "],Minus:["-","_","–","—"],Equal:["=","+","≠","\xb1"],BracketLeft:["[","{","“","”"],BracketRight:["]","}","‘","’"],Backslash:["\\","|","\xab","\xbb"],Semicolon:[";",":","…","\xda"],Quote:["'",'"',"\xe6","\xc6"],Backquote:["`","˜","`","`"],Comma:[",","<","≤","\xaf"],Period:[".",">","≥","˘"],Slash:["/","?","\xf7","\xbf"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}}:"windows"===Ns()?{id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","\xe1","\xc1"],KeyB:["b","B","",""],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\xe9","\xc9"],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","\xed","\xcd"],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","\xf8","\xd8"],KeyM:["m","M","\xb5",""],KeyN:["n","N","\xf1","\xd1"],KeyO:["o","O","\xf3","\xd3"],KeyP:["p","P","\xf6","\xd6"],KeyQ:["q","Q","\xe4","\xc4"],KeyR:["r","R","\xae",""],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\xfe","\xde"],KeyU:["u","U","\xfa","\xda"],KeyV:["v","V","",""],KeyW:["w","W","\xe5","\xc5"],KeyX:["x","X","",""],KeyY:["y","Y","\xfc","\xdc"],KeyZ:["z","Z","\xe6","\xc6"],Digit1:["1","!","\xa1","\xb9"],Digit2:["2","@","\xb2",""],Digit3:["3","#","\xb3",""],Digit4:["4","$","\xa4","\xa3"],Digit5:["5","%","€",""],Digit6:["6","^","\xbc",""],Digit7:["7","&","\xbd",""],Digit8:["8","*","\xbe",""],Digit9:["9","(","‘",""],Digit0:["0",")","’",""],Space:[" "," ","",""],Minus:["-","_","\xa5",""],Equal:["=","+","\xd7","\xf7"],BracketLeft:["[","{","\xab",""],BracketRight:["]","}","\xbb",""],Backslash:["\\","|","\xac","\xa6"],Semicolon:[";",":","\xb6","\xb0"],Quote:["'",'"',"\xb4","\xa8"],Backquote:["`","~","",""],Comma:[",","<","\xe7","\xc7"],Period:[".",">","",""],Slash:["/","?","\xbf",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}}:{id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},ng={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},nb=[];function Ns(){switch(Vt()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function wt(t){t.platform&&t.platform!==Ns()||nb.push(t)}function ur(){return null!=nf?nf:nb[0]}function y0(t){let r=t;return Q(r)&&(r=r.length>0?r[0]+"("+r.slice(1).join("")+")":""),r}function qs(t){var r;let a=/macos|ios|/.test(Vt()),n=t.split("+"),s="";for(let t of n)!a&&s&&(s+='<span class="ML__shortcut-join">+</span>'),t.startsWith("[Key")?s+=t.slice(4,5):t.startsWith("Key")?s+=t.slice(3,4):t.startsWith("[Digit")?s+=t.slice(6,7):t.startsWith("Digit")?s+=t.slice(5,6):s+=null!=(r=({cmd:"⌘",meta:a?"⌘":"command",shift:a?"⇧":"shift",alt:a?"⌥":"alt",ctrl:a?"⌃":"control","\n":a?"⏎":"return","[return]":a?"⏎":"return","[enter]":a?"⌤":"enter","[tab]":a?"⇥":"tab","[escape]":"esc","[backspace]":a?"⌫":"backspace","[delete]":a?"⌦":"del","[pageup]":a?"⇞":"page up","[pagedown]":a?"⇟":"page down","[home]":a?"⤒":"home","[end]":a?"⤓":"end","[space]":"space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",bracketLeft:"[",bracketRight:"]",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"⇠",up:"⇡",right:"⇢",down:"⇣","[arrowleft]":"⇠","[arrowup]":"⇡","[arrowright]":"⇢","[arrowdown]":"⇣","[digit0]":"0","[digit1]":"1","[digit2]":"2","[digit3]":"3","[digit4]":"4","[digit5]":"5","[digit6]":"6","[digit7]":"7","[digit8]":"8","[digit9]":"9"})[t.toLowerCase()])?r:t.toUpperCase();return s}function $s(t){if(Array.isArray(t)){let r=[...t];return r.shift()+"("+r.map(t=>"string"==typeof t?`"${t}"`:t.toString()).join(", ")+")"}return t}function et(t){return{value:t.model.getValue(),selectionIsCollapsed:t.model.selectionIsCollapsed,canUndo:t.canUndo(),canRedo:t.canRedo(),style:t.selectionStyle,mode:t.model.mode}}function aa(t){window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(et(t.mathfield)),t.silenceNotifications||(t.silenceNotifications=!0,t.listeners.onSelectionDidChange(),t.silenceNotifications=!1)}function N(t,r={}){if(t.silenceNotifications)return!0;t.silenceNotifications=!0;let a=t.listeners.onContentWillChange(r);return t.silenceNotifications=!1,a}function K(t,r){var a;window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(et(t.mathfield)),t.silenceNotifications||!t.mathfield.host||(t.silenceNotifications=!0,t.mathfield.host.dispatchEvent(new InputEvent("input",g(m({},r),{data:r.data?r.data:null!=(a=r.inputType)?a:"",bubbles:!0,composed:!0}))),t.silenceNotifications=!1)}function Dr(t){var r,a;let n=t.atoms.find(t=>"latexgroup"===t.type);return n&&null!=(a=null==(r=n.body)?void 0:r.filter(t=>"latex"===t.type))?a:[]}function sa(t,r){var a;let n=0,s=!1,l=Number.isFinite(null==r?void 0:r.before)?null!=(a=null==r?void 0:r.before)?a:0:t.lastOffset;for(;n<=l&&!s;){let r=t.at(n);(s=r instanceof o1&&r.isSuggestion)||n++}if(!s)return[void 0,void 0];let c=n,d=!1;for(;c<=l&&!d;){let r=t.at(c);(d=!(r instanceof o1&&r.isSuggestion))||c++}return[n-1,c-1]}function Ao(t){let r=Dr(t.model).filter(t=>t.isSuggestion);if(0!==r.length)for(let a of(t.model.position=t.model.offsetOf(r[0].leftSibling),r))a.parent.removeChild(a)}function dr(t,r){var a;let{model:n}=t;for(let r of(Ao(t),Dr(n)))r.isError=!1;if(!n.selectionIsCollapsed||"off"===t.options.popoverPolicy){Ci(t);return}let s=[],l=n.at(n.position);for(;l&&l instanceof o1&&/^[a-zA-Z\*]$/.test(l.value);)l=l.leftSibling;if(l&&l instanceof o1&&"\\"===l.value)for(s.push(l),l=l.rightSibling;l&&l instanceof o1&&/^[a-zA-Z\*]$/.test(l.value);)s.push(l),l=l.rightSibling;let c=s.map(t=>t.value).join(""),d=function(t,r){var a,n;if(0===r.length||"\\"===r||!r.startsWith("\\"))return[];let s=[];for(let t in $)t.startsWith(r)&&!$[t].infix&&s.push({match:t,frequency:null!=(a=$[t].frequency)?a:0});for(let t in E)t.startsWith(r)&&s.push({match:t,frequency:null!=(n=E[t].frequency)?n:0});let l=r.substring(1);for(let r of Object.keys(t.options.macros))r.startsWith(l)&&s.push({match:"\\"+r,frequency:0});return s.sort((t,r)=>{var a,n;return t.frequency===r.frequency?t.match.length===r.match.length?t.match<r.match?-1:1:t.match.length-r.match.length:(null!=(a=r.frequency)?a:0)-(null!=(n=t.frequency)?n:0)}),s.map(t=>t.match)}(t,c);if(0===d.length){if(/^\\[a-zA-Z\*]+$/.test(c))for(let t of s)t.isError=!0;Ci(t);return}let h=null!=(a=null==r?void 0:r.atIndex)?a:0;t.suggestionIndex=h<0?d.length-1:h%d.length;let p=d[t.suggestionIndex];if(p!==c){let r=s[s.length-1];r.parent.addChildrenAfter([...p.slice(c.length-p.length)].map(t=>new o1(t,{isSuggestion:!0})),r),tt(t,{interactive:!0})}!function(t,r){var a,n;let s;if(0===r.length){Ci(t);return}let l="";for(let[a,n]of r.entries()){let r=function(t,r){let a=new oa({from:t.context}),n=new on({mode:"math",type:"root",body:oe(r,{context:a})});return rr(tr(vt(new a5(n.render(a),{classes:"ML__base"}),a)),{classes:"ML__mathlive"}).toMarkup()}(t,n),s=(function(t,r){let a=[];if("string"==typeof r){let t=of[r];Q(t)?a=t.slice():t&&a.push(t)}let n=RegExp("^"+y0(r).replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let r of t)n.test(y0(r.command))&&a.push(r.key);return a.map(qs)})(t.keybindings,n).join("<br>");l+=`<li role="button" data-command="${n}" ${a===t.suggestionIndex?"class=ML__popover__current":""}><span class="ML__popover__latex">${n}</span><span class="ML__popover__command">${r}</span>`,s&&(l+=`<span class="ML__popover__keybinding">${s}</span>`),l+="</li>"}let c=(n=`<ul>${l}</ul>`,(s=document.getElementById("mathlive-suggestion-popover"))||(s=Br("mathlive-suggestion-popover"),Pe("suggestion-popover"),Pe("core"),s.addEventListener("pointerdown",t=>t.preventDefault()),s.addEventListener("click",r=>{let a=r.target;for(;a&&!a.dataset.command;)a=a.parentElement;a&&(mr(t,"reject"),oh.insert(t.model,a.dataset.command,{selectionMode:"placeholder",format:"latex",mode:"math"}),t.dirty=!0,t.focus())})),s.innerHTML=window.MathfieldElement.createHTML(n),s);Ws()&&(null==(a=c.querySelector(".ML__popover__current"))||a.scrollIntoView({block:"nearest",inline:"nearest"})),setTimeout(()=>{var r;c&&!Ws()&&(c.classList.add("is-visible"),Ti(t),null==(r=c.querySelector(".ML__popover__current"))||r.scrollIntoView({block:"nearest",inline:"nearest"}))},32)}(t,d)}function js(t){let[r,a]=sa(t,{before:t.position});if(void 0===r||void 0===a)return!1;let n=!1;return t.getAtoms([r,a]).forEach(t=>{t.isSuggestion&&(t.isSuggestion=!1,n=!0)}),n}function mr(t,r="accept",a){var n,s;Ci(t);let l=t.model.atoms.find(t=>"latexgroup"===t.type);if(!l)return!1;if("accept-suggestion"===r){let r=Dr(t.model).filter(t=>t.isSuggestion);if(0===r.length)return!1;for(let t of r)t.isSuggestion=!1;return t.model.position=t.model.offsetOf(r[r.length-1]),!0}let c=Dr(t.model).filter(t=>!t.isSuggestion).map(t=>t.value).join(""),d=l.leftSibling;return l.parent.removeChild(l),t.model.position=t.model.offsetOf(d),t.model.mode=null!=(n=null==a?void 0:a.mode)?n:"math","reject"===r||(oh.insert(t.model,c,{selectionMode:null!=(s=null==a?void 0:a.selectItem)&&s?"item":"placeholder",format:"latex",mode:"math"}),t.snapshot(),t.model.announce("replacement")),!0}function Br(t){var r;let a=document.getElementById(t);return a?a.dataset.refcount=Number(Number.parseInt(null!=(r=a.dataset.refcount)?r:"0")+1).toString():((a=document.createElement("div")).setAttribute("aria-hidden","true"),a.dataset.refcount="1",a.id=t,document.body.append(a)),a}function Ei(t){var r;let a=document.getElementById(t);if(!a)return;let n=Number.parseInt(null!=(r=a.getAttribute("data-refcount"))?r:"0");n<=1?a.remove():a.dataset.refcount=Number(n-1).toString()}function Ws(){let t=document.getElementById("mathlive-suggestion-popover");return!!t&&t.classList.contains("is-visible")}function Ti(t,r){var a;if(!t.element||t.element.mathfield!==t||!Ws())return;if((null==(a=t.model.at(t.model.position))?void 0:a.type)!=="latex"){Ci(t);return}if(null!=r&&r.deferred){setTimeout(()=>Ti(t),32);return}let n=hi(t.field);if(!n)return;let s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=window.innerWidth-document.documentElement.clientWidth,d=window.innerHeight-document.documentElement.clientHeight,h=window.mathVirtualKeyboard.boundingRect.height,p=document.getElementById("mathlive-suggestion-popover");n.x+p.offsetWidth/2>l-c?p.style.left=`${l-p.offsetWidth-c}px`:n.x-p.offsetWidth/2<0?p.style.left="0":p.style.left=`${n.x-p.offsetWidth/2}px`;let y=n.y-n.height;s-d-h-n.y<y?(p.classList.add("ML__popover--reverse-direction"),p.classList.remove("top-tip"),p.classList.add("bottom-tip"),p.style.top=`${n.y-n.height-p.offsetHeight-15}px`):(p.classList.remove("ML__popover--reverse-direction"),p.classList.add("top-tip"),p.classList.remove("bottom-tip"),p.style.top=`${n.y+15}px`)}function Ci(t){t.suggestionIndex=0;let r=document.getElementById("mathlive-suggestion-popover");r&&(r.classList.remove("is-visible"),r.innerHTML="")}wt(ny),wt({id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","‡","Ω"],KeyB:["b","B","\xdf","∫"],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","∂","∆"],KeyE:["e","E","\xea","\xca"],KeyF:["f","F","ƒ","\xb7"],KeyG:["g","G","ﬁ","ﬂ"],KeyH:["h","H","\xcc","\xce"],KeyI:["i","I","\xee","\xef"],KeyJ:["j","J","\xcf","\xcd"],KeyK:["k","K","\xc8","\xcb"],KeyL:["l","L","\xac","|"],KeyM:[",","?","∞","\xbf"],KeyN:["n","N","~","ı"],KeyO:["o","O","œ","Œ"],KeyP:["p","P","π","∏"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xae","‚"],KeyS:["s","S","\xd2","∑"],KeyT:["t","T","†","™"],KeyU:["u","U","\xba","\xaa"],KeyV:["v","V","◊","√"],KeyW:["z","Z","\xc2","\xc5"],KeyX:["x","X","≈","⁄"],KeyY:["y","Y","\xda","Ÿ"],KeyZ:["w","W","‹","›"],Digit1:["&","1","","\xb4"],Digit2:["\xe9","2","\xeb","„"],Digit3:['"',"3","“","”"],Digit4:["'","4","‘","’"],Digit5:["(","5","{","["],Digit6:["\xa7","6","\xb6","\xe5"],Digit7:["\xe8","7","\xab","\xbb"],Digit8:["!","8","\xa1","\xdb"],Digit9:["\xe7","9","\xc7","\xc1"],Digit0:["\xe0","0","\xf8","\xd8"],Space:[" "," "," "," "],Minus:[")","\xb0","}","]"],Equal:["-","_","—","–"],BracketLeft:["^","\xa8","\xf4","\xd4"],BracketRight:["$","*","€","\xa5"],Backslash:["`","\xa3","@","#"],Semicolon:["m","M","\xb5","\xd3"],Quote:["\xf9","%","\xd9","‰"],Backquote:["<",">","≤","≥"],Comma:[";",".","…","•"],Period:[":","/","\xf7","\\"],Slash:["=","+","≠","\xb1"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","•","Ÿ"],NumpadEqual:["=","=","=","="]}}),wt({id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\xdf",""],KeyC:["c","C","\xa9"," "],KeyD:["d","D","∂","∆"],KeyE:["e","E","€","€"],KeyF:["f","F","ƒ","ﬁ"],KeyG:["g","G","","ﬂ"],KeyH:["h","H","™"," "],KeyI:["i","I"," "," "],KeyJ:["j","J","\xb6","\xaf"],KeyK:["k","K","\xa7","ˇ"],KeyL:["l","L"," ","˘"],KeyM:["m","M","\xb5","˚"],KeyN:["n","N"," ","˙"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","œ","Œ"],KeyR:["r","R","\xae"," "],KeyS:["s","S","∫"," "],KeyT:["t","T","†","‡"],KeyU:["u","U"," "," "],KeyV:["v","V","√","◊"],KeyW:["w","W","\xe6","\xc6"],KeyX:["x","X","∑","›"],KeyY:["y","Y","\xa5"," "],KeyZ:["z","Z","Ω","‹"],Digit1:["1","!","|","ı"],Digit2:["2",'"',"@","˝"],Digit3:["3","\xb7","#","•"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","∞","‰"],Digit6:["6","&","\xac"," "],Digit7:["7","/","\xf7","⁄"],Digit8:["8","(","“","‘"],Digit9:["9",")","”","’"],Digit0:["0","=","≠","≈"],Space:[" "," "," "," "],Minus:["'","?","\xb4","\xb8"],Equal:["\xa1","\xbf","‚","˛"],BracketLeft:["`","^","[","ˆ"],BracketRight:["+","*","]","\xb1"],Backslash:["\xe7","\xc7","}","\xbb"],Semicolon:["\xf1","\xd1","~","˜"],Quote:["\xb4","\xa8","{","\xab"],Backquote:["<",">","≤","≥"],Comma:[",",";","„",""],Period:[".",":","…","…"],Slash:["-","_","–","—"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["\xba","\xaa","\\","\xb0"]}}),wt({id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","\xb7","#",""],Digit4:["4","$","~",""],Digit5:["5","%","€",""],Digit6:["6","&","\xac",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["\xa1","\xbf","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["\xe7","\xc7","}",""],Semicolon:["\xf1","\xd1","",""],Quote:["\xb4","\xa8","{",""],Backquote:["\xba","\xaa","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),wt({id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe6","\xc6"],KeyB:["b","B","”","’"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","€","\xa2"],KeyF:["f","F","đ","\xaa"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̉","̛"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:["m","M","\xb5","\xba"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["q","Q","@","Ω"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","“","‘"],KeyW:["w","W","ł","Ł"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","←","\xa5"],KeyZ:["z","Z","\xab","<"],Digit1:["1","!","|","\xa1"],Digit2:["2",'"',"@","⅛"],Digit3:["3","\xb7","#","\xa3"],Digit4:["4","$","~","$"],Digit5:["5","%","\xbd","⅜"],Digit6:["6","&","\xac","⅝"],Digit7:["7","/","{","⅞"],Digit8:["8","(","[","™"],Digit9:["9",")","]","\xb1"],Digit0:["0","=","}","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["'","?","\\","\xbf"],Equal:["\xa1","\xbf","̃","~"],BracketLeft:["̀","̂","[","̊"],BracketRight:["+","*","]","̄"],Backslash:["\xe7","\xc7","}","̆"],Semicolon:["\xf1","\xd1","~","̋"],Quote:["́","̈","{","{"],Backquote:["\xba","\xaa","\\","\\"],Comma:[",",";","─","\xd7"],Period:[".",":","\xb7","\xf7"],Slash:["-","_","̣","̇"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}}),wt({id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@","Ω"],KeyB:["b","B","”","’"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","€","\xa2"],KeyF:["f","F","đ","\xaa"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̉","̛"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:[",","?","́","̋"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","“","‘"],KeyW:["z","Z","\xab","<"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","←","\xa5"],KeyZ:["w","W","ł","Ł"],Digit1:["&","1","\xb9","\xa1"],Digit2:["\xe9","2","~","⅛"],Digit3:['"',"3","#","\xa3"],Digit4:["'","4","{","$"],Digit5:["(","5","[","⅜"],Digit6:["-","6","|","⅝"],Digit7:["\xe8","7","`","⅞"],Digit8:["_","8","\\","™"],Digit9:["\xe7","9","^","\xb1"],Digit0:["\xe0","0","@","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:[")","\xb0","]","\xbf"],Equal:["=","+","}","̨"],BracketLeft:["̂","̈","̈","̊"],BracketRight:["$","\xa3","\xa4","̄"],Backslash:["*","\xb5","̀","̆"],Semicolon:["m","M","\xb5","\xba"],Quote:["\xf9","%","̂","̌"],Backquote:["\xb2","~","\xac","\xac"],Comma:[";",".","─","\xd7"],Period:[":","/","\xb7","\xf7"],Slash:["!","\xa7","̣","̇"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"]}}),wt({id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["\xe9","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["\xe8","7","`",""],Digit8:["_","8","\\",""],Digit9:["\xe7","9","^",""],Digit0:["\xe0","0","@",""],Space:[" "," ","",""],Minus:[")","\xb0","]",""],Equal:["=","+","}",""],BracketLeft:["^","\xa8","",""],BracketRight:["$","\xa3","\xa4",""],Backslash:["*","\xb5","",""],Semicolon:["m","M","",""],Quote:["\xf9","%","",""],Backquote:["\xb2","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","\xa7","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),wt({id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","\xb5",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"\xb2",""],Digit3:["3","\xa7","\xb3",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["\xdf","?","\\","ẞ"],Equal:["\xb4","`","",""],BracketLeft:["\xfc","\xdc","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["\xf6","\xd6","",""],Quote:["\xe4","\xc4","",""],Backquote:["^","\xb0","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}}),wt({id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","∫","‹"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","∂","™"],KeyE:["e","E","€","‰"],KeyF:["f","F","ƒ","\xcf"],KeyG:["g","G","\xa9","\xcc"],KeyH:["h","H","\xaa","\xd3"],KeyI:["i","I","⁄","\xdb"],KeyJ:["j","J","\xba","ı"],KeyK:["k","K","∆","ˆ"],KeyL:["l","L","@","ﬂ"],KeyM:["m","M","\xb5","˘"],KeyN:["n","N","~","›"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","\xab","\xbb"],KeyR:["r","R","\xae","\xb8"],KeyS:["s","S","‚","\xcd"],KeyT:["t","T","†","˝"],KeyU:["u","U","\xa8","\xc1"],KeyV:["v","V","√","◊"],KeyW:["w","W","∑","„"],KeyX:["x","X","≈","\xd9"],KeyY:["z","Z","Ω","ˇ"],KeyZ:["y","Y","\xa5","‡"],Digit1:["1","!","\xa1","\xac"],Digit2:["2",'"',"“","”"],Digit3:["3","\xa7","\xb6","#"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","[","ﬁ"],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{","˜"],Digit9:["9",")","}","\xb7"],Digit0:["0","=","≠","\xaf"],Space:[" "," "," "," "],Minus:["\xdf","?","\xbf","˙"],Equal:["\xb4","`","'","˚"],BracketLeft:["\xfc","\xdc","•","\xb0"],BracketRight:["+","*","\xb1",""],Backslash:["#","'","‘","’"],Semicolon:["\xf6","\xd6","œ","Œ"],Quote:["\xe4","\xc4","\xe6","\xc6"],Backquote:["<",">","≤","≥"],Comma:[",",";","∞","˛"],Period:[".",":","…","\xf7"],Slash:["-","_","–","—"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","\xb0","„","“"],NumpadEqual:["=","=","=","="]}}),wt({id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["x","X","≈","˛"],KeyC:["j","J","∆","\xd4"],KeyD:["e","E","\xb4","\xb4"],KeyE:[".",">","≥","˘"],KeyF:["u","U","\xa8","\xa8"],KeyG:["i","I","ˆ","ˆ"],KeyH:["d","D","∂","\xce"],KeyI:["c","C","\xe7","\xc7"],KeyJ:["h","H","˙","\xd3"],KeyK:["t","T","†","ˇ"],KeyL:["n","N","˜","˜"],KeyM:["m","M","\xb5","\xc2"],KeyN:["b","B","∫","ı"],KeyO:["r","R","\xae","‰"],KeyP:["l","L","\xac","\xd2"],KeyQ:["'",'"',"\xe6","\xc6"],KeyR:["p","P","π","∏"],KeyS:["o","O","\xf8","\xd8"],KeyT:["y","Y","\xa5","\xc1"],KeyU:["g","G","\xa9","˝"],KeyV:["k","K","˚",""],KeyW:[",","<","≤","\xaf"],KeyX:["q","Q","œ","Œ"],KeyY:["f","F","ƒ","\xcf"],KeyZ:[";",":","…","\xda"],Digit1:["1","!","\xa1","⁄"],Digit2:["2","@","™","€"],Digit3:["3","#","\xa3","‹"],Digit4:["4","$","\xa2","›"],Digit5:["5","%","∞","ﬁ"],Digit6:["6","^","\xa7","ﬂ"],Digit7:["7","&","\xb6","‡"],Digit8:["8","*","•","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","‚"],Space:[" "," "," "," "],Minus:["[","{","“","”"],Equal:["]","}","‘","’"],BracketLeft:["/","?","\xf7","\xbf"],BracketRight:["=","+","≠","\xb1"],Backslash:["\\","|","\xab","\xbb"],Semicolon:["s","S","\xdf","\xcd"],Quote:["-","_","–","—"],Backquote:["`","~","`","`"],Comma:["w","W","∑","„"],Period:["v","V","√","◊"],Slash:["z","Z","Ω","\xb8"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}}),new class extends oh{constructor(){super("latex")}createAtom(t){return new o1(t)}onPaste(t,r){if(!r)return!1;let a="string"==typeof r?r:r.getData("application/x-latex")||r.getData("text/plain");return!!(a&&N(t.model,{inputType:"insertFromPaste",data:a}))&&(t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,a)&&(t.startRecording(),t.snapshot("paste"),K(t.model,{inputType:"insertFromPaste"}),U(t)),t.startRecording(),!0)}insert(t,r,a){if(!N(t,{data:r,inputType:"insertText"}))return!1;a||(a={}),a.insertionMode||(a.insertionMode="replaceSelection"),a.selectionMode||(a.selectionMode="placeholder");let{silenceNotifications:n}=t;a.silenceNotifications&&(t.silenceNotifications=!0);let s=t.silenceNotifications;t.silenceNotifications=!0,"replaceSelection"!==a.insertionMode||t.selectionIsCollapsed?"replaceAll"===a.insertionMode?(t.root.setChildren([],"body"),t.position=0):"insertBefore"===a.insertionMode?t.collapseSelection("backward"):"insertAfter"===a.insertionMode&&t.collapseSelection("forward"):t.deleteAtoms(G(t.selection));let l=[];for(let t of r)R.test(t)&&l.push(new o1(t));let c=t.at(t.position);if(c instanceof o4&&(c=c.lastChild),!(c.parent instanceof o4)){let t=new o4("");c.parent.addChildAfter(t,c),c=t.firstChild}let d=c.parent.addChildrenAfter(l,c);return t.silenceNotifications=s,"before"===a.selectionMode||("item"===a.selectionMode?t.setSelection(t.anchor,t.offsetOf(d)):d&&(t.position=t.offsetOf(d))),K(t,{data:r,inputType:"insertText"}),t.silenceNotifications=n,!0}};var nv,nx,nk=null,nw=(null==(nx=null==(nv=null==globalThis?void 0:globalThis.document)?void 0:nv.currentScript)?void 0:nx.src)||function(){let t=String(Error().stack).replace(/^Error.*\n/,"").split(`
`);if(0===t.length)return console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${Error().stack}").`),"";let r=t[1],a=r.match(/http.*\.ts[\?:]/);return a&&(r=t[2]),(a=r.match(/(https?:.*):[0-9]+:[0-9]+/))||(a=r.match(/at (.*(\.ts))[\?:]/))||(a=r.match(/at (.*(\.mjs|\.js))[\?:]/)),a?a[1]:(console.error(t),console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${r}").`),"")}();async function la(t){if(/^(?:[a-z+]+:)?\/\//i.test(t))return new URL(t).href;if(null===nk)try{let t=await fetch(nw,{method:"HEAD"});200===t.status&&(nk=t.url)}catch(r){console.error(`Invalid URL "${t}" (relative to "${nw}")`)}return new URL(t,null!=nk?nk:nw).href}var n_="not-loaded";async function A0(){return n_="not-loaded",Kr()}async function Kr(){var t;if("not-loaded"===n_){if(n_="loading",null!=(t=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))&&t){n_="ready";return}if(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document){let t=Array.from(document.fonts).map(t=>t.family);if(["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"].every(r=>t.includes(r))){n_="ready";return}if(!window.MathfieldElement.fontsDirectory){n_="not-loaded";return}let r=await la(window.MathfieldElement.fontsDirectory);if(!r){document.body.classList.add("ML__fonts-did-not-load"),n_="error";return}let a=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular",{style:"italic"}],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(t=>(function(t,r,a={}){return new FontFace(t,`url(${r}.woff2) format('woff2')`,a)})(t[0].replace(/-[a-zA-Z]+$/,""),`${r}/${t[0]}`,t[1]));try{(await Promise.all(a.map(t=>{try{return t.load()}catch(t){}}))).forEach(t=>document.fonts.add(t)),n_="ready";return}catch(t){console.error(`MathLive 0.95.0: The math fonts could not be loaded from "${r}"`,{cause:t}),document.body.classList.add("ML__fonts-did-not-load")}n_="error"}}}function U(t,r){t.dirty||(t.dirty=!0,requestAnimationFrame(()=>{Pt(t)&&t.dirty&&(t.atomBoundsCache=new Map,tt(t,r),t.atomBoundsCache=void 0)}))}function Js(t,r){var a,n;let s,{model:l}=t;for(let t of(l.root.caret=void 0,l.root.isSelected=!1,l.root.containsCaret=!0,l.atoms))t.caret=void 0,t.isSelected=!1,t.containsCaret=!1;if(l.selectionIsCollapsed){if(t.isSelectionEditable&&t.hasFocus()){let r=l.at(l.position);r.caret=t.model.mode;let a=r.parent;for(;a;)a.containsCaret=!0,a=a.parent}}else for(let t of l.getAtoms(l.selection,{includeChildren:!0}))t.isSelected=!0;return(a=null!=(a=r)?a:{},s=new oa({from:g(m({},t.context),{atomIdsSettings:{seed:a.forHighlighting?function(t){let r=0;for(let a=0;a<t.length;a++)r=31*r+t.charCodeAt(a)|0;return Math.abs(r)}(on.serialize([t.model.root],{expandMacro:!1,defaultMode:t.options.defaultMode})):"random",groupNumbers:null!=(n=a.forHighlighting)&&n},letterShapeStyle:t.options.letterShapeStyle}),mathstyle:"inline-math"===t.options.defaultMode?"textstyle":"displaystyle"}),rr(vt(t.model.root.render(s),s),{classes:t.hasEditablePrompts?"ML__mathlive ML__prompting":"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})).toMarkup()}function tt(t,r){var a;if(!Pt(t))return;null!=r||(r={});let n=null==(a=t.element)?void 0:a.querySelector("[part=virtual-keyboard-toggle]");n&&(n.style.display=t.hasEditableContent?"flex":"none");let s=t.field,l=t.isSelectionEditable&&t.hasFocus(),c=s.classList.contains("ML__focused");c&&!l?s.classList.remove("ML__focused"):!c&&l&&s.classList.add("ML__focused"),s.innerHTML=window.MathfieldElement.createHTML(Js(t,r)),t.fieldContent=s.getElementsByClassName("ML__mathlive")[0],Co(t,r.interactive),t.dirty=!1}function Co(t,r){let a=t.field;if(!a)return;for(let t of a.querySelectorAll(".ML__selection, .ML__contains-highlight"))t.remove();null!=r&&r||"error"===n_||"ready"===n_||setTimeout(()=>{"ready"===n_?Co(t):setTimeout(()=>Co(t),128)},32);let n=t.model,s=parseFloat(getComputedStyle(a).width),l=a.getBoundingClientRect().width/s;if(l=isNaN(l)?1:l,n.selectionIsCollapsed){Ti(t,{deferred:!0});let r=n.at(n.position);for(;r&&!(r.containsCaret&&r.displayContainsHighlight);)r=r.parent;if(null!=r&&r.containsCaret&&r.displayContainsHighlight){let n=Bs(t,sr(t,r),l);if(n){n.left/=l,n.right/=l,n.top/=l,n.bottom/=l;let t=document.createElement("div");t.classList.add("ML__contains-highlight"),t.style.position="absolute",t.style.left=`${n.left}px`,t.style.top=`${n.top}px`,t.style.width=`${Math.ceil(n.right-n.left)}px`,t.style.height=`${Math.ceil(n.bottom-n.top-1)}px`,a.insertBefore(t,a.childNodes[0])}}return}for(let r of function(t){let r=[];for(let a of t){let t=!1;for(let n of r)if(a.left===n.left&&a.right===n.right&&a.top===n.top&&a.bottom===n.bottom){t=!0;break}t||r.push(a)}for(let a of(t=r,r=[],t)){let n=0;for(let r of t)if(a.left>=r.left&&a.right<=r.right&&a.top>=r.top&&a.bottom<=r.bottom&&(n+=1)>1)break;1===n&&r.push(a)}return r}(Yn(t,{excludeAtomsWithBackground:!0}))){r.left/=l,r.right/=l,r.top/=l,r.bottom/=l;let t=document.createElement("div");t.classList.add("ML__selection"),t.style.position="absolute",t.style.left=`${r.left}px`,t.style.top=`${r.top}px`,t.style.width=`${Math.ceil(r.right-r.left)}px`,t.style.height=`${Math.ceil(r.bottom-r.top-1)}px`,a.insertBefore(t,a.childNodes[0])}}function ne(t,r){for(let a of(r=m({target:"mathfield",canUndo:!1,audioFeedback:void 0,changeContent:!1,changeSelection:!1},null!=r?r:{}),nz||(nz={}),Object.keys(t)))nz[a],nz[a]=g(m({},r),{fn:t[a]})}function L0(t){return nz[(Array.isArray(t)?"performWithFeedback"===t[0]||"performVariant"===t[0]?t[1]:t[0]:t).replace(/-\w/g,t=>t[1].toUpperCase())]}function pr(t){var r;return null==(r=L0(t))?void 0:r.target}ne({performWithFeedback:(t,r)=>{var a;let n,s;return t.focus(),n8.keypressVibration&&Wo()&&navigator.vibrate(3),n=L0(r),window.MathfieldElement.playSound(null!=(a=null==n?void 0:n.audioFeedback)?a:"keypress"),s=t.executeCommand(r),t.scrollIntoView(),s}}),ne({complete:mr},{target:"mathfield",audioFeedback:"return",canUndo:!0,changeContent:!0,changeSelection:!0}),ne({nextSuggestion:function(t){return dr(t,{atIndex:t.suggestionIndex+1}),!1},previousSuggestion:function(t){return dr(t,{atIndex:t.suggestionIndex-1}),!1}},{target:"mathfield",audioFeedback:"keypress",changeSelection:!0});var nS="mathlive#virtual-keyboard-message";function Po(t){var r;return"message"===t.type&&(null==(r=t.data)?void 0:r.type)===nS}var nM=class e{constructor(){this.targetOrigin=window.origin,this.originValidator="none",this._boundingRect=new DOMRect(0,0,0,0),this._isShifted=!1,window.addEventListener("message",this),this.sendMessage("proxy-created"),this.listeners={}}static get singleton(){return this._singleton||(this._singleton=new e),this._singleton}set alphabeticLayout(t){this.sendMessage("update-setting",{alphabeticLayout:t})}set layouts(t){this.sendMessage("update-setting",{layouts:t})}set editToolbar(t){this.sendMessage("update-setting",{editToolbar:t})}set actionKeycap(t){this.sendMessage("update-setting",{actionKeycap:t})}set shiftKeycap(t){this.sendMessage("update-setting",{shiftKeycap:t})}set backspaceKeycap(t){this.sendMessage("update-setting",{backspaceKeycap:t})}set tabKeycap(t){this.sendMessage("update-setting",{tabKeycap:t})}set container(t){throw Error("Container inside an iframe cannot be changed")}show(t){this.sendMessage("show",t)}hide(t){this.sendMessage("hide",t)}get isShifted(){return this._isShifted}get visible(){return this._boundingRect.height>0}set visible(t){t?this.show():this.hide()}get boundingRect(){return this._boundingRect}executeCommand(t){return this.sendMessage("execute-command",{command:t}),!0}updateToolbar(t){this.sendMessage("update-toolbar",t)}update(t){this.sendMessage("update-setting",t)}connect(){this.sendMessage("connect")}disconnect(){this.sendMessage("disconnect")}addEventListener(t,r,a){this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].has(r)||this.listeners[t].add(r)}dispatchEvent(t){return!this.listeners[t.type]||0===this.listeners[t.type].size||(this.listeners[t.type].forEach(r=>{"function"==typeof r?r(t):null==r||r.handleEvent(t)}),!t.defaultPrevented)}removeEventListener(t,r,a){this.listeners[t]&&this.listeners[t].delete(r)}handleEvent(t){if(Po(t)){if(!fi(t.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${t.origin}) cannot be handled`,"SecurityError");this.handleMessage(t.data)}}handleMessage(t){let{action:r}=t;if("execute-command"===r){let{command:r}=t;"virtual-keyboard"===pr(r)&&this.executeCommand(r);return}if("synchronize-proxy"===r){t.boundingRect,this._boundingRect=t.boundingRect,this._isShifted=t.isShifted;return}if("geometry-changed"===r){t.boundingRect,this._boundingRect=t.boundingRect,this.dispatchEvent(new Event("geometrychange"));return}}sendMessage(t,r={}){if(!window.top)throw new DOMException("A frame does not have access to the top window and can‘t communicate with the keyboard. Review virtualKeyboardTargetOrigin and originValidator on mathfields embedded in an iframe","SecurityError");window.top.postMessage(m({type:nS,action:t},r),this.targetOrigin)}},nL={numeric:{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",rows:[[{latex:"x",shift:"y",variants:["y","z","t","r",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"},"x^2","x^n","x_n","x_{n+1}","x_i","x_{i+1}"]},{latex:"n",shift:"a",variants:["i","j","p","k","a","u"]},"[separator-5]","[7]","[8]","[9]","[/]","[separator-5]",{latex:"e",shift:"\\ln",variants:["\\exp","\\times 10^{#?}","\\ln","\\log_{10}","\\log"]},{latex:"\\imaginaryI",variants:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"]},{latex:"\\pi",shift:"\\sin",variants:["\\prod",{latex:"\\theta",aside:"theta"},{latex:"\\rho",aside:"rho"},{latex:"\\tau",aside:"tau"},"\\sin","\\cos","\\tan"]}],[{label:"<",latex:"<",class:"hide-shift",shift:{latex:"\\le",label:"≤"}},{label:">",latex:">",class:"hide-shift",shift:{latex:"\\ge",label:"≥"}},"[separator-5]","[4]","[5]","[6]","[*]","[separator-5]",{class:"hide-shift",latex:"#@^2}",shift:"#@^{\\prime}}"},{latex:"#@^{#0}}",class:"hide-shift",shift:"#@_{#?}"},{class:"hide-shift",latex:"\\sqrt{#0}",shift:{latex:"\\sqrt[#0]{#?}}"}}],["[(]","[)]","[separator-5]","[1]","[2]","[3]","[-]","[separator-5]",{latex:"\\int^{\\infty}_{0}",class:"small hide-shift",shift:"\\int",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\capitalDifferentialD","\\rd","\\partial"]},{class:"hide-shift",latex:"\\forall",shift:"\\exists"},{label:"[backspace]",width:1}],[{label:"[shift]",width:2},"[separator-5]","[0]","[.]","[=]","[+]","[separator-5]","[left]","[right]",{label:"[action]",width:1}]]},greek:{label:"&alpha;&beta;&gamma;",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.greek",rows:[[{label:"<i>&#x03c6;</i>",class:"MLK__tex hide-shift",insert:"\\varphi",aside:"phi var.",shift:"\\Phi"},{label:"<i>&#x03c2;</i>",class:"MLK__tex hide-shift",insert:"\\varsigma",aside:"sigma var.",shift:"\\Sigma"},{label:"<i>&#x03f5;</i>",class:"MLK__tex hide-shift",insert:"\\epsilon",aside:"espilon",shift:'\\char"0190'},{label:"<i>&rho;</i>",class:"MLK__tex hide-shift",insert:"\\rho",aside:"rho",shift:'\\char"3A1'},{label:"<i>&tau;</i>",class:"MLK__tex hide-shift",insert:"\\tau",aside:"tau",shift:'\\char"3A4'},{label:"<i>&upsilon;</i>",class:"MLK__tex hide-shift",insert:"\\upsilon",aside:"upsilon",shift:"\\Upsilon"},{label:"<i>&theta;</i>",class:"MLK__tex hide-shift",insert:"\\theta",aside:"theta",shift:"\\Theta"},{label:"<i>&iota;</i>",class:"MLK__tex hide-shift",insert:"\\iota",aside:"iota",shift:'\\char"399'},{label:"<i>&omicron;</i>",class:"MLK__tex hide-shift",insert:"\\omicron",aside:"omicron",shift:'\\char"39F'},{label:"<i>&pi;</i>",class:"MLK__tex hide-shift",insert:"\\pi",aside:"pi",shift:"\\Pi"}],["[separator-5]",{label:"<i>&alpha;</i>",class:"MLK__tex hide-shift",insert:"\\alpha",aside:"alpha",shift:'\\char"391'},{label:"<i>&sigma;</i>",class:"MLK__tex hide-shift",insert:"\\sigma",aside:"sigma",shift:"\\Sigma"},{label:"<i>&delta;</i>",class:"MLK__tex hide-shift",insert:"\\delta",aside:"delta",shift:"\\Delta"},{label:"<i>&phi;</i>",class:"MLK__tex hide-shift",insert:"\\phi",aside:"phi",shift:"\\Phi"},{label:"<i>&gamma;</i>",class:"MLK__tex hide-shift",insert:"\\gamma",aside:"gamma",shift:"\\Gamma"},{label:"<i>&eta;</i>",class:"MLK__tex hide-shift",insert:"\\eta",aside:"eta",shift:'\\char"397'},{label:"<i>&xi;</i>",class:"MLK__tex hide-shift",insert:"\\xi",aside:"xi",shift:"\\Xi"},{label:"<i>&kappa;</i>",class:"MLK__tex hide-shift",insert:"\\kappa",aside:"kappa",shift:"\\Kappa"},{label:"<i>&lambda;</i>",class:"MLK__tex hide-shift",insert:"\\lambda",aside:"lambda",shift:"\\Lambda"},"[separator-5]"],["[shift]",{label:"<i>&zeta;</i>",class:"MLK__tex hide-shift",insert:"\\zeta",aside:"zeta",shift:'\\char"396'},{label:"<i>&chi;</i>",class:"MLK__tex hide-shift",insert:"\\chi",aside:"chi",shift:'\\char"3A7'},{label:"<i>&psi;</i>",class:"MLK__tex hide-shift",insert:"\\psi",aside:"zeta",shift:"\\Psi"},{label:"<i>&omega;</i>",class:"MLK__tex hide-shift",insert:"\\omega",aside:"omega",shift:"\\Omega"},{label:"<i>&beta;</i>",class:"MLK__tex hide-shift",insert:"\\beta",aside:"beta",shift:'\\char"392'},{label:"<i>&nu;</i>",class:"MLK__tex hide-shift",insert:"\\nu",aside:"nu",shift:'\\char"39D'},{label:"<i>&mu;</i>",class:"MLK__tex hide-shift",insert:"\\mu",aside:"mu",shift:'\\char"39C'},"[backspace]"],["[separator]",{label:"<i>&#x03b5;</i>",class:"MLK__tex",insert:"\\varepsilon",aside:"espilon var."},{label:"<i>&#x03d1;</i>",class:"MLK__tex",insert:"\\vartheta",aside:"theta var."},{label:"<i>&#x3f0;</i>",class:"MLK__tex",insert:"\\varkappa",aside:"kappa var."},{label:"<i>&#x03d6;</i>",class:"MLK__tex",insert:"\\varpi",aside:"pi var."},{label:"<i>&#x03f1;</i>",class:"MLK__tex",insert:"\\varrho",aside:"rho var."},"[left]","[right]","[action]"]]},symbols:{label:"&infin;≠∈",labelClass:"MLK__tex",tooltip:"keyboard.tooltip.symbols",rows:[[{latex:"\\sin",shift:"\\sin^{-1}",variants:[{class:"small",latex:"\\sinh"},{class:"small",latex:"\\sin^{-1}"},{class:"small",latex:"\\arsinh"}]},"\\ln",{latex:"\\mathrm{abs}",insert:"\\mathrm{abs}\\left(#0\\right)"},{latex:"\\rarr",shift:"\\rArr",variants:[{latex:"\\implies",aside:"implies"},{latex:"\\to",aside:"to"},"\\dashv",{latex:"\\roundimplies",aside:"round implies"}]},{latex:"\\exists",variants:["\\nexists"],shift:"\\nexists"},{latex:"\\in",shift:"\\notin",variants:["\\notin","\\owns"]},"\\cup",{latex:"\\overrightarrow{#@}",shift:"\\overleftarrow{#@}",variants:["\\overleftarrow{#@}","\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"]},"\\lim_{#?}","\\exponentialE"],[{latex:"\\cos",shift:"\\cos^{-1}",variants:[{class:"small",latex:"\\cosh"},{class:"small",latex:"\\cos^{-1}"},{class:"small",latex:"\\arcosh"}]},{latex:"\\log",shift:"\\log_{10}",variants:["\\log_{#0}","\\log_{10}"]},"\\left\\vert#0\\right\\vert",{latex:"\\larr",shift:"\\lArr",variants:[{latex:"\\impliedby",aside:"implied by"},{latex:"\\gets",aside:"gets"},"\\lArr","\\vdash",{latex:"\\models",aside:"models"}]},{latex:"\\forall",shift:"\\lnot",variants:[{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"}]},{latex:"\\ni",shift:"\\not\\owns"},"\\cap",{latex:"\\overline{#@}",shift:"\\underline{#@}",variants:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}","\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"]},{class:"hide-shift",latex:"\\int",shift:"\\iint",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\intop","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"]},{latex:"\\pi",shift:"\\tau",variants:["\\tau"]}],[{latex:"\\tan",shift:"\\tan^{-1}",variants:[{class:"small",latex:"\\tanh"},{class:"small",latex:"\\tan^{-1}"},{class:"small",latex:"\\artanh"},{class:"small",latex:"\\arctan"},{class:"small",latex:"\\arctg"},{class:"small",latex:"\\tg"}]},{latex:"\\mathrm{exp}",insert:"\\mathrm{exp}\\left(#0\\right)",variants:["\\exponentialE^{#0}"]},"\\left\\Vert#0\\right\\Vert",{latex:"\\lrArr",shift:"\\leftrightarrow",variants:[{latex:"\\iff",aside:"if and only if"},"\\leftrightarrow","\\leftrightarrows","\\Leftrightarrow",{latex:"^\\biconditional",aside:"biconditional"}]},{latex:"\\vert",shift:"!"},{latex:"#@^{\\complement}",aside:"complement",variants:[{latex:"\\setminus",aside:"set minus"},{latex:"\\smallsetminus",aside:"small set minus"}]},{latex:"\\subset",shift:"\\subseteq",variants:["\\subset","\\subseteq","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsubseteq","\\supset","\\supseteq","\\supsetneq","\\supsetneqq","\\nsupset","\\nsupseteq"]},{latex:"#@^{\\prime}",shift:"#@^{\\doubleprime}",variants:["#@^{\\doubleprime}","#@\\degree"]},{latex:"\\rd",shift:"\\partial",variants:[{latex:"\\dfrac{\\rd}{\\rd x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\capitalDifferentialD","\\rd","\\partial"]},{latex:"\\infty",variants:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"]}],[{label:"[shift]",width:2},{class:"box",latex:",",shift:";",variants:[";","?"]},{class:"box",latex:"\\colon",shift:"\\Colon",variants:[{latex:"\\Colon",aside:"such that",class:"box"},{latex:":",aside:"ratio",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\therefore",aside:"therefore",class:"box"},{latex:"\\because",aside:"because",class:"box"}]},{class:"box",latex:"\\cdot",aside:"centered dot",shift:"\\ast",variants:["\\circ","\\bigcirc","\\bullet","\\odot","\\oslash","\\circledcirc","\\ast","\\star","\\times","\\doteq","\\doteqdot"]},"[separator]","[left]","[right]",{label:"[backspace]",width:1,class:"action hide-shift"},{label:"[action]",width:1}]]},compact:{label:"compact",rows:[["[+]","[-]","[*]","[/]","[=]","[.]","[(]","[)]","\\sqrt{#0}","#@^{#?}"],["[1]","[2]","[3]","[4]","[5]","[6]","[7]","[8]","[9]","[0]"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]},minimalist:{label:"minimalist",layers:[{style:`
          .minimalist-backdrop {
            display: flex;
            justify-content: center;
          }          
          .minimalist-container {
            --keycap-height: 40px;
            --keycap-max-width: 53px;
            --keycap-small-font-size: 12px;
            background: var(--keyboard-background);
            padding: 20px;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            border: 1px solid var(--keyboard-border);
            box-shadow: 0 0 32px rgb(0 0 0 / 30%);
          }        
        `,backdrop:"minimalist-backdrop",container:"minimalist-container",rows:[["+","-","\\times",{latex:"\\frac{#@}{#0}",class:"small"},"=","[.]","(",")",{latex:"\\sqrt{#0}",class:"small"},{latex:"#@^{#?}",class:"small"}],["1","2","3","4","5","6","7","8","9","0"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]}]},"numeric-only":{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",id:"numeric-only",rows:[["7","8","9","[separator]",{label:"[backspace]",width:2}],["4","5","6","[separator]","[separator]","[separator]"],["1","2","3","[separator]","[separator]","[separator]"],["0",{label:"[.]",variants:[]},"-","[separator]","[left]","[right]"]]}},nC=class{constructor(t){var r,a;this.preventOverlayClose=null!=(r=null==t?void 0:t.preventOverlayClose)&&r,this.translucent=null!=(a=null==t?void 0:t.translucent)&&a,this.state="closed"}get element(){if(this._element)return this._element;let t=document.createElement("div");return t.setAttribute("role","presentation"),t.style.position="fixed",t.style.contain="content",t.style.top="0",t.style.left="0",t.style.right="0",t.style.bottom="0",t.style.zIndex="var(--scrim-zindex, 10099)",t.style.outline="none",this.translucent?(t.style.background="rgba(255, 255, 255, .2)",t.style.backdropFilter="contrast(40%)"):t.style.background="transparent",this._element=t,t}open(t){var r;if("closed"!==this.state)return;this.state="opening",this.savedActiveElement=E0();let{element:a}=this;(null!=(r=null==t?void 0:t.root)?r:document.body).appendChild(a),a.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let n=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let s=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${s+n}px`,null!=t&&t.child&&a.append(t.child),this.state="open"}close(){var t,r,a,n;if("open"!==this.state)return;this.state="closing","function"==typeof this.onClose&&this.onClose();let{element:s}=this;s.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),s.remove(),document.body.style.overflow=null!=(t=this.savedOverflow)?t:"",document.body.style.marginRight=null!=(r=this.savedMarginRight)?r:"",E0()!==this.savedActiveElement&&(null==(n=null==(a=this.savedActiveElement)?void 0:a.focus)||n.call(a)),s.innerHTML="",this.state="closed"}handleEvent(t){this.preventOverlayClose||(t.target===this._element&&"click"===t.type?(this.close(),t.preventDefault(),t.stopPropagation()):t.target===document&&("touchmove"===t.type||"scroll"===t.type)&&(this.close(),t.preventDefault(),t.stopPropagation()))}};function E0(){var t;let r=document.activeElement;for(;null!=(t=null==r?void 0:r.shadowRoot)&&t.activeElement;)r=r.shadowRoot.activeElement;return r}var nz,nA,nD={0:["\\varnothing","\\infty"],1:["\\frac{1}{#@}","#@^{-1}","\\times 10^{#?}","\\phi","\\imaginaryI"],2:["\\frac{1}{2}","#@^2","\\sqrt2","\\exponentialE"],3:["\\frac{1}{3}","#@^3","\\sqrt3","\\pi"],4:["\\frac{1}{4}","#@^4"],5:["\\frac{1}{5}","#@^5","\\sqrt5"],6:["\\frac{1}{6}","#@^6"],7:["\\frac{1}{7}","#@^7"],8:["\\frac{1}{8}","#@^8"],9:["\\frac{1}{9}","#@^9"],".":[".",",",";","\\colon"],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"}],g:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"}],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>⁻\xb3⧸₁₈ em"},{latex:'\\char"203A\\,\\char"2039',insert:"\\,",aside:"thin space<br>\xb3⧸₁₈ em"},{latex:'\\char"203A\\:\\char"2039',insert:"\\:",aside:"medium space<br>⁴⧸₁₈ em"},{latex:'\\char"203A\\;\\char"2039',insert:"\\;",aside:"thick space<br>⁵⧸₁₈ em"},{latex:'\\char"203A\\ \\char"2039',insert:"\\ ",aside:"⅓ em"},{latex:'\\char"203A\\enspace\\char"2039',insert:"\\enspace",aside:"\xbd em"},{latex:'\\char"203A\\quad\\char"2039',insert:"\\quad",aside:"1 em"},{latex:'\\char"203A\\qquad\\char"2039',insert:"\\qquad",aside:"2 em"}]};function ua(t,r){var a,n,s,l;let c=nT.singleton;if(!c)return;let d=Or(t),h=null!=(n=null==(a=c.getKeycap(null==d?void 0:d.id))?void 0:a.variants)?n:"";if("string"==typeof h&&!Zs(h)||Array.isArray(h)&&0===h.length){null==r||r();return}let p={},y="";for(let t of"string"!=typeof h?h:(nD[h]||(nD[h]=null!=(l=function(t){if("foreground-color"===t){let t=[];for(let r of Object.keys(w))t.push({class:"swatch-button",label:'<span style="border: 3px solid '+w[r]+'"></span>',command:["applyStyle",{color:r}]});return t}if("background-color"===t){let t=[];for(let r of Object.keys(k))t.push({class:"swatch-button",label:'<span style="background:'+k[r]+'"></span>',command:["applyStyle",{backgroundColor:r}]});return t}}(h))?l:[]),nD[h])){let r=Ys(t),a=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);p[a]=r;let[n,s]=Di(r);y+=`<div id=${a} class="item ${s}">${n}</div>`}let v=document.createElement("div");v.setAttribute("aria-hidden","true"),v.className="MLK__variant-panel",v.style.height="auto";let _=Object.keys(p).length,S=5;1===_?S=1:2===_||4===_?S=2:3===_||5===_||6===_?S=3:_>=7&&_<14&&(S=4),v.style.width=`calc(var(--variant-keycap-length) * ${S} + 12px)`,v.innerHTML=n8.createHTML(y),nC.scrim||(nC.scrim=new nC),nC.scrim.open({root:null==(s=null==c?void 0:c.container)?void 0:s.querySelector(".ML__keyboard"),child:v}),null==nA||nA.abort(),nA=new AbortController,v.addEventListener("pointerup",t=>{let a=Or(t.target);null!=a&&a.id&&p[a.id]&&(da(p[a.id]),zr(),null==r||r(),t.preventDefault())},{capture:!0,passive:!1,signal:nA.signal}),v.addEventListener("pointerenter",t=>{let r=Or(t.target);null!=r&&r.id&&p[r.id]&&r.classList.add("is-active")},{capture:!0,signal:nA.signal}),v.addEventListener("pointerleave",t=>{let r=Or(t.target);null!=r&&r.id&&p[r.id]&&r.classList.remove("is-active")},{capture:!0,signal:nA.signal}),window.addEventListener("pointercancel",()=>{zr(),null==r||r()},{signal:nA.signal}),window.addEventListener("pointerup",()=>{zr(),null==r||r()},{signal:nA.signal});let M=null==t?void 0:t.getBoundingClientRect();if(M){M.top-v.clientHeight<0&&(v.style.width="auto",_<=6?v.style.height="56px":_<=12?v.style.height="108px":_<=18?v.style.height="205px":v.classList.add("compact"));let t=Math.max(0,Math.min(window.innerWidth-v.offsetWidth,(M.left+M.right-v.offsetWidth)/2)),r=M.top-v.clientHeight+5;v.style.transform=`translate(${t}px, ${r}px)`,v.classList.add("is-visible")}}function zr(){var t;null==nA||nA.abort(),null==(t=nC.scrim)||t.close()}function Zs(t){return void 0!==nD[t]}function Do(t){if(!t)return"";let r=new oa,a=new on({mode:"math",type:"root",body:oe(t,{context:r,args:t=>"@"===t?"{\\class{ML__box-placeholder}{\\blacksquare}}":"\\placeholder{}"})});return rr(tr(vt(new a5(a.render(r),{classes:"ML__base"}),r)),{classes:"ML__mathlive"}).toMarkup()}function Bo(t){if(Array.isArray(t))return t.map(t=>Bo(t)).flat();let r="string"==typeof t?{markup:t}:t;return"rows"in r&&Array.isArray(r.rows)&&(r.rows=r.rows.map(t=>t.map(t=>Ys(t)))),null!=r.id||(r.id="ML__layer_"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36)),[r]}var nK=`<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

<symbol id="svg-delete-backward" viewBox="0 0 576 512">
  <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>
</symbol>

<symbol id="svg-shift" viewBox="0 0 384 512">
  <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>
</symbol>

<symbol id="svg-commit" viewBox="0 0 512 512">
  <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>
</symbol>

<symbol id="svg-command" viewBox="0 0 640 512">
  <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>
</symbol>

<symbol id="svg-undo" viewBox="0 0 512 512">
  <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>
</symbol>
<symbol id="svg-redo" viewBox="0 0 512 512">
  <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>
</symbol>
<symbol id="svg-arrow-left" viewBox="0 0 320 512">
  <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>
</symbol>
<symbol id="svg-arrow-right" viewBox="0 0 320 512">
  <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>
</symbol>
<symbol id="svg-tab" viewBox="0 0 448 512">
  <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>
</symbol>
<symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>
<symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>
<symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>
</symbol>
<symbol id="svg-angle-double-right" viewBox="0 0 512 512"><path d="M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/>
</symbol>
<symbol id="svg-angle-double-left" viewBox="0 0 512 512"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/>
</symbol>
<symbol id="svg-trash" viewBox="0 0 448 512">
  <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>
</symbol>
<symbol id="svg-keyboard-down" viewBox="0 0 576 512"><path d="M64 48c-8.8 0-16 7.2-16 16V240c0 8.8 7.2 16 16 16H512c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64zM0 64C0 28.7 28.7 0 64 0H512c35.3 0 64 28.7 64 64V240c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM159 359c9.4-9.4 24.6-9.4 33.9 0l95 95 95-95c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L305 505c-4.5 4.5-10.6 7-17 7s-12.5-2.5-17-7L159 393c-9.4-9.4-9.4-24.6 0-33.9zm1-167c0-8.8 7.2-16 16-16H400c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V192zM120 88h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H120c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H200c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H280c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H360c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H440c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16z"/></symbol>
</svg>`;function Di(t,r={shifted:!1}){var a,n,s,l,c,d,h;let p="",y=null!=(a=t.class)?a:"";if(r.shifted&&Bi(t)&&(y+=" is-active"),r.shifted&&"shift"in t)"string"==typeof t.shift?p=Do(t.shift):"object"==typeof t.shift&&(p=t.shift.label?t.shift.label:null!=(n=Do(t.shift.latex||t.shift.insert||"")||t.shift.key)?n:""),"object"==typeof t.shift&&(y=null!=(l=null!=(s=t.shift.class)?s:t.class)?l:"");else{if(p=t.label?t.label:null!=(c=Do(t.latex||t.insert||"")||t.key)?c:"",t.shift){let r;r="string"==typeof t.shift?Do(t.shift):t.shift.label?t.shift.label:null!=(d=Do(t.shift.latex||t.shift.insert||"")||t.shift.key)?d:"",p+=`<span class="MLK__shift">${r}</span>`}t.aside&&(p+=`<aside>${t.aside}</aside>`)}return t.layer&&!/layer-switch/.test(y)&&(y+=" layer-switch"),/(^|\s)(separator|action|shift|fnbutton|bigfnbutton)($|\s)/.test(y)||(y+=" MLK__keycap"),!/\bw[0-9]+\b/.test(y)&&t.width&&(y+=null!=(h=({0:" w0",.5:" w5",1.5:" w15",2:" w20",5:" w50"})[t.width])?h:""),[p,y||"MLK__keycap"]}var nE={"[left]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-left /></svg>",command:["performWithFeedback","moveToPreviousChar"],shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-left /></svg>",command:["performWithFeedback","extendSelectionBackward"]}},"[right]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-right /></svg>",command:["performWithFeedback","moveToNextChar"],shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-right /></svg>",command:["performWithFeedback","extendSelectionForward"]}},"[return]":{class:"action",command:["performWithFeedback","commit"],width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[action]":{class:"action",command:["performWithFeedback","commit"],width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[hr]":{class:"separator horizontal-rule"},"[hide-keyboard]":{class:"action",command:["performWithFeedback","hideVirtualKeyboard"],width:1.5,label:"<svg class=svg-glyph-lg><use xlink:href=#svg-keyboard-down /></svg>"},"[.]":{variants:".",command:"insertDecimalSeparator",shift:",",class:"big-op hide-shift"},"[+]":{variants:[{latex:"\\sum_{#0}^{#0}",class:"small"},"\\oplus"],latex:"+",label:"+",class:"big-op hide-shift",shift:{latex:"\\sum",insert:"\\sum_{#?}^{#?}",class:"small"}},"[-]":{variants:["\\pm","\\ominus"],latex:"-",label:"&#x2212;",shift:"\\pm",class:"big-op hide-shift"},"[/]":{class:"big-op hide-shift",shift:{class:"",latex:"\\frac{1}{#@}"},variants:["/","\\div","\\%","\\oslash"],latex:"\\frac{#@}{#?}",label:"&divide;"},"[*]":{variants:[{latex:"\\prod_{#0}^{#0}",class:"small"},"\\otimes"],latex:"\\times",label:"&times;",shift:{latex:"\\prod",insert:"\\prod_{#?}^{#?}",class:"small"},class:"big-op hide-shift"},"[=]":{variants:["\\neq","\\equiv","\\varpropto","\\thickapprox","\\lt","\\gt","\\le","\\ge"],latex:"=",label:"=",shift:{label:"≠",latex:"\\ne"},class:"big-op hide-shift"},"[backspace]":{class:"action bottom right hide-shift",width:1.5,command:["performWithFeedback","deleteBackward"],label:"<svg class=svg-glyph><use xlink:href=#svg-delete-backward /></svg>",shift:{class:"action warning",label:"<svg class=svg-glyph><use xlink:href=#svg-trash /></svg>",command:"deleteAll"}},"[undo]":{class:"ghost if-can-undo",command:"undo",label:"<svg class=svg-glyph><use xlink:href=#svg-undo /></svg>",tooltip:je("tooltip.undo")},"[redo]":{class:"ghost  if-can-redo",command:"redo",label:"<svg class=svg-glyph><use xlink:href=#svg-redo /></svg>",tooltip:je("tooltip.redo")},"[(]":{variants:[{latex:"\\lbrack",key:"["},"\\langle","\\lfloor","\\lceil",{latex:"\\lbrace",key:"{"}],key:"(",label:"(",shift:{label:"[",key:"["},class:"hide-shift"},"[)]":{variants:[{latex:"\\rbrack",key:"]"},"\\rangle","\\rfloor","\\rceil",{latex:"\\rbrace",key:"]"}],key:")",label:")",shift:{label:"]",latex:"\\rbrack"},class:"hide-shift"},"[0]":{variants:"0",latex:"0",label:"0",shift:"\\infty",class:"hide-shift"},"[1]":{variants:"1",latex:"1",label:"1",shift:"#@^{-1}",class:"hide-shift"},"[2]":{variants:"2",latex:"2",label:"2",shift:"#@^2",class:"hide-shift"},"[3]":{variants:"3",latex:"3",label:"3",shift:"#@^3",class:"hide-shift"},"[4]":{variants:"4",latex:"4",label:"4",shift:"#@^4",class:"hide-shift"},"[5]":{variants:"5",latex:"5",label:"5",shift:"#@^5",class:"hide-shift"},"[6]":{variants:"6",latex:"6",label:"6",shift:"#@^6",class:"hide-shift"},"[7]":{variants:"7",latex:"7",label:"7",shift:"#@^7",class:"hide-shift"},"[8]":{variants:"8",latex:"8",label:"8",shift:"#@^8",class:"hide-shift"},"[9]":{variants:"9",latex:"9",label:"9",shift:"#@^9",class:"hide-shift"},"[separator-5]":{class:"separator",width:.5},"[separator]":{class:"separator"},"[separator-10]":{class:"separator"},"[separator-15]":{class:"separator",width:1.5},"[separator-20]":{class:"separator",width:2},"[separator-50]":{class:"separator",width:5},"[shift]":{class:"shift bottom left",width:1.5,label:"<span class=caps-lock-indicator></span><svg class=svg-glyph><use xlink:href=#svg-shift /></svg>"},"[foreground-color]":{variants:"foreground-color",command:["applyStyle",{color:"red"}],label:"<span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'>"},"[background-color]":{variants:"background-color",command:["applyStyle",{backgroundColor:"yellow"}],label:"<span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span>"}};function Ys(t){var r;let a;if("string"==typeof t){if(!nE[t])return{latex:t};t={label:t}}return"label"in t&&t.label&&nE[t.label]&&(a=g(m(m({},nE[t.label]),t),{label:nE[t.label].label})),"key"in t&&t.key&&nE[t.key]&&(a=g(m(m({},nE[t.key]),t),{key:nE[t.key].key})),a?("insertDecimalSeparator"===a.command&&(a.label=null!=(r=window.MathfieldElement.decimalSeparator)?r:"."),"[action]"===t.label&&(a=m(m({},a),window.mathVirtualKeyboard.actionKeycap)),"[shift]"===t.label&&(a=m(m({},a),window.mathVirtualKeyboard.shiftKeycap)),"[backspace]"===t.label&&(a=m(m({},a),window.mathVirtualKeyboard.backspaceKeycap)),"[tab]"===t.label&&(a=m(m({},a),window.mathVirtualKeyboard.tabKeycap)),a):t}function uh(t){var r;if(0!==t.button)return;let a=nT.singleton;if(!a)return;let n=t.target;for(;n&&!n.getAttribute("data-layer");)n=n.parentElement;if(n){a.currentLayer=null!=(r=n.getAttribute("data-layer"))?r:"",t.preventDefault();return}let s=Or(t.target);if(!(null!=s&&s.id))return;let l=a.getKeycap(s.id);if(!l)return;t.type;let c=new AbortController;s.classList.add("is-pressed"),s.addEventListener("pointerenter",ma(c),{capture:!0,signal:c.signal}),s.addEventListener("pointerleave",ma(c),{capture:!0,signal:c.signal}),s.addEventListener("pointercancel",ma(c),{signal:c.signal}),s.addEventListener("pointerup",ma(c),{signal:c.signal}),Bi(l)&&(s.classList.add("is-active"),a.incrementShiftPress()),l.variants&&(n4&&clearTimeout(n4),n4=setTimeout(()=>{s.classList.contains("is-pressed")&&(s.classList.remove("is-pressed"),s.classList.add("is-active"),t.target&&"releasePointerCapture"in t.target&&t.target.releasePointerCapture(t.pointerId),ua(s,()=>{c.abort(),null==s||s.classList.remove("is-active")}))},200)),t.preventDefault()}function ma(t){return r=>{let a=Or(r.target);if(!(null!=a&&a.id))return;let n=nT.singleton;if(!n)return;let s=n.getKeycap(a.id);if(s){if("pointerenter"===r.type&&r.target===a&&r.isPrimary&&a.classList.add("is-pressed"),"pointercancel"===r.type){a.classList.remove("is-pressed"),Bi(s)&&(n.decrementShiftPress(),a.classList.toggle("is-active",n.isShifted)),t.abort();return}if("pointerleave"===r.type&&r.target===a){a.classList.remove("is-pressed"),Bi(s)&&(n.decrementShiftPress(),a.classList.toggle("is-active",n.isShifted));return}if("pointerup"===r.type){n4&&clearTimeout(n4),Bi(s)?a.classList.toggle("is-active",n.isShifted):a.classList.contains("is-pressed")&&(a.classList.remove("is-pressed"),n.isShifted&&s.shift?"string"==typeof s.shift?n.executeCommand(["insert",s.shift,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]):da(s.shift):da(s),1===n.shiftPressCount&&n.resetShiftPress()),t.abort(),r.preventDefault();return}}}}function da(t){var r;let a=t.command;!a&&t.insert&&(a=["insert",t.insert,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]),!a&&t.key&&(a=["typedText",t.key,{focus:!0,feedback:!0,simulateKeystroke:!0}]),!a&&t.latex&&(a=["insert",t.latex,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]),a||(a=["typedText",t.label,{focus:!0,feedback:!0,simulateKeystroke:!0}]),null==(r=nT.singleton)||r.executeCommand(a)}function Or(t){if(!t)return;let r=t;for(;r&&!function(t){if(1!==t.nodeType)return!1;let r=t.classList;return r.contains("MLK__keycap")||r.contains("shift")||r.contains("action")||r.contains("fnbutton")||r.contains("bigfnbutton")}(r);)r=r.parentElement;return null!=r?r:void 0}function Bi(t){return!!t.class&&/(^|\s)shift($|\s)/.test(t.class)}var nT=class e{constructor(){var t,r,a;this.originalContainerBottomPadding=null,this.keycapRegistry={},this._isCapslock=!1,this._shiftPressCount=0,this._isShifted=!1,this.targetOrigin=window.origin,this.originValidator="none",this._alphabeticLayout="auto",this._layouts=Object.freeze(["default"]),this._editToolbar="default",this._container=null!=(r=null==(t=window.document)?void 0:t.body)?r:null,this._visible=!1,this._rebuilding=!1,this.observer=new ResizeObserver(t=>{this.adjustBoundingRect(),this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect})}),this.listeners={},null==(a=window.top)||a.addEventListener("message",this),document.body.addEventListener("focusin",t=>{var r;let a=t.target;null!=a&&a.isConnected&&(null==(r=a.tagName)?void 0:r.toLowerCase())==="math-field"&&("matchMedia"in window?window.matchMedia("(any-pointer: coarse)").matches:"ontouchstart"in window||navigator.maxTouchPoints>0)&&("auto"!==a.mathVirtualKeyboardPolicy||a.readOnly||this.show({animate:!0}))}),document.addEventListener("focusout",t=>{"manual"!==t.target.mathVirtualKeyboardPolicy&&setTimeout(()=>{var t,r,a;let n=document.activeElement,s=!1;for(;n;){if((null==(t=n.tagName)?void 0:t.toLowerCase())==="math-field"){s=!0;break}n=null!=(a=null==(r=n.shadowRoot)?void 0:r.activeElement)?a:null}s||this.hide()},300)})}get currentLayer(){var t,r,a;return null!=(a=null==(r=null==(t=this._element)?void 0:t.querySelector(".MLK__layer.is-visible"))?void 0:r.id)?a:""}set currentLayer(t){var r;if(!this._element){this.latentLayer=t;return}let a=t?this._element.querySelector(`#${t}.MLK__layer`):null;a||(a=this._element.querySelector(".MLK__layer")),a&&(null==(r=this._element.querySelector(".MLK__layer.is-visible"))||r.classList.remove("is-visible"),a.classList.add("is-visible")),this.isShifted&&this.render()}get isCapslock(){return this._isCapslock}set isCapslock(t){var r;null==(r=this._element)||r.classList.toggle("is-caps-lock",2===this.shiftPressCount),t!==this._isCapslock&&(this._isCapslock=t,this.isShifted=t)}get shiftPressCount(){return this._shiftPressCount}incrementShiftPress(){++this._shiftPressCount>2?this.resetShiftPress():this.isCapslock=!0}decrementShiftPress(){this._shiftPressCount=Math.max(--this._shiftPressCount,0),0===this._shiftPressCount&&(this.isCapslock=!1)}resetShiftPress(){this._shiftPressCount=0,this.isCapslock=!1}get isShifted(){return this._isShifted}set isShifted(t){this._isCapslock&&(t=!0),this._isShifted!==t&&(this._isShifted=t,this.render())}resetKeycapRegistry(){this.keycapRegistry={}}registerKeycap(t){let r="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);return this.keycapRegistry[r]=t,r}getKeycap(t){return t?this.keycapRegistry[t]:void 0}getLayer(t){for(let r of this.normalizedLayouts)for(let a of r.layers)if(a.id===t)return a}get alphabeticLayout(){return this._alphabeticLayout}set alphabeticLayout(t){this._alphabeticLayout=t,this.rebuild()}get actionKeycap(){return this._actionKeycap}set actionKeycap(t){this._actionKeycap="string"==typeof t?{label:t}:t}get shiftKeycap(){return this._shiftKeycap}set shiftKeycap(t){this._shiftKeycap="string"==typeof t?{label:t}:t}get backspaceKeycap(){return this._backspaceKeycap}set backspaceKeycap(t){this._backspaceKeycap="string"==typeof t?{label:t}:t}get tabKeycap(){return this._tabKeycap}set tabKeycap(t){this._tabKeycap="string"==typeof t?{label:t}:t}get layouts(){return this._layouts}set layouts(t){this.updateNormalizedLayouts(t),this.rebuild()}updateNormalizedLayouts(t){let r=Array.isArray(t)?[...t]:[t],a=r.findIndex(t=>"default"===t);a>=0&&r.splice(a,1,"numeric","symbols","alphabetic","greek"),this._layouts=Object.freeze(r),this._normalizedLayouts=r.map(t=>(function Qs(t){let r;if("alphabetic"===t)return function(){var t,r;let a=window.mathVirtualKeyboard.alphabeticLayout;if("auto"===a){let r=ur();r&&(a=r.virtualLayout),a&&"auto"!==a||(a=null!=(t=({fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"})[p.locale.slice(0,2)])?t:"qwerty")}let n={qwerty:["qwertyuiop"," asdfghjkl ","^zxcvbnm~"],azerty:["azertyuiop","qsdfghjklm","^ wxcvbn ~"],qwertz:["qwertzuiop"," asdfghjkl ","^yxcvbnm~"],dvorak:["^  pyfgcrl ","aoeuidhtns","qjkxbmwvz~"],colemak:[" qwfpgjluy ","arstdhneio","^zxcvbkm~"]},s=null!=(r=n[a])?r:n.qwerty,l=[[{label:"1",variants:"1"},{label:"2",variants:"2"},{label:"3",variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{latex:"\\frac{#@}{#?}"},variants:"5"},{label:"6",shift:{latex:"#@^#?"},variants:"6"},{label:"7",variants:"4"},{label:"8",shift:{latex:"\\times"},variants:"8"},{label:"9",shift:{label:"(",latex:"("},variants:"9"},{label:"0",shift:{label:")",latex:")"},variants:"0"}]];for(let t of s){let r=[];for(let n of t)/[a-z]/.test(n)?r.push({label:n,class:"hide-shift",shift:{label:n.toUpperCase()},variants:Zs(n)?n:void 0}):"~"===n?"dvorak"!==a?r.push("[backspace]"):r.push({label:"[backspace]",width:1}):"^"===n?r.push("[shift]"):" "===n&&r.push("[separator-5]");l.push(r)}return l.push(["[-]","[+]","[=]",{label:" ",width:1.5},",","[.]","[left]","[right]",{label:"[action]",width:1.5}]),{label:"abc",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.alphabetic",layers:Bo({rows:l})}}();if("string"==typeof t)return nL[t],Qs(nL[t]);if("rows"in t&&Array.isArray(t.rows)){let{rows:a}=t;r=g(m({},Jr(t,["rows"])),{layers:Bo({rows:t.rows})})}else if("markup"in t&&"string"==typeof t.markup){let{markup:a}=t;r=g(m({},Jr(t,["markup"])),{layers:Bo(t.markup)})}else r=m({},t),"layers"in t?r.layers=Bo(t.layers):console.error('MathLive 0.95.0: provide either a "rows", "markup" or "layers" property');let a=!1,n=!1;for(let t of r.layers)if(t.rows)for(let r of t.rows.flat()){Bi(r)&&(a=!0);let t=r.command;"string"==typeof t&&["undo","redo","cut","copy","paste"].includes(t)&&(n=!0)}return"displayShiftedKeycaps"in t&&void 0!==t.displayShiftedKeycaps||(r.displayShiftedKeycaps=a),"displayEditToolbar"in t&&void 0!==t.displayEditToolbar||(r.displayEditToolbar=!n),r})(t))}get normalizedLayouts(){return this._normalizedLayouts||this.updateNormalizedLayouts(this._layouts),this._normalizedLayouts}get editToolbar(){return this._editToolbar}set editToolbar(t){this._editToolbar=t,this.rebuild()}get container(){return this._container}set container(t){this._container=t,this.rebuild()}static get singleton(){if(void 0===this._singleton)try{this._singleton=new e}catch(t){this._singleton=null}return this._singleton}get style(){return this._style}addEventListener(t,r,a){this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].has(r)||this.listeners[t].add(r)}dispatchEvent(t){return!this.listeners[t.type]||0===this.listeners[t.type].size||(this.listeners[t.type].forEach(r=>{"function"==typeof r?r(t):null==r||r.handleEvent(t)}),!t.defaultPrevented)}removeEventListener(t,r,a){this.listeners[t]&&this.listeners[t].delete(r)}get element(){return this._element}set element(t){var r;this._element!==t&&(null==(r=this._element)||r.remove(),this._element=t)}get visible(){return this._visible}set visible(t){t?this.show():this.hide()}get boundingRect(){var t;if(!this._visible)return new DOMRect;let r=null==(t=this._element)?void 0:t.getElementsByClassName("MLK__plate")[0];return r?r.getBoundingClientRect():new DOMRect}adjustBoundingRect(){var t,r;let a=this.boundingRect.height;if(this.container===document.body){null==(t=this._element)||t.style.setProperty("--_keyboard-height",`calc(${a}px + env(safe-area-inset-bottom, 0))`);let r=a-1;this.container.style.paddingBottom=this.originalContainerBottomPadding?`calc(${this.originalContainerBottomPadding} + ${r}px)`:`${r}px`}else null==(r=this._element)||r.style.setProperty("--_keyboard-height",`${a}px`)}rebuild(){if(this._rebuilding||!this._element)return;this._rebuilding=!0;let t=this.currentLayer;requestAnimationFrame(()=>{this._rebuilding=!1,this._element&&(this._element.remove(),this._element=void 0),this.visible&&(this.buildAndAttachElement(),this.currentLayer=t,this.render(),this.adjustBoundingRect(),this._element.classList.add("is-visible"))})}render(){if(!this._element)return;let t=this.getLayer(this.currentLayer);this._element.classList.toggle("backdrop-is-transparent",!!(t&&(t.backdrop||t.container)));let r=this._element.querySelectorAll(".MLK__layer.is-visible .MLK__keycap, .MLK__layer.is-visible .action, .fnbutton, .MLK__layer.is-visible .bigfnbutton, .MLK__layer.is-visible .shift");if(r)for(let t of r){let r=this.getKeycap(t.id);if(r){let[a,n]=Di(r,{shifted:this.isShifted});t.innerHTML=window.MathfieldElement.createHTML(a),t.className=n}}}show(t){var r;if(this._visible)return;let a=this.container;if(a&&window.mathVirtualKeyboard&&this.stateWillChange(!0)){if(this._element||(this.buildAndAttachElement(),this.adjustBoundingRect()),!this._visible){let t=this._element.getElementsByClassName("MLK__plate")[0];if(t&&this.observer.observe(t),a===window.document.body){let r=a.style.paddingBottom;this.originalContainerBottomPadding=r;let n=t.offsetHeight-1;a.style.paddingBottom=r?`calc(${r} + ${n}px)`:`${n}px`}window.addEventListener("mouseup",this),window.addEventListener("blur",this),window.addEventListener("keydown",this,{capture:!0}),window.addEventListener("keyup",this,{capture:!0}),this.currentLayer=this.latentLayer,this.render(),null==(r=this._element)||r.classList.toggle("is-caps-lock",2===this.shiftPressCount)}this._visible=!0,null!=t&&t.animate?requestAnimationFrame(()=>{this._element&&(this._element.classList.add("animate"),this._element.addEventListener("transitionend",()=>{var t;return null==(t=this._element)?void 0:t.classList.remove("animate")},{once:!0}),this._element.classList.add("is-visible"),this.stateChanged())}):(this._element.classList.add("is-visible"),this.stateChanged())}}hide(t){var r;let a=this.container;if(a&&this._visible&&this.stateWillChange(!1)){if(this._visible=!1,this._element){this.latentLayer=this.currentLayer;let t=this._element.getElementsByClassName("MLK__plate")[0];t&&this.observer.unobserve(t),window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("keydown",this,{capture:!0}),window.removeEventListener("keyup",this,{capture:!0}),window.removeEventListener("contextmenu",this,{capture:!0}),zr(),Ne("core"),Ne("virtual-keyboard"),null==(r=this._element)||r.remove(),this._element=void 0,null!==this.originalContainerBottomPadding&&(a.style.paddingBottom=this.originalContainerBottomPadding)}this.stateChanged()}}get height(){var t,r;return null!=(r=null==(t=this.element)?void 0:t.offsetHeight)?r:0}buildAndAttachElement(){var t;this.element,this.element=function(t){t.resetKeycapRegistry(),Pe("virtual-keyboard"),Pe("core"),Kr();let r=document.createElement("div");r.className="ML__keyboard";let a=document.createElement("div");a.className="MLK__plate",a.innerHTML=window.MathfieldElement.createHTML(nK+t.normalizedLayouts.map((r,a)=>(function(t,r,a){let n=[];if(!("layers"in r))return"";for(let s of r.layers)n.push(`<div tabindex="-1" class="MLK__layer" id="${s.id}">`),(t.normalizedLayouts.length>1||r.displayEditToolbar)&&(n.push("<div class='MLK__toolbar' role='toolbar'>"),n.push(function(t,r){var a,n;let s='<div class="left">';if(t.normalizedLayouts.length>1)for(let[l,c]of t.normalizedLayouts.entries()){let t=[l===r?"selected":"layer-switch"];c.tooltip&&t.push("MLK__tooltip"),c.labelClass&&t.push(...c.labelClass.split(" ")),s+=`<div class="${t.join(" ")}"`,c.tooltip&&(s+=" data-tooltip='"+(null!=(a=je(c.tooltip))?a:c.tooltip)+"' "),l!==r&&(s+=`data-layer="${c.layers[0].id}"`),s+=`>${null!=(n=c.label)?n:"untitled"}</div>`}return s+"</div>"}(t,a)),r.displayEditToolbar&&n.push('<div class="ML__edit-toolbar right"></div>'),n.push("</div>")),n.push(function(t,r){var a;if("string"==typeof r)return r;let n="";if("string"==typeof r.style?n+=`<style>${r.style}</style>`:"object"==typeof r.style&&(n+=`<style>${Object.keys(a=r.style).map(t=>{var r;return`${t} {${"string"==typeof(r=a[t])?r:Object.entries(r).map(([t,r])=>`${t}:${r} !important`).join(";")}}`}).join("")}</style>`),r.backdrop&&(n+=`<div class='${r.backdrop}'>`),r.container&&(n+=`<div class='${r.container}'>`),r.rows){for(let a of(n+="<div class='MLK__rows'>",r.rows)){for(let r of(n+="<div dir='ltr' class=row>",a))if(r){let a=t.registerKeycap(r),[s,l]=Di(r);/(^|\s)separator/.test(l)?n+=`<div class="${l}"`:n+=`<div tabindex="-1" id="${a}" class="${l}"`,r.tooltip&&(n+=` data-tooltip="${r.tooltip}"`),n+=`>${s}</div>`}n+="</div>"}n+="</div>"}else r.markup&&(n+=r.markup);return r.container&&(n+="</div>"),r.backdrop&&(n+="</div>"),n}(t,s)),n.push("</div>");return n.join("")})(t,r,a)).join(""));let n=document.createElement("div");n.className="MLK__backdrop",n.appendChild(a),r.appendChild(n),r.addEventListener("pointerdown",uh,{passive:!1});let s=r.querySelectorAll(".ML__edit-toolbar");if(s)for(let r of s)r.addEventListener("click",r=>{var a,n;let s=r.target,l="";for(;s&&!l;)l=null!=(a=null==s?void 0:s.getAttribute("data-command"))?a:"",s=null!=(n=null==s?void 0:s.parentElement)?n:null;l&&t.executeCommand(JSON.parse(l))});!function(t){for(let r of t)(function(t){let r=nT.singleton;if(!r)return;let a={};if(!t.id){if(t.hasAttribute("data-label")&&(a.label=t.dataset.label),t.hasAttribute("data-latex")&&(a.latex=t.dataset.latex),t.hasAttribute("data-key")&&(a.key=t.dataset.key),t.hasAttribute("data-insert")&&(a.insert=t.dataset.insert),t.hasAttribute("data-variants")&&(a.variants=t.dataset.variants),t.hasAttribute("data-aside")&&(a.aside=t.dataset.aside),t.className&&(a.class=t.className),a.label||a.latex||a.key||a.insert||(a.latex=t.innerText,a.label=t.innerHTML),t.hasAttribute("data-command"))try{a.command=JSON.parse(t.dataset.command)}catch(t){}t.id=r.registerKeycap(a)}if(!t.innerHTML){let[r,n]=Di(a);t.innerHTML=window.MathfieldElement.createHTML(r)}})(r)}(r.querySelectorAll(".MLK__keycap, .action, .fnbutton, .bigfnbutton"));let l=r.querySelectorAll(".MLK__layer");for(let t of(l.length,l))t.addEventListener("pointerdown",t=>t.preventDefault());return t.currentLayer=t.latentLayer,r}(this),window.addEventListener("contextmenu",this,{capture:!0}),this.element.addEventListener("contextmenu",t=>{t.shiftKey||((t.ctrlKey||2===t.button)&&ua(t.target),t.preventDefault(),t.stopPropagation())},{capture:!0}),null==(t=this.container)||t.appendChild(this.element)}handleEvent(t){if(Po(t)){if(!fi(t.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${t.origin}) cannot be handled`,"SecurityError");"disconnect"===t.data.action?this.connectedMathfieldWindow=void 0:"update-setting"!==t.data.action&&"proxy-created"!==t.data.action&&"execute-command"!==t.data.action&&(t.source,this.connectedMathfieldWindow=t.source),this.handleMessage(t.data,t.source)}if(this._element)switch(t.type){case"mouseup":case"blur":document.body.style.userSelect="",this.isShifted=!1;break;case"contextmenu":2!==t.button&&t.preventDefault();break;case"keydown":"Shift"===t.key&&this.incrementShiftPress();break;case"keyup":"Shift"!==t.key&&1===this._shiftPressCount&&(this.isCapslock=!1,this._shiftPressCount=0)}}handleMessage(t,r){let{action:a}=t;if("execute-command"===a){let{command:r}=t;if("virtual-keyboard"!==pr(r)&&window===window.parent)return;this.executeCommand(r);return}if("connect"===a&&this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},r),"disconnect"!==a&&window===window.top){if("show"===a){void 0!==t.animate?this.show({animate:t.animate}):this.show();return}if("hide"===a){void 0!==t.animate?this.hide({animate:t.animate}):this.hide();return}if("update-setting"===a){t.alphabeticLayout&&(this.alphabeticLayout=t.alphabeticLayout),t.layouts&&(this.layouts=t.layouts),t.editToolbar&&(this.editToolbar=t.editToolbar);return}if("proxy-created"===a){this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},r);return}}}sendMessage(t,r,a){if(a||(a=this.connectedMathfieldWindow),null===this.targetOrigin||"null"===this.targetOrigin||a===window){window.dispatchEvent(new MessageEvent("message",{source:window,data:m({type:nS,action:t},r)}));return}if(a)a.postMessage(m({type:nS,action:t},r),{targetOrigin:this.targetOrigin});else if("execute-command"===t&&Array.isArray(r.command)&&"insert"===r.command[0])for(let t of r.command[1].split(""))this.dispatchEvent(new KeyboardEvent("keydown",{key:t,bubbles:!0})),this.dispatchEvent(new KeyboardEvent("keyup",{key:t,bubbles:!0}))}stateWillChange(t){return this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:t},bubbles:!0,cancelable:!0,composed:!0}))}stateChanged(){this.dispatchEvent(new Event("virtual-keyboard-toggle")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect})}focus(){this.sendMessage("focus",{})}blur(){this.sendMessage("blur",{})}updateToolbar(t){let r=this._element;if(!r)return;r.classList.toggle("can-undo",t.canUndo),r.classList.toggle("can-redo",t.canRedo),r.classList.toggle("can-copy",!t.selectionIsCollapsed),r.classList.toggle("can-copy",!t.selectionIsCollapsed),r.classList.toggle("can-paste",!0);let a=r.querySelectorAll(".ML__edit-toolbar");if(a)for(let r of a)r.innerHTML=function(t,r){if("none"===t.editToolbar)return"";let a=[];r.selectionIsCollapsed?a.push("undo","redo","pasteFromClipboard"):a.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let n={undo:`<div class='action ${!1===r.canUndo?"disabled":""}'
          data-command='"undo"'
          data-tooltip='${je("tooltip.undo")}'>
          <svg><use xlink:href='#svg-undo' /></svg>
      </div>`,redo:`<div class='action ${!1===r.canRedo?"disabled":""}'
          data-command='"redo"'
          data-tooltip='${je("tooltip.redo")}'>
          <svg><use xlink:href='#svg-redo' /></svg>
      </div>`,cutToClipboard:`
        <div class='action'
            data-command='"cutToClipboard"'
            data-tooltip='${je("tooltip.cut to clipboard")}'>
            <svg><use xlink:href='#svg-cut' /></svg>
        </div>
    `,copyToClipboard:`
        <div class='action'
            data-command='"copyToClipboard"'
            data-tooltip='${je("tooltip.copy to clipboard")}'>
            <svg><use xlink:href='#svg-copy' /></svg>
        </div>
    `,pasteFromClipboard:`
        <div class='action'
            data-command='"pasteFromClipboard"'
            data-tooltip='${je("tooltip.paste from clipboard")}'>
            <svg><use xlink:href='#svg-paste' /></svg>
        </div>
    `};return""+a.map(t=>n[t]).join("")}(this,t)}update(t){this._style=t.style,this.updateToolbar(t)}connect(){this.connectedMathfieldWindow=window}disconnect(){this.connectedMathfieldWindow=void 0}executeCommand(t){let r,a=[];return Q(t)?(r=t[0],a=t.slice(1)):r=t,r=r.replace(/-\w/g,t=>t[1].toUpperCase()),"virtual-keyboard"===pr(t)?nz[r].fn(...a):(this.sendMessage("execute-command",{command:t}),!1)}dispose(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("message",this)}};if(ue()&&!("mathVirtualKeyboard"in window)){if(window===window.top){let t=nT.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>t})}else Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>nM.singleton,configurable:!0})}function Ki(t){let r={};for(let a of Object.keys(t))switch(a){case"scriptDepth":if(Q(t.scriptDepth))r.scriptDepth=[t.scriptDepth[0],t.scriptDepth[1]];else if("number"==typeof t.scriptDepth)r.scriptDepth=[t.scriptDepth,t.scriptDepth];else throw TypeError("Unexpected value for scriptDepth");break;case"mathVirtualKeyboardPolicy":let n=t.mathVirtualKeyboardPolicy.toLowerCase();if("sandboxed"===n){if(window!==window.top){let t=nT.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>t})}n="manual"}r.mathVirtualKeyboardPolicy=n;break;case"letterShapeStyle":"auto"===t.letterShapeStyle?p.locale.startsWith("fr")?r.letterShapeStyle="french":r.letterShapeStyle="tex":r.letterShapeStyle=t.letterShapeStyle;break;case"defaultMode":["text","math","inline-math"].includes(t.defaultMode)?r.defaultMode=t.defaultMode:(console.error('MathLive 0.95.0:  valid values for defaultMode are "text", "math" or "inline-math"'),r.defaultMode="math");break;case"macros":r.macros=Zo(t.macros);break;default:Q(t[a])?r[a]=[...t[a]]:"object"!=typeof t[a]||t[a]instanceof Element||"computeEngine"===a?r[a]=t[a]:r[a]=m({},t[a])}return r}function zt(t,r){let a;a="string"==typeof r?[r]:void 0===r?Object.keys(t):r;let n={};for(let r of a)null===t[r]?n[r]=null:Q(t[r])?n[r]=[...t[r]]:"object"!=typeof t[r]||t[r]instanceof Element||"computeEngine"===r?n[r]=t[r]:n[r]=m({},t[r]);return"string"==typeof r?n[r]:n}function Oi(){return{readOnly:!1,defaultMode:"math",macros:{},registers:{},colorMap:yr,backgroundColorMap:Gr,letterShapeStyle:p.locale.startsWith("fr")?"french":"tex",minFontScale:0,smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,mathModeSpace:"",placeholderSymbol:"▢",popoverPolicy:"auto",environmentPopoverPolicy:"auto",keybindings:op,inlineShortcuts:oc,inlineShortcutTimeout:0,mathVirtualKeyboardPolicy:"auto",virtualKeyboardTargetOrigin:null==window?void 0:window.origin,originValidator:"none",onInlineShortcut:()=>"",onScrollIntoView:null,onExport:Id,value:""}}function el(t){return"inline-math"===t.defaultMode?"math":t.defaultMode}function Mt(t){return"number"==typeof t&&!Number.isNaN(t)}function Fr(t){return Array.isArray(t)&&2===t.length}function zi(t){return null!=t&&"object"==typeof t&&"ranges"in t&&Array.isArray(t.ranges)}var nB="<mo>&#x2061;</mo>",n$="<mo>&#8290;</mo>";function pa(t){return t.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Y(t,r){return t&&r.generateID?` extid="${t}"`:""}function Ir(t,r,a){var n;let s=r.atoms[r.index-1];if(!s)return!1;if(!s.superscript&&!s.subscript){if((null==(n=r.atoms[r.index])?void 0:n.type)!=="subsup")return!1;s=r.atoms[r.index],r.index+=1}let l=r.lastType;r.lastType="";let c=I(s.superscript,a);r.lastType="";let d=I(s.subscript,a);if(r.lastType=l,!c&&!d)return!1;let h="";return c&&d?h=`<msubsup>${t}${d}${c}</msubsup>`:c?h=`<msup>${t}${c}</msup>`:d&&(h=`<msub>${t}${d}</msub>`),r.mathML+=h,r.lastType="",!0}function I(t,r,a,n){null!=r||(r={});let s={atoms:[],index:null!=a?a:0,mathML:"",lastType:""};if("number"==typeof t||"boolean"==typeof t)s.mathML=t.toString();else if("string"==typeof t)s.mathML=t;else if(t instanceof on)s.mathML=tl(t,r);else if(Array.isArray(t)){s.atoms=t;let a=0;for(n=n||(t?t.length:0);s.index<n;)if(function(t,r,a){r=null!=r?r:t.atoms.length;let n=t.index,s="";for(;t.index<r&&"text"===t.atoms[t.index].mode;)s+=t.atoms[t.index].value?t.atoms[t.index].value:" ",t.index+=1;return s.length>0&&(t.mathML+=`<mtext ${Y(t.atoms[n].id,a)}
      >${s}</mtext>`,t.lastType="mtext",!0)}(s,n,r)||function(t,r,a){var n;r=null!=r?r:t.atoms.length;let s=t.index,l="",c=function(t){let r=-1,a=t.index,n=!1,s=!1;for(;a<t.atoms.length&&!n&&!s;){let r=t.atoms[a];s=!(n=!r.isDigit())&&void 0!==r.superscript,a++}return s&&(r=a-1),r}(t);for(c>=0&&c<r&&(r=c);t.index<r&&t.atoms[t.index].isDigit();)l+=t.atoms[t.index].asDigit(),t.index+=1;return!(l.length<=0)&&(l="<mn"+Y(t.atoms[s].id,a)+">"+l+"</mn>",c<0&&(n=t).index<n.atoms.length&&n.atoms[n.index].superscript&&"subsup"===n.atoms[n.index].type&&(c=t.index,t.index+=1),Ir(l,t,a)||(t.mathML+=l,t.lastType="mn"),!0)}(s,n,r)||function(t,r,a){var n,s,l,c,d,h,p,y,v;let k=!1;r=null!=r?r:t.atoms.length;let w="",_="",S=t.atoms[t.index],M=null!=(s=null==(n=S.style)?void 0:n.variant)?s:"",C=null!=(c=null==(l=S.style)?void 0:l.variantStyle)?c:"",z="";(M||C)&&(z=null!=(d=({upnormal:"normal",boldnormal:"bold",italicmain:"italic",bolditalicmain:"bold-italic","double-struck":"double-struck",boldfraktur:"bold-fraktur",calligraphic:"script",upcalligraphic:"script",script:"script",boldscript:"bold-script",boldcalligraphic:"bold-script",fraktur:"fraktur","upsans-serif":"sans-serif","boldsans-serif":"bold-sans-serif","italicsans-serif":"sans-serif-italic","bolditalicsans-serif":"sans-serif-bold-italic",monospace:"monospace"})[C+M])?d:"",z=`mathvariant="${z}"`);let A={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"ℏ","\\cdotp":"⋅","\\ldots":"…","\\cdots":"⋯","\\ddots":"⋱","\\vdots":"⋮","\\ldotp":"."};if(A[S.command]){t.index+=1;let r=`<mi${Y(S.id,a)}${z}>${A[S.command]}</mi>`;return("mi"===t.lastType||"mn"===t.lastType||"mtext"===t.lastType||"fence"===t.lastType)&&(r=n$+r),Ir(r,t,a)||(t.mathML+=r,t.lastType="mi"),!0}if("\\operatorname"===S.command)_=Ri(S.body),t.index+=1;else if(M||C)for(;t.index<r&&("mord"===S.type||"macro"===S.type)&&!S.isDigit()&&M===(null!=(p=null==(h=S.style)?void 0:h.variant)?p:"")&&C===(null!=(v=null==(y=S.style)?void 0:y.variantStyle)?v:"");)_+=Ri([S]),t.index+=1,S=t.atoms[t.index];else"mord"!==S.type&&"macro"!==S.type||S.isDigit()||(_+=Ri([S]),t.index+=1);if(_.length>0){k=!0,w=`<mi${z}>${_}</mi>`;let r=t.lastType;w.endsWith(">f</mi>")||w.endsWith(">g</mi>")?(w+=nB,t.lastType="applyfunction"):t.lastType=/^<mo>(.*)<\/mo>$/.test(w)?"mo":"mi",Ir(w,t,a)||(("mi"===r||"mn"===r||"mtext"===r||"fence"===r)&&(w=n$+w),t.mathML+=w)}return k}(s,n,r)||function(t,r,a){let n=!1;r=null!=r?r:t.atoms.length;let s="",l="",c=t.atoms[t.index],d={"\\ne":"&ne;","\\neq":"&neq;","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"∥","\\mid":"∣","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"⟨","\\rangle":"⟩","\\lfloor":"⌊","\\rfloor":"⌋","\\lceil":"⌈","\\rceil":"⌉"};if(d[c.command]){t.index+=1;let r=`<mo${Y(c.id,a)}>${d[c.command]}</mo>`;return Ir(r,t,a)||(t.mathML+=r,t.lastType="mo"),!0}if(t.index<r&&("mbin"===c.type||"mrel"===c.type))s+=tl(t.atoms[t.index],a),t.index+=1,l="mo";else if(t.index<r&&"mop"===c.type){if("over-under"===c.subsupPlacement&&(c.superscript||c.subscript)){let t=Nr(c,a);c.superscript&&c.subscript?s+="<munderover>"+t+I(c.subscript,a)+I(c.superscript,a)+"</munderover>":c.superscript?s+="<mover>"+t+I(c.superscript,a)+"</mover>":c.subscript&&(s+="<munder>"+t+I(c.subscript,a)+"</munder>"),l="mo"}else{let r=t.atoms[t.index],n="\\operatorname"===r.value,c=n?'<mi class="MathML-Unit"'+Y(r.id,a)+">"+Ri(r.value)+"</mi>":Nr(r,a);s+=c,n||/^<mo>(.*)<\/mo>$/.test(c)?l=n?"mi":"mo":(s+=nB,l="applyfunction")}"mi"!==t.lastType&&"mn"!==t.lastType||/^<mo>(.*)<\/mo>$/.test(s)||(s=n$+s),t.index+=1}return s.length>0&&(n=!0,Ir(s,t,a)||(t.mathML+=s,t.lastType=l)),n}(s,n,r)||function(t,r,a){let n=!1;r=null!=r?r:t.atoms.length;let s="",l="";if(t.index<r&&"mopen"===t.atoms[t.index].type){let c=!1,d=0,h=t.index,p=-1,y=h+1;for(;y<r&&!c;)"mopen"===t.atoms[y].type?d+=1:"mclose"===t.atoms[y].type&&(d-=1),-1===d&&(c=!0,p=y),y+=1;c&&(s="<mrow>"+Nr(t.atoms[h],a)+I(t.atoms,a,h+1,p)+Nr(t.atoms[p],a)+"</mrow>",t.index=p+1,("mi"===t.lastType||"mn"===t.lastType||"mfrac"===t.lastType||"fence"===t.lastType)&&(t.mathML+=n$),Ir(s,t,a)&&(n=!0,t.lastType="",s=""),l="fence")}return s.length>0&&(n=!0,t.mathML+=s,t.lastType=l),n}(s,n,r))a+=1;else if(s.index<n){let t=tl(s.atoms[s.index],r);"mn"===s.lastType&&t.length>0&&"genfrac"===s.atoms[s.index].type&&(t="<mo>&#x2064;</mo>"+t),"genfrac"===s.atoms[s.index].type?s.lastType="mfrac":s.lastType="",s.index+=1,Ir(t,s,r)?a+=1:t.length>0&&(s.mathML+=t,a+=1)}a>1&&(s.mathML="<mrow>"+s.mathML+"</mrow>")}return s.mathML}function Nr(t,r){let a="",n=Ri(t.value);return n&&(a="<mo"+Y(t.id,r)+">"+n+"</mo>"),a}function Ri(t){if(!t)return"";if("string"==typeof t)return pa(t);if(!Array.isArray(t)&&"string"==typeof t.body)return pa(t.body);let r="";for(let a of t)"string"==typeof a.value&&(r+=a.value);return pa(r)}function tl(t,r){var a,n,s,l,c,d,h,p,y,v,k,w,_,S,M,C,z,A,E,T,$,P;if("text"===t.mode)return`<mi${Y(t.id,r)}>${t.value}</mi>`;let q={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",longleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",longrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",longrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xleftrightarrows:"⇄",xRightleftharpoons:"⇌",longRightleftharpoons:"⇌",xLeftrightharpoons:"⇋",longLeftrightharpoons:"⇋"},F="",R="",V,j,H,W,X,J,{command:Z}=t;if("\\error"===t.command)return`<merror${Y(t.id,r)}>${I(t.body,r)}</merror>`;let ei={"\\vert":"|","\\Vert":"∥","\\mid":"∣","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"⟨","\\rangle":"⟩","\\lfloor":"⌊","\\rfloor":"⌋","\\lceil":"⌈","\\rceil":"⌉"};switch(t.type){case"first":case"line":case"overlap":case"subsup":case"phantom":case"composition":case"rule":case"chem":break;case"group":case"root":F=I(t.body,r);break;case"array":if((t.leftDelim&&"."!==t.leftDelim||t.rightDelim&&"."!==t.rightDelim)&&(F+="<mrow>",t.leftDelim&&"."!==t.leftDelim&&(F+="<mo>"+(ei[t.leftDelim]||t.leftDelim)+"</mo>")),F+="<mtable",t.colFormat){for(F+=' columnalign="',H=0;H<t.colFormat.length;H++)t.colFormat[H].align&&(F+=({l:"left",c:"center",r:"right"})[t.colFormat[H].align]+" ");F+='"'}for(F+=">",j=0;j<t.array.length;j++){for(F+="<mtr>",V=0;V<t.array[j].length;V++)F+="<mtd>"+I(t.array[j][V],r)+"</mtd>";F+="</mtr>"}F+="</mtable>",(t.leftDelim&&"."!==t.leftDelim||t.rightDelim&&"."!==t.rightDelim)&&(t.rightDelim&&"."!==t.rightDelim&&(F+="<mo>"+(ei[t.leftDelim]||t.rightDelim)+"</mo>"),F+="</mrow>");break;case"genfrac":(t.leftDelim||t.rightDelim)&&(F+="<mrow>"),t.leftDelim&&"."!==t.leftDelim&&(F+="<mo"+Y(t.id,r)+">"+(ei[t.leftDelim]||t.leftDelim)+"</mo>"),t.hasBarLine?F+="<mfrac>"+(I(t.above,r)||"<mi>&nbsp;</mi>")+(I(t.below,r)||"<mi>&nbsp;</mi>")+"</mfrac>":F+="<mtable"+Y(t.id,r)+"><mtr>"+I(t.above,r)+"</mtr><mtr>"+I(t.below,r)+"</mtr></mtable>",t.rightDelim&&"."!==t.rightDelim&&(F+="<mo"+Y(t.id,r)+">"+(ei[t.rightDelim]||t.rightDelim)+"</mo>"),(t.leftDelim||t.rightDelim)&&(F+="</mrow>");break;case"surd":t.hasEmptyBranch("above")?F+="<msqrt"+Y(t.id,r)+">"+I(t.body,r)+"</msqrt>":F+="<mroot"+Y(t.id,r)+">"+I(t.body,r)+I(t.above,r)+"</mroot>";break;case"leftright":F="<mrow>",t.leftDelim&&"."!==t.leftDelim&&(F+=`<mo${Y(t.id,r)}>${null!=(a=ei[t.leftDelim])?a:t.leftDelim}</mo>`),t.body&&(F+=I(t.body,r)),t.rightDelim&&"."!==t.rightDelim&&(F+=`<mo${Y(t.id,r)}>${null!=(n=ei[t.rightDelim])?n:t.rightDelim}</mo>`),F+="</mrow>";break;case"sizeddelim":case"delim":F+=`<mo${Y(t.id,r)}>${ei[t.delim]||t.delim}</mo>`;break;case"accent":F+='<mover accent="true"'+Y(t.id,r)+">"+I(t.body,r)+"<mo>"+(({"\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"})[Z]||t.accent)+"</mo></mover>";break;case"overunder":X=t.above,W=t.below,(t.svgAbove||X)&&(t.svgBelow||W)?J=t.body:X&&X.length>0?(J=t.body,null!=(l=null==(s=t.body)?void 0:s[0])&&l.below?(W=t.body[0].below,J=t.body[0].body):(null==(d=null==(c=t.body)?void 0:c[0])?void 0:d.type)==="first"&&null!=(p=null==(h=t.body)?void 0:h[1])&&p.below&&(W=t.body[1].below,J=t.body[1].body)):W&&W.length>0&&(J=t.body,null!=(v=null==(y=t.body)?void 0:y[0])&&v.above?(X=t.body[0].above,J=t.body[0].body):(null==(w=null==(k=t.body)?void 0:k[0])?void 0:w.type)==="first"&&null!=(S=null==(_=t.body)?void 0:_[1])&&S.above&&(X=t.body[1].overscript,J=t.body[1].body)),(t.svgAbove||X)&&(t.svgBelow||W)?F+=`<munderover ${Y(t.id,r)}>`+(null!=(M=q[t.svgBody])?M:I(J,r))+(null!=(C=q[t.svgBelow])?C:I(W,r))+(null!=(z=q[t.svgAbove])?z:I(X,r))+"</munderover>":t.svgAbove||X?F+=`<mover ${Y(t.id,r)}>`+(null!=(A=q[t.svgBody])?A:I(J,r))+(null!=(E=q[t.svgAbove])?E:I(X,r))+"</mover>":(t.svgBelow||W)&&(F+=`<munder ${Y(t.id,r)}>`+(null!=(T=q[t.svgBody])?T:I(J,r))+(null!=($=q[t.svgBelow])?$:I(W,r))+"</munder>");break;case"placeholder":F+="?";break;case"mord":{F="string"==typeof t.value?t.value:Z;let a=Z?Z.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null;a?F="&#x"+a[1]+";":F.length>0&&F.startsWith("\\")&&("string"==typeof t.value&&t.value.charCodeAt(0)>255?F="&#x"+("000000"+t.value.charCodeAt(0).toString(16)).slice(-4)+";":"string"==typeof t.value?F=t.value.charAt(0):(console.error("Did not expect this"),F=""));let n=/\d/.test(F)?"mn":"mi";F=`<${n}${Y(t.id,r)}>${pa(F)}</${n}>`;break}case"mbin":case"mrel":case"minner":F=Nr(t,r);break;case"mpunct":F='<mo separator="true"'+Y(t.id,r)+">"+Z+"</mo>";break;case"mop":"​"!==t.body&&(F="<mo"+Y(t.id,r)+">"+("\\operatorname"===Z?t.body:Z||t.body)+"</mo>");break;case"box":F='<menclose notation="box"',t.backgroundcolor&&(F+=' mathbackground="'+t.backgroundcolor+'"'),F+=Y(t.id,r)+">"+I(t.body,r)+"</menclose>";break;case"spacing":F+='<mspace width="'+(null!=(P=({"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5})[Z])?P:0)+'em"/>';break;case"enclose":for(let r in F='<menclose notation="',t.notation)Object.prototype.hasOwnProperty.call(t.notation,r)&&t.notation[r]&&(F+=R+r,R=" ");F+=Y(t.id,r)+'">'+I(t.body,r)+"</menclose>";break;case"prompt":F='<menclose notation="roundexbox""">'+I(t.body,r)+"</menclose>";break;case"space":F+="&nbsp;";break;case"mopen":case"mclose":F+=Nr(t,r);break;case"macro":{let a=t.command+Ri(t.macroArgs);a&&(F+=`<mo ${Y(t.id,r)}>${a}</mo>`)}break;case"latexgroup":case"tooltip":F+=I(t.body,r);break;case"latex":F+="<mtext"+Y(t.id,r)+">"+t.value+"</mtext>"}return F}var nP={"\\ne":"≠","\\neq":"≠","−":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" "},nO={"\\pm":"+-","\\times":"xx","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"},nN={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"eye ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\pm":"plus or minus","\\mp":"minus or plus","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","​":"","−":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},nq={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function zo(t){let r=0;if(Q(t))for(let a of t)"first"!==a.type&&(r+=1);return 1===r}function K0(t){let r="";if(Q(t))for(let a of t)"first"!==a.type&&"string"==typeof a.value&&(r+=a.value);return r}function Rt(t){var r,a;if("sre"===window.MathfieldElement.textToSpeechRules&&("sre"in window||"SRE"in window)){let n=I(t);if(n){window.MathfieldElement.textToSpeechMarkup&&(window.MathfieldElement.textToSpeechRulesOptions=null!=(r=window.MathfieldElement.textToSpeechRulesOptions)?r:{},window.MathfieldElement.textToSpeechRulesOptions.markup=window.MathfieldElement.textToSpeechMarkup,"ssml"===window.MathfieldElement.textToSpeechRulesOptions.markup&&(window.MathfieldElement.textToSpeechRulesOptions.markup="ssml_step"),window.MathfieldElement.textToSpeechRulesOptions.rate=window.MathfieldElement.speechEngineRate);let t=null!=(a=window.SRE)?a:window.sre.System.getInstance();window.MathfieldElement.textToSpeechRulesOptions&&t.setupEngine(window.MathfieldElement.textToSpeechRulesOptions);let s="";try{s=t.toSpeech(n)}catch(t){console.error("MathLive 0.95.0: `SRE.toSpeech()` runtime error",t)}return s}return""}let n=function B(t,r){var a,n,s,l,c,d,h,p;function i(t){return"<emphasis>"+t+"</emphasis>"}if(!r)return"";let y="";if(Q(r)){let n=!1,s=!1;for(let l=0;l<r.length;l++)"first"!==r[l].type&&("text"!==r[l].mode&&(s=!1),l<r.length-2&&"mopen"===r[l].type&&"mclose"===r[l+2].type&&"mord"===r[l+1].type?(y+=" of "+i(B(t,r[l+1])),l+=2):"text"===r[l].mode?s?y+=null!=(a=r[l].value)?a:" ":(s=!0,y+=B("text",r[l])):r[l].isDigit()?n?y+=r[l].asDigit():(n=!0,y+=B(t,r[l])):(n=!1,y+=B(t,r[l])))}else if("text"===r.mode)r.id&&"math"===t&&(y+='<mark name="'+r.id.toString()+'"/>'),y+=r.value;else{r.id&&"math"===t&&(y+='<mark name="'+r.id.toString()+'"/>');let a="",v="",k="",w=!1,{command:_}=r;switch(_){case"\\vec":return"vector "+B(t,r.body);case"\\acute":return B(t,r.body)+" acute";case"\\grave":return B(t,r.body)+" grave";case"\\dot":return"dot over"+B(t,r.body);case"\\ddot":return"double dot over"+B(t,r.body);case"\\mathring":return"ring over"+B(t,r.body);case"\\tilde":case"\\widetilde":return"tilde over"+B(t,r.body);case"\\bar":return B(t,r.body)+" bar";case"\\breve":return B(t,r.body)+" breve";case"\\check":case"\\widecheck":return"check over "+B(t,r.body);case"\\hat":case"\\widehat":return"hat over"+B(t,r.body);case"\\overarc":case"\\overparen":case"\\wideparen":return"arc over "+B(t,r.body);case"\\underarc":case"\\underparen":return"arc under "+B(t,r.body)}switch(r.type){case"prompt":y+=' <break time="300ms"/> '+(r.body.length>1?'start input . <break time="500ms"/> '+B(t,r.body)+'. <break time="500ms"/> end input':"blank")+'. <break time="700ms"/>'+(null!=(n=r.correctness)?n:"")+' . <break time="700ms"/> ';break;case"array":let S=r.array,M=r.environmentName;if(Object.keys(nq).includes(M)){y+=` begin ${nq[M]} `;for(let t=0;t<S.length;t++){t>0&&(y+=","),y+=` row ${t+1} `;for(let r=0;r<S[t].length;r++)r>0&&(y+=","),y+=` column ${r+1}: `+B("math",S[t][r])}y+=` end ${nq[M]} `}break;case"group":"\\ne"===_?y+=" not equal ":("\\not"===_&&(y+=" not "),y+=B("math",r.body));break;case"root":y+=B("math",r.body);break;case"genfrac":if(a=B("math",r.above),v=B("math",r.below),zo(r.above)&&zo(r.below)){let t={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[K0(r.above)+"/"+K0(r.below)];t?y=t:y+=a+" over "+v}else y+=' the fraction <break time="150ms"/>'+a+' over <break time="150ms"/>'+v+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(k=B("math",r.body),r.hasEmptyBranch("above"))y+=zo(r.body)?" the square root of "+k+" , ":' the square root of <break time="200ms"/>'+k+'. <break time="200ms"/> End square root';else{let t=B("math",r.above),a=(t=t.trim()).replace(/<mark([^/]*)\/>/g,"");"3"===a?y+=' the cube root of <break time="200ms"/>'+k+'. <break time="200ms"/> End cube root':"n"===a?y+=' the nth root of <break time="200ms"/>'+k+'. <break time="200ms"/> End root':y+=' the root with index: <break time="200ms"/>'+t+', of <break time="200ms"/>'+k+'. <break time="200ms"/> End root'}break;case"leftright":y+=(null!=(s=r.leftDelim?nN[r.leftDelim]:void 0)?s:r.leftDelim)+B("math",r.body)+(null!=(l=r.rightDelim?nN[r.rightDelim]:void 0)?l:r.rightDelim);break;case"rule":case"overunder":case"overlap":break;case"macro":let C=_.replace(/^\\/g,""),z=Zr()[C];z&&(null!=z&&z.expand?y+=B("math",r.body):y+=`${C} `);break;case"placeholder":y+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if("\\mathbin"===_||"\\mathrel"===_||"\\mathopen"===_||"\\mathclose"===_||"\\mathpunct"===_||"\\mathord"===_||"\\mathinner"===_){y=B(t,r.body);break}let a=r.isDigit()?r.asDigit():r.value,n=r.command;if(("delim"===r.type||"sizeddelim"===r.type)&&(a=n=r.value),"text"===t)y+=a;else{if("mbin"===r.type&&(y+='<break time="150ms"/>'),a){let t=nN[a]||(n?nN[n.trim()]:"");if(t)y+=" "+t;else{let t;y+=(n?(d=n.trim(),t="",d.startsWith("\\")&&(t=" "+d.replace("\\","")+" "),t):"")||(h=a,window.MathfieldElement.textToSpeechMarkup?/[a-z]/.test(h)?` <say-as interpret-as="character">${h}</say-as>`:/[A-Z]/.test(h)?`capital <say-as interpret-as="character">${h.toLowerCase()}</say-as>`:h:/[a-z]/.test(h)?" '"+h.toUpperCase()+"'":/[A-Z]/.test(h)?" 'capital "+h.toUpperCase()+"'":h)}}else y+=B("math",r.body);"mbin"===r.type&&(y+='<break time="150ms"/>')}break}case"mop":if("​"!==r.value){let t=r.command;if("\\sum"===t){if(r.hasEmptyBranch("superscript")||r.hasEmptyBranch("subscript")){if(r.hasEmptyBranch("subscript"))y+=" the summation of";else{let t=B("math",r.subscript);y+=' the summation from <break time="200ms"/>'+(t=t.trim())+'<break time="200ms"/> of <break time="150ms"/>',w=!0}}else{let t=B("math",r.superscript);t=t.trim();let a=B("math",r.subscript);y+=' the summation from <break time="200ms"/>'+(a=a.trim())+'<break time="200ms"/> to  <break time="200ms"/>'+t+'<break time="200ms"/> of <break time="150ms"/>',w=!0}}else if("\\prod"===t){if(r.hasEmptyBranch("superscript")||r.hasEmptyBranch("subscript")){if(r.hasEmptyBranch("subscript"))y+=" the product  of ";else{let t=B("math",r.subscript);y+=' the product from <break time="200ms"/>'+(t=t.trim())+'<break time="200ms"/> of <break time="150ms"/>',w=!0}}else{let t=B("math",r.superscript);t=t.trim();let a=B("math",r.subscript);y+=' the product from <break time="200ms"/>'+(a=a.trim())+'<break time="200ms"/> to <break time="200ms"/>'+t+'<break time="200ms"/> of <break time="150ms"/>',w=!0}}else if("\\int"===t){if(r.hasEmptyBranch("superscript")||r.hasEmptyBranch("subscript"))y+=' the integral of <break time="200ms"/> ';else{let t=B("math",r.superscript);t=t.trim();let a=B("math",r.subscript);y+=' the integral from <break time="200ms"/>'+i(a=a.trim())+'<break time="200ms"/> to <break time="200ms"/>'+i(t)+' <break time="200ms"/> of ',w=!0}}else"string"==typeof r.value?y+=(null!=(c=nN[r.value])?c:r.command?nN[r.command]:void 0)||" "+r.value:r.command&&("\\mathop"===r.command?y+=B("math",r.body):"\\operatorname"===r.command?y+=(p=r.body)?p.map(t=>t.value).join(""):"":y+=r.command.startsWith("\\")?" "+r.command.slice(1):" "+r.command)}break;case"enclose":y+=" crossed out "+(k=B("math",r.body))+". End crossed out."}if(!w&&!r.hasEmptyBranch("superscript")){let a=B(t,r.superscript),n=(a=a.trim()).replace(/<[^>]*>/g,"");if(zo(r.superscript)){if("math"===t){let t=function(t){if(Q(t)){for(let r of t)if("first"!==r.type&&r.id)return r.id.toString()}return""}(r.superscript);t&&(y+='<mark name="'+t+'"/>')}"′"===n?y+=" prime ":"2"===n?y+=" squared ":"3"===n?y+=" cubed ":Number.isNaN(Number.parseInt(n))?y+=" to the "+a+"; ":y+=' to the <say-as interpret-as="ordinal">'+n+"</say-as> power; "}else Number.isNaN(Number.parseInt(n))?y+=" raised to the "+a+"; ":y+=' raised to the <say-as interpret-as="ordinal">'+n+"</say-as> power; "}if(!w&&!r.hasEmptyBranch("subscript")){let t=B("math",r.subscript);t=t.trim(),y+=zo(r.subscript)?" sub "+t:" subscript "+t+". End subscript. "}}return y}("math",t);if("ssml"===window.MathfieldElement.textToSpeechMarkup){let t="";window.MathfieldElement.speechEngineRate&&(t='<prosody rate="'+window.MathfieldElement.speechEngineRate+'">'),n='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+t+"<p><s>"+n+"</s></p>"+(t?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else n="mac"===window.MathfieldElement.textToSpeechMarkup&&"macos"===Vt()?n.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):n.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return n}function z0(t){var r;let a;if("prompt"===t.parent.type)"body"===t.parentBranch&&(a="prompt");else if("body"===t.parentBranch)a=t.type&&null!=(r=({enclose:"cross out",leftright:"delimiter",surd:"square root",root:"math field",mop:"operator",first:"first"})[t.type])?r:"parent";else if("genfrac"===t.parent.type){if("above"===t.parentBranch)return"numerator";if("below"===t.parentBranch)return"denominator"}else"surd"===t.parent.type?"above"===t.parentBranch&&(a="index"):"superscript"===t.parentBranch?a="superscript":"subscript"===t.parentBranch&&(a="subscript");return null!=a?a:"parent"}ne({speak:(t,r,a)=>(function(t,r,a){var n,s;a=null!=a?a:{withHighlighting:!1};let{model:l}=t,c=function(t){let r=null;switch(t){case"all":default:r=l.root;break;case"selection":r=l.getAtoms(l.selection);break;case"left":r=l.getAtoms(l.offsetOf(l.at(l.position).leftSibling),l.position);break;case"right":r=l.getAtoms(l.position,l.offsetOf(l.at(l.position).rightSibling));break;case"group":r=l.getAtoms(l.getSiblingsRange(l.position));break;case"parent":{let{parent:t}=l.at(l.position);r=null!=t&&t.parent?t:l.root}}return r}(r);if(null===c)return null==(s=(n=window.MathfieldElement).speakHook)||s.call(n,function(t){let r="";switch(t){case"all":case"group":break;case"selection":r="no selection";break;case"left":r="at start";break;case"right":r="at end";break;case"parent":r="no parent"}return r}(r)),!1;(a.withHighlighting||"amazon"===window.MathfieldElement.speechEngine)&&(window.MathfieldElement.textToSpeechMarkup=window.sre&&"sre"===window.MathfieldElement.textToSpeechRules?"ssml_step":"ssml");let d=Rt(c);return ue()&&a.withHighlighting?(St().readAloudMathField=t,tt(t,{forHighlighting:!0}),window.MathfieldElement.readAloudHook&&window.MathfieldElement.readAloudHook(t.field,d)):window.MathfieldElement.speakHook&&window.MathfieldElement.speakHook(d),!1})(t,r,a)},{target:"mathfield"});var nF=class{constructor(t,r,a,n){this.mathfield=t,this.mode=r,this.silenceNotifications=!1,this.listeners=n,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.root=a}dispose(){this.mathfield=void 0,this.listeners.onSelectionDidChange=void 0,this.listeners.onContentWillChange=void 0}getState(){let t={ranges:[...this._selection.ranges]};return this.selection.direction&&"none"!==this.selection.direction&&(t.direction=this.selection.direction),{content:this.root.toJson(),selection:t,mode:this.mode}}setState(t,r){var a;let n=this.silenceNotifications;this.silenceNotifications=null==(a=null==r?void 0:r.silenceNotifications)||a;let s={};if((null==r?void 0:r.type)==="undo"&&(s={inputType:"historyUndo"}),(null==r?void 0:r.type)==="redo"&&(s={inputType:"historyRedo"}),N(this,s)){let r=this.silenceNotifications;this.silenceNotifications=!0,this.mode=t.mode,this.root=Qe(t.content),this.selection=t.selection,this.silenceNotifications=r,K(this,s)}this.silenceNotifications=n}get atoms(){return this.root.children}get selection(){return this._selection}set selection(t){this.setSelection(t)}setSelection(t,r){return(!!this.mathfield.contentEditable||"none"!==this.mathfield.userSelect)&&this.deferNotifications({selection:!0},()=>{var a,n,s;let l=this.normalizeSelection(t,r);if(void 0===l)throw TypeError("Invalid selection");if(1===l.ranges.length&&l.ranges[0][0]===l.ranges[0][1]){let t=l.ranges[0][0];return this.mathfield.dirty||null!=(a=this.at(t))&&a.parentPrompt||!this.mathfield.hasEditablePrompts?(this._anchor=t,this._position=t,this._selection=l,!1):null!=(n=this.at(t-1))&&n.parentPrompt?(this._anchor=this.normalizeOffset(t-1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor),!0):null!=(s=this.at(t+1))&&s.parentPrompt?(this._anchor=this.normalizeOffset(t+1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor),!0):(this._anchor=0,this._position=0,this._selection={ranges:[[0,0]]},!1)}let c=G(l);"backward"===l.direction?[this._position,this._anchor]=c:[this._anchor,this._position]=c;let d=this.at(c[0]+1),h=this.at(c[1]),p=on.commonAncestor(d,h);return(null==p?void 0:p.type)==="array"&&d.parent===p&&h.parent,this._selection={ranges:[c],direction:l.direction},this._position>=0&&(this._position,this.lastOffset),!1})}setPositionHandlingPlaceholder(t){var r;let a=this.at(t);(null==a?void 0:a.type)==="placeholder"?this.setSelection(t-1,t):(null==(r=null==a?void 0:a.rightSibling)?void 0:r.type)==="placeholder"?this.setSelection(t,t+1):this.position=t,a instanceof o1&&a.isSuggestion&&(a.isSuggestion=!1),this.mathfield.stopCoalescingUndo()}get position(){return this._position}set position(t){this.setSelection(t,t)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return 1===Math.abs(this._anchor-this._position)&&"placeholder"===this.at(Math.max(this._anchor,this._position)).type}collapseSelection(t="forward"){return this._anchor!==this._position&&("backward"===t?this.position=Math.min(this._anchor,this._position):this.position=Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(t){return this.atoms[t]}offsetOf(t){return this.atoms.indexOf(t)}getSiblingsRange(t){let r=this.at(t),{parent:a}=r;if(!a)return[0,this.lastOffset];let n=r.parent.branch(r.parentBranch);return[this.offsetOf(n[0]),this.offsetOf(n[n.length-1])]}getBranchRange(t,r){let a=this.at(t).branch(r);return[this.offsetOf(a[0]),this.offsetOf(a[a.length-1])]}getAtoms(t,r,a){let n,s,l=null!=a?a:{};if(zi(t)){if(l=null!=r?r:{},t.ranges.length>1)return t.ranges.reduce((t,r)=>[...t,...this.getAtoms(r,l)],[]);t=t.ranges[0]}if(Mt(t)){if(n=t,!Mt(r))return[];s=r}else[n,s]=t,l=null!=r?r:{};if(!Number.isFinite(n))return[];void 0===l.includeChildren&&(l.includeChildren=!1),n<0&&(n=this.lastOffset-n+1),s<0&&(s=this.lastOffset-s+1);let c=Math.min(n,s)+1,d=Math.max(n,s);if(!l.includeChildren&&1===c&&d===this.lastOffset)return[this.root];let h=[];for(let t=c;t<=d;t++){let r=this.atoms[t];F0(this,r,c,d)&&h.push(r)}return l.includeChildren||(h=h.filter(t=>{let r=!1,{parent:a}=t;for(;a&&!r;)r=F0(this,a,c,d),a=a.parent;return!r})),h}getAllAtoms(t=0){let r=[],a=this.lastOffset;for(let n=t;n<=a;n++)r.push(this.atoms[n]);for(let a=0;a<t;a++)r.push(this.atoms[a]);return r}findAtom(t,r=0,a="forward"){let n,s=this.lastOffset;if("forward"===a){for(let a=r;a<=s;a++)if(t(n=this.atoms[a]))return n;for(let a=0;a<r;a++)if(t(n=this.atoms[a]))return n;return}for(let a=r;a>=0;a--)if(t(n=this.atoms[a]))return n;for(let a=s;a>r;a--)if(t(n=this.atoms[a]))return n}extractAtoms(t){let r=this.getAtoms(t);if(1===r.length&&!r[0].parent){if("root"!==r[0].type)return r=this.root.cells.flat(),this.root=new on({type:"root",body:[]}),r;(r=[...r[0].body]).shift()}for(let t of r)t.parent.removeChild(t);return r}deleteAtoms(t){this.extractAtoms(t),this.position=t[0]}atomToString(t,r){let a=null!=r?r:"latex";if(a.startsWith("latex"))return on.serialize([t],{expandMacro:"latex-expanded"===a,skipStyles:"latex-unstyled"===a,defaultMode:this.mathfield.options.defaultMode});if("math-ml"===a)return I(t);if("spoken"===a)return Rt(t);if("spoken-text"===a){let r=window.MathfieldElement.textToSpeechMarkup;window.MathfieldElement.textToSpeechMarkup="";let a=Rt(t);return window.MathfieldElement.textToSpeechMarkup=r,a}if("spoken-ssml"===a||"spoken-ssml-with-highlighting"===a){let r=window.MathfieldElement.textToSpeechMarkup;window.MathfieldElement.textToSpeechMarkup="ssml";let a=Rt(t);return window.MathfieldElement.textToSpeechMarkup=r,a}return"ascii-math"===a?function te(t){var r,a,n,s,l,c,d,h,p,y,v,k,w;if(!t)return"";if(Q(t)){if(0===t.length||("first"===t[0].type&&(t=t.slice(1)),0===t.length))return"";let a="";if("latex"===t[0].mode)for(let r of t)a+=te(r);else if("text"===t[0].mode){let n=0;for(a='"';(null==(r=t[n])?void 0:r.mode)==="text";)a+=t[n].body?te(t[n].body):t[n].value,n++;a+='"'+te(t.slice(n))}else if("math"===t[0].mode){let r=0;for(;t[r]&&"math"===t[r].mode;)a+=te(t[r]),r++;a+=te(t.slice(r))}else console.warn("toASCIIMath: Unexpected mode");return a.trim()}if("text"===t.mode)return'"'+t.value+'"';let _="",{command:S}=t,M;if("\\placeholder"===S)return`(${te(t.body)})`;switch(t.type){case"first":return"";case"group":case"root":_=null!=(a=nP[S])?a:te(t.body);break;case"genfrac":{let r=t;(r.leftDelim||r.rightDelim)&&(_+="."!==r.leftDelim&&r.leftDelim?r.leftDelim:"{:"),r.hasBarLine?_+="("+te(r.above)+")/("+te(r.below)+")":_+="("+te(r.above)+"),("+te(r.below)+")",(r.leftDelim||r.rightDelim)&&(_+="."!==r.rightDelim&&r.rightDelim?r.rightDelim:"{:")}break;case"surd":_+=t.hasEmptyBranch("above")?"sqrt("+te(t.body)+")":"root("+te(t.above)+")("+te(t.body)+")";break;case"latex":_=t.value;break;case"leftright":{let r=t;_+=("."!==r.leftDelim&&r.leftDelim?r.leftDelim:"{:")+te(r.body)+("."!==r.rightDelim&&r.rightDelim?r.rightDelim:":}")}break;case"sizeddelim":case"delim":case"overlap":case"overunder":case"box":break;case"mord":(_=null!=(s=null!=(n=nP[S])?n:S)?s:"string"==typeof t.value?t.value:"").startsWith("\\")&&(_+=" "),(M=S?S.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null)?_=String.fromCodePoint(Number.parseInt("0x"+M[1])):_.length>0&&_.startsWith("\\")&&(_="string"==typeof t.value?t.value.charAt(0):t.command);break;case"mbin":case"mrel":case"minner":_=null!=(c=null!=(l=nP[S])?l:nO[S])?c:t.value;break;case"mopen":case"mclose":_+=t.value;break;case"mpunct":_=null!=(d=nO[S])?d:S;break;case"mop":"​"!==t.value&&(_=""+("\\operatorname"===S?te(t.body):null!=(h=t.value)?h:S)+" ");break;case"array":let C=t.array,z=t.environmentName,A=null!=(p=({bmatrix:["[","]"],"bmatrix*":["[","]"]})[z])?p:["(",")"],E=[];for(let t of C){let r=[];for(let a of t)r.push(A[0]+te(a)+A[1]);E.push(r.join(","))}let T=null!=(y=({bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]})[z])?y:["(",")"];_=T[0]+E.join(",")+T[1];break;case"spacing":_=null!=(v=nP[S])?v:" ";break;case"enclose":_="("+te(t.body)+")";break;case"space":_=" ";break;case"subsup":_="";break;case"macro":_=null!=(w=null!=(k=nP[S])?k:nO[S])?w:te(t.body)}if(!t.hasEmptyBranch("subscript")){_+="_";let r=te(t.subscript);_+=r.length>1?"("+r+")":r}if(!t.hasEmptyBranch("superscript")){_+="^";let r=te(t.superscript);_+=r.length>1?"("+r+")":r}return _}(t):(console.error(`MathLive 0.95.0: Unexpected format "${a}`),"")}getValue(t,r,a){let n,s;if(void 0===t)return this.atomToString(this.root,"latex");if("string"==typeof t&&"math-json"!==t)return this.atomToString(this.root,t);if(Mt(t)&&Mt(r)?(n=[this.normalizeRange([t,r])],s=null!=a?a:"latex"):Fr(t)?(n=[this.normalizeRange(t)],s=r):zi(t)?(n=t.ranges,s=r):(n=[this.normalizeRange([0,-1])],s=null!=t?t:"latex"),"math-json"===s){if(!window.MathfieldElement.computeEngine)return window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`The CortexJS Compute Engine library is not available.
Load the library, for example with:
import "https://unpkg.com/@cortex-js/compute-engine?module"`),'["Error", "compute-engine-not-available"]';let t=this.getValue({ranges:n},"latex-unstyled");try{let r=window.MathfieldElement.computeEngine.parse(t);return JSON.stringify(r.json)}catch(t){return JSON.stringify(["Error",`'${t.toString()}'`])}}if(s.startsWith("latex")){let t={expandMacro:"latex-expanded"===s,skipStyles:"latex-unstyled"===s,defaultMode:this.mathfield.options.defaultMode};return D(n.map(r=>on.serialize(this.getAtoms(r),t)))}return n.map(t=>this.getAtoms(t).map(t=>this.atomToString(t,s)).join("")).join("")}extendSelectionTo(t,r){return(!!this.mathfield.contentEditable||"none"!==this.mathfield.userSelect)&&this.deferNotifications({selection:!0},()=>{let[a,n]=this.normalizeRange([t,r]),{parent:s}=this.at(n);if(s&&("genfrac"===s.type||"subsup"===s.type))for(;s!==this.root&&ol(this,s,[a,n]);)n=this.offsetOf(s),s=s.parent;for(s=this.at(a).parent;s!==this.root&&ol(this,s,[a,n]);)a=this.offsetOf(s.leftSibling),s=s.parent;if((null==(s=this.at(n).parent)?void 0:s.type)==="genfrac")for(;s!==this.root&&ol(this,s,[a,n]);)n=this.offsetOf(s),s=s.parent;this._position=this.normalizeOffset(r),this._selection={ranges:[[a,n]],direction:"none"}})}announce(t,r,a=[]){var n,s;(null==(s=null==(n=this.mathfield.host)?void 0:n.dispatchEvent(new CustomEvent("announce",{detail:{command:t,previousPosition:r,atoms:a},cancelable:!0,bubbles:!0,composed:!0})))||s)&&function(t,r,a,n){let s="";if("plonk"===r)window.MathfieldElement.playSound("plonk"),t.flushInlineShortcutBuffer();else if("delete"===r)s="deleted: "+Rt(n);else if("focus"===r||r.includes("move"))s=function(t,r){if(Number.isNaN(r))return"";let a=t.at(r);if(!a||a.treeDepth<=t.at(t.position).treeDepth)return"";let n="",s=a.parent,l=t.at(t.position).parent;for(;s!==t.root&&s!==l;)n+=`out of ${z0(s)};`,s=s.parent;return n}(t.model,a)+(t.model.selectionIsCollapsed?"":"selected: ")+function(t){if(!t.selectionIsCollapsed)return""+Rt(t.getAtoms(t.selection));let r="",a=t.at(t.position),n=z0(a);return a.isFirstSibling&&(r=(n?"start of "+n:"unknown")+": "),a.isLastSibling?a.isFirstSibling||(r+=n?"end of "+n:"unknown"):r+=""+Rt(a),r}(t.model);else if("replacement"===r)s=""+Rt(t.model.at(t.model.position));else if("line"===r){let r=""+Rt(t.model.root);t.keyboardDelegate.setAriaLabel(r)}else s=n?r+" "+Rt(n):r;if(s){let r=t.ariaLiveText.textContent.includes("\xa0")?"   ":" \xa0 ";t.ariaLiveText.textContent=s+r}}(this.mathfield,t,r,a)}deferNotifications(t,r){let a=this._selection,n=this._anchor,s=this._position,l=this.silenceNotifications;this.silenceNotifications=!0;let c=this.root.changeCounter;r();let d=this.root.changeCounter!==c,h=n!==this._anchor||s!==this._position||"different"===function(t,r){if(t.direction===r.direction){let s=t.ranges.length;if(r.ranges.length===s){var a,n;let l=0;for(;l<s&&"equal"==(a=t.ranges[l],n=r.ranges[l],a[0]===n[0]&&a[1]===n[1]?"equal":"different");)l++;return l===s?"equal":"different"}}return"different"}(this._selection,a);return this.silenceNotifications=l,t.content&&d&&K(this,{inputType:t.type}),t.selection&&h&&aa(this),d||h}normalizeOffset(t){return t>0?t=Math.min(t,this.lastOffset):t<0&&(t=this.lastOffset+t+1),t}normalizeRange(t){let[r,a]=t;return(r=this.normalizeOffset(r))<(a=this.normalizeOffset(a))?[r,a]:[a,r]}normalizeSelection(t,r){var a;let n;if(Mt(t)){let a=this.normalizeOffset(t);if(Mt(r)){let t=this.normalizeOffset(r);n=a<=t?{ranges:[[a,t]],direction:"none"}:{ranges:[[t,a]],direction:"backward"}}else n={ranges:[[a,a]],direction:"none"}}else if(Fr(t)){let r=this.normalizeOffset(t[0]),a=this.normalizeOffset(t[1]);n=r<=a?{ranges:[[r,a]],direction:"none"}:{ranges:[[a,r]],direction:"backward"}}else zi(t)&&(n={ranges:t.ranges.map(t=>this.normalizeRange(t)),direction:null!=(a=t.direction)?a:"none"});return n}get parentEnvironment(){let t=this.at(this.position).parent;if(t){for(;t.parent&&"array"!==t.type;)t=t.parent;if("array"===t.type)return t}}};function F0(t,r,a,n){let s=t.offsetOf(r);if(s<a||s>n)return!1;if(!r.hasChildren)return!0;let l=t.offsetOf(r.firstChild);if(l>=a&&l<=n){let s=t.offsetOf(r.lastChild);if(s>=a&&s<=n)return!0}return!1}function ol(t,r,a){if(!(null!=r&&r.hasChildren))return!1;let[n,s]=a,l=t.offsetOf(r.firstChild),c=t.offsetOf(r.lastChild);return l>=n&&l<=s&&c>=l&&c<=s}function nl(t,r=1){return!function(t){for(let r of t)for(let t of r)if(t.length>0)return!1;return!0}(t)?t.map(t=>0===t.length?[[new on({type:"first"})]]:t.map(t=>0===t.length?[new on({type:"first"})]:("first"!==t[0].type&&t.unshift(new on({type:"first"})),t))):Array(r).fill([[new on({type:"first"}),new oE]])}function Be(t,r=[[[]]],a=[],n=[]){switch(r=nl(r,["split","align","align*","aligned","eqnarray"].includes(t)?2:1),t){case"math":case"displaymath":break;case"center":return new oO(t,r,a,{columns:[{align:"c"}]});case"multline":case"multline*":return new oO(t,r,a,{columns:[{align:"m"}],leftDelim:".",rightDelim:"."});case"split":return new oO(t,r,a,{columns:[{align:"r"},{align:"l"}],minColumns:2});case"gather":case"gathered":return new oO(t,r,a,{columns:[{gap:.25},{align:"c"},{gap:0}]});case"pmatrix":case"pmatrix*":return new oO(t,r,a,{mathstyleName:"textstyle",leftDelim:"(",rightDelim:")",columns:$r(n[0])});case"bmatrix":case"bmatrix*":return new oO(t,r,a,{mathstyleName:"textstyle",leftDelim:"[",rightDelim:"]",columns:$r(n[0])});case"Bmatrix":case"Bmatrix*":return new oO(t,r,a,{mathstyleName:"textstyle",leftDelim:"\\lbrace",rightDelim:"\\rbrace",columns:$r(n[0])});case"vmatrix":case"vmatrix*":return new oO(t,r,a,{mathstyleName:"textstyle",leftDelim:"\\vert",rightDelim:"\\vert",columns:$r(n[0])});case"Vmatrix":case"Vmatrix*":return new oO(t,r,a,{mathstyleName:"textstyle",leftDelim:"\\Vert",rightDelim:"\\Vert",columns:$r(n[0])});case"matrix":case"matrix*":return new oO(t,r,a,{mathstyleName:"textstyle",leftDelim:".",rightDelim:".",columns:$r(null==n?void 0:n[0])});case"smallmatrix":case"smallmatrix*":return new oO(t,r,a,{mathstyleName:"scriptstyle",columns:$r(null==n?void 0:n[0]),colSeparationType:"small",arraystretch:.5});case"cases":case"dcases":return new oO(t,r,a,{mathstyleName:"dcases"===t?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]});case"rcases":return new oO(t,r,a,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]});case"lines":return new oO(t,r,a,{leftDelim:".",rightDelim:".",columns:[{align:"l"}]});case"align":case"align*":case"aligned":case"eqnarray":{let n=0;for(let t of r)n=Math.max(n,t.length);let s=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],l=2;for(;l<n;)s.push({gap:1},{align:"r"},{gap:.25},{align:"l"}),l+=2;return s.push({gap:0}),new oO(t,r,a,{arraycolsep:0,columns:s,minColumns:2})}}return new oO(t,r,a,{mathstyleName:"textstyle"})}function $r(t){return null!=t?t:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}]}function qr(t,r,a){let n=t.getCell(r,a);return!!n&&2===n.length&&"placeholder"===n[1].type}function Hr(t,r,a,n){let s;let l=(s=r.getCell(a,n))?[t.offsetOf(s[0]),t.offsetOf(s[s.length-1])]:-1;"number"!=typeof l&&t.setSelection(l)}function fa(t,r,a,n,s){let l=r.getCell(a,n);l&&t.setPositionHandlingPlaceholder(t.offsetOf(l["start"===s?0:l.length-1]))}function ya(t,r){let[a,[n,s]]=function(t,r){let a=t.at(t.position);for(;a&&!(a.parent instanceof oO);)a=a.parent;if(a&&"array"===a.type&&a.environmentName,!a||!(a.parent instanceof oO)){let n=t.at(t.position);if(!(a=n).parent.parent){let a,s=t.extractAtoms([t.position,t.lastOffset]),l=t.extractAtoms([0,t.position]);return 0===l.length&&(l=ga()),0===s.length&&(s=ga()),r.endsWith("column")?(a=Be("split",[[l,s]]),t.root=a,qr(a,0,0)?Hr(t,a,0,0):qr(a,0,1)?Hr(t,a,0,1):t.position=t.offsetOf(n)):(a=Be("lines",[[l],[s]]),t.root=a,qr(a,0,0)?Hr(t,a,0,0):qr(a,1,0)?Hr(t,a,1,0):t.position=t.offsetOf(n)),[void 0,[0,0]]}if(a.parent instanceof oI){let n=a.parent,s=t.extractAtoms([t.position,t.offsetOf(n.lastChild)]),l=t.extractAtoms([t.offsetOf(n.firstChild),t.position]);0===l.length&&(l=ga()),0===s.length&&(s=ga());let c="pmatrix",d=n.leftDelim,h=n.rightDelim;"("===d&&(")"===h||"?"===h)?c="pmatrix":("["===d||"\\lbrack"===d)&&("]"===h||"\\rbrack"===h||"?"===h)?c="bmatrix":"\\vert"===d&&"\\vert"===h?c="vmatrix":"\\Vert"===d&&"\\Vert"===h?c="Vmatrix":("{"===d||"\\lbrace"===d)&&("."===h||"?"===h)&&(c="cases");let p=Be(c,r.endsWith("column")?[[l,s]]:[[l],[s]]);return n.parent.addChildBefore(p,n),n.parent.removeChild(n),qr(p,0,0)?Hr(t,p,0,0):r.endsWith("column")?qr(p,0,1)?Hr(t,p,0,1):t.position=t.offsetOf(a):qr(p,1,0)?Hr(t,p,1,0):t.position=t.offsetOf(a),[void 0,[0,0]]}}return a&&a.parent instanceof oO?[a.parent,a.parentBranch]:[void 0,[0,0]]}(t,r);if(a)switch(r){case"after row":a.addRowAfter(n),fa(t,a,n+1,0,"end");break;case"after column":if(a.maxColumns<=a.colCount){t.announce("plonk");return}a.addColumnAfter(s),fa(t,a,n,s+1,"end");break;case"before row":a.addRowBefore(n),fa(t,a,n,0,"start");break;case"before column":if(a.maxColumns<=a.colCount){t.announce("plonk");return}a.addColumnBefore(s),fa(t,a,n,s,"start")}}function al(t){return!!N(t,{inputType:"insertText"})&&(ya(t,"after row"),K(t,{inputType:"insertText"}),!0)}function sl(t){return!!N(t,{inputType:"insertText"})&&(ya(t,"after column"),K(t,{inputType:"insertText"}),!0)}function N0(t,r){let a=t.at(t.position);for(;a&&!(Array.isArray(a.parentBranch)&&a.parent instanceof oO);)a=a.parent;if(Array.isArray(null==a?void 0:a.parentBranch)&&(null==a?void 0:a.parent)instanceof oO){let n=a.parent,s=a.parentBranch,l;switch(r){case"row":if(n.rowCount>1){n.removeRow(s[0]);let r=n.getCell(Math.max(0,s[0]-1),s[1]);l=t.offsetOf(r[r.length-1])}break;case"column":if(n.colCount>n.minColumns){n.removeColumn(s[1]);let r=n.getCell(s[0],Math.max(0,s[1]-1));l=t.offsetOf(r[r.length-1])}}l&&t.setPositionHandlingPlaceholder(l)}}function ga(){return[new oE]}function Fo(t,r,a,n){var s,l,c,d,h,p;let y=a.parent;if(y&&a instanceof oI){let s=!n&&"forward"===r||"body"===n&&"backward"===r,l=s?t.offsetOf(a.firstChild):t.offsetOf(a.lastChild);return s?"?"!==a.rightDelim&&"."!==a.rightDelim?(a.leftDelim=".",a.isDirty=!0):(y.addChildrenAfter(a.removeBranch("body"),a),y.removeChild(a),l--):"?"!==a.leftDelim&&"."!==a.leftDelim?(a.rightDelim=".",a.isDirty=!0):(y.addChildrenAfter(a.removeBranch("body"),a),y.removeChild(a),l--),t.position=l,!0}if(y&&"surd"===a.type){if(("forward"!==r||n)&&("backward"!==r||"body"!==n))"forward"===r&&"body"===n?t.position=t.offsetOf(a):n||"backward"!==r?"above"===n&&(a.hasEmptyBranch("above")&&a.removeBranch("above"),"backward"===r?t.position=t.offsetOf(a.leftSibling):t.position=t.offsetOf(a.body[0])):a.hasChildren?t.position=t.offsetOf(a.lastChild):(t.position=Math.max(0,t.offsetOf(a)-1),y.removeChild(a));else{let r=a.leftSibling;a.hasChildren&&y.addChildrenAfter(a.removeBranch("body"),a),y.removeChild(a),t.position=t.offsetOf(r)}return!0}if(y&&("box"===a.type||"enclose"===a.type)){let s=n&&"backward"===r||!n&&"forward"===r?a.leftSibling:a.lastChild;return y.addChildrenAfter(a.removeBranch("body"),a),y.removeChild(a),t.position=t.offsetOf(s),!0}if("genfrac"===a.type||"overunder"===a.type){if(!n)return!("overunder"===a.type&&a.hasEmptyBranch("body")||"genfrac"===a.type&&a.hasEmptyBranch("below")&&a.hasEmptyBranch("above"))&&(t.position=t.offsetOf("forward"===r?a.firstChild:a.lastChild),!0);let s="numerator-denominator"===n8.fractionNavigationOrder?"above":"below",l="above"===s?"below":"above";if(y&&("forward"===r&&n===s||"backward"===r&&n===l)){let r=a.removeBranch(s),n=a.removeBranch(l);return y.addChildrenAfter([...r,...n],a),y.removeChild(a),t.position=t.offsetOf(r.length>0?r[r.length-1]:n[0]),!0}return"backward"===r?t.position=t.offsetOf(a.leftSibling):t.position=t.offsetOf(a),!0}if(a.isExtensibleSymbol||"subsup"===a.type){if(!n&&"forward"===r)return!1;if(!n){if(a.subscript||a.superscript){let n="forward"===r?null!=(c=null==(s=a.superscript)?void 0:s[0])?c:null==(l=a.subscript)?void 0:l[0]:null!=(p=null==(d=a.subscript)?void 0:d[0].lastSibling)?p:null==(h=a.superscript)?void 0:h[0].lastSibling;return n&&(t.position=t.offsetOf(n)),!0}return!1}if(n&&a.hasEmptyBranch(n)&&a.removeBranch(n),!a.hasChildren){let n="forward"===r?t.offsetOf(a):Math.max(0,t.offsetOf(a)-1);return a.parent.removeChild(a),t.position=n,!0}if("superscript"===n){if("backward"===r){let r=t.offsetOf(a.firstChild)-1;t.position=r}else a.subscript?t.position=t.offsetOf(a.subscript[0]):t.position=t.offsetOf(a)}else"subscript"===n&&("backward"===r&&a.superscript?t.position=t.offsetOf(a.superscript[0].lastSibling):"backward"===r?t.position=t.offsetOf(a.firstChild)-1:t.position=t.offsetOf(a));return!0}if((null==y?void 0:y.type)==="genfrac"&&!n&&"first"!==a.type){let r=t.offsetOf(a.leftSibling);return y.removeChild(a),y.hasEmptyBranch("above")&&y.hasEmptyBranch("below")?(r=t.offsetOf(y.leftSibling),y.parent.removeChild(y),t.announce("delete",void 0,[y])):t.announce("delete",void 0,[a]),t.position=r,!0}return!1}function $e(t,r,a){let n=t.getAtoms(r);if(n.length>0&&n[0].parent){let s=n[0].parent.firstChild;"first"===s.type&&(s=s.rightSibling);let l=n[n.length-1].parent.lastChild,c=n[0];"first"===c.type&&(c=c.rightSibling);let d=n[n.length-1];if(c===s&&d===l){let a=n[0].parent;a.parent&&"prompt"!==a.type&&(r=[t.offsetOf(a.leftSibling),t.offsetOf(a)])}if(1===n.length&&"placeholder"===n[0].type&&"genfrac"===n[0].parent.type){let r=n[0].parent,s="below"===n[0].parentBranch?"above":"below",l=t.offsetOf(r.leftSibling);return t.deferNotifications({content:!0,selection:!0,type:a},()=>{var a,n;let c=r.removeBranch(s);if(1===c.length&&"placeholder"===c[0].type)null==(n=r.parent)||n.removeChild(r),t.position=Math.max(0,l);else{let n=r.parent.addChildrenAfter(c,r);null==(a=r.parent)||a.removeChild(r),t.position=t.offsetOf(n)}})}}return t.deferNotifications({content:!0,selection:!0,type:a},()=>t.deleteAtoms(r))}function ba(t,r){let a=t.at(r),n;if(a){n=a.mode;let t=a.parent;for(;!n&&t;)t&&(n=t.mode),t=t.parent}return n}function _t(t,r){t&&r&&(Q(t)?t.forEach(t=>_t(t,r)):"object"!=typeof t||t.style.color||t.style.backgroundColor||t.style.fontFamily||t.style.fontShape||t.style.fontSeries||t.style.fontSize||t.style.variant||t.style.variantStyle||(t.applyStyle(r),_t(t.body,r),_t(t.above,r),_t(t.below,r),_t(t.subscript,r),_t(t.superscript,r)))}function No(t,r,a,n){function o(t,r){for(let a of s)if(a.style[t]!==r)return!1;return!0}if((r=t.normalizeRange(r))[0]===r[1])return!1;let s=t.getAtoms(r,{includeChildren:!0});for(let t of("toggle"===n.operation&&(a.color&&o("color",a.color)&&(a.color="none",delete a.verbatimColor),a.backgroundColor&&o("backgroundColor",a.backgroundColor)&&(a.backgroundColor="none",delete a.verbatimBackgroundColor),a.fontFamily&&o("fontFamily",a.fontFamily)&&(a.fontFamily="none"),a.fontSeries&&o("fontSeries",a.fontSeries)&&(a.fontSeries="auto"),a.fontShape&&o("fontShape",a.fontShape)&&(a.fontShape="auto"),a.fontSize&&o("fontSize",a.fontSize)&&(a.fontSize=5)),s))t.applyStyle(a);return!0}qa(["math","displaymath"],Be),qa("center",Be),at("array","{columns:colspec}",(t,r,a,n)=>new oO(t,nl(r),a,{columns:n[0],mathstyleName:"textstyle"})),at(["equation","equation*","subequations"],"",(t,r,a)=>new oO(t,nl(r),a,{columns:[{align:"c"}]})),at(["multline","multline*"],"",Be),at(["align","align*","aligned","eqnarray"],"",Be),at("split","",Be),at(["gather","gathered"],"",Be),at(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",Be),at(["smallmatrix","smallmatrix*"],"[columns:colspec]",Be),at(["cases","dcases","rcases"],"",Be),ne({addRowAfter:al,addColumnAfter:sl,addRowBefore:function(t){return!!N(t,{inputType:"insertText"})&&(ya(t,"before row"),K(t,{inputType:"insertText"}),!0)},addColumnBefore:function(t){return!!N(t,{inputType:"insertText"})&&(ya(t,"before column"),K(t,{inputType:"insertText"}),!0)},removeRow:function(t){return!!N(t,{inputType:"deleteContent"})&&(N0(t,"row"),K(t,{inputType:"deleteContent"}),!0)},removeColumn:function(t){return!!N(t,{inputType:"deleteContent"})&&(N0(t,"column"),K(t,{inputType:"deleteContent"}),!0)},setEnvironment:function(t,r){if(!N(t,{}))return!1;t.mathfield.snapshot();let a=".",n=".";switch(r){case"pmatrix":case"pmatrix*":a="(",n=")";break;case"bmatrix":case"bmatrix*":a="[",n="]";break;case"Bmatrix":case"Bmatrix*":a="\\lbrace",n="\\rbrace";break;case"vmatrix":case"vmatrix*":a="\\vert",n="\\vert";break;case"Vmatrix":case"Vmatrix*":a="\\Vert",n="\\Vert";break;case"matrix":case"matrix*":a=".",n=".";break;case"cases":case"dcases":a="\\lbrace";break;case"rcases":n="\\rbrace"}let s=t.parentEnvironment;return s.environmentName=r,s.leftDelim=a,s.rightDelim=n,K(t,{}),!0}},{target:"model",canUndo:!0,changeContent:!0,changeSelection:!0});var nR=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function Io(t){return!(t.ctrlKey||t.metaKey||["Dead","Process"].includes(t.key))&&(""===t.code||nR.has(t.code))}function H0(t){t=function(t){if(t.code)return t;let r=Object.entries(ur().mapping),a=!1,n=!1,s="";for(let l=0;l<4;l++){for(let[c,d]of r)if(d[l]===t.key){s=c,3===l?(a=!0,n=!0):2===l?a=!0:1===l&&(n=!0);break}if(s)break}return new KeyboardEvent(t.type,g(m({},t),{altKey:a,shiftKey:n,code:s}))}(t);let r=[];return t.ctrlKey&&r.push("ctrl"),t.metaKey&&r.push("meta"),t.altKey&&r.push("alt"),t.shiftKey&&r.push("shift"),0===r.length?`[${t.code}]`:(r.push(`[${t.code}]`),r.join("+"))}function hr(t){var r;let a;return t&&Io(t)?("Unidentified"===t.key&&t.target&&(a=t.target.value),a=null!=(r=null!=a?a:t.key)?r:t.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(a)&&(a=""),a):""}var nI=class va{constructor(t){this.recording=!1,this.model=t,this.reset()}reset(){this.stack=[],this.index=-1,this.lastOp=""}startRecording(){this.recording=!0}stopRecording(){this.recording=!1}canUndo(){return this.index-1>=0}canRedo(){return this.stack.length-1>this.index}stopCoalescing(t){t&&this.index>=0&&(this.stack[this.index].selection=t),this.lastOp=""}undo(){return!!this.canUndo()&&(this.model.setState(this.stack[this.index-1],{silenceNotifications:!1,type:"undo"}),this.index-=1,this.lastOp="",!0)}redo(){return!!this.canRedo()&&(this.index+=1,this.model.setState(this.stack[this.index],{silenceNotifications:!1,type:"redo"}),this.lastOp="",!0)}pop(){this.canUndo()&&(this.stack.splice(this.index,this.stack.length-this.index),this.index-=1)}snapshot(t){return!!this.recording&&(t&&t===this.lastOp&&this.pop(),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index+=1,this.stack.length>va.maximumDepth&&(this.stack.shift(),this.index-=1),this.lastOp=null!=t?t:"",!0)}};function cl(t){let r=t.position,a=t.at(r).parent;return null!=a&&a.parent?(t.position=t.offsetOf(a),t.mathfield.stopCoalescingUndo(),t.announce("move",r),!0):(t.announce("plonk"),!1)}function W0(t){var r;if(t.collapseSelection(),function(t){let r=0,a=t.at(t.position),n=!1;for(;a;)a.hasEmptyBranch("superscript")&&a.hasEmptyBranch("subscript")||(r+=1),a.hasEmptyBranch("superscript")?a.hasEmptyBranch("subscript")||(n=!1):n=!0,a=a.parent;return n?r:0}(t)>=t.mathfield.options.scriptDepth[1])return t.announce("plonk"),!1;let a=t.at(t.position);return void 0===a.subsupPlacement&&((null==(r=a.rightSibling)?void 0:r.type)!=="subsup"&&a.parent.addChildAfter(new oW({style:a.computedStyle}),a),a=a.rightSibling),a.createBranch("superscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(a.superscript[0]))),!0}function U0(t){var r;if(t.collapseSelection(),function(t){let r=0,a=t.at(t.position),n=!1;for(;a;)a.hasEmptyBranch("superscript")&&a.hasEmptyBranch("subscript")||(r+=1),a.hasEmptyBranch("superscript")?a.hasEmptyBranch("subscript")||(n=!0):n=!1,a=a.parent;return n?r:0}(t)>=t.mathfield.options.scriptDepth[0])return t.announce("plonk"),!1;let a=t.at(t.position);return void 0===a.subsupPlacement&&((null==(r=t.at(t.position+1))?void 0:r.type)!=="subsup"&&a.parent.addChildAfter(new oW({style:t.at(t.position).computedStyle}),a),a=t.at(t.position+1)),a.createBranch("subscript"),t.setSelection(t.getSiblingsRange(t.offsetOf(a.subscript[0]))),!0}function ke(t,r,a="forward"){let n=t.position;if(Array.isArray(r)){let s=t.offsetOf(r[0]),l=t.offsetOf(r[r.length-1]);return"forward"===a?t.setSelection(s,l):t.setSelection(l,s),t.announce("move",n),t.mathfield.stopCoalescingUndo(),!0}return"forward"===a?ke(t,[r.leftSibling,r]):ke(t,[r,r.leftSibling])}function it(t,r){let a=t.position;if("number"==typeof r&&(r=t.at(r)),"prompt"===r.type)t.setSelection(t.offsetOf(r.firstChild),t.offsetOf(r.lastChild));else{let a=t.offsetOf(r);"placeholder"===r.type?t.setSelection(a-1,a):t.position=a}return t.announce("move",a),t.mathfield.stopCoalescingUndo(),!0}function wa(t,r,a=!0){var n,s;let l="forward"===r?1:-1;"placeholder"===t.at(t.anchor).type&&qe(t,r);let c,d=t.at(t.anchor).parentPrompt;c=d?"forward"===r?t.offsetOf(d)+1:t.offsetOf(d.leftSibling):Math.max(t.position+l,0);let h=ll(t,c,r);if(!h||"forward"===r&&t.offsetOf(h)<c||"backward"===r&&t.offsetOf(h)>c){if(!a||!(null==(s=null==(n=t.mathfield.host)?void 0:n.dispatchEvent(new CustomEvent("move-out",{detail:{direction:r},cancelable:!0,bubbles:!0,composed:!0})))||s))return t.announce("plonk"),!1;let c=function(){var t;let r,a;function i(t){var r;let a=Number.parseInt(null!=(r=t.getAttribute("tabindex"))?r:"NaN",10);return Number.isNaN(a)?"true"===t.contentEditable||("AUDIO"===t.nodeName||"VIDEO"===t.nodeName)&&null===t.getAttribute("tabindex")?0:t.tabIndex:a}return ue()?(t=document.body,r=[],a=[],[...t.querySelectorAll(`input, select, textarea, a[href], button,
        [tabindex], audio[controls], video[controls],
        [contenteditable]:not([contenteditable="false"]), details>summary`)].filter(function(t){return!(t.disabled||"hidden"===t.type&&"INPUT"===t.tagName.toUpperCase()||function(t){if(!ue()||t===document.activeElement||t.contains(document.activeElement))return!1;if("hidden"===getComputedStyle(t).visibility)return!0;let r=t.getBoundingClientRect();if(0===r.width||0===r.height)return!0;for(;t;){if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1}(t)||"INPUT"===t.tagName.toUpperCase()&&"radio"===t.type&&!function(t){var r;if(!t.name)return!0;let a=function(t,r){for(let a of t)if(a.checked&&a.form===r)return a;return null}((null!=(r=t.form)?r:t.ownerDocument).querySelectorAll('input[type="radio"][name="'+t.name+'"]'),t.form);return!a||a===t}(t)||0>i(t))}).forEach((t,n)=>{let s=i(t);0===s?r.push(t):a.push({documentOrder:n,tabIndex:s,node:t})}),a.sort((t,r)=>t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex).map(t=>t.node).concat(r)):[]}();if(!document.activeElement||c.length<=1)return t.announce("plonk"),!1;let d=c.indexOf(document.activeElement)+l;return d<0&&(d=c.length-1),d>=c.length&&(d=0),c[d].focus(),t.mathfield.stopCoalescingUndo(),!0}return it(t,h),!0}function ll(t,r=0,a="forward"){return t.findAtom(r=>"placeholder"===r.type||"prompt"===r.type||!t.mathfield.readOnly&&r.treeDepth>2&&r.isFirstSibling&&r.isLastSibling,r,a)}function J0(t,r,a,n){if("forward"===n){let t=r.rightSibling;for(;t&&!a(t);)t=t.rightSibling;return t}let s=r.leftSibling;for(;s&&!a(s);)s=s.leftSibling;return s}function ka(t,r,a){"function"==typeof r&&(a=r,r=1/0),void 0===r&&(r=1/0);let n=t.position,s=!1,l="";for(;!s;){let c=t.at(n);(s=0===r||void 0===c||"math"!==c.mode||!(c.type&&/mord|mpunct/.test(c.type)||"mop"===c.type&&/[a-zA-Z]+/.test(c.value))||!c.hasEmptyBranch("superscript")||!c.hasEmptyBranch("subscript")||"function"==typeof a&&!a(c))||(c.mode="text",c.command=c.value,c.verbatimLatex=void 0,l+=c.value),n-=1,r-=1}K(t,{data:l,inputType:"insertText"})}function jr(t,r,a){"function"==typeof r&&(a=r,r=1/0),void 0===r&&(r=1/0);let n=t.position,s=!1,l=[];for(;!s;){let c=t.at(n);(s=0===r||!c||c.isFirstSibling||"text"!==c.mode||" "===c.value||a&&!a(c))||(l.push(on.serialize([c],{defaultMode:"math"})),c.mode="math"),n-=1,r-=1}Ma(t),K(t,{data:D(l),inputType:"insertText"})}function Ma(t){var r;let a=t.position-1;for(;a>=0&&(null==(r=t.at(a))?void 0:r.mode)==="math";)a-=1;if(!(a<0)&&"text"===t.at(a).mode&&" "===t.at(a).value&&"math"===t.at(a-1).mode){t.at(a-1).parent.removeChild(t.at(a-1));let r=t.silenceNotifications;t.silenceNotifications=!0,t.position-=1,t.silenceNotifications=r,K(t,{inputType:"deleteContent"})}}function Y0(){return document.getElementById("mathlive-keystroke-caption-panel")||(Pe("keystroke-caption"),Pe("core"),Br("mathlive-keystroke-caption-panel"))}function ml(t,r,a){var n,s,l,c;let{model:d}=t;if(a.isTrusted){!function(t){var r,a;if(!t||"Unidentified"===t.key||"Dead"===t.key)return;let n=t.shiftKey&&t.altKey?3:t.altKey?2:t.shiftKey?1:0;for(let s of nb)(null==(r=s.mapping[t.code])?void 0:r[n])===t.key?s.score+=1:null!=(a=s.mapping[t.code])&&a[n]&&(s.score=0);nb.sort((t,r)=>r.score-t.score)}(a);let r=ur();t.keyboardLayout!==r.id&&(t.keyboardLayout=r.id,t._keybindings=void 0)}if(clearTimeout(t.inlineShortcutBufferFlushTimer),t.inlineShortcutBufferFlushTimer=0,function(t,r){if(!t.isSelectionEditable||!t.keystrokeCaptionVisible)return;let a=Y0(),n=t.element.getBoundingClientRect();a.style.left=`${n.left}px`,a.style.top=`${n.top-64}px`,a.innerHTML=window.MathfieldElement.createHTML("<span>"+(qs(r)||r)+"</span>"+a.innerHTML),a.style.visibility="visible",setTimeout(()=>{a.childNodes.length>0&&a.childNodes[a.childNodes.length-1].remove(),0===a.childNodes.length&&(a.style.visibility="hidden")},3e3)}(t,r),a.isTrusted&&a.defaultPrevented)return t.flushInlineShortcutBuffer(),!1;if(d.mathfield.smartFence){if(dl(d,hr(a),t.style))return t.flushInlineShortcutBuffer(),t.dirty=!0,t.scrollIntoView(),a.preventDefault&&a.preventDefault(),!1}else{let{parent:n}=d.at(d.position);if(n instanceof oI&&"?"===n.rightDelim&&d.at(d.position).isLastSibling&&/^[)}\]|]$/.test(r))return t.snapshot(),n.isDirty=!0,n.rightDelim=r,d.position+=1,aa(d),K(d,{data:hr(a),inputType:"insertText"}),t.snapshot("insert-fence"),t.dirty=!0,t.scrollIntoView(),a.preventDefault&&a.preventDefault(),!1;if(!d.selectionIsCollapsed){let r=hr(a);if("("===r||"{"===r||"["===r){let[n,s]=G(d.selection);return t.snapshot(),d.position=s,oh.insert(d,{"(":")","{":"\\rbrace","[":"\\rbrack"}[r],{format:"latex"}),d.position=n,oh.insert(d,{"(":"(","{":"\\lbrace","[":"\\lbrack"}[r],{format:"latex"}),d.setSelection(n+1,s+1),K(d,{data:r,inputType:"insertText"}),t.snapshot("insert-fence"),t.dirty=!0,t.scrollIntoView(),a.preventDefault&&a.preventDefault(),!1}}}let h,p="",y,v=t.inlineShortcutBuffer;if(t.isSelectionEditable){if("math"===d.mode){if("[Backspace]"===r)v.pop(),t.flushInlineShortcutBuffer({defer:!0});else if(Io(a)){let r=hr(a),l=[...null!=(s=null==(n=v[v.length-1])?void 0:n.keystrokes)?s:[],r];v.push({state:d.getState(),keystrokes:l,leftSiblings:function(t){let r=t.model,a=[],n=r.at(Math.min(r.position,r.anchor));for(;"first"!==n.type;)a.push(n),n=n.leftSibling;return a}(t)});let c=0,p="";for(;!h&&c<l.length;)y=v.length-(l.length-c),p=l.slice(c).join(""),!(h=bo(v[y].leftSiblings,p,t.options.inlineShortcuts))&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(p)&&(h=t.options.onInlineShortcut(t,p)),c+=1;t.flushInlineShortcutBuffer({defer:!0})}else t.flushInlineShortcutBuffer()}if(t.options.smartMode){let n=d.mode;h?d.mode="math":function(t,r,a){if(t.smartModeSuppressed)return!1;let{model:n}=t;if(!n.at(n.position).isLastSibling||!a||!Io(a))return!1;let s=hr(a);if(!n.selectionIsCollapsed)return!!("text"===t.model.mode&&/[/_^]/.test(s));let l=function(t){let r="",a=t.position,n=!1;for(;!n;){let s=t.at(a);(n=!(s&&("text"===s.mode||"math"===s.mode&&s.type&&/mord|mpunct/.test(s.type))))||(r=s.value+r),a-=1}return r}(n)+s;if("text"===t.model.mode){if("Esc"===r||/[/\\]/.test(s))return!0;if(/[\^_]/.test(s))return/(^|\s)[a-zA-Z][^_]$/.test(l)&&jr(n,1),!0;let t={")":"(","}":"{","]":"["}[s],{parent:a}=n.at(n.position);if(t&&a instanceof oI&&a.leftDelim===t)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(l))return!1;if(/[$€£₤₺¥¤฿¢₡₧₨₹₩₱]/u.test(s))return!0;if(/(^|[^a-zA-Z'’])[a-zA-Z] $/.test(l))return jr(n,1),!1;if(/\D\.[^\d\s]$/.test(l)){jr(n,1);let t=n.at(n.position);return t.value="⋅",t.style.variant="normal",t.command="\\cdot",t.verbatimLatex=void 0,K(n,{data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(l)||/\.\d$/.test(l)||/\([\d+\-.]$/.test(l))return jr(n,1),!0;if(/\([a-z][,;]$/.test(l))return jr(n,2),!0;if(/[\d+\-=><*|]$/.test(s))return Ma(n),!0}else{if("[Space]"===r)return ka(n,void 0,t=>/[a-z][:,;.]$/.test(t.value)),!0;if(/[a-zA-Z]{3,}$/.test(l)&&!/(dxd|abc|xyz|uvw)$/.test(l))return ka(n,void 0,t=>/[a-zA-Z]/.test(t.value)),!0;if(/(^|\W)(if)$/i.test(l))return ka(n,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(l)&&!/(αβγ)$/.test(l))return ka(n,void 0,t=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(t.value)),!0;if("?"===s||"."===s&&!/[\d-+]\.$/.test(l))return!0}return!1}(t,r,a)&&(d.mode=({math:"text",text:"math"})[d.mode],p=""),d.mode!==n&&(null!=(l=t.host)&&l.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))||(d.mode=n))}}if(!h){if(p||(p=function(t,r,a){if(0===t.length)return"";let n=_o(Is(a));for(let a=t.length-1;a>=0;a--)if(t[a].key===n&&(!t[a].ifMode||t[a].ifMode===r))return t[a].command;return""}(t.keybindings,d.mode,r)),!p&&("[Enter]"===r||"[Return]"===r)){let r=!1;return N(d,{inputType:"insertLineBreak"})&&(t.host&&(r=!t.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),r||a.preventDefault&&(a.preventDefault(),a.stopPropagation()),K(d,{inputType:"insertLineBreak"})),r}if((!p||"[Space]"===r)&&"math"===d.mode){if("[Space]"===r){if(t.adoptStyle="none",t.flushInlineShortcutBuffer(),t.options.mathModeSpace)return oh.insert(d,t.options.mathModeSpace,{format:"latex",mode:"math"}),t.snapshot("insert-space"),p="",t.dirty=!0,t.scrollIntoView(),a.preventDefault&&(a.preventDefault(),a.stopPropagation()),!1;let r=d.at(d.position+1),n=d.at(d.position-1);if((null==r?void 0:r.mode)==="text"||(null==n?void 0:n.mode)==="text")return oh.insert(d," ",{mode:"text"}),t.snapshot("insert-space"),t.dirty=!0,t.scrollIntoView(),!1}null!=(c=d.at(d.position))&&c.isDigit()&&","===window.MathfieldElement.decimalSeparator&&","===hr(a)&&(p="insertDecimalSeparator")}}if(!h&&!p)return!0;let k=d.at(Math.max(d.position,d.anchor)),{parent:w}=k;if("moveAfterParent"===p&&(null==w?void 0:w.type)==="leftright"&&k.isLastSibling&&t.options.smartFence&&dl(d,".",t.style)&&(p="",U(t)),t.keyboardDelegate.cancelComposition(),p)t.executeCommand(p);else if(h){let r=m(m({},d.at(d.position).computedStyle),t.style);for(let t of(d.setState(v[y].state),v[v.length-1].keystrokes))oh.insert(d,t,{silenceNotifications:!0,style:r});t.snapshot("insert-shortcut"),d.setState(v[y].state),d.deferNotifications({content:!0,selection:!0,data:h,type:"insertText"},()=>(oh.insert(d,h,{format:"latex",style:r}),Ma(t.model),h.endsWith(" ")&&(d.mode="text",oh.insert(d," ",{style:r,mode:"text"})),t.snapshot(),d.selectionIsCollapsed||t.flushInlineShortcutBuffer(),!0)),t.dirty=!0,d.announce("replacement")}return t.scrollIntoView(),a.preventDefault&&a.preventDefault(),!1}function Vo(t,r,a){let{model:n}=t;if(!t.isSelectionEditable){n.announce("plonk");return}null!=a||(a={}),a.focus&&t.focus(),a.feedback&&window.MathfieldElement.playSound("keypress"),"string"==typeof a.mode&&(t.switchMode(a.mode),t.snapshot());let s=qn(r),l=window.mathVirtualKeyboard;if(null!=l&&l.visible&&l.isShifted&&(s="string"==typeof s?s.toUpperCase():s.map(t=>t.toUpperCase())),a.simulateKeystroke){let r=!0;for(let a of s)ml(t,a,new KeyboardEvent("keypress",{key:a}))&&(r=!1);if(r)return}let c=n.at(n.position),d=m(m({},c.computedStyle),t.style);if(n.selectionIsCollapsed||(n.deleteAtoms(G(n.selection)),t.snapshot("delete")),"latex"===n.mode)n.deferNotifications({content:!0,selection:!0,data:r,type:"insertText"},()=>{for(let r of(Ao(t),s))oh.insert(n,r);t.snapshot("insert-latex"),dr(t)});else if("text"===n.mode){for(let t of s)oh.insert(n,t,{style:d});t.snapshot("insert-text")}else if("math"===n.mode)for(let r of s)!function(t,r,a,n){var s;let l=t.model,c={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[r];if(" "===r&&t.options.mathModeSpace&&(c=["insert",t.options.mathModeSpace]),c){t.executeCommand(c);return}if(/\d/.test(r)&&t.options.smartSuperscript&&"superscript"===n.parentBranch&&(null==(s=n.parent)?void 0:s.type)!=="mop"&&n.hasNoSiblings){l.selectionIsCollapsed||(l.deleteAtoms(G(l.selection)),l.mathfield.snapshot("delete")),oh.insert(l,r,{style:a}),t.snapshot(),cl(l),t.snapshot();return}if("none"!==t.adoptStyle){let s="left"===t.adoptStyle?n:n.parent?n.rightSibling:null;(null==s?void 0:s.type)==="mord"&&/[a-zA-Z0-9]/.test(s.value)&&/[a-zA-Z0-9]/.test(r)&&(a=m({},a),s.style.variant&&(a.variant=s.style.variant),s.style.variantStyle&&(a.variantStyle=s.style.variantStyle))}oh.insert(l,r,{style:a}),t.snapshot(`insert-${l.at(l.position).type}`)}(t,r,d,c);t.dirty=!0,t.scrollIntoView()}function dl(t,r,a){if(!r||"math"!==t.mode)return!1;let n=t.at(t.position),{parent:s}=n,l={"(":"(",")":")","{":"\\lbrace","}":"\\rbrace","[":"\\lbrack","]":"\\rbrack","|":"|"}[r];if(!l)return!1;let c=oS[l],d=o_[l];if(!t.selectionIsCollapsed){t.mathfield.snapshot();let[r,a]=G(t.selection),n=t.extractAtoms([r,a]),c=s.addChildrenAfter([new oI("left...right",n,{leftDelim:l,rightDelim:d})],t.at(r));return t.setSelection(t.offsetOf(c.firstChild),t.offsetOf(c.lastChild)),t.mathfield.snapshot("insert-fence"),K(t,{data:l,inputType:"insertText"}),!0}if("|"===l){let r=s instanceof oI?s.leftDelim+s.rightDelim:"";if("\\lbrace\\rbrace"===r||"\\{\\}"===r||"\\lbrace?"===r)return t.mathfield.snapshot(),oh.insert(t,"\\,\\middle\\vert\\,",{format:"latex",style:a}),t.mathfield.snapshot("insert-fence"),K(t,{data:l,inputType:"insertText"}),!0}if(d){if(s instanceof oI&&s.firstChild===n&&("?"===s.leftDelim||"."===s.leftDelim))return s.leftDelim=l,s.isDirty=!0,t.mathfield.snapshot(),K(t,{data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;if(!(s instanceof oI)){let r=n;for(;r&&!("mclose"===r.type&&r.value===d);)r=r.rightSibling;if(r){t.mathfield.snapshot();let a=t.extractAtoms([t.offsetOf(n),t.offsetOf(r)]);return a.pop(),s.addChildrenAfter([new oI("left...right",a,{leftDelim:l,rightDelim:d})],n),t.position=t.offsetOf(s.firstChild)+1,K(t,{data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}}let r=t.offsetOf(n.lastSibling),c;for(c=t.position;c<=r;c++){let r=t.at(c);if(r instanceof oI&&("?"===r.leftDelim||"."===r.leftDelim)&&em(l,r.rightDelim))break}let h=t.at(c);if(c<=r&&h instanceof oI){h.leftDelim=l,t.mathfield.snapshot();let r=t.extractAtoms([t.position,c-1]);return r=r.filter(t=>"first"!==t.type),h.addChildren(r,h.parentBranch),t.position+=1,K(t,{data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}if(s instanceof oI&&("?"===s.leftDelim||"."===s.leftDelim)&&em(l,s.rightDelim)){for(let r of(s.isDirty=!0,s.leftDelim=l,t.mathfield.snapshot(),t.extractAtoms([t.offsetOf(n.firstSibling),t.position])))s.parent.addChildBefore(r,s);return K(t,{data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}if(!(s instanceof oI&&"|"===s.leftDelim)){if(t.mathfield.snapshot(),oh.insert(t,`\\left${l}\\right?`,{format:"latex",style:a}),"first"!==n.lastSibling.type){let r=t.offsetOf(n.lastSibling),a=t.extractAtoms([t.position,r]);t.at(t.position).body=a,t.position-=1}return t.mathfield.snapshot("insert-fence"),!0}}if(c){let r=n;for(;r;){if("mopen"===r.type&&r.value===c){t.mathfield.snapshot();let a=r.leftSibling,d=t.extractAtoms([t.offsetOf(r.leftSibling),t.offsetOf(n)]);d.shift();let h=new oI("left...right",d,{leftDelim:c,rightDelim:l});return s.addChildrenAfter([h],a),t.position=t.offsetOf(h),K(t,{data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0}r=r.leftSibling}if(s instanceof oI&&n.isLastSibling&&ul(s.leftDelim,l))return t.mathfield.snapshot(),s.isDirty=!0,s.rightDelim=l,t.position+=1,K(t,{data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;let d=t.offsetOf(n.firstSibling),h;for(h=t.position;h>=d;h--){let r=t.at(h);if(r instanceof oI&&("?"===r.rightDelim||"."===r.rightDelim)&&ul(r.leftDelim,l))break}let p=t.at(h);if(h>=d&&p instanceof oI)return t.mathfield.snapshot(),p.rightDelim=l,p.addChildren(t.extractAtoms([h,t.position]),p.parentBranch),K(t,{data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;if(s instanceof oI&&("?"===s.rightDelim||"."===s.rightDelim)&&ul(s.leftDelim,l))return t.mathfield.snapshot(),s.isDirty=!0,s.rightDelim=l,s.parent.addChildren(t.extractAtoms([t.position,t.offsetOf(n.lastSibling)]),s.parentBranch),t.position=t.offsetOf(s),K(t,{data:l,inputType:"insertText"}),t.mathfield.snapshot("insert-fence"),!0;let y=s.parent;return y instanceof oI&&("?"===y.rightDelim||"."===y.rightDelim)&&!!t.at(t.position).isLastSibling&&(t.position=t.offsetOf(y),dl(t,l,a))}return!1}function ul(t,r){return!t||(["(","{","[","\\lbrace","\\lparen","\\{","\\lbrack"].includes(t)?[")","}","]","\\rbrace","\\rparen","\\}","\\rbrack"].includes(r):o_[t]===r)}function em(t,r){return!r||([")","}","]","\\rbrace","\\rparen","\\}","\\rbrack"].includes(r)?["(","{","[","\\lbrace","\\lparen","\\{","\\lbrack"].includes(t):oS[r]===t)}nI.maximumDepth=1e3,ne({moveToOpposite:t=>{let r=t.at(t.position),{parent:a}=r;if(!a)return t.announce("plonk"),!1;let n=r.parentBranch,s;if("string"==typeof n&&(s=({superscript:"subscript",subscript:"superscript",above:"below",below:"above"})[n]),!s){let a=r.subsupPlacement?U0(t):W0(t);return t.mathfield.stopCoalescingUndo(),a}a.branch(s)||a.createBranch(s);let l=t.setSelection(t.getBranchRange(t.offsetOf(a),s));return t.mathfield.stopCoalescingUndo(),l},moveBeforeParent:t=>{let{parent:r}=t.at(t.position);return r?(t.position=t.offsetOf(r),t.mathfield.stopCoalescingUndo(),!0):(t.announce("plonk"),!1)},moveAfterParent:t=>cl(t),moveToNextChar:t=>qe(t,"forward"),moveToPreviousChar:t=>qe(t,"backward"),moveUp:t=>qe(t,"upward"),moveDown:t=>qe(t,"downward"),moveToNextWord:t=>fr(t,"forward"),moveToPreviousWord:t=>fr(t,"backward"),moveToGroupStart:t=>{let r=t.offsetOf(t.at(t.position).firstSibling);return r===t.position?(t.announce("plonk"),!1):(t.position=r,t.mathfield.stopCoalescingUndo(),!0)},moveToGroupEnd:t=>{let r=t.offsetOf(t.at(t.position).lastSibling);return r===t.position?(t.announce("plonk"),!1):(t.position=r,t.mathfield.stopCoalescingUndo(),!0)},moveToNextGroup:t=>{var r,a,n,s;if(t.position===t.lastOffset&&t.anchor===t.lastOffset)return wa(t,"forward");let l=t.at(t.position);if("text"===l.mode){if(t.selectionIsCollapsed){let a=l;for(;a&&"text"===a.mode;)a=a.leftSibling;let n=l;for(;(null==(r=n.rightSibling)?void 0:r.mode)==="text";)n=n.rightSibling;if(a&&n)return ke(t,[a,n])}if("text"===l.rightSibling.mode){let r=l;for(;r&&"text"===r.mode;)r=r.rightSibling;return r?(it(t,null!=(a=r.leftSibling)?a:r),t.mathfield.switchMode("math"),!0):it(t,t.lastOffset)}}let c=ll(t,t.position+1,"forward");if(c)return it(t,c);let d=J0(t,l,t=>"leftright"===t.type||"text"===t.type,"forward");if(d){if("text"===d.mode){let r=d;for(;r&&"text"===r.mode;)r=r.rightSibling;return ke(t,[null!=(n=d.leftSibling)?n:d,null!=(s=r.leftSibling)?s:r])}return ke(t,d)}let h=l.parent;if(h){if("leftright"===h.type||"surd"===h.type)return ke(t,h);if("superscript"===l.parentBranch&&h.subscript)return ke(t,h.subscript);if("above"===l.parentBranch&&h.below)return ke(t,h.below);if("superscript"===l.parentBranch||"subscript"===l.parentBranch)return it(t,h);if("above"===l.parentBranch||"below"===l.parentBranch)return ke(t,h)}return it(t,t.lastOffset)},moveToPreviousGroup:t=>{var r;if(0===t.position&&0===t.anchor)return wa(t,"backward");let a=t.at(t.position),n=a.mode;if("text"===n){if(t.selectionIsCollapsed){let n=a;for(;n&&"text"===n.mode;)n=n.leftSibling;let s=a;for(;(null==(r=s.rightSibling)?void 0:r.mode)==="text";)s=s.rightSibling;if(n&&s)return ke(t,[n,s])}for(;a&&"text"===a.mode;)a=a.leftSibling;return a?it(t,a):it(t,0)}let s=ll(t,t.position-1,"backward");if(s)return it(t,s);if("math"===n){let r=J0(t,a,t=>"leftright"===t.type||"text"===t.type,"backward");if(r){if("text"===r.mode){let a=r;for(;a&&"text"===a.mode;)a=a.leftSibling;return ke(t,[r,a])}return ke(t,r)}let n=a.parent;if(n){if("leftright"===n.type||"surd"===n.type)return ke(t,n);if("subscript"===a.parentBranch&&n.superscript)return ke(t,n.superscript);if("below"===a.parentBranch&&n.above)return ke(t,n.above);if("superscript"===a.parentBranch||"subscript"===a.parentBranch)return it(t,n);if("above"===a.parentBranch||"below"===a.parentBranch)return ke(t,n)}return it(t,0)}return!1},moveToMathfieldStart:t=>0===t.position?(t.announce("plonk"),!1):(t.position=0,t.mathfield.stopCoalescingUndo(),!0),moveToMathfieldEnd:t=>t.position===t.lastOffset?(t.announce("plonk"),!1):(t.position=t.lastOffset,t.mathfield.stopCoalescingUndo(),!0),moveToSuperscript:t=>W0(t),moveToSubscript:t=>U0(t)},{target:"model",changeSelection:!0}),ne({moveToNextPlaceholder:t=>wa(t,"forward"),moveToPreviousPlaceholder:t=>wa(t,"backward")},{target:"model",changeSelection:!0,audioFeedback:"return"});var nV={acute:714,grave:715,dot:729,ddot:168,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};x(Object.keys(nV),"{body:auto}",{createAtom:t=>new ow(g(m({},t),{body:L(t.args[0]),accentChar:nV[t.command.slice(1)]}))}),x(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:t=>{let r=$a(L(t.args[0]));return new ow(g(m({},t),{body:L(t.args[0]),svgAccent:t.command.slice(1)+(r.length>5?"4":["1","1","2","2","3","3"][r.length])}))}}),x(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:t=>new ow(g(m({},t),{body:L(t.args[0]),svgAccent:"overarc"}))}),x(["underarc","underparen"],"{body:auto}",{createAtom:t=>new o6(g(m({},t),{body:L(t.args[0]),svgBelow:"underarc"}))}),x("utilde","{body:auto}",{createAtom:t=>{let r=L(t.args[0]),a=$a(r),n="widetilde"+(a.length>5?"4":["1","1","2","2","3","3"][a.length]);return new o6(g(m({},t),{body:r,svgBelow:n,boxType:_r(r)}))}}),x("^","{:string}",{createAtom:t=>{var r;return new on(g(m({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&null!=(r=({a:"\xe2",e:"\xea",i:"\xee",o:"\xf4",u:"\xfb",A:"\xc2",E:"\xca",I:"\xce",O:"\xd4",U:"\xdb"})[t.args[0]])?r:"^"}))}}),x("`","{:string}",{createAtom:t=>{var r;return new on(g(m({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&null!=(r=({a:"\xe0",e:"\xe8",i:"\xec",o:"\xf2",u:"\xf9",A:"\xc0",E:"\xc8",I:"\xcc",O:"\xd2",U:"\xd9"})[t.args[0]])?r:"`"}))}}),x("'","{:string}",{createAtom:t=>{var r;return new on(g(m({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&null!=(r=({a:"\xe1",e:"\xe9",i:"\xed",o:"\xf3",u:"\xfa",A:"\xc1",E:"\xc9",I:"\xcd",O:"\xd3",U:"\xda"})[t.args[0]])?r:"^"}))}}),x("~","{:string}",{createAtom:t=>{var r;return new on(g(m({type:"mord"},t),{isFunction:!1,limits:"adjacent",value:t.args[0]&&null!=(r=({n:"\xf1",N:"\xd1",a:"\xe3",o:"\xf5",A:"\xc3",O:"\xd5"})[t.args[0]])?r:"\xb4"}))}}),x("c","{:string}",{createAtom:t=>{var r;return new on(g(m({},t),{type:"mord",isFunction:!1,limits:"adjacent",value:t.args[0]&&null!=(r=({c:"\xe7",C:"\xc7"})[t.args[0]])?r:""}))}}),x("enclose","{notation:string}[style:string]{body:auto}",{createAtom:t=>{var r,a;let n=t.args,s={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",svgStrokeStyle:void 0,borderStyle:void 0,style:null!=(r=t.style)?r:{}};if(n[1]){for(let t of n[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/)){let r=t.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(r)s.strokeWidth=r[1],s.strokeStyle=r[2],s.strokeColor=r[3];else{let r=t.match(/\s*([a-z]*)\s*=\s*"(.*)"/);r&&("mathbackground"===r[1]?s.backgroundcolor=r[2]:"mathcolor"===r[1]?s.strokeColor=r[2]:"padding"===r[1]?s.padding=r[2]:"shadow"===r[1]&&(s.shadow=r[2]))}}"dashed"===s.strokeStyle?s.svgStrokeStyle="5,5":"dotted"===s.strokeStyle&&(s.svgStrokeStyle="1,5")}s.borderStyle=`${s.strokeWidth} ${s.strokeStyle} ${s.strokeColor}`;let l={};return(null!=(a=n[0])?a:"").split(/[, ]/).filter(t=>t.length>0).forEach(t=>{l[t.toLowerCase()]=!0}),new oQ(t.command,L(n[2]),l,s)}}),x("cancel","{body:auto}",{createAtom:t=>{var r;return new oQ(t.command,L(t.args[0]),{updiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:null!=(r=t.style)?r:{}})}}),x("bcancel","{body:auto}",{createAtom:t=>{var r;return new oQ(t.command,L(t.args[0]),{downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:null!=(r=t.style)?r:{}})}}),x("xcancel","{body:auto}",{createAtom:t=>{var r;return new oQ(t.command,L(t.args[0]),{updiagonalstrike:!0,downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:null!=(r=t.style)?r:{}})}}),x(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:t=>{var r;return new o6(g(m({},t),{body:L(null==(r=t.args)?void 0:r[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgAbove:t.command.slice(1)}))}}),x("overbrace","{:auto}",{createAtom:t=>new o6(g(m({},t),{body:L(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgAbove:t.command.slice(1)}))}),x(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:t=>new o6(g(m({},t),{body:L(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgBelow:t.command.slice(1)}))}),x(["underbrace"],"{:auto}",{createAtom:t=>new o6(g(m({},t),{body:L(t.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgBelow:t.command.slice(1)}))}),x(["xrightarrow","longrightarrow","xleftarrow","longleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","longleftrightarrow","xLeftrightarrow","xrightleftharpoons","longrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xleftrightarrows","longleftrightarrows","xRightleftharpoons","longRightleftharpoons","xLeftrightharpoons","longLeftrightharpoons"],"[:auto]{:auto}",{createAtom:t=>{var r,a,n,s,l;return new o6(g(m({},t),{svgBody:t.command.slice(1),above:(null==(a=L(null==(r=t.args)?void 0:r[1]))?void 0:a.length)===0?void 0:L(null==(n=t.args)?void 0:n[1]),below:null!=(l=L(null==(s=t.args)?void 0:s[0]))?l:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"rel"}))},serialize:(t,r)=>t.command+(t.hasEmptyBranch("below")?"":`[${t.belowToLatex(r)}]`)+`{${t.aboveToLatex(r)}}${t.supsubToLatex(r)}`}),x(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","dim","exp","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,ifMode:"math",createAtom:t=>new o2(t.command.slice(1),g(m({},t),{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up"}))}),x(["liminf","limsup"],"",{ifMode:"math",createAtom:t=>new o2({"\\liminf":"lim inf","\\limsup":"lim sup"}[t.command],g(m({},t),{limits:"over-under",variant:"main"}))}),x(["lim","mod"],"",{ifMode:"math",createAtom:t=>new o2(t.command.slice(1),g(m({},t),{limits:"over-under",variant:"main"}))}),x(["det","max","min"],"",{ifMode:"math",isFunction:!0,createAtom:t=>new o2(t.command.slice(1),g(m({},t),{limits:"over-under",isFunction:!0,variant:"main"}))}),x(["ang"],"{:math}",{ifMode:"math",createAtom:t=>new on(g(m({},t),{body:L(t.args[0])})),serialize:(t,r)=>`\\ang{${t.bodyToLatex(r)}}`,render:(t,r)=>{let a=t.createBox(r),n=a.caret;a.caret=void 0;let s=new a5("\xb0",{style:g(m({},t.style),{variant:"normal",variantStyle:"up"})});return new a5([a,s],{type:"inner",isSelected:t.isSelected,caret:n})}}),x("sqrt","[index:auto]{radicand:expression}",{ifMode:"math",createAtom:t=>new o7(g(m({},t),{body:L(t.args[1]),index:t.args[0]?L(t.args[0]):void 0}))}),x(["frac","dfrac","tfrac","cfrac","binom","dbinom","tbinom"],"{:expression}{:expression}",{ifMode:"math",createAtom:t=>{let r=m({},t),a=t.command,n=t.args;switch(a){case"\\dfrac":case"\\frac":case"\\tfrac":r.hasBarLine=!0;break;case"\\atopfrac":r.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":r.hasBarLine=!1,r.leftDelim="(",r.rightDelim=")";break;case"\\cfrac":r.hasBarLine=!0,r.continuousFraction=!0}switch(a){case"\\dfrac":case"\\dbinom":r.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":r.mathstyleName="textstyle"}return new o0(n[0]?L(n[0]):[new oE],n[1]?L(n[1]):[new oE],r)},serialize:(t,r)=>{let a=t.aboveToLatex(r),n=t.belowToLatex(r);return/^[0-9]$/.test(a)&&/^[0-9]$/.test(n)?`${t.command}${a}${n}`:O(t.command,a,n)}}),x(["brace","brack"],"",{infix:!0,createAtom:t=>new o0(L(t.args[0]),L(t.args[1]),g(m({},t),{hasBarLine:!1,leftDelim:"\\brace"===t.command?"\\lbrace":"\\lbrack",rightDelim:"\\brace"===t.command?"\\rbrace":"\\rbrack"})),serialize:(t,r)=>D([t.aboveToLatex(r),t.command,t.belowToLatex(r)])}),x(["over","atop","choose"],"",{infix:!0,createAtom:t=>{let r,a,n=t.args;return"\\choose"===t.command&&(r="(",a=")"),new o0(L(n[0]),L(n[1]),g(m({},t),{hasBarLine:"\\over"===t.command,leftDelim:r,rightDelim:a}))},serialize:(t,r)=>D([t.aboveToLatex(r),t.command,t.belowToLatex(r)])}),x(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:t=>{var r,a;let n=t.args;return new o0(L(n[0]),L(n[1]),g(m({},t),{leftDelim:null!=(r=n[2])?r:".",rightDelim:null!=(a=n[3])?a:".",hasBarLine:!1}))},serialize:(t,r)=>`${t.aboveToLatex(r)} ${t.command}${t.leftDelim}${t.rightDelim}${t.belowToLatex(r)}`}),x("pdiff","{numerator}{denominator}",{ifMode:"math",createAtom:t=>new o0(L(t.args[0]),L(t.args[1]),g(m({},t),{hasBarLine:!0,numerPrefix:"∂",denomPrefix:"∂"}))}),x(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{ifMode:"math",createAtom:t=>new o2({coprod:"∐",bigvee:"⋁",bigwedge:"⋀",biguplus:"⨄",bigcap:"⋂",bigcup:"⋃",intop:"∫",prod:"∏",sum:"∑",bigotimes:"⨂",bigoplus:"⨁",bigodot:"⨀",bigsqcup:"⨆",smallint:"∫"}[t.command.slice(1)],g(m({},t),{isExtensibleSymbol:!0,limits:"auto",variant:"main"}))}),x("smallint","",{ifMode:"math",createAtom:t=>new o2("∫",g(m({},t),{limits:"adjacent",isExtensibleSymbol:!1,variant:"main"}))});var nj={int:"∫",iint:"∬",iiint:"∭",oint:"∮",oiint:"∯",oiiint:"∰",intclockwise:"∱",varointclockwise:"∲",ointctrclockwise:"∳",intctrclockwise:"⨑",sqcup:"⊔",sqcap:"⊓",uplus:"⊎",wr:"≀",amalg:"⨿",Cap:"⋒",Cup:"⋓",doublecap:"⋒",doublecup:"⋓"};x(Object.keys(nj),"",{ifMode:"math",createAtom:t=>{let r=nj[t.command.slice(1)];return new o2(r,g(m({},t),{limits:"adjacent",isExtensibleSymbol:!0,variant:{"⋒":"ams","⋓":"ams"}[r]}))}}),x(["Re","Im"],"",{ifMode:"math",createAtom:t=>new o2({"\\Re":"ℜ","\\Im":"ℑ"}[t.command],g(m({},t),{limits:"adjacent",isFunction:!0,variant:"fraktur"}))}),x("middle","{:delim}",{ifMode:"math",createAtom:t=>{var r;return new oZ(g(m({},t),{delim:null!=(r=t.args[0])?r:"|",size:1}))}}),x("the","{:value}",{createAtom:t=>new on(g(m({},t),{captureSelection:!0,verbatimLatex:null})),render:(t,r)=>{var a;let n=new oa({parent:r},t.style),s="";t.isSelected&&(s+=" ML__selected");let l=n.evaluate(t.args[0]);return new a5((null!=(a=le(l))?a:"").split("").map(r=>new a5(r,{type:"ord",classes:s,mode:t.mode,isSelected:t.isSelected,style:m({variant:"main"},t.style)})),{type:"lift",style:t.style,caret:t.caret,isSelected:t.isSelected,classes:s}).wrap(n)},serialize:t=>{var r;return`\\the${null!=(r=le(t.args[0]))?r:"\\relax"}`}}),x("mathtip","{:auto}{:math}",{createAtom:t=>new na(g(m({},t),{body:L(t.args[0]),tooltip:L(t.args[1]),content:"math"})),serialize:(t,r)=>r.skipStyles?t.bodyToLatex(r):`\\texttip{${t.bodyToLatex(r)}}{${on.serialize([t.tooltip],g(m({},r),{defaultMode:"math"}))}}`}),x("texttip","{:auto}{:text}",{createAtom:t=>new na(g(m({},t),{body:L(t.args[0]),tooltip:L(t.args[1]),content:"text"})),serialize:(t,r)=>r.skipStyles?t.bodyToLatex(r):`\\texttip{${t.bodyToLatex(r)}}{${on.serialize([t.tooltip],g(m({},r),{defaultMode:"text"}))}}`}),x("error","{:math}",{createAtom:t=>new on(g(m({},t),{body:L(t.args[0])})),serialize:(t,r)=>`\\error{${t.bodyToLatex(r)}}`,render:(t,r)=>t.createBox(r,{classes:"ML__error"})}),x("ensuremath","{:math}",{createAtom:t=>new on(g(m({},t),{body:L(t.args[0])})),serialize:(t,r)=>`${t.command}{${t.bodyToLatex(g(m({},r),{defaultMode:"math"}))}}`}),x("color","{:value}",{applyStyle:(t,r,a)=>{var n,s;return{verbatimColor:null!=(n=le(r[0]))?n:void 0,color:a.toColor(null!=(s=r[0])?s:{string:"red"})}}}),x("textcolor","{:value}{content:auto*}",{applyStyle:(t,r,a)=>{var n,s;return{verbatimColor:null!=(n=le(r[0]))?n:void 0,color:a.toColor(null!=(s=r[0])?s:{string:"red"})}}}),x("boxed","{content:math}",{createAtom:t=>new oN(g(m({},t),{body:L(t.args[0]),framecolor:{string:"black"}}))}),x("colorbox","{:value}{:text*}",{applyStyle:(t,r,a)=>{var n,s;return{verbatimBackgroundColor:null!=(n=le(r[0]))?n:void 0,backgroundColor:a.toBackgroundColor(null!=(s=r[0])?s:{string:"yellow"})}}}),x("fcolorbox","{frame-color:value}{background-color:value}{content:text}",{applyMode:"text",createAtom:t=>{var r,a;return new oN(g(m({},t),{body:L(t.args[2]),framecolor:null!=(r=t.args[0])?r:{string:"blue"},backgroundcolor:null!=(a=t.args[1])?a:{string:"yellow"}}))},serialize:(t,r)=>{var a,n;return r.skipStyles?t.bodyToLatex(g(m({},r),{defaultMode:"text"})):O(t.command,null!=(a=le(t.framecolor))?a:"",null!=(n=le(t.backgroundcolor))?n:"",t.bodyToLatex(g(m({},r),{defaultMode:"text"})))}}),x("bbox","[:bbox]{body:auto}",{createAtom:t=>{var r;let a=t.args[0],n=L(t.args[1]);return new oN(a?g(m({},t),{body:n,padding:a.padding,border:a.border,backgroundcolor:null!=(r=a.backgroundcolor)?r:void 0}):g(m({},t),{body:n}))},serialize:(t,r)=>{var a,n;if(r.skipStyles)return t.bodyToLatex(r);let s=t.command;if(Number.isFinite(t.padding)||void 0!==t.border||void 0!==t.backgroundcolor){let r=[];t.padding&&r.push(null!=(a=le(t.padding))?a:""),t.border&&r.push(`border: ${t.border}`),t.backgroundcolor&&r.push(null!=(n=le(t.backgroundcolor))?n:""),s+=`[${r.join(",")}]`}return O(s,t.bodyToLatex(r))}}),x(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:t=>new on(g(m({},t),{body:L(t.args[0])})),render:(t,r)=>{let a=new oa({parent:r,mathstyle:t.command.slice(1)},t.style),n=on.createBox(a,t.body,{type:"lift"});return t.caret&&(n.caret=t.caret),t.bind(r,n)},serialize:(t,r)=>r.skipStyles?t.bodyToLatex(r):`{${D([t.command,t.bodyToLatex(r)])}}`}),x(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:t=>({fontSize:({"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10})[t]})}),x("fontseries","{:string}",{ifMode:"text",applyStyle:(t,r)=>{var a;return{fontSeries:null!=(a=r[0])?a:"auto"}}}),x("fontshape","{:string}",{ifMode:"text",applyStyle:(t,r)=>{var a;return{fontShape:null!=(a=r[0])?a:"auto"}}}),x("fontfamily","{:string}",{ifMode:"text",applyStyle:(t,r)=>{var a;return{fontFamily:null!=(a=r[0])?a:"roman"}}}),x("selectfont","",{ifMode:"text",applyStyle:()=>({})}),x("bf","{:rest}",{applyStyle:()=>({fontSeries:"b",fontShape:"n",fontFamily:"roman"})}),x(["boldsymbol","bm"],"{:math}",{applyMode:"math",createAtom:t=>new on(g(m({},t),{body:L(t.args[0])})),serialize:(t,r)=>`${t.command}{${t.bodyToLatex(r)}}`,render:(t,r)=>t.createBox(r,{classes:"ML__boldsymbol"})}),x("bold","{:math*}",{applyMode:"math",applyStyle:()=>({variantStyle:"bold"})}),x("bfseries","{:rest}",{applyMode:"text",applyStyle:()=>({fontSeries:"b"})}),x("mdseries","{:rest}",{applyMode:"text",applyStyle:()=>({fontSeries:"m"})}),x("upshape","{:rest}",{applyMode:"text",applyStyle:()=>({fontShape:"n"})}),x("slshape","{:rest}",{applyMode:"text",applyStyle:()=>({fontShape:"sl"})}),x("scshape","{:rest}",{applyMode:"text",applyStyle:()=>({fontShape:"sc"})}),x("textbf","{:text*}",{applyMode:"text",applyStyle:()=>({fontSeries:"b"})}),x("textmd","{:text*}",{applyMode:"text",applyStyle:()=>({fontSeries:"m"})}),x("textup","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"n"})}),x("textnormal","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"n",fontSeries:"m"})}),x("textsl","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"sl"})}),x("textit","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"it"})}),x("textsc","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"sc"})}),x("textrm","{:text*}",{applyMode:"text",applyStyle:()=>({fontFamily:"roman"})}),x("textsf","{:text*}",{applyMode:"text",applyStyle:()=>({fontFamily:"sans-serif"})}),x("texttt","{:text*}",{applyMode:"text",applyStyle:()=>({fontFamily:"monospace"})}),x("mathbf","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"normal",variantStyle:"bold"})}),x("mathit","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"main",variantStyle:"italic"})}),x("mathnormal","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"normal",variantStyle:"italic"})}),x("mathbfit","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"main",variantStyle:"bolditalic"})}),x("mathrm","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"normal",variantStyle:"up"})}),x("mathsf","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"sans-serif",variantStyle:"up"})}),x("mathtt","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"monospace",variantStyle:"up"})}),x("it","{:rest}",{applyStyle:()=>({fontSeries:"m",fontShape:"it",fontFamily:"roman",variantStyle:"italic"})}),x("rmfamily","",{applyStyle:()=>({fontFamily:"roman"})}),x("sffamily","",{applyStyle:()=>({fontFamily:"sans-serif"})}),x("ttfamily","",{applyStyle:()=>({fontFamily:"monospace"})}),x(["Bbb","mathbb"],"{:math*}",{applyStyle:()=>({variant:"double-struck",variantStyle:"up"})}),x(["frak","mathfrak"],"{:math*}",{applyStyle:()=>({variant:"fraktur",variantStyle:"up"})}),x("mathcal","{:math*}",{applyStyle:()=>({variant:"calligraphic",variantStyle:"up"})}),x("mathscr","{:math*}",{applyStyle:()=>({variant:"script",variantStyle:"up"})}),x("mbox","{:text}",{ifMode:"math",createAtom:t=>new on(g(m({},t),{type:"mord",body:L(t.args[0]),mode:"math"})),serialize:(t,r)=>O("\\mbox",t.bodyToLatex(g(m({},r),{defaultMode:"text"})))}),x("text","{:text}",{ifMode:"math",applyMode:"text"}),x(["class","htmlClass"],"{name:string}{content:auto}",{createAtom:t=>new on(g(m({},t),{body:L(t.args[1])})),serialize:(t,r)=>!t.args[0]||r.skipStyles?t.bodyToLatex(r):`${t.command}{${t.args[0]}}{${t.bodyToLatex(r)}}`,render:(t,r)=>{var a;return t.createBox(r,{classes:null!=(a=t.args[0])?a:""})}}),x(["cssId","htmlId"],"{id:string}{content:auto}",{createAtom:t=>new on(g(m({},t),{body:L(t.args[1])})),serialize:(t,r)=>{var a;return!(null!=(a=t.args)&&a[0])||r.skipStyles?t.bodyToLatex(r):`${t.command}{${t.args[0]}}{${t.bodyToLatex(r)}}`},render:(t,r)=>{var a;let n=t.createBox(r);return n.cssId=null!=(a=t.args[0])?a:"",n}}),x("htmlData","{data:string}{content:auto}",{createAtom:t=>new on(g(m({},t),{body:L(t.args[1])})),serialize:(t,r)=>{var a;return!(null!=(a=t.args)&&a[0])||r.skipStyles?t.bodyToLatex(r):`\\htmlData{${t.args[0]}}{${t.bodyToLatex(r)}}`},render:(t,r)=>{var a;let n=t.createBox(r);return n.htmlData=null!=(a=t.args[0])?a:"",n}}),x(["style","htmlStyle"],"{data:string}{content:auto}",{createAtom:t=>new on(g(m({},t),{body:L(t.args[1])})),serialize:(t,r)=>{var a;return!(null!=(a=t.args)&&a[0])||r.skipStyles?t.bodyToLatex(r):`${t.command}{${t.args[0]}}{${t.bodyToLatex(r)}}`},render:(t,r)=>{var a;let n=t.createBox(r);return n.htmlStyle=null!=(a=t.args[0])?a:"",n}}),x("em","{:rest}",{createAtom:t=>new on(g(m({},t),{body:L(t.args[0])})),serialize:(t,r)=>r.skipStyles?t.bodyToLatex(r):`{\\em ${t.bodyToLatex(r)}}`,render:(t,r)=>t.createBox(r,{classes:"ML__emph",boxType:"lift"})}),x("emph","{:auto}",{createAtom:t=>new on(g(m({},t),{body:L(t.args[1])})),serialize:(t,r)=>r.skipStyles?t.bodyToLatex(r):`\\emph{${t.bodyToLatex(r)}}`,render:(t,r)=>t.createBox(r,{classes:"ML__emph",boxType:"lift"})});var nH={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};function pl(t,r){var a,n,s,l,c,d;let h={};"string"==typeof r.color&&(h.verbatimColor=r.color,h.color=null!=(a=t.colorMap(r.color))?a:"none"),"string"==typeof r.backgroundColor&&(h.verbatimBackgroundColor=r.backgroundColor,h.backgroundColor=null!=(n=t.backgroundColorMap(r.backgroundColor))?n:"none"),"string"==typeof r.fontFamily&&(h.fontFamily=r.fontFamily),"string"==typeof r.series&&(h.fontSeries=r.series),"string"==typeof r.fontSeries&&(h.fontSeries=r.fontSeries.toLowerCase()),h.fontSeries&&(h.fontSeries=null!=(s=({bold:"b",medium:"m",normal:"m"})[h.fontSeries])?s:h.fontSeries),"string"==typeof r.shape&&(h.fontShape=r.shape),"string"==typeof r.fontShape&&(h.fontShape=r.fontShape.toLowerCase()),h.fontShape&&(h.fontShape=null!=(l=({italic:"it",up:"n",upright:"n",normal:"n"})[h.fontShape])?l:h.fontShape);let p=null!=(c=r.size)?c:r.fontSize;return"number"==typeof p?h.fontSize=Math.max(1,Math.min(10,p)):"string"==typeof p&&(h.fontSize=null!=(d=({size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10})[p.toLowerCase()])?d:({tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10})[p]),h}function hl(t){var r,a,n,s,l,c;if("text"===ba(t,t.position)){let[r,a]=G(t.selection),n=!1;for(;!n&&r>0;){let a=t.at(r);"text"===a.mode&&A.test(a.value)?r-=1:n=!0}for(n=!1;!n&&a<=t.lastOffset;){let r=t.at(a);"text"===r.mode&&A.test(r.value)?a+=1:n=!0}if(n&&(a-=1),r>=a)return t.setSelection(a-1,a),!0;t.setSelection(r,a)}else{let d=t.at(t.position);if(d.isDigit()){let[n,s]=G(t.selection);for(;null!=(r=t.at(n))&&r.isDigit();)n-=1;for(;null!=(a=t.at(s))&&a.isDigit();)s+=1;t.setSelection(n,s-1)}else if(d.style.variant||d.style.variantStyle){let[r,a]=G(t.selection),h=null==(n=t.at(r))?void 0:n.style;for(;h&&h.variant===d.style.variant&&h.variantStyle===d.style.variantStyle;)r-=1,h=null==(s=t.at(r))?void 0:s.style;for(h=null==(l=t.at(a))?void 0:l.style;h&&h.variant===d.style.variant&&h.variantStyle===d.style.variantStyle;)a+=1,h=null==(c=t.at(a))?void 0:c.style;t.setSelection(r,a-1)}else t.setSelection(t.offsetOf(d.firstSibling),t.offsetOf(d.lastSibling))}return!0}x(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:t=>{var r;return new oY(g(m({},t),{delim:null!=(r=t.args[0])?r:".",size:nH[t.command].size,delimType:nH[t.command].mclass}))}}),x(["hspace","hspace*"],"{width:value}",{createAtom:t=>{var r;return new o5(g(m({},t),{width:null!=(r=t.args[0])?r:{dimension:0}}))}}),x(["mkern","kern","mskip","hskip","mspace"],"{width:value}",{createAtom:t=>{var r;return new o5(g(m({},t),{width:null!=(r=t.args[0])?r:{dimension:0}}))}}),x("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:t=>new on(t),render:(t,r)=>{let a=0,n=r.mathstyle.id;(5===n||4===n)&&(a=1),(3===n||2===n)&&(a=2),(1===n||0===n)&&(a=3);let s=L(t.args[a]);return on.createBox(r,s)},serialize:(t,r)=>`\\mathchoice{${on.serialize(t.args[0],r)}}{${on.serialize(t.args[1],r)}}{${on.serialize(t.args[2],r)}}{${on.serialize(t.args[3],r)}}`}),x("mathop","{:auto}",{createAtom:t=>new on(g(m({},t),{type:"mop",body:L(t.args[0]),limits:"over-under",isFunction:!0,captureSelection:!0})),render:(t,r)=>{var a;let n=on.createBox(r,t.body);if(t.superscript||t.subscript){let s=null!=(a=t.subsupPlacement)?a:"auto";n="over-under"===s||"auto"===s&&r.isDisplayStyle?t.attachLimits(r,{base:n}):t.attachSupsub(r,{base:n})}return new a5(t.bind(r,n),{type:"op",isSelected:t.isSelected,classes:"op-group"})},serialize:(t,r)=>{let a=[O(t.command,t.bodyToLatex(r))];return t.explicitSubsupPlacement&&("over-under"===t.subsupPlacement&&a.push("\\limits"),"adjacent"===t.subsupPlacement&&a.push("\\nolimits"),"auto"===t.subsupPlacement&&a.push("\\displaylimits")),a.push(t.supsubToLatex(r)),D(a)}}),x(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:t=>new on(g(m({},t),{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[t.command],body:L(t.args[0]),captureSelection:!0}))}),x(["operatorname","operatorname*"],"{operator:math}",{createAtom:t=>{let r=L(t.args[0]).map(t=>{var r;return"first"===t.type||(t.type="mord",t.value=null!=(r=({"∗":"*","−":"-"})[t.value])?r:t.value,t.isFunction=!1,t.style.variant||t.style.variantStyle||(t.style.variant="main",t.style.variantStyle="up")),t});return new on(g(m({},t),{type:"mop",body:r,isFunction:!0,limits:"\\operatorname"===t.command?"adjacent":"over-under"}))},render:(t,r)=>{var a;let n=on.createBox(r,t.body);if(t.superscript||t.subscript){let s=null!=(a=t.subsupPlacement)?a:"auto";n="over-under"===s||"auto"===s&&r.isDisplayStyle?t.attachLimits(r,{base:n}):t.attachSupsub(r,{base:n})}return new a5(t.bind(r,n),{type:"op",isSelected:t.isSelected,classes:"op-group"})},serialize:(t,r)=>{let a=[O(t.command,t.bodyToLatex(r))];return t.explicitSubsupPlacement&&("over-under"===t.subsupPlacement&&a.push("\\limits"),"adjacent"===t.subsupPlacement&&a.push("\\nolimits"),"auto"===t.subsupPlacement&&a.push("\\displaylimits")),a.push(t.supsubToLatex(r)),D(a)}}),x(["char","unicode"],"{charcode:value}",{createAtom:t=>new on(g(m({},t),{type:"text"===t.mode?"text":"mord"})),serialize:t=>{var r;return`${t.command}${le(null!=(r=t.args[0])?r:{number:10067,base:"hexadecimal"})}`},render:(t,r)=>{let a=r.evaluate(t.args[0]);return a&&"number"in a||(a={number:10067,base:"hexadecimal"}),t.value=String.fromCodePoint(a.number),t.createBox(r)}}),x("rule","[raise:value]{width:value}{thickness:value}",{createAtom:t=>new on(t),render:(t,r)=>{var a,n,s;let l=new oa({parent:r,mathstyle:"textstyle"},t.style),c=l.toEm(null!=(a=t.args[0])?a:{dimension:0}),d=l.toEm(null!=(n=t.args[1])?n:{dimension:10}),h=l.toEm(null!=(s=t.args[2])?s:{dimension:10}),p=new a5(null,{classes:"rule",type:"ord",width:d,height:h+c,depth:-c});return p.setStyle("border-right-width",d,"em"),p.setStyle("border-top-width",h,"em"),p.setStyle("border-color",t.style.color),p.setStyle("vertical-align",c,"em"),t.isSelected&&p.setStyle("opacity","50%"),t.bind(l,p),t.caret&&(p.caret=t.caret),p.wrap(r)},serialize:t=>`\\rule${t.args[0]?`[${le(t.args[0])}]`:""}{${le(t.args[1])}}{${le(t.args[2])}}`}),x(["overline","underline"],"{:auto}",{createAtom:t=>new on(g(m({},t),{body:L(t.args[0])})),render:(t,r)=>{let a,n=t.command.substring(1),s=new oa({parent:r,mathstyle:"cramp"},t.style),l=on.createBox(s,t.body);if(!l)return null;let c=s.metrics.defaultRuleThickness/s.scalingFactor,d=new a5(null,{classes:n+"-line"});return d.height=c,d.maxFontSize=1.125*c*s.scalingFactor,a=new a7("overline"===n?{shift:0,children:[{box:l},3*c,{box:d},c]}:{top:l.height,children:[c,{box:d},3*c,{box:l}]}),t.caret&&(a.caret=t.caret),new a5(a,{classes:n,type:"ignore"})}}),x("overset","{:auto}{base:auto}",{createAtom:t=>{let r=L(t.args[1]);return new o6(g(m({},t),{above:L(t.args[0]),body:r,skipBoundary:!1,boxType:_r(r)}))},serialize:(t,r)=>O(t.command,t.aboveToLatex(r),t.bodyToLatex(r))}),x("underset","{:auto}{base:auto}",{createAtom:t=>{let r=L(t.args[1]);return new o6(g(m({},t),{below:L(t.args[0]),body:r,skipBoundary:!1,boxType:_r(r)}))},serialize:(t,r)=>O(t.command,t.belowToLatex(r),t.bodyToLatex(r))}),x("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:t=>{let r=L(t.args[2]);return new o6(g(m({},t),{above:L(t.args[0]),below:L(t.args[1]),body:r,skipBoundary:!1,boxType:_r(r)}))},serialize:(t,r)=>O(t.command,t.belowToLatex(r),t.bodyToLatex(r))}),x(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:t=>new o6(g(m({},t),{body:L(t.args[2]),above:L(t.args[1]),below:L(t.args[0]),skipBoundary:!1,boxType:"\\stackrel"===t.command?"rel":"bin"})),serialize:(t,r)=>O(t.command,t.aboveToLatex(r),t.bodyToLatex(r))}),x("smash","[:string]{:auto}",{createAtom:t=>{var r,a,n,s;return new o8(g(m({},t),{body:L(t.args[1]),smashHeight:null==(a=null==(r=t.args[0])?void 0:r.includes("t"))||a,smashDepth:null==(s=null==(n=t.args[0])?void 0:n.includes("b"))||s}))}}),x(["vphantom"],"{:auto}",{createAtom:t=>new o8(g(m({},t),{body:L(t.args[0]),isInvisible:!0,smashWidth:!0}))}),x(["hphantom"],"{:auto}",{createAtom:t=>new o8(g(m({},t),{body:L(t.args[0]),isInvisible:!0,smashHeight:!0,smashDepth:!0}))}),x(["phantom"],"{:auto}",{createAtom:t=>new o8(g(m({},t),{body:L(t.args[0]),isInvisible:!0}))}),x("not","{:math}",{createAtom:t=>{let r=L(t.args[0]);return new on(0===r.length?g(m({},t),{type:"mrel",value:""}):g(m({},t),{body:[new o3(g(m({},t),{body:"",align:"right"})),...r],captureSelection:!0}))},serialize:(t,r)=>{let a=t.args[0],n=a&&"object"==typeof a&&"group"in a;return""!==t.value?n?`\\not{${on.serialize(a.group,r)}}`:`\\not${on.serialize(a,r)}`:n?"\\not{}":"\\not"},render:(t,r)=>{if(t.value)return t.createBox(r);let a=t.args[0]&&"object"==typeof t.args[0]&&"group"in t.args[0]?"ord":_r(L(t.args[0])),n=on.createBox(r,t.body,{type:a});return t.caret&&(n.caret=t.caret),t.bind(r,n)}}),x(["ne","neq"],"",{createAtom:t=>new on(g(m({},t),{type:"mrel",body:[new o3(g(m({},t),{body:"",align:"right",boxType:"rel"})),new on(g(m({},t),{value:"="}))],captureSelection:!0})),serialize:t=>t.command}),x("rlap","{:auto}",{createAtom:t=>new o3(g(m({},t),{body:L(t.args[0]),align:"right"}))}),x("llap","{:auto}",{createAtom:t=>new o3(g(m({},t),{body:L(t.args[0]),align:"left"}))}),x("mathrlap","{:math}",{createAtom:t=>new o3(g(m({},t),{body:L(t.args[0]),align:"left"}))}),x("mathllap","{:math}",{createAtom:t=>new o3(g(m({},t),{body:L(t.args[0]),align:"left"}))}),x("raisebox","{:value}{:text}",{createAtom:t=>{var r;return new oN(g(m({},t),{body:L(t.args[1]),padding:{dimension:0},offset:null!=(r=t.args[0])?r:{dimension:0}}))},serialize:(t,r)=>{var a;return O("\\raisebox",null!=(a=le(t.offset))?a:"0pt",t.bodyToLatex(r))}}),x("raise","{:value}{:auto}",{createAtom:t=>{var r;return new oN(g(m({},t),{body:L(t.args[1]),padding:{dimension:0},offset:null!=(r=t.args[0])?r:{dimension:0}}))},serialize:(t,r)=>{var a;return O("\\raise",null!=(a=le(t.offset))?a:"0pt",t.bodyToLatex(r))}}),x("lower","{:value}{:auto}",{createAtom:t=>{var r;return new oN(g(m({},t),{body:L(t.args[1]),padding:{dimension:0},offset:null!=(r=Xe(t.args[0],-1))?r:{dimension:0}}))},serialize:(t,r)=>{var a,n;return O("\\lower",null!=(n=le(Xe(null!=(a=t.offset)?a:{dimension:0},-1)))?n:"0pt",t.bodyToLatex(r))}}),de("0123456789/@.?!"),Va(65,90),Va(97,122),de([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]),de([["\\sharp",9839],["\\flat",9837],["\\natural",9838],["\\#",35],["\\&",38],["\\clubsuit",9827],["\\heartsuit",9825],["\\spadesuit",9824],["\\diamondsuit",9826],["\\parallelogram",9649]]),de([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\Q",81,"mord","double-struck"],["\\C",67,"mord","double-struck"],["\\P",80,"mord","double-struck"],["\\pounds",163],["\\euro",8364]]),de([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel"),de([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]),de([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\twoheadrightarrowtail",10518],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nleftarrow",8602],["\\nrightarrow",8603],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\nvrightarrow",8696],["\\nvtwoheadrightarrow",10496],["\\nvrightarrowtail",10516],["\\nvtwoheadrightarrowtail",10519],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams"),de([["+",43],["-",8722],["−",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin"),de([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams"),de([["\\surd",8730],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\emptyset",8709]]),de([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",8869],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel"),de([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams"),de([["\\wp",8472],["\\aleph",8501]]),de([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams"),de([["\\ ",160],["~",160]],"space"),x(["!",",",":",";","enskip","enspace","quad","qquad"],"",{createAtom:t=>new o5(t)}),x("space","",{createAtom:t=>new o5(t)}),de([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct"),de([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner"),de([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]),ne({undo:t=>(t.undo(),!0),redo:t=>(t.redo(),!0),scrollIntoView:t=>(t.scrollIntoView(),!0),scrollToStart:t=>(t.field.scroll(0,0),!0),scrollToEnd:t=>{let r=t.field.getBoundingClientRect();return t.field.scroll(r.left-window.scrollX,0),!0},toggleKeystrokeCaption:function(t){return(t.keystrokeCaptionVisible=!t.keystrokeCaptionVisible,t.keystrokeCaptionVisible)?Y0().innerHTML="":Br("mathlive-keystroke-caption-panel").style.visibility="hidden",!1},plonk:t=>(t.model.announce("plonk"),!0),switchMode:(t,r,a,n)=>(t.switchMode(r,a,n),!0),insert:(t,r,a)=>t.insert(r,a),typedText:(t,r,a)=>(Vo(t,r,a),!0),insertDecimalSeparator:t=>{let r=t.model;return"math"===r.mode&&","===window.MathfieldElement.decimalSeparator&&r.at(Math.max(r.position,r.anchor)).isDigit()?(t.insert("{,}",{format:"latex"}),t.snapshot("insert-mord")):t.insert("."),!0},commit:t=>{var r;return N(t.model,{inputType:"insertLineBreak"})&&(null==(r=t.host)||r.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),K(t.model,{inputType:"insertLineBreak"})),!0},insertPrompt:(t,r,a)=>{let n=t.getPrompts(),s="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36),l=0;for(;n.includes(s)&&l<100;){if(99===l)return console.error("could not find a unique ID after 100 tries"),!1;s="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36),l++}return t.insert(`\\placeholder[${null!=r?r:s}]{}`,a),!0}}),ne({copyToClipboard:t=>(t.focus(),t.model.selectionIsCollapsed&&t.select(),"queryCommandSupported"in document&&document.queryCommandSupported("copy")?document.execCommand("copy"):t.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1)},{target:"mathfield"}),ne({cutToClipboard:t=>(t.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("cut")?document.execCommand("cut"):t.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:t=>(t.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("paste")?document.execCommand("paste"):navigator.clipboard.readText().then(r=>{r&&N(t.model,{inputType:"insertFromPaste",data:r})?(t.stopCoalescingUndo(),t.stopRecording(),t.insert(r,{mode:t.model.mode})&&(dr(t),t.startRecording(),t.snapshot("paste"),K(t.model,{inputType:"insertFromPaste"}),U(t))):t.model.announce("plonk"),t.startRecording()}),!0)},{target:"mathfield",canUndo:!0,changeContent:!0,changeSelection:!0}),ne({applyStyle:function(t,r){t.flushInlineShortcutBuffer(),t.stopCoalescingUndo();let a=pl(t,r),{model:n}=t;return n.selectionIsCollapsed?(t.style.fontSeries&&a.fontSeries===t.style.fontSeries&&(a.fontSeries="auto"),a.fontShape&&a.fontShape===t.style.fontShape&&(a.fontShape="auto"),a.color&&a.color===t.style.color&&(a.color="none"),a.backgroundColor&&a.backgroundColor===t.style.backgroundColor&&(a.backgroundColor="none"),a.fontSize&&a.fontSize===t.style.fontSize&&(a.fontSize="auto"),t.style=m(m({},t.style),a)):t.model.deferNotifications({content:!0,type:"insertText"},()=>{n.selection.ranges.forEach(t=>No(n,t,a,{operation:"toggle"})),t.snapshot("style-change")}),!0}},{target:"mathfield",canUndo:!0,changeContent:!0}),ne({selectGroup:t=>{let r=hl(t);return r||t.announce("plonk"),r},selectAll:t=>t.setSelection(0,t.lastOffset),extendSelectionForward:t=>qe(t,"forward",{extend:!0}),extendSelectionBackward:t=>qe(t,"backward",{extend:!0}),extendToNextWord:t=>fr(t,"forward",{extend:!0}),extendToPreviousWord:t=>fr(t,"backward",{extend:!0}),extendSelectionUpward:t=>qe(t,"upward",{extend:!0}),extendSelectionDownward:t=>qe(t,"downward",{extend:!0}),extendToNextBoundary:t=>fr(t,"forward",{extend:!0}),extendToPreviousBoundary:t=>fr(t,"backward",{extend:!0}),extendToGroupStart:t=>{let r=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).firstSibling));return r||t.announce("plonk"),r},extendToGroupEnd:t=>{let r=t.setSelection(t.anchor,t.offsetOf(t.at(t.position).lastSibling));return r||t.announce("plonk"),r},extendToMathFieldStart:t=>{let r=t.setSelection(t.anchor,0);return r||t.announce("plonk"),r},extendToMathFieldEnd:t=>{let r=t.setSelection(t.anchor,t.lastOffset);return r||t.announce("plonk"),r}},{target:"model",changeSelection:!0});var nW=null,nU=0;function om(t){return t instanceof PointerEvent}function Ur(t,r,a,n){var s,l;let c=null==(s=t.fieldContent)?void 0:s.getBoundingClientRect();if(!c)return 0;if(r>c.right||a>c.bottom+8)return t.model.lastOffset;if(r<c.left||a<c.top-8)return 0;(n=null!=n?n:{}).bias=null!=(l=n.bias)?l:0;let d=function(t,r,a){let[,n]=function nm(t,r,a,n,s){if(!a.id)return[1/0,null];if(r.has(a.id))return r.get(a.id);let l=sr(t,a);if(!l)return[1/0,null];let c=[1/0,null];if(a.hasChildren&&!a.captureSelection&&n>=l.left&&n<=l.right)for(let l of a.children){let a=nm(t,r,l,n,s);a[0]<=c[0]&&(c=a)}return c[1]||(c=[function(t,r,a){if(t>=a.left&&t<=a.right&&r>=a.top&&r<=a.bottom)return 0;let n=t-(a.left+a.right)/2,s=r-(a.top+a.bottom)/2;return n*n+s*s}(n,s,l),a]),r.set(a.id,c),c}(t,new Map,t.model.root,r,a);return n}(t,r,a),h=[],p=d;for(;p;)h.unshift(p),p=p.parent;for(let t of h)if(t.captureSelection){d=t;break}let y=t.model.offsetOf(d);if(y<0)return -1;if(d.leftSibling){if(0===n.bias&&"placeholder"!==d.type){let a=sr(t,d);a&&r<(a.left+a.right)/2&&(y=t.model.offsetOf(d.leftSibling))}else n.bias<0&&(y=t.model.offsetOf(d.leftSibling))}return y}function Sa(t){if(t){for(let r=0;t[r];r++){let a=t[r];if(a instanceof oI&&"("===a.leftDelim){let n=0,s=0,l=0;for(let t=0;a.body[t];t++)"genfrac"===a.body[t].type&&(n++,s=t),l++;0===l&&1===n&&(t[r]=a.body[s])}}for(let r of t){for(let t of r.branches)if(!r.hasEmptyBranch(t)){Sa(r.branch(t));let a=function(t){if(!t||(t[0].type,t.length>1))return null;let r=t[0];return r instanceof oI&&"("===r.leftDelim&&")"===r.rightDelim?r.removeBranch("body"):null}(r.branch(t));a&&r.setChildren(a,t)}if(r instanceof oO)for(let t of r.cells)Sa(t)}}}function am(t){return!!t.isDigit()||!!(t.type&&/^(mord|surd|msubsup|leftright|mop|mclose)$/.test(t.type))&&!(t.isExtensibleSymbol||t.isFunction)}new class extends oh{constructor(){super("math")}onPaste(t,r){if(!r||!N(t.model,{data:"string"==typeof r?r:null,dataTransfer:"string"==typeof r?null:r,inputType:"insertFromPaste"}))return!1;let a="",n="auto",s="string"!=typeof r?r.getData("application/json+mathlive"):"";if(s)try{let r=JSON.parse(s);if(r&&Array.isArray(r)){t.snapshot();let a=Qe(r),{model:n}=t;n.selectionIsCollapsed||n.deleteAtoms(G(n.selection));let s=n.at(n.position);if(s.parent instanceof oO){s.parentBranch;let t=[],r=[];for(let n of("first"===a[0].type&&a.shift(),"first"===a[a.length-1].type&&a.pop(),a))"first"===n.type&&r.length>0?(t.push(r),r=[n]):r.push(n);r.length>0&&t.push(r);let n=Number(s.parentBranch[0]),l=Number(s.parentBranch[1]),c=s.parent.maxColumns;for(;s.parent.colCount-l<t.length&&s.parent.colCount<c;)s.parent.addColumn();s.parent.addChildrenAfter(t[0],s);for(let r=1;r<t.length;r++)++l>=c&&(l=0,s.parent.addRowAfter(n),n++),s.parent.setCell(n,l,t[r])}else s.parent.addChildrenAfter(a.filter(t=>"first"!==t.type),s);return n.position=n.offsetOf(a[a.length-1]),K(n,{inputType:"insertFromPaste"}),U(t),!0}}catch(t){}if((s="string"!=typeof r?r.getData("application/json"):"")&&window.MathfieldElement.computeEngine)try{let t=JSON.parse(s);if("object"==typeof t&&"latex"in t&&t.latex&&(a=t.latex),!a){let r=window.MathfieldElement.computeEngine.box(t);r&&!r.has("Error")&&(a=r.latex)}a||(n="latex")}catch(t){}if(!a&&"string"!=typeof r&&(a=r.getData("application/x-latex"))&&(n="latex"),a||(a="string"==typeof r?r:r.getData("text/plain")),a){let r;return[r,a]=Zn(a),"auto"===n&&r&&(n="latex"),t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,a,{format:n})&&(t.startRecording(),t.snapshot("paste"),U(t)),t.startRecording(),!0}return!1}insert(t,r,a){var n,s;let l="string"==typeof r?r:null!=(s=null==(n=window.MathfieldElement.computeEngine)?void 0:n.box(r).latex)?s:"";if(!a.silenceNotifications&&!N(t,{data:l,inputType:"insertText"}))return!1;a.insertionMode||(a.insertionMode="replaceSelection"),a.selectionMode||(a.selectionMode="placeholder"),a.format||(a.format="auto");let{silenceNotifications:c}=t;a.silenceNotifications&&(t.silenceNotifications=!0);let d=t.silenceNotifications;t.silenceNotifications=!0;let h={};if(h[0]="replaceAll"===a.insertionMode?"":t.getValue(t.selection,"latex-unstyled"),h["?"]="\\placeholder{}",h["@"]=h["?"],"replaceSelection"!==a.insertionMode||t.selectionIsCollapsed?"replaceAll"===a.insertionMode?(t.root.setChildren([],"body"),t.position=0):"insertBefore"===a.insertionMode?t.collapseSelection("backward"):"insertAfter"===a.insertionMode&&t.collapseSelection("forward"):t.deleteAtoms(G(t.selection)),t.at(t.position).isLastSibling||"placeholder"!==t.at(t.position+1).type?"placeholder"===t.at(t.position).type&&t.deleteAtoms([t.position-1,t.position]):t.deleteAtoms([t.position,t.position+1]),h[0])h["@"]=h[0];else if("string"==typeof r&&/(^|[^\\])#@/.test(r)){let r=function(t){let r=t.at(t.position);if("text"===r.mode){for(;!r.isFirstSibling&&"text"===r.mode;)r=r.leftSibling;return t.offsetOf(r)}let a=r,n=!1;if("mclose"===r.type){let t=oS[r.value];for(;!r.isFirstSibling&&!("mopen"===r.type&&r.value===t);)r=r.leftSibling;r.isFirstSibling||(r=r.leftSibling),n=!0}else"leftright"===r.type&&(r=r.leftSibling,n=!0);if(n)for(;!r.isFirstSibling&&(r.isFunction||am(r));)r=r.leftSibling;else{let t=[];for(;!r.isFirstSibling&&(am(r)||t.length>0);)"mclose"===r.type&&t.unshift(r.value),"mopen"===r.type&&t.length>0&&r.value===oS[t[0]]&&t.shift(),r=r.leftSibling}return a===r?-1:t.offsetOf(r)}(t);r>=0&&(h["@"]=t.getValue(r,t.position,"latex-unstyled"),t.deleteAtoms([r,t.position]))}h[0]||(h[0]=h["?"]);let p=!1,[y,v]=function(t,r,a,n){var s;let l,c=[];if("string"!=typeof r||"math-json"===n.format){let a=window.MathfieldElement.computeEngine;if(!a)return["math-json",[]];[l,r]=["latex",a.box(r).latex],c=oe(r,{context:t.mathfield.context})}else"string"==typeof r&&"ascii-math"===n.format?([l,r]=Cr(r,{format:"ascii-math",inlineShortcuts:t.mathfield.options.inlineShortcuts}),c=oe(r,{context:t.mathfield.context}),"latex"!==l&&t.mathfield.options.removeExtraneousParentheses&&Sa(c)):("auto"===n.format||null!=(s=n.format)&&s.startsWith("latex"))&&("auto"===n.format&&([l,r]=Cr(r,{format:"auto",inlineShortcuts:t.mathfield.options.inlineShortcuts})),"latex"===n.format&&([,r]=Zn(r)),c=oe(r,{context:t.mathfield.context,args:a}),"latex"!==n.format&&t.mathfield.options.removeExtraneousParentheses&&Sa(c));return _t(c,n.style),[null!=l?l:"latex",c]}(t,r,t=>(p=!0,h[t]),a);if(!v)return!1;let{parent:k}=t.at(t.position);if("latex"!==y&&t.mathfield.options.removeExtraneousParentheses&&k instanceof oI&&"("===k.leftDelim&&k.hasEmptyBranch("body")&&1===v.length&&"genfrac"===v[0].type){let t=k.parent,r=k.parentBranch;t.removeChild(k),t.setChildren(v,r)}let w=k.hasEmptyBranch("body"),_=t.at(t.position);_.parent.addChildrenAfter(v,_),"latex"===y&&"string"==typeof r&&(null==k?void 0:k.type)==="root"&&w&&!p&&(k.verbatimLatex=r),t.silenceNotifications=d;let S=v[v.length-1];if("placeholder"===a.selectionMode){let r=v.flatMap(t=>[t,...t.children]).find(t=>"placeholder"===t.type);if(r){let a=t.offsetOf(r);t.setSelection(a-1,a),t.announce("move")}else S&&(t.position=t.offsetOf(S))}else"before"===a.selectionMode||("after"===a.selectionMode?S&&(t.position=t.offsetOf(S)):"item"===a.selectionMode&&t.setSelection(t.anchor,t.offsetOf(S)));return K(t,{data:l,inputType:"insertText"}),t.silenceNotifications=c,!0}},new class extends oh{constructor(){super("text")}onPaste(t,r){if(!r)return!1;let a="string"==typeof r?r:r.getData("text/plain");return!!(a&&N(t.model,{inputType:"insertFromPaste",data:a}))&&(t.stopCoalescingUndo(),t.stopRecording(),this.insert(t.model,a)&&(K(t.model,{inputType:"insertFromPaste"}),t.startRecording(),t.snapshot("paste"),U(t)),t.startRecording(),!0)}insert(t,r,a={}){var n,s;if(!N(t,{data:r,inputType:"insertText"}))return!1;a.insertionMode||(a.insertionMode="replaceSelection"),a.selectionMode||(a.selectionMode="placeholder"),a.format||(a.format="auto");let{silenceNotifications:l}=t;a.silenceNotifications&&(t.silenceNotifications=!0);let c=t.silenceNotifications;t.silenceNotifications=!0,"replaceSelection"!==a.insertionMode||t.selectionIsCollapsed?"replaceAll"===a.insertionMode?(t.root.setChildren([],"body"),t.position=0):"insertBefore"===a.insertionMode?t.collapseSelection("backward"):"insertAfter"===a.insertionMode&&t.collapseSelection("forward"):t.deleteAtoms(G(t.selection));let d=(n=r,s=t.mathfield.context,oe(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(/£/g,"\\textsterling "),{context:s,parseMode:"text"}));if(_t(d,a.style),!d)return!1;let h=t.at(t.position),p=h.parent.addChildrenAfter(d,h);return t.silenceNotifications=c,"before"===a.selectionMode||("item"===a.selectionMode?t.setSelection(t.anchor,t.offsetOf(p)):p&&(t.position=t.offsetOf(p))),K(t,{data:r,inputType:"insertText"}),t.silenceNotifications=l,!0}};var _a=(t,r)=>`
  <line x1="${t+20}" y1="${r+20}" 
    x2="${t>r?t+20:180}" 
    y2="${t<r?r+20:180}"/>
  <svg id="plus" viewBox="0 0 40 40" x="${t}" y="${r}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.34-3.33,3.34h-6.67v6.66c0,1.84-1.49,3.34-3.33,3.34s-3.34-1.5-3.34-3.34v-6.66h-6.66c-1.84,0-3.34-1.5-3.34-3.34s1.5-3.33,3.34-3.33h6.66v-6.67c0-1.84,1.5-3.33,3.34-3.33s3.33,1.49,3.33,3.33v6.67h6.67c1.84,0,3.33,1.49,3.33,3.33Z"/>
  </svg>`,sm=(t,r)=>`
  <line x1="${t+20}" y1="${r+20}" 
    x2="${t>r?t+20:180}" 
    y2="${t<r?r+20:180}"/>
  <svg id="minus" viewBox="0 0 40 40" x="${t}" y="${r}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.33-3.33,3.33H10c-1.84,0-3.34-1.49-3.34-3.33s1.5-3.34,3.34-3.34h20c1.84,0,3.33,1.5,3.33,3.34Z"/>
  </svg>`,Aa=(t,r,a)=>`
  <svg id="arrow" viewBox="0 0 40 40" x="${t}" y="${r}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <g transform="rotate(${a})" transform-origin="20 20">
      <path class="font" d="m17.7,7.23h4.6c.52,0,.94.42.94.94v13.82c0,.52.42.94.94.94h3.39c.83,0,1.25,1.01.66,1.6l-7.56,7.56c-.37.37-.96.37-1.32,0l-7.56-7.56c-.59-.59-.17-1.6.66-1.6h3.39c.52,0,.94-.42.94-.94v-13.82c0-.52.42-.94.94-.94Z"/>
    </g>  
  </svg>`,nX=`
<svg class="MLEP__array-buttons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
viewBox=
"-2 -2 205 205">
  <rect 
      class="MLEP__array-insert-background rows"
      x="0" 
      y="52" 
      height="144" 
      width="48" 
      rx="24"/>
      <rect 
      class="MLEP__array-insert-background columns"
      x="52" 
      y="0" 
      height="48" 
      width="144" 
      rx="24"/>
  <g data-command='"moveDown"'>
  ${Aa(104,152,0)}
  </g>
  <g data-command='"moveUp"'>
  ${Aa(104,56,180)}
  </g>
  <g data-command='"moveToNextWord"'>
  ${Aa(152,104,-90)}
  </g>
  <g data-command='"moveToPreviousWord"'>
  ${Aa(56,104,90)}
  </g>
  <g>

  <g data-command='"addColumnBefore"'>
  ${_a(56,4)}
  </g>
  <g data-command='"removeColumn"'>
  ${sm(104,4)}
  </g>
  <g data-command='"addColumnAfter"'>
  ${_a(152,4)}
  </g>
  <g data-command='"addRowBefore"'>
  ${_a(4,56)}
  </g>
  <g data-command='"removeRow"'>
  ${sm(4,104)}
  </g>
  <g data-command='"addRowAfter"'>
    ${_a(4,152)}
  </g>
</svg>`,lm=t=>`
<svg id="Bmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","Bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <path class="cls-2" d="m22,4c1.1,0,2,.9,2,2v3c0,1.66.9,3,2,3-1.1,0-2,1.34-2,3v3c0,1.1-.9,2-2,2"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,nJ={matrix:t=>`
<svg id="matrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","matrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,pmatrix:t=>`
<svg id="pmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
data-command='["setEnvironment","pmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-3.96,4.6-3.96,11.4,0,16"/>
  <path class="cls-2" d="m22,4c3.96,4.6,3.96,11.4,0,16"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,bmatrix:t=>`
<svg id="bmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4h-3v16h3"/>
  <path class="cls-2" d="m22,4h3v16h-3"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,Bmatrix:lm,vmatrix:t=>`
<svg id="vmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="4" y1="4" x2="4" y2="20"/>
  <line class="cls-2" x1="24" y1="4" x2="24" y2="20"/>
</svg>`,Vmatrix:t=>`
<svg id="Vmatrix" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="-3.5 -3 35 30" 
  data-command='["setEnvironment","Vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="6" y1="4" x2="6" y2="20"/>
  <line class="cls-2" x1="22" y1="4" x2="22" y2="20"/>
  <line class="cls-2" x1="2" y1="4" x2="2" y2="20"/>
  <line class="cls-2" x1="26" y1="4" x2="26" y2="20"/>
</svg>`},nG={cases:t=>`
<svg id="cases" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","cases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m10,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <circle cx="13" cy="8" r="1"/>
  <circle cx="13" cy="16" r="1"/>
  <circle cx="21" cy="8" r="1"/>
  <circle cx="21" cy="16" r="1"/>
</svg>`,rcases:t=>`
<svg id="rcases" class="${t}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","rcases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m18,20c1.1,0,2-.9,2-2v-3c0-1.66.9-3,2-3-1.1,0-2-1.34-2-3v-3c0-1.1-.9-2-2-2"/>
  <circle cx="15" cy="8" r="1"/>
  <circle cx="15" cy="16" r="1"/>
  <circle cx="7" cy="8" r="1"/>
  <circle cx="7" cy="16" r="1"/>
</svg>`,Bmatrix:lm};function La(){let t=document.getElementById("mathlive-environment-popover");null==t||t.classList.remove("is-visible")}function qo(t){if(!t.hasFocus())return;let r=!1;if("math"===t.model.mode){var a;let n=t.model.parentEnvironment;if(null!=n&&n.array&&(a=n.environmentName,oP.concat(o$).concat(oB).concat(oT).includes(a))){let a=t.options.environmentPopoverPolicy;r="auto"===a&&window.mathVirtualKeyboard.visible||"on"===a}}r?function(t){var r,a;let n=null==(r=t.model.parentEnvironment)?void 0:r.array;if(!n)return;let s=0;n.forEach(t=>{(!s||t.length>s)&&(s=t.length)});let l=document.getElementById("mathlive-environment-popover");l||(l=Br("mathlive-environment-popover"),Pe("environment-popover"),Pe("core"),l.setAttribute("aria-hidden","true"));let c,d=l.querySelector(".MLEP__environment-controls");d?c=d:(c=document.createElement("div"),l.innerHTML="",l.appendChild(c)),c.className="MLEP__environment-controls",c.style.display="flex",c.style.width="100%",c.style.height="100%",c.style.boxSizing="border-box",c.innerHTML=nX;let h=[],p="",y=t.model.parentEnvironment.environmentName;if(ea(y)){let t=y.replace("*","");p=nJ[t]("active");let{[t]:r}=nJ;h=Object.values(Jr(nJ,[Oa(t)])).map(t=>t("inactive"))}else if(oB.includes(y)){let t="dcases"===y?"cases":y;p=nG[t]("active");let{[t]:r}=nG;h=Object.values(Jr(nG,[Oa(t)])).map(t=>t("inactive"))}else o$.includes(y)&&(p=nJ.matrix("active"),h=Object.values(nG).map(t=>t("inactive")));let v=document.createElement("div");v.className="MLEP__environment-delimiter-controls",v.style.display="flex",v.style.flexDirection="column",v.innerHTML=`
  <div class='MLEP__array-delimiter-options'>
  ${p}
  ${h.join("")}
  </div>`,p&&c.appendChild(v),c.querySelectorAll("[data-command]").forEach(r=>{let a=r.dataset.command,n=a;try{n=JSON.parse(a)}catch(t){}r.addEventListener("mousedown",t=>t.preventDefault()),n&&r.addEventListener("click",()=>t.executeCommand(n))});let k=null==(a=t.field)?void 0:a.getBoundingClientRect();k&&(l.style.top=`${window.scrollY+(k.top-l.clientHeight-15)}px`,l.style.left=`${k.left+20}px`,l.classList.add("is-visible"))}(t):La()}var nZ=class{constructor(t,r){var a,n,s,l,c,d,h;let y,v,k,w,_,S,M;this.focusBlurInProgress=!1,this.options=m(g(m({},Oi()),{macros:Zr(),registers:m({},or)}),Ki(r)),this.eventController=new AbortController,r.eventSink&&(this.host=r.eventSink),this.element=t,t.mathfield=this,this.blurred=!0,this.keystrokeCaptionVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.style={},this.adoptStyle="left","inline-math"===this.options.defaultMode?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline"),this.dirty=!1;let C=null!=(n=null!=(a=r.value)?a:this.element.textContent)?n:"";C=C.trim();let z=el(this.options),A=new on({type:"root",mode:z,body:oe(C,{context:this.context})});this.model=new nF(this,z,A,{onSelectionDidChange:()=>this.onSelectionDidChange(),onContentWillChange:t=>this.onContentWillChange(t)}),this.smartModeSuppressed=!1,this.undoManager=new nI(this.model);let E=[];if(E.push("<span contenteditable=true aria-multiline=false part=keyboard-sink class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=0></span>"),E.push('<span part=container class=ML__container aria-hidden=true  style="visibility:hidden">'),E.push("<span part=content class=ML__content>"),E.push(Js(this)),E.push("</span>"),window.mathVirtualKeyboard&&(E.push(`<div part=virtual-keyboard-toggle class=ML__virtual-keyboard-toggle role=button ${this.hasEditableContent?"":'style="display:none;"'}data-ML__tooltip="${je("tooltip.toggle virtual keyboard")}">`),E.push('<svg style="width: 21px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg>'),E.push("</div>")),E.push("</span>"),E.push("<span class=ML__sr-only>"),E.push("<span role=status aria-live=assertive aria-atomic=true></span>"),E.push("</span>"),this.element.innerHTML=window.MathfieldElement.createHTML(E.join("")),!this.element.children){console.error("%cMathLive 0.95.0: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include `runtimeCompiler: true` in your Vue configuration. There may a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");return}this.field=this.element.querySelector("[part=content]"),this.field.addEventListener("click",t=>t.stopImmediatePropagation(),{capture:!1,signal:this.eventController.signal}),this.field.addEventListener("wheel",this,{passive:!1,signal:this.eventController.signal}),"PointerEvent"in window?this.field.addEventListener("pointerdown",this,{signal:this.eventController.signal}):this.field.addEventListener("mousedown",this,{signal:this.eventController.signal}),null==(s=this.element.querySelector("[part=virtual-keyboard-toggle]"))||s.addEventListener("click",()=>{window.mathVirtualKeyboard.visible?window.mathVirtualKeyboard.hide():(window.mathVirtualKeyboard.show({animate:!0}),window.mathVirtualKeyboard.update(et(this)))},{signal:this.eventController.signal}),this.ariaLiveText=this.element.querySelector("[role=status]"),this.keyboardDelegate=(l=this.element.querySelector(".ML__keyboard-sink"),c=this.element,d=this,y=null,v=null,k=!1,w=!1,_=!1,M=(S=new AbortController).signal,l.addEventListener("keydown",t=>{if(k||"Process"===t.key||"CapsLock"===t.code||/(Control|Meta|Alt|Shift)(Left|Right)/.test(t.code)){y=null;return}y=t,v=null,d.onKeystroke(H0(t),t)?l.textContent="":y=null},{capture:!0,signal:M}),l.addEventListener("keypress",t=>{k||(y&&v&&d.onKeystroke(H0(y),y),v=t)},{capture:!0,signal:M}),l.addEventListener("compositionstart",t=>{l.textContent="",k=!0,d.onCompositionStart(t.data)},{capture:!0,signal:M}),l.addEventListener("compositionupdate",t=>{k&&d.onCompositionUpdate(t.data)},{capture:!0,signal:M}),l.addEventListener("compositionend",t=>{l.textContent="",k&&(k=!1,d.onCompositionEnd(t.data))},{capture:!0,signal:M}),l.addEventListener("beforeinput",t=>t.stopImmediatePropagation(),{signal:M}),l.addEventListener("input",t=>{var r;if(!k&&(l.textContent="","insertCompositionText"!==t.inputType)){if("insertFromPaste"===t.inputType){t.preventDefault(),t.stopPropagation();return}d.onInput(null!=(r=t.data)?r:""),t.preventDefault(),t.stopPropagation()}},{signal:M}),l.addEventListener("paste",t=>{l.focus({preventScroll:!0}),l.textContent="",d.onPaste(t)||t.preventDefault(),t.stopImmediatePropagation()},{signal:M}),l.addEventListener("cut",t=>d.onCut(t),{capture:!0,signal:M}),l.addEventListener("copy",t=>d.onCopy(t),{capture:!0,signal:M}),l.addEventListener("blur",t=>{var r,a,n;if((null==(a=null==(r=t.relatedTarget)?void 0:r._mathfield)?void 0:a.element)===c){l.focus({preventScroll:!0}),t.preventDefault(),t.stopPropagation();return}let s=null==(n=nC.scrim)?void 0:n.state;if("open"===s||"opening"===s||t.relatedTarget===t.target.getRootNode().host){t.preventDefault(),t.stopPropagation();return}_||w||(_=!0,y=null,v=null,d.onBlur(),_=!1)},{capture:!0,signal:M}),l.addEventListener("focus",t=>{_||w||(w=!0,d.onFocus(),w=!1)},{capture:!0,signal:M}),{dispose:()=>S.abort(),cancelComposition:()=>{k&&(l.blur(),requestAnimationFrame(()=>l.focus({preventScroll:!0})))},blur:()=>{"function"==typeof l.blur&&l.blur()},focus:()=>{w||"function"!=typeof l.focus||l.focus({preventScroll:!0})},hasFocus:()=>(function(){var t;let r=document.activeElement;for(;null!=(t=null==r?void 0:r.shadowRoot)&&t.activeElement;)r=r.shadowRoot.activeElement;return r})()===l,setAriaLabel:t=>l.setAttribute("aria-label",t),setValue:t=>{var r;l.textContent=t,l.style.left="-1000px",null==(r=window.getSelection())||r.selectAllChildren(l)},moveTo:(t,r)=>{l.style.top=`${r}px`,l.style.left=`${t}px`}}),window.addEventListener("resize",this,{signal:this.eventController.signal}),document.addEventListener("scroll",this,{signal:this.eventController.signal}),window.mathVirtualKeyboard.addEventListener("virtual-keyboard-toggle",this),nf&&!p.locale.startsWith(nf.locale)&&(h=p.locale,nf=nb.find(t=>h.startsWith(t.locale))),"ready"!==n_&&document.fonts.ready.then(()=>Co(this)),t.querySelector(".ML__container").style.removeProperty("visibility"),this.undoManager.startRecording(),this.undoManager.snapshot("set-value")}connectToVirtualKeyboard(){this.connectedToVirtualKeyboard||(this.connectedToVirtualKeyboard=!0,window.addEventListener("message",this,{signal:this.eventController.signal}),window.mathVirtualKeyboard.connect(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(et(this)),qo(this))}disconnectFromVirtualKeyboard(){this.connectedToVirtualKeyboard&&(window.removeEventListener("message",this),window.mathVirtualKeyboard.disconnect(),this.connectedToVirtualKeyboard=!1,La())}get colorMap(){return t=>{var r,a,n;return null!=(n=null==(a=(r=this.options).colorMap)?void 0:a.call(r,t))?n:yr(t)}}get backgroundColorMap(){return t=>{var r,a,n,s,l,c;return null!=(c=null!=(l=null==(a=(r=this.options).backgroundColorMap)?void 0:a.call(r,t))?l:null==(s=(n=this.options).colorMap)?void 0:s.call(n,t))?c:Gr(t)}}get smartFence(){var t;return null!=(t=this.options.smartFence)&&t}get readOnly(){var t;return null!=(t=this.options.readOnly)&&t}get disabled(){var t,r;return null!=(r=null==(t=this.host)?void 0:t.disabled)&&r}get contentEditable(){var t;return(null==(t=this.host)?void 0:t.getAttribute("contenteditable"))!=="false"}get userSelect(){if(!this.host)return"";let t=getComputedStyle(this.host);return t.getPropertyValue("user-select")||t.getPropertyValue("-webkit-user-select")}get hasEditableContent(){return!this.disabled&&!!this.contentEditable&&(!this.readOnly||this.hasEditablePrompts)}get hasEditablePrompts(){return this.readOnly&&!this.disabled&&this.contentEditable&&void 0!==this.model.findAtom(t=>"prompt"===t.type&&!t.locked)}get isSelectionEditable(){if(this.disabled||!this.contentEditable)return!1;if(!this.readOnly)return!0;let t=this.model.at(this.model.anchor),r=this.model.at(this.model.position),a=on.commonAncestor(t,r);return!!((null==a?void 0:a.type)==="prompt"||null!=a&&a.parentPrompt)}get letterShapeStyle(){var t;return null!=(t=this.options.letterShapeStyle)?t:"tex"}get minFontScale(){return this.options.minFontScale}get selectionStyle(){if(this.model.selectionIsCollapsed){let t=this.model.at(this.model.selection.ranges[0][0]),r="right"===this.adoptStyle?t.rightSibling:t;if(!r)return{};if("group"===r.type){let t=r.branch("body");return!t||t.length<2?{}:"right"===this.adoptStyle?t[1].style:t[t.length-1].style}return r.style}let t=this.model.getAtoms(this.model.selection);if(0===t.length)return{};let r=m({},t[0].style);return t.forEach(t=>{for(let[a,n]of Object.entries(t.style))r[a]&&r[a]===n||(r[a]=void 0)}),r}get keybindings(){var t,r;if(this._keybindings)return this._keybindings;let[a,n]=function(t,r){let a=[],n=[];for(let s of t)try{let t=function(t,r){if(t.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(t.ifPlatform))throw Error(`Unexpected platform "${t.ifPlatform}" for keybinding ${t.key}`);if(void 0!==t.ifLayout&&(0===r.score||!t.ifLayout.includes(r.id)))return;let a=Is(t.key),n=t.ifPlatform;if(a.cmd){if(n&&"macos"!==n&&"ios"!==n)throw Error('Unexpected "cmd" modifier with platform "'+n+`"
"cmd" modifier can only be used with macOS or iOS platform.`);n||(n="ios"===Vt()?"ios":"macos"),a.win=!1,a.cmd=!1,a.meta=!0}if(a.win){if(n&&"windows"!==n)throw Error('Unexpected "win" modifier with platform "'+n+`"
"win" modifier can only be used with Windows platform.`);n="windows",a.win=!1,a.cmd=!1,a.meta=!0}if(n&&!function(t){if(ue()){let r=Vt(),a=t.startsWith("!"),n=t.endsWith(r);if(a&&!n||!a&&n)return!0}return"!other"!==t&&"other"===t}(n))return;if(/^\[.+\]$/.test(a.key))return g(m({},t),{ifPlatform:n,key:_o(a)});let s=function(t,r){var a;let n={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!t)return n;for(let[a,s]of Object.entries(r.mapping)){if(s[0]===t)return n.key=`[${a}]`,n;if(s[1]===t)return n.shift=!0,n.key=`[${a}]`,n;if(s[2]===t)return n.alt=!0,n.key=`[${a}]`,n;if(s[3]===t)return n.shift=!0,n.alt=!0,n.key=`[${a}]`,n}return n.key=null!=(a=ng[t])?a:"",n}(a.key,r);if(!s)throw Error('Invalid keybinding key "'+t.key+'"');if(s.shift&&a.shift||s.alt&&a.alt)throw Error(`The keybinding ${t.key} (${$s(t.command)}) is conflicting with the key combination ${_o(s)} using the ${r.displayName} keyboard layout`);return s.shift=s.shift||a.shift,s.alt=s.alt||a.alt,s.meta=a.meta,s.ctrl=a.ctrl,g(m({},t),{ifPlatform:n,key:_o(s)})}(s,r);if(t){let n=a.filter(r=>r.key===t.key&&r.ifMode===t.ifMode);if(n.length>0)throw Error(`Ambiguous key binding ${s.key} (${$s(s.command)}) matches ${n[0].key} (${$s(n[0].command)}) with the ${r.displayName} keyboard layout`);a.push(t)}}catch(t){t instanceof Error&&n.push(t.message)}return[a,n]}(this.options.keybindings,null!=(t=ur())?t:ny);return(null==(r=ur())?void 0:r.score)>0&&(this._keybindings=a,n.length>0&&console.error("MathLive 0.95.0: Invalid keybindings for current keyboard layout",n)),a}setOptions(t){this.options=m(m({},this.options),Ki(t)),this._keybindings=void 0,"inline-math"===this.options.defaultMode?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline"),this.options.readOnly&&this.hasFocus()&&window.mathVirtualKeyboard.visible&&this.executeCommand("hideVirtualKeyboard");let r=on.serialize([this.model.root],{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in t||this.model.getValue()!==r)&&oh.insert(this.model,r,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",silenceNotifications:!0,mode:"math"}),("value"in t||"macros"in t||"registers"in t||"colorMap"in t||"backgroundColorMap"in t||"letterShapeStyle"in t||"minFontScale"in t||"readOnly"in t||"placeholderSymbol"in t)&&U(this)}getOptions(t){return zt(this.options,t)}getOption(t){return zt(this.options,t)}handleEvent(t){var r;if(Pt(this)){if(Po(t)){if(!fi(t.origin,null!=(r=this.options.originValidator)?r:"none"))throw new DOMException(`Message from unknown origin (${t.origin}) cannot be handled`,"SecurityError");let{action:a}=t.data;if("execute-command"===a){let r=t.data.command;if("virtual-keyboard"===pr(r))return;this.executeCommand(r)}else"update-state"===a||("focus"===a?this.focus({preventScroll:!0}):"blur"===a&&this.blur());return}switch(t.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":case"pointerdown":!function(t,r){var a;t.atomBoundsCache=new Map;let n,s=!1,l="none";if(r.buttons>1)return;let c=!1,d=!1,h=r.clientX,p=r.clientY,y=Date.now(),v=t.field,k=setInterval(()=>{c?v.scroll({top:0,left:v.scrollLeft-16}):d&&v.scroll({top:0,left:v.scrollLeft+16})},32);function f(r){"PointerEvent"in window?(xo(v,"pointermove",b),xo(v,"pointerup pointercancel",f),r instanceof PointerEvent&&v.releasePointerCapture(r.pointerId)):(xo(window,"mousemove",b),xo(window,"mouseup blur",f)),s=!1,clearInterval(k),t.element.classList.remove("tracking"),r&&r.preventDefault()}function b(r){if(!t.hasFocus()){f(null);return}let a=r.clientX,s=r.clientY,l=om(r)&&"touch"===r.pointerType?20:5;if(Date.now()<y+500&&Math.abs(h-a)<l&&Math.abs(p-s)<l){r.preventDefault(),r.stopPropagation();return}let k=v.getBoundingClientRect();d=a>k.right,c=a<k.left;let w=n;om(r)&&(r.isPrimary||(w=Ur(t,r.clientX,r.clientY,{bias:0})));let _=Ur(t,a,s,{bias:a<=h?a===h?0:-1:1});w>=0&&_>=0&&(t.model.extendSelectionTo(w,_),U(t)),r.preventDefault(),r.stopPropagation()}nW&&5>Math.abs(nW.x-h)&&5>Math.abs(nW.y-p)&&Date.now()<nW.time+500?(nU+=1,nW.time=y):(nW={x:h,y:p,time:y},nU=1);let w=v.getBoundingClientRect();if(h>=w.left&&h<=w.right&&p>=w.top&&p<=w.bottom){if(t.hasFocus()||(l="none",t.focus({preventScroll:!0})),t.flushInlineShortcutBuffer(),t.smartModeSuppressed=!1,t.adoptStyle="left",(n=Ur(t,h,p,{bias:0}))>=0){if(t.element.classList.add("tracking"),r.shiftKey){let r=t.model.selectionIsCollapsed;t.model.extendSelectionTo(t.model.anchor,n),l=js(t.model)||r?"all":"selection"}else"placeholder"===t.model.at(n).type?(t.model.setSelection(n-1,n),l="selection"):(null==(a=t.model.at(n).rightSibling)?void 0:a.type)==="placeholder"?(t.model.setSelection(n,n+1),l="selection"):(t.model.position=n,l=js(t.model)?"all":"selection");t.style={},3===r.detail||nU>2?(f(r),(3===r.detail||3===nU)&&(t.model.selection={ranges:[[0,t.model.lastOffset]]},l="all")):s||(s=!0,"PointerEvent"in window?(pi(v,"pointermove",b),pi(v,"pointerup pointercancel",f),r instanceof PointerEvent&&v.setPointerCapture(r.pointerId)):(pi(window,"blur",f),pi(window,"mousemove",b),pi(window,"mouseup",f)),(2===r.detail||2===nU)&&(hl(t.model),l="all"))}}else nW=null;t.stopCoalescingUndo(),"none"!==l&&(t.model.selectionIsCollapsed&&(l="all"),U(t)),r.preventDefault()}(this,t);break;case"virtual-keyboard-toggle":this.hasFocus()&&qo(this);break;case"resize":case"scroll":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>Pt(this)&&this.onGeometryChange());break;case"wheel":this.onWheel(t);break;default:console.warn("Unexpected event type",t.type)}}}dispose(){if(!Pt(this))return;this.keyboardDelegate.dispose(),this.keyboardDelegate=void 0,this.eventController.abort(),window.mathVirtualKeyboard.removeEventListener("virtual-keyboard-toggle",this),this.disconnectFromVirtualKeyboard(),this.model.dispose();let t=this.element;delete t.mathfield,this.element=void 0,this.host=void 0,this.field=void 0,this.fieldContent=void 0,this.ariaLiveText=void 0,document.getElementById("mathlive-keystroke-caption-panel")&&(Ei("mathlive-keystroke-caption-panel"),Ne("core"),Ne("keystroke-caption")),document.getElementById("mathlive-suggestion-popover")&&(Ei("mathlive-suggestion-popover"),Ne("suggestion-popover"),Ne("core")),document.getElementById("mathlive-environment-popover")&&(Ei("mathlive-environment-popover"),Ne("environment-popover"),Ne("core"))}flushInlineShortcutBuffer(t){if(null!=t||(t={defer:!1}),!t.defer){this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=0;return}this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(t){return"virtual-keyboard"===pr(t)?(this.focus({preventScroll:!0}),window.mathVirtualKeyboard.executeCommand(t),requestAnimationFrame(()=>window.mathVirtualKeyboard.update(et(this))),!1):function(t,r){var a;if(!r)return!1;let n,s=[],l=!1,c=!1;Q(r)?(n=r[0],s=r.slice(1)):n=r;let d=nz[n=n.replace(/-\w/g,t=>t[1].toUpperCase())],h=null==d?void 0:d.target;if("model"===h){if(!t.isSelectionEditable&&null!=d&&d.changeContent)return t.model.announce("plonk"),!1;/^(delete|add)/.test(n)&&("deleteBackward"!==n&&t.flushInlineShortcutBuffer(),t.snapshot(n)),/^complete/.test(n)||Ao(t),nz[n].fn(t.model,...s),dr(t),c=!0,l=!0}else if("virtual-keyboard"===h)c=null!=(a=window.mathVirtualKeyboard.executeCommand(r))&&a,l=!0;else if(nz[n]){if(!t.isSelectionEditable&&null!=d&&d.changeContent)return t.model.announce("plonk"),!1;/^(undo|redo)/.test(n)&&t.flushInlineShortcutBuffer(),c=nz[n].fn(t,...s),l=!0}else throw Error(`Unknown command "${n}"`);return"virtual-keyboard"!==h&&(!t.model.selectionIsCollapsed||null!=d&&d.changeSelection)&&(t.flushInlineShortcutBuffer(),null!=d&&d.changeContent||t.stopCoalescingUndo(),t.style={}),c&&U(t),l}(this,t)}get errors(){return function(t,r){var a;let n=new oU(mo(t,null),null==r?void 0:r.context,{mathstyle:"displaystyle",parseMode:null!=(a=null==r?void 0:r.parseMode)?a:"math"});for(;!n.end();)n.scan();return n.errors}(this.model.getValue(),{context:this.context})}getValue(t,r,a){return this.model.getValue(t,r,a)}setValue(t,r){var a;void 0===(r=null!=r?r:{mode:"math"}).insertionMode&&(r.insertionMode="replaceAll"),(void 0===r.format||"auto"===r.format)&&(r.format="latex"),(void 0===r.mode||"auto"===r.mode)&&(r.mode=null!=(a=ba(this.model,this.model.position))?a:"math"),oh.insert(this.model,t,r)&&(U(this),this.undoManager.snapshot("set-value"))}get expression(){let t=window.MathfieldElement.computeEngine;return t?t.box(t.parse(this.model.getValue("latex-unstyled"))):(console.error("MathLive 0.95.0:  no compute engine available. Make sure the Compute Engine library is loaded."),null)}scrollIntoView(){var t;if(!this.element)return;if(this.host){if(this.options.onScrollIntoView)this.options.onScrollIntoView(this);else if(this.host.scrollIntoView({block:"nearest",inline:"nearest"}),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.container===window.document.body){let r=window.mathVirtualKeyboard.boundingRect,a=this.host.getBoundingClientRect();a.bottom>r.top&&(null==(t=window.document.scrollingElement)||t.scrollBy(0,a.bottom-r.top+8))}}this.dirty&&tt(this,{interactive:!0});let r=this.field.getBoundingClientRect(),a=null;if(this.model.selectionIsCollapsed)a=hi(this.field);else{let t=Yn(this);if(t.length>0){let n=-1/0,s=-1/0;for(let r of t)r.right>n&&(n=r.right),r.top<s&&(s=r.top);a={x:n+r.left-this.field.scrollLeft,y:s+r.top-this.field.scrollTop,height:0}}}if(this.host&&a){let t=this.host.getBoundingClientRect(),r=a.y,n=this.host.scrollTop;r<t.top?n=r-t.top+this.host.scrollTop:r>t.bottom&&(n=r-t.bottom+this.host.scrollTop+a.height),this.host.scroll({top:n,left:0})}if(a){let t=a.x-window.scrollX,n=this.field.scrollLeft;t<r.left?n=t-r.left+this.field.scrollLeft-20:t>r.right&&(n=t-r.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:n})}}insert(t,r){if("string"!=typeof t||0===t.length&&((null==r?void 0:r.insertionMode)==="insertBefore"||(null==r?void 0:r.insertionMode)==="insertAfter")||0===t.length&&this.model.selectionIsCollapsed)return!1;if(this.flushInlineShortcutBuffer(),(r=null!=r?r:{mode:"math"}).focus&&this.focus(),r.feedback&&(window.MathfieldElement.keypressVibration&&Wo()&&navigator.vibrate(3),window.MathfieldElement.playSound("keypress")),"\\\\"===t)al(this.model);else if("&"===t)sl(this.model);else{let a=this.style;this.model.selectionIsCollapsed?oh.insert(this.model,t,m({style:this.model.at(this.model.position).computedStyle},r)):oh.insert(this.model,t,r),r.resetStyle&&(this.style=a)}return this.snapshot(`insert-${this.model.at(this.model.position).type}`),U(this),r.scrollIntoView&&this.scrollIntoView(),!0}switchMode(t,r="",a=""){var n;if(this.model.mode===t||!this.hasEditableContent||!this.contentEditable||this.disabled||!(null!=(n=this.host)&&n.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))))return;let s=this.model.mode,{model:l}=this;l.deferNotifications({content:!!a||!!r,selection:!0,type:"insertText"},()=>{let n=!1;if(this.flushInlineShortcutBuffer(),this.stopCoalescingUndo(),this.smartModeSuppressed=/text|math/.test(this.model.mode)&&/text|math/.test(t),r&&"latex"!==t){let a=oe(r,{context:this.context,parseMode:t});l.collapseSelection("forward");let s=l.at(l.position);l.position=l.offsetOf(s.parent.addChildrenAfter(a,s)),n=!0}if(this.model.mode=t,"latex"===t){let t=l.selectionIsCollapsed;mr(this,"accept");let a,n=l.at(l.position);if(t)a="\\";else{let s=G(l.selection);a=this.model.getValue(s,"latex");let c=this.model.extractAtoms(s);1===c.length&&"placeholder"===c[0].type&&(a=r,t=!0),n=l.at(s[0])}let s=new o4(a);n.parent.addChildAfter(s,n),t?l.position=l.offsetOf(s.lastChild):l.setSelection(l.offsetOf(s.firstChild),l.offsetOf(s.lastChild))}else Dr(l).forEach(t=>{t.isError=!1});if(a){let t=oe(a,{context:this.context,parseMode:s});l.collapseSelection("forward");let r=l.at(l.position);l.position=l.offsetOf(r.parent.addChildrenAfter(t,r)),n=!0}return U(this),this.undoManager.snapshot("latex"===t?"insert-latex":"insert"),n}),this.model.mode=t}hasFocus(){return!this.blurred}focus(t){this.hasFocus()||(this.keyboardDelegate.focus(),this.connectToVirtualKeyboard(),this.model.announce("line")),null!=t&&t.preventScroll||this.scrollIntoView()}blur(){this.disconnectFromVirtualKeyboard(),this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]}}applyStyle(t,r={}){var a,n;let s={operation:"set",silenceNotifications:!1};Fr(r)?s.range=r:(s.range=r.range,s.silenceNotifications=null!=(a=r.silenceNotifications)&&a);let l=pl(this,t),c=null!=(n=s.operation)?n:"set";this.model.deferNotifications({content:!s.silenceNotifications,type:"insertText"},()=>{if(void 0===s.range)for(let t of this.model.selection.ranges)No(this.model,t,l,{operation:c});else No(this.model,s.range,l,{operation:c})}),U(this)}getCaretPoint(){let t=hi(this.field);return t?{x:t.x,y:t.y}:null}setCaretPoint(t,r){let a=Ur(this,t,r,{bias:0});if(a<0)return!1;let n=this.model.position;return this.model.position=a,this.model.announce("move",n),U(this),!0}getPrompt(t){return this.model.findAtom(r=>"prompt"===r.type&&r.placeholderId===t)}getPromptValue(t,r){let a=this.getPrompt(t);if(!a)return console.error(`MathLive 0.95.0: unknown prompt ${t}`),"";let n=this.model.offsetOf(a.firstChild),s=this.model.offsetOf(a.lastChild);return this.model.getValue(n,s,r)}getPrompts(t){return this.model.getAllAtoms().filter(r=>"prompt"===r.type&&(!t||!(t.id&&r.placeholderId!==t.id||t.locked&&r.locked!==t.locked||"undefined"===t.correctness&&r.correctness||t.correctness&&r.correctness!==t.correctness))).map(t=>t.placeholderId)}setPromptValue(t,r,a){if(void 0!==r){let n=this.getPrompt(t);if(!n){console.error(`MathLive 0.95.0: unknown prompt ${t}`);return}let s=this.model.getBranchRange(this.model.offsetOf(n),"body");this.model.setSelection(s),this.insert(r,g(m({},a),{insertionMode:"replaceSelection"}))}null!=a&&a.silenceNotifications&&(this.valueOnFocus=this.getValue()),U(this)}setPromptState(t,r,a){let n=this.getPrompt(t);if(!n){console.error(`MathLive 0.95.0: unknown prompt ${t}`);return}"undefined"===r?n.correctness=void 0:"string"==typeof r&&(n.correctness=r),"boolean"==typeof a&&(n.locked=a,n.captureSelection=a),U(this)}stripPromptContent(t){let r=this.model.getAllAtoms().filter(r=>"prompt"===r.type&&(!t||!(t.id&&r.placeholderId!==t.id||t.locked&&r.locked!==t.locked||"undefined"===t.correctness&&r.correctness||t.correctness&&r.correctness!==t.correctness))),a={};return r.forEach(t=>{let r=t.placeholderId;a[r]=this.getPromptValue(r),this.setPromptValue(r,"")}),a}getPromptState(t){let r=this.getPrompt(t);return r?[r.correctness,r.locked]:(console.error(`MathLive 0.95.0: unknown prompt ${t}`),[void 0,!0])}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop()}snapshot(t){var r;this.undoManager.snapshot(t)&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(et(this)),null==(r=this.host)||r.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}stopCoalescingUndo(){this.undoManager.stopCoalescing(this.model.selection)}stopRecording(){this.undoManager.stopRecording()}startRecording(){this.undoManager.startRecording()}undo(){var t;this.undoManager.undo()&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(et(this)),null==(t=this.host)||t.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var t;this.undoManager.redo()&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(et(this)),null==(t=this.host)||t.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}resetUndo(){var t;null==(t=this.undoManager)||t.reset()}onSelectionDidChange(){var t,r;let a=this.model;this.keyboardDelegate.setValue(a.getValue(this.model.selection,"latex-expanded"));{let r=a.at(a.position),n=null!=(t=r.mode)?t:el(this.options);this.model.mode!==n&&("latex"===this.model.mode?(mr(this,"accept",{mode:n}),a.position=a.offsetOf(r)):this.switchMode(n))}null==(r=this.host)||r.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0})),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(et(this)),qo(this)}onContentWillChange(t){var r,a,n;return null==(n=null==(a=this.host)?void 0:a.dispatchEvent(new InputEvent("beforeinput",g(m({},t),{data:t.data?t.data:null!=(r=t.inputType)?r:"",cancelable:!0,bubbles:!0,composed:!0}))))||n}onFocus(){this.focusBlurInProgress||!this.blurred||(this.focusBlurInProgress=!0,this.blurred=!1,this.keyboardDelegate.focus(),this.stopCoalescingUndo(),tt(this,{interactive:!0}),this.valueOnFocus=this.model.getValue(),this.hasEditablePrompts&&!this.model.at(this.model.anchor).parentPrompt&&this.executeCommand("moveToNextPlaceholder"),this.focusBlurInProgress=!1)}onBlur(){var t,r,a;if(this.focusBlurInProgress||this.blurred)return;this.focusBlurInProgress=!0,this.stopCoalescingUndo(),this.blurred=!0,this.ariaLiveText.textContent="",mr(this,"accept"),this.model.getValue()!==this.valueOnFocus&&(null==(t=this.host)||t.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),this.disconnectFromVirtualKeyboard(),null==(r=this.host)||r.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),null==(a=this.host)||a.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0})),U(this),this.focusBlurInProgress=!1,La();let n=new AbortController,s=n.signal;document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&document.addEventListener("visibilitychange",()=>{Pt(this)&&"visible"===document.visibilityState&&this.focus({preventScroll:!0})},{once:!0})},{once:!0,signal:s}),setTimeout(()=>n.abort(),100)}onInput(t){Vo(this,t)}onKeystroke(t,r){return ml(this,t,r)}onCompositionStart(t){this.model.deleteAtoms(G(this.model.selection));let r=hi(this.field);r&&requestAnimationFrame(()=>{tt(this),this.keyboardDelegate.moveTo(r.x,r.y-r.height)})}onCompositionUpdate(t){(function(t,r){let a=t.at(t.position);if("composition"===a.type)a.value=r;else{let{caret:n}=a;a.caret=void 0;let s=new oq(r,{mode:a.mode});s.caret=n,a.parent.addChildAfter(s,a),t.position+=1}})(this.model,t),U(this)}onCompositionEnd(t){var r;let a;"composition"===(a=(r=this.model).at(r.position)).type&&(a.parent.removeChild(a),r.position-=1),Vo(this,t,{simulateKeystroke:!0})}onCut(t){if(!this.isSelectionEditable){this.model.announce("plonk");return}N(this.model,{inputType:"deleteByCut"})&&(this.stopCoalescingUndo(),oh.onCopy(this,t),$e(this.model,G(this.model.selection),"deleteByCut"),this.snapshot("cut"),U(this))}onCopy(t){oh.onCopy(this,t)}onPaste(t){let r=this.isSelectionEditable;return r&&(r=oh.onPaste(this.model.at(this.model.position).mode,this,t.clipboardData)),r||this.model.announce("plonk"),t.preventDefault(),t.stopPropagation(),r}onGeometryChange(){Ti(this),qo(this)}onWheel(t){let r=5*t.deltaX;if(!Number.isFinite(r)||0===r)return;let a=this.field;r<0&&0===a.scrollLeft||r>0&&a.offsetWidth+a.scrollLeft>=a.scrollWidth||(a.scrollBy({top:0,left:r}),t.preventDefault(),t.stopPropagation())}getHTMLElement(t){let r=t;for(;!r.id&&r.hasChildren;)r=t.children[0];return this.fieldContent.querySelector(`[data-atom-id="${r.id}"]`)}get context(){var t,r;return{registers:null!=(t=this.options.registers)?t:{},smartFence:this.smartFence,letterShapeStyle:this.letterShapeStyle,minFontScale:this.minFontScale,placeholderSymbol:null!=(r=this.options.placeholderSymbol)?r:"▢",colorMap:t=>this.colorMap(t),backgroundColorMap:t=>this.backgroundColorMap(t),getMacro:t=>Yo(t,this.options.macros),atomIdsSettings:{seed:"random",groupNumbers:!1}}}};function Pa(t,r,a){if("text"!==t.at(r).mode)return r;let n="backward"===a?-1:1,s;if(A.test(t.at(r).value)){let a=r,l;do l="text"===t.at(a).mode&&A.test(t.at(a).value),a+=n;while(t.at(a)&&l);s=t.at(a)?a-2*n:a-n}else if(/\s/.test(t.at(r).value)){let a=r;for(;t.at(a)&&"text"===t.at(a).mode&&/\s/.test(t.at(a).value);)a+=n;if(t.at(a)){let r=!0;do r="text"===t.at(a).mode&&!/\s/.test(t.at(a).value),a+=n;while(t.at(a)&&r);s=t.at(a)?a-2*n:a-n}else s=a-n}else{let a=r;for(;t.at(a)&&"text"===t.at(a).mode&&!/\s/.test(t.at(a).value);)a+=n;s=t.at(a)?a:a-n;let l=!0;for(;t.at(a)&&l;)(l="text"===t.at(a).mode&&/\s/.test(t.at(a).value))&&(s=a),a+=n;s=t.at(a)?a-2*n:a-n}return s-(n>0?0:1)}function fr(t,r,a){var n,s,l,c,d,h,p;let y=t.position;null!=(n=null==a?void 0:a.extend)&&n||t.collapseSelection(r);let v=t.at(t.position);if("forward"===r&&("subsup"===v.type&&(v=v.rightSibling)||(v=t.at(t.position+1))),!v)return t.announce("plonk"),!1;let k=t.offsetOf(v);if(v instanceof os)k=Pa(t,k,r);else if(v instanceof o1){if(v.isSuggestion)for(;v&&v instanceof o1;)v.isSuggestion=!1,k=t.offsetOf(v),v=v.rightSibling;else if("forward"===r){if(!(v=v.rightSibling)||!(v instanceof o1))return t.announce("plonk"),!1;for(;v&&v instanceof o1&&/[a-zA-Z\*]/.test(v.value);)k=t.offsetOf(v),v=v.rightSibling}else{if(!(v=v.leftSibling)||!(v instanceof o1))return t.announce("plonk"),!1;for(;v&&v instanceof o1&&/[a-zA-Z\*]/.test(v.value);)k=t.offsetOf(v),v=v.leftSibling}}else if("forward"===r&&"mopen"===v.type){let r=0;do"mopen"===v.type?r+=1:"mclose"===v.type&&(r-=1),v=v.rightSibling;while(!v.isLastSibling&&0!==r);k=t.offsetOf(v.leftSibling)}else if("backward"===r&&"mclose"===v.type){let r=0;do"mopen"===v.type?r+=1:"mclose"===v.type&&(r-=1),v=v.leftSibling;while(!v.isFirstSibling&&0!==r);k=t.offsetOf(v)}else if("backward"===r){if("first"===v.type)for(;k>0&&"first"===v.type;)k-=1,v=t.at(k);else{let r=v.type;"subsup"===v.type&&(k=t.offsetOf(t.at(k).leftSibling)),k-=1;let a=null==(s=t.at(k))?void 0:s.type;for(;k>=0&&a===r;)(null==(l=t.at(k))?void 0:l.type)==="subsup"?k=t.offsetOf(t.at(k).leftSibling):k-=1,a=t.at(k).type}}else{let{type:r}=v,a=null==(c=t.at(k))?void 0:c.type,{lastOffset:n}=t;for(;k<=n&&(a===r||"subsup"===a);){for(;(null==(d=t.at(k).rightSibling)?void 0:d.type)==="subsup";)k=t.offsetOf(t.at(k).rightSibling);k+=1,a=null==(h=t.at(k))?void 0:h.type}k-=1}if(null!=(p=null==a?void 0:a.extend)&&p){if(!t.setSelection(t.anchor,k))return t.announce("plonk"),!1}else{if(k===t.position)return t.announce("plonk"),!1;t.position=k}return t.announce("move",y),t.mathfield.stopCoalescingUndo(),!0}function qe(t,r,a){var n,s;if(a=null!=a?a:{extend:!1},t.mathfield.adoptStyle="backward"===r?"right":"left","forward"!==r){let[r,a]=sa(t);void 0!==r&&void 0!==a&&t.deleteAtoms([r,a])}if("upward"===r)return function(t,r){var a,n;let s=null!=(a=null==r?void 0:r.extend)&&a;s||t.collapseSelection("backward");let i=()=>{var r,a;let n=!0;return t.silenceNotifications||(n=null==(a=null==(r=t.mathfield.host)?void 0:r.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))||a),t.announce(n?"plonk":"line"),n},l=t.at(t.position),c=l;for(;c&&"below"!==c.parentBranch&&!(Array.isArray(c.parentBranch)&&c.parent instanceof oO);)c=c.parent;if(Array.isArray(null==c?void 0:c.parentBranch)&&c.parent instanceof oO){let r=c.parent;if(c.parentBranch[0]<1)return i();let a=c.parentBranch[0]-1,n=r.array[a][c.parentBranch[1]];if(!n.some(t=>"prompt"===t.type&&!t.captureSelection)&&t.mathfield.hasEditablePrompts)return i();Ta(t,l,n,s,"up")}else{if(!c)return i();let r=null!=(n=c.parent.branch("above"))?n:c.parent.createBranch("above");if(!r.some(t=>"prompt"===t.type&&t.placeholderId)&&t.mathfield.hasEditablePrompts)return i();Ta(t,l,r,s,"up")}return t.mathfield.stopCoalescingUndo(),!0}(t,a);if("downward"===r)return function(t,r){var a,n;let s=null!=(a=null==r?void 0:r.extend)&&a;s||t.collapseSelection("forward");let i=()=>{var r,a;let n=!0;return t.silenceNotifications||(n=null==(a=null==(r=t.mathfield.host)?void 0:r.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))||a),t.announce(n?"plonk":"line"),n},l=t.at(t.position),c=l;for(;c&&"above"!==c.parentBranch&&!(Array.isArray(c.parentBranch)&&c.parent instanceof oO);)c=c.parent;if(Array.isArray(null==c?void 0:c.parentBranch)&&c.parent instanceof oO){let r=c.parent;if(c.parentBranch[0]+1>r.array.length-1)return i();let a=c.parentBranch[0]+1,n=r.array[a][c.parentBranch[1]];if(!n.some(t=>"prompt"===t.type&&!t.captureSelection)&&t.mathfield.hasEditablePrompts)return i();Ta(t,l,n,s,"down")}else{if(!c)return i();let r=null!=(n=c.parent.branch("below"))?n:c.parent.createBranch("below");if(!r.some(t=>"prompt"===t.type)&&t.mathfield.hasEditablePrompts)return i();Ta(t,l,r,s,"down")}return!0}(t,a);if(a.extend){let a=Ea(t,t.position,r);a<0&&(a=0),a>t.lastOffset&&(a=t.lastOffset);let n=t.setSelection(t.anchor,a);return t.mathfield.stopCoalescingUndo(),n}if(t.selectionIsPlaceholder){t.collapseSelection(r);let a=qe(t,r);return t.mathfield.stopCoalescingUndo(),a}let l=t.position,c=l;if(t.collapseSelection(r)?(l=t.position,um(t,l)||(l=Ea(t,l,r))):l=Ea(t,l,r),l<0||l>t.lastOffset){let a=!0;return t.silenceNotifications||(a=null==(s=null==(n=t.mathfield.host)?void 0:n.dispatchEvent(new CustomEvent("move-out",{detail:{direction:r},cancelable:!0,bubbles:!0,composed:!0})))||s),a&&t.announce("plonk"),a}return t.setPositionHandlingPlaceholder(l),t.mathfield.stopCoalescingUndo(),t.announce("move",c),!0}function Ea(t,r,a){return(r+="forward"===a?1:-1)<0||r>t.lastOffset||um(t,r)?r:Ea(t,r,a)}function um(t,r){var a;let n=t.at(r),s=n.parent;for(;s&&!s.inCaptureSelection;)s=s.parent;return!(null!=s&&s.inCaptureSelection||null!=(a=n.parent)&&a.skipBoundary&&(!n.isFirstSibling&&n.isLastSibling||"first"===n.type)||t.mathfield.hasEditablePrompts&&!n.parentPrompt)}function Ta(t,r,a,n,s){let l=t.mathfield.hasEditablePrompts,c=l?a.filter(t=>"prompt"===t.type&&!t.captureSelection):a,d=Ks(t.mathfield.getHTMLElement(r)).right,h=t.offsetOf(function(t,r,a){let n=1/0,s=0;for(;s<r.length;s++){let l=Math.abs(a-Ks(t.getHTMLElement(r[s])).right);if(l<=n)n=l;else break}return r[s-1]}(t.mathfield,c,d))-(l?1:0);if(n){let[r,a]=t.selection.ranges[0],n;n=h<("up"===s?r:a)?{ranges:[[h,a]],direction:"backward"}:{ranges:[[r,h]],direction:"forward"},t.setSelection(n)}else t.setPositionHandlingPlaceholder(h);t.announce(`move ${s}`)}ne({deleteAll:t=>N(t,{inputType:"deleteContent"})&&$e(t,[0,-1],"deleteContent"),deleteForward:t=>!!(t.mathfield.isSelectionEditable&&N(t,{inputType:"deleteContentForward"}))&&(t.selectionIsCollapsed?t.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var r,a;let n=t.at(t.position).rightSibling;if(n&&Fo(t,"forward",n))return;if(n){if(t.at(t.position).isLastSibling&&Fo(t,"forward",n.parent,n.parentBranch))return}else{if((n=t.at(t.position)).isLastSibling&&Fo(t,"forward",n.parent,n.parentBranch))return;n=void 0}if(t.position===t.lastOffset||!n){t.announce("plonk");return}n.parent.removeChild(n);let s=null==(r=t.at(t.position))?void 0:r.rightSibling;for(;(null==s?void 0:s.type)==="subsup";)s.parent.removeChild(s),s=null==(a=t.at(t.position))?void 0:a.rightSibling;t.announce("delete",void 0,[n])}):$e(t,G(t.selection),"deleteContentForward")),deleteBackward:t=>!!(t.mathfield.isSelectionEditable&&N(t,{inputType:"deleteContentBackward"}))&&(t.selectionIsCollapsed?t.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let r=t.at(t.position);if(!(r&&Fo(t,"backward",r))){if(null!=r&&r.isFirstSibling){if(Fo(t,"backward",r.parent,r.parentBranch))return;r=null}if(!r){t.announce("plonk");return}t.position=t.offsetOf(r.leftSibling),r.parent.removeChild(r),t.announce("delete",void 0,[r])}}):$e(t,G(t.selection),"deleteContentBackward")),deleteNextWord:t=>N(t,{inputType:"deleteWordForward"})&&$e(t,[t.anchor,Pa(t,t.position,"forward")],"deleteWordForward"),deletePreviousWord:t=>N(t,{inputType:"deleteWordBackward"})&&$e(t,[t.anchor,Pa(t,t.position,"backward")],"deleteWordBackward"),deleteToGroupStart:t=>N(t,{inputType:"deleteSoftLineBackward"})&&$e(t,[t.anchor,t.offsetOf(t.at(t.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:t=>N(t,{inputType:"deleteSoftLineForward"})&&$e(t,[t.anchor,t.offsetOf(t.at(t.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:t=>N(t,{inputType:"deleteHardLineBackward"})&&$e(t,[t.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:t=>N(t,{inputType:"deleteHardLineForward"})&&$e(t,[t.anchor,-1],"deleteHardLineForward")},{target:"model",audioFeedback:"delete",canUndo:!0,changeContent:!0,changeSelection:!0}),ue()||console.error('MathLive 0.95.0: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var nY=new WeakMap,nQ={letterShapeStyle:"mf.letterShapeStyle = ...",horizontalSpacingScale:'Removed. Use `"thinmuskip"`, `"medmuskip"`, and `"thickmuskip"` registers ',macros:"mf.macros = ...",registers:"mf.registers = ...",backgroundColorMap:"mf.backgroundColorMap = ...",colorMap:"mf.colorMap = ...",enablePopover:"mf.popoverPolicy = ...",mathModeSpace:"mf.mathModeSpace = ...",placeholderSymbol:"mf.placeholderSymbol = ...",readOnly:"mf.readOnly = ...",removeExtraneousParentheses:"mf.removeExtraneousParentheses = ...",scriptDepth:"mf.scriptDepth = ...",smartFence:"mf.smartFence = ...",smartMode:"mf.smartMode = ...",smartSuperscript:"mf.smartSuperscript = ...",inlineShortcutTimeout:"mf.inlineShortcutTimeout = ...",inlineShortcuts:"mf.inlineShortcuts = ...",keybindings:"mf.keybindings = ...",virtualKeyboardMode:"mf.mathVirtualKeyboardPolicy = ...",customVirtualKeyboardLayers:"mathVirtualKeyboard.layers = ...",customVirtualKeyboards:"mathVirtualKeyboard.layouts = ...",keypressSound:"mathVirtualKeyboard.keypressSound = ...",keypressVibration:"mathVirtualKeyboard.keypressVibration = ...",plonkSound:"mathVirtualKeyboard.plonkSound = ...",virtualKeyboardContainer:"mathVirtualKeyboard.container = ...",virtualKeyboardLayout:"mathVirtualKeyboard.alphabeticLayout = ...",virtualKeyboardTheme:"No longer supported",virtualKeyboardToggleGlyph:"No longer supported",virtualKeyboardToolbar:"mathVirtualKeyboard.editToolbar = ...",virtualKeyboards:"Use `mathVirtualKeyboard.layouts`",speechEngine:"`MathfieldElement.speechEngine`",speechEngineRate:"`MathfieldElement.speechEngineRate`",speechEngineVoice:"`MathfieldElement.speechEngineVoice`",textToSpeechMarkup:"`MathfieldElement.textToSpeechMarkup`",textToSpeechRules:"`MathfieldElement.textToSpeechRules`",textToSpeechRulesOptions:"`MathfieldElement.textToSpeechRulesOptions`",readAloudHook:"`MathfieldElement.readAloudHook`",speakHook:"`MathfieldElement.speakHook`",computeEngine:"`MathfieldElement.computeEngine`",fontsDirectory:"`MathfieldElement.fontsDirectory`",soundsDirectory:"`MathfieldElement.soundsDirectory`",createHTML:"`MathfieldElement.createHTML`",onExport:"`MathfieldElement.onExport`",onInlineShortcut:"`MathfieldElement.onInlineShortcut`",onScrollIntoView:"`MathfieldElement.onScrollIntoView`",locale:"MathfieldElement.locale = ...",strings:"MathfieldElement.strings = ...",decimalSeparator:"MathfieldElement.decimalSeparator = ...",fractionNavigationOrder:"MathfieldElement.fractionNavigationOrder = ..."},n0=class re extends HTMLElement{constructor(t){if(super(),t){let r=[];for(let a of Object.keys(t))if(nQ[a]){if(nQ[a].startsWith("mf.")){if(nQ[a].startsWith(`mf.${a}`))r.push(`Option \`${a}\` cannot be used as a constructor option. Use ${nQ[a]}`);else{let t=nQ[a].match(/([a-zA-Z]+) =/);r.push(`Option \`${a}\` has been renamed \`${t[1]}\``)}}else r.push(`Option \`${a}\` cannot be used as a constructor option. Use ${nQ[a]}`)}if(r.length>0){for(let t of(console.group("%cMathLive 0.95.0: %cInvalid Options","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn("Some of the options passed to `new MathFieldElement(...)` are invalid. \n          See https://cortexjs.io/mathlive/changelog/ for details."),r))console.warn(t);console.groupEnd()}}Ni()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open",delegatesFocus:!0}),this.shadowRoot&&"adoptedStyleSheets"in this.shadowRoot?(this.shadowRoot.adoptedStyleSheets=[vo("core"),vo("mathfield"),vo("mathfield-element")],this.shadowRoot.innerHTML='<span style="pointer-events:auto"></span><slot style="display:none"></slot>'):this.shadowRoot.innerHTML=`<style>${gi("core")}${gi("mathfield")}${gi("mathfield-element")}</style><span style="pointer-events:auto"></span><slot style="display:none"></slot>`,t&&this._setOptions(t)}static get formAssociated(){return Ni()}static get optionsAttributes(){return{"default-mode":"string","letter-shape-style":"string","min-font-scale":"number","popover-policy":"string","math-mode-space":"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","inline-shortcut-timeout":"string","script-depth":"string","virtual-keyboard-target-origin":"string","math-virtual-keyboard-policy":"string"}}static get observedAttributes(){return[...Object.keys(this.optionsAttributes),"contenteditable","disabled","readonly","read-only"]}static get fontsDirectory(){return this._fontsDirectory}static set fontsDirectory(t){t!==this._fontsDirectory&&(this._fontsDirectory=t,A0())}static get soundsDirectory(){return this._soundsDirectory}static set soundsDirectory(t){this._soundsDirectory=t,this.audioBuffers={}}static get keypressSound(){return this._keypressSound}static set keypressSound(t){var r,a,n;this.audioBuffers={},null===t?this._keypressSound={spacebar:null,return:null,delete:null,default:null}:"string"==typeof t?this._keypressSound={spacebar:t,return:t,delete:t,default:t}:"object"==typeof t&&"default"in t&&(this._keypressSound={spacebar:null!=(r=t.spacebar)?r:t.default,return:null!=(a=t.return)?a:t.default,delete:null!=(n=t.delete)?n:t.default,default:t.default})}static get plonkSound(){return this._plonkSound}static set plonkSound(t){this.audioBuffers={},this._plonkSound=t}static get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}static get speechEngine(){return this._speechEngine}static set speechEngine(t){this._speechEngine=t}static get speechEngineRate(){return this._speechEngineRate}static set speechEngineRate(t){this._speechEngineRate=t}static get speechEngineVoice(){return this._speechEngineVoice}static set speechEngineVoice(t){this._speechEngineVoice=t}static get textToSpeechMarkup(){return this._textToSpeechMarkup}static set textToSpeechMarkup(t){this._textToSpeechMarkup=t}static get textToSpeechRules(){return this._textToSpeechRules}static set textToSpeechRules(t){this._textToSpeechRules=t}static get textToSpeechRulesOptions(){return this._textToSpeechRulesOptions}static set textToSpeechRulesOptions(t){this._textToSpeechRulesOptions=t}static get locale(){return p.locale}static set locale(t){"auto"===t&&(t=navigator.language.slice(0,5)),p.locale=t}static get decimalSeparator(){return this._decimalSeparator}static set decimalSeparator(t){this._decimalSeparator=t,this._computeEngine&&(this._computeEngine.latexOptions.decimalMarker=","===this.decimalSeparator?"{,}":".")}static get strings(){return p.strings}static set strings(t){p.merge(t)}static get computeEngine(){var t,r;if(void 0===this._computeEngine){let r=null==(t=window[Symbol.for("io.cortexjs.compute-engine")])?void 0:t.ComputeEngine;if(!r)return null;this._computeEngine=new r,this._computeEngine&&","===this.decimalSeparator&&(this._computeEngine.latexOptions.decimalMarker="{,}")}return null!=(r=this._computeEngine)?r:null}static set computeEngine(t){this._computeEngine=t}static async loadSound(t){delete this.audioBuffers[t];let r="";switch(t){case"keypress":r=this._keypressSound.default;break;case"return":r=this._keypressSound.return;break;case"spacebar":r=this._keypressSound.spacebar;break;case"delete":r=this._keypressSound.delete;break;case"plonk":r=this.plonkSound}if("string"!=typeof r)return;r=r.trim();let a=this.soundsDirectory;if(!(null==a||"null"===a||"none"===r||"null"===r))try{let n=await (await fetch(await la(`${a}/${r}`))).arrayBuffer(),s=await this.audioContext.decodeAudioData(n);this.audioBuffers[t]=s}catch(t){}}static async playSound(t){if(("suspended"===this.audioContext.state||"interrupted"===this.audioContext.state)&&await this.audioContext.resume(),this.audioBuffers[t]||await this.loadSound(t),!this.audioBuffers[t])return;let r=this.audioContext.createBufferSource();r.buffer=this.audioBuffers[t];let a=this.audioContext.createGain();a.gain.value=.5,r.connect(a).connect(this.audioContext.destination),r.start()}onPointerDown(){window.addEventListener("pointerup",t=>{var r;t.target!==this||null!=(r=this._mathfield)&&r.disabled||this.dispatchEvent(new MouseEvent("click",{altKey:t.altKey,button:t.button,buttons:t.buttons,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,metaKey:t.metaKey,movementX:t.movementX,movementY:t.movementY,relatedTarget:t.relatedTarget,screenX:t.screenX,screenY:t.screenY,shiftKey:t.shiftKey}))},{once:!0})}getPromptValue(t,r){var a,n;return null!=(n=null==(a=this._mathfield)?void 0:a.getPromptValue(t,r))?n:""}getPrompts(t){var r,a;return null!=(a=null==(r=this._mathfield)?void 0:r.getPrompts(t))?a:[]}get form(){var t;return null==(t=this._internals)?void 0:t.form}get name(){var t;return null!=(t=this.getAttribute("name"))?t:""}get type(){return this.localName}get mode(){var t,r;return null!=(r=null==(t=this._mathfield)?void 0:t.model.mode)?r:"math"}set mode(t){this._mathfield&&(this._mathfield.model.mode=t)}get expression(){if(this._mathfield)return window[Symbol.for("io.cortexjs.compute-engine")]?this._mathfield.expression:(console.error(`MathLive 0.95.0: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://unpkg.com/@cortex-js/compute-engine?module"`),null)}set expression(t){var r,a;if(!this._mathfield)return;let n=null!=(a=null==(r=re.computeEngine)?void 0:r.box(t).latex)?a:null;null!==n&&this._mathfield.setValue(n),window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`MathLive 0.95.0: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://unpkg.com/@cortex-js/compute-engine?module"`)}get errors(){var t,r;return null!=(r=null==(t=this._mathfield)?void 0:t.errors)?r:[]}_getOptions(t){return this._mathfield?zt(this._mathfield.options,t):nY.has(this)?m({},zt(m(m({},Oi()),Ki(nY.get(this).options)),t)):null}getOptions(t){return console.warn("%cMathLive 0.95.0: %cDeprecated Usage%c\n      `mf.getOptions()` is deprecated. Read the property directly on the mathfield instead.\n      See https://cortexjs.io/mathlive/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._mathfield?zt(this._mathfield.options,t):nY.has(this)?zt(m(m({},Oi()),Ki(nY.get(this).options)),t):null}reflectAttributes(){let t=Oi(),r=this._getOptions();Object.keys(re.optionsAttributes).forEach(a=>{let n=Ft(a);"on/off"===re.optionsAttributes[a]?t[n]!==r[n]?this.setAttribute(a,r[n]?"on":"off"):this.removeAttribute(a):t[n]!==r[n]&&("boolean"===re.optionsAttributes[a]?r[n]?this.setAttribute(a,""):this.removeAttribute(a):("string"==typeof r[n]||"number"==typeof r[n])&&this.setAttribute(a,r[n].toString()))})}getOption(t){return console.warn("%cMathLive 0.95.0: %cDeprecated Usage%c\n      `mf.getOption()` is deprecated. Read the property directly on the mathfield instead.\n      See https://cortexjs.io/mathlive/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._getOptions([t])[t]}_getOption(t){return this._getOptions([t])[t]}_setOptions(t){if(this._mathfield)this._mathfield.setOptions(t);else if(nY.has(this)){let r=m(m({},nY.get(this).options),t);nY.set(this,g(m({},nY.get(this)),{selection:{ranges:r.readOnly?[[0,0]]:[[0,-1]]},options:r}))}else nY.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:t});this.reflectAttributes()}setOptions(t){for(let r of(console.group("%cMathLive 0.95.0: %cDeprecated Usage","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn(" `mf.setOptions()` is deprecated. Set the property directly on the mathfield instead.\n      See https://cortexjs.io/mathlive/changelog/ for details."),Object.keys(t)))nQ[r]&&console.warn(`\`mf.setOptions({${r}:...})\` -> ${nQ[r]}`);console.groupEnd(),this._setOptions(t)}executeCommand(t){var r,a;return null!=(a=null==(r=this._mathfield)?void 0:r.executeCommand(t))&&a}getValue(t,r,a){var n,s;if(this._mathfield)return this._mathfield.model.getValue(t,r,a);if(nY.has(this)){let l,c,d;if(zi(t)?([l,c]=t.ranges[0],d=r):Fr(t)?([l,c]=t,d=r):Mt(t)&&Mt(r)?(l=t,c=r,d=a):(l=0,c=-1,d=t),(void 0===d||"latex"===d)&&0===l&&-1===c)return null!=(s=null!=(n=nY.get(this).value)?n:this.textContent)?s:""}return""}setValue(t,r){if(this._mathfield&&void 0!==t){null!=r||(r={silenceNotifications:!0,mode:"math"}),this._mathfield.setValue(t,r);return}if(nY.has(this)){let r=nY.get(this).options;nY.set(this,{value:t,selection:{ranges:r.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:r});return}let a=Da(this);nY.set(this,{value:t,selection:{ranges:a.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:a})}hasFocus(){var t,r;return null!=(r=null==(t=this._mathfield)?void 0:t.hasFocus())&&r}focus(){var t;null==(t=this._mathfield)||t.focus()}blur(){var t;null==(t=this._mathfield)||t.blur()}select(){var t;null==(t=this._mathfield)||t.select()}insert(t,r){var a,n;return null!=(n=null==(a=this._mathfield)?void 0:a.insert(t,r))&&n}applyStyle(t,r){var a;return null==(a=this._mathfield)?void 0:a.applyStyle(t,r)}get caretPoint(){var t,r;return null!=(r=null==(t=this._mathfield)?void 0:t.getCaretPoint())?r:null}set caretPoint(t){var r;t&&(null==(r=this._mathfield)||r.setCaretPoint(t.x,t.y))}setCaretPoint(t,r){var a,n;return null!=(n=null==(a=this._mathfield)?void 0:a.setCaretPoint(t,r))&&n}offsetFromPoint(t,r,a){return this._mathfield?Ur(this._mathfield,t,r,a):-1}hitboxFromOffset(t){if(!this._mathfield)return null;let r=this._mathfield.model.at(t);if(!r)return null;let a=sr(this._mathfield,r);return a?new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top):null}resetUndo(){var t;null==(t=this._mathfield)||t.resetUndo()}canUndo(){return!!this._mathfield&&this._mathfield.canUndo()}canRedo(){return!!this._mathfield&&this._mathfield.canRedo()}handleEvent(t){var r,a;"pointerdown"===t.type&&this.onPointerDown(),"focus"===t.type&&(null==(r=this._mathfield)||r.focus()),"blur"===t.type&&(null==(a=this._mathfield)||a.blur())}connectedCallback(){var t,r,a;this.shadowRoot.host.addEventListener("pointerdown",this,!0),this.shadowRoot.host.addEventListener("focus",this,!0),this.shadowRoot.host.addEventListener("blur",this,!0),Ni()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),this.hasAttribute("contenteditable")||this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let n=this.shadowRoot.querySelector("slot:not([name])"),s="";if(s=this.hasAttribute("value")?null!=(t=this.getAttribute("value"))?t:"":null!=(r=null==n?void 0:n.assignedNodes().map(t=>3===t.nodeType?t.textContent:"").join("").trim())?r:"",this._mathfield=new nZ(this.shadowRoot.querySelector(":host > span"),g(m({},nY.has(this)?nY.get(this).options:Da(this)),{eventSink:this,value:s})),!nY.has(this))for(let t of(this.upgradeProperty("disabled"),this.upgradeProperty("readonly"),Object.keys(re.optionsAttributes)))this.upgradeProperty(Ft(t));if(!(null!=(a=this._mathfield)&&a.model)){this._mathfield=null;return}nY.has(this)&&this._mathfield.model.deferNotifications({content:!1,selection:!1},()=>{let t=nY.get(this).value;void 0!==t&&this._mathfield.setValue(t),this._mathfield.model.selection=nY.get(this).selection,nY.delete(this)}),window.queueMicrotask(()=>{this.isConnected&&this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))}),Kr()}disconnectedCallback(){if(this.shadowRoot.host.removeEventListener("pointerdown",this,!0),!this._mathfield)return;window.queueMicrotask(()=>this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})));let t=zt(this._mathfield.options,Object.keys(re.optionsAttributes).map(t=>Ft(t)));nY.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,options:t}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(t){if(this.hasOwnProperty(t)){let r=this[t];delete this[t],("readonly"===t||"read-only"===t)&&(t="readOnly"),this[t]=r}}attributeChangedCallback(t,r,a){if(r===a)return;let n=null!==a;switch(t){case"contenteditable":this._mathfield&&U(this._mathfield);break;case"disabled":this.disabled=n;break;case"read-only":case"readonly":this.readOnly=n}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(t){let r=!!t;r?(this.setAttribute("readonly",""),Ni()?this._internals.ariaReadOnly="true":this.setAttribute("aria-readonly","true"),this.setAttribute("aria-readonly","true")):(Ni()?this._internals.ariaReadOnly="false":this.removeAttribute("aria-readonly"),this.removeAttribute("readonly"),this.removeAttribute("read-only")),this._setOptions({readOnly:r})}get disabled(){return this.hasAttribute("disabled")}set disabled(t){var r;let a=!!t;a?this.setAttribute("disabled",""):this.removeAttribute("disabled"),Ni()?this._internals.ariaDisabled=a?"true":"false":this.setAttribute("aria-disabled",a?"true":"false"),a&&null!=(r=this._mathfield)&&r.hasFocus&&window.mathVirtualKeyboard.visible&&this._mathfield.executeCommand("hideVirtualKeyboard")}get value(){return this.getValue()}set value(t){this.setValue(t)}get defaultMode(){return this._getOption("defaultMode")}set defaultMode(t){this._setOptions({defaultMode:t})}get macros(){return this._getOption("macros")}set macros(t){this._setOptions({macros:t})}get registers(){return this._getOption("registers")}set registers(t){this._setOptions({registers:t})}get colorMap(){return this._getOption("colorMap")}set colorMap(t){this._setOptions({colorMap:t})}get backgroundColorMap(){return this._getOption("backgroundColorMap")}set backgroundColorMap(t){this._setOptions({backgroundColorMap:t})}get letterShapeStyle(){return this._getOption("letterShapeStyle")}set letterShapeStyle(t){this._setOptions({letterShapeStyle:t})}get minFontScale(){return this._getOption("minFontScale")}set minFontScale(t){this._setOptions({minFontScale:t})}get smartMode(){return this._getOption("smartMode")}set smartMode(t){this._setOptions({smartMode:t})}get smartFence(){return this._getOption("smartFence")}set smartFence(t){this._setOptions({smartFence:t})}get smartSuperscript(){return this._getOption("smartSuperscript")}set smartSuperscript(t){this._setOptions({smartSuperscript:t})}get scriptDepth(){return this._getOption("scriptDepth")}set scriptDepth(t){this._setOptions({scriptDepth:t})}get removeExtraneousParentheses(){return this._getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(t){this._setOptions({removeExtraneousParentheses:t})}get mathModeSpace(){return this._getOption("mathModeSpace")}set mathModeSpace(t){this._setOptions({mathModeSpace:t})}get placeholderSymbol(){return this._getOption("placeholderSymbol")}set placeholderSymbol(t){this._setOptions({placeholderSymbol:t})}get popoverPolicy(){return this._getOption("popoverPolicy")}set popoverPolicy(t){this._setOptions({popoverPolicy:t})}get environmentPopoverPolicy(){return this._getOption("environmentPopoverPolicy")}set environmentPopoverPolicy(t){this._setOptions({environmentPopoverPolicy:t})}get mathVirtualKeyboardPolicy(){return this._getOption("mathVirtualKeyboardPolicy")}set mathVirtualKeyboardPolicy(t){this._setOptions({mathVirtualKeyboardPolicy:t})}get inlineShortcuts(){return this._getOption("inlineShortcuts")}set inlineShortcuts(t){this._setOptions({inlineShortcuts:t})}get inlineShortcutTimeout(){return this._getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(t){this._setOptions({inlineShortcutTimeout:t})}get keybindings(){return this._getOption("keybindings")}set keybindings(t){this._setOptions({keybindings:t})}get onInlineShortcut(){return this._getOption("onInlineShortcut")}set onInlineShortcut(t){this._setOptions({onInlineShortcut:t})}get onScrollIntoView(){return this._getOption("onScrollIntoView")}set onScrollIntoView(t){this._setOptions({onScrollIntoView:t})}get onExport(){return this._getOption("onExport")}set onExport(t){this._setOptions({onExport:t})}get readOnly(){return this._getOption("readOnly")}set readOnly(t){this._setOptions({readOnly:t})}get isSelectionEditable(){var t,r;return null!=(r=null==(t=this._mathfield)?void 0:t.isSelectionEditable)&&r}setPromptState(t,r,a){var n;null==(n=this._mathfield)||n.setPromptState(t,r,a)}getPromptState(t){var r,a;return null!=(a=null==(r=this._mathfield)?void 0:r.getPromptState(t))?a:[void 0,!0]}setPromptContent(t,r,a){var n;null==(n=this._mathfield)||n.setPromptValue(t,r,a)}stripPromptContent(t){var r,a;return null!=(a=null==(r=this._mathfield)?void 0:r.stripPromptContent(t))?a:{}}get virtualKeyboardTargetOrigin(){return this._getOption("virtualKeyboardTargetOrigin")}set virtualKeyboardTargetOrigin(t){this._setOptions({virtualKeyboardTargetOrigin:t})}get selection(){return this._mathfield?this._mathfield.model.selection:nY.has(this)?nY.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(t){if("number"==typeof t&&(t={ranges:[[t,t]]}),this._mathfield){this._mathfield.model.selection=t;return}if(nY.has(this)){nY.set(this,g(m({},nY.get(this)),{selection:t}));return}nY.set(this,{value:void 0,selection:t,options:Da(this)})}get selectionIsCollapsed(){let t=this.selection;return 1===t.ranges.length&&t.ranges[0][0]===t.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:nY.has(this)?nY.get(this).selection.ranges[0][0]:0}set position(t){if(this._mathfield&&(this._mathfield.model.position=t),nY.has(this)){nY.set(this,g(m({},nY.get(this)),{selection:{ranges:[[t,t]]}}));return}nY.set(this,{value:void 0,selection:{ranges:[[t,t]]},options:Da(this)})}getOffsetDepth(t){var r;return this._mathfield?(null==(r=this._mathfield.model.at(t))?void 0:r.treeDepth)-2:0}get lastOffset(){var t,r;return null!=(r=null==(t=this._mathfield)?void 0:t.model.lastOffset)?r:-1}};n0.version="0.95.0",n0._fontsDirectory="./fonts",n0._soundsDirectory="./sounds",n0.keypressVibration=!0,n0._keypressSound={spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"},n0._plonkSound="plonk.wav",n0.audioBuffers={},n0.createHTML=t=>t,n0._speechEngineRate="100%",n0._speechEngineVoice="Joanna",n0._textToSpeechMarkup="",n0._textToSpeechRules="mathlive",n0._textToSpeechRulesOptions={},n0.speakHook=function(t){var r,a;if(ue()){if(window.MathfieldElement.speechEngine&&"local"!==window.MathfieldElement.speechEngine){if("amazon"===window.MathfieldElement.speechEngine){if("AWS"in window){let n=new window.AWS.Polly({apiVersion:"2016-06-10"}),s={OutputFormat:"mp3",VoiceId:null!=(r=window.MathfieldElement.speechEngineVoice)?r:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes(null!=(a=window.MathfieldElement.speechEngineVoice)?a:"Joanna")?"neural":"standard",Text:t,TextType:"ssml"};n.synthesizeSpeech(s,(t,r)=>{if(t)console.trace(`MathLive 0.95.0: \`polly.synthesizeSpeech()\` error: ${t}`);else if(null!=r&&r.AudioStream){let t=new Uint8Array(r.AudioStream),a=new Blob([t.buffer],{type:"audio/mpeg"}),n=URL.createObjectURL(a);new Audio(n).play().catch(t=>console.log(t))}})}else console.error("MathLive 0.95.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk")}else"google"===window.MathfieldElement.speechEngine&&console.error("MathLive 0.95.0: The Google speech engine is not supported yet. Please come again.")}else{let r=new SpeechSynthesisUtterance(t);window.speechSynthesis.speak(r)}}},n0.readAloudHook=function(t,r){var a;if(!ue())return;if("amazon"!==window.MathfieldElement.speechEngine){console.error("MathLive 0.95.0: Use Amazon TTS Engine for synchronized highlighting"),"function"==typeof window.MathfieldElement.speakHook&&window.MathfieldElement.speakHook(r);return}if(!window.AWS){console.error("MathLive 0.95.0: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");return}let n=new window.AWS.Polly({apiVersion:"2016-06-10"}),s={OutputFormat:"json",VoiceId:null!=(a=window.MathfieldElement.speechEngineVoice)?a:"Joanna",Engine:"standard",Text:r,TextType:"ssml",SpeechMarkTypes:["ssml"]};St().readAloudElement=t,n.synthesizeSpeech(s,(t,a)=>{if(t){console.trace(`MathLive 0.95.0: \`polly.synthesizeSpeech()\` error: ${t}`);return}if(!(null!=a&&a.AudioStream))return;let l=new TextDecoder("utf-8").decode(new Uint8Array(a.AudioStream));for(let t of(St().readAloudMarks=l.split(`
`).map(t=>t?JSON.parse(t):{}),St().readAloudTokens=[],St().readAloudMarks))t.value&&St().readAloudTokens.push(t.value);St().readAloudCurrentMark="",s.OutputFormat="mp3",s.SpeechMarkTypes=[],n.synthesizeSpeech(s,(t,a)=>{if(t){console.trace(`MathLive 0.95.0: \`polly.synthesizeSpeech("${r}") error:${t}`);return}if(!(null!=a&&a.AudioStream))return;let n=new Uint8Array(a.AudioStream),s=new Blob([n.buffer],{type:"audio/mpeg"}),l=URL.createObjectURL(s),c=St();c.readAloudAudio?c.readAloudAudio.pause():(c.readAloudAudio=new Audio,c.readAloudAudio.addEventListener("ended",()=>{let t=c.readAloudMathField;c.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),t?(tt(t),c.readAloudElement=null,c.readAloudMathField=null,c.readAloudTokens=[],c.readAloudMarks=[],c.readAloudCurrentMark=""):function dm(t){if(t&&(t.classList.remove("ML__highlight"),t.children))for(let r of t.children)dm(r)}(c.readAloudElement)}),c.readAloudAudio.addEventListener("timeupdate",()=>{let t="",r=1e3*c.readAloudAudio.currentTime+100;for(let a of c.readAloudMarks)a.time<r&&(t=a.value);c.readAloudCurrentMark!==t&&(c.readAloudCurrentToken=t,t&&t===c.readAloudFinalToken?c.readAloudAudio.pause():(c.readAloudCurrentMark=t,function vl(t,r){var a;t&&(r&&(null==(a=t.dataset)?void 0:a.atomId)!==r?(t.classList.remove("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(t=>{t instanceof HTMLElement&&vl(t,r)})):(t.classList.add("ML__highlight"),t.children&&t.children.length>0&&[...t.children].forEach(t=>{t instanceof HTMLElement&&vl(t)})))}(c.readAloudElement,c.readAloudCurrentMark)))})),c.readAloudAudio.src=l,c.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),c.readAloudAudio.play()})})},n0._decimalSeparator=".",n0.fractionNavigationOrder="numerator-denominator";var n1=n0;function Ft(t){return t.replace(/[^a-zA-Z\d]+(.)/g,(t,r)=>r.toUpperCase())}function Da(t){let r={readOnly:!1},a=n1.optionsAttributes;return Object.keys(a).forEach(n=>{if(t.hasAttribute(n)){let s=t.getAttribute(n);"boolean"===a[n]?r[Ft(n)]=!0:"on/off"===a[n]?"on"===s?r[Ft(n)]=!0:"off"===s?r[Ft(n)]=!1:r[Ft(n)]=void 0:"number"===a[n]?r[Ft(n)]=Number.parseFloat(null!=s?s:"0"):r[Ft(n)]=s}}),r}function Ni(){return!(!("ElementInternals"in window)||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var n4,n2,n3,n6,n8=n1;function St(){var t;return null!=globalThis[t=Symbol.for("io.cortexjs.mathlive")]||(globalThis[t]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}ue()&&!(null!=(n2=window.customElements)&&n2.get("math-field"))&&(null!=window[n3=Symbol.for("io.cortexjs.mathlive")]||(window[n3]={}),window[Symbol.for("io.cortexjs.mathlive")].version="0.95.0",window.MathfieldElement=n1,null==(n6=window.customElements)||n6.define("math-field",n1)),ne({switchKeyboardLayer:function(t){let r=nT.singleton;return!!r&&(r.show(),zr(),r.currentLayer=t,r.render(),r.focus(),!0)},toggleVirtualKeyboard:function(){let t=window.mathVirtualKeyboard;return t.visible?t.hide({animate:!0}):t.show({animate:!0}),!1},hideVirtualKeyboard:()=>(window.mathVirtualKeyboard.hide({animate:!0}),!1),showVirtualKeyboard:()=>(window.mathVirtualKeyboard.show({animate:!0}),!1)},{target:"virtual-keyboard"})}}]);