"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56461],{275534:function(e,t,r){r.d(t,{BU:function(){return withReact},CX:function(){return Editable},F3:function(){return et},UE:function(){return useFocused},mH:function(){return Slate},ui:function(){return useSlate},vt:function(){return useSelected}});var a=r(61242),n=r.n(a),o=r(266726),i=r.n(o),s=r(819783),l=r.n(s),d=r(827378),c=r(989656),u=r(585912),f=r(610685),h=r(331542);function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectWithoutProperties(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var g=0;let Key=class Key{constructor(){this.id="".concat(g++)}};var v=new WeakMap,p=new WeakMap,m=new WeakMap,w=new WeakMap,b=new WeakMap,M=new WeakMap,D=new WeakMap,E=new WeakMap,y=new WeakMap,x=new WeakMap,k=new WeakMap,O=new WeakMap,C=new WeakMap,S=new WeakMap,L=new WeakMap,P=new WeakMap,F=new WeakMap,B=new WeakMap,R=new WeakMap,T=new WeakMap,N=new WeakMap,A=Symbol("placeholder"),W=Symbol("mark-placeholder"),j=globalThis.Text,getDefaultView=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,isDOMComment=e=>isDOMNode(e)&&8===e.nodeType,isDOMElement=e=>isDOMNode(e)&&1===e.nodeType,isDOMNode=e=>{var t=getDefaultView(e);return!!t&&e instanceof t.Node},isDOMSelection=e=>{var t=e&&e.anchorNode&&getDefaultView(e.anchorNode);return!!t&&e instanceof t.Selection},isDOMText=e=>isDOMNode(e)&&3===e.nodeType,isPlainTextOnlyPaste=e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length,normalizeDOMPoint=e=>{var[t,r]=e;if(isDOMElement(t)&&t.childNodes.length){var a=r===t.childNodes.length,n=a?r-1:r;for([t,n]=getEditableChildAndIndex(t,n,a?"backward":"forward"),a=n<r;isDOMElement(t)&&t.childNodes.length;){var o=a?t.childNodes.length-1:0;t=getEditableChild(t,o,a?"backward":"forward")}r=a&&null!=t.textContent?t.textContent.length:0}return[t,r]},hasShadowRoot=()=>!!(window.document.activeElement&&window.document.activeElement.shadowRoot),getEditableChildAndIndex=(e,t,r)=>{for(var{childNodes:a}=e,n=a[t],o=t,i=!1,s=!1;(isDOMComment(n)||isDOMElement(n)&&0===n.childNodes.length||isDOMElement(n)&&"false"===n.getAttribute("contenteditable"))&&(!i||!s);){if(o>=a.length){i=!0,o=t-1,r="backward";continue}if(o<0){s=!0,o=t+1,r="forward";continue}n=a[o],t=o,o+="forward"===r?1:-1}return[n,t]},getEditableChild=(e,t,r)=>{var[a]=getEditableChildAndIndex(e,t,r);return a},getPlainText=e=>{var t="";if(isDOMText(e)&&e.nodeValue)return e.nodeValue;if(isDOMElement(e)){for(var r of Array.from(e.childNodes))t+=getPlainText(r);var a=getComputedStyle(e).getPropertyValue("display");("block"===a||"list"===a||"BR"===e.tagName)&&(t+="\n")}return t},_=/data-slate-fragment="(.+?)"/m,getSlateFragmentAttribute=e=>{var[,t]=e.getData("text/html").match(_)||[];return t},isTrackedMutation=(e,t,r)=>{var{target:a}=t;if(isDOMElement(a)&&a.matches('[contentEditable="false"]'))return!1;var{document:n}=et.getWindow(e);if(n.contains(a))return et.hasDOMNode(e,a,{editable:!0});var o=r.find(e=>{var{addedNodes:t,removedNodes:r}=e;for(var n of t)if(n===a||n.contains(a))return!0;for(var o of r)if(o===a||o.contains(a))return!0});return!!o&&o!==t&&isTrackedMutation(e,o,r)},I=parseInt(d.version.split(".")[0],10)>=17,$="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,q="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),Y="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),z="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),V="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),H="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),U="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),K="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Z="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),X="undefined"!=typeof navigator&&/.*QQBrowser/.test(navigator.userAgent),J="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),Q="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent),G=!!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement),ee=!K&&!H&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,et={isComposing:e=>!!O.get(e),getWindow(e){var t=m.get(e);if(!t)throw Error("Unable to find a host window element for this editor");return t},findKey(e,t){var r=E.get(t);return r||(r=new Key,E.set(t,r)),r},findPath(e,t){for(var r=[],a=t;;){var n=p.get(a);if(null==n){if(u.ML.isEditor(a))return r;break}var o=v.get(a);if(null==o)break;r.unshift(o),a=n}throw Error("Unable to find the path for Slate node: ".concat(u.o4.stringify(t)))},findDocumentOrShadowRoot(e){var t=et.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},isFocused:e=>!!k.get(e),isReadOnly:e=>!!x.get(e),blur(e){var t=et.toDOMNode(e,e),r=et.findDocumentOrShadowRoot(e);k.set(e,!1),r.activeElement===t&&t.blur()},focus(e){var t=et.toDOMNode(e,e),r=et.findDocumentOrShadowRoot(e);k.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){var{selection:t}=e,r=et.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&u.YR.deselect(e)},hasDOMNode(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:n=!1}=a,o=et.toDOMNode(e,e);try{r=isDOMElement(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&r.closest("[data-slate-editor]")===o&&(!n||!!r.isContentEditable||"boolean"==typeof r.isContentEditable&&r.closest('[contenteditable="false"]')===o||!!r.getAttribute("data-slate-zero-width"))},insertData(e,t){e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),setFragmentData(e,t,r){e.setFragmentData(t,r)},toDOMNode(e,t){var r=y.get(e),a=u.ML.isEditor(t)?w.get(e):null==r?void 0:r.get(et.findKey(e,t));if(!a)throw Error("Cannot resolve a DOM node from Slate node: ".concat(u.o4.stringify(t)));return a},toDOMPoint(e,t){var[r]=u.ML.node(e,t.path),a=et.toDOMNode(e,r);u.ML.void(e,{at:t})&&(t={path:t.path,offset:0});for(var n=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),o=0,i=0;i<n.length;i++){var s=n[i],l=s.childNodes[0];if(null!=l&&null!=l.textContent){var{length:d}=l.textContent,c=s.getAttribute("data-slate-length"),f=o+(null==c?d:parseInt(c,10)),h=n[i+1];if(t.offset===f&&null!=h&&h.hasAttribute("data-slate-mark-placeholder")){var g,v,p=h.childNodes[0];g=[p instanceof j?p:h,null!==(v=h.textContent)&&void 0!==v&&v.startsWith("\uFEFF")?1:0];break}if(t.offset<=f){g=[l,Math.min(d,Math.max(0,t.offset-o))];break}o=f}}if(!g)throw Error("Cannot resolve a DOM point from Slate point: ".concat(u.o4.stringify(t)));return g},toDOMRange(e,t){var{anchor:r,focus:a}=t,n=u.e6.isBackward(t),o=et.toDOMPoint(e,r),i=u.e6.isCollapsed(t)?o:et.toDOMPoint(e,a),s=et.getWindow(e).document.createRange(),[l,d]=n?i:o,[c,f]=n?o:i,h=!!(isDOMElement(l)?l:l.parentElement).getAttribute("data-slate-zero-width"),g=!!(isDOMElement(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return s.setStart(l,h?1:d),s.setEnd(c,g?1:f),s},toSlateNode(e,t){var r=isDOMElement(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var a=r?M.get(r):null;if(!a)throw Error("Cannot resolve a Slate node from DOM node: ".concat(r));return a},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var r,{clientX:a,clientY:n,target:o}=t;if(null==a||null==n)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i=et.toSlateNode(e,t.target),s=et.findPath(e,i);if(u.ML.isVoid(e,i)){var l=o.getBoundingClientRect(),d=e.isInline(i)?a-l.left<l.left+l.width-a:n-l.top<l.top+l.height-n,c=u.ML.point(e,s,{edge:d?"start":"end"}),f=d?u.ML.before(e,c):u.ML.after(e,c);if(f)return u.ML.range(e,f)}var{document:h}=et.getWindow(e);if(h.caretRangeFromPoint)r=h.caretRangeFromPoint(a,n);else{var g=h.caretPositionFromPoint(a,n);g&&((r=h.createRange()).setStart(g.offsetNode,g.offset),r.setEnd(g.offsetNode,g.offset))}if(!r)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return et.toSlateRange(e,r,{exactMatch:!1,suppressThrow:!1})},toSlatePoint(e,t,r){var{exactMatch:a,suppressThrow:n}=r,[o,i]=a?t:normalizeDOMPoint(t),s=o.parentNode,l=null,d=0;if(s){var c,f,h=et.toDOMNode(e,e),g=s.closest('[data-slate-void="true"]'),v=g&&h.contains(g)?g:null,p=s.closest("[data-slate-leaf]"),m=null;if(p){if(l=p.closest('[data-slate-node="text"]')){var w=et.getWindow(e).document.createRange();w.setStart(l,0),w.setEnd(o,i);var b=w.cloneContents();[...Array.prototype.slice.call(b.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(b.querySelectorAll("[contenteditable=false]"))].forEach(e=>{if(Y&&!a&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\uFEFF"!==e.textContext){e.textContent.startsWith("\uFEFF")&&(e.textContent=e.textContent.slice(1));return}e.parentNode.removeChild(e)}),d=b.textContent.length,m=l}}else if(v){for(var M=v.querySelectorAll("[data-slate-leaf]"),D=0;D<M.length;D++){var E=M[D];if(et.hasDOMNode(e,E)){p=E;break}}p?(l=p.closest('[data-slate-node="text"]'),d=(m=p).textContent.length,m.querySelectorAll("[data-slate-zero-width]").forEach(e=>{d-=e.textContent.length})):d=1}m&&d===m.textContent.length&&Y&&"z"===m.getAttribute("data-slate-zero-width")&&null!==(c=m.textContent)&&void 0!==c&&c.startsWith("\uFEFF")&&(s.hasAttribute("data-slate-zero-width")||z&&null!==(f=m.textContent)&&void 0!==f&&f.endsWith("\n\n"))&&d--}if(Y&&!l&&!a){var y=s.hasAttribute("data-slate-node")?s:s.closest("[data-slate-node]");if(y&&et.hasDOMNode(e,y,{editable:!0})){var x=et.toSlateNode(e,y),{path:k,offset:O}=u.ML.start(e,et.findPath(e,x));return y.querySelector("[data-slate-leaf]")||(O=i),{path:k,offset:O}}}if(!l){if(n)return null;throw Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var C=et.toSlateNode(e,l);return{path:et.findPath(e,C),offset:d}},toSlateRange(e,t,r){var a,n,o,i,s,{exactMatch:l,suppressThrow:d}=r;if((isDOMSelection(t)?t.anchorNode:t.startContainer)&&(isDOMSelection(t)?(a=t.anchorNode,n=t.anchorOffset,o=t.focusNode,i=t.focusOffset,s=U&&hasShadowRoot()?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(a=t.startContainer,n=t.startOffset,o=t.endContainer,i=t.endOffset,s=t.collapsed)),null==a||null==o||null==n||null==i)throw Error("Cannot resolve a Slate range from DOM range: ".concat(t));var c=et.toSlatePoint(e,[a,n],{exactMatch:l,suppressThrow:d});if(!c)return null;var f=s?c:et.toSlatePoint(e,[o,i],{exactMatch:l,suppressThrow:d});if(!f)return null;var h={anchor:c,focus:f};return u.e6.isExpanded(h)&&u.e6.isForward(h)&&isDOMElement(o)&&u.ML.void(e,{at:h.focus,mode:"highest"})&&(h=u.ML.unhangRange(e,h,{voids:!0})),h},hasRange(e,t){var{anchor:r,focus:a}=t;return u.ML.hasPath(e,r.path)&&u.ML.hasPath(e,a.path)},androidScheduleFlush(e){var t;null===(t=L.get(e))||void 0===t||t()},androidPendingDiffs:e=>B.get(e)},er=G?d.useLayoutEffect:d.useEffect,ea=["anchor","focus"],en=["anchor","focus"],shallowCompare=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(r=>t.hasOwnProperty(r)&&e[r]===t[r]),isDecoratorRangeListEqual=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var a=e[r],n=t[r],o=_objectWithoutProperties(a,ea),i=_objectWithoutProperties(n,en);if(!u.e6.equals(a,n)||a[A]!==n[A]||!shallowCompare(o,i))return!1}return!0},String=e=>{var{isLast:t,leaf:r,parent:a,text:n}=e,o=useSlateStatic(),i=et.findPath(o,n),s=u.y$.parent(i),l=!0===r[W];return o.isVoid(a)?d.createElement(ZeroWidthString,{length:u.NB.string(a).length}):""!==r.text||a.children[a.children.length-1]!==n||o.isInline(a)||""!==u.ML.string(o,s)?""===r.text?d.createElement(ZeroWidthString,{isMarkPlaceholder:l}):t&&"\n"===r.text.slice(-1)?d.createElement(TextString,{isTrailing:!0,text:r.text}):d.createElement(TextString,{text:r.text}):d.createElement(ZeroWidthString,{isLineBreak:!0,isMarkPlaceholder:l})},TextString=e=>{var{text:t,isTrailing:r=!1}=e,a=(0,d.useRef)(null),getTextContent=()=>"".concat(null!=t?t:"").concat(r?"\n":"");return(er(()=>{var e=getTextContent();a.current&&a.current.textContent!==e&&(a.current.textContent=e)}),a.current)?d.createElement("span",{"data-slate-string":!0,ref:a}):d.createElement("span",{"data-slate-string":!0,ref:a},getTextContent())},ZeroWidthString=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:a=!1}=e,n={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return a&&(n["data-slate-mark-placeholder"]=!0),d.createElement("span",Object.assign({},n),Y&&r?null:"\uFEFF",r?d.createElement("br",null):null)},eo=(0,d.createContext)(null),useSlateStatic=()=>{var e=(0,d.useContext)(eo);if(!e)throw Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},ei=d.memo(e=>{var{leaf:t,isLast:r,text:a,parent:n,renderPlaceholder:o,renderLeaf:i=e=>d.createElement(DefaultLeaf,Object.assign({},e))}=e,s=(0,d.useRef)(null),l=useSlateStatic();(0,d.useEffect)(()=>{var e=null==s?void 0:s.current,t=et.toDOMNode(l,l);if(e&&t)return t.style.minHeight="".concat(e.clientHeight,"px"),b.set(l,e),()=>{t.style.minHeight="auto",b.delete(l)}},[s,t]);var c=d.createElement(String,{isLast:r,leaf:t,parent:n,text:a});if(t[A]){var u={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:s}};c=d.createElement(d.Fragment,null,o(u),c)}return i({attributes:{"data-slate-leaf":!0},children:c,leaf:t,text:a})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&u.xv.equals(t.leaf,e.leaf)&&t.leaf[A]===e.leaf[A]),DefaultLeaf=e=>{var{attributes:t,children:r}=e;return d.createElement("span",Object.assign({},t),r)},es=d.memo(e=>{for(var{decorations:t,isLast:r,parent:a,renderPlaceholder:n,renderLeaf:o,text:i}=e,s=useSlateStatic(),l=(0,d.useRef)(null),c=u.xv.decorations(i,t),f=et.findKey(s,i),h=[],g=0;g<c.length;g++){var v=c[g];h.push(d.createElement(ei,{isLast:r&&g===c.length-1,key:"".concat(f.id,"-").concat(g),renderPlaceholder:n,leaf:v,text:i,parent:a,renderLeaf:o}))}return er(()=>{var e=y.get(s);l.current?(null==e||e.set(f,l.current),D.set(i,l.current),M.set(l.current,i)):(null==e||e.delete(f),D.delete(i))}),d.createElement("span",{"data-slate-node":"text",ref:l},h)},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text&&isDecoratorRangeListEqual(t.decorations,e.decorations)),el=d.memo(e=>{var{decorations:t,element:r,renderElement:a=e=>d.createElement(DefaultElement,Object.assign({},e)),renderPlaceholder:o,renderLeaf:i,selection:s}=e,l=useSlateStatic(),c=useReadOnly(),f=l.isInline(r),h=et.findKey(l,r),g=(0,d.useCallback)(e=>{var t=y.get(l);e?(null==t||t.set(h,e),D.set(r,e),M.set(e,r)):(null==t||t.delete(h),D.delete(r))},[l,h,r]),m=useChildren({decorations:t,node:r,renderElement:a,renderPlaceholder:o,renderLeaf:i,selection:s}),w={"data-slate-node":"element",ref:g};if(f&&(w["data-slate-inline"]=!0),!f&&u.ML.hasInlines(l,r)){var b=u.NB.string(r),E=n()(b);"rtl"===E&&(w.dir=E)}if(u.ML.isVoid(l,r)){w["data-slate-void"]=!0,!c&&f&&(w.contentEditable=!1);var[[x]]=u.NB.texts(r);m=d.createElement(f?"span":"div",{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},d.createElement(es,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:x})),v.set(x,0),p.set(x,r)}return a({attributes:w,children:m,element:r})},(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&isDecoratorRangeListEqual(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&u.e6.equals(e.selection,t.selection))),DefaultElement=e=>{var{attributes:t,children:r,element:a}=e,n=useSlateStatic().isInline(a)?"span":"div";return d.createElement(n,Object.assign({},t,{style:{position:"relative"}}),r)},ed=(0,d.createContext)(()=>[]),useDecorate=()=>(0,d.useContext)(ed),ec=(0,d.createContext)(!1),useSelected=()=>(0,d.useContext)(ec),useChildren=e=>{for(var{decorations:t,node:r,renderElement:a,renderPlaceholder:n,renderLeaf:o,selection:i}=e,s=useDecorate(),l=useSlateStatic(),c=et.findPath(l,r),f=[],h=u.W_.isElement(r)&&!l.isInline(r)&&u.ML.hasInlines(l,r),g=0;g<r.children.length;g++){var m=c.concat(g),w=r.children[g],b=et.findKey(l,w),M=u.ML.range(l,m),D=i&&u.e6.intersection(M,i),E=s([w,m]);for(var y of t){var x=u.e6.intersection(y,M);x&&E.push(x)}u.W_.isElement(w)?f.push(d.createElement(ec.Provider,{key:"provider-".concat(b.id),value:!!D},d.createElement(el,{decorations:E,element:w,key:b.id,renderElement:a,renderPlaceholder:n,renderLeaf:o,selection:D}))):f.push(d.createElement(es,{decorations:E,key:b.id,isLast:h&&g===r.children.length-1,parent:r,renderPlaceholder:n,renderLeaf:o,text:w})),v.set(w,g),p.set(w,r)}return f},eu=(0,d.createContext)(!1),useReadOnly=()=>(0,d.useContext)(eu),ef=(0,d.createContext)(null),useSlate=()=>{var e=(0,d.useContext)(ef);if(!e)throw Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t},eh={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},eg={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},ev={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},create=e=>{var t=eh[e],r=eg[e],a=ev[e],n=t&&(0,f.TB)(t),o=r&&(0,f.TB)(r),i=a&&(0,f.TB)(a);return e=>!!(n&&n(e)||q&&o&&o(e)||!q&&i&&i(e))},ep={isBold:create("bold"),isCompose:create("compose"),isMoveBackward:create("moveBackward"),isMoveForward:create("moveForward"),isDeleteBackward:create("deleteBackward"),isDeleteForward:create("deleteForward"),isDeleteLineBackward:create("deleteLineBackward"),isDeleteLineForward:create("deleteLineForward"),isDeleteWordBackward:create("deleteWordBackward"),isDeleteWordForward:create("deleteWordForward"),isExtendBackward:create("extendBackward"),isExtendForward:create("extendForward"),isExtendLineBackward:create("extendLineBackward"),isExtendLineForward:create("extendLineForward"),isItalic:create("italic"),isMoveLineBackward:create("moveLineBackward"),isMoveLineForward:create("moveLineForward"),isMoveWordBackward:create("moveWordBackward"),isMoveWordForward:create("moveWordForward"),isRedo:create("redo"),isSoftBreak:create("insertSoftBreak"),isSplitBlock:create("splitBlock"),isTransposeCharacter:create("transposeCharacter"),isUndo:create("undo")},createRestoreDomManager=(e,t)=>{var r=[],clear=()=>{r=[]};return{registerMutations:a=>{if(t.current){var n=a.filter(t=>isTrackedMutation(e,t,a));r.push(...n)}},restoreDOM:function(){r.reverse().forEach(e=>{if("characterData"===e.type){e.target.textContent=e.oldValue;return}e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)})}),clear()},clear}},em={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};let RestoreDOMComponent=class RestoreDOMComponent extends d.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:t}=this.props;if(!t.current)throw Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,em)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=createRestoreDomManager(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,a,n=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();return null!=n&&n.length&&(null===(a=this.manager)||void 0===a||a.registerMutations(n)),null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}};RestoreDOMComponent.contextType=eo;var ew=Y?RestoreDOMComponent:e=>{var{children:t}=e;return d.createElement(d.Fragment,null,t)};function normalizeStringDiff(e,t){var{start:r,end:a,text:n}=t,o=e.slice(r,a),i=function(e,t){for(var r=Math.min(e.length,t.length),a=0;a<r;a++)if(e.charAt(a)!==t.charAt(a))return a;return r}(o,n),s=Math.min(o.length-i,n.length-i),l=function(e,t,r){for(var a=Math.min(e.length,t.length,r),n=0;n<a;n++)if(e.charAt(e.length-n-1)!==t.charAt(t.length-n-1))return n;return a}(o,n,s),d={start:r+i,end:a-l,text:n.slice(i,n.length-l)};return d.start===d.end&&0===d.text.length?null:d}function normalizePoint(e,t){var{path:r,offset:a}=t;if(!u.ML.hasPath(e,r))return null;var n=u.NB.get(e,r);if(!u.xv.isText(n))return null;var o=u.ML.above(e,{match:t=>u.ML.isBlock(e,t),at:r});if(!o)return null;for(;a>n.text.length;){var i=u.ML.next(e,{at:r,match:u.xv.isText});if(!i||!u.y$.isDescendant(i[1],o[1]))return null;a-=n.text.length,n=i[0],r=i[1]}return{path:r,offset:a}}function normalizeRange(e,t){var r=normalizePoint(e,t.anchor);if(!r)return null;if(u.e6.isCollapsed(t))return{anchor:r,focus:r};var a=normalizePoint(e,t.focus);return a?{anchor:r,focus:a}:null}function transformPendingPoint(e,t,r){var a=B.get(e),n=null==a?void 0:a.find(e=>{var{path:r}=e;return u.y$.equals(r,t.path)});if(!n||t.offset<=n.diff.start)return u.E9.transform(t,r,{affinity:"backward"});var{diff:o}=n;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},s=u.E9.transform(i,r,{affinity:"backward"});return s?{path:s.path,offset:s.offset+t.offset-o.start}:null}var l={path:t.path,offset:t.offset-o.text.length+o.end-o.start},d=u.E9.transform(l,r,{affinity:"backward"});return d?"split_node"===r.type&&u.y$.equals(r.path,t.path)&&l.offset<r.position&&o.start<r.position?d:{path:d.path,offset:d.offset+o.text.length-o.end+o.start}:null}function transformPendingRange(e,t,r){var a=transformPendingPoint(e,t.anchor,r);if(!a)return null;if(u.e6.isCollapsed(t))return{anchor:a,focus:a};var n=transformPendingPoint(e,t.focus,r);return n?{anchor:a,focus:n}:null}function ownKeys$3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$3(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var debug=function(){},eb=["node"];function ownKeys$2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var eM={subtree:!0,childList:!0,characterData:!0},eD=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"],eE=["text"];function ownKeys$1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Children=e=>d.createElement(d.Fragment,null,useChildren(e)),Editable=e=>{var t,r,a,o,{autoFocus:s,decorate:c=defaultDecorate,onDOMBeforeInput:f,placeholder:h,readOnly:g=!1,renderElement:v,renderLeaf:p,renderPlaceholder:E=e=>d.createElement(DefaultPlaceholder,Object.assign({},e)),scrollSelectionIntoView:y=defaultScrollSelectionIntoView,style:S={},as:j="div"}=e,_=_objectWithoutProperties(e,eD),I=useSlate(),[q,H]=(0,d.useState)(!1),K=(0,d.useRef)(null),ea=(0,d.useRef)([]),{onUserInput:en,receivedUserInput:eo}=(t=useSlateStatic(),r=(0,d.useRef)(!1),a=(0,d.useRef)(0),o=(0,d.useCallback)(()=>{if(!r.current){r.current=!0;var e=et.getWindow(t);e.cancelAnimationFrame(a.current),a.current=e.requestAnimationFrame(()=>{r.current=!1})}},[]),(0,d.useEffect)(()=>()=>cancelAnimationFrame(a.current),[]),{receivedUserInput:r,onUserInput:o}),[,ei]=(0,d.useReducer)(e=>e+1,0);N.set(I,ei),x.set(I,g);var es=(0,d.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,d.useEffect)(()=>{K.current&&s&&K.current.focus()},[s]);var el=(0,d.useCallback)(l()(()=>{if((Y||!et.isComposing(I))&&(!es.isUpdatingSelection||null!=ef&&ef.isFlushing())&&!es.isDraggingInternally){var e=et.findDocumentOrShadowRoot(I),{activeElement:t}=e,r=et.toDOMNode(I,I),a=e.getSelection();if(t===r?(es.latestElement=t,k.set(I,!0)):k.delete(I),!a)return u.YR.deselect(I);var{anchorNode:n,focusNode:o}=a,i=hasEditableTarget(I,n)||isTargetInsideNonReadonlyVoid(I,n),s=hasEditableTarget(I,o)||isTargetInsideNonReadonlyVoid(I,o);if(i&&s){var l=et.toSlateRange(I,a,{exactMatch:!1,suppressThrow:!0});l&&(et.isComposing(I)||null!=ef&&ef.hasPendingChanges()||null!=ef&&ef.isFlushing()?null==ef||ef.handleUserSelect(l):u.YR.select(I,l))}!g||i&&s||u.YR.deselect(I)}},100),[g]),ec=(0,d.useMemo)(()=>i()(el,0),[el]),ef=function(e){var t,{node:r}=e,a=_objectWithoutProperties(e,eb);if(!Y)return null;var n=useSlateStatic(),o=(t=(0,d.useRef)(!1),(0,d.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current),[i]=(0,d.useState)(()=>(function(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:a}=e,n=!1,o=null,i=null,s=null,l=0,d=!1,applyPendingSelection=()=>{var e=T.get(t);if(T.delete(t),e){var{selection:r}=t,a=normalizeRange(t,e);!a||r&&u.e6.equals(a,r)||u.YR.select(t,a)}},performAction=()=>{var e=R.get(t);if(R.delete(t),e){if(e.at){var r=u.E9.isPoint(e.at)?normalizePoint(t,e.at):normalizeRange(t,e.at);if(!r)return;var a=u.ML.range(t,r);t.selection&&u.e6.equals(t.selection,a)||u.YR.select(t,r)}e.run()}},flush=()=>{if(i&&(clearTimeout(i),i=null),s&&(clearTimeout(s),s=null),!hasPendingDiffs()&&!hasPendingAction()){applyPendingSelection();return}n||(n=!0,setTimeout(()=>n=!1)),hasPendingAction()&&(n="action");var e=t.selection&&u.ML.rangeRef(t,t.selection,{affinity:"forward"});F.set(t,t.marks),debug("flush",R.get(t),B.get(t));for(var o=!!(null!==(l=B.get(t))&&void 0!==l&&l.length);c=null===(f=B.get(t))||void 0===f?void 0:f[0];){var l,c,f,h,g=P.get(t);void 0!==g&&(P.delete(t),t.marks=g),g&&!1===d&&(d=null);var v=function(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}(c);t.selection&&u.e6.equals(t.selection,v)||u.YR.select(t,v),c.diff.text?u.ML.insertText(t,c.diff.text):u.ML.deleteFragment(t),B.set(t,null===(h=B.get(t))||void 0===h?void 0:h.filter(e=>{var{id:t}=e;return t!==c.id})),!function(e,t){var{path:r,diff:a}=t;if(!u.ML.hasPath(e,r))return!1;var n=u.NB.get(e,r);if(!u.xv.isText(n))return!1;if(a.start!==n.text.length||0===a.text.length)return n.text.slice(a.start,a.start+a.text.length)===a.text;var o=u.y$.next(r);if(!u.ML.hasPath(e,o))return!1;var i=u.NB.get(e,o);return u.xv.isText(i)&&i.text.startsWith(a.text)}(t,c)&&(o=!1,R.delete(t),F.delete(t),n="action",T.delete(t),r.cancel(),a.cancel(),null==e||e.unref())}var p=null==e?void 0:e.unref();if(!p||T.get(t)||t.selection&&u.e6.equals(p,t.selection)||u.YR.select(t,p),hasPendingAction()){performAction();return}o&&r(),r.flush(),a.flush(),applyPendingSelection();var m=F.get(t);F.delete(t),void 0!==m&&(t.marks=m,t.onChange())},updatePlaceholderVisibility=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=b.get(t);if(r){if(hasPendingDiffs()||e){r.style.display="none";return}r.style.removeProperty("display")}},storeDiff=(e,r)=>{var a,n,o,i,s,d,c,f,h=null!==(f=B.get(t))&&void 0!==f?f:[];B.set(t,h);var g=u.NB.leaf(t,e),v=h.findIndex(t=>u.y$.equals(t.path,e));if(v<0){normalizeStringDiff(g.text,r)&&h.push({path:e,diff:r,id:l++}),updatePlaceholderVisibility();return}var p=(a=g.text,o=Math.min((n=h[v].diff).start,r.start),i=Math.max(0,Math.min(n.start+n.text.length,r.end)-r.start),s=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end),e)}(a,n,r),d=Math.max(r.start+r.text.length,n.start+n.text.length+(n.start+n.text.length>r.start?r.text.length:0)-i),c=s.slice(o,d),normalizeStringDiff(a,{start:o,end:Math.max(n.end,r.end-n.text.length+(n.end-n.start)),text:c}));if(!p){h.splice(v,1),updatePlaceholderVisibility();return}h[v]=_objectSpread$3(_objectSpread$3({},h[v]),{},{diff:p})},scheduleAction=function(e){var{at:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=!1,T.delete(t),r.cancel(),a.cancel(),hasPendingAction()&&flush(),R.set(t,{at:n,run:e}),s=setTimeout(flush)},hasPendingAction=()=>!!R.get(t),hasPendingDiffs=()=>{var e;return!!(null!==(e=B.get(t))&&void 0!==e&&e.length)},scheduleFlush=()=>{hasPendingAction()||(s=setTimeout(flush))};return{flush,scheduleFlush,hasPendingDiffs,hasPendingAction,hasPendingChanges:()=>hasPendingAction()||hasPendingDiffs(),isFlushing:()=>n,handleUserSelect:e=>{T.set(t,e),i&&(clearTimeout(i),i=null);var{selection:r}=t;if(e){var a=!r||!u.y$.equals(r.anchor.path,e.anchor.path),n=!r||!u.y$.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(a&&d||n)&&(d=!1),(a||!hasPendingDiffs())&&(i=setTimeout(flush,200))}},handleCompositionEnd:e=>{o&&clearTimeout(o),o=setTimeout(()=>{O.set(t,!1),flush()},25)},handleCompositionStart:e=>{O.set(t,!0),o&&(clearTimeout(o),o=null)},handleDOMBeforeInput:e=>{i&&(clearTimeout(i),i=null);var{inputType:r}=e,a=null,n=e.dataTransfer||e.data||void 0;!1!==d&&"insertText"!==r&&"insertCompositionText"!==r&&(d=!1);var[o]=e.getTargetRanges();o&&(a=et.toSlateRange(t,o,{exactMatch:!1,suppressThrow:!0}));var s=et.getWindow(t).getSelection();if(!a&&s&&(o=s,a=et.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0})),a=null!==(w=a)&&void 0!==w?w:t.selection){if(u.e6.isExpanded(a)&&r.startsWith("delete")){var[l,c]=u.e6.edges(a);if(u.NB.leaf(t,l.path).text.length===l.offset&&0===c.offset){var f=u.ML.next(t,{at:l.path,match:u.xv.isText});f&&u.y$.equals(f[1],c.path)&&(a={anchor:c,focus:c})}}if(u.e6.isExpanded(a)&&r.startsWith("delete")){if(u.y$.equals(a.anchor.path,a.focus.path)){var[h,g]=u.e6.edges(a);return storeDiff(a.anchor.path,{text:"",end:g.offset,start:h.offset})}var v=r.endsWith("Backward")?"backward":"forward";return scheduleAction(()=>u.ML.deleteFragment(t,{direction:v}),{at:a})}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return scheduleAction(()=>u.ML.deleteFragment(t),{at:a});case"deleteContent":case"deleteContentForward":var{anchor:p}=a;if(u.e6.isCollapsed(a)){var m=u.NB.leaf(t,p.path);if(p.offset<m.text.length)return storeDiff(p.path,{text:"",start:p.offset,end:p.offset+1})}return scheduleAction(()=>u.ML.deleteForward(t),{at:a});case"deleteContentBackward":var w,b,{anchor:M}=a;if((isDOMSelection(o)?o.isCollapsed:!!(null!==(b=o)&&void 0!==b&&b.collapsed))&&u.e6.isCollapsed(a)&&M.offset>0)return storeDiff(M.path,{text:"",start:M.offset-1,end:M.offset});return scheduleAction(()=>u.ML.deleteBackward(t),{at:a});case"deleteEntireSoftLine":return scheduleAction(()=>{u.ML.deleteBackward(t,{unit:"line"}),u.ML.deleteForward(t,{unit:"line"})},{at:a});case"deleteHardLineBackward":return scheduleAction(()=>u.ML.deleteBackward(t,{unit:"block"}),{at:a});case"deleteSoftLineBackward":return scheduleAction(()=>u.ML.deleteBackward(t,{unit:"line"}),{at:a});case"deleteHardLineForward":return scheduleAction(()=>u.ML.deleteForward(t,{unit:"block"}),{at:a});case"deleteSoftLineForward":return scheduleAction(()=>u.ML.deleteForward(t,{unit:"line"}),{at:a});case"deleteWordBackward":return scheduleAction(()=>u.ML.deleteBackward(t,{unit:"word"}),{at:a});case"deleteWordForward":return scheduleAction(()=>u.ML.deleteForward(t,{unit:"word"}),{at:a});case"insertLineBreak":return scheduleAction(()=>u.ML.insertSoftBreak(t),{at:a});case"insertParagraph":return scheduleAction(()=>u.ML.insertBreak(t),{at:a});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if((null==n?void 0:n.constructor.name)==="DataTransfer")return scheduleAction(()=>et.insertData(t,n),{at:a});if("string"==typeof n&&n.includes("\n"))return scheduleAction(()=>u.ML.insertSoftBreak(t),{at:u.e6.end(a)});var D=null!=n?n:"";if(P.get(t)&&(D=D.replace("\uFEFF","")),u.y$.equals(a.anchor.path,a.focus.path)){var[E,y]=u.e6.edges(a),x={start:E.offset,end:y.offset,text:D};if(D&&d&&"insertCompositionText"===r){var k=d.start+d.text.search(/\S|$/);x.start+x.text.search(/\S|$/)===k+1&&x.end===d.start+d.text.length?(x.start-=1,d=null,scheduleFlush()):d=!1}else d="insertText"===r&&(null===d?x:!!(d&&u.e6.isCollapsed(a))&&d.end+d.text.length===E.offset&&_objectSpread$3(_objectSpread$3({},d),{},{text:d.text+D}));storeDiff(E.path,x);return}return scheduleAction(()=>u.ML.insertText(t,D),{at:a})}}},handleKeyDown:e=>{hasPendingDiffs()||(updatePlaceholderVisibility(!0),setTimeout(updatePlaceholderVisibility))},handleDomMutations:e=>{if(!(hasPendingDiffs()||hasPendingAction())&&e.some(r=>isTrackedMutation(t,r,e))){var r;null===(r=N.get(t))||void 0===r||r()}},handleInput:()=>{(hasPendingAction()||!hasPendingDiffs())&&flush()}}})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({editor:n},a)));return!function(e,t,r){var[a]=(0,d.useState)(()=>new MutationObserver(t));er(()=>{a.takeRecords()}),(0,d.useEffect)(()=>{if(!e.current)throw Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(e.current,r),()=>a.disconnect()},[])}(r,i.handleDomMutations,eM),L.set(n,i.scheduleFlush),o&&i.flush(),i}({node:K,onDOMSelectionChange:el,scheduleOnDOMSelectionChange:ec});er(()=>{K.current&&(e=getDefaultView(K.current))?(m.set(I,e),w.set(I,K.current),D.set(I,K.current),M.set(K.current,I)):D.delete(I);var e,{selection:t}=I,r=et.findDocumentOrShadowRoot(I).getSelection();if(!(!r||!et.isFocused(I)||null!=ef&&ef.hasPendingAction())){var setDomSelection=e=>{var a="None"!==r.type;if(t||a){var n=w.get(I),o=!1;if(n.contains(r.anchorNode)&&n.contains(r.focusNode)&&(o=!0),a&&o&&t&&!e){var i=et.toSlateRange(I,r,{exactMatch:!0,suppressThrow:!0});if(i&&u.e6.equals(i,t)){if(!es.hasMarkPlaceholder)return;var s,{anchorNode:l}=r;if(null!=l&&null!==(s=l.parentElement)&&void 0!==s&&s.hasAttribute("data-slate-mark-placeholder"))return}}if(t&&!et.hasRange(I,t)){I.selection=et.toSlateRange(I,r,{exactMatch:!1,suppressThrow:!0});return}es.isUpdatingSelection=!0;var d=t&&et.toDOMRange(I,t);return d?(u.e6.isBackward(t)?r.setBaseAndExtent(d.endContainer,d.endOffset,d.startContainer,d.startOffset):r.setBaseAndExtent(d.startContainer,d.startOffset,d.endContainer,d.endOffset),y(I,d)):r.removeAllRanges(),d}},a=setDomSelection(),n=(null==ef?void 0:ef.isFlushing())==="action";if(!Y||!n){setTimeout(()=>{a&&z&&et.toDOMNode(I,I).focus(),es.isUpdatingSelection=!1});return}var o=null,i=requestAnimationFrame(()=>{if(n){var ensureDomSelection=e=>{try{et.toDOMNode(I,I).focus(),setDomSelection(e)}catch(e){}};ensureDomSelection(),o=setTimeout(()=>{ensureDomSelection(!0),es.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(i),o&&clearTimeout(o)}}});var eh=(0,d.useCallback)(e=>{if(en(),!g&&hasEditableTarget(I,e.target)&&!isDOMEventHandled(e,f)){if(ef)return ef.handleDOMBeforeInput(e);ec.flush(),el.flush();var{selection:t}=I,{inputType:r}=e,a=e.dataTransfer||e.data||void 0,n="insertCompositionText"===r||"deleteCompositionText"===r;if(!(n&&et.isComposing(I))){var o=!1;if("insertText"===r&&t&&u.e6.isCollapsed(t)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==t.anchor.offset){o=!0,I.marks&&(o=!1);var{anchor:i}=t,[s,l]=et.toDOMPoint(I,i),d=null===(v=s.parentElement)||void 0===v?void 0:v.closest("a"),c=et.getWindow(I);if(o&&d&&et.hasDOMNode(I,d)){var h,v,p,m,w=null==c?void 0:c.document.createTreeWalker(d,NodeFilter.SHOW_TEXT).lastChild();w===s&&(null===(m=w.textContent)||void 0===m?void 0:m.length)===l&&(o=!1)}if(o&&s.parentElement&&(null==c?void 0:null===(p=c.getComputedStyle(s.parentElement))||void 0===p?void 0:p.whiteSpace)==="pre"){var b=u.ML.above(I,{at:i.path,match:e=>u.ML.isBlock(I,e)});b&&u.NB.string(b[0]).includes("	")&&(o=!1)}}if(!r.startsWith("delete")||r.startsWith("deleteBy")){var[M]=e.getTargetRanges();if(M){var D=et.toSlateRange(I,M,{exactMatch:!1,suppressThrow:!1});if(!t||!u.e6.equals(t,D)){o=!1;var E=!n&&I.selection&&u.ML.rangeRef(I,I.selection);u.YR.select(I,D),E&&C.set(I,E)}}}if(!n){if(o||e.preventDefault(),t&&u.e6.isExpanded(t)&&r.startsWith("delete")){var y=r.endsWith("Backward")?"backward":"forward";u.ML.deleteFragment(I,{direction:y});return}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":u.ML.deleteFragment(I);break;case"deleteContent":case"deleteContentForward":u.ML.deleteForward(I);break;case"deleteContentBackward":u.ML.deleteBackward(I);break;case"deleteEntireSoftLine":u.ML.deleteBackward(I,{unit:"line"}),u.ML.deleteForward(I,{unit:"line"});break;case"deleteHardLineBackward":u.ML.deleteBackward(I,{unit:"block"});break;case"deleteSoftLineBackward":u.ML.deleteBackward(I,{unit:"line"});break;case"deleteHardLineForward":u.ML.deleteForward(I,{unit:"block"});break;case"deleteSoftLineForward":u.ML.deleteForward(I,{unit:"line"});break;case"deleteWordBackward":u.ML.deleteBackward(I,{unit:"word"});break;case"deleteWordForward":u.ML.deleteForward(I,{unit:"word"});break;case"insertLineBreak":u.ML.insertSoftBreak(I);break;case"insertParagraph":u.ML.insertBreak(I);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&et.isComposing(I)&&(H(!1),O.set(I,!1)),(null==a?void 0:a.constructor.name)==="DataTransfer"?et.insertData(I,a):"string"==typeof a&&(o?ea.current.push(()=>u.ML.insertText(I,a)):u.ML.insertText(I,a))}var x=null===(h=C.get(I))||void 0===h?void 0:h.unref();C.delete(I),!x||I.selection&&u.e6.equals(I.selection,x)||u.YR.select(I,x)}}}},[g,f]);er(()=>(K.current&&ee&&K.current.addEventListener("beforeinput",eh),()=>{K.current&&ee&&K.current.removeEventListener("beforeinput",eh)}),[eh]),er(()=>{var e=et.getWindow(I);return e.document.addEventListener("selectionchange",ec),()=>{e.document.removeEventListener("selectionchange",ec)}},[ec]);var eg=c([I,[]]);if(h&&1===I.children.length&&1===Array.from(u.NB.texts(I)).length&&""===u.NB.string(I)&&!q){var ev=u.ML.start(I,[]);eg.push({[A]:!0,placeholder:h,anchor:ev,focus:ev})}var{marks:em}=I;if(es.hasMarkPlaceholder=!1,I.selection&&u.e6.isCollapsed(I.selection)&&em){var{anchor:ey}=I.selection,ex=u.NB.leaf(I,ey.path),ek=_objectWithoutProperties(ex,eE);if(!u.xv.equals(ex,em,{loose:!0})){es.hasMarkPlaceholder=!0;var eO=Object.fromEntries(Object.keys(ek).map(e=>[e,null]));eg.push(_objectSpread$1(_objectSpread$1(_objectSpread$1({[W]:!0},eO),em),{},{anchor:ey,focus:ey}))}}return(0,d.useEffect)(()=>{setTimeout(()=>{var{selection:e}=I;if(e){var{anchor:t}=e,r=u.NB.leaf(I,t.path);if(em&&!u.xv.equals(r,em,{loose:!0})){P.set(I,em);return}}P.delete(I)})}),d.createElement(eu.Provider,{value:g},d.createElement(ed.Provider,{value:c},d.createElement(ew,{node:K,receivedUserInput:eo},d.createElement(j,Object.assign({role:g?void 0:"textbox","aria-multiline":!g||void 0},_,{spellCheck:(!!ee||!G)&&_.spellCheck,autoCorrect:ee||!G?_.autoCorrect:"false",autoCapitalize:ee||!G?_.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!g,zindex:-1,suppressContentEditableWarning:!0,ref:K,style:_objectSpread$1({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},S),onBeforeInput:(0,d.useCallback)(e=>{if(!ee&&!g&&!isEventHandled(e,_.onBeforeInput)&&hasEditableTarget(I,e.target)&&(e.preventDefault(),!et.isComposing(I))){var t=e.data;u.ML.insertText(I,t)}},[g]),onInput:(0,d.useCallback)(e=>{if(ef){ef.handleInput();return}for(var t of ea.current)t();ea.current=[]},[]),onBlur:(0,d.useCallback)(e=>{if(!(g||es.isUpdatingSelection||!hasEditableTarget(I,e.target)||isEventHandled(e,_.onBlur))){var t=et.findDocumentOrShadowRoot(I);if(es.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===et.toDOMNode(I,I)||isDOMElement(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&isDOMNode(r)&&et.hasDOMNode(I,r)){var a=et.toSlateNode(I,r);if(u.W_.isElement(a)&&!I.isVoid(a))return}if(V){var n=t.getSelection();null==n||n.removeAllRanges()}k.delete(I)}}}},[g,_.onBlur]),onClick:(0,d.useCallback)(e=>{if(hasTarget(I,e.target)&&!isEventHandled(e,_.onClick)&&isDOMNode(e.target)){var t=et.toSlateNode(I,e.target),r=et.findPath(I,t);if(u.ML.hasPath(I,r)&&u.NB.get(I,r)===t){if(3===e.detail&&r.length>=1){var a=r;if(!u.ML.isBlock(I,t)){var n,o=u.ML.above(I,{match:e=>u.ML.isBlock(I,e),at:r});a=null!==(n=null==o?void 0:o[1])&&void 0!==n?n:r.slice(0,1)}var i=u.ML.range(I,a);u.YR.select(I,i);return}if(!g){var s=u.ML.start(I,r),l=u.ML.end(I,r),d=u.ML.void(I,{at:s}),c=u.ML.void(I,{at:l});if(d&&c&&u.y$.equals(d[1],c[1])){var f=u.ML.range(I,s);u.YR.select(I,f)}}}}},[g,_.onClick]),onCompositionEnd:(0,d.useCallback)(e=>{if(hasEditableTarget(I,e.target)&&(et.isComposing(I)&&(H(!1),O.set(I,!1)),null==ef||ef.handleCompositionEnd(e),!isEventHandled(e,_.onCompositionEnd)&&!Y&&!V&&!Z&&!$&&!X&&!Q&&!J&&e.data)){var t=P.get(I);P.delete(I),void 0!==t&&(F.set(I,I.marks),I.marks=t),u.ML.insertText(I,e.data);var r=F.get(I);F.delete(I),void 0!==r&&(I.marks=r)}},[_.onCompositionEnd]),onCompositionUpdate:(0,d.useCallback)(e=>{!hasEditableTarget(I,e.target)||isEventHandled(e,_.onCompositionUpdate)||et.isComposing(I)||(H(!0),O.set(I,!0))},[_.onCompositionUpdate]),onCompositionStart:(0,d.useCallback)(e=>{if(hasEditableTarget(I,e.target)&&(null==ef||ef.handleCompositionStart(e),!isEventHandled(e,_.onCompositionStart)&&!Y)){H(!0);var{selection:t}=I;if(t){if(u.e6.isExpanded(t)){u.ML.deleteFragment(I);return}var r=u.ML.above(I,{match:e=>u.ML.isInline(I,e),mode:"highest"});if(r){var[,a]=r;if(u.ML.isEnd(I,t.anchor,a)){var n=u.ML.after(I,a);u.YR.setSelection(I,{anchor:n,focus:n})}}}}},[_.onCompositionStart]),onCopy:(0,d.useCallback)(e=>{hasEditableTarget(I,e.target)&&!isEventHandled(e,_.onCopy)&&(e.preventDefault(),et.setFragmentData(I,e.clipboardData,"copy"))},[_.onCopy]),onCut:(0,d.useCallback)(e=>{if(!g&&hasEditableTarget(I,e.target)&&!isEventHandled(e,_.onCut)){e.preventDefault(),et.setFragmentData(I,e.clipboardData,"cut");var{selection:t}=I;if(t){if(u.e6.isExpanded(t))u.ML.deleteFragment(I);else{var r=u.NB.parent(I,t.anchor.path);u.ML.isVoid(I,r)&&u.YR.delete(I)}}}},[g,_.onCut]),onDragOver:(0,d.useCallback)(e=>{if(hasTarget(I,e.target)&&!isEventHandled(e,_.onDragOver)){var t=et.toSlateNode(I,e.target);u.ML.isVoid(I,t)&&e.preventDefault()}},[_.onDragOver]),onDragStart:(0,d.useCallback)(e=>{if(!g&&hasTarget(I,e.target)&&!isEventHandled(e,_.onDragStart)){var t=et.toSlateNode(I,e.target),r=et.findPath(I,t);if(u.ML.isVoid(I,t)||u.ML.void(I,{at:r,voids:!0})){var a=u.ML.range(I,r);u.YR.select(I,a)}es.isDraggingInternally=!0,et.setFragmentData(I,e.dataTransfer,"drag")}},[g,_.onDragStart]),onDrop:(0,d.useCallback)(e=>{if(!g&&hasTarget(I,e.target)&&!isEventHandled(e,_.onDrop)){e.preventDefault();var t=I.selection,r=et.findEventRange(I,e),a=e.dataTransfer;u.YR.select(I,r),es.isDraggingInternally&&t&&!u.e6.equals(t,r)&&!u.ML.void(I,{at:r,voids:!0})&&u.YR.delete(I,{at:t}),et.insertData(I,a),et.isFocused(I)||et.focus(I)}es.isDraggingInternally=!1},[g,_.onDrop]),onDragEnd:(0,d.useCallback)(e=>{!g&&es.isDraggingInternally&&_.onDragEnd&&hasTarget(I,e.target)&&_.onDragEnd(e),es.isDraggingInternally=!1},[g,_.onDragEnd]),onFocus:(0,d.useCallback)(e=>{if(!g&&!es.isUpdatingSelection&&hasEditableTarget(I,e.target)&&!isEventHandled(e,_.onFocus)){var t=et.toDOMNode(I,I),r=et.findDocumentOrShadowRoot(I);if(es.latestElement=r.activeElement,z&&e.target!==t){t.focus();return}k.set(I,!0)}},[g,_.onFocus]),onKeyDown:(0,d.useCallback)(e=>{if(!g&&hasEditableTarget(I,e.target)){null==ef||ef.handleKeyDown(e);var{nativeEvent:t}=e;if(et.isComposing(I)&&!1===t.isComposing&&(O.set(I,!1),H(!1)),!(isEventHandled(e,_.onKeyDown)||et.isComposing(I))){var{selection:r}=I,a=I.children[null!==r?r.focus.path[0]:0],o="rtl"===n()(u.NB.string(a));if(ep.isRedo(t)){e.preventDefault(),"function"==typeof I.redo&&I.redo();return}if(ep.isUndo(t)){e.preventDefault(),"function"==typeof I.undo&&I.undo();return}if(ep.isMoveLineBackward(t)){e.preventDefault(),u.YR.move(I,{unit:"line",reverse:!0});return}if(ep.isMoveLineForward(t)){e.preventDefault(),u.YR.move(I,{unit:"line"});return}if(ep.isExtendLineBackward(t)){e.preventDefault(),u.YR.move(I,{unit:"line",edge:"focus",reverse:!0});return}if(ep.isExtendLineForward(t)){e.preventDefault(),u.YR.move(I,{unit:"line",edge:"focus"});return}if(ep.isMoveBackward(t)){e.preventDefault(),r&&u.e6.isCollapsed(r)?u.YR.move(I,{reverse:!o}):u.YR.collapse(I,{edge:"start"});return}if(ep.isMoveForward(t)){e.preventDefault(),r&&u.e6.isCollapsed(r)?u.YR.move(I,{reverse:o}):u.YR.collapse(I,{edge:"end"});return}if(ep.isMoveWordBackward(t)){e.preventDefault(),r&&u.e6.isExpanded(r)&&u.YR.collapse(I,{edge:"focus"}),u.YR.move(I,{unit:"word",reverse:!o});return}if(ep.isMoveWordForward(t)){e.preventDefault(),r&&u.e6.isExpanded(r)&&u.YR.collapse(I,{edge:"focus"}),u.YR.move(I,{unit:"word",reverse:o});return}if(ee){if((U||V)&&r&&(ep.isDeleteBackward(t)||ep.isDeleteForward(t))&&u.e6.isCollapsed(r)){var i=u.NB.parent(I,r.anchor.path);if(u.W_.isElement(i)&&u.ML.isVoid(I,i)&&(u.ML.isInline(I,i)||u.ML.isBlock(I,i))){e.preventDefault(),u.ML.deleteBackward(I,{unit:"block"});return}}}else{if(ep.isBold(t)||ep.isItalic(t)||ep.isTransposeCharacter(t)){e.preventDefault();return}if(ep.isSoftBreak(t)){e.preventDefault(),u.ML.insertSoftBreak(I);return}if(ep.isSplitBlock(t)){e.preventDefault(),u.ML.insertBreak(I);return}if(ep.isDeleteBackward(t)){e.preventDefault(),r&&u.e6.isExpanded(r)?u.ML.deleteFragment(I,{direction:"backward"}):u.ML.deleteBackward(I);return}if(ep.isDeleteForward(t)){e.preventDefault(),r&&u.e6.isExpanded(r)?u.ML.deleteFragment(I,{direction:"forward"}):u.ML.deleteForward(I);return}if(ep.isDeleteLineBackward(t)){e.preventDefault(),r&&u.e6.isExpanded(r)?u.ML.deleteFragment(I,{direction:"backward"}):u.ML.deleteBackward(I,{unit:"line"});return}if(ep.isDeleteLineForward(t)){e.preventDefault(),r&&u.e6.isExpanded(r)?u.ML.deleteFragment(I,{direction:"forward"}):u.ML.deleteForward(I,{unit:"line"});return}if(ep.isDeleteWordBackward(t)){e.preventDefault(),r&&u.e6.isExpanded(r)?u.ML.deleteFragment(I,{direction:"backward"}):u.ML.deleteBackward(I,{unit:"word"});return}if(ep.isDeleteWordForward(t)){e.preventDefault(),r&&u.e6.isExpanded(r)?u.ML.deleteFragment(I,{direction:"forward"}):u.ML.deleteForward(I,{unit:"word"});return}}}}},[g,_.onKeyDown]),onPaste:(0,d.useCallback)(e=>{!g&&hasEditableTarget(I,e.target)&&!isEventHandled(e,_.onPaste)&&(!ee||isPlainTextOnlyPaste(e.nativeEvent))&&(e.preventDefault(),et.insertData(I,e.clipboardData))},[g,_.onPaste])}),d.createElement(Children,{decorations:eg,node:I,renderElement:v,renderPlaceholder:E,renderLeaf:p,selection:I.selection})))))},DefaultPlaceholder=e=>{var{attributes:t,children:r}=e;return d.createElement("span",Object.assign({},t),r,Y&&d.createElement("br",null))},defaultDecorate=()=>[],defaultScrollSelectionIntoView=(e,t)=>{if(!e.selection||e.selection&&u.e6.isCollapsed(e.selection)){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),(0,c.Z)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},hasTarget=(e,t)=>isDOMNode(t)&&et.hasDOMNode(e,t),hasEditableTarget=(e,t)=>isDOMNode(t)&&et.hasDOMNode(e,t,{editable:!0}),isTargetInsideNonReadonlyVoid=(e,t)=>{if(x.get(e))return!1;var r=hasTarget(e,t)&&et.toSlateNode(e,t);return u.ML.isVoid(e,r)},isEventHandled=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},isDOMEventHandled=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},ey=(0,d.createContext)(!1),useFocused=()=>(0,d.useContext)(ey),ex=(0,d.createContext)({}),ek=["editor","children","onChange","value"],Slate=e=>{var t,r,a,{editor:n,children:o,onChange:i,value:s}=e,l=_objectWithoutProperties(e,ek),c=(0,d.useRef)(!1),[f,h]=d.useState(()=>{if(!u.NB.isNodeList(s))throw Error("[Slate] value is invalid! Expected a list of elements"+"but got: ".concat(u.o4.stringify(s)));if(!u.ML.isEditor(n))throw Error("[Slate] editor is invalid! you passed:"+"".concat(u.o4.stringify(n)));return n.children=s,Object.assign(n,l),{v:0,editor:n}}),{selectorContext:g,onChange:v}=(t=(0,d.useRef)([]).current,r=(0,d.useRef)({editor:n}).current,a=(0,d.useCallback)(e=>{r.editor=e,t.forEach(t=>t(e))},[]),{selectorContext:(0,d.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})}),[t,r]),onChange:a}),p=(0,d.useCallback)(()=>{i&&i(n.children),h(e=>({v:e.v+1,editor:n})),v(n)},[i]);S.set(n,p),(0,d.useEffect)(()=>()=>{S.set(n,()=>{}),c.current=!0},[]);var[m,w]=(0,d.useState)(et.isFocused(n));return(0,d.useEffect)(()=>{w(et.isFocused(n))}),er(()=>{var fn=()=>w(et.isFocused(n));return I?(document.addEventListener("focusin",fn),document.addEventListener("focusout",fn),()=>{document.removeEventListener("focusin",fn),document.removeEventListener("focusout",fn)}):(document.addEventListener("focus",fn,!0),document.addEventListener("blur",fn,!0),()=>{document.removeEventListener("focus",fn,!0),document.removeEventListener("blur",fn,!0)})},[]),d.createElement(ex.Provider,{value:g},d.createElement(ef.Provider,{value:f},d.createElement(eo.Provider,{value:f.editor},d.createElement(ey.Provider,{value:m},o))))},doRectsIntersect=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},areRangesSameLine=(e,t,r)=>{var a=et.toDOMRange(e,t).getBoundingClientRect(),n=et.toDOMRange(e,r).getBoundingClientRect();return doRectsIntersect(a,n)&&doRectsIntersect(n,a)},findCurrentLineRange=(e,t)=>{var r=u.ML.range(e,u.e6.end(t)),a=Array.from(u.ML.positions(e,{at:t})),n=0,o=a.length,i=Math.floor(o/2);if(areRangesSameLine(e,u.ML.range(e,a[n]),r))return u.ML.range(e,a[n],r);if(a.length<2)return u.ML.range(e,a[a.length-1],r);for(;i!==a.length&&i!==n;)areRangesSameLine(e,u.ML.range(e,a[i]),r)?o=i:n=i,i=Math.floor((n+o)/2);return u.ML.range(e,a[o],r)};function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var withReact=e=>{var{apply:t,onChange:r,deleteBackward:a,addMark:n,removeMark:o}=e;return y.set(e,new WeakMap),e.addMark=(t,r)=>{var a,o;null===(a=L.get(e))||void 0===a||a(),!P.get(e)&&null!==(o=B.get(e))&&void 0!==o&&o.length&&P.set(e,null),F.delete(e),n(t,r)},e.removeMark=t=>{var r;!P.get(e)&&null!==(r=B.get(e))&&void 0!==r&&r.length&&P.set(e,null),F.delete(e),o(t)},e.deleteBackward=t=>{if("line"!==t)return a(t);if(e.selection&&u.e6.isCollapsed(e.selection)){var r=u.ML.above(e,{match:t=>u.ML.isBlock(e,t),at:e.selection});if(r){var[,n]=r,o=u.ML.range(e,n,e.selection.anchor),i=findCurrentLineRange(e,o);u.e6.isCollapsed(i)||u.YR.delete(e,{at:i})}}},e.apply=r=>{var a,n=[],o=B.get(e);if(null!=o&&o.length){var i=o.map(e=>(function(e,t){var{path:r,diff:a,id:n}=e;switch(t.type){case"insert_text":if(!u.y$.equals(t.path,r)||t.offset>=a.end)return e;if(t.offset<=a.start)return{diff:{start:t.text.length+a.start,end:t.text.length+a.end,text:a.text},id:n,path:r};return{diff:{start:a.start,end:a.end+t.text.length,text:a.text},id:n,path:r};case"remove_text":if(!u.y$.equals(t.path,r)||t.offset>=a.end)return e;if(t.offset+t.text.length<=a.start)return{diff:{start:a.start-t.text.length,end:a.end-t.text.length,text:a.text},id:n,path:r};return{diff:{start:a.start,end:a.end-t.text.length,text:a.text},id:n,path:r};case"split_node":if(!u.y$.equals(t.path,r)||t.position>=a.end)return{diff:a,id:n,path:u.y$.transform(r,t,{affinity:"backward"})};if(t.position>a.start)return{diff:{start:a.start,end:Math.min(t.position,a.end),text:a.text},id:n,path:r};return{diff:{start:a.start-t.position,end:a.end-t.position,text:a.text},id:n,path:u.y$.transform(r,t,{affinity:"forward"})};case"merge_node":if(!u.y$.equals(t.path,r))return{diff:a,id:n,path:u.y$.transform(r,t)};return{diff:{start:a.start+t.position,end:a.end+t.position,text:a.text},id:n,path:u.y$.transform(r,t)}}var o=u.y$.transform(r,t);return o?{diff:a,path:o,id:n}:null})(e,r)).filter(Boolean);B.set(e,i)}var s=T.get(e);s&&T.set(e,transformPendingRange(e,s,r));var l=R.get(e);if(null!=l&&l.at){var d=u.E9.isPoint(null==l?void 0:l.at)?transformPendingPoint(e,l.at,r):transformPendingRange(e,l.at,r);R.set(e,d?_objectSpread(_objectSpread({},l),{},{at:d}):null)}switch(r.type){case"insert_text":case"remove_text":case"set_node":case"split_node":n.push(...getMatches(e,r.path));break;case"set_selection":null===(a=C.get(e))||void 0===a||a.unref(),C.delete(e);break;case"insert_node":case"remove_node":n.push(...getMatches(e,u.y$.parent(r.path)));break;case"merge_node":n.push(...getMatches(e,u.y$.previous(r.path)));break;case"move_node":n.push(...getMatches(e,u.y$.common(u.y$.parent(r.path),u.y$.parent(r.newPath))))}for(var[c,f]of(t(r),n)){var[h]=u.ML.node(e,c);E.set(h,f)}},e.setFragmentData=t=>{var{selection:r}=e;if(r){var[a,n]=u.e6.edges(r),o=u.ML.void(e,{at:a.path}),i=u.ML.void(e,{at:n.path});if(!u.e6.isCollapsed(r)||o){var s=et.toDOMRange(e,r),l=s.cloneContents(),d=l.childNodes[0];if(l.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(d=e)}),i){var[c]=i,f=s.cloneRange(),h=et.toDOMNode(e,c);f.setEndAfter(h),l=f.cloneContents()}if(o&&(d=l.querySelector("[data-slate-spacer]")),Array.from(l.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),isDOMText(d)){var g=d.ownerDocument.createElement("span");g.style.whiteSpace="pre",g.appendChild(d),l.appendChild(g),d=g}var v=JSON.stringify(e.getFragment()),p=window.btoa(encodeURIComponent(v));d.setAttribute("data-slate-fragment",p),t.setData("application/x-slate-fragment",p);var m=l.ownerDocument.createElement("div");return m.appendChild(l),m.setAttribute("hidden","true"),l.ownerDocument.body.appendChild(m),t.setData("text/html",m.innerHTML),t.setData("text/plain",getPlainText(m)),l.ownerDocument.body.removeChild(m),t}}},e.insertData=t=>{e.insertFragmentData(t)||e.insertTextData(t)},e.insertFragmentData=t=>{var r=t.getData("application/x-slate-fragment")||getSlateFragmentAttribute(t);if(r){var a=JSON.parse(decodeURIComponent(window.atob(r)));return e.insertFragment(a),!0}return!1},e.insertTextData=t=>{var r=t.getData("text/plain");if(r){var a=r.split(/\r\n|\r|\n/),n=!1;for(var o of a)n&&u.YR.splitNodes(e,{always:!0}),e.insertText(o),n=!0;return!0}return!1},e.onChange=()=>{h.unstable_batchedUpdates(()=>{var t=S.get(e);t&&t(),r()})},e},getMatches=(e,t)=>{var r=[];for(var[a,n]of u.ML.levels(e,{at:t})){var o=et.findKey(e,a);r.push([n,o])}return r}}}]);