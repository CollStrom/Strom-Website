"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76041],{56916:function(e,t,i){i.d(t,{Q:function(){return CollapsibleSectionGroup},Z:function(){return M}});var n=i(824246),r=i(827378),a=i(279220),s=i(298784),l=i.n(s),o=i(138944),c=i(789018),u=i(255146),d=i(969137),m=i(686677),g=i(674721),p=i.n(g),v=i(924364),f=i(436878),x=i(722030),h=i(416534),Course_CourseIntro=e=>{let{course:t,handleBeginCourse:i}=e,a=l().get(e.course,"title"),s=l().get(e.course,"description");return((0,r.useEffect)(()=>{s||i(t._id)},[t,s,i]),s)?(0,n.jsxs)("div",{className:p().dynamic([["e77400445cce528e",[f.Et,f.Et,f.Et]]])+" course-intro",children:[(0,n.jsx)("div",{className:p().dynamic([["e77400445cce528e",[f.Et,f.Et,f.Et]]])+" title",children:(0,n.jsx)("strong",{className:p().dynamic([["e77400445cce528e",[f.Et,f.Et,f.Et]]]),children:a})}),(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:v.ZP.render(s||"")},className:p().dynamic([["e77400445cce528e",[f.Et,f.Et,f.Et]]])+" body"}),(0,n.jsx)("div",{className:p().dynamic([["e77400445cce528e",[f.Et,f.Et,f.Et]]])+" footer",children:(0,n.jsx)(h.zx,{size:"lg",variant:"primary",onClick:()=>{i(t._id)},className:"max-w-sm justify-center",fullWidth:!0,children:"Start"})}),(0,n.jsx)(p(),{id:"e77400445cce528e",dynamic:[f.Et,f.Et,f.Et],children:".course-intro.__jsx-style-dynamic-selector{color:black}.title.__jsx-style-dynamic-selector{border-bottom:1px solid var(--color-RemoGray10);font-size:20px;padding:32px}@media(max-width:".concat(f.Et,"){.title.__jsx-style-dynamic-selector{font-size:18px;padding:32px}}.body.__jsx-style-dynamic-selector{margin-bottom:32px;display:grid;grid-template-columns:auto auto;grid-column-gap:96px;font-size:18px;padding:32px}@media(max-width:").concat(f.Et,"){.body.__jsx-style-dynamic-selector{grid-column-gap:initial;font-size:14px}}.footer.__jsx-style-dynamic-selector{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:16px}@media(max-width:").concat(f.Et,"){.footer.__jsx-style-dynamic-selector{position:absolute;bottom:0;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding:16px}}.requirements.__jsx-style-dynamic-selector{width:360px;-webkit-padding-start:48px;-moz-padding-start:48px;padding-inline-start:48px;-webkit-border-start:1px solid var(--color-RemoGray01);-moz-border-start:1px solid var(--color-RemoGray01);border-inline-start:1px solid var(--color-RemoGray01)}.label.__jsx-style-dynamic-selector{margin-bottom:1em;font-weight:600;font-size:18px;color:var(--color-RemoGreen)}.reward.__jsx-style-dynamic-selector{margin:32px 32px 0;padding:8px 16px!important;-webkit-border-radius:var(--border-radius);-moz-border-radius:var(--border-radius);border-radius:var(--border-radius);background:var(--color-RemoGreen);color:white;font-weight:500}")})]}):(0,n.jsx)("div",{className:"w-full h-[80vh] flex justify-center items-center",children:(0,n.jsx)(x.$,{size:"lg"})})},y=i(161320),b=i.n(y),Course_CourseHeader=e=>(0,n.jsx)("div",{className:"border-solid py-1 border-neutral-200",children:(0,n.jsx)("div",{className:"flex justify-between items-center",children:e.course.isCertification&&void 0!==e.certificationTimeRemainingSecs&&e.courseProgress.currentSection!==e.course.sections.length&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"px-5",children:" Time Remaining"}),b().utc(b().duration(e.certificationTimeRemainingSecs,"seconds").asMilliseconds()).format("HH:mm:ss")]})})}),j=i(713222),C=i(682603),w=i(776845),S=i(635384),k=i(599789),P=i(252708),T=i.n(P),N=i(795115),I=i(718129),_=i(792739),E=i(312273),Z=i(94123),L=i(837553),R=i(793737),Course_CourseSummaryMessage=e=>{var t,i;let{course:r,courseProgress:a,onContinue:s}=e,l=!!(null==r?void 0:r.isCertification)&&!!((null==a?void 0:null===(t=a.certificationInfo)||void 0===t?void 0:t.certificationPassed)===!1&&(null==r?void 0:r.summaryMessageOnCertificationFail)||(null==a?void 0:null===(i=a.certificationInfo)||void 0===i?void 0:i.certificationPassed)===!0&&(null==r?void 0:r.summaryMessageOnCompletionOrCertificationPass));if(!l||!a)return null;let{certificationInfo:o}=a;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center text-center mt-4 gap-8",children:[(0,n.jsx)(w.ZT.H3,{children:(null==o?void 0:o.certificationPassed)?null==r?void 0:r.summaryMessageOnCompletionOrCertificationPass:r.summaryMessageOnCertificationFail}),(0,n.jsx)(h.zx,{onClick:s,children:"Continue"})]})},z=i(719646),O=i(835913),F=i(2979);let Q=null,CollapsibleSectionGroup=e=>{var t;let{sections:i,estimatedTime:a,handleSectionNavigate:s}=e,[c,u]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{l().every(i,"isFinished")&&u(!1)},[i]),(0,n.jsxs)("div",{className:"my-3 mx-4 border border-neutral-200 rounded-lg items-center",children:[(0,n.jsxs)("div",{className:(0,o.default)("py-3 px-2 flex justify-between cursor-pointer",{"border-b border-b-neutral-200":c}),onClick:()=>{u(e=>!e)},children:[(0,n.jsxs)("div",{className:"flex items-center flex-1 font-semibold text-base",children:[(0,n.jsx)(j.J,{icon:c?"chevron-down":"chevron-right",variant:"black",size:"lg"}),(0,n.jsx)("span",{className:"flex-1",children:null===(t=i[0].courseSectionGroup)||void 0===t?void 0:t.name})]}),(0,n.jsxs)("div",{className:"pr-2 flex justify-end items-center",children:[(0,n.jsx)(C.A,{className:"ml-2",label:"".concat(a," min."),leadingIcon:"clock"}),l().every(i,"isFinished")&&(0,n.jsx)(_.FontAwesomeIcon,{color:"rgba(59, 118, 165, 1)",className:"ml-2",icon:"check-circle"})]})]}),c&&(0,n.jsx)("div",{className:"py-2",children:i.map((e,t)=>(0,n.jsxs)("div",{onClick:()=>{"number"==typeof(null==e?void 0:e.sectionIndex)&&s&&s(null==e?void 0:e.sectionIndex)},className:"py-2 px-4 flex ".concat(e.isCurrent?"font-bold cursor-pointer":e.isFinished?"cursor-pointer":e.isLatestSection?"cursor-pointer":"text-neutral-400 cursor-not-allowed"),children:[(0,n.jsxs)("span",{className:"flex-1",children:[t+1,". ",e.title||"(untitled)"]}),(0,n.jsxs)("span",{className:"w-24 ml-4 text-right",children:[e.estimatedTime||0," minute",1===e.estimatedTime?"":"s"]})]},"".concat(e.title,"-").concat(t)))})]})};var M=(0,O.ZP)(e=>{var t,i,s;let{user:g,courseId:p,projectId:v,returnToTasking:f,isInQueue:y,assignments:b,fetchCourseProgressPercent:C,isRedirecting:P,readOnly:_=!1}=e,{query:O}=(0,m.useRouter)(),M=(0,E.wL)(),[q,B]=(0,r.useState)(),[A,D]=(0,r.useState)(""),[G,V]=(0,r.useState)(""),[W,H]=(0,r.useState)(-1),[U,J]=(0,r.useState)(null),[$,K]=(0,r.useState)([]),[Y,X]=(0,r.useState)(!0),{showRemainingTriesPopup:ee,setShowRemainingTriesPopup:et}=(0,R.n)(e=>({showRemainingTriesPopup:e.showRemainingTriesPopup,setShowRemainingTriesPopup:e.setShowRemainingTriesPopup})),ei=(0,F.Z)({courseId:p,workerId:g._id}),[en,er]=(0,r.useState)(!1),ea=_&&q&&q.completed,{data:es,isSuccess:el}=(0,L._z)("use-peek-queue",{},!1),{data:eo,isFetching:ec}=(0,z.ze)({enabled:el&&null!=es&&es}),{value:eu}=(0,a.Z)(async()=>{if(es||ec||!el)return null;try{return await (0,I.b)()}catch(e){return null}},[]),ed=es?(0,z.Rc)(eo):null==eu?void 0:eu.qualificationListId,{value:em,loading:eg}=(0,a.Z)(async()=>{if(p){var e,t,i;try{let i=await c.Z.labeling.getCourseInfo(p);return i.courseProgress&&(B(i.courseProgress),D(i.courseProgress._id)),_&&((null===(e=i.courseProgress)||void 0===e?void 0:e.completed)?(null===(t=i.course)||void 0===t?void 0:t.isCertification)&&V("This course can't be viewed after being completed. Please contact support if you believe this is an error."):V("You can't view this course because you haven't completed it yet. Please contact support if you believe this is an error.")),i.course}catch(n){let e=JSON.parse(JSON.stringify(n)),t=(null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.message)||"Something went wrong, please try again later.";M.error("Failed to load course info - ".concat(p),{courseId:p,feature:"course",qualificationListId:ed,errorMessage:t},n),V(t),N.c.track("Training - Errored getting course info.",{userId:g._id,courseId:p,workerTeamId:g.activeWorkerTeam,qualificationListId:ed,errorMessage:t})}}},[p,ed]),ep=!!(null==em?void 0:em.isCertification)&&!!((null==q?void 0:null===(t=q.certificationInfo)||void 0===t?void 0:t.certificationPassed)===!1&&(null==em?void 0:em.summaryMessageOnCertificationFail)||(null==q?void 0:null===(i=q.certificationInfo)||void 0===i?void 0:i.certificationPassed)===!0&&(null==em?void 0:em.summaryMessageOnCompletionOrCertificationPass)),handleBeginCourse=async e=>{try{let{courseProgress:t}=await c.Z.labeling.beginCourse(e,v);t.completed?N.c.track("Training - Viewing completed course"):N.c.track("Training - Starting course"),D(t._id),U||J(t.certificationInfo.certificationTimeRemainingSecs);let i=(null==em?void 0:em.sections)||[];K(i),function(e){var t;let i=null==e?void 0:null===(t=e.certificationInfo)||void 0===t?void 0:t.randomizedSections;i&&i.length>0&&K(i)}(t),function(e){let t=null==e?void 0:e.overridingSections;t&&t.length>0&&K(t)}(t);let n=t.currentSection;_&&t.completed&&!(null==em?void 0:em.isCertification)?H(0):H(n),B(t)}catch(t){M.error("Failed to begin course - ".concat(e),{courseId:e,feature:"course"},t.message),T().error("Failed to begin course: ".concat(t.message)),N.c.track("Training - Failed to begin course")}};(0,r.useEffect)(()=>{l().isNil(W)||window.scrollTo(0,0)},[W]),(0,r.useEffect)(()=>(em&&W!==em.sections.length&&null!==U&&(Q=setInterval(async()=>{U>0&&J(U-1)},1e3)),()=>{(async()=>{0===U&&await c.Z.labeling.certificationTimeRemainingSecsSync(A,U)})(),clearInterval(Q)}),[U,A,em,W]);let handleSectionNavigate=e=>{let t=null==q?void 0:q.currentSection;void 0===t||e>t||(N.c.track("Training - Navigating between course sections"),H(e))},handlePrevious=()=>{W>0&&H(W-1)},handleContinue=async e=>{if(q&&!ea){let t=await c.Z.labeling.continueCourse(q._id,{...e,certificationTimeRemainingSecs:U,currentSectionState:W,readOnly:ea,fullstorySession:ei});C&&C(),B(t.courseProgress),t.retry?et(!0):H(W+1)}else N.c.track("Training - Moves to next section without any changes"),H(W+1)},ev=(0,L._z)("enable-course-rating",{userId:g._id},!1).data,redirectCourse=()=>{y?f():"onboarding"===O.origin?(0,u.ZP)({},"/expert/onboarding"):(0,u.ZP)({},"/expert")},ratingOnSubmit=async(e,t)=>{q&&!ea&&(await c.Z.labeling.rateCourse(q._id,{rating:e,feedback:t}),N.c.track("Training - Rated course")),redirectCourse()},renderCourseSection=()=>{if(!em)return null;if(W>=$.length)return ea||!ep||en?ea||(null==q?void 0:q.rating)||!ev?void redirectCourse():(0,n.jsx)(Z.Z,{ratingOnSubmit:ratingOnSubmit}):(0,n.jsx)(Course_CourseSummaryMessage,{course:em,courseProgress:q,onContinue:()=>er(!0)});let e=$[W];if(!q){T().error("Failed to load your course progress, please try again later!"),N.c.track("Training - Failed to load course progress");return}return(0,r.createElement)(d.Z,{...e,sectionIndex:W,course:em,handlePrevious:handlePrevious,canAlwaysContinue:!!(W<q.currentSection||ea||em.isCertification&&![k.CourseSectionType.Scenario,k.CourseSectionType.Rating,k.CourseSectionType.AccountVerification,k.CourseSectionType.RichText,k.CourseSectionType.Confirm,k.CourseSectionType.Video,k.CourseSectionType.TextResponse,k.CourseSectionType.TextResponseRewrite,k.CourseSectionType.PromptSelectionResponse,k.CourseSectionType.MultipleChoice,k.CourseSectionType.ResumeScreening,k.CourseSectionType.BackgroundCheck].includes(e.type)),handleContinue:handleContinue,key:W,userFlags:g.featureFlags,user:g,readOnly:ea})},ef=(0,r.useMemo)(()=>{let e={};return((null==em?void 0:em.sections)||[]).forEach((t,i)=>{if(t.courseSectionGroup){let n=t.courseSectionGroup.name;e[n]||(e[n]=[]),e[n]=[...e[n],{...t,sectionIndex:i,isCurrent:W===i,isLatestSection:(null==q?void 0:q.currentSection)===i,isFinished:null!=q&&!!q.currentSection&&i<(null==q?void 0:q.currentSection)}]}}),e},[em,null==q?void 0:q.currentSection,W]),ex=(null===(s=$[W])||void 0===s?void 0:s.type)===k.CourseSectionType.Rating;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:(0,o.default)("scaleui outlier-theme flex justify-between",{"pl-[420px]":Y&&!eg&&!G&&(null==em?void 0:em.enableSectionGrouping),"pl-14":!Y}),children:[!eg&&!G&&(null==em?void 0:em.enableSectionGrouping)&&(0,n.jsx)("div",{className:(0,o.default)("fixed top-[72px] bottom-[60px] left-0 bg-neutral-0 border-r border-r-neutral-200 overflow-y-scroll",{"w-[420px]":Y,"w-14":!Y}),children:(0,n.jsxs)("div",{className:"pb-2",children:[(0,n.jsxs)("div",{className:(0,o.default)("py-3 px-4 flex justify-between items-center font-semibold text-base",{"border-b border-b-neutral-200":Y}),children:[Y&&(0,n.jsx)("span",{children:"Course Overview"}),(0,n.jsx)(j.J,{icon:Y?"chevron-left":"chevron-right",size:"md",onClick:()=>{X(e=>!e)}})]}),Y&&Object.values(ef).map((e,t)=>(0,n.jsx)(CollapsibleSectionGroup,{sections:e,estimatedTime:e.reduce((e,t)=>e+(t.estimatedTime||0),0),handleSectionNavigate:handleSectionNavigate,isCertification:!!(null==em?void 0:em.isCertification)},"".concat(e[0].title,"-").concat(t,"-parent")))]})}),(0,n.jsx)("div",{className:(0,o.default)("w-[80vw] m-auto pb-10",{"max-w-[1080px]":!ex,"max-w-screen-2xl":ex}),children:(0,n.jsx)("div",{children:(()=>{if(G)return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center p-20",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsx)(j.J,{icon:"exclamation-circle",variant:"danger"}),(0,n.jsx)(w.ZT.Subtitle2,{children:"There was an error loading this course."})]}),(0,n.jsx)(w.ZT.Paragraph1,{children:G})]});if(!em||eg||P)return(0,n.jsx)("div",{className:"w-full h-[80vh] flex justify-center items-center",children:(0,n.jsx)(x.$,{size:"lg"})});if(-1===W){let e=l().get(b,[0,"courseList"],[]),t=e.indexOf(p);return(0,n.jsx)(Course_CourseIntro,{course:em,isInQueue:y,numCourses:e.length-t,handleBeginCourse:handleBeginCourse})}return q?(0,n.jsxs)("div",{children:[(0,n.jsx)(Course_CourseHeader,{course:em,sections:$,courseProgress:q,currentSection:W,handleSectionNavigate:handleSectionNavigate,isInQueue:y,certificationTimeRemainingSecs:U}),renderCourseSection()]}):(0,n.jsx)("div",{className:"w-full h-[80vh] flex justify-center items-center",children:(0,n.jsx)(x.$,{size:"lg"})})})()})})]}),(0,n.jsx)(S.u,{open:ee,onClose:()=>{et(!1)},title:"Try again!",innerClassName:"max-w-sm",actions:(0,n.jsx)("div",{className:"flex items-center gap-2 justify-end",children:(0,n.jsx)(h.zx,{onClick:()=>{et(!1)},children:"Retry"})}),children:"You can try to answer this section again. Please note that if this is your last try and you answer incorrectly again, you won't be notified, and you'll continue to the next section anyways."})]})})},248021:function(e,t,i){i.d(t,{X:function(){return useCourseV2BehaviourLog}});var n,r,a=i(298784),s=i.n(a),l=i(827378),o=i(560690);(n=r||(r={})).MouseEnter="mouseenter",n.MouseLeave="mouseleave",n.Visible="visible",n.Hidden="hidden",n.Load="load";let c=["mouseenter","visible"],u=["mouseleave","hidden"];function useCourseV2BehaviourLog(){let e=(0,l.useRef)({}),t=(0,l.useRef)([]),i=(0,l.useRef)([]),n=(0,l.useRef)([]),r=(0,l.useRef)([]),a=(0,l.useRef)(null),d=(0,l.useRef)(null),m=(0,l.useRef)(!1),g=(0,l.useCallback)(()=>{var t,i;d.current&&(e.current[d.current]={...e.current[d.current],numAutotyperDetected:(null!==(i=null===(t=e.current[d.current])||void 0===t?void 0:t.numAutotyperDetected)&&void 0!==i?i:0)+1})},[]),p=(0,o.Z)(g),v=(0,l.useCallback)((t,i)=>{var n,r,s,l,o,c,u,m,g;let v=Date.now();d.current=t,p.updateKeystrokeTimestamp();let f=null!==(c=null===(n=e.current[t])||void 0===n?void 0:n.activeTimeTyping)&&void 0!==c?c:0;if(a.current){let e=v-a.current;e<2e3&&(f+=e)}e.current[t]={...e.current[t],latestValue:i,lengthDiffLog:[...null!==(u=null===(r=e.current[t])||void 0===r?void 0:r.lengthDiffLog)&&void 0!==u?u:[],i.length-(null!==(m=null===(l=e.current[t])||void 0===l?void 0:null===(s=l.latestValue)||void 0===s?void 0:s.length)&&void 0!==m?m:0)],lengthDiffTimestamps:[...null!==(g=null===(o=e.current[t])||void 0===o?void 0:o.lengthDiffTimestamps)&&void 0!==g?g:[],v],activeTimeTyping:f},a.current=v},[p]),f=(0,l.useCallback)(t=>{var i,n;e.current[t]={...e.current[t],numMouseLeaves:(null!==(n=null===(i=e.current[t])||void 0===i?void 0:i.numMouseLeaves)&&void 0!==n?n:0)+1}},[]),x=(0,l.useCallback)(e=>{var i;t.current=[...null!==(i=t.current)&&void 0!==i?i:[],{text:e,timestamp:Date.now()}]},[]),h=(0,l.useCallback)(e=>{var t;i.current=[...null!==(t=i.current)&&void 0!==t?t:[],{text:e,timestamp:Date.now()}]},[]),y=(0,l.useCallback)(e=>{var t;n.current=[...null!==(t=n.current)&&void 0!==t?t:[],{text:e,timestamp:Date.now()}]},[]),b=(0,l.useCallback)(e=>"mouseenter"===e.type?"mouseenter":"mouseleave"===e.type?"mouseleave":"visibilitychange"===e.type?document.hidden?"hidden":"visible":"mouseenter",[]),j=(0,l.useCallback)(e=>{let t=Date.now();m.current||(m.current=!0,r.current=[...r.current,{type:"load",timestamp:t}]);let i=b(e);r.current=[...r.current,{type:i,timestamp:t}]},[b]),C=(0,l.useCallback)(()=>{var a,l,o,d,m,g,p,v,f,x,h,y,b,j;let C,w,S,k;let P={};if(Object.entries(e.current).forEach(e=>{var t,i,n,r,a,l,o,c,u,d,m,g,p,v;let[f,x]=e;if(!x)return;let h=null===(i=x.lengthDiffLog)||void 0===i?void 0:null===(t=i.filter(e=>e<0))||void 0===t?void 0:t.map(e=>-e),y=null===(n=x.lengthDiffLog)||void 0===n?void 0:n.filter(e=>e>1);P[f]={numBackspaces:null!==(o=null==h?void 0:h.length)&&void 0!==o?o:0,avgBackspaceLength:s().mean(h),maxBackspaceLength:s().max(h),numOfCopyPaste:null!==(c=null==y?void 0:y.length)&&void 0!==c?c:0,avgCopyPasteLength:s().mean(y),maxCopyPasteLength:s().max(y),activeTimeTyping:null!==(u=x.activeTimeTyping)&&void 0!==u?u:0,numAutotyperDetected:null!==(d=x.numAutotyperDetected)&&void 0!==d?d:0,totalChanges:null!==(m=null===(r=x.lengthDiffLog)||void 0===r?void 0:r.length)&&void 0!==m?m:0,numMouseLeaves:null!==(g=x.numMouseLeaves)&&void 0!==g?g:0,lengthDiffLog:x.lengthDiffLog,lengthDiffTimestamps:x.lengthDiffTimestamps,charCount:null!==(p=null===(a=x.latestValue)||void 0===a?void 0:a.length)&&void 0!==p?p:0,wordCount:null!==(v=null===(l=s().words(x.latestValue))||void 0===l?void 0:l.length)&&void 0!==v?v:0}}),t.current.length>0){let e=t.current.map(e=>e.text),i=t.current.map(e=>e.timestamp);C={copyTextLog:e,copyTimestampLog:i,maxCopyTextLength:null!==(o=null===(a=s().maxBy(e,e=>e.length))||void 0===a?void 0:a.length)&&void 0!==o?o:0,minCopyTextLength:null!==(d=null===(l=s().minBy(e,e=>e.length))||void 0===l?void 0:l.length)&&void 0!==d?d:0,avgCopyTextLength:s().meanBy(e,e=>{var t;return null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0}),numCopyEvents:e.length}}if(i.current.length>0){let e=i.current.map(e=>e.text),t=i.current.map(e=>e.timestamp);w={pasteTextLog:e,pasteTimestampLog:t,maxPasteTextLength:null!==(p=null===(m=s().maxBy(e,e=>e.length))||void 0===m?void 0:m.length)&&void 0!==p?p:0,minPasteTextLength:null!==(v=null===(g=s().minBy(e,e=>e.length))||void 0===g?void 0:g.length)&&void 0!==v?v:0,avgPasteTextLength:s().meanBy(e,e=>{var t;return null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0}),numPasteEvents:e.length}}if(n.current.length>0){let e=n.current.map(e=>e.text),t=n.current.map(e=>e.timestamp);S={pasteTextLog:e,pasteTimestampLog:t,maxPasteTextLength:null!==(h=null===(f=s().maxBy(e,e=>e.length))||void 0===f?void 0:f.length)&&void 0!==h?h:0,minPasteTextLength:null!==(y=null===(x=s().minBy(e,e=>e.length))||void 0===x?void 0:x.length)&&void 0!==y?y:0,avgPasteTextLength:s().meanBy(e,e=>{var t;return null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0}),numPasteEvents:e.length}}if(r.current.length>0){let e=r.current,t=r.current.reduce((t,i,n)=>{var r;if(u.includes(i.type)&&c.includes(null===(r=e[n+1])||void 0===r?void 0:r.type)){if(!e[n+1].timestamp)return t;t.push((e[n+1].timestamp-i.timestamp)/1e3)}return t},[]);k={totalOutOfPageTimeSecs:null!==(b=s().sum(t))&&void 0!==b?b:0,numOutOfPageEvents:null!==(j=t.length)&&void 0!==j?j:0,maxOutOfPageTimeSecs:s().max(t),meanOutOfPageTimeSecs:s().mean(t)}}return{textFields:P,copyTextEvents:C,pasteTextEvents:w,dragAndDropEvents:S,inactivityLog:k}},[]);return{handleTextChange:v,handleMouseLeave:f,handleCopy:x,handlePaste:h,handleDragAndDrop:y,handlePresenceEvent:j,getBehaviourLog:C}}},497060:function(e,t,i){i.d(t,{r:function(){return MobileSupportValidator}});var n=i(824246),r=i(827378),a=i(674721),s=i.n(a),l=i(329400),o=i(571085),c=i(416534);let NoMobilePage=e=>{let{user:t,pageTitle:i,skipLabel:a,skipView:u,handleSkip:d}=e;return(0,r.useEffect)(()=>{let e={userId:null==t?void 0:t.id,pageTitle:i};(0,o.Kz)(o.ju.OutlierNoMobileEvent,e)},[i,t.id]),(0,n.jsxs)("div",{className:"jsx-fa68611bcaf73128 scaleui scale-tailwind outlier-theme",children:[(0,n.jsx)("div",{style:{padding:"28% 0"},className:"jsx-fa68611bcaf73128 bg-gradient-to-br flex justify-center w-full",children:(0,n.jsx)(l.Z,{})}),(0,n.jsxs)("div",{className:"jsx-fa68611bcaf73128 flex-col justify-center align-center w-full py-12 px-10",children:[(0,n.jsx)("h1",{className:"jsx-fa68611bcaf73128 text-lg font-medium text-slate-900",children:"Switch Devices"}),(0,n.jsx)("h2",{className:"jsx-fa68611bcaf73128 leading-8 py-2 text-neutral-700",children:"This page's mobile view is currently under construction. To access this page, please use a desktop or laptop."}),u&&a&&(0,n.jsx)(c.zx,{className:"mt-6",size:"lg",onClick:d,children:a})]}),(0,n.jsx)(s(),{id:"fa68611bcaf73128",children:".bg-gradient-to-br.jsx-fa68611bcaf73128{background-image:-webkit-radial-gradient(72%92%,,hsla(61,48%,85%,.7)0px,transparent 50%),-webkit-radial-gradient(54%23%,,hsla(189,64%,73%,.7)0px,transparent 50%),-webkit-radial-gradient(18%13%,,hsla(195,33%,79%,.7)0px,transparent 50%),-webkit-radial-gradient(82%58%,,hsla(193,25%,65%,.7)0px,transparent 50%),-webkit-radial-gradient(3%94%,,hsla(215,48%,72%,.7)0px,transparent 50%),-webkit-radial-gradient(29%44%,,hsla(278,30%,79%,.7)0px,transparent 50%),-webkit-radial-gradient(84%15%,,hsla(323,47%,74%,.7)0px,transparent 50%);background-image:-moz-radial-gradient(72%92%,,hsla(61,48%,85%,.7)0px,transparent 50%),-moz-radial-gradient(54%23%,,hsla(189,64%,73%,.7)0px,transparent 50%),-moz-radial-gradient(18%13%,,hsla(195,33%,79%,.7)0px,transparent 50%),-moz-radial-gradient(82%58%,,hsla(193,25%,65%,.7)0px,transparent 50%),-moz-radial-gradient(3%94%,,hsla(215,48%,72%,.7)0px,transparent 50%),-moz-radial-gradient(29%44%,,hsla(278,30%,79%,.7)0px,transparent 50%),-moz-radial-gradient(84%15%,,hsla(323,47%,74%,.7)0px,transparent 50%);background-image:-o-radial-gradient(72%92%,,hsla(61,48%,85%,.7)0px,transparent 50%),-o-radial-gradient(54%23%,,hsla(189,64%,73%,.7)0px,transparent 50%),-o-radial-gradient(18%13%,,hsla(195,33%,79%,.7)0px,transparent 50%),-o-radial-gradient(82%58%,,hsla(193,25%,65%,.7)0px,transparent 50%),-o-radial-gradient(3%94%,,hsla(215,48%,72%,.7)0px,transparent 50%),-o-radial-gradient(29%44%,,hsla(278,30%,79%,.7)0px,transparent 50%),-o-radial-gradient(84%15%,,hsla(323,47%,74%,.7)0px,transparent 50%);background-image:radial-gradient(at 72%92%,hsla(61,48%,85%,.7)0px,transparent 50%),radial-gradient(at 54%23%,hsla(189,64%,73%,.7)0px,transparent 50%),radial-gradient(at 18%13%,hsla(195,33%,79%,.7)0px,transparent 50%),radial-gradient(at 82%58%,hsla(193,25%,65%,.7)0px,transparent 50%),radial-gradient(at 3%94%,hsla(215,48%,72%,.7)0px,transparent 50%),radial-gradient(at 29%44%,hsla(278,30%,79%,.7)0px,transparent 50%),radial-gradient(at 84%15%,hsla(323,47%,74%,.7)0px,transparent 50%)}.text-link.jsx-fa68611bcaf73128{color:#3b76a5}"})]})};var u=i(837553),d=i(456552),m=i(352991);let MobileSupportValidator=e=>{let{pageTitle:t,user:i,skipLabel:r,skipView:a,handleSkip:s,children:l}=e,{data:o}=(0,u._z)("outlier-mobile-web",{pageTitle:t},void 0),{data:c}=(0,d.useQuery)(["genericdatacollection"],async()=>(0,m.ZP)(null,"internal/scaler/genericdatacollection")),g=(null!=c?c:[]).length>0&&"tasking"===t;return"fraud-checkpoint"!==t&&void 0===o?null:(0,n.jsx)("div",{className:"scaleui outlier-theme scale-tailwind h-full",children:o||g?(0,n.jsx)(n.Fragment,{children:l}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"min-[480px]:hidden h-full",children:(0,n.jsx)(NoMobilePage,{pageTitle:t,user:i,skipLabel:r,skipView:a,handleSkip:s})}),(0,n.jsx)("div",{className:"max-[480px]:hidden h-full",children:l})]})})}},68722:function(e,t,i){var n=i(827378),r=i(352991),a=i(456552),s=i(167469),l=i(234334),o=i(298784),c=i.n(o),u=i(502806),d=i(719646);let m=[l.QualificationEntryStatus.Unstarted,l.QualificationEntryStatus.WorkerPending,l.QualificationEntryStatus.CorpPending];t.Z=(e,t)=>{var i;let{data:o,isSuccess:g}=(0,u._z)("use-peek-queue",{},!1),{data:p,isLoading:v}=(0,d.ze)({enabled:g&&null!=o&&o}),{data:f,isLoading:x}=(0,a.useQuery)(["internal/experts/qualification/info",null!==(i=null==e?void 0:e.id)&&void 0!==i?i:"",t],async()=>(0,r.ZP)(null,"internal/experts/qualification/info",{method:"GET",query:{findPending:t}}),{refetchOnWindowFocus:!1,staleTime:6e4,enabled:!!e&&!o&&g}),h=!g||(o?v:x),y=(0,n.useMemo)(()=>o?(0,d.zU)(p):f,[o,p,f]),b=(0,n.useMemo)(()=>{var t,i;if(h)return{data:{},isLoading:!0};if(!y)return{data:{},isLoading:!1};let{requiredQualificationListInfo:n,qualificationListStatus:r,qualificationListTag:a,qualificationListId:o,requiredQualificationListProjectDescription:u,requiredQualificationListProjectId:d,requiredQualificationListProjectName:g,requiredQualificationListProjectDisplayName:v,teamDisplayName:f,teamDescription:x,projectId:b,team:j,firstDirectAssignment:C,reviewLevel:w}=y,S=new URLSearchParams(null===(i=window)||void 0===i?void 0:null===(t=i.location)||void 0===t?void 0:t.search),k=S.get("testStatus"),P=S.get("testQualif");if(P){let e=P.split(",");n.forEach((t,i)=>{let n=e[i];switch(n){case"0":t.qualificationStatus=l.QualificationEntryStatus.Unstarted;break;case"1":t.qualificationStatus=l.QualificationEntryStatus.WorkerPending;break;case"2":t.qualificationStatus=l.QualificationEntryStatus.CorpPending;break;case"3":t.qualificationStatus=l.QualificationEntryStatus.Qualified;break;case"4":t.qualificationStatus=l.QualificationEntryStatus.Failed}})}switch(k){case l.QualificationListStatus.Qualified:r=l.QualificationListStatus.Qualified;break;case l.QualificationListStatus.Failed:r=l.QualificationListStatus.Failed;break;case l.QualificationListStatus.Pending:r=l.QualificationListStatus.Pending}let T=!n.length||n.length&&(r===l.QualificationListStatus.Qualified||(null==e?void 0:e.isRemoAdmin)),[N,I]=c().partition(n,e=>m.includes(e.qualificationStatus)||l.ALWAYS_SHOWN_QUAL_TYPES.includes(e.qualificationType)||e.metadata.isAlwaysVisible),_=I.filter(e=>e.qualificationType!==s.QualificationType.WorkerSkill&&e.qualificationType!==s.QualificationType.Experiment&&e.qualificationType!==s.QualificationType.Tag),E=n.filter(e=>e.qualificationStatus===l.QualificationEntryStatus.Failed);return{teamName:f,teamDescription:x,unstartedQualifications:N,completedQualifications:_,failedQualifications:E,canTask:T,qualificationListStatus:r,requiredQualificationListProjectId:d,requiredQualificationListProjectName:g,requiredQualificationListProjectDisplayName:v,requiredQualificationListProjectDescription:u,qualificationListTag:a,qualificationListId:o,projectId:b,activeWorkerTeamName:j,firstDirectAssignment:C,reviewLevel:w,isEQ:null==p?void 0:p.isEmptyQueue}},[h,y,null==e?void 0:e.isRemoAdmin,p]);return{data:b,isLoading:h}}},665876:function(e,t,i){var n=i(824246),r=i(827378),a=i(713222),s=i(666769),l=i(686677),o=i(952127),c=i(830232),u=i(535245),d=i(517215),m=i(298784),g=i.n(m),p=i(177395),v=i(307017),f=i(462252),x=i(594977),h=i(781355);t.Z=e=>{let{user:t,simple:i,title:m,showLogo:y,showMenu:b=!0,courseProgressPercent:j,progressBarFractions:C}=e,w=(0,l.useRouter)(),S="onboarding"===w.query.origin;(0,d.h)(t);let k=(0,x.NL)(),{data:P}=(0,f.O)(!0),T=(0,r.useMemo)(()=>C&&C<=10?C-1:4,[C]);return(0,n.jsxs)("div",{className:"h-[4.5rem] flex items-center justify-between w-full px-4 py-3 bg-neutral-100",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[i&&(0,n.jsx)(a.J,{onClick:()=>{if(S){window.history.length>1?w.back():w.push("/expert/onboarding");return}w.push({pathname:"/expert",query:w.query})},icon:"times"}),!!y&&(0,n.jsx)(u.Z,{}),!!m&&(0,n.jsx)("p",{className:"ml-4 font-semibold text-neutral-800",children:m})]}),(0,n.jsxs)("div",{className:"h-full relative flex items-center",children:[void 0!==j&&(0,n.jsxs)("div",{className:"pr-4",children:[(0,n.jsxs)("div",{className:"text-xs font-semibold",children:["Progress - ",g().round(j,0),"%"]}),(0,n.jsx)("div",{className:"w-40 h-7 rounded-full px-2 flex items-center bg-neutral-50 box-content",children:(0,n.jsxs)("div",{className:"w-full h-4 rounded-full relative bg-neutral-200",children:[(0,n.jsx)("div",{className:"flex justify-evenly items-center absolute inset-0",children:g().map(g().range(T),(e,t)=>(0,n.jsx)("i",{className:"w-1 h-1 block rounded-full bg-neutral-700 opacity-40"},t))}),(0,n.jsx)("div",{style:{width:"".concat(j,"%"),backgroundImage:"url(/static/img/outlier/progress-bar.svg)",backgroundSize:"170px",backgroundPosition:"-3px 50%",transitionProperty:"all"},className:"h-4 rounded-full ease-out duration-500"})]})})]}),!i&&(0,n.jsx)("div",{className:"flex justify-center pr-2",children:(0,n.jsx)(v.Z,{})}),!S&&(0,n.jsx)("div",{className:"pl-4",children:(0,n.jsx)(s.D,{firstName:t.firstName||"",lastName:t.lastName||"",email:(0,c.T)(t.email),handleLogoutClick:()=>(0,o.K)("/expert/signup"),portalTheme:"outlier-theme",menu:b?[{id:"1",label:"Profile",icon:"user",onClick:()=>w.push({pathname:"".concat(h.ZA,"/profile"),query:w.query})},{id:"2",label:"Privacy Policy",icon:"shield-alt",onClick:()=>window.open("https://".concat(p.k9,"/legal/privacy-policy"),"_blank")},{id:"3",label:"Help Center",icon:"circle-question",onClick:()=>{window.open("".concat(null!=P?P:"","https://tryoutlier.zendesk.com/hc/en-us"),"_blank"),k.invalidateQueries({queryKey:["zendesk-login-and-redirect-prefix"]})}},{id:"4",label:"Terms of Use",icon:"ballot-check",onClick:()=>window.open("https://".concat(p.k9,"/legal/terms-of-use"),"_blank")}]:[]})})]})]})}},208919:function(e,t,i){var n=i(824246),r=i(827378),a=i(686597),s=i(483717),l=i(256914),o=i(14234),c=i(809366),u=i(665876),d=i(166919),m=i(497060),g=i(406170),p=i(551620),v=i(594977);let ExpertTaskRoot=e=>{let{user:t,serverRendered:i,children:f,contextName:x,courseProgressPercent:h,progressBarFractions:y}=e,b=new p.S;return(0,r.useEffect)(()=>{s.Z.flushExpired(),s.Z.setTransientIfEmpty("internal/logged_in_user",t,i)},[]),(0,n.jsx)(v.aH,{client:b,children:(0,n.jsx)(l.Z,{theme:o.ZP,children:(0,n.jsxs)(g.Z,{otherValues:{user:t,isManageAccountModalOpen:!1,setIsManageAccountModalOpen:()=>{},isPayEducationModalOpen:!1,setIsPayEducationModalOpen:()=>{},bannersInfo:[],setBannersInfo:()=>{}},children:[(0,n.jsx)(a.ZP,{}),(0,n.jsx)(c.Z,{}),(0,n.jsx)(m.r,{pageTitle:"tasking",user:t,children:(0,n.jsxs)("div",{className:"scaleui outlier-theme scale-tailwind",children:[(0,n.jsx)(d.h,{className:"z-50 fixed w-full",children:(0,n.jsx)(u.Z,{user:t,simple:!0,title:x,courseProgressPercent:h,progressBarFractions:y})}),(0,n.jsx)("main",{children:(0,n.jsx)("div",{className:"pb-6 pt-20 mx-auto",children:f})})]})})]})})})};ExpertTaskRoot.getPageConfig=()=>({user:{kind:["expert"],required:!0}}),ExpertTaskRoot.getInitialProps=async e=>{let{user:t,url:i}=e,n=!!e.req;return{user:t,serverRendered:n,url:i}},t.Z=ExpertTaskRoot},718129:function(e,t,i){i.d(t,{O:function(){return getQualificationListInfosForWorkersAndTeam},b:function(){return getQualificationListInfoForWorker}});var n=i(352991),r=i(483717);let getQualificationListInfoForWorker=async()=>{let e=r.Z.get("requiredQualificationListInfo");return e||(e=await (0,n.ZP)(null,"internal/experts/qualification/info",{method:"GET"}),r.Z.setTransient("requiredQualificationListInfo",e)),e},getQualificationListInfosForWorkersAndTeam=async(e,t,i)=>{let r=await (0,n.ZP)(null,"internal/experts/qualification/many_qualification_list_info",{method:"POST",body:{teamId:t,workerIds:e,projectId:i}});return r}},876041:function(e,t,i){i.r(t),i.d(t,{CoursesPageComponent:function(){return CoursesPageComponent},default:function(){return B}});var n=i(824246),r=i(827378),a=i(320280),s=i(156075),l=i(56916),o=i(298784),c=i.n(o),u=i(255146),d=i(883148),m=i(686677),g=i(789018),p=i(416534),CourseV2_CourseV2Intro=e=>{let{course:t,handleBeginCourse:i}=e,r=c().get(e.course,"title"),a=c().get(e.course,"description");return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"border-b p-6 text-2xl",children:(0,n.jsx)("strong",{children:r})}),(0,n.jsx)("div",{className:"text-lg p-6 mb-8",children:a}),(0,n.jsx)("div",{className:"container flex justify-center p-4",children:(0,n.jsx)(p.zx,{size:"lg",variant:"primary",onClick:()=>{i(t._id)},className:"max-w-sm justify-center",fullWidth:!0,children:"Start"})})]})},v=i(722030),f=i(776845),x=i(252708),h=i.n(x),y=i(795115),b=i(94123),j=i(837553),C=i(352991),w=i(599789),S=i(835913),k=i(514240),P=i(248021),T=i(2979),N=i(136845),I=i(456552),_=(0,S.ZP)(e=>{var t,i;let{courseId:a,projectId:s,course:l,startingCourseProgress:o,user:p,readOnly:x=!1}=e,{query:S,replace:_}=(0,m.useRouter)(),[E,Z]=(0,r.useState)(-1),[L,R]=(0,r.useState)([]),[z,O]=(0,r.useState)(o),[F,Q]=(0,r.useState)(void 0),M=(0,T.Z)({courseId:l._id,workerId:p._id}),{handleTextChange:q,handleMouseLeave:B,handleCopy:A,handlePaste:D,handleDragAndDrop:G,handlePresenceEvent:V,getBehaviourLog:W}=(0,P.X)(),H=(0,r.useRef)(),{language:U}=(0,k.B)(e=>({language:e.language})),J=(0,j.ZP)("course-translations",{projectId:null==l?void 0:null===(t=l.project)||void 0===t?void 0:t.toString()},!1),{setUseTipTapEditor:$}=(0,N.B)(e=>({setUseTipTapEditor:e.setUseTipTapEditor})),K=(0,j.ZP)("allow-course-tiptap",{courseId:a},!1)&&l.useTipTap;(0,r.useEffect)(()=>{K&&$(!0)},[K,$]),(0,r.useEffect)(()=>{if(J){let e=null==l?void 0:l.translatedSections;e&&R(e[U]||L)}},[U]);let{data:Y,isLoading:X}=(0,j._z)("coursev2-permission-redirect",{userId:p.id},!1),{data:ee,isLoading:et}=(0,j._z)("coursev2-permission-project-redirect",{projectId:l.project},!1),{data:ei,isLoading:en}=(0,j._z)("coursev2-permission-by-course",{courseId:null==l?void 0:l._id},!1),{data:er,isLoading:ea}=(0,j._z)("can-view-enablement-resources",{userTagIds:(null!==(i=p.tags)&&void 0!==i?i:[]).join(",")},!1),es=(0,r.useMemo)(()=>X||et||en||ea,[X,et,en,ea]),el=(0,r.useMemo)(()=>ee||Y||er||ei,[ee,Y,er,ei]),{data:eo,isLoading:ec}=(0,I.useQuery)(["courseV2Permission",p.id,l._id,es,el],async()=>{var e;if(es)return;if(el)return!0;let t=await g.Z.labeling.getCourseV2UserPermission(p.id,l._id);return null!==(e=null==t?void 0:t.hasPermission)&&void 0!==e&&e},{enabled:!!l._id,refetchOnWindowFocus:!1,onSuccess:e=>{!1===e&&_("/expert")},onError:e=>{(0,C.vj)(e,{handleHttp:!0})}}),handleBeginCourse=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(eo){er||(e=!1);try{let t=await g.Z.labeling.beginCourseV2(l._id,e,s);O(t.courseProgress);let i=(null==l?void 0:l.sections)||[];R(i),Z(x?0:t.courseProgress.currentSection||0),l.isTimed&&!F&&Q(t.courseProgress.remainingTime)}catch(e){h().error("Failed to begin course: ".concat(e.message)),y.c.track("Training - Failed to begin course")}}};(0,r.useEffect)(()=>{c().isNil(E)||window.scrollTo(0,0)},[E]);let handlePrevious=()=>{E>0&&Z(E-1)},redirectCourse=()=>{"onboarding"===S.origin?(0,u.ZP)({},"/expert/onboarding"):(0,u.ZP)({},"/expert")},handleContinue=async e=>{if(z){let t=await g.Z.labeling.continueCourseV2(z._id,{...e,currentSectionState:E,behaviorLog:E===L.length-1?W():void 0,fullstorySession:M,remainingTime:F});O(t.courseProgress)}else y.c.track("Training - Moves to next section without any changes");Z(E+1)};(0,r.useEffect)(()=>{if((null==l?void 0:l.isTimed)&&(null==l?void 0:l.courseDuration))return void 0!==F&&l&&E<L.length&&null!==F&&(H.current=setInterval(async()=>{F>0&&Q(F-1)},1e3)),()=>{(async()=>{if(void 0!==F&&F%10==0&&(null==z?void 0:z._id)){let e=await g.Z.labeling.updateRemainingTimeCourses(z._id,F);O(e.courseProgress),e.courseProgress.completed&&redirectCourse()}})(),clearInterval(H.current)}},[F,z,l,E]);let eu=(0,j._z)("enable-course-rating",{userId:p._id},!1).data,ratingOnSubmit=async(e,t)=>{z&&(await g.Z.labeling.rateCourseV2(z._id,{rating:e,feedback:t}),y.c.track("Training - Rated course")),redirectCourse()};return(0,n.jsx)("div",{className:"scaleui outlier-theme flex justify-between",children:(0,n.jsx)("div",{className:"w-[80vw] m-auto pb-10 max-w-[1080px]",children:(0,n.jsx)("div",{className:ec?"w-full h-[80vh] flex justify-center items-center":"",children:ec?(0,n.jsx)(v.$,{size:"lg"}):eo&&(-1===E?(0,n.jsx)(CourseV2_CourseV2Intro,{course:l,handleBeginCourse:()=>handleBeginCourse(!0)}):z?(0,n.jsxs)("div",{children:[(null==l?void 0:l.isTimed)&&(null==l?void 0:l.courseDuration)&&(0,n.jsx)("div",{className:"pl-4",children:(0,n.jsxs)(f.ZT.Paragraph2,{children:["Remaining time: ",c().isNil(F)?"--:--":"".concat(Math.floor(F/60).toString().padStart(2,"0"),":").concat((F%60).toString().padStart(2,"0"))]})}),(()=>{if(!l)return null;if(E>=L.length){if((null==z?void 0:z.status)===w.CourseStatusTypeV2.InProgress){Z(0);return}if(!(null==z?void 0:z.rating)&&eu){var e,t,i;let r=l.showFinalGrade;return(0,n.jsx)(b.Z,{ratingOnSubmit:ratingOnSubmit,...r&&{courseGrade:null!==(i=null==z?void 0:null===(e=z.courseGrade)||void 0===e?void 0:e.finalGrade)&&void 0!==i?i:null==z?void 0:null===(t=z.courseGrade)||void 0===t?void 0:t.multipleChoiceGrade,courseStatus:null==z?void 0:z.status},allowFreeTextGrading:l.allowFreeTextGrading})}return void redirectCourse()}let r=L[E];if(z)return(0,n.jsx)(d.Z,{course:l,courseProgress:z,title:r.title,user:p,courseSectionItems:r.courseSectionItems,sectionIndex:E,handlePrevious:handlePrevious,handleContinue:handleContinue,canAlwaysContinue:E<z.currentSection||x,readOnly:x,handleTextChange:q,handleMouseLeave:B,handleCopy:A,handlePaste:D,handleDragAndDrop:G,handlePresenceEvent:V})})()]}):(0,n.jsx)("div",{className:"w-full h-[80vh] flex justify-center items-center",children:(0,n.jsx)(v.$,{size:"lg"})}))})})})}),E=i(436878),Z=i(208919),L=i(725310),R=i(542489),z=i(753705),O=i(540632),F=i(792739),Q=i(440778),ProgressBar_Stepper=e=>{let{actualStepKey:t,hideBack:i=!1,completedSteps:a=[]}=e,s=(0,m.useRouter)(),l=Q.GR.findIndex(e=>e.key===t),o=(0,r.useCallback)(()=>{let e=Q.GR[l-1].redirectUrl;s.push({pathname:e,query:"signup=true"})},[l,s]);return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,width:"100%",maxWidth:700,margin:"0 auto"},children:[l>0&&!i&&(0,n.jsx)(F.FontAwesomeIcon,{icon:"arrow-left",onClick:o,style:{cursor:"pointer"}}),(0,n.jsx)(L.Z,{sx:{width:"100%"},children:(0,n.jsx)(R.Z,{activeStep:l,sx:{"& .MuiStepConnector-line":{borderTopWidth:"1.5px",borderColor:"#00A4C3"},".MuiSvgIcon-root.Mui-active":{borderRadius:"50%",border:"4px solid #3B76A5",color:"transparent"}},children:Q.GR.map((e,t)=>(0,n.jsx)(z.Z,{children:(0,n.jsx)(O.Z,{StepIconComponent:a.includes(e.key)||t<l?()=>(0,n.jsx)("div",{style:{borderRadius:"50%",border:"4px solid #3B76A5",padding:"3px"},children:(0,n.jsx)(F.FontAwesomeIcon,{size:"xs",icon:"check",color:"#3B76A5"})}):void 0,children:e.displayText})},e.key))})})]})},M=i(68722),q=i(709791);let QueryAwareProjectInfoProvider=e=>{let{user:t}=e,{data:i}=(0,M.Z)(t);return(0,n.jsx)(q.v,{...e,projectId:null==i?void 0:i.projectId})},CoursesPageComponent=e=>{let{user:t,courseId:i,readOnly:o=!1}=e,{query:c}=(0,m.useRouter)(),u=!!c.signup,d=c.projectId,[p,f]=(0,r.useState)(),[x,h]=(0,r.useState)(),[y,b]=(0,r.useState)(),[C,w]=(0,r.useState)(!1),[S,k]=(0,r.useState)(!0),[P,T]=(0,r.useState)(),[N,I]=(0,r.useState)(),[E,L]=(0,r.useState)(!0),R=(0,j.ZP)("outlier-project-change",{},!1),z=(0,r.useCallback)(async()=>{let e,t,n,r;if(L(!0),i){var a,s,l,c,u;try{r=await g.Z.labeling.getCourseInfo(i)}catch(e){try{r=await g.Z.labeling.getCourseV2Info(i),T(r.course),I(r.courseProgress),k(!1),n=null==r?void 0:null===(s=r.course)||void 0===s?void 0:s.title}catch(e){}}if(null==r?void 0:null===(a=r.course)||void 0===a?void 0:a.visibleProgressBar){let i=null==r?void 0:null===(l=r.course)||void 0===l?void 0:l.sections.length,a=(null==r?void 0:null===(c=r.courseProgress)||void 0===c?void 0:c.currentSection)||0;e=o?100:100/i*a,t=i,n=null==r?void 0:null===(u=r.course)||void 0===u?void 0:u.title}}f(e),h(t),b(n),L(!1)},[i,o]),O=(0,r.useCallback)(async()=>{let e,t,n;if(i){var r,a,s,l;let o=await g.Z.labeling.getCourseInfo(i);if(null==o?void 0:null===(r=o.course)||void 0===r?void 0:r.visibleProgressBar){let i=null==o?void 0:null===(a=o.course)||void 0===a?void 0:a.sections.length,r=(null==o?void 0:null===(s=o.courseProgress)||void 0===s?void 0:s.currentSection)||0;e=100/i*r,t=i,n=null==o?void 0:null===(l=o.course)||void 0===l?void 0:l.title}}f(e),h(t),b(n)},[i]);return(0,r.useEffect)(()=>{z()},[i]),(0,n.jsx)(Z.Z,{user:t,courseProgressPercent:p,progressBarFractions:x,contextName:y,children:(0,n.jsxs)(a.ag,{children:[(0,n.jsx)(s.Z,{}),E?(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(v.$,{size:"lg"})}):(0,n.jsx)(n.Fragment,{children:S?(0,n.jsxs)(n.Fragment,{children:[u&&(0,n.jsx)("div",{style:{marginBottom:42},children:(0,n.jsx)(ProgressBar_Stepper,{actualStepKey:Q.wm.PERSONA_VERIFICATION})}),(0,n.jsx)(QueryAwareProjectInfoProvider,{user:t,isFFEnabled:!!R&&!t.spoofed,onClose:()=>(w(!0),window.location.href="/en/expert"),children:(0,n.jsx)(l.Z,{isInQueue:!1,returnToTasking:()=>{},user:t,courseId:i,fetchCourseProgressPercent:O,isRedirecting:C,readOnly:o,projectId:d})})]}):P&&(0,n.jsx)(_,{courseId:i,course:P,startingCourseProgress:N,user:t,readOnly:o,projectId:d})})]})})},CoursesPage=e=>{let{user:t,courseId:i}=e;return(0,n.jsx)(CoursesPageComponent,{user:t,courseId:i})};CoursesPage.getInitialProps=async e=>e.query.id&&((0,E.oI)(e)||e.query.id!==w.MobileIntroCourseName&&e.query.id!==w.MobileIntroCourseId)?{user:e.user,courseId:e.query.id,permissionId:e.query.pid}:((0,u.ZP)(e,"/expert",{forwardQueryParams:!0}),{pageProps:{}}),CoursesPage.getPageConfig=()=>({user:{kinds:["expert"],required:!0}});var B=CoursesPage}}]);