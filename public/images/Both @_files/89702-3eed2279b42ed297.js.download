"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89702],{365281:function(e,t,s){var i=s(824246);s(827378),t.Z=()=>(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M10.5 0H0V24H10.5V0Z",fill:"#29CD9C"}),(0,i.jsx)("path",{d:"M18.75 0C15.855 0 13.5 2.355 13.5 5.25V10.5H18.75C21.645 10.5 24 8.145 24 5.25V0H18.75Z",fill:"#29CD9C"})]})},454030:function(e,t,s){s.d(t,{iA:function(){return Table},p3:function(){return Tbody},Td:function(){return Td},Th:function(){return Th},hr:function(){return Thead},Tr:function(){return c}});var i=s(824246),n=s(674721),a=s.n(n),r=s(827378),o=s(60042),l=s.n(o);let Td=e=>{let{children:t,title:s,leftSep:n=!1,ellipsis:r=!1,border:o=!0,center:c=!1,right:d=!1,bold:p=!1,black:u=!1,striped:m=!1,padding:h=!1,maxPadding:g=!1,leftSepNoBorder:x=!1,...f}=e;return(0,i.jsxs)("td",{...f,title:s,className:"jsx-cd2084286836d3b "+(l()("td",{leftSep:n,leftSepNoBorder:x,ellipsis:r,center:c,right:d,bold:p,black:u,striped:m,padding:h,maxPadding:g,border:o})||""),children:[t,(0,i.jsx)(a(),{id:"cd2084286836d3b",children:".td.jsx-cd2084286836d3b{padding:12px 0}.td.border.jsx-cd2084286836d3b{border-top:1px solid#eee}.td.center.jsx-cd2084286836d3b{text-align:center}.td.right.jsx-cd2084286836d3b{text-align:right}.td.bold.jsx-cd2084286836d3b{font-weight:600}.td.black.jsx-cd2084286836d3b{color:black}.td.padding.jsx-cd2084286836d3b{padding:12px}.td.maxPadding.jsx-cd2084286836d3b{padding-top:18px;padding-bottom:18px}.td.leftSep.jsx-cd2084286836d3b{padding-left:10px;border-left:1px solid#eee}.td.leftSepNoBorder.jsx-cd2084286836d3b{padding-left:8px}.td.ellipsis.jsx-cd2084286836d3b{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}"})]})},Th=e=>{let{children:t,colSpan:s,leftSepNoBorder:n=!1,leftSep:r=!1,smallFont:o=!1,smallLabel:c=!1,center:d=!1,bold:p=!1,black:u=!1,padding:m=!1,width:h,...g}=e;return(0,i.jsxs)("th",{...g,width:h,colSpan:s,className:"jsx-37d43d5e5a7f1947 "+(l()("th",{leftSepNoBorder:n,leftSep:r,smallFont:o,smallLabel:c,center:d,bold:p,black:u,padding:m})||""),children:[t,(0,i.jsx)(a(),{id:"37d43d5e5a7f1947",children:".th.jsx-37d43d5e5a7f1947{text-transform:uppercase;font-size:12px;color:rgba(0,0,0,.4);line-height:2.4}.th.center.jsx-37d43d5e5a7f1947{text-align:center}.th.bold.jsx-37d43d5e5a7f1947{font-weight:600}.th.black.jsx-37d43d5e5a7f1947{color:black}.th.smallFont.jsx-37d43d5e5a7f1947{font-size:11px}.th.smallLabel.jsx-37d43d5e5a7f1947{line-height:1;font-size:80%}.th.leftSep.jsx-37d43d5e5a7f1947{padding-left:10px;border-left:1px solid#eee}.th.leftSepNoBorder.jsx-37d43d5e5a7f1947{padding-left:8px}.th.padding.jsx-37d43d5e5a7f1947{padding:12px 3px}"})]})},c=r.forwardRef((e,t)=>{let{children:s,striped:n=!1,stripedColor:r,...o}=e;return(0,i.jsxs)("tr",{...o,ref:t,className:a().dynamic([["38d77492b43611cb",[null!=r?r:"#f9f9f9"]]])+" "+(l()("tr",{striped:n})||""),children:[s,(0,i.jsx)(a(),{id:"38d77492b43611cb",dynamic:[null!=r?r:"#f9f9f9"],children:".tr.striped.__jsx-style-dynamic-selector{background:".concat(null!=r?r:"#f9f9f9","}")})]})}),Table=e=>{let{children:t,style:s,border:n=!1,black:r=!0}=e;return(0,i.jsxs)("table",{style:s,className:"jsx-decfd180fb37febb "+(l()({border:n,black:r})||""),children:[t,(0,i.jsx)(a(),{id:"decfd180fb37febb",children:"table.jsx-decfd180fb37febb{width:100%;text-align:left}table.black.jsx-decfd180fb37febb{color:black}table.border.jsx-decfd180fb37febb{border-bottom:1px solid#eee}"})]})},Tbody=e=>{let{children:t}=e;return(0,i.jsx)("tbody",{children:t})},Thead=e=>{let{children:t,style:s,className:n}=e;return(0,i.jsx)("thead",{style:s,className:n,children:t})}},367757:function(e,t,s){s.d(t,{Z:function(){return Prerenderer}});var i=s(824246),n=s(827378);let Prerenderer=class Prerenderer extends n.PureComponent{render(){let e=this.props.urls;return!this.props.disableTaskerPrefetchLimit&&(this.props.limitPrefetchedLargeImages?e=this.props.urls.slice(0,5):this.props.limitPrefetchedImages&&(e=this.props.urls.slice(0,60))),(0,i.jsx)("div",{className:"prerender",children:e.map(e=>(0,i.jsx)("link",{rel:"prefetch",crossOrigin:"anonymous",href:e},e))})}}},306130:function(e,t,s){s.d(t,{$j:function(){return loadResponseWithMaybeUrl},Ck:function(){return updateResponseForReviewLevel},H5:function(){return shouldUseReviewHeader},L7:function(){return getReplicaTasks},_d:function(){return submitReviewerWorkerComments},nH:function(){return submitAttempterFeedbackForWorkerComments}});var i=s(298784),n=s.n(i),a=s(789018),r=s(854358),o=s(599789),l=s(900218),c=s(844159),d=s(352991),p=s(151785);function shouldUseReviewHeader(e,t){return t&&!n().isUndefined(e)&&![o.ReviewLevel.Attempt,o.ReviewLevel.ReviewConsensus].includes(e)}async function loadResponseWithMaybeUrl(e,t){return await (0,p.ZP)(async()=>{let{response:s}=await (0,d.ZP)(null,"internal/genai/loadChatResponse",{method:"POST",body:{response:e,projectId:t}});return s},{limit:3})}function updateResponseForReviewLevel(e){let{response:t,config:s,reviewLevel:i,readOnly:a}=e;if(n().isNil(i))return t;let o=new l.ChatHistory(s,t),d=o.getFlattenedStepsWithResponses(),p=n().cloneDeep(t.responses),u="";for(let e=0;e<d.length;e++){var m;let[t,n]=d[e];if(!t||!n)throw Error("step params or response is undefined when filtering responses for the current review level");let h=null!==(m=t.params.visibility_restricted)&&void 0!==m?m:[];if(!(0,l.isStepVisible)(t,i)&&h.every(e=>i<e)&&!s.turnLocking){let s=o.getNullContext(t),i=t.type===r.InteractionStepType.ModelResponseSelector&&t.params.force_consistent_responses;if(i){let e=n.context.candidates.filter(e=>"existing"!==e.id);s={...s,candidates:e}}let a={type:t.type,context:s,contextType:r.ContextType.Skipped,output:u};p[e]={...p[e],...a}}else{if(t.type===r.InteractionStepType.MultiTurnContinue&&(p[e].context={...p[e].context,message:u}),!a&&t.type===r.InteractionStepType.QualityMeasurement){let s={type:t.type,context:o.getNullContext(t),contextType:r.ContextType.Skipped,output:u};p[e]={...p[e],...s}}e<s.before.length&&t.type===r.InteractionStepType.PromptInput?u=n.output:c.RESPONSE_GENERATOR_STEPS.includes(t.type)&&(u=n.output),(e===s.before.length-1||t.type===r.InteractionStepType.MultiTurnContinue)&&(u="")}}return{...t,responses:p}}async function submitReviewerWorkerComments(e,t,s){let i=e.map(e=>{let{comment:i,childId:n,locationStart:a,locationEnd:r,overrideChildId:o,turn:l,title:c,quotedText:d}=e;return{assignmentId:t,comment:i,author:s,childId:null!=o?o:n,locationStart:a,locationEnd:r,turn:l,title:c,quotedText:d}});i.length&&await a.Z.genai.bulkAddWorkerComments({requests:i})}async function submitAttempterFeedbackForWorkerComments(e,t){let s=e.filter(e=>!!e.feedbackResponse).map(e=>{var s;return{workerCommentId:null!==(s=e.workerCommentId)&&void 0!==s?s:"",workerId:t,feedbackResponse:e.feedbackResponse}});s.length&&await a.Z.genai.bulkAddFeedbackToWorkerComments({requests:s})}async function getReplicaTasks(e,t){let{taskIds:s,responses:i,attemptVersions:n,attemptedAtReviewLevels:a,nodeIds:r,locked:o}=await (0,d.ZP)(null,"internal/genai/getReplicaTasks",{method:"POST",body:{nodeId:e,workerId:t}});return{taskIds:s,responses:i,attemptVersions:n,attemptedAtReviewLevels:a,nodeIds:r,locked:o}}},216672:function(e,t,s){s.d(t,{x:function(){return Trigger}});var i=s(824246);s(827378);var n=s(320280),a=s(614720);let Trigger=e=>{let{trigger:t}=e,s=o(),n=getKeys(t);return(0,i.jsx)("div",{children:n.map(e=>(0,i.jsx)("div",{className:s.trigger,children:(1===e.length?[e]:e.split("+")).map(e=>(0,i.jsx)(a.Z,{children:r[e]||e},e))},e))})},getKeys=e=>{let t="undefined"!=typeof navigator&&-1!==navigator.platform.toLowerCase().indexOf("mac");e=(e=t?(e=e.replaceAll("alt","opt")).replaceAll("Alt","opt"):(e=e.replaceAll("cmd","ctrl")).replaceAll("Cmd","ctrl")).replace(/\s/g,"");let s=e.split(","),i=s.lastIndexOf("");for(;i>=0;)s[i-1]+=",",s.splice(i,1),i=s.lastIndexOf("");return s},r={enter:"Enter",shift:"Shift",backspace:"Backspace"},o=(0,n.ZL)(()=>({trigger:{flex:"grow",display:"flex",alignItems:"center",justifyContent:"flex-end",marginBottom:"0.5em","&:last-of-type":{marginBottom:0},"& em":{color:"var(--color-RemoGray50)",padding:"0 4px"}}}))},723015:function(e,t,s){s.d(t,{Se:function(){return getGpuInfo},_B:function(){return trackMachineInfo}});var i=s(824246),n=s(827378),a=s(655839),r=s.n(a),o=s(571085),l=s(23630),c=s.n(l);let trackMachineInfo=async(e,t)=>{let{taskTimer:s,loggedUserId:i,user:n}=e,a=null==s?void 0:s.elapsedTime(),{jsHeapSizeLimit:r=0,totalJSHeapSize:l=0,usedJSHeapSize:d=0}=performance.memory||{},p=r>0?d/r:0,u=window.navigator.hardwareConcurrency,m=window.performance.timing.navigationStart,h=window.performance.timing.domComplete,g=(null==t?void 0:t.renderer)||"",x=(null==t?void 0:t.vendor)||"",f=navigator.brave&&await navigator.brave.isBrave()||!1,b=c().getParser(window.navigator.userAgent),{browser:k,engine:v,os:y,platform:j}=b.getResult(),w={userId:i||(null==n?void 0:n.id),elapsedTime:a,jsHeapSizeLimit:r,totalJSHeapSize:l,usedJSHeapSize:d,memUsage:p,cpus:u,timingLoadingStart:m,timingLoadingEnd:h,gpuRenderer:g,gpuVendor:x,browser:k,engine:v,os:y,platform:j,isBrave:f};(0,o.Kz)(o.ju.ScalerMachineInfo,w)};function getGpuInfo(){let e=document.createElement("canvas"),t=e.getContext("webgl"),s={renderer:"",vendor:""};if(t&&t.getExtension){var i;let e=t.getExtension("WEBGL_debug_renderer_info");null!=e&&(s.renderer=t.getParameter(e.UNMASKED_RENDERER_WEBGL),s.vendor=t.getParameter(e.UNMASKED_VENDOR_WEBGL)),null===(i=t.getExtension("WEBGL_lose_context"))||void 0===i||i.loseContext()}return s}t.ZP=e=>{let PerfTracking=class PerfTracking extends n.Component{componentDidMount(){this.gpuInfo=getGpuInfo(),this.trackMachineInfo()}render(){return(0,i.jsx)(e,{ref:this.props.forwardedRef,...this.props})}constructor(...e){super(...e),this.gpuInfo=void 0,this.trackMachineInfo=async()=>{await trackMachineInfo(this.props,this.gpuInfo),this.trackMachineInfoTimeout=setTimeout(this.trackMachineInfo,6e4)}}};function forwardRef(e,t){return(0,i.jsx)(PerfTracking,{...e,forwardedRef:t})}return r()(PerfTracking,e),forwardRef.displayName="withPerfTracking(".concat(e.displayName,")"),n.forwardRef(forwardRef)}},424132:function(e,t,s){s.d(t,{Sp:function(){return createShoutout},q3:function(){return createTour},x0:function(){return linearStepper}});var i=s(824246),n=s(674721),a=s.n(n),r=s(827378),o=s(165218),l=s.n(o),c=s(60042),d=s.n(c),p=s(792739);let Tooltip=class Tooltip extends r.Component{render(){let{title:e,content:t,extra:s,image:n,arrow:r,show:o,onClose:l,top:c,left:u,right:m,bottom:h,transform:g,tooltipColor:x,arrowPositionTop:f,tooltipWidth:b}=this.props;return o?(0,i.jsxs)("div",{style:{top:c,left:u,right:m,bottom:h,transform:g},className:a().dynamic([["30e7b1cfbf53947b",[null!=x?x:"#008eff",null!=b?b:224,null!=x?x:"#008eff",null!=x?x:"#008eff",null!=x?x:"#008eff",null!=f?f:"50%",null!=x?x:"#008eff",null!=f?f:"50%"]]])+" "+(d()("tooltip-container","animation-".concat(r))||""),children:[(0,i.jsxs)("div",{className:a().dynamic([["30e7b1cfbf53947b",[null!=x?x:"#008eff",null!=b?b:224,null!=x?x:"#008eff",null!=x?x:"#008eff",null!=x?x:"#008eff",null!=f?f:"50%",null!=x?x:"#008eff",null!=f?f:"50%"]]])+" "+(d()("wrapper","arrow-".concat(r))||""),children:[(0,i.jsx)("strong",{className:a().dynamic([["30e7b1cfbf53947b",[null!=x?x:"#008eff",null!=b?b:224,null!=x?x:"#008eff",null!=x?x:"#008eff",null!=x?x:"#008eff",null!=f?f:"50%",null!=x?x:"#008eff",null!=f?f:"50%"]]]),children:e}),!!t&&(0,i.jsx)("p",{className:a().dynamic([["30e7b1cfbf53947b",[null!=x?x:"#008eff",null!=b?b:224,null!=x?x:"#008eff",null!=x?x:"#008eff",null!=x?x:"#008eff",null!=f?f:"50%",null!=x?x:"#008eff",null!=f?f:"50%"]]]),children:t}),!!n&&(0,i.jsx)("img",{src:n,className:a().dynamic([["30e7b1cfbf53947b",[null!=x?x:"#008eff",null!=b?b:224,null!=x?x:"#008eff",null!=x?x:"#008eff",null!=x?x:"#008eff",null!=f?f:"50%",null!=x?x:"#008eff",null!=f?f:"50%"]]])+" image"}),s,!!l&&(0,i.jsx)("div",{onClick:l,className:a().dynamic([["30e7b1cfbf53947b",[null!=x?x:"#008eff",null!=b?b:224,null!=x?x:"#008eff",null!=x?x:"#008eff",null!=x?x:"#008eff",null!=f?f:"50%",null!=x?x:"#008eff",null!=f?f:"50%"]]])+" close",children:(0,i.jsx)(p.FontAwesomeIcon,{icon:"times"})})]}),(0,i.jsx)(a(),{id:"30e7b1cfbf53947b",dynamic:[null!=x?x:"#008eff",null!=b?b:224,null!=x?x:"#008eff",null!=x?x:"#008eff",null!=x?x:"#008eff",null!=f?f:"50%",null!=x?x:"#008eff",null!=f?f:"50%"],children:".tooltip-container.__jsx-style-dynamic-selector{background:".concat(null!=x?x:"#008eff",";color:white;position:absolute;width:").concat(null!=b?b:224,'px;z-index:1000;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0px 2px 10px rgba(0,0,0,.2);-moz-box-shadow:0px 2px 10px rgba(0,0,0,.2);box-shadow:0px 2px 10px rgba(0,0,0,.2);-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;backface-visibility:hidden}.tooltip-container.__jsx-style-dynamic-selector strong.__jsx-style-dynamic-selector{font-size:16px;margin-bottom:12px;padding-right:20px;display:block}.tooltip-container.__jsx-style-dynamic-selector p.__jsx-style-dynamic-selector{margin:0;font-size:14px;line-height:20px}.tooltip-container.__jsx-style-dynamic-selector a{color:white!important;font-weight:normal!important;text-decoration:underline!important}.tooltip-container.__jsx-style-dynamic-selector a:hover{opacity:.6}.tooltip-container.__jsx-style-dynamic-selector .image.__jsx-style-dynamic-selector,.tooltip-container.__jsx-style-dynamic-selector img{display:block;margin:12px 0;width:100%;max-width:100%;height:auto;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.tooltip-container.__jsx-style-dynamic-selector .wrapper.__jsx-style-dynamic-selector{padding:12px;position:relative}.tooltip-container.__jsx-style-dynamic-selector .wrapper.__jsx-style-dynamic-selector .close.__jsx-style-dynamic-selector{position:absolute;top:16px;right:16px;font-size:16px;opacity:.5;cursor:pointer;-webkit-transition:all 300ms;-moz-transition:all 300ms;-o-transition:all 300ms;transition:all 300ms}.tooltip-container.__jsx-style-dynamic-selector .wrapper.__jsx-style-dynamic-selector .close.__jsx-style-dynamic-selector:hover{opacity:1}.tooltip-container.__jsx-style-dynamic-selector .wrapper.__jsx-style-dynamic-selector .close.__jsx-style-dynamic-selector:active{opacity:.8}.tooltip-container.__jsx-style-dynamic-selector .wrapper.__jsx-style-dynamic-selector:before{content:"";width:0;height:0;position:absolute}.tooltip-container.__jsx-style-dynamic-selector .wrapper.arrow-bottom.__jsx-style-dynamic-selector:before{border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid ').concat(null!=x?x:"#008eff",";bottom:-8px;left:50%;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%)}.tooltip-container.__jsx-style-dynamic-selector .wrapper.arrow-top.__jsx-style-dynamic-selector:before{border-left:8px solid transparent;border-right:8px solid transparent;border-bottom:8px solid ").concat(null!=x?x:"#008eff",";top:-8px;left:50%;-webkit-transform:translatex(-50%);-moz-transform:translatex(-50%);-ms-transform:translatex(-50%);-o-transform:translatex(-50%);transform:translatex(-50%)}.tooltip-container.__jsx-style-dynamic-selector .wrapper.arrow-left.__jsx-style-dynamic-selector:before{border-top:8px solid transparent;border-bottom:8px solid transparent;border-right:8px solid ").concat(null!=x?x:"#008eff",";top:").concat(null!=f?f:"50%",";left:-8px;-webkit-transform:translatey(-50%);-moz-transform:translatey(-50%);-ms-transform:translatey(-50%);-o-transform:translatey(-50%);transform:translatey(-50%)}.tooltip-container.__jsx-style-dynamic-selector .wrapper.arrow-right.__jsx-style-dynamic-selector:before{border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:8px solid ").concat(null!=x?x:"#008eff",";top:").concat(null!=f?f:"50%",";right:-8px;-webkit-transform:translatey(-50%);-moz-transform:translatey(-50%);-ms-transform:translatey(-50%);-o-transform:translatey(-50%);transform:translatey(-50%)}.tooltip-container.animation-bottom.__jsx-style-dynamic-selector{margin-top:-12px;-webkit-transform:translate(-50%,-100%);-moz-transform:translate(-50%,-100%);-ms-transform:translate(-50%,-100%);-o-transform:translate(-50%,-100%);transform:translate(-50%,-100%);-webkit-transform-origin:center bottom;-moz-transform-origin:center bottom;-ms-transform-origin:center bottom;-o-transform-origin:center bottom;transform-origin:center bottom;-webkit-animation:ScaleOpeningBottom 300ms;-moz-animation:ScaleOpeningBottom 300ms;-o-animation:ScaleOpeningBottom 300ms;animation:ScaleOpeningBottom 300ms}.tooltip-container.animation-top.__jsx-style-dynamic-selector{margin-bottom:-12px;-webkit-transform:translate(-50%,100%);-moz-transform:translate(-50%,100%);-ms-transform:translate(-50%,100%);-o-transform:translate(-50%,100%);transform:translate(-50%,100%);-webkit-transform-origin:center top;-moz-transform-origin:center top;-ms-transform-origin:center top;-o-transform-origin:center top;transform-origin:center top;-webkit-animation:ScaleOpeningTop 300ms;-moz-animation:ScaleOpeningTop 300ms;-o-animation:ScaleOpeningTop 300ms;animation:ScaleOpeningTop 300ms}.tooltip-container.animation-left.__jsx-style-dynamic-selector{margin-right:-12px;-webkit-transform:translate(100%,-50%);-moz-transform:translate(100%,-50%);-ms-transform:translate(100%,-50%);-o-transform:translate(100%,-50%);transform:translate(100%,-50%);-webkit-transform-origin:center left;-moz-transform-origin:center left;-ms-transform-origin:center left;-o-transform-origin:center left;transform-origin:center left;-webkit-animation:ScaleOpeningLeft 300ms;-moz-animation:ScaleOpeningLeft 300ms;-o-animation:ScaleOpeningLeft 300ms;animation:ScaleOpeningLeft 300ms}.tooltip-container.animation-right.__jsx-style-dynamic-selector{margin-left:-12px;-webkit-transform:translate(-100%,-50%);-moz-transform:translate(-100%,-50%);-ms-transform:translate(-100%,-50%);-o-transform:translate(-100%,-50%);transform:translate(-100%,-50%);-webkit-transform-origin:center right;-moz-transform-origin:center right;-ms-transform-origin:center right;-o-transform-origin:center right;transform-origin:center right;-webkit-animation:ScaleOpeningRight 300ms;-moz-animation:ScaleOpeningRight 300ms;-o-animation:ScaleOpeningRight 300ms;animation:ScaleOpeningRight 300ms}.tooltip-container.animation-center.__jsx-style-dynamic-selector{-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;-moz-transform-origin:center center;-ms-transform-origin:center center;-o-transform-origin:center center;transform-origin:center center;-webkit-animation:ScaleOpeningCenter 300ms;-moz-animation:ScaleOpeningCenter 300ms;-o-animation:ScaleOpeningCenter 300ms;animation:ScaleOpeningCenter 300ms}.tooltip-container.animation-none.__jsx-style-dynamic-selector{-webkit-transform-origin:center center;-moz-transform-origin:center center;-ms-transform-origin:center center;-o-transform-origin:center center;transform-origin:center center;-webkit-animation:ScaleOpeningNone 300ms;-moz-animation:ScaleOpeningNone 300ms;-o-animation:ScaleOpeningNone 300ms;animation:ScaleOpeningNone 300ms}@-webkit-keyframes ScaleOpeningBottom{from{-webkit-transform:translate(-50%,-100%)scale(.5);transform:translate(-50%,-100%)scale(.5)}to{-webkit-transform:translate(-50%,-100%)scale(1);transform:translate(-50%,-100%)scale(1)}}@-moz-keyframes ScaleOpeningBottom{from{-moz-transform:translate(-50%,-100%)scale(.5);transform:translate(-50%,-100%)scale(.5)}to{-moz-transform:translate(-50%,-100%)scale(1);transform:translate(-50%,-100%)scale(1)}}@-o-keyframes ScaleOpeningBottom{from{-o-transform:translate(-50%,-100%)scale(.5);transform:translate(-50%,-100%)scale(.5)}to{-o-transform:translate(-50%,-100%)scale(1);transform:translate(-50%,-100%)scale(1)}}@keyframes ScaleOpeningBottom{from{-webkit-transform:translate(-50%,-100%)scale(.5);-moz-transform:translate(-50%,-100%)scale(.5);-o-transform:translate(-50%,-100%)scale(.5);transform:translate(-50%,-100%)scale(.5)}to{-webkit-transform:translate(-50%,-100%)scale(1);-moz-transform:translate(-50%,-100%)scale(1);-o-transform:translate(-50%,-100%)scale(1);transform:translate(-50%,-100%)scale(1)}}@-webkit-keyframes ScaleOpeningTop{from{-webkit-transform:translate(-50%,100%)scale(.5);transform:translate(-50%,100%)scale(.5)}to{-webkit-transform:translate(-50%,100%)scale(1);transform:translate(-50%,100%)scale(1)}}@-moz-keyframes ScaleOpeningTop{from{-moz-transform:translate(-50%,100%)scale(.5);transform:translate(-50%,100%)scale(.5)}to{-moz-transform:translate(-50%,100%)scale(1);transform:translate(-50%,100%)scale(1)}}@-o-keyframes ScaleOpeningTop{from{-o-transform:translate(-50%,100%)scale(.5);transform:translate(-50%,100%)scale(.5)}to{-o-transform:translate(-50%,100%)scale(1);transform:translate(-50%,100%)scale(1)}}@keyframes ScaleOpeningTop{from{-webkit-transform:translate(-50%,100%)scale(.5);-moz-transform:translate(-50%,100%)scale(.5);-o-transform:translate(-50%,100%)scale(.5);transform:translate(-50%,100%)scale(.5)}to{-webkit-transform:translate(-50%,100%)scale(1);-moz-transform:translate(-50%,100%)scale(1);-o-transform:translate(-50%,100%)scale(1);transform:translate(-50%,100%)scale(1)}}@-webkit-keyframes ScaleOpeningLeft{from{-webkit-transform:translate(100%,-50%)scale(.5);transform:translate(100%,-50%)scale(.5)}to{-webkit-transform:translate(100%,-50%)scale(1);transform:translate(100%,-50%)scale(1)}}@-moz-keyframes ScaleOpeningLeft{from{-moz-transform:translate(100%,-50%)scale(.5);transform:translate(100%,-50%)scale(.5)}to{-moz-transform:translate(100%,-50%)scale(1);transform:translate(100%,-50%)scale(1)}}@-o-keyframes ScaleOpeningLeft{from{-o-transform:translate(100%,-50%)scale(.5);transform:translate(100%,-50%)scale(.5)}to{-o-transform:translate(100%,-50%)scale(1);transform:translate(100%,-50%)scale(1)}}@keyframes ScaleOpeningLeft{from{-webkit-transform:translate(100%,-50%)scale(.5);-moz-transform:translate(100%,-50%)scale(.5);-o-transform:translate(100%,-50%)scale(.5);transform:translate(100%,-50%)scale(.5)}to{-webkit-transform:translate(100%,-50%)scale(1);-moz-transform:translate(100%,-50%)scale(1);-o-transform:translate(100%,-50%)scale(1);transform:translate(100%,-50%)scale(1)}}@-webkit-keyframes ScaleOpeningRight{from{-webkit-transform:translate(-100%,-50%)scale(.5);transform:translate(-100%,-50%)scale(.5)}to{-webkit-transform:translate(-100%,-50%)scale(1);transform:translate(-100%,-50%)scale(1)}}@-moz-keyframes ScaleOpeningRight{from{-moz-transform:translate(-100%,-50%)scale(.5);transform:translate(-100%,-50%)scale(.5)}to{-moz-transform:translate(-100%,-50%)scale(1);transform:translate(-100%,-50%)scale(1)}}@-o-keyframes ScaleOpeningRight{from{-o-transform:translate(-100%,-50%)scale(.5);transform:translate(-100%,-50%)scale(.5)}to{-o-transform:translate(-100%,-50%)scale(1);transform:translate(-100%,-50%)scale(1)}}@keyframes ScaleOpeningRight{from{-webkit-transform:translate(-100%,-50%)scale(.5);-moz-transform:translate(-100%,-50%)scale(.5);-o-transform:translate(-100%,-50%)scale(.5);transform:translate(-100%,-50%)scale(.5)}to{-webkit-transform:translate(-100%,-50%)scale(1);-moz-transform:translate(-100%,-50%)scale(1);-o-transform:translate(-100%,-50%)scale(1);transform:translate(-100%,-50%)scale(1)}}@-webkit-keyframes ScaleOpeningCenter{from{-webkit-transform:translate(-50%,-50%)scale(.5);transform:translate(-50%,-50%)scale(.5)}to{-webkit-transform:translate(-50%,-50%)scale(1);transform:translate(-50%,-50%)scale(1)}}@-moz-keyframes ScaleOpeningCenter{from{-moz-transform:translate(-50%,-50%)scale(.5);transform:translate(-50%,-50%)scale(.5)}to{-moz-transform:translate(-50%,-50%)scale(1);transform:translate(-50%,-50%)scale(1)}}@-o-keyframes ScaleOpeningCenter{from{-o-transform:translate(-50%,-50%)scale(.5);transform:translate(-50%,-50%)scale(.5)}to{-o-transform:translate(-50%,-50%)scale(1);transform:translate(-50%,-50%)scale(1)}}@keyframes ScaleOpeningCenter{from{-webkit-transform:translate(-50%,-50%)scale(.5);-moz-transform:translate(-50%,-50%)scale(.5);-o-transform:translate(-50%,-50%)scale(.5);transform:translate(-50%,-50%)scale(.5)}to{-webkit-transform:translate(-50%,-50%)scale(1);-moz-transform:translate(-50%,-50%)scale(1);-o-transform:translate(-50%,-50%)scale(1);transform:translate(-50%,-50%)scale(1)}}@-webkit-keyframes ScaleOpeningNone{from{-webkit-transform:scale(.5);transform:scale(.5)}to{-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes ScaleOpeningNone{from{-moz-transform:scale(.5);transform:scale(.5)}to{-moz-transform:scale(1);transform:scale(1)}}@-o-keyframes ScaleOpeningNone{from{-o-transform:scale(.5);transform:scale(.5)}to{-o-transform:scale(1);transform:scale(1)}}@keyframes ScaleOpeningNone{from{-webkit-transform:scale(.5);-moz-transform:scale(.5);-o-transform:scale(.5);transform:scale(.5)}to{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}")})]}):null}};Tooltip.defaultProps={top:"auto",left:"auto",right:"auto",bottom:"auto"};let TooltipSpot=class TooltipSpot extends r.Component{render(){let{top:e,left:t,right:s,bottom:n,attachPosition:r,onEnter:o}=this.props;return(0,i.jsxs)("div",{style:{top:e,left:t,right:s,bottom:n},onMouseEnter:o,className:"jsx-6460537edce038b6 "+(d()("spot-container",r)||""),children:[(0,i.jsx)("div",{className:"jsx-6460537edce038b6 spot"}),(0,i.jsx)(a(),{id:"6460537edce038b6",children:".spot-container.jsx-6460537edce038b6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;width:40px;height:40px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%}.spot-container.jsx-6460537edce038b6 .spot.jsx-6460537edce038b6{width:40px;height:40px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;border:solid 2px#008eff;-webkit-animation:SpotAnimation 1.5s infinite;-moz-animation:SpotAnimation 1.5s infinite;-o-animation:SpotAnimation 1.5s infinite;animation:SpotAnimation 1.5s infinite}.spot-container.top.jsx-6460537edce038b6{-webkit-transform:translate(-50%,0);-moz-transform:translate(-50%,0);-ms-transform:translate(-50%,0);-o-transform:translate(-50%,0);transform:translate(-50%,0)}.spot-container.left.jsx-6460537edce038b6{-webkit-transform:translate(0,-50%);-moz-transform:translate(0,-50%);-ms-transform:translate(0,-50%);-o-transform:translate(0,-50%);transform:translate(0,-50%)}.spot-container.right.jsx-6460537edce038b6{-webkit-transform:translate(0,-50%);-moz-transform:translate(0,-50%);-ms-transform:translate(0,-50%);-o-transform:translate(0,-50%);transform:translate(0,-50%)}.spot-container.bottom.jsx-6460537edce038b6{-webkit-transform:translate(-50%,0);-moz-transform:translate(-50%,0);-ms-transform:translate(-50%,0);-o-transform:translate(-50%,0);transform:translate(-50%,0)}.spot-container.center.jsx-6460537edce038b6{-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}@-webkit-keyframes SpotAnimation{from{width:0;height:0;opacity:.8}to{width:40px;height:40px;opacity:0}}@-moz-keyframes SpotAnimation{from{width:0;height:0;opacity:.8}to{width:40px;height:40px;opacity:0}}@-o-keyframes SpotAnimation{from{width:0;height:0;opacity:.8}to{width:40px;height:40px;opacity:0}}@keyframes SpotAnimation{from{width:0;height:0;opacity:.8}to{width:40px;height:40px;opacity:0}}"})]})}};let AttachTooltip=class AttachTooltip extends r.Component{componentDidMount(){var e;setTimeout(this.refreshTooltipPosition,null!==(e=this.props.delay)&&void 0!==e?e:0),window.addEventListener("resize",this.refreshTooltipPosition)}componentWillUnmount(){window.removeEventListener("resize",this.refreshTooltipPosition)}componentDidUpdate(e){(e.offsetY!==this.props.offsetY||e.offsetX!==this.props.offsetX||e.attachPosition!==this.props.attachPosition)&&this.refreshTooltipPosition()}render(){let{children:e,content:t,attachDisplay:s,position:n,alignSelf:a}=this.props,{top:r,left:o,right:l,bottom:c,mounted:d}=this.state,p={display:s};return n&&(p.position=n),a&&(p.alignSelf=a),(0,i.jsxs)("div",{ref:this.containerRef,style:p,children:[d&&e({top:r,left:o,right:l,bottom:c}),t]})}constructor(e){super(e),this.refreshTooltipPosition=()=>{if(!this.containerRef.current)return;let{offsetX:e,offsetY:t,attachPosition:s}=this.props,i=this.containerRef.current.getBoundingClientRect(),n="auto",a="auto",r="auto",o="auto";"bottom"===s?(n=t,a=i.width/2+e):"top"===s?(o=-t,a=i.width/2+e):"left"===s?(n=i.height/2+t,r=-e):"right"===s?(n=i.height/2+t,a=e):"center"===s?(n=i.height/2+t,a=i.width/2+e):"none"===s&&(n=t,a=e),this.setState({top:n,left:a,right:r,bottom:o,mounted:!0})},this.state={top:"auto",left:"auto",bottom:"auto",right:"auto",mounted:!1},this.containerRef=r.createRef()}};AttachTooltip.defaultProps={offsetX:0,offsetY:0,delay:0,attachDisplay:"block"};let AttachedTooltip=class AttachedTooltip extends r.Component{onShowTooltipWithSpot(){this.setState({show:!0})}renderBody(e){let{top:t,left:s,right:n,bottom:a,showWithSpot:r,props:o}=e,l=this.state.show&&r||!r,c=!this.state.show&&r;return(0,i.jsxs)("div",{style:{position:"absolute"},children:[l&&(0,i.jsx)(Tooltip,{...o,top:t,left:s,right:n,bottom:a}),c&&(0,i.jsx)(TooltipSpot,{attachPosition:o.arrow,top:t,left:s,right:n,bottom:a,onEnter:this.onShowTooltipWithSpot})]})}render(){let{children:e,position:t,alignSelf:s,attachDisplay:n,offsetX:a,offsetY:r,showWithSpot:o,delay:l,...c}=this.props;return"absolute"===t?this.renderBody({top:c.top||"auto",left:c.left||"auto",right:c.right||"auto",bottom:c.bottom||"auto",showWithSpot:o,props:c}):(0,i.jsx)(AttachTooltip,{content:e,attachPosition:c.arrow,offsetX:a,offsetY:r,attachDisplay:n,delay:l,position:t,alignSelf:s,children:e=>{let{top:t,left:s,right:i,bottom:n}=e;return this.renderBody({top:t,left:s,right:i,bottom:n,showWithSpot:o,props:c})}})}constructor(e){super(e),this.state={show:!1},this.onShowTooltipWithSpot=this.onShowTooltipWithSpot.bind(this)}};AttachedTooltip.defaultProps={top:"auto",left:"auto",right:"auto",bottom:"auto"};let TooltipButton=class TooltipButton extends r.Component{render(){let{children:e,icon:t,...s}=this.props;return(0,i.jsxs)("div",{...s,className:"jsx-9916b684417fed3 button",children:[!!t&&(0,i.jsx)("span",{className:"jsx-9916b684417fed3 icon",children:t}),e,(0,i.jsx)(a(),{id:"9916b684417fed3",children:".button.jsx-9916b684417fed3{background:rgba(0,0,0,.2);-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;text-align:center;line-height:32px;text-transform:uppercase;font-weight:bold;-webkit-transition:all 200ms;-moz-transition:all 200ms;-o-transition:all 200ms;transition:all 200ms;cursor:pointer}.button.jsx-9916b684417fed3 .icon.jsx-9916b684417fed3{display:inline-block;margin-right:10px}.button.jsx-9916b684417fed3:hover{background:rgba(0,0,0,.4)}.button.jsx-9916b684417fed3:active{opacity:.8}"})]})}};var u=s(642830);let m="__TourFinished";function linearStepper(e){return t=>{let s=e[e.indexOf(t)+1];return s||m}}function createTour(e){let t=r.createContext({currentStep:m,disabled:!1,earlyExit:!1,nextStep:()=>{},finish:()=>{},setStep:()=>{}});function getStoreKey(){return"tour-".concat(e.storageName)}function userHasSeenTour(){return!!localStorage.getItem(getStoreKey())}t.displayName="TourContext-".concat(e.storageName);let TourProvider=s=>{let{onFinish:n}=s,[a,o]=r.useState({currentStep:"once"===(e.showing||"always")&&userHasSeenTour()?m:s.initialStep,disabled:s.disabled||!1,earlyExit:s.earlyExit||!1,nextStep:()=>{o(e=>e.currentStep===m?e:{...e,currentStep:s.getNextStep(e.currentStep)})},finish:()=>o(e=>({...e,currentStep:m})),setStep:e=>o(t=>({...t,currentStep:e}))});return r.useEffect(()=>{if(a.currentStep===m){try{localStorage.setItem(getStoreKey(),"true")}catch(e){u.Z.error("Failed to set local storage for ".concat(getStoreKey()),e)}n&&n()}},[n,a.currentStep]),(0,i.jsx)(t.Provider,{value:a,children:s.children})},s=r.memo(s=>{let n=r.useContext(t);if(n.disabled||n.currentStep===m)return s.children||null;let o=e.isFinalStep(n.currentStep),handleNextStep=()=>{n.nextStep(),s.onStepDone&&s.onStepDone()},l=(0,i.jsx)(TooltipButton,{icon:s.buttonIcon,onClick:e=>{s.onClick&&s.onClick(e),e.stopPropagation(),handleNextStep()},children:s.buttonText||(o?"Done":"Next")}),c=(0,i.jsxs)("div",{className:"jsx-947efc8ae2955e71 extra",children:[s.customExtra||l,(0,i.jsx)(a(),{id:"947efc8ae2955e71",children:".extra.jsx-947efc8ae2955e71{margin-top:12px}"})]});return(0,i.jsx)(AttachedTooltip,{show:n.currentStep===s.forStep,onClose:()=>{n.earlyExit?n.finish():n.nextStep()},extra:c,...s,...e.tooltipProps})});return{Provider:l()(()=>Promise.resolve(TourProvider),{ssr:!1,loading:()=>null}),Tooltip:l()(()=>Promise.resolve(s),{ssr:!1,loading:()=>null}),Context:t,hasUserSeenTour:userHasSeenTour,reset:()=>{localStorage.deleteItem(getStoreKey())}}}var h=r.createContext({disabled:!1});let createShoutout=e=>{let{storageName:t,showing:s}=e,n=createTour({storageName:"shoutouts-"+t,isFinalStep:()=>!0,showing:s}),a=r.memo(function(e){let{disabled:t}=r.useContext(h);return(0,i.jsx)(n.Provider,{initialStep:!0,disabled:t,getNextStep:()=>m,children:(0,i.jsx)(n.Tooltip,{forStep:!0,...e,onStepDone:e.onClose})})});return{Tooltip:a,reset:()=>n.reset(),hasUserSeen:n.hasUserSeenTour}}},275587:function(e,t,s){s.d(t,{R:function(){return useAnnouncementContext},z:function(){return u}});var i=s(824246),n=s(827378),a=s(539289),r=s(634948),o=s(115125),l=s(352991),c=s(599789),d=s(943100);let p=n.createContext({fetchAnnouncement:e=>Promise.resolve()}),useAnnouncementContext=()=>n.useContext(p),sendAnnouncementSeen=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{await (0,l.ZP)(null,"internal/announcements/seen",{method:"POST",body:{announcement:e,acknowledged:t}})}catch(e){(0,l.vj)(e,{handleHttp:!0})}},AnnouncementDialog=e=>{var t;let{announcementState:s,setAnnouncementState:n,user:o}=e,onAnnouncementContinued=e=>{let{announcement:t,announcements:i,announcementIdx:a}=s;e&&sendAnnouncementSeen(t._id,e);let r=a+1,o=i[r];(null==o?void 0:o._id)&&sendAnnouncementSeen(o._id),n({announcement:o,announcementIdx:r,announcements:i})},onAllAnnouncementsSkipped=()=>{s.announcements.forEach(e=>{e.displayType!==c.AnnouncementDisplayType.LegalAcknowledgement&&sendAnnouncementSeen(e._id,!0)}),n({announcements:[],announcement:null})},l=s.announcement,p=null!==(t=null==l?void 0:l.displayType)&&void 0!==t?t:c.AnnouncementDisplayType.Standard;if(!l)return null;switch(p){case c.AnnouncementDisplayType.Standard:return(0,i.jsx)(a.Z,{notification:l,onContinue:onAnnouncementContinued,onSkip:onAllAnnouncementsSkipped,isCorpUser:o.isCorporateUser,platform:(0,d.k)(o)});case c.AnnouncementDisplayType.LegalAcknowledgement:return(0,i.jsx)(r.Z,{notification:l,onContinue:onAnnouncementContinued,onSkip:onAllAnnouncementsSkipped,isCorpUser:o.isCorporateUser});default:return null}},u=(0,o.ns)(e=>{let{children:t,displayLocation:s,url:a,user:r,...o}=e,[c,d]=(0,n.useState)({announcement:null,announcements:[],announcementIdx:0}),fetchAnnouncement=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{load_announcements:t=!1}=(null==a?void 0:a.query)||{},{spoofed:i}=r;if((!i||t)&&!c.announcement)try{let{announcements:t}=await (0,l.ZP)(null,"internal/announcements/unread",{query:{displayLocation:s,...e.query}}),[i]=t;i&&d({announcements:t,announcement:i,announcementIdx:0})}catch(e){(0,l.vj)(e,{handleHttp:!0})}};return(0,i.jsxs)(p.Provider,{value:{fetchAnnouncement},children:[(0,i.jsx)(AnnouncementDialog,{announcementState:c,setAnnouncementState:d,user:r,...o}),t]})})},333042:function(e,t,s){s.d(t,{z:function(){return st.z},Z:function(){return sf}});var i,n=s(824246),a=s(827378),r=s(572111),o=s.n(r),l=s(456552),c=s(242095),d=s(711719),p=s.n(d),u=s(674721),m=s.n(u),h=s(298784),g=s.n(h),x=s(686677),f=s.n(x),b=s(252708),k=s.n(b),v=s(468891),y=s(44579);let FullscreenCard=class FullscreenCard extends a.Component{render(){let e="minimal-light"===this.props.cardStyle?{background:"rgba(255, 255, 255, 0.7)",boxShadow:"24px 24px 0px rgba(0, 0, 0, 0.02)"}:{boxShadow:"0 50px 100px -30px rgba(0, 0, 0, .5)"};return(0,n.jsxs)("div",{className:"jsx-f192cced25549fba fullscreen-card--container",children:[(0,n.jsx)("div",{style:e,className:"jsx-f192cced25549fba fullscreen-card",children:this.props.children}),(0,n.jsx)(m(),{id:"f192cced25549fba",children:".fullscreen-card--container.jsx-f192cced25549fba{height:100vh;width:100vw;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:var(--color-RemoGray01)}.fullscreen-card.jsx-f192cced25549fba{width:95vw;max-width:820px;margin:40px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;padding:80px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;background:white;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}"})]})}};var j=s(910912),w=s(106860),T=s(163543),C=s(318308),S=s(570442),R=s(352991),A=s(436878),I=s(336235),_=s(837553),N=s(599789),L=s(167469),E=s(781355);let getProjectLink=e=>"/onboarding-center/project/".concat(e._id).concat("".concat(g().isFinite(e.reviewLevel)?"?reviewLevel=".concat(e.reviewLevel):""));var scalers_NoMoreTasks=e=>{let[t,s]=(0,a.useState)([]),[i,r]=(0,a.useState)([]),o=(0,I.Z)("(max-width: ".concat(A.Et,")")),l=!!((0,_.ZP)("disable-training-center-for-country",{countryCode:e.user.ipCountryCode},!1)&&!e.user.workerSource);(0,y.Z)(async()=>{let e=await (0,R.ZP)(null,"internal/scaler/projects/paused");s([]);let t=e.pausedPermissionGroups;t&&(g().remove(t,{canPause:!1}),g().remove(t,{isActive:!0})),r(t),(0,S.IO)(()=>(0,S.xx)({}))});let renderRecommendedCourses=()=>{let e=g().isEmpty(t)?null:t[0];return e?(0,n.jsxs)("div",{className:"jsx-f685d146e566e4be recommended-course",children:[(0,n.jsxs)("div",{className:"jsx-f685d146e566e4be",children:[(0,n.jsxs)("span",{className:"jsx-f685d146e566e4be",children:["This just in… there are many available tasks in the"," ",(0,n.jsxs)("em",{className:"jsx-f685d146e566e4be",children:[e.title," ",(0,C.Z)(e.taskType,{workerFacing:!0})]})," ","project!"]}),(0,n.jsx)("span",{style:{display:"inline-block",width:"12px"},className:"jsx-f685d146e566e4be"}),(0,n.jsx)(j.Z,{arrows:!0,textTransform:"none",href:getProjectLink(e),children:"Go to the project"})]}),(0,n.jsx)(m(),{id:"f685d146e566e4be",children:"@-webkit-keyframes grow{from{-webkit-transform:scale(0);transform:scale(0)}to{-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes grow{from{-moz-transform:scale(0);transform:scale(0)}to{-moz-transform:scale(1);transform:scale(1)}}@-o-keyframes grow{from{-o-transform:scale(0);transform:scale(0)}to{-o-transform:scale(1);transform:scale(1)}}@keyframes grow{from{-webkit-transform:scale(0);-moz-transform:scale(0);-o-transform:scale(0);transform:scale(0)}to{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}.recommended-course.jsx-f685d146e566e4be{-webkit-animation:grow.5s;-moz-animation:grow.5s;-o-animation:grow.5s;animation:grow.5s;margin-top:32px;padding:16px;border:2px solid var(--color-RemoGreen);-webkit-border-radius:var(--border-radius);-moz-border-radius:var(--border-radius);border-radius:var(--border-radius);background:var(--color-RemoGreen);color:white;font-size:18px;font-weight:bold}.recommended-course.jsx-f685d146e566e4be span.jsx-f685d146e566e4be{line-height:2em}.recommended-course.jsx-f685d146e566e4be em.jsx-f685d146e566e4be{font-style:normal;opacity:.7}"})]}):null},renderNonLidarBody=()=>{let{user:t}=e,s=t.accountType===N.AccountType.Expert,i=s?(0,n.jsx)(T.ZP,{href:"/expert/",children:"Back to Home Page "}):(0,n.jsx)(T.ZP,{href:"/dashboard",children:"Back To Dashboard"}),r=s?"".concat(E.ZA,"/profile"):"/account";return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("h1",{className:"jsx-89c205f6b1a5729d",children:"Your task queue is currently empty."}),(0,n.jsxs)("ul",{className:"jsx-89c205f6b1a5729d",children:[(0,n.jsx)("li",{className:"jsx-89c205f6b1a5729d",children:"Large volumes of user requests can sometimes cause this - Please try refreshing"}),(0,n.jsxs)("li",{className:"jsx-89c205f6b1a5729d",children:["Make sure you have a valid ",(0,n.jsx)(T.ZP,{href:r,children:"payment method"})," set up to begin tasking."]}),(0,n.jsx)("li",{className:"jsx-89c205f6b1a5729d",children:"If you are currently on a project and are expecting tasks in your queue, please contact the project's team in Slack."}),(0,n.jsx)("li",{className:"jsx-89c205f6b1a5729d",children:"If you just completed your training project or screening, the team will review your submission and will send you an email and update in Remotasks as soon as we have the results."}),!s&&(0,n.jsxs)("li",{className:"jsx-89c205f6b1a5729d",children:["We value your contribution to the development of AI. If you have any persisting issues, please contact our support team"," ",(0,n.jsx)("a",{href:"https://support.remotasks.com/hc/en-us/requests/new",className:"jsx-89c205f6b1a5729d",children:"here"}),"."]})]}),(0,n.jsx)("p",{className:"jsx-89c205f6b1a5729d",children:(0,n.jsx)("a",{className:"jsx-89c205f6b1a5729d",children:i})}),(0,n.jsx)(m(),{id:"4b2d48e7918c08e1",children:".icon img{display:inline;height:1em;width:1em;vertical-align:-.1em}"}),(0,n.jsx)(m(),{id:"c6a637fdc0931738",children:"h1.jsx-89c205f6b1a5729d{margin-top:0}ul.jsx-89c205f6b1a5729d,p.jsx-89c205f6b1a5729d{line-height:2em;font-weight:bold;font-size:18px;margin:36px 0}"})]})};return(0,n.jsx)(FullscreenCard,{cardStyle:"minimal-light",children:(0,n.jsx)("div",{children:(()=>{let t,s;let{user:r,query:c}=e,d=l?null:(0,n.jsxs)("li",{children:["Go to the"," ",(0,n.jsx)("a",{children:(0,n.jsx)(T.ZP,{href:"/onboarding-center",children:"Onboarding Center"})})," ","to get enabled on projects with tasks ",(0,n.jsx)(w.Z,{emoji:"\uD83C\uDF93"})]});if("lidar"!==c.type||g().isEmpty(g().without(r.allowedTaskTypes,L.TaskType.LidarAnnotation,L.TaskType.LidarSegmentation))){if(!("lidar"!==c.type&&!o&&g().some(r.allowedTaskTypes,e=>(0,N.isLidar)(e))))return renderNonLidarBody();t="Your classic task queue is empty",s=(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:["This may be temporary if there are many other taskers working on the same projects - try refreshing ",(0,n.jsx)(w.Z,{emoji:"\uD83D\uDD04"})]}),(0,n.jsxs)("li",{children:["Make sure you have a valid ",(0,n.jsx)(T.ZP,{href:"/account",children:"payment method"})," set up to begin tasking. ",(0,n.jsx)(w.Z,{emoji:"\uD83D\uDCB3"})]}),(0,n.jsxs)("li",{children:["There may be available tasks in your ",(0,n.jsx)(T.ZP,{href:"/tasks?type=lidar",children:"LiDAR queue"})," ",(0,n.jsx)(w.Z,{emoji:"\uD83D\uDCA1"})]}),d,i&&i.length>0&&(0,n.jsxs)("li",{children:["Go to the"," ",(0,n.jsx)("a",{children:(0,n.jsx)(T.ZP,{href:"/dashboard",children:"Dashboard"})})," ","to resume any paused projects ",(0,n.jsx)(w.Z,{emoji:"▶️"})]})]})}else t="Your LiDAR task queue is empty",s=(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:["There may be available tasks in your ",(0,n.jsx)(T.ZP,{href:"/tasks",children:"classic queue"})," ",(0,n.jsx)(w.Z,{emoji:"\uD83C\uDF4E"})]}),d]});return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("h1",{className:"jsx-251f883218c4dfa8",children:t}),(0,n.jsx)("p",{className:"jsx-251f883218c4dfa8",children:!o&&s}),!o&&!l&&renderRecommendedCourses(),(0,n.jsx)("p",{className:"jsx-251f883218c4dfa8",children:(0,n.jsx)("a",{className:"jsx-251f883218c4dfa8",children:(0,n.jsx)(T.ZP,{href:"/dashboard",children:"Back To Dashboard"})})}),(0,n.jsx)(m(),{id:"4b2d48e7918c08e1",children:".icon img{display:inline;height:1em;width:1em;vertical-align:-.1em}"}),(0,n.jsx)(m(),{id:"4fc1567a2d531591",children:"h1.jsx-251f883218c4dfa8{margin-top:0}p.jsx-251f883218c4dfa8{line-height:2em;font-weight:bold;font-size:18px;margin:36px 0}"})]})})()})})},P=s(533064),F=s(716124),D=s(271351),z=s(924364),Z=s(210918),B=s(524991),M=s(119875),O=s(454030),U=s(946975),H=s(608139),V=s.n(H),q=s(156075),Q=s(724606),W=s(751024),G=s(625694),J=s(320280);let Y="https://static.remotasks.com/uploads/shovel-man.gif";function getParsedDate(e){if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t}function canProjectUseLegacy(e){if(!e.legacyLidarExpirationDate)return!1;let t=getParsedDate(e.legacyLidarExpirationDate);return!!t&&t>=new Date}let K=(0,J.ZL)({header:{width:"100%",textAlign:"center"},expired:{backgroundColor:"var(--color-RemoGreen)"},countdown:{backgroundColor:"var(--color-RemoRed)"},inlineImg:{display:"inline-block"}}),calculateTimeLeft=e=>{if(!e)return null;let t=+e-+new Date;return t>0?{days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/1e3/60%60),seconds:Math.floor(t/1e3%60)}:null};var ui_LidarLiteCountdownBanner=e=>{let t=K(),s=getParsedDate(e.legacyLidarExpirationDate),[i,r]=(0,a.useState)(calculateTimeLeft(s));if((0,a.useEffect)(()=>{let e=setInterval(()=>{r(calculateTimeLeft(s))},1e3);return()=>clearInterval(e)},[e.legacyLidarExpirationDate]),!s)return null;let o=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("h2",{children:[(0,n.jsx)(w.Z,{emoji:"\uD83D\uDCD6"}),"\xa0You can learn more about how to use LidarLite, along with its numerous benefits,"," ",(0,n.jsx)("a",{href:"/migrate-to-lidarlite".concat(e.projectId?"?project="+e.projectId:""),target:"_blank",rel:"noopener noreferrer",children:"here"}),"\xa0",(0,n.jsx)(w.Z,{emoji:"\uD83D\uDCD6"})]})});return canProjectUseLegacy(e)&&i?(0,n.jsxs)("div",{className:"".concat(t.header," ").concat(t.countdown),children:[(0,n.jsxs)("h1",{children:[(0,n.jsx)("img",{src:Y,className:t.inlineImg}),"\xa0Warning: Soon, Lidar Classic will be disabled for this project.\xa0",(0,n.jsx)("img",{src:Y,className:t.inlineImg})]}),(0,n.jsxs)("h1",{children:[(0,n.jsx)(w.Z,{emoji:"⏰",size:"24px"}),"\xa0You have ",i.days," days, ",i.hours," hours, ",i.minutes," minutes,"," ",i.seconds," seconds until you have to use LidarLite!\xa0",(0,n.jsx)(w.Z,{emoji:"⏰",size:"24px"})]}),o]}):(0,n.jsxs)("div",{className:"".concat(t.header," ").concat(t.expired),children:[(0,n.jsxs)("h1",{children:[(0,n.jsx)(w.Z,{emoji:"\uD83C\uDF89",size:"24px"}),"\xa0All tasks in this project must use LidarLite now!\xa0",(0,n.jsx)(w.Z,{emoji:"\uD83C\uDF89",size:"24px"})]}),o]})},$=s(488869),X=s(659533),ee=s(398450),scalers_LidarStartTaskButton=e=>{var t;let{assignmentJson:s,cta:i,projectId:r,startTasks:o,isSensorFusion:l,isLidarCategorization:c}=e,d=null!==(t=null==s?void 0:s.subtaskId)&&void 0!==t?t:null==s?void 0:s.assignmentId,p=null==s?void 0:s.legacyLidarExpirationDate,u=canProjectUseLegacy({legacyLidarExpirationDate:p,projectId:r}),m=hasLidarLiteBinaryScene(s),h=function(e){var t,s;let i=!!(null==e?void 0:null===(t=e.params)||void 0===t?void 0:t.classicScene);if(i)return!0;let n=null==e?void 0:null===(s=e.params)||void 0===s?void 0:s.lidar_metadata;if(!n||0===n.length)return!1;let a=n.every(e=>!!(null==e?void 0:e.images));return!!a}(s),g=(0,_._z)("use-lidar-classic",{projectId:r},!1);if(g.isLoading)return(0,n.jsx)(ee.Z,{});let x=l||c||m&&!h,f=!g.data,b=g.data||u||!m,k=b&&!x,v=f&&m||x;return(0,n.jsxs)(a.Fragment,{children:[k&&(0,n.jsx)(j.Z,{size:"lg",primary:!v,arrows:!0,onClick:o,children:v?"Open in Legacy View":i}),(v||!k)&&(0,n.jsxs)(a.Fragment,{children:["\xa0",(0,n.jsx)(j.Z,{size:"lg",primary:!0,arrows:!0,onClick:()=>{window.location.href=(0,X.vI)({...Object.fromEntries(new URLSearchParams(window.location.search).entries()),sceneId:d})},children:null!=i?i:"Open in LidarLite"})]})]})};function hasLidarLiteBinaryScene(e){var t,s,i;return!!(null==e?void 0:null===(t=e.params)||void 0===t?void 0:t.binaryScene)||!!(null==e?void 0:null===(s=e.params)||void 0===s?void 0:s.binarySceneUrl)||!!(null==e?void 0:null===(i=e.params)||void 0===i?void 0:i.binaryScenes)}let FullscreenInstructions=class FullscreenInstructions extends a.Component{async checkFeatureFlags(){let e=await (0,D.V3)({feature:"use-lidar-classic",querystring:V().stringify(g().pickBy({userId:this.props.user.id,projectId:this.props.project._id}))});this.setState({isLidarLiteEnabled:!e})}componentDidMount(){this.checkFeatureFlags(),this.fetchStitchedVideo();let e=localStorage.getItem("showedInstructionsForRefresh");try{e&&this.props.project&&this.props.project._id&&JSON.parse(e).projectId===this.props.project._id&&!g().isNil(JSON.parse(e).expiration)&&new Date().getTime()<JSON.parse(e).expiration&&this.startTasks()}catch(e){}}async startTasks(){this.props.setLastInstructionHash&&this.props.setLastInstructionHash(this.props.instructionsHash),await this.props.onClose()}async fetchStitchedVideo(){if(this.props.assignments[0].params.stitched_video){let{stitched_video:e}=await (0,R.ZP)(null,"internal/tasks/".concat(this.props.assignments[0].id,"/stitched-video"),{method:"GET"});this.setState({stitchedVideo:e})}}renderLidarNickname(){if("lidarannotation"!==this.props.type)return null;let e=(0,Z.getLidarNickname)(this.props.customer,this.props.project&&this.props.project._id);return(0,n.jsxs)("div",{className:"jsx-5a8cd903fd30c46a lidar-nickname",children:[(0,n.jsx)(w.Z,{emoji:e.emoji,size:"2em"}),(0,n.jsxs)("span",{className:"jsx-5a8cd903fd30c46a lidar-nickname__text",children:[(0,n.jsx)("strong",{className:"jsx-5a8cd903fd30c46a",children:e.name})," task"]}),(0,n.jsx)(m(),{id:"5a8cd903fd30c46a",children:".lidar-nickname.jsx-5a8cd903fd30c46a{padding:32px 0;border-bottom:1px solid#eee;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.lidar-nickname__text.jsx-5a8cd903fd30c46a{margin-left:8px;font-size:16px}"})]})}renderStitchedVideo(){return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,maxWidth:"90vw",minWidth:"45vw"},children:[this.props.assignments[0].params.stitched_video&&this.state.stitchedVideo&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.x,{medium:!0,children:"Original Annotations Video"}),(0,n.jsx)("video",{src:this.state.stitchedVideo,controls:!0,loop:!0,width:"100%",height:"100%"})]}),this.props.assignments[0].params.task_sequence&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.x,{medium:!0,children:"Task Sequence"}),(0,n.jsxs)(O.iA,{children:[(0,n.jsx)(O.hr,{children:this.props.assignments[0].params.task_sequence[0].map((e,t)=>(0,n.jsx)(O.Th,{children:"Camera ".concat(t)},t))}),(0,n.jsx)(O.p3,{children:this.props.assignments[0].params.task_sequence.map((e,t)=>(0,n.jsx)(O.Tr,{children:e.map((e,s)=>(0,n.jsx)(O.Td,{children:(0,n.jsx)("a",{target:"_blank",href:"/tasks?subtaskId=".concat(e[5]),rel:"noopener noreferrer",children:"Frame ".concat(t," task link")})},s))},t))})]})]})]})}renderClassInfo(){let e="";this.props.assignments[0].params.task_sequence.forEach((t,s)=>{e+="\n**Frame ".concat(s,"**\n"),t.forEach((t,s)=>{let i=t[5];this.props.assignments[0].id===i?e+="\n\uD83D\uDC49 **":e+="- ",t.length>6?e+="Camera ".concat(s," has the following inconsistent labels: ")+t.slice(6).join(", "):e+="Camera ".concat(s," has no inconsistent labels."),e+=" [Task link](/tasks?subtaskId=".concat(i,")"),this.props.assignments[0].id===i&&(e+="** \uD83D\uDC48"),e+="\n"})});let t=z.ZP.render(e);return(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}render(){var e,t,s;let i=hasLidarLiteBinaryScene(this.props.assignmentJson),a="Please read the instructions below before starting.",r="Start Tasking";if(this.props.type===L.TaskType.ChatExperimental||this.props.type===L.TaskType.ChatV2)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z,{includeQueueAnnouncements:!0,...this.props}),(0,n.jsx)(Q.Z,{user:this.props.user,projectId:this.props.project._id,startButtonText:"Start tasking",startTasks:()=>{if(this.props.project&&this.props.project._id){var e,t,s;localStorage.setItem("showedInstructionsForRefresh",JSON.stringify({projectId:this.props.project._id,expiration:this.props.claims?null!==(s=null===(t=Object.values(this.props.claims)[0])||void 0===t?void 0:null===(e=t.maxClaim)||void 0===e?void 0:e.getTime())&&void 0!==s?s:36e5+Date.now():Date.now()+36e5}))}this.startTasks()},disableSidePanel:!0,isEmbedded:!0})]});this.props.isReviewMode&&(a="Verify that the following tasks are done according to the instructions below.",r="Start Reviewing"),this.props.isPracticeMode&&(a="You will be doing some practice questions. "+a,r="Begin practice questions");let o=null===(e=this.props.assignmentJson)||void 0===e?void 0:e.legacyLidarExpirationDate,l=N.lidarTypes.includes(this.props.type)||this.props.type===L.TaskType.SensorFusion,c=this.props.type===L.TaskType.Categorization&&i&&!!(null===(t=this.state)||void 0===t?void 0:t.isLidarLiteEnabled),{instructionV2Res:d,isEdgeCase:p,user:u}=this.props,h=i&&!!o;if(!g().isEmpty(d)){let e=l||c?(0,n.jsx)(scalers_LidarStartTaskButton,{projectId:this.props.project._id,assignmentJson:this.props.assignmentJson,startTasks:this.startTasks,cta:r,userId:this.props.user.id,isSensorFusion:this.props.type===L.TaskType.SensorFusion,isLidarCategorization:c}):null;return(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsx)(ui_LidarLiteCountdownBanner,{projectId:this.props.project._id,legacyLidarExpirationDate:o}),(0,n.jsx)(Q.Z,{startTasks:this.startTasks,startButtonText:r,isEmbedded:!0,user:u,isEdgeCase:p,instructionV2Res:d,customStartButton:e})]})}return(0,n.jsxs)("div",{className:"jsx-99bb8b8ace113d41 full-screen-instructions",children:[(0,n.jsx)(q.Z,{}),F.IS_FEDERAL&&(0,n.jsx)(G.Z,{}),h&&(0,n.jsx)(ui_LidarLiteCountdownBanner,{projectId:this.props.project._id,legacyLidarExpirationDate:o}),(0,n.jsx)($.Z,{includeQueueAnnouncements:!0,...this.props}),(0,n.jsxs)("div",{className:"jsx-99bb8b8ace113d41 "+"instructions__wrapper ".concat(this.props.instructionList&&!this.props.instructionList.refreshersOnly?"instructionlist":""),children:[!(null===(s=this.state)||void 0===s?void 0:s.newInstructionRes)&&(0,n.jsx)("div",{className:"jsx-99bb8b8ace113d41 instructions__title",children:(0,n.jsx)(U.x,{medium:!0,children:a})}),(this.props.assignments[0].params.stitched_video&&this.state.stitchedVideo||this.props.assignments[0].params.task_sequence)&&(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",overflow:"auto",padding:10},className:"jsx-99bb8b8ace113d41",children:[this.renderStitchedVideo(),this.renderClassInfo()]}),this.renderLidarNickname(),this.props.instructionObjectId&&(0,n.jsx)(M.Z,{user:this.props.user,instructionObjectId:this.props.instructionObjectId,isEdgeCase:this.props.isEdgeCase,startTasks:l||c?void 0:this.startTasks,startButtonText:r,isReviewMode:this.props.isReviewMode})||!g().isEmpty(this.props.instructionList)&&!this.props.instructionList.refreshersOnly&&(0,n.jsx)("div",{className:"jsx-99bb8b8ace113d41 instructions__body branded-scroll--neutral",children:(0,n.jsx)(W.Z,{instructionList:this.props.instructionList})})||this.props.instructions&&(0,n.jsx)("div",{dangerouslySetInnerHTML:this.state.instructionsHTML,className:"jsx-99bb8b8ace113d41 instructions__body branded-scroll--neutral"}),(0,n.jsx)("div",{className:"jsx-99bb8b8ace113d41 instructions__accept",children:l||c?(0,n.jsx)(scalers_LidarStartTaskButton,{projectId:this.props.project._id,assignmentJson:this.props.assignmentJson,startTasks:this.startTasks,cta:r,userId:this.props.user.id,isSensorFusion:this.props.type===L.TaskType.SensorFusion,isLidarCategorization:c}):!this.props.instructionObjectId&&(0,n.jsx)(j.Z,{size:"lg",primary:!0,arrows:!0,onClick:this.startTasks,children:r})})]}),F.IS_FEDERAL&&(0,n.jsx)(G.Z,{}),(0,n.jsx)(m(),{id:"e55fd2d0d63d8b91",children:".full-screen-instructions.jsx-99bb8b8ace113d41{width:100vw;height:100vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;background:var(--color-RemoGray01)}.instructions__wrapper.jsx-99bb8b8ace113d41{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;max-width:90vw;min-width:45vw;margin:60px 0;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background:white;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:4px 4px 8px rgba(0,0,0,.025);-moz-box-shadow:4px 4px 8px rgba(0,0,0,.025);box-shadow:4px 4px 8px rgba(0,0,0,.025);overflow:hidden;z-index:2}.instructions__wrapper.instructionlist.jsx-99bb8b8ace113d41{max-width:100vw}.instructions__title.jsx-99bb8b8ace113d41{z-index:2;padding:24px;background:rgb(154,161,171);color:white;text-align:center}.instructions__body.jsx-99bb8b8ace113d41{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;min-height:20vh;padding:24px;overflow:scroll;background:white;font-size:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.instructions__accept.jsx-99bb8b8ace113d41{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin:24px 0}"}),(0,n.jsx)(m(),{id:"98bea62fb1349a85",children:".full-screen-instructions .instructions__body iframe{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:0;outline:0;height:auto!important;width:925pt!important}"})]})}constructor(e){super(e),this.startTasks=this.startTasks.bind(this);let t=g().get(e.project,"_id")===B.ZP.ZooxSteamExhaustV2&&9===e.assignments[0].reviewLevel?'Check the scene for steam & exhaust - if found, submit by hitting "Has Steam" (where the usual approve/reject buttons are). Otherwise, submit with "No Steam".\n\n**Do not annotate any objects with cuboids during this review.**':e.instructions;this.state={instructionsHTML:t?{__html:z.ZP.render(t)}:void 0}}};var et=s(649147),es=s(138774),ei=s(291786),en=s(165168),ea=s(885752),er=s(290408);let EarnedBonusModal=class EarnedBonusModal extends a.Component{get title(){let e=(this.props.showBonus.amountHundredthsOfCents/1e4).toFixed(2);return"You just earned a $".concat(e," bonus!")}getNextBonus(){let e=new Date,t=g().filter(this.props.bonuses,t=>t.status===N.BonusStatus.Pending&&new Date(t.currentPeriodEnd)>e&&t.progress<t.target);return g().minBy(t,er.e)}renderHeader(){return(0,n.jsxs)("div",{className:"jsx-92f99bac857b2b87 header",children:[(0,n.jsxs)("h2",{className:"jsx-92f99bac857b2b87",children:[(0,n.jsx)("span",{className:"jsx-92f99bac857b2b87 emoji-wrapper",children:(0,n.jsx)(w.Z,{emoji:"\uD83E\uDD11",size:"28px"})}),(0,n.jsx)("span",{className:"jsx-92f99bac857b2b87",children:this.title})]}),(0,n.jsx)(m(),{id:"92f99bac857b2b87",children:".header.jsx-92f99bac857b2b87{height:56px;padding:0 16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;color:white;font-size:15px;background:green}.header.jsx-92f99bac857b2b87 h2.jsx-92f99bac857b2b87{color:white}.header.jsx-92f99bac857b2b87 .emoji-wrapper.jsx-92f99bac857b2b87{margin-right:15px;margin-left:35px}"})]})}renderDoneButton(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"jsx-3e0f1310447307af footer-wrapper",children:(0,n.jsx)(en.mz,{children:(0,n.jsx)(j.Z,{success:!0,onClick:this.props.onClick,children:"Keep Earning!"})})}),(0,n.jsx)(m(),{id:"3e0f1310447307af",children:".footer-wrapper.jsx-3e0f1310447307af{margin-top:auto;width:inherit}"})]})}renderBody(){let e;let t=this.getNextBonus();t&&(e=(0,n.jsxs)("div",{className:"jsx-95e2fe954238cc4 bonus-wrapper",children:[(0,n.jsx)("h3",{className:"jsx-95e2fe954238cc4",children:"You have another bonus coming up:"}),(0,n.jsx)(ea.Z,{bonus:t}),(0,n.jsx)(m(),{id:"95e2fe954238cc4",children:".bonus-wrapper.jsx-95e2fe954238cc4{margin-top:20px}"})]}));let s=this.props.showBonus.name,i=this.props.showBonus.target,a=N.nounsByBonusRule[this.props.showBonus.bonusRule]||"task";return(0,n.jsxs)("div",{className:"jsx-84f152fb69754b7a earned-message",children:[(0,n.jsxs)("div",{className:"jsx-84f152fb69754b7a",children:[(0,n.jsxs)("h3",{className:"jsx-84f152fb69754b7a",children:["Keep up the good work! You earned ",(0,n.jsx)("span",{className:"jsx-84f152fb69754b7a bonus-name",children:s})," ","because of your great work on the last ",i," ",a,1!==i?"s":"","."]}),e]}),this.renderDoneButton(),(0,n.jsx)(m(),{id:"84f152fb69754b7a",children:".earned-message.jsx-84f152fb69754b7a{width:100%;padding-top:50px;padding-left:64px;padding-right:64px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;text-align:center;color:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}h3.jsx-84f152fb69754b7a{font-weight:300}.bonus-name.jsx-84f152fb69754b7a{font-weight:900}"})]})}render(){return(0,n.jsxs)(en.u_,{isOpen:!0,contentOverflow:"hidden",maxWidth:"900px",margin:"50px auto auto auto",children:[(0,n.jsxs)("div",{className:"jsx-b4490f802260e1b2 container",children:[(0,n.jsx)("div",{className:"jsx-b4490f802260e1b2 earned-bonus-header",children:this.renderHeader()}),(0,n.jsx)("div",{className:"jsx-b4490f802260e1b2 earned-bonus-body",children:this.renderBody()})]}),(0,n.jsx)(m(),{id:"b4490f802260e1b2",children:".container.jsx-b4490f802260e1b2{height:-webkit-calc(100vh - 300px);height:-moz-calc(100vh - 300px);height:calc(100vh - 300px);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.earned-bonus-header.jsx-b4490f802260e1b2{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;overflow:hidden}.earned-bonus-body.jsx-b4490f802260e1b2{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden}"})]})}};var eo=s(367757),el=s(925686),ec=s(161320),ed=s.n(ec),ep=s(533707),eu=s(566664),em=s(50682),eh=s.n(em),eg=s(362838),ex=s(788230),ef=s(501287),eb=s(412636),ek=s(971599),ev=s(60042),ey=s.n(ev),ej=s(767135),ew=s(132821),eT=s(462354),eC=s(182423),eS=s(347813),eR=s(573685),eA=s(208528),eI=s(107873),e_=s(293030),eN=s(720408),eL=s(773866),eE=s(222868);let DocumentTranscriptionSubmitButtons=e=>{var t,s,i,r,o,l,c,d;let p=(0,eL.O)(),{accept:u,assignment:m,canEdit:h,canRejectWithChanges:x,canReturnToQueue:f,disableAccept:b,discardChanges:k,disableCancelButton:v,fixable:y,getTimeSpent:j,isAssignmentLoading:w,isCustomerQAMode:T,isReturnToQueueDisabled:C=!1,isScaleStudio:S=!1,isSubmitDisabled:R=!1,isSubmitting:A,madeChanges:I,makeChanges:_,makeChangesColor:E,makingChanges:P,nextTask:F,onRejectFixableWithNoFix:D,onUserSkip:z,reject:Z,rejectWithChanges:B,returnToQueue:M,returnToQueueDisabledTooltip:O,submitDisabledTooltip:U,setTaskFeedback:H}=e,V=eP(),[q,Q]=(0,a.useState)(!1),[W,G]=(0,eA.Z)(!1),J=!!m.isInstructionTask,Y=!(0,eE.Tv)(m.project)&&m.type!==L.TaskType.Categorization,handleReturnToQueue=()=>{k(),G()},handleRejectFixableButtonClick=()=>{Q(!0)},handleRejectFixableConfirm=async e=>{null==D||D(e),Q(!1)},K=null==p?void 0:null===(s=p.labelerStateHook)||void 0===s?void 0:null===(t=s.assignment)||void 0===t?void 0:t.config,$=null!==(c=null==K?void 0:K.spotterReviewLevel)&&void 0!==c?c:N.defaultSpotterReviewLevel,X=!!(m.reviewLevel===$&&(null==K?void 0:K.isSpotterEnabled)),ee=X&&!(null!==(d=null==K?void 0:K.spotterFixingEnabled)&&void 0!==d?d:N.defaultSpotterIsFixingEnabled),et=X&&!!(null==K?void 0:K.inlineCommentsEnabled)||(null==m?void 0:null===(i=m.params)||void 0===i?void 0:i.isRedactionVerification),es=et&&g().isEqual(null==p?void 0:null===(r=p.labelerStateHook)||void 0===r?void 0:r.annotationsHook.inlineCommentsHook.allComments,null==p?void 0:null===(o=p.labelerStateHook)||void 0===o?void 0:o.annotationsHook.inlineCommentsHook.initialComments)&&!(null==m?void 0:null===(l=m.params)||void 0===l?void 0:l.isRedactionVerification),hasFeedbackTemplateForType=e=>void 0!==m.feedbackTemplate&&(0,eN.validateIsTaskFeedbackTemplate)(m.feedbackTemplate)&&e in m.feedbackTemplate,filterEntries=e=>e.filter(e=>!e.reviewLevels||e.reviewLevels.includes(m.reviewLevel)),onClickWrapper=(e,t,s,i)=>(e,s)=>{let n=[];for(let t of m.feedbackTemplate[i]){let i=t.title,a=t.inputType;if(a===eN.TaskFeedbackInput.Text){let t={title:i,response:e[i]};n.push(t)}else{let e={title:i,response:s[i]};n.push(e)}}void 0!==H?H(n,t):t()},renderSkipButton=()=>{var e,t,s;return h&&!X&&z?S?(0,n.jsx)(eC.Z,{id:m._id,type:m.type,project:m.project,canSkip:!!(null==p?void 0:null===(t=p.labelerStateHook)||void 0===t?void 0:null===(e=t.annotationsHook.inlineCommentsHook.allComments)||void 0===e?void 0:e.length),response:{inlineComments:null==p?void 0:null===(s=p.labelerStateHook)||void 0===s?void 0:s.annotationsHook.inlineCommentsHook.allComments},isReview:!0,handleSkip:z}):(0,n.jsx)(eT.Z,{taskId:m._id,confirmButtonText:"Skip task",buttonText:"Skip",style:{...eZ,opacity:A?.5:1},handleSkip:z,bid:null==m?void 0:m.bid,isInstructionTask:J,disabled:A},"skipButton"):null},renderReturnToQueue=e=>{let t;let s=X?"Reject":"Send Back To Queue";return(es?t="You must add comments (right click) before rejecting":e?t=O||"Send back to queue disabled due to misuse or task has been sent back too many times. Please only send back if most of the task is not done.":I&&(t="This will discard your current edits"),T)?(0,n.jsx)(ej.S5,{type:"reject",onClick:handleReturnToQueue,children:s},"redo-link"+!!t):(0,n.jsxs)("div",{"data-tip":t,"data-for":"return-to-queue",children:[(0,n.jsx)(eI.zx,{style:{...eB,opacity:A?.5:1},disabled:e||es||A,onClick:handleReturnToQueue,children:s}),(0,n.jsx)(eh(),{id:"return-to-queue"})]})};return(0,n.jsx)("div",{className:V.documentTranscriptionSubmitButtons,children:w?(0,n.jsxs)("div",{className:V.isProcessing,children:[(0,n.jsx)(e_.Z,{}),(0,n.jsx)("span",{style:{marginLeft:"12px"},children:"Loading task"})]}):q?(0,n.jsx)(Reject,{enabled:!A,onConfirm:handleRejectFixableConfirm,onCancel:()=>{Q(!1)},isScaleStudio:S}):W?(()=>{var e,t;let rejectButtonHelper=(e,t,s)=>{if(hasFeedbackTemplateForType(eN.FeedbackConditions.SBTQ)){let i=filterEntries(m.feedbackTemplate.sbtq);if(i.length)return(0,n.jsx)(eS.Z,{handleSubmitFeedback:onClickWrapper(e,t,s,eN.FeedbackConditions.SBTQ),style:eB,feedbackEntries:i,buttonText:s,confirmButtonText:s,disabled:R||es||e})}return(0,n.jsx)(eI.zx,{disabled:R||es||e||A,onClick:t,style:{...eB,opacity:A?.5:1},htmlType:"button",children:s})},s=(0,n.jsx)(ew.HA,{nextTaskHandler:F,sendHandler:et&&B?B:M,taskProjectId:null===(e=m.project)||void 0===e?void 0:e._id,getTimeSpent:j,taskType:m.type,taskUserId:null===(t=m.project)||void 0===t?void 0:t.taskCustomer,type:ew.a5.SendBackToQueue,disableModal:T||!N.lidarTypesWithLinking.includes(m.type),autoloadNextAssignment:!N.lidarTypesWithLinking.includes(m.type),children:e=>{let{disabled:t,onClick:s,text:i}=e;return(0,n.jsx)("div",{"data-for":"reject-disabled",children:rejectButtonHelper(t,s,X?"Reject":i)})}}),i=(0,n.jsx)(eI.zx,{htmlType:"button",disabled:A,onClick:G,style:{...eZ,opacity:A?.5:1},children:"Cancel"});return(0,n.jsxs)(a.Fragment,{children:[i,s]})})():P?(()=>{var t,s,i,a;let r;let o=null;!f||T||x||(o=renderReturnToQueue(C));let l=!1;I?e.isSubmitDisabled&&(l=!0,r=U):(l=!0,r="Please make at least one change and keep all fields valid");let submitButtonHelper=(e,t,s)=>{if(hasFeedbackTemplateForType(eN.FeedbackConditions.MakeChanges)){let i=filterEntries(m.feedbackTemplate.makeChanges);if(i.length)return(0,n.jsx)(eS.Z,{handleSubmitFeedback:onClickWrapper(e,t,s,eN.FeedbackConditions.MakeChanges),style:eD,feedbackEntries:i,buttonText:s,confirmButtonText:s,disabled:l||e||!h})}return(0,n.jsx)(eI.zx,{disabled:l||e||!h||A,onClick:t,style:{...eD,opacity:l||A?.5:1},htmlType:"button",children:s})},c=(0,n.jsx)(ew.HA,{nextTaskHandler:F,sendHandler:Z,taskProjectId:null===(t=m.project)||void 0===t?void 0:t._id,getTimeSpent:j,taskType:m.type,taskUserId:null===(s=m.project)||void 0===s?void 0:s.taskCustomer,type:ew.a5.ApproveWithChanges,disableModal:T||!N.lidarTypesWithLinking.includes(m.type),autoloadNextAssignment:!N.lidarTypesWithLinking.includes(m.type),requireConfirm:Y,children:e=>{let{disabled:t,onClick:s,text:i}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{"data-tip":r,"data-for":"submit-disabled",children:submitButtonHelper(t,s,i)}),(0,n.jsx)(eh(),{id:"submit-disabled"})]})}},"fixingSubmitButton"),d=!v&&(0,n.jsx)(eI.zx,{htmlType:"button",disabled:A,onClick:k,style:{...eZ,opacity:A?.5:1},children:"Cancel"}),p=r||(es?"You must add comments (right click) before rejecting":void 0),u=!!x&&B&&(0,n.jsx)(ew.HA,{nextTaskHandler:F,sendHandler:B,taskProjectId:null===(i=m.project)||void 0===i?void 0:i._id,getTimeSpent:j,taskType:m.type,taskUserId:null===(a=m.project)||void 0===a?void 0:a.taskCustomer,type:ew.a5.SendBackToQueueWithChanges,disableModal:T||!N.lidarTypesWithLinking.includes(m.type),autoloadNextAssignment:!N.lidarTypesWithLinking.includes(m.type),requireConfirm:Y,children:e=>{let{disabled:t,onClick:s,text:i}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{"data-tip":p,"data-for":"submit-disabled",children:(0,n.jsx)(eI.zx,{disabled:l||t||!h||es,onClick:s,style:eB,htmlType:"button",children:X?"Reject with changes":i})}),(0,n.jsx)(eh(),{id:"submit-disabled"})]})}},"rejectWithChangesButton");return(0,n.jsxs)(n.Fragment,{children:[o,d,u,c]})})():ee||!y?(()=>{var e,t,s,i;let a=renderSkipButton(),r=es?"You must add comments (right click) before rejecting":"",o=(0,n.jsx)(ew.HA,{nextTaskHandler:F,sendHandler:et&&B?B:Z,taskProjectId:null===(e=m.project)||void 0===e?void 0:e._id,getTimeSpent:j,taskType:m.type,taskUserId:null===(t=m.project)||void 0===t?void 0:t.taskCustomer,type:ew.a5.Reject,disableModal:T||!N.lidarTypesWithLinking.includes(m.type),autoloadNextAssignment:!N.lidarTypesWithLinking.includes(m.type),children:e=>{let{disabled:t,onClick:s,text:i}=e;return(0,n.jsx)(ej.S5,{type:"reject",onClick:s,isDisabled:t||!h||es,tooltip:r,children:i})}},"reject"),l=(0,n.jsx)(ew.HA,{nextTaskHandler:F,sendHandler:u,taskProjectId:null===(s=m.project)||void 0===s?void 0:s._id,getTimeSpent:j,taskType:m.type,taskUserId:null===(i=m.project)||void 0===i?void 0:i.taskCustomer,type:ew.a5.Approve,disableModal:T||!N.lidarTypesWithLinking.includes(m.type),autoloadNextAssignment:!N.lidarTypesWithLinking.includes(m.type),children:e=>{let{disabled:t,onClick:s,text:i}=e;return(0,n.jsx)(ej.S5,{type:"accept",onClick:s,isDisabled:t||!h,children:i})}},"accept");return[a,o,l]})():(()=>{var t,s;let{isCustomerQAMode:i,onRejectFixableWithNoFix:a}=e,{isSpotterSubtask:r,isSpotterFixingEnabled:o}=m,l=!(r&&!o)&&(0,n.jsx)(eI.zx,{disabled:!h||A,onClick:_,style:{...ez,background:E||ez.background,opacity:!h||A?.5:1},htmlType:"button",children:"Make Changes"}),acceptButtonHelper=(e,t,s)=>{if(hasFeedbackTemplateForType(eN.FeedbackConditions.Accept)){let i=filterEntries(m.feedbackTemplate.accept);if(i.length)return(0,n.jsx)(eS.Z,{handleSubmitFeedback:onClickWrapper(e,t,s,eN.FeedbackConditions.Accept),style:R||e?eM:eD,feedbackEntries:i,buttonText:s,confirmButtonText:s,disabled:R||e||!h})}return(0,n.jsx)(eI.zx,{disabled:R||e||!h||A,onClick:t,style:R||e||!h||A?eM:eD,htmlType:"button",children:s})},c=!b&&(0,n.jsx)(ew.HA,{nextTaskHandler:F,sendHandler:u,taskProjectId:null===(t=m.project)||void 0===t?void 0:t._id,getTimeSpent:j,taskType:m.type,taskUserId:null===(s=m.project)||void 0===s?void 0:s.taskCustomer,type:ew.a5.Approve,disableModal:i||!N.lidarTypesWithLinking.includes(m.type),autoloadNextAssignment:!N.lidarTypesWithLinking.includes(m.type),requireConfirm:Y,children:e=>{let{disabled:t,onClick:s,text:i}=e;return(0,n.jsxs)("div",{"data-tip":!0,"data-for":"submit-disabled",children:[acceptButtonHelper(t,s,i),!!U&&(0,n.jsx)(eh(),{id:"submit-disabled",type:"dark",children:(0,n.jsx)("div",{style:{width:"200px",fontWeight:"bold"},children:U})})]})}},"acceptTask"),d=f&&renderReturnToQueue(C||!h),p=renderSkipButton(),g=i&&a&&(0,n.jsx)(ej.S5,{type:"reject",onClick:handleRejectFixableButtonClick,children:"Reject"},"reject");return(0,n.jsxs)(n.Fragment,{children:[p,d,g,l,c]})})()})};DocumentTranscriptionSubmitButtons.defaultProps={canEdit:!0};let Reject=e=>{let{enabled:t,initialComments:s,onCancel:i,onConfirm:r,isScaleStudio:o}=e,[l,c]=(0,a.useState)(s||"");return(0,n.jsxs)(a.Fragment,{children:[!o&&(0,n.jsx)(ej.AM,{commentsInput:s,handleCommentsChange:c}),(0,n.jsxs)("div",{"data-for":"reject-fixable",children:[(0,n.jsx)(eI.zx,{disabled:!t||!l,onClick:()=>{r(l||"")},style:ez,htmlType:"button",children:"Reject"}),(0,n.jsx)(eh(),{id:"reject-fixable"})]}),(0,n.jsx)(eI.zx,{disabled:!t,onClick:i,htmlType:"button",children:"Cancel"})]})},eP=(0,eR.ZL)({redoLink:{marginRight:"16px",color:"rgba(0, 0, 0, 0.4)",fontSize:"13px",fontWeight:"bold",whiteSpace:"nowrap",transition:"0.1s all",cursor:"pointer","&:hover":{color:"rgba(0, 0, 0, 0.8)"}},isProcessing:{fontWeight:900,fontSize:"14px",letterSpacing:"1px",textTransform:"uppercase",color:"rgba(0, 0, 0, 0.5)",display:"flex",whiteSpace:"nowrap"},documentTranscriptionSubmitButtons:{alignItems:"center",display:"flex",justifyContent:"flex-end",position:"relative"}}),eF={border:0,borderRadius:"8px",color:"white",display:"inlineBlock",fontSize:"12px",height:"36px",marginLeft:"12px",padding:"10px",whiteSpace:"nowrap"},eD={...eF,background:"#7ED321"},ez={...eF,background:"#F8BB06"},eZ={...eF,background:"white",border:"1px solid rgba(0, 0, 0, 0.15)",color:"black"},eB={...eF,background:"#EB5424"},eM={...eF,background:"#7ED321",opacity:"0.5"};var eO=s(614720),eU=s(588634),eH=s(239447),eV=s(35564),documenttranscription_DocumentTranscriptionReviewFooter=e=>{var t;let{assignment:s,isCustomerQAMode:i,isSolid:a=!1,isSubmitting:r,toggleShowingInstructions:o,toggleShowingShortcuts:l,isInstructionTask:c,setShowModal:d,isEdgeCaseTask:p,setShowEdgeCaseModal:u,darkMode:m}=e,h=eq(),g=null===(t=e.canEdit)||void 0===t||t,{width:x}=(0,eH.Z)();return(0,n.jsxs)("div",{className:ey()(h.reviewAssignmentFooter,{"completed--flash":r,solid:a,[h.darkMode]:!!m}),children:[i?(0,n.jsx)("div",{children:(0,n.jsx)("strong",{children:"Was the task completed correctly?"})}):(0,n.jsxs)("div",{children:[o&&(0,n.jsxs)(eI.zx,{onClick:o,style:eG,children:["Instructions",x>1400&&(0,n.jsxs)("span",{children:["\xa0\xa0\xa0",(0,n.jsx)(eO.Z,{children:"i"})]})]}),l&&(0,n.jsxs)(eI.zx,{onClick:l,style:eG,children:["Shortcuts",x>1400&&(0,n.jsxs)("span",{children:["\xa0\xa0\xa0",(0,n.jsx)(eO.Z,{children:"/"})]})]})]}),c&&(0,n.jsx)(eI.zx,{style:eW,onClick:()=>d&&d(!0),children:"Instruction Feedback"}),p&&(0,n.jsx)(eI.zx,{style:eW,onClick:()=>u&&u(!0),children:"Edge Case Feedback"}),(0,n.jsx)(eV.D,{bid:null==s?void 0:s.bid}),g&&(0,n.jsx)(DocumentTranscriptionSubmitButtons,{...e})]})};let eq=(0,eR.ZL)({reviewAssignmentFooter:{height:"70px",padding:"0px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#fff",borderTop:"1px solid rgba(0, 0, 0, 0.05)","&.solid":{position:"relative"}},darkMode:{backgroundColor:eU.Z.colors.gray75,color:eU.Z.colors.gray05}}),eQ={border:0,borderRadius:"8px",color:"white",display:"inlineBlock",fontSize:"12px",height:"36px",marginRight:"12px",padding:"10px",whiteSpace:"nowrap"},eW={...eQ,background:"white",border:"1px solid rgba(0, 0, 0, 0.15)",color:"black"},eG={...eQ,background:"black"};var eJ=s(261415),eY=s(548763),eK=s(257144),e$=s(757895),eX=s(626750);let e0=["website","text","pdf"],e1=[L.TaskType.MultiModalTranscription];let ReviewAssignment=class ReviewAssignment extends a.Component{static get minimumCooldownForAttachmentsWithoutLoadEvent(){return ed()().add("2","seconds")}componentDidMount(){this.forceUpdate(),this.updateFullstory()}async componentDidUpdate(e,t){if(this.updateFullstory(),e.assignment._id!==this.props.assignment._id){let e=!!this.props.assignment.params.attachment_type&&!g().includes(e0,this.props.assignment.params.attachment_type);this.assignmentStartTime=new Date,this.setState({isSubmitting:!1,submittedResponse:void 0,isAssignmentLoading:e,disabledCooldown:this.defaultCooldownForProps(this.props),makingChanges:!!this.props.fixable&&this.props.makingChanges,madeChanges:this.props.madeChanges||!1,hideOriginalAnnotation:!1})}if(g().isNil(this.props.isSubmitting)||this.props.isSubmitting===e.isSubmitting||this.setState({isSubmitting:this.props.isSubmitting}),this.state.corruptionsAuditResponse&&!t.corruptionsAuditResponse){let{missedCorruptionsByCuboidId:e,ghostCuboidPaths:t}=this.state.corruptionsAuditResponse;e&&(this.taskComponent.cuboidStore.setMissedCorruptions(e),this.taskComponent.cuboidStore.setGhostCuboidPaths(t))}}get feedbackComments(){return(0,ef.M4)(this.state.auditFeedback,this.state.commentsInput)}get errorCounts(){return this.state.errorCounts}defaultCooldownForProps(e){var t;return e.isUserAdmin||e.isScaleStudio?null:(null===(t=e.assignment)||void 0===t?void 0:t.params)&&g().includes(e0,e.assignment.params.attachment_type)?ReviewAssignment.minimumCooldownForAttachmentsWithoutLoadEvent:null}assignmentDidLoad(){this.assignmentLoadTime=new Date,this.setState({isAssignmentLoading:!1}),this.props.query.auditCorruptions&&(this.props.assignment.type===L.TaskType.LidarAnnotation||this.props.assignment.type===L.TaskType.LidarSegmentation)&&this.fetchCorruptionsAudit()}getReviewSubmitDisabledStatus(){let e;return this.showAuditResultDropdown&&!this.state.auditResult?{canSubmit:!1,submitTooltip:"Please select an audit result from the dropdown below."}:this.taskComponent&&(!this.state.isAssignmentLoading||this.props.canReturnToQueue)?this.state.disabledCooldown&&this.state.disabledCooldown.toDate()>new Date?{canSubmit:!1,submitTooltip:"Take the time to fully review the task response."}:this.taskComponent.getSubmitDisabledStatus&&!(e=this.taskComponent.getSubmitDisabledStatus()).canSubmit||this.taskComponent.getReviewSubmitDisabledStatus&&!(e=this.taskComponent.getReviewSubmitDisabledStatus()).canSubmit||this.props.getReviewSubmitDisabledStatus&&!(e=this.props.getReviewSubmitDisabledStatus()).canSubmit?e:this.props.fixable&&g().some(this.state.lintErrors,e=>e.data.blocksSubmission)?{canSubmit:!1,submitTooltip:"Please fix all red errors in the Issues tab before submitting."}:this.props.assignment.type!==L.TaskType.DocumentTranscription&&this.props.fixable&&!g().every(this.state.lintErrors,e=>e.dismissed)?{canSubmit:!1,submitTooltip:"Please fix or dismiss all quality checks before submitting."}:g().get(this.props,"isInstructionTask",!1)&&!this.state.instructionFeedbackRead?{canSubmit:!1,submitTooltip:"Please open the instruction feedback modal."}:g().get(this.props,"isEdgeCaseTask",!1)&&!this.state.edgeCaseFeedbackRead?{canSubmit:!1,submitTooltip:"Please submit the edge case feedback modal."}:"604bfabb6427ed00177c67c5"!==g().get(this.props,"assignment.project._id","")||0!==g().get(this.props,"assignment.fixResponse.annotations.unjudgeable.response[0]",[]).length||this.state.makingChanges?{canSubmit:!0,submitTooltip:null}:{canSubmit:!1,submitTooltip:'Please pick the best provided response or mark the attempt as unjudgeable via the "Make Changes" button'}:{canSubmit:!1,submitTooltip:"Wait for the assignment to finish loading."}}get showAuditResultDropdown(){var e;let{assignment:t,user:s}=this.props;if((0,N.isContentAndLanguage)(t.type)||[L.TaskType.DocumentTranscription,L.TaskType.Chat].includes(t.type))return!1;let i=(0,eK.userIsQAWorker)(s),n=s.isCorporateUser,a=null==t?void 0:null===(e=t.params)||void 0===e?void 0:e.auditResultOptions;return i||n||!g().isEmpty(a)}handleAuditResultChange(e){this.setState({auditResult:e})}async fetchCorruptionsAudit(){if(!this.props.isUserAdmin)return;let{corruptionsAuditResponse:e}=await (0,R.ZP)(null,"internal/lidar/".concat(this.props.assignment._id,"/audit_corruptions"));this.setState({corruptionsAuditResponse:e})}toggleCorruptionsAudit(){this.setState(e=>({showingCorruptionsAudit:!e.showingCorruptionsAudit}))}updateFullstory(){(0,S.IO)(()=>{this.fullstorySession=(0,S.Hr)(!0,this.props.user._id,this.props.assignment._id),(0,S.xx)({attemptId:this.props.assignment.attemptId,subtaskId:this.props.assignment._id})},!0)}setStateAsync(e){return new Promise(t=>this.setState(e,t))}buildDisabledCooldown(){var e;let t=null===(e=this.state.disabledCooldown)||void 0===e?void 0:e.toDate();return(!t||new Date>t)&&(t=new Date),ed()(t).add("1","second").toDate()}async onChange(e){var t,s;if(void 0===e){this.forceUpdate();return}if(this.state.makingChanges&&(this.setState({madeChanges:this.props.madeChanges||e}),null===(t=(s=this.props).onMadeChanges)||void 0===t||t.call(s,e),!g().isEmpty(this.state.lintErrors))){let e=this.taskComponent&&await this.taskComponent.getReviewChanges();this.checkLintErrors({taskResponse:e,fromMadeChanges:!0})}}discardChanges(){var e;this.setState({madeChanges:!1}),null===(e=this.taskComponent)||void 0===e||e.discardChanges()}async checkLintErrors(e){let{taskResponse:t,reviewedAnnotations:s=[],featureFlaggedLinters:i={},fromMadeChanges:n=!1}=e,a=this.props.assignment.type;if(n&&!(0,eb.D0)(a))return g().every(this.state.lintErrors,e=>e.dismissed);let r=(0,eb.SW)(a,{task:this.props.assignment,subtask:this.props.assignment,response:t,reviewedAnnotations:s,featureFlaggedLinters:i,fromMadeChanges:n});if(!n){if(this.taskComponent.delegatedLinter){let e=await this.taskComponent.delegatedLinter();r.push(...e)}else{let e=await (0,e$.Ov)({subtask:this.props.assignment,response:t});r.push(...e)}}if(this.taskComponent.quickLinter){let e=this.taskComponent.quickLinter();r.push(...e)}for(let e in r){let t=g().find(this.state.lintErrors,t=>t.id===r[e].id);t&&(r[e].dismissed=t.dismissed,r[e].createdAt=t.createdAt)}if(!n){let e=g().some(r,e=>e.dismissed&&+new Date-e.createdAt.getTime()>ek.LintDiagnostic.MAX_ELAPSED_TIME_MS);e&&r.forEach(e=>{e.dismissed=!1,e.createdAt=new Date})}return await this.setStateAsync({lintErrors:r}),g().every(this.state.lintErrors,e=>e.dismissed)}handleToggleErrorDismissed(e){this.setState(t=>{let s=g().cloneDeep(t.lintErrors),i=g().findIndex(s,t=>t.id===e);return s[i].dismissed=!s[i].dismissed,{lintErrors:s}})}handleSubmitError(e){k().error((0,ex.V)(e,this.props.assignment._id),{timeout:"none"}),this.setState({isSubmitting:!1,submittedResponse:void 0})}computeMadeChanges(){var e;return(null===(e=this.taskComponent)||void 0===e?void 0:e.madeChanges)?"boolean"==typeof this.taskComponent.madeChanges?this.taskComponent.madeChanges:this.taskComponent.madeChanges():this.state.madeChanges}submit(e){return async(t,s,i,n)=>{var a,r,o,l,c,d,p,u,m,h;let x,f;let b=this.taskComponent.getReviewSubmitConfirmationMessage(!0,!1);if(b&&!window.confirm(b))return Promise.reject();let v=this.getReviewSubmitDisabledStatus();if(!v.canSubmit)return k().info(v.submitTooltip),Promise.reject();if(this.taskComponent.runReviewSubmitChecks&&!await this.taskComponent.runReviewSubmitChecks())return Promise.reject();let y=this.computeMadeChanges(),j=this.props.fixable&&(!e&&y||e1.includes(this.props.assignment.type));if(j)try{x=await this.taskComponent.getReviewChanges(!0)}catch(t){let e=t.expose?t.message:"Error processing review corrections, please try again.";return k().error(e,{timeout:3e3}),Promise.reject()}let w=(0,eY.R)(this.props.assignment),T=e||w?null!==(m=this.props.assignment.fixResponse)&&void 0!==m?m:this.props.fixResponse:x,C=null===(a=(r=this.taskComponent).getReviewedAnnotations)||void 0===a?void 0:a.call(r),S=null===(o=(l=this.taskComponent).getFeatureFlaggedLinters)||void 0===o?void 0:o.call(l);if(this.props.fixable){let e=await this.checkLintErrors({taskResponse:T,reviewedAnnotations:C,featureFlaggedLinters:S});if(!e)return Promise.reject()}e&&g().includes([L.TaskType.LidarAnnotation,L.TaskType.LidarSegmentation],this.props.assignment.type)&&(f=await this.taskComponent.getReviewChanges());let R=this.taskComponent,A=R.onReviewSubmitSuccess?R.onReviewSubmitSuccess.bind(R):()=>{};this.taskComponent.clearFlushUpdatesTimeout&&this.taskComponent.clearFlushUpdatesTimeout(),this.taskComponent.filterRemoteFields&&x&&await this.taskComponent.filterRemoteFields(x),s&&(e=!1,x={...x,isReportedForSensitiveContent:!0,sensitiveContentReportReason:i,sensitiveContentReportExplanation:n}),null===(c=(d=this.taskComponent).onSubmitCallback)||void 0===c||c.call(d);let I=null===(p=(u=this.taskComponent).getAttemptBehaviourLog)||void 0===p?void 0:p.call(u);this.taskComponent.props.setTimeSpent(),await this.setStateAsync({isSubmitting:!0,submittedResponse:e}),k().closeAll();try{await this.props.submit({isCorrect:e,reviewChanges:x,extra:f,populateHypothesis:!1,timeSpentSecs:this.taskComponent.taskTimer.elapsedTime()/1e3,oldTimeSpentSecs:this.taskComponent.taskOldTimer.elapsedTime()/1e3,timeSpentLoadingSecs:(this.assignmentLoadTime.getTime()-this.assignmentStartTime.getTime())/1e3,comments:this.feedbackComments,errorCounts:{critical:this.state.errorCounts.criticalCount,non_critical:this.state.errorCounts.nonCriticalCount,missing:this.state.errorCounts.missingCount},fullstorySession:this.fullstorySession,auditResult:this.state.auditResult,categorizationResult:this.categorizationResult,taskFeedback:this.state.taskFeedback,documentRotation:this.taskComponent.documentRotation,documentRotationPerPage:this.taskComponent.documentRotationPerPage,attemptBehaviourLog:I},A),null===(h=this.props.actions)||void 0===h||h.fetchBonuses()}catch(e){throw await this.handleSubmitError(e),e}}}toggleShowingInstructions(){this.taskComponent&&this.taskComponent.toggleShowingInstructions()}toggleShowingShortcuts(){this.taskComponent&&this.taskComponent.toggleShowingShortcuts()}toggleShowingSimilarExamples(){this.taskComponent&&this.taskComponent.toggleShowingSimilarExamples()}handleErrorCountsChange(e){this.setState({errorCounts:e})}onChangeHideOriginal(e){this.setState({hideOriginalAnnotation:e})}async onUpdateCorruptionFeedback(e,t){if(this.props.assignment.type===L.TaskType.LidarAnnotation)try{this.updateCorruption(Object.assign(e,{isUpdating:!0}));let s=await (0,R.ZP)(null,"internal/lidar/".concat(this.props.assignment._id,"/audit_corruptions/").concat(e._id),{method:"PUT",body:{qaAuditStatus:t}});this.updateCorruption(s.corruption)}catch(t){this.updateCorruption(Object.assign(e,{isUpdating:!1}))}}updateCorruption(e){let{cuboidId:t}=e,s=this.state.corruptionsAuditResponse.missedCorruptionsByCuboidId[t],i=g().findIndex(s,{_id:e._id});s.splice(i,1,e),this.setState(e=>g().merge(e,{corruptionsAuditResponse:{missedCorruptionsByCuboidId:{[t]:s}}}))}renderHeader(){var e,t,s,i,a;return(0,n.jsx)(ep.Z,{assignment:this.props.assignment,onChangeHideOriginal:this.onChangeHideOriginal,hideOriginalAnnotation:this.state.hideOriginalAnnotation,hasWarning:null===(e=this.props.claim)||void 0===e?void 0:e.hasWarning,recentAccuracy:this.props.assignment.recentAccuracy,passRate:this.props.assignment.passRate,passNum:this.props.assignment.passNum,triggerAutosave:this.triggerAutosave,autosaveEnabled:null===(s=this.taskComponent)||void 0===s?void 0:null===(t=s.props)||void 0===t?void 0:t.autosaveEnabled,lastAutosaveTime:null===(a=this.taskComponent)||void 0===a?void 0:null===(i=a.getLastAutosaveTime)||void 0===i?void 0:i.call(a),claim:this.props.claim,isAutosaving:this.state.isAutosaving,bonus:this.props.bonus,onUserFlag:this.props.onUserFlag,isScaleStudio:this.props.isScaleStudio,studioTaskId:g().get(this.props,"studioTaskId",""),taskMetadata:g().get(this.props,"taskMetadata",""),location:this.props.location,projectConfig:this.props.projectConfig})}renderTask(){var e;let t=this.props.taskPage;return(0,n.jsx)("div",{className:"tasks__container scaler",children:a.cloneElement(t,{ref:e=>this.taskComponent=e,readOnly:!0,isReviewMode:!0,hidePreviousResponse:this.props.hidePreviousResponse,editable:this.state.makingChanges&&this.props.canEdit,disableShortcuts:!this.state.makingChanges,attachmentDidLoad:this.assignmentDidLoad,makeChanges:this.makeChanges,isSubmittingTask:this.state.isSubmitting,onChange:this.onChange,hideOriginalAnnotation:this.state.hideOriginalAnnotation,timerDisabled:!!this.props.query.force,submitReview:this.submit(!1),onUpdateCorruptionFeedback:this.onUpdateCorruptionFeedback,corruptionsAuditResponse:this.state.corruptionsAuditResponse,showingErrors:this.state.showingErrors,lintErrors:this.state.lintErrors,rerunLinter:this.rerunLinter,onToggleErrorDismissed:this.handleToggleErrorDismissed,toggleShowingErrors:this.toggleShowingErrors,hasTrainingFeedbackPermission:null!==(e=t.props.hasTrainingFeedbackPermission)&&void 0!==e?e:this.props.user.hasTrainingFeedbackPermission,onTaskComponentLinterExecution:this.onTaskComponentLinterExecution,dismissAllLintErrors:this.dismissAllLintErrors})})}renderFooter(e){var t,s,i,a,r;let{lowAccuracyCorruptionTypes:o,improvedAccuracyCorruptionTypes:l,corruptionAccuracy:c}=e,d=g().size((null===(t=this.state.corruptionsAuditResponse)||void 0===t?void 0:t.missedCorruptionsByCuboidId)||{}),p=this.state.corruptionsAuditResponse?this.state.corruptionsAuditResponse.missedLssSpamCorruptions.length:0,u=this.props.assignment.rejectedReviewer&&this.props.assignment.rejectedReviewer===this.props.user._id,m=g().get(this.props.assignment,"params.isFair",!1),h=!!this.props.assignment.qaFor,x=!this.props.skipDisabled&&(!u&&(this.props.assignment.skippable||this.props.skippable)||this.props.isUserAdmin);return this.props.assignment.type===L.TaskType.DocumentTranscription?(0,n.jsx)(documenttranscription_DocumentTranscriptionReviewFooter,{toggleShowingInstructions:this.toggleShowingInstructions.bind(this),toggleShowingShortcuts:this.toggleShowingShortcuts.bind(this),assignment:this.props.assignment,isSubmitting:this.state.isSubmitting,submittedResponse:this.state.submittedResponse,isAssignmentLoading:this.state.isAssignmentLoading,fixable:this.props.fixable,canEdit:this.props.canEdit,canReturnToQueue:!u&&!h&&this.props.canReturnToQueue,isReturnToQueueDisabled:this.props.isReturnToQueueDisabled||!1===this.getReviewSubmitDisabledStatus().canReturnToQueue,returnToQueueDisabledTooltip:this.getReviewSubmitDisabledStatus().returnToQueueTooltip,returnToQueue:this.returnToQueue,canRejectWithChanges:null===(s=this.taskComponent)||void 0===s?void 0:s.canRejectWithChanges,rejectWithChanges:this.rejectWithChanges,makingChanges:this.state.makingChanges,madeChanges:this.computeMadeChanges(),makeChanges:this.makeChanges,discardChanges:this.resetMakingChanges,isSubmitDisabled:!this.getReviewSubmitDisabledStatus().canSubmit,submitDisabledTooltip:this.getReviewSubmitDisabledStatus().submitTooltip,accept:this.props.onAccept||this.submit(!0),reject:this.props.onReject||this.submit(!1),onUserSkip:x&&this.props.onUserSkip,onUserSkipBatch:(this.props.assignment.batchSkippable||this.props.isUserAdmin&&this.props.assignment.batchId)&&this.props.onUserSkipBatch,nextTask:this.props.nextTask,lintErrors:this.state.lintErrors,isInstructionTask:this.props.isInstructionTask,setShowModal:this.setShowModal,isEdgeCaseTask:this.props.isEdgeCaseTask,setShowEdgeCaseModal:this.setShowEdgeCaseModal,setTaskFeedback:this.setTaskFeedback,isScaleStudio:this.props.isScaleStudio}):(0,n.jsx)(eu.Z,{toggleShowingInstructions:this.toggleShowingInstructions.bind(this),toggleShowingShortcuts:this.toggleShowingShortcuts.bind(this),toggleShowingSimilarExamples:this.toggleShowingSimilarExamples.bind(this),assignment:this.props.assignment,isSubmitting:this.state.isSubmitting,submittedResponse:this.state.submittedResponse,isAssignmentLoading:this.state.isAssignmentLoading,fixable:this.props.fixable,canEdit:this.props.canEdit,canReturnToQueue:m?!h&&this.props.canReturnToQueue:!u&&!h&&this.props.canReturnToQueue,isReturnToQueueDisabled:this.props.isReturnToQueueDisabled||!1===this.getReviewSubmitDisabledStatus().canReturnToQueue,returnToQueueDisabledTooltip:this.getReviewSubmitDisabledStatus().returnToQueueTooltip,returnToQueue:this.returnToQueue,canRejectWithChanges:null===(i=this.taskComponent)||void 0===i?void 0:i.canRejectWithChanges,rejectWithChanges:this.rejectWithChanges,makingChanges:this.state.makingChanges,madeChanges:this.computeMadeChanges(),makeChanges:this.makeChanges,discardChanges:this.resetMakingChanges,isSubmitDisabled:!this.getReviewSubmitDisabledStatus().canSubmit,submitDisabledTooltip:this.getReviewSubmitDisabledStatus().submitTooltip,accept:this.props.onAccept||this.submit(!0),reject:this.props.onReject||this.submit(!1),onUserSkip:x&&this.props.onUserSkip,onUserSkipBatch:(this.props.assignment.batchSkippable||this.props.isUserAdmin&&this.props.assignment.batchId)&&this.props.onUserSkipBatch,commentsInput:this.state.commentsInput,auditFeedback:this.state.auditFeedback,setAuditFeedback:this.setAuditFeedback,handleCommentsChange:this.handleCommentsChange,toggleCorruptionsAudit:this.toggleCorruptionsAudit,corruptionsAuditCount:d+p,showAuditResultDropdown:this.showAuditResultDropdown,handleAuditResultChange:this.handleAuditResultChange,annotationCount:this.taskComponent&&this.taskComponent.getAnnotationCount?this.taskComponent.getAnnotationCount():void 0,getTimeSpent:this.taskComponent&&(null===(a=this.taskComponent.props)||void 0===a?void 0:a.getTimeSpent)?this.taskComponent.props.getTimeSpent:void 0,nextTask:this.props.nextTask,lowAccuracyCorruptionTypes:o,improvedAccuracyCorruptionTypes:l,corruptionAccuracy:c,submitForZooxSteamCategorization:this.submitForZooxSteamCategorization,lintErrors:this.state.lintErrors,toggleShowingErrors:this.toggleShowingErrors,auditResult:this.state.auditResult,postCompletionFeedback:this.props.postCompletionFeedback,isInstructionTask:this.props.isInstructionTask,setShowModal:this.setShowModal,isEdgeCaseTask:this.props.isEdgeCaseTask,setShowEdgeCaseModal:this.setShowEdgeCaseModal,setTaskFeedback:this.setTaskFeedback,isScaleStudio:this.props.isScaleStudio,workerId:this.props.user._id,isCorpUser:this.props.user.isCorporateUser,onUserReport:this.taskComponent&&(null===(r=this.taskComponent.props)||void 0===r?void 0:r.onUserReport)?this.taskComponent.props.onUserReport:void 0,getReviewChanges:this.taskComponent&&this.taskComponent.getReviewChanges?this.taskComponent.getReviewChanges:void 0,reRunLinter:this.rerunLinter,projectConfig:this.props.projectConfig})}render(){var e,t;let{corruptionAccuracy:s,improvedAccuracyCorruptionTypes:i,lowAccuracyCorruptionTypes:a,postReviewSubmission:r}=(null===(e=this.props.claim)||void 0===e?void 0:e.corruptionFeedback)||{},o=window.location.pathname.startsWith("/quester");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eJ.Z,{taskTimer:null===(t=this.taskComponent)||void 0===t?void 0:t.taskTimer,openModal:void 0!==this.state.showModal&&this.state.showModal,subtask:this.props.assignment._id,onClose:()=>this.setShowModal(!1),setSubmit:this.updateInstructionFeedbackExists,labels:[],isScaleStudio:this.props.isScaleStudio,feedbackRequired:!0}),this.state.showEdgeCaseModal&&(0,n.jsx)(eX.Z,{openModal:this.state.showEdgeCaseModal,shadowSubtask:this.props.assignment._id,onClose:()=>this.setShowEdgeCaseModal(!1),setSubmit:()=>this.setEdgeCaseFeedbackRead(!0)}),(0,n.jsxs)("div",{className:m().dynamic([["a4a19353d30b2fd4",[F.IS_FEDERAL?"96vh":o?"100%":"100vh"]]])+" review-assignment__container",children:[(0,n.jsx)("div",{className:m().dynamic([["a4a19353d30b2fd4",[F.IS_FEDERAL?"96vh":o?"100%":"100vh"]]])+" review-assignment__top",children:this.renderHeader()}),(0,n.jsx)("div",{className:m().dynamic([["a4a19353d30b2fd4",[F.IS_FEDERAL?"96vh":o?"100%":"100vh"]]])+" review-assignment__main",children:this.renderTask()}),!this.props.hideFooter&&(0,n.jsx)("div",{className:m().dynamic([["a4a19353d30b2fd4",[F.IS_FEDERAL?"96vh":o?"100%":"100vh"]]])+" review-assignment__bottom",children:this.renderFooter({lowAccuracyCorruptionTypes:r?a:void 0,improvedAccuracyCorruptionTypes:r?i:void 0,corruptionAccuracy:r?s:void 0})}),(0,n.jsxs)("div",{className:m().dynamic([["a4a19353d30b2fd4",[F.IS_FEDERAL?"96vh":o?"100%":"100vh"]]])+" review-assignment__hidden",children:[this.props.children,(0,n.jsx)(eh(),{})]}),(0,n.jsx)(m(),{id:"a4a19353d30b2fd4",dynamic:[F.IS_FEDERAL?"96vh":o?"100%":"100vh"],children:".review-assignment__container.__jsx-style-dynamic-selector{height:".concat(F.IS_FEDERAL?"96vh":o?"100%":"100vh",";display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden}.review-assignment__top.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.review-assignment__main.__jsx-style-dynamic-selector{min-height:0;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.review-assignment__bottom.__jsx-style-dynamic-selector{height:70px;-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}")})]})]})}constructor(e){super(e),this.makeChanges=()=>{var e,t;this.setState({makingChanges:!0}),null===(e=(t=this.props).onMakingChanges)||void 0===e||e.call(t,!0)},this.resetMakingChanges=()=>{var e,t,s;this.setState({makingChanges:!1,madeChanges:!1}),null===(e=(t=this.props).onMakingChanges)||void 0===e||e.call(t,!1),null===(s=this.taskComponent)||void 0===s||s.discardChanges()},this.rejectWithChanges=async()=>{let e=await this.taskComponent.getReviewChanges(),t=g().includes([L.TaskType.LidarAnnotation,L.TaskType.LidarSegmentation],this.props.assignment.type),s=this.taskComponent.getReviewSubmitConfirmationMessage(!1,!0);if(s&&!window.confirm(s))return Promise.reject();this.taskComponent.props.setTimeSpent(),await this.setStateAsync({isSubmitting:!0,submittedResponse:!1}),k().closeAll();try{await this.props.submit({isCorrect:!1,populateHypothesis:!t,reviewChanges:e,trueReviewOutcome:N.TaskReviewOutcome.Rejected,timeSpentSecs:this.taskComponent.taskTimer.elapsedTime()/1e3,oldTimeSpentSecs:this.taskComponent.taskOldTimer.elapsedTime()/1e3,timeSpentLoadingSecs:(this.assignmentLoadTime.getTime()-this.assignmentStartTime.getTime())/1e3,comments:this.feedbackComments,fullstorySession:this.fullstorySession,auditResult:this.state.auditResult,taskFeedback:this.state.taskFeedback,documentRotation:this.taskComponent.documentRotation,documentRotationPerPage:this.taskComponent.documentRotationPerPage})}catch(e){throw this.handleSubmitError(e),e}},this.submitForZooxSteamCategorization=g().memoize(e=>async()=>{var t,s;this.categorizationResult=e,await this.submit(!0)(),null===(t=(s=this.props).nextTask)||void 0===t||t.call(s)}),this.returnToQueue=async()=>{var e;let t=g().includes([L.TaskType.LidarAnnotation,L.TaskType.LidarSegmentation],this.props.assignment.type),s=this.taskComponent.getReviewSubmitConfirmationMessage(!1,!0);if(s&&!window.confirm(s))return Promise.reject();this.taskComponent.props.setTimeSpent(),await this.setStateAsync({isSubmitting:!0,submittedResponse:!1}),k().closeAll();let i=g().get(this.props,"isScaleStudio",!1)?null===(e=this.taskComponent.getReviewChanges())||void 0===e?void 0:e.inlineComments:void 0;try{await this.props.submit({isCorrect:!1,populateHypothesis:!t,reviewChanges:void 0,reviewInlineComments:i,timeSpentSecs:this.taskComponent.taskTimer.elapsedTime()/1e3,oldTimeSpentSecs:this.taskComponent.taskOldTimer.elapsedTime()/1e3,timeSpentLoadingSecs:(this.assignmentLoadTime.getTime()-this.assignmentStartTime.getTime())/1e3,comments:this.feedbackComments,fullstorySession:this.fullstorySession,auditResult:this.state.auditResult,taskFeedback:this.state.taskFeedback,documentRotation:this.taskComponent.documentRotation,documentRotationPerPage:this.taskComponent.documentRotationPerPage})}catch(e){throw this.handleSubmitError(e),e}},this.toggleShowingErrors=()=>{this.setState({showingErrors:!this.state.showingErrors})},this.handleCommentsChange=e=>{this.setState({commentsInput:e})},this.setTaskFeedback=(e,t)=>{this.setState({taskFeedback:e},t)},this.setAuditFeedback=e=>{this.setState({auditFeedback:e})},this.triggerAutosave=async()=>{var e;this.setState({isAutosaving:!0}),(null===(e=this.taskComponent)||void 0===e?void 0:e.triggerAutosave)&&await this.taskComponent.triggerAutosave(),this.setState({isAutosaving:!1})},this.rerunLinter=async()=>{var e;let t=this.props.fixable&&this.state.madeChanges&&this.taskComponent?await this.taskComponent.getReviewChanges():null!==(e=this.props.assignment.fixResponse)&&void 0!==e?e:this.props.fixResponse;return this.checkLintErrors({taskResponse:t})},this.dismissAllLintErrors=()=>{let e=this.state.lintErrors.map(e=>e.data.blocksSubmission?e:{...e,dismissed:!0});this.setState({lintErrors:e})},this.setShowModal=e=>{this.setState({showModal:e})},this.updateInstructionFeedbackExists=()=>{this.setState({instructionFeedbackRead:!0})},this.setEdgeCaseFeedbackRead=e=>{this.setState({edgeCaseFeedbackRead:e})},this.setShowEdgeCaseModal=e=>{this.setState({showEdgeCaseModal:e})},this.onTaskComponentLinterExecution=e=>{let t=[];for(let s of e){let e=this.state.lintErrors.find(e=>e.id===s.id);e?t.push({...s,dismissed:e.dismissed}):t.push({...s})}this.setState({lintErrors:t})},(0,eg.Z)(this,"assignmentDidLoad","submit","discardChanges","onChange","onChangeHideOriginal","handleErrorCountsChange","handleToggleErrorDismissed","handleAuditResultChange","updateFullstory","onUpdateCorruptionFeedback","toggleCorruptionsAudit","setShowModal","setShowEdgeCaseModal","updateInstructionFeedbackExists");let t=!!this.props.assignment.params.attachment_type&&!g().includes(e0,this.props.assignment.params.attachment_type);this.assignmentStartTime=new Date,this.assignmentLoadTime=new Date,this.state={errorCounts:{criticalCount:0,missingCount:0,nonCriticalCount:0},hideOriginalAnnotation:!1,isAutosaving:!1,isSubmitting:!1,madeChanges:!1,showingCorruptionsAudit:!1,showingErrors:!1,lintErrors:[],showModal:!1,instructionFeedbackRead:!1,isAssignmentLoading:t,disabledCooldown:this.defaultCooldownForProps(this.props),makingChanges:!!this.props.makingChanges},setInterval(()=>{this.forceUpdate()},3e4)}};var e5=s(791257),e2=s(902167),e3=s(876041),e8=s(56916),e4=s(160337),e6=s(153737),e7=s(789018),e9=s(467659),te=s(795115);function isElectron(){return null!=window.electronBridge}var tt=s(793589),ts=s(513735),ti=s(642830),tn=s(571085),ta=s(824385),tr=s(623589),to=s(35084),tl=s(948925),tc=s(433536);let td=(0,tc.ZL)(e=>({container:{padding:e.spacing(2),width:600,margin:"0 auto"},title:{marginBottom:e.spacing(2),display:"block"},subtaskItem:{padding:e.spacing(2),marginBottom:e.spacing(2)}})),getParams=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e:e.params};var scalers_SubtaskSelector=e=>{let{isAudit:t,subtasks:s,...i}=e,a=td();return(0,n.jsxs)("div",{className:a.container,children:[(0,n.jsx)(J.H1,{className:a.title,children:"Tasks for review"}),s.map(e=>{let{frameWindow:s,index:r}=getParams(e,t),{start:o,end:l}=s;return(0,n.jsxs)(J.Xk,{className:a.subtaskItem,children:[(0,n.jsxs)(J.H3,{children:["Task from ",o+1," to"," ",l]}),t&&(0,n.jsx)("p",{children:(0,n.jsxs)(J.xv,{children:["Status: ",g().startCase(e.customerReviewStatus)]})}),(0,n.jsxs)(J.Av,{type:"primary",href:t?"/audit?taskId=".concat(i.taskId,"&index=").concat(r):"/tasks?subtaskId=".concat(e._id,"&index=").concat(r),target:t?"_self":"_blank",children:[t?"Audit":"Review"," task"]})]},r)})]})},tp=s(952332),tu=s(416534);let InvalidClaim=()=>(0,n.jsx)("div",{className:"flex flex-col items-center justify-center h-screen",children:(0,n.jsxs)("div",{className:"p-4 rounded-lg shadow-sm bg-neutral-0/50 backdrop-blur-lg min-w-fit border border-neutral-200",children:[(0,n.jsx)("div",{children:(0,n.jsx)(tp.M,{title:"Task Unavailable",description:"Apologies, this task is no longer available to you. Please continue to the next task if one is available.",className:"border-b border-gray-200 pb-2"})}),(0,n.jsx)("div",{className:"flex items-start justify-start mt-2 md:mt-0",children:(0,n.jsx)(tu.zx,{onClick:()=>{window.location.reload()},children:"Continue"})})]})});InvalidClaim.displayName="InvalidClaim";var tm=s(220373),th=s(955532),tg=s(268232);let tx=(0,tm.Z)({verificationPage:{height:"100%",width:"100vw",overflow:"auto",display:"flex",flexDirection:"column",alignItems:"center",background:"var(--color-RemoGray01)"},verificationContainer:{width:"80vw",maxWidth:"1080px",padding:"64px 0",["@media (max-width: ".concat(A.Et,")")]:{padding:0,width:"100vw",height:"100vh"}},verificationContainerResponsive:{["@media (max-width: ".concat(A.Et,")")]:{height:"100%",padding:"32px",width:"100%"}},verificationCard:{boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.05)",borderRadius:"var(--border-radius)",background:"white",overflow:"hidden"},verificationCardResponsive:{["@media (max-width: ".concat(A.Et,")")]:{height:"100%",overflow:"scroll"}},verificationWrapperResponsive:{["@media (max-width: ".concat(A.Et,")")]:{height:"100%"}}}),tf=(0,tm.Z)({verificationHeader:{marginBottom:"32px",paddingInlineStart:"32px"},verificationHeaderResponsive:{["@media (max-width: ".concat(A.Et,")")]:{display:"none"}},logo:{width:"120px",display:"inline-block"}}),AccountVerificationTitle=e=>(0,n.jsxs)("div",{className:"jsx-3ebabb9c53cf3a18 verification-title",children:[(0,n.jsx)("em",{className:"jsx-3ebabb9c53cf3a18",children:e.displayType}),(0,n.jsx)("strong",{className:"jsx-3ebabb9c53cf3a18",children:e.title}),(0,n.jsx)(m(),{id:"3ebabb9c53cf3a18",children:".verification-title.jsx-3ebabb9c53cf3a18{margin-bottom:32px}.verification-title.jsx-3ebabb9c53cf3a18 em.jsx-3ebabb9c53cf3a18{display:block;margin-bottom:4px;font-style:normal;font-weight:bold;font-size:14px;text-transform:uppercase;letter-spacing:1px;opacity:.5}.verification-title.jsx-3ebabb9c53cf3a18 strong.jsx-3ebabb9c53cf3a18{display:block;font-size:24px;font-weight:normal}"})]}),tb=(0,tm.Z)({verificationFooter:{marginTop:"32px",["@media (max-width: ".concat(A.Et,")")]:{marginTop:0,background:"var(--color-RemoGray01)",position:"absolute",bottom:0,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",padding:16}},continue:{borderTop:"1px dashed var(--color-RemoGray01)",height:"120px",display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:16,padding:"0 32px"},continueResponsive:{["@media (max-width: ".concat(A.Et,")")]:{height:"initial",width:"100%",padding:0}},actions:{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:16,alignItems:"center",marginBottom:16,padding:"0 32px",["@media (max-width: ".concat(A.Et,")")]:{padding:0}}}),AccountVerificationFooter=e=>{let t=tb();return(0,n.jsxs)("div",{className:t.verificationFooter,children:[e.sectionActions&&(0,n.jsxs)("div",{className:t.actions,children:[e.sectionActions,e.sectionMessage]}),(0,n.jsxs)("div",{className:ey()(t.continue,{[t.continueResponsive]:e.responsive}),children:[(0,n.jsx)("div",{}),(0,n.jsx)(eI.zx,{style:{width:"100%"},type:"primary",onClick:async()=>{await (0,c.fetchApi)("/fraud/complete_verification",{method:"POST",headers:{"Content-Type":"application/json"},body:{}}),e.handleContinue()},disabled:!e.canContinue||e.isLoading,children:"Continue"})]})]})},tk={verificationSectionResponsive:{["@media (max-width: ".concat(A.Et,")")]:{height:"calc(100vh - 87px)",overflowY:"scroll",marginBottom:112}},verificationSectionMain:{padding:"32px"}},tv=(0,J.D2)(tk)(e=>(0,n.jsxs)("div",{className:ey()({[e.classes.verificationSectionResponsive]:e.responsive}),children:[(0,n.jsxs)("div",{className:e.classes.verificationSectionMain,children:[(0,n.jsx)(AccountVerificationTitle,{displayType:e.displayType,title:e.title}),e.content]}),(0,n.jsx)(AccountVerificationFooter,{...e})]})),GlobalHeader=e=>{let t=tf();return(0,n.jsx)("div",{className:ey()(t.verificationHeader,{[t.verificationHeaderResponsive]:e.responsive}),children:(0,n.jsx)(T.ZP,{href:"/dashboard",children:(0,n.jsx)("a",{children:(0,n.jsx)("div",{className:t.logo,children:(0,n.jsx)(tg.Z,{fill:"black"})})})})})},ty=(0,th.sw)(tv);var tj=(i=e=>{let t=tx();return(0,n.jsx)("div",{className:t.verificationPage,children:(0,n.jsxs)("div",{className:t.verificationContainer,children:[(0,n.jsx)(GlobalHeader,{responsive:e.mobile}),(0,n.jsx)("div",{className:ey()(t.verificationCard,{[t.verificationCardResponsive]:e.mobile}),children:(0,n.jsx)(ty,{...e})})]})})},e=>{let t=(0,I.Z)("(max-width: ".concat(A.Et,")"));return(0,n.jsx)(i,{mobile:t,...e})}),tw=s(969137),tT=s(208919),tC=s(255146),tS=s(347026);let AccountVerificationTask_AccountVerificationTitle=e=>(0,n.jsxs)("div",{className:"course-title",children:[(0,n.jsx)("em",{className:"block mb-4 text-base font-bold tracking-wide uppercase",children:e.displayType}),(0,n.jsx)("strong",{className:"text-lg",children:e.title})]}),AccountVerificationDescription=e=>{let{description:t}=e;return t?(0,n.jsx)("div",{children:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,n.jsx)("div",{className:"ql-editor",dangerouslySetInnerHTML:{__html:z.ZP.render(e)}})}(t)}):null},AccountVerificationTask_AccountVerificationFooter=e=>{let t=(0,tS.Z)();return(0,n.jsxs)("div",{children:[e.sectionActions&&(0,n.jsxs)("div",{className:"flex",children:[e.sectionActions,e.sectionMessage]}),(0,n.jsx)("div",{className:"fixed bottom-0 left-0 flex justify-between w-full h-16 px-10 p-3 shadow-lg bg-neutral-0 shadow-neutral-600",children:(0,n.jsx)(tu.zx,{variant:"primary",className:"w-24 justify-center",onClick:async()=>{await (0,c.fetchApi)("/fraud/complete_verification",{method:"POST",headers:{"Content-Type":"application/json"},body:{}}),t.verificationredirect&&e.canContinue?(0,tC.ZP)({},t.verificationredirect):await e.handleContinue()},disabled:!e.canContinue||e.isLoading,style:{position:"fixed",right:"30px"},children:"Continue"})})]})},tR=(0,tw.s)(e=>(0,n.jsxs)("div",{className:"my-7",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(AccountVerificationTask_AccountVerificationTitle,{displayType:e.displayType,title:e.title}),(0,n.jsx)(AccountVerificationDescription,{description:e.contents.description}),e.content]}),(0,n.jsx)(AccountVerificationTask_AccountVerificationFooter,{...e})]})),AccountVerificationTask_AccountVerificationTask=e=>(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"scaleui outlier-theme w-[80vw] max-w-[1080px] m-auto pb-10",children:(0,n.jsx)("div",{children:(0,n.jsx)(tR,{...e})})})});var AccountVerification_AccountVerificationTask=e=>(0,n.jsx)(tT.Z,{user:e.user,children:(0,n.jsx)(AccountVerificationTask_AccountVerificationTask,{...e})}),tA=s(665876),tI=s(812955),t_=s(628746),tN=s(225043),tL=s(312273);let EmptyQueue=e=>{let{user:t}=e,{isLoading:s,data:i}=(0,_._z)("outlier-marketplace",{userId:t.id},!1),a=(0,tL.wL)();i&&a.warn("Marketplace User Hits Empty Queue",{assignedProjectLayers:t.assignedProjectLayers,chosenProjectLayer:t.chosenProjectLayer,lastEQEvent:t.lastEmptyQueueEvent});let r="".concat(E.ZA,"/dashboard");return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,n.jsx)(tI.Z,{}),(0,n.jsx)("div",{className:"text-lg font-medium text-slate-600",children:"Your task queue is currently empty"}),(0,n.jsx)("div",{className:"text-neutral-800 w-1/2 text-center",children:(0,t_.s7)(t)?"Make sure you have a valid payment method set up to begin tasking.":(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{children:"Hang tight, we are looking for tasks that are a good fit for you. We will notify you as soon as new tasks are available."}),(0,n.jsx)("div",{children:"Please check back again later."})]})}),(0,n.jsxs)("div",{className:"flex gap-4",children:[s?null:i?(0,n.jsx)(tu.zx,{variant:"neutral",onClick:()=>window.location.replace(r),children:"Back to home"}):(0,n.jsx)(T.ZP,{href:"/expert/",children:(0,n.jsx)(tu.zx,{variant:"neutral",children:"Back to Home"})}),(0,n.jsx)(tN.s,{user:t})]})]})};var TasksPage_TaxBlockPage=e=>{let{corpExplainPath:t}=e;return(0,n.jsxs)("div",{className:"fullscreen-card--container",children:[(0,n.jsxs)("div",{className:"fullscreen-card",style:{boxShadow:"none"},children:[(0,n.jsx)("svg",{width:"10vh",height:"10vh",viewBox:"0 0 111 99",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M3.4677 57.0375C0.637492 52.2479 0.637492 46.3698 3.4677 41.3625L22.626 8.27082C25.4562 3.26353 30.6812 0.433321 36.124 0.433321H74.6583C80.3188 0.433321 85.326 3.26353 88.1563 8.27082L107.315 41.3625C110.145 46.3698 110.145 52.2479 107.315 57.0375L88.1563 90.3469C85.326 95.3542 80.3188 98.1844 74.6583 98.1844H36.124C30.6812 98.1844 25.4562 95.3542 22.626 90.3469L3.4677 57.0375ZM55.5 21.3333C52.4521 21.3333 50.275 23.7281 50.275 26.5583V50.9417C50.275 53.9896 52.4521 56.1667 55.5 56.1667C58.3302 56.1667 60.725 53.9896 60.725 50.9417V26.5583C60.725 23.7281 58.3302 21.3333 55.5 21.3333ZM62.4667 70.1C62.4667 66.399 59.201 63.1333 55.5 63.1333C51.5812 63.1333 48.5333 66.399 48.5333 70.1C48.5333 74.0187 51.5812 77.0667 55.5 77.0667C59.201 77.0667 62.4667 74.0187 62.4667 70.1Z",fill:"#29CD9C"})}),(0,n.jsx)("div",{id:"tax-block-reason",children:"You are blocked from tasking until you provide your tax forms in your account center."}),(0,n.jsx)("div",{className:"tax-unblock-instructions",children:"Once you've done so, come back and refresh this page."}),(0,n.jsx)(T.ZP,{href:"/account",children:(0,n.jsx)(J.zx,{id:"tax-center-account-button",variant:"contained",children:"Go to Account Center"})}),t&&(0,n.jsxs)("div",{className:"tax-unblock-instructions",children:["Were you expecting a task? Try using ",(0,n.jsx)(T.ZP,{href:t,children:"Corp Explain"})]})]}),(0,n.jsx)("style",{children:"\n        .fullscreen-card--container {\n          height: 100%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .fullscreen-card {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          height: 100%;\n          background: white;\n        }\n        \n        #tax-block-reason {\n          width: 60%;\n          font-style: normal;\n          font-weight: 500;\n          font-size: 1.25vw;\n          line-height: 150%;\n          text-align: center;\n          color: #374151;\n          margin-top: 2rem;\n          margin-bottom: 1rem;\n        }\n\n        #tax-center-account-button {\n          background-color: rgb(43, 153, 216);\n          color: white;\n          width: 60%;\n          padding-top: 1.5rem !important;\n          padding-bottom: 1.5rem !important;\n          margin-bottom: 1rem;\n        }\n\n        #tax-center-account-button span {\n          font-size: medium !important;\n        }\n\n        .tax-unblock-instructions {\n          font-style: normal;\n          font-weight: 400;\n          font-size: 0.8vw;\n          line-height: 150%;\n          text-align: center;\n          margin-bottom: 1rem;\n        }\n      "})]})},tE=s(306130),tP=s(776845);let IncompleteTaskAttempt=e=>{var t;let{payText:s,actions:i,query:a,isInQATeam:r,setIsExitingTask:o,projectId:l,incompleteAttempt:c,flaggedForFraud:d}=e,p=(0,x.useRouter)(),u=null!==(t=(0,_.ZP)("enable-show-no-pay-for-incomplete-tasks",{projectId:l},!1))&&void 0!==t&&t;return(0,n.jsx)("div",{className:"flex items-center justify-center h-[100%]",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 items-center p-4 relative",style:{padding:"2rem"},children:[(0,n.jsx)("img",{className:"w-auto h-[120px] pl-8",src:"/static/img/outlier/3d-flag.svg"}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-[550px] items-center",children:[(0,n.jsx)("div",{className:"my-[12px]",children:(0,n.jsx)(tP.ZT.H3,{className:"text-back",children:"Task unavailable"})}),(0,n.jsx)(tP.ZT.Paragraph1,{className:"text-neutral-500 text-center",children:u?"Apologies, this task is no longer available to you due to a technical problem or a task allocation issue.":d?"Our system detected account activity that caused a technical error.":"Apologies, this task is no longer available to you due to a technical problem or a task allocation issue. You will be paid in full for the time you spent on this task."}),(u||d)&&(0,n.jsxs)(tP.ZT.Paragraph1,{className:"text-neutral-500 text-center",children:["Attempt ID: ",c||"N/A"]}),(0,n.jsx)("div",{className:"border-t-[1px] border-neutral-300 w-[100%]"})]}),s?(0,n.jsxs)("div",{className:"flex flex-col align-center justify-center gap-4 w-[100%] ",children:[s.map((e,t)=>0===t?(0,n.jsx)(tP.ZT.H5,{className:"text-black text-center",children:e},t):(0,n.jsx)(tP.ZT.Paragraph1,{className:"text-black text-center",children:e},t)),(0,n.jsx)("div",{className:"border-t-[1px] border-neutral-300 w-[100%]"})]}):null,!u&&!d&&(0,n.jsx)("div",{className:"mb-4 w-[600px]",children:(0,n.jsx)(tP.ZT.Paragraph1,{className:"text-neutral-500 text-center",children:"It may take a few minutes for your pay to reflect in the earnings tab"})}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(tu.zx,{className:"w-[160px] justify-center",variant:"neutral",size:"lg",onClick:()=>{p.push("/en/expert")},children:(0,n.jsx)(tP.ZT.Paragraph3,{children:"Return to dashboard"})}),(0,n.jsx)(tu.zx,{className:"w-[160px] justify-center",variant:"primary",size:"lg",onClick:()=>{null==i||i.confirmReadyForNextTask(),null==i||i.nextTask(a,r),o(!1)},children:(0,n.jsx)(tP.ZT.Paragraph3,{className:"text-secondary-600",children:"Continue tasking"})})]})]})})};IncompleteTaskAttempt.displayName="IncompleteTaskAttempt";let NoTasksPage=e=>{let{user:t}=e,{isLoading:s,data:i}=(0,_._z)("outlier-marketplace",{userId:t.id},!1),a="".concat(E.ZA,"/dashboard");return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,n.jsx)(tI.Z,{}),(0,n.jsx)("div",{className:"text-lg font-medium text-slate-600",children:"Hang on! There are some more things you need to complete"}),(0,n.jsx)("div",{className:"text-neutral-800 w-1/2 text-center space-y-4 py-2",children:"There are some remaining requirements you must complete before you can work on tasks."}),(0,n.jsx)("div",{className:"flex gap-4",children:s?null:i?(0,n.jsx)(tu.zx,{variant:"neutral",onClick:()=>window.location.replace(a),children:"Go to dashboard"}):(0,n.jsx)(T.ZP,{href:"/expert/",children:(0,n.jsx)(tu.zx,{variant:"neutral",children:"Back to Home"})})})]})};var tF=s(551620),tD=s(594977),tz=s(127061);let equalIfExists=(e,t)=>!e||!t||e===t;let Tasks=class Tasks extends a.Component{async fetchShowNewInstructionFlag(){let e=await (0,D.V3)({feature:"instruction-render-v2"}),t=this.props.assignments[0]||{},s=this.getProjectIdFromAssignment(t);if(e&&s)try{let e=await e7.Z.selfserve.getProjectInstructionStatus(s,t.id);if(e.ok&&e.instruction&&e.instruction.components&&e.instruction.components.length>0){let{shouldUseNGI:t}=e;if(t){this.setState({instructionV2Res:e}),this.setState({isFetching:!1});return}}}catch(e){ti.Z.warn("project ".concat(s," new instruction not found"))}this.setState({isFetching:!1}),this.setState({instructionV2Res:{}})}async fetchCanForceSkipInstructions(){let e=this.props.assignments[0]||{},t=this.getProjectIdFromAssignment(e),{isInitialBenchmark:s}=e,i=await (0,D.V3)({feature:"force-skip-instructions-by-project",querystring:v.stringify({projectId:t})});this.setState({forceSkipInstructions:i&&s}),this.setState({isFetchingForceSkipInstructions:!1})}async fetchIsMarketplaceUser(){let e=await (0,D.V3)({feature:"outlier-marketplace",querystring:v.stringify({userId:this.props.user.id})});this.setState({isMarketplaceUser:e}),this.setState({isFetchingMarketplaceUser:!1})}async fetchShouldLogBrowserEvents(){let e=this.props.assignments[0]||{},t=this.getProjectIdFromAssignment(e),s=await (0,D.V3)({feature:"frontend-browser-event-logging",querystring:v.stringify({projectId:t})});this.setState({shouldLogBrowserEvents:s},()=>{"wasDiscarded"in document&&document.wasDiscarded&&this.logEventAction("refreshing from discard")}),this.setState({isFetchingShouldLogBrowserEvents:!1})}logEventAction(e){var t;let s=this.getCurrentAssignments()[0],i=null===(t=this.props.user)||void 0===t?void 0:t.id;this.state.shouldLogBrowserEvents&&("visibilitychange"===e?"hidden"===document.visibilityState?ti.Z.info("User ".concat(i," is backgrounding the page for assignment ").concat(null==s?void 0:s._id)):"visible"===document.visibilityState&&ti.Z.info("User ".concat(i," is foregrounding the page for assignment ").concat(null==s?void 0:s._id)):ti.Z.info("User ".concat(i," is ").concat(e," the page for assignment ").concat(null==s?void 0:s._id)))}componentDidMount(){this.setState({fetchedCanReturnToQueue:!1,fetchingCanReturnToQueue:!1}),this.setupContexts(),this.boundLogEventActionUnload=this.logEventAction.bind(this,"unloading"),this.boundLogEventActionVisibilityChange=this.logEventAction.bind(this,"visibilitychange"),this.boundLogEventActionUnload&&this.boundLogEventActionVisibilityChange&&(window.addEventListener("beforeunload",this.boundLogEventActionUnload),document.addEventListener("visibilitychange",this.boundLogEventActionVisibilityChange)),this.fetchTimerFlags()}componentWillUnmount(){tn.Ep(),te.c.clearContext(),this.boundLogEventActionUnload&&this.boundLogEventActionVisibilityChange&&(window.removeEventListener("beforeunload",this.boundLogEventActionUnload),document.removeEventListener("visibilitychange",this.boundLogEventActionVisibilityChange))}oldComponentWillUpdate(e){2===this.props.assignments.length&&g().get(e.assignments,"0._id")!==g().get(this.props.assignments,"0._id")&&this.props.onAssignmentFinished&&this.props.onAssignmentFinished(),this.props.batch.status!==tt.ENDED&&e.batch.status===tt.ENDED&&this.props.onAssignmentFinished&&this.props.onAssignmentFinished(),this.props.assignments.length&&this.state.lastAssignments.length&&this.props.assignments[0].id!==this.state.lastAssignments[0].id&&!this.state.isNewAssignment&&this.setState({isNewAssignment:!0})}componentDidUpdate(e){if(this.state.alerting||this.state.completedEditLockCheck||!1!==this.props.batch.currentPageHasEditLock||this.setState({completedEditLockCheck:!0}),this.props.assignments&&this.props.assignments.length){let e=this.props.assignments[0];this.state.lastAssignments.length?e.id!==this.state.lastAssignments[0].id&&this.setState(t=>{let{lastAssignments:s}=t;return{lastAssignments:[e,...s].slice(0,2)}}):this.setState({lastAssignments:[e]}),this.state.instructionV2Res||this.state.isFetching||(this.setState({isFetching:!0}),this.fetchShowNewInstructionFlag()),g().isNil(this.state.forceSkipInstructions)&&!this.state.isFetchingForceSkipInstructions&&(this.setState({isFetchingForceSkipInstructions:!0}),this.fetchCanForceSkipInstructions()),g().isNil(this.state.isMarketplaceUser)&&!this.state.isFetchingMarketplaceUser&&(this.setState({isFetchingMarketplaceUser:!0}),this.fetchIsMarketplaceUser()),g().isNil(this.state.shouldLogBrowserEvents)&&!this.state.isFetchingShouldLogBrowserEvents&&(this.setState({isFetchingShouldLogBrowserEvents:!0}),this.fetchShouldLogBrowserEvents()),this.state.isNewAssignment&&this.setState({isNewAssignment:!1})}this.setupContexts(),this.oldComponentWillUpdate(e)}setupContexts(){let{assignments:e}=this.props;this.setAnalyticsContext(e[0])}async fetchTimerFlags(){let e=await (0,D.V3)({feature:"enable-timer-for-force-claimed-task"});this.setState({enableTimerForForceClaimedTask:e})}setAnalyticsContext(e){var t;let{attemptId:s,id:i,isReviewMode:n,isReviewFix:a,type:r,taskType:o,project:l}=g().pickBy(e),c=g().pickBy({attemptId:s,subtaskId:i,projectId:g().get(l,"_id",l),isReviewMode:n,isReviewFix:a,taskType:r||o,userId:this.props.user.id,isCorporateUser:this.props.user.isCorporateUser,pageLoadId:(0,P.tQ)()});("lidarannotation"===(r||o)||"lidarsegmentation"===(r||o))&&g().set(c,"currentUrl",window.location.href),te.c.setContext(c),tn.v(c),null===(t=ti.Z.setContext)||void 0===t||t.call(ti.Z,c)}getCurrentAssignments(){let e=this.props.assignments[0],t=g().has(e,["params","lidar_linking","task"]);if(t){let t=g().get(e,["params","lidar_linking","task"]);return this.props.assignments.filter(e=>g().get(e,["params","lidar_linking","task"])===t)}return[e]}getInstructionHash(e){return g().get(e,"instructionList._id",e.instruction_hash)}isFixable(e){return!e.useBinaryResponse&&!e.params.isRedactionVerification}isValidClaim(e){let t=this.props.claims[this.getIdForClaim(e)];return!!(null==t?void 0:t.claimed)}needsRefresh(e){let t=this.props.claims[this.getIdForClaim(e)];return null==t?void 0:t.needsRefresh}get isReviewMode(){return(0,e5.isLegacyReviewAssignment)(this.props.assignments[0])}get isEscalatedTaskMode(){var e,t;return!!((null===(e=this.props.assignments[0])||void 0===e?void 0:e.type)===L.TaskType.Categorization&&(null===(t=this.props.assignments[0])||void 0===t?void 0:t.isEscalatedTask))}get shouldRenderInstructions(){var e,t;if(this.props.user.isCorporateUser||this.state.isMarketplaceUser||this.props.skipInstructions||this.state.forceSkipInstructions||(null===(t=this.state.instructionV2Res)||void 0===t?void 0:null===(e=t.quiz)||void 0===e?void 0:e.isFinished))return!1;let s=this.getCurrentAssignments(),i=s[0];if(!i)return!1;let n=this.getInstructionHash(i)!==this.state.lastInstructionHash;if(!n||this.props.target)return!1;let a=this.state.lastAssignments[1];if(!a)return!0;let r=i.attemptId===i._id,o=this.getProjectIdFromAssignment(i)===this.getProjectIdFromAssignment(a),l=i.type||i.taskType;return!(r||l&&(0,N.isContentAndLanguage)(l))||!o}async fetchCanReturnToQueue(e,t,s,i){var n;let a=!1,r=!1,o=!1;if(null===(n=this.props.assignments[0])||void 0===n?void 0:n.isSpotterSubtask)a=!0,r=!1;else try{let n=await (0,R.ZP)(null,"internal/scaler/reviews/canReturnToQueue?worker=".concat(this.props.user.id,"&subtaskId=").concat(e,"&projectId=").concat(t,"&taskType=").concat(s,"&taskCustomer=").concat(i));a=n.canReturnToQueue,r=n.isReturnToQueueDisabled,o=n.skipDisabled}catch(e){}this.setState({fetchingCanReturnToQueue:!1,fetchedCanReturnToQueue:!0,isReturnToQueueDisabled:r,canReturnToQueue:a,skipDisabled:o})}isDoubleSubmit(e){return!!(e.length>7&&this.completedWork[e]&&Date.now()-this.completedWork[e].getTime()<5e3)||(this.completedWork[e]=new Date,!1)}finishAttempt(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];ti.Z.log("Called finish attempt",{shouldFetchNextTask:t}),t&&e!==L.TaskType.Categorization&&!this.props.fastSubmissionEnabled&&this.props.actions.fetchNextAssignments(this.props.query),this.props.actions.fetchBonuses()}renderInstructions(e){var t,s,i,a,r,o;return(0,n.jsxs)("div",{className:"jsx-d4d994b4958f9dfe tasks__container scaler scaler-instructions",children:[(0,n.jsx)(eo.Z,{urls:(0,el.P)(this.props.assignments),limitPrefetchedImages:null===(s=this.props.assignmentJson)||void 0===s?void 0:null===(t=s.featureFlags)||void 0===t?void 0:t.limitPrefetchedImages,limitPrefetchedLargeImages:null===(a=this.props.assignmentJson)||void 0===a?void 0:null===(i=a.featureFlags)||void 0===i?void 0:i.limitPrefetchedLargeImages,disableTaskerPrefetchLimit:null===(o=this.props.assignmentJson)||void 0===o?void 0:null===(r=o.featureFlags)||void 0===r?void 0:r.disableTaskerPrefetchLimit}),(0,n.jsx)(FullscreenInstructions,{currentAssignment:e.subtask||e._id,customer:e.user,type:e.type,project:e.project,isReviewMode:this.isReviewMode,instructionsHash:this.getInstructionHash(e),instructions:e.instruction,instructionList:e.instructionList,instructionObjectId:e.instructionObjectId,setLastInstructionHash:this.setLastInstructionHash,urgency:e.urgency,onClose:this.handleInstructionsClose,isEdgeCase:e.isEdgeCaseTask,instructionV2Res:this.state.instructionV2Res,...this.props}),(0,n.jsx)(m(),{id:"d4d994b4958f9dfe",children:".scaler-instructions.jsx-d4d994b4958f9dfe{height:100vh;width:100vw;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}"})]})}render(){var e,t,s,i,a,r,o,l,c,d,p,u,h,x,f,b,k,y,j,w,T,C,S,R,A,I,_,E,P,F,D;let z;let Z=this.getCurrentAssignments(),B=Z[0],M=!1;if(this.state.feedback){let e=g().cloneDeep(this.state.feedback),t=g().last(e.newInstructiveAttempts);g().assign(e,t),g().assign(e.trainingScenario,{instructionList:g().get(B,"instructionList")});let s=[{name:e4.DiffView.TaskerResponse,response:e.response,graderResponse:e.graderResponse,graderParams:e.graderParams},{name:e4.DiffView.AnswerKey,response:e.closestExpectedResponse||e.trainingScenario.expectedResponse,isAnswerKey:!0,graderResponse:e.graderResponse,graderParams:e.graderParams}],i=e.visualDiff;i&&s.unshift({name:e4.DiffView.VisualDiff,response:i,graderResponse:e.graderResponse,graderParams:e.graderParams});let n=this.props.userFromGetInitialProps&&this.props.userFromGetInitialProps._id,a=e.trainingScenario,r=!e.benchmarkScoreBelowDisableThresholdConditionalBM&&a.benchmark.isConditionallyInstructiveBenchmark,o={name:a&&a.name,showingGrade:!0,trainingScenario:a,submissionResponse:e,responses:s,allowedToSeeAnswerKey:!0,disableRetry:!0,backToQueue:this.backToQueue,isInstructiveBenchmark:!0,loggedUserId:n,useProtectedText:a.useProtectedText,isConditionallyInstructiveBenchmark:a.benchmark.isConditionallyInstructiveBenchmark,isConditionallyInstructiveBenchmarkPassed:!e.benchmarkScoreBelowDisableThresholdConditionalBM};if(!r||this.state.feedback.hasFailedConditionally)return this.getFeedbackComponent(this.state.feedback.taskType,o);M=!0}if(this.props.batch.newBonuses&&this.props.batch.newBonuses.length>0){let e=this.props.batch.newBonuses[0];return this.currentlyShowingBonusId!==e._id&&(this.currentlyShowingBonusId=e._id),(0,n.jsx)(EarnedBonusModal,{showBonus:e,bonuses:this.props.batch.bonuses,onClick:()=>this.onBonusModalClick(e)})}if(this.currentlyShowingBonusId=null,this.props.batch.status===tt.PENDING||this.state.isFetching||this.state.isNewAssignment||this.props.isRedirecting)return(0,n.jsx)("div",{className:"tasks__container scaler o__loading",children:(0,n.jsx)(e_.Z,{})});let O=window.location.pathname.includes("/expert/");if(!B){let e=this.props.user.isCorporateUser||this.props.user.spoofed;if(O){let e=new tF.S;return(0,n.jsx)(tD.aH,{client:e,children:(0,n.jsxs)("div",{className:"scaleui outlier-theme scale-tailwind h-full",children:[(0,n.jsx)("div",{className:"bg-neutral-0 shadow-sm",children:(0,n.jsx)(tA.Z,{simple:!0,showLogo:!0,showMenu:!0,user:this.props.user})}),(0,n.jsx)(EmptyQueue,{user:this.props.user})]})})}let t="true"===window.localStorage.getItem("isTaxBlocked:".concat(this.props.user.id));if(e){let{project:e,subtaskId:s,lidarId:i}=v.parse(document.location.search),a=s||i,r=g().pickBy({worker:encodeURIComponent(this.props.user.id),subtask:a,...!a&&{project:e}}),o="/corp/explain?".concat(v.stringify(r));return t?(0,n.jsx)(TasksPage_TaxBlockPage,{corpExplainPath:(0,e9.LR)(o)}):(0,n.jsxs)("div",{className:"jsx-2f875baa97faecca",children:[(0,n.jsx)(scalers_NoMoreTasks,{config:this.props.config,query:this.props.query,user:this.props.user}),(0,n.jsxs)("div",{className:"jsx-2f875baa97faecca hint",children:[(0,n.jsxs)("span",{className:"jsx-2f875baa97faecca",children:["Corp User Tools",(0,n.jsx)("br",{className:"jsx-2f875baa97faecca"})]}),"Debugging an Empty Queue issue? Please use"," ",(0,n.jsx)("a",{href:(0,e9.LR)(o),className:"jsx-2f875baa97faecca",children:"Corp Explain"}),"!"]}),(0,n.jsx)(m(),{id:"2f875baa97faecca",children:".hint.jsx-2f875baa97faecca{position:absolute;width:100%;text-align:center;top:30px;font-size:16px}.hint.jsx-2f875baa97faecca span.jsx-2f875baa97faecca{color:purple;font-weight:bold}"})]})}return t?(0,n.jsx)(TasksPage_TaxBlockPage,{}):(0,n.jsxs)("div",{className:"tasks__container scaler",children:[(0,n.jsx)($.Z,{...this.props}),(0,n.jsx)(scalers_NoMoreTasks,{config:this.props.config,query:this.props.query,user:this.props.user})]})}if(B.assignmentType===N.AssignmentType.AccountVerification)return O?(0,n.jsx)(AccountVerification_AccountVerificationTask,{user:this.props.user,contents:{templates:B.templates||[],description:'<p>In order to continue working on Outlier, please complete the following account verification steps!</p><p><br></p><p>To verify your account, click on "Complete Verification". After clicking the button, a popup will appear. Follow the instructions in the popup to complete your verification.</p>',source:N.VerificationSource.Task,enableLinkedInVerification:!1,isLinkedInVerificationRequired:!1},handleContinue:this.nextTask}):(0,n.jsx)(tj,{user:this.props.user,contents:{enableFraudCheck:!0,enablePersonaGoldCheck:!1,templates:B.templates||[],source:N.VerificationSource.Task,enableLinkedInVerification:!1,isLinkedInVerificationRequired:!1},handleContinue:this.nextTask});if(B.assignmentType===N.AssignmentType.Course){let e=!!(null===(p=this.state.instructionV2Res)||void 0===p?void 0:p.quiz);if(e&&this.shouldRenderInstructions)return this.renderInstructions(B);if("native"===B.courseType)return(0,n.jsx)(e3.CoursesPageComponent,{user:this.props.user,courseId:null!==(u=B._id)&&void 0!==u?u:""});if(O){let e=new tF.S;return(0,n.jsx)(tD.aH,{client:e,children:(0,n.jsx)(e8.Z,{...this.props,isInQueue:!0,courseId:g().get(this.props,["training","course","_id"],null),returnToTasking:this.handleCompleteSupplementalCourse})})}return(0,n.jsx)(e2.Z,{...this.props,handleCompleteSupplementalCourse:this.handleCompleteSupplementalCourse,isInQueue:!0,courseId:g().get(this.props,["training","course","_id"],null)})}if((null==B?void 0:B.redirectLink)&&(null==B?void 0:B.assignmentType)===N.AssignmentType.Redirect)return window.open(B.redirectLink,"_self"),(0,n.jsx)(n.Fragment,{});this.needsRefresh(B)&&window.location.reload();let U=null===(e=g().get(B.project,"_id",B.project))||void 0===e?void 0:e.toString();if(this.state.isExitingTask)return(0,n.jsx)("div",{className:"scaleui outlier-theme scale-tailwind",children:(0,n.jsx)(IncompleteTaskAttempt,{payText:null===(x=this.props)||void 0===x?void 0:null===(h=x.precalculatedPay)||void 0===h?void 0:h.payText,actions:this.props.actions,query:this.props.query,projectId:U,isInQATeam:(null===(f=this.props.userFromGetInitialProps)||void 0===f?void 0:f.qaTeamId)!==void 0,setIsExitingTask:e=>this.setState({isExitingTask:e}),incompleteAttempt:null===(k=this.props)||void 0===k?void 0:null===(b=k.precalculatedPay)||void 0===b?void 0:b.incompleteAttempt,flaggedForFraud:null===(j=this.props)||void 0===j?void 0:null===(y=j.precalculatedPay)||void 0===y?void 0:y.flaggedForFraud})});if(!this.isValidClaim(B)&&!this.state.isExitingTask)return(0,n.jsx)("div",{className:"scaleui outlier-theme scale-tailwind",children:(0,n.jsx)(InvalidClaim,{})});let H=this.props.userFromGetInitialProps&&this.props.userFromGetInitialProps.accountRole===N.TeamRole.Admin,V=!g().isEmpty(null===(t=this.props.userFromGetInitialProps)||void 0===t?void 0:t.trainerProject),q=this.props.userFromGetInitialProps&&this.props.userFromGetInitialProps._id,Q=this.props.userFromGetInitialProps&&this.props.userFromGetInitialProps.flags;if(!this.props.isCustomerReviewMode&&(null===(s=B.params)||void 0===s?void 0:s.internal_instruction)&&(B.instruction=B.params.internal_instruction),!M&&this.props.forceFixAssignment&&this.props.previousInstructiveAttemptResponse&&this.props.previousInstructiveAttemptId===B.id&&(B.isReviewMode?g().set(B,"fixResponse",this.props.previousInstructiveAttemptResponse):g().set(B,"params.hypothesis",this.props.previousInstructiveAttemptResponse)),this.props.perProjectAccuracies){let e=(null===(w=this.props.perProjectAccuracies)||void 0===w?void 0:w[U])||{},t=B.isReviewMode?e.reviewScore:e.attemptScore;void 0!==t&&(B.recentAccuracy=t)}if(this.props.perProjectTopMistakes){let e=g().get(this.props.perProjectTopMistakes,U,{});g().isEmpty(e)||(B.topMistakes=e)}let W=B.bmInstructionList||B.instructionList;if(this.props.perProjectInstructionItemAccuracies&&W){let e=g().get(this.props.perProjectInstructionItemAccuracies,U,{});g().isEmpty(e)||(B.instructionItemAccuracies=e)}if(this.props.currentProjectAccuracyBucket&&W){let{currentProjectAccuracyBucket:e}=this.props;g().isEmpty(e)||(B.accuracyBucket=e)}if(this.props.perProjectInstructionItemLastSeen&&W){let e=g().get(this.props.perProjectInstructionItemLastSeen,U,{});g().isEmpty(e)||(B.instructionItemLastSeen=e)}if(this.props.perProjectPassRate){let e=(null===(T=this.props.perProjectPassRate)||void 0===T?void 0:T[U])||{},t=B.isReviewMode?e.reviewScore:e.attemptScore,s=B.isReviewMode?e.reviewNum:e.attemptNum;void 0!==t&&(B.passRate=t,B.passNum=s)}let G=!this.state.enableTimerForForceClaimedTask&&!!this.props.query.force,Y=this.getBonusInProgress(),K=this.props.fastSubmissionEnabled?2:void 0,X={...B,timerDisabled:G,assignment:this.props.assignmentJson,autosaveEnabled:!0,completedTaskCount:this.completedTaskCount,onSubmit:this.completeAttempt,onAttachmentLoadingFail:this.onAttachmentLoadingFail,onUserSkip:this.onUserSkip,onUserReport:this.onUserReport,onUserFlag:this.onUserFlag,nextTask:()=>this.nextTask(K),refreshClaim:this.refreshClaim,checkClaim:this.checkClaim,claim:this.props.claims[this.getIdForClaim(B)],loggedUserIsAdmin:H,loggedUserIsTrainer:V,loggedUserId:q,loggedUserFlags:Q,isReviewMode:this.isReviewMode,key:B._id,target:this.props.target,targetFrame:this.props.targetFrame,startFrame:this.props.startFrame,endFrame:this.props.endFrame,canEdit:!this.state.alerting&&!this.props.query.readOnly,bonus:Y,userFlags:this.props.user.featureFlags,postCompletionFeedback:this.props.postCompletionFeedback,tasker:this.props.user,projectConfig:null!==(C=null===(i=this.props.assignmentJson)||void 0===i?void 0:i.projectConfig)&&void 0!==C?C:B.projectConfig,isCalibration:this.props.isCalibration,instructionUrl:this.props.instructionUrl,isForced:null!==(S=this.props.query.forceClaim)&&void 0!==S?S:this.props.query.force,onExit:this.onExit,isExitingTask:this.state.isExitingTask};switch(B.type){case L.TaskType.AudioTranscription:z=(0,n.jsx)(e6.Gi,{...X});break;case L.TaskType.VideoAnnotation:case L.TaskType.VideoBoxAnnotation:case L.TaskType.VideoCuboidAnnotation:case L.TaskType.VideoPolygonAnnotation:z=(0,n.jsx)(e6.xe,{...X});break;case L.TaskType.VideoPlaybackAnnotation:z=(0,n.jsx)(e6.sE,{...X});break;case L.TaskType.ImageAnnotation:case L.TaskType.PointAnnotation:case L.TaskType.LineAnnotation:case L.TaskType.Annotation:case L.TaskType.CuboidAnnotation:case L.TaskType.PolygonAnnotation:z=(0,n.jsx)(e6.B,{...X});break;case L.TaskType.SegmentAnnotation:z=(0,n.jsx)(e6.lb,{...X,config:this.props.config});break;case L.TaskType.Categorization:if(X.params.binarySceneUrl)return(0,n.jsx)(FakeSensorFusionTask,{...X});if(X.params.taxonomies){if(this.isReviewMode){z=(0,n.jsx)(e6.OK,{...X});break}z=(0,n.jsx)(e6.kq,{...X});break}z=(0,n.jsx)(e6.LO,{...X});break;case L.TaskType.DataCollection:z=(0,n.jsx)(e6.kv,{...X});break;case L.TaskType.GenericDataCollection:z=(0,n.jsx)(e6.Vh,{...X});break;case L.TaskType.Transcription:z=(0,n.jsx)(e6._N,{...X});break;case L.TaskType.Comparison:z=(0,n.jsx)(e6.FS,{...X});break;case L.TaskType.NamedEntityRecognition:z=(0,n.jsx)(e6.bs,{...X});break;case L.TaskType.LidarAnnotation:case L.TaskType.LidarSegmentation:case L.TaskType.LidarStitching:case L.TaskType.MultiStage:case L.TaskType.SensorFusion:return(0,n.jsx)(FakeSensorFusionTask,{...X});case L.TaskType.VideoCaptioning:return(0,n.jsx)(FakeVideoCaptioningTask,{...X});case L.TaskType.DataCollectionV2:if((null==X?void 0:null===(R=X.params)||void 0===R?void 0:R.application)===L.GDCTaskApplication.LidarLite)return(0,n.jsx)(FakeSensorFusionTask,{...X});return(0,n.jsx)(DataCollectionV2Task,{...X});case L.TaskType.TextCollection:z=this.isReviewMode?(0,n.jsx)(e6.mY,{...X}):N.AMS_UI_ENABLED_PROJECTS.includes(this.getProjectIdFromAssignment(B)||"")?(0,n.jsx)(e6.fT,{...X}):B.user&&B.params.templateId&&N.TEMPLATE_UI_ENABLED_CUSTOMERS.includes(B.user)||"5d5b3a0fc99d660170d77ba5"===B.user?(0,n.jsx)(e6.WD,{...X}):(0,n.jsx)(e6.JO,{...X});break;case L.TaskType.DocumentTranscription:X.timerDisabled=!1,z=this.isReviewMode?(0,n.jsx)(e6.wN,{...X}):(0,n.jsx)(e6.QH,{...X});break;case L.TaskType.MultiModalTranscription:z=(0,n.jsx)(e6.MM,{...X});break;case L.TaskType.Chat:z=(0,n.jsx)(e6.JL,{...X,nextTaskOnExpiration:()=>this.nextTaskOnExpiration(K)});break;case L.TaskType.ChatExperimental:case L.TaskType.ChatV2:z=(0,n.jsx)(J.ag,{children:(0,n.jsx)(e6.bb,{...X,nextTaskOnExpiration:()=>this.nextTaskOnExpiration(K)})});break;case L.TaskType.MultiChat:z=(0,n.jsx)(e6.wo,{...X,nextTaskOnExpiration:()=>this.nextTaskOnExpiration(K)});break;case L.TaskType.SweAgent:z=(0,n.jsx)(e6.ib,{...X});break;case L.TaskType.FrontierData:z=(0,n.jsx)(e6.g2,{...X})}if(!z){this.state.isMarketplaceUser&&ti.Z.error("Marketplace User Incorrectly Directed to Tasking",{assignedProjectLayers:JSON.stringify(this.props.user.assignedProjectLayers),chosenProjectLayer:JSON.stringify(this.props.user.chosenProjectLayer),lastEQEvent:JSON.stringify(this.props.user.lastEmptyQueueEvent)});let e=new tF.S;return(0,n.jsx)(tD.aH,{client:e,children:(0,n.jsxs)("div",{className:"scaleui outlier-theme scale-tailwind h-full",children:[(0,n.jsx)("div",{className:"bg-neutral-0 shadow-sm",children:(0,n.jsx)(tA.Z,{simple:!0,showLogo:!0,showMenu:!0,user:this.props.user})}),(0,n.jsx)(NoTasksPage,{user:this.props.user})]})})}let{siblingFrameWindows:ee}=B.params;if(ee&&!this.props.query.index){let e=g().sortBy(g().entries(ee),e=>{let[,t]=e;return t.start}).map((e,t)=>{let[s,i]=e;return{_id:s,params:{index:t,frameWindow:i}}});return(0,n.jsx)(scalers_SubtaskSelector,{subtasks:e})}if(this.shouldRenderInstructions)return this.renderInstructions(B);let et=(0,n.jsx)(J.A9,{open:this.state.alerting,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(J.bZ,{severity:this.state.alertSeverity,action:this.state.alertAction&&(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)(J.Av,{disabled:this.state.loadingLockStatus,onClick:this.handleEditHereClick,children:this.state.alertAction}),this.state.loadingLockStatus&&(0,n.jsx)(J.D8,{color:"secondary",size:20,style:{position:"absolute",top:"50%",left:"50%",marginTop:-10,marginLeft:-10}})]}),children:this.state.alertMessage})}),es=(0,n.jsx)(eo.Z,{urls:(0,el.P)(this.props.assignments),limitPrefetchedImages:null===(r=this.props.assignmentJson)||void 0===r?void 0:null===(a=r.featureFlags)||void 0===a?void 0:a.limitPrefetchedImages,limitPrefetchedLargeImages:null===(l=this.props.assignmentJson)||void 0===l?void 0:null===(o=l.featureFlags)||void 0===o?void 0:o.limitPrefetchedLargeImages,disableTaskerPrefetchLimit:null===(d=this.props.assignmentJson)||void 0===d?void 0:null===(c=d.featureFlags)||void 0===c?void 0:c.disableTaskerPrefetchLimit});if(this.isReviewMode&&!(B.type===L.TaskType.Chat&&(B.reviewLevel===N.ReviewLevel.ReviewConsensus||B.reviewLevel===N.ReviewLevel.QIRAuditor))){let e=this.getProjectIdFromAssignment(B),t=this.props.user.accountRole===N.TeamRole.Admin,s=B.useMultiReplicaView?B.type===L.TaskType.ChatV2?this.completeReviewAllChildAssignments:this.completeReviewChildAssignment:this.completeReviewAssignment;this.state.fetchedCanReturnToQueue||this.state.fetchingCanReturnToQueue||this.setState({fetchingCanReturnToQueue:!0},()=>this.fetchCanReturnToQueue(B._id,e,B.type,B.user));let i=!!this.state.fetchedCanReturnToQueue&&this.state.isReturnToQueueDisabled,a=!!this.state.fetchedCanReturnToQueue&&this.state.canReturnToQueue,r=this.isEscalatedTaskMode,o=B.type===L.TaskType.AudioTranscription||r;if((0,N.isVideo)(B.type)&&Z.length>1)return(0,n.jsx)("div",{className:"tasks__container scaler",children:(0,n.jsxs)(ts.M5,{children:[es,(0,n.jsx)(e6.Gq,{isReviewMode:!0,timerDisabled:G,user:this.props.user,isUserAdmin:t,loggedUserId:q,fixable:this.isFixable(B),canReturnToQueue:a,skipDisabled:this.state.skipDisabled,isReturnToQueueDisabled:i,claim:this.props.claims[this.getIdForClaim(B)],onSubmit:this.completeTaskLevelVideoReview,onUserSkip:this.onUserSkip,onUserSkipBatch:this.onUserSkipReviewBatch,nextTask:this.nextTask,userFlags:this.props.user.featureFlags,assignments:Z,type:B.type,projectId:B.project,refreshClaim:this.refreshClaim,checkClaim:this.checkClaim})]})});if(B.type===L.TaskType.Chat||B.type===L.TaskType.MultiChat){let e=B.type===L.TaskType.Chat?e6.JL:e6.wo;return(0,n.jsx)("div",{className:"tasks__container scaler",children:(0,n.jsx)(ts.M5,{children:(0,n.jsx)(e,{...X,nextTaskOnExpiration:()=>this.nextTaskOnExpiration(K),onReviewSubmit:s,canReturnToQueue:a,isReturnToQueueDisabled:i})})})}return B.type===L.TaskType.ChatExperimental||B.type===L.TaskType.ChatV2?(0,n.jsx)("div",{className:"tasks__container scaler",children:(0,n.jsx)(e6.bb,{...X,nextTaskOnExpiration:()=>this.nextTaskOnExpiration(K),onReviewSubmit:s,canReturnToQueue:a,isReturnToQueueDisabled:i})}):B.type===L.TaskType.SweAgent?(0,n.jsx)("div",{className:"tasks__container scaler",children:(0,n.jsx)(e6.ib,{...X,onReviewSubmit:s,canReturnToQueue:a,isReturnToQueueDisabled:i})}):B.type===L.TaskType.FrontierData?(0,n.jsx)("div",{className:"tasks__container scaler",children:(0,n.jsx)(e6.g2,{...X,onReviewSubmit:s,canReturnToQueue:a,isReturnToQueueDisabled:i})}):B.type===L.TaskType.VideoAnnotation||B.type===L.TaskType.VideoBoxAnnotation||B.type===L.TaskType.VideoCuboidAnnotation||B.type===L.TaskType.VideoPolygonAnnotation?(0,n.jsx)("div",{className:"tasks__container scaler",children:(0,n.jsxs)(ts.M5,{children:[es,(0,n.jsx)(e6.xe,{isReviewMode:!0,isFeedback:null===(I=this.props.assignmentJson)||void 0===I?void 0:I.isFeedback,timerDisabled:G,assignment:this.props.assignmentJson,instructions:B.instruction,user:this.props.user,config:this.props.config,isUserAdmin:t,query:this.props.query,loggedUserId:q,fixable:this.isFixable(B),skipDisabled:this.state.skipDisabled,canReturnToQueue:a,isReturnToQueueDisabled:i,claim:this.props.claims[this.getIdForClaim(B)],onSubmit:s,onUserSkip:this.onUserSkip,onUserSkipBatch:this.onUserSkipReviewBatch,nextTask:this.nextTask,userFlags:this.props.user.featureFlags,refreshClaim:this.refreshClaim,checkClaim:this.checkClaim,bonus:Y,...B})]})}):B.type===L.TaskType.ImageAnnotation||B.type===L.TaskType.PointAnnotation||B.type===L.TaskType.LineAnnotation||B.type===L.TaskType.Annotation||B.type===L.TaskType.CuboidAnnotation||B.type===L.TaskType.PolygonAnnotation?(0,n.jsx)("div",{className:"tasks__container scaler",children:(0,n.jsxs)(ts.M5,{children:[es,(0,n.jsx)(e6.B,{assignment:this.props.assignmentJson,isReviewMode:!0,isFeedback:null===(_=this.props.assignmentJson)||void 0===_?void 0:_.isFeedback,timerDisabled:G,instructions:B.instruction,user:this.props.user,config:this.props.config,isUserAdmin:t,query:this.props.query,loggedUserId:q,fixable:this.isFixable(B),skipDisabled:this.state.skipDisabled,canReturnToQueue:a,isReturnToQueueDisabled:i,claim:this.props.claims[this.getIdForClaim(B)],onSubmit:s,onUserSkip:this.onUserSkip,onUserSkipBatch:this.onUserSkipReviewBatch,nextTask:this.nextTask,userFlags:this.props.user.featureFlags,refreshClaim:this.refreshClaim,checkClaim:this.checkClaim,bonus:Y,...B})]})}):B.type===L.TaskType.SegmentAnnotation?(0,n.jsx)("div",{className:"tasks__container scaler",children:(0,n.jsxs)(e6.lb,{isReviewMode:!0,isFeedback:null===(E=this.props.assignmentJson)||void 0===E?void 0:E.isFeedback,timerDisabled:G,instructions:B.instruction,user:this.props.user,isUserAdmin:t,query:this.props.query,loggedUserId:q,assignment:{...this.props.assignmentJson,...B,taskerWorkflowDefinition:null===(P=this.props.assignmentJson)||void 0===P?void 0:P.taskerWorkflowDefinition,initialInlineComments:null===(F=this.props.assignmentJson)||void 0===F?void 0:F.initialInlineComments,featureFlags:null===(D=this.props.assignmentJson)||void 0===D?void 0:D.featureFlags},claim:this.props.claims[this.getIdForClaim(B)],onSubmit:s,onUserSkip:this.onUserSkip,onUserSkipBatch:this.onUserSkipReviewBatch,fixable:this.isFixable(B),makingChanges:o,hidePreviousResponse:r,skipDisabled:this.state.skipDisabled,canReturnToQueue:a,isReturnToQueueDisabled:i,bonus:Y,nextTask:this.nextTask,actions:this.props.actions,canEdit:!this.state.alerting&&!this.props.query.readOnly,userFlags:this.props.user.featureFlags,refreshClaim:this.refreshClaim,checkClaim:this.checkClaim,...B,children:[es,et]})}):B.type===L.TaskType.VideoPlaybackAnnotation?(0,n.jsx)("div",{className:"tasks__container scaler",children:(0,n.jsx)(ts.M5,{children:(0,n.jsx)(e6.sE,{isReviewMode:!0,timerDisabled:G,assignment:this.props.assignmentJson,instructions:B.instruction,user:this.props.user,config:this.props.config,isUserAdmin:t,query:this.props.query,loggedUserId:q,fixable:this.isFixable(B),skipDisabled:this.state.skipDisabled,canReturnToQueue:a,isReturnToQueueDisabled:i,claim:this.props.claims[this.getIdForClaim(B)],onSubmit:s,onUserSkip:this.onUserSkip,onUserSkipBatch:this.onUserSkipReviewBatch,nextTask:this.nextTask,refreshClaim:this.refreshClaim,checkClaim:this.checkClaim,bonus:Y,...B})})}):(0,n.jsxs)(ReviewAssignment,{instructions:B.instruction,user:this.props.user,isUserAdmin:t,query:this.props.query,assignment:B,claim:this.props.claims[this.getIdForClaim(B)],submit:s,onUserSkip:this.onUserSkip,onUserSkipBatch:this.onUserSkipReviewBatch,onUserFlag:this.onUserFlag,fixable:this.isFixable(B),makingChanges:o,hidePreviousResponse:r,skipDisabled:this.state.skipDisabled,canReturnToQueue:a,isReturnToQueueDisabled:i,bonus:Y,taskPage:z,nextTask:this.nextTask,actions:this.props.actions,canEdit:!this.state.alerting&&!this.props.query.readOnly,postCompletionFeedback:this.props.postCompletionFeedback,isInstructionTask:g().get(B,"isInstructionTask",!1),isEdgeCaseTask:g().get(B,"isEdgeCaseTask",!1),projectConfig:null===(A=this.props.assignmentJson)||void 0===A?void 0:A.projectConfig,children:[es,et]},B._id)}return(0,n.jsx)("div",{className:"tasks__container scaler",children:(0,n.jsxs)(ts.M5,{children:[es,z,et]})})}constructor(...e){var t;super(...e),t=this,this.completedTaskCount=0,this.completedWork={},this.currentlyShowingBonusId=null,this.state={alerting:!1,skipDisabled:!0,canReturnToQueue:!1,enableTimerForForceClaimedTask:!1,completedEditLockCheck:!1,displayInstructiveModal:!1,fetchedCanReturnToQueue:!1,fetchingCanReturnToQueue:!1,isReturnToQueueDisabled:!1,lastAssignments:[],lastInstructionHash:null,loadingLockStatus:!1,instructionV2Res:void 0,isFetching:!1,isNewAssignment:!1,isExitingTask:!1,incompleteAttemptId:void 0,flaggedForFraud:void 0},this.boundLogEventActionUnload=void 0,this.boundLogEventActionVisibilityChange=void 0,this.backToQueue=()=>{var e,t;if(ti.Z.log("Called backToQueue"),this.state.feedback&&this.state.feedback.trainingScenario.benchmark.isConditionallyInstructiveBenchmark&&!this.state.feedback.benchmarkScoreBelowDisableThresholdConditionalBM){let t=null===(e=this.state.feedback)||void 0===e?void 0:e.taskType;this.setState({feedback:void 0},()=>{this.finishAttempt(t)})}else if(this.props.forceFixAssignment)this.setState({feedback:void 0});else if(g().get(this.state.feedback,"isReview"))this.setState({feedback:void 0});else{let e=null===(t=this.state.feedback)||void 0===t?void 0:t.taskType;this.setState({feedback:void 0},()=>{this.finishAttempt(e)})}},this.setElectronContext=(e,t)=>{if(isElectron()){let s=isElectron?window.electronBridge:null;s.setCurrentUser({id:t.id,email:t.email}),e[0]&&s.setCurrentTaskId(e[0].id)}else{let s=e.some(e=>e.user===Z.default.Bee&&[N.AccountType.Worker,N.AccountType.Expert].includes(t.accountType));s&&"production"!==tz.env.ENV&&f().push("/download")}},this.windowLocationReload=()=>{window.location.reload()},this.getIdForClaim=e=>(0,e5.isLegacyReviewAssignment)(e)?e.attemptId:e._id,this.getProjectIdFromAssignment=e=>e.project?e.project._id?e.project._id.toString():e.project:null,this.getBonusInProgress=()=>{let e=this.props.assignments[0];if(!e||!g().includes(N.bonusProgressBarEnabledTaskTypes,e.type||e.taskType))return;let t=this.getProjectIdFromAssignment(e),s=g().filter(this.props.batch.bonuses,s=>s.status===N.BonusStatus.Pending&&s.enableCompletionBeforeWindowEnd&&g().includes(N.bonusProgressBarEnabledRules,s.bonusRule)&&equalIfExists(s.project,t)&&equalIfExists(s.taskType,e.type)&&equalIfExists(s.customer,e.taskCustomer)&&g().isNumber(e.reviewLevel)&&(g().isNil(s.minReviewLevel)||e.reviewLevel>=s.minReviewLevel)&&(g().isNil(s.maxReviewLevel)||e.reviewLevel<=s.maxReviewLevel));return g().minBy(s,er.e)},this.nextTask=async e=>{let t=this.getCurrentAssignments(),s=t[0],i=this.getProjectIdFromAssignment(s),n=await (0,D.V3)({feature:"experimental-task-speed-performance",querystring:v.stringify({projectId:i})}),nextTaskHandler=()=>{var t;return this.props.actions.nextTask(this.props.query,(null===(t=this.props.userFromGetInitialProps)||void 0===t?void 0:t.qaTeamId)!==void 0,e)},a=(null==s?void 0:s.type)&&[L.TaskType.ChatExperimental,L.TaskType.ChatV2].includes(s.type)&&!n,r=(null==s?void 0:s.type)===L.TaskType.Chat;this.props.isInstructiveBM?nextTaskHandler():r||a?this.props.actions.awaitConfirmationForNextTask():nextTaskHandler()},this.nextTaskOnExpiration=async e=>{var t;this.props.actions.nextTask(this.props.query,(null===(t=this.props.userFromGetInitialProps)||void 0===t?void 0:t.qaTeamId)!==void 0,e)},this.setLastInstructionHash=async e=>{let t=this.state.lastAssignments[0],s=this.state.lastAssignments[1];e!==this.state.lastInstructionHash&&!this.props.target&&t&&s&&this.getProjectIdFromAssignment(t)===this.getProjectIdFromAssignment(s)&&await tn.Kz(ta.Event.InstructionsPageDisplayed,{oldInstructionHash:this.state.lastInstructionHash||"null_hash",newInstructionHash:e,oldAssignmentId:s.id||"ERR_no_last_assignment_id",newAssignmentId:t.id||"ERR_no_current_assignment_id"}),this.setState({lastInstructionHash:e})},this.acquireAnnotationLock=async e=>ti.Z.log("Edit lock feature disabled - skipping check"),this.handleInstructionsClose=()=>{let[e]=this.props.assignments;if(N.EDIT_LOCK_ENABLED_TYPES.includes(e.type))return ti.Z.log("Instructions closed, requesting edit lock"),this.acquireAnnotationLock(e)},this.handleEditHereClick=()=>{let[e]=this.props.assignments;if(N.EDIT_LOCK_ENABLED_TYPES.includes(e.type))return ti.Z.log("User saw alert and is requesting edit lock"),this.acquireAnnotationLock(e)},this.setEditLockAlert=async()=>ti.Z.log("Edit lock feature disabled - skipping setEditLockAlert"),this.onAttachmentLoadingFail=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"(TODO: pass down error message from task component)";k().error("Failed to load the attachment for this task. Please refresh the page – if this continues happening, skip the task and report that it is not loading correctly.",{timeout:"none"});let{assignments:s,query:i,user:n}=t.props,[{_id:a,attemptId:r}]=s;ti.Z.error("Failed to load attachment: ".concat(e.message||e),{assignmentId:a,attemptId:r,query:i,userId:n._id})},this.onUserFlag=(e,t)=>{this.props.actions.flagTask(this.props.query,this.props.assignments[0],e,t)},this.onUserReport=(e,t)=>{this.props.actions.reportTask(this.props.query,this.props.assignments[0],e,t)},this.onUserSkip=async(e,t)=>{let s=this.getCurrentAssignments(),i=s[0],n=this.getProjectIdFromAssignment(i),a=await (0,D.V3)({feature:"experimental-task-speed-performance",querystring:v.stringify({projectId:n})}),skipTaskHandler=()=>this.props.actions.skipTask(this.props.query,this.props.assignments[0],e,t);return this.props.isInstructiveBM?skipTaskHandler():((null==i?void 0:i.type)!==L.TaskType.ChatExperimental&&(null==i?void 0:i.type)!==L.TaskType.ChatV2||a)&&(null==i?void 0:i.type)!==L.TaskType.Chat?skipTaskHandler():this.props.actions.awaitConfirmationForSkipTask(this.props.query,this.props.assignments[0],e,t)},this.onUserSkipReviewBatch=(e,t)=>{this.props.actions.skipBatch(this.props.query,this.props.assignments[0].batch,e,t)},this.refreshClaim=async e=>{(this.props.user.isCorporateUser||this.props.user.isRemoAdmin)&&(this.props.query.force||this.props.assignments[0].type===L.TaskType.LidarAnnotation&&!this.isReviewMode)||this.props.actions.refreshAssignmentClaims({stages:g().flatten(g().map(g().filter(this.props.assignments,e=>e.assignmentType===N.AssignmentType.PipelineStage),e=>[e._id].concat(e.childIds?g().filter(e.childIds,e=>!!e):[]).map(e=>({id:e})))),attempts:g().flatten(g().map(g().filter(this.props.assignments,e=>(0,e5.isLegacyReviewAssignment)(e)),e=>[e.attemptId.toString()].concat(e.childIds?g().filter(e.childIds,e=>!!e):[]).map(e=>({id:e})))),tasks:g().flatten(g().map(g().filter(this.props.assignments,e=>!(0,e5.isLegacyReviewAssignment)(e)&&e.assignmentType!==N.AssignmentType.PipelineStage),e=>[e._id].concat(e.childIds?g().filter(e.childIds,e=>!!e):[]).map(e=>({id:e})))),elapsedTime:e,force:!!this.props.query.force})},this.checkClaim=async e=>{var t,s,i,n,a,r;if(this.props.user.isCorporateUser&&(this.props.query.force||this.props.assignments[0].type===L.TaskType.LidarAnnotation&&!this.isReviewMode))return;let o=this.props.assignments[0];if((0,e5.isLegacyReviewAssignment)(o)){this.props.actions.checkAssignmentClaim({attempt:{id:o.attemptId},elapsedTime:e,force:!!this.props.query.force,multiReplicaIndex:o.childIds?0:void 0});for(let i=0;i<(null!==(s=null===(t=o.childIds)||void 0===t?void 0:t.length)&&void 0!==s?s:0);i++)o.childIds[i]&&this.props.actions.checkAssignmentClaim({attempt:{id:o.childIds[i]},elapsedTime:e,force:!!this.props.query.force,multiReplicaIndex:i})}else if(o.assignmentType===N.AssignmentType.PipelineStage){this.props.actions.checkAssignmentClaim({stage:{id:o._id},elapsedTime:e,force:!!this.props.query.force});for(let t=0;t<(null!==(n=null===(i=o.childIds)||void 0===i?void 0:i.length)&&void 0!==n?n:0);t++)o.childIds[t]&&this.props.actions.checkAssignmentClaim({stage:{id:o.childIds[t]},elapsedTime:e,force:!!this.props.query.force,multiReplicaIndex:t})}else{this.props.actions.checkAssignmentClaim({task:{id:o._id},elapsedTime:e,force:!!this.props.query.force});for(let t=0;t<(null!==(r=null===(a=o.childIds)||void 0===a?void 0:a.length)&&void 0!==r?r:0);t++)o.childIds[t]&&this.props.actions.checkAssignmentClaim({task:{id:o.childIds[t]},elapsedTime:e,force:!!this.props.query.force,multiReplicaIndex:t})}},this.handleCompleteSupplementalCourse=()=>{this.props.actions.completeSupplementalCourse(this.props.query)},this.onBonusModalClick=e=>{this.props.actions.displayNewBonus(e)},this.completeInstructiveTask=()=>{this.setState({displayInstructiveModal:!1})},this.completeAttemptCore=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.props.fastSubmissionEnabled)return t.props.actions.completeAttempt(t.props.query,e,s);{let n={...s,fast:!0},a=await t.props.actions.completeAttempt(t.props.query,e,n);if(a.needsFullSubmission){var i;t.props.actions.completeAttempt(t.props.query,e,{...s,subtaskVersion:(+(null!==(i=s.subtaskVersion)&&void 0!==i?i:"0")+1).toString()})}return a}},this.completeAttempt=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n="".concat(s.task_id,":").concat(s.subtaskVersion);if(ti.Z.log("Called completeAttempt",{type:e,taskId:null==s?void 0:s.task_id}),!t.isDoubleSubmit(n))try{var a,r;let n=await (null===(a=(r=t.props).executeRecaptchaV3)||void 0===a?void 0:a.call(r));n&&(s={...s,[tl.pr]:n}),A.ZP.isMobileUserAgent(window.navigator.userAgent)&&(s.completedOnMobile=!0);let o=await t.completeAttemptCore(e,s);t.completedTaskCount++,(null==o?void 0:o.trainingAttempt)?t.setState({feedback:{...o.trainingAttempt,closestExpectedResponse:o.closestExpectedResponse,instructionReminder:o.instructionReminder}}):t.setState({feedback:void 0},()=>{t.finishAttempt(e,i)})}catch(i){let e=t.getCurrentAssignments(),s=e[0];k().error((0,ex.V)(i,s.id),{timeout:"none"})}},this.completeReviewAllChildAssignments=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g().noop,i=t.getCurrentAssignments()[0],{taskIds:n,nodeIds:a,attemptVersions:r}=await (0,tE.L7)(i.attemptId,i.user);for(let i=0;i<n.length;i++)await t.completeReviewChildAssignment({...e,nodeId:a[i],taskId:n[i],attemptVersion:r[i],reviewChanges:{...e.reviewChanges,...e.reviewChanges.replicas[i].response},trueReviewOutcome:e.reviewChanges.replicas[i].taskReviewStatus},s)},this.completeReviewChildAssignment=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g().noop,i={...t.props.batch.assignments[0],attemptId:e.nodeId,attemptVersion:e.attemptVersion},n="".concat(i.attemptId,":").concat(i.attemptVersion);if(t.isDoubleSubmit(n))return;ti.Z.log("Complete Review Assignment for: ".concat(i.attemptId," with TaskFeedback: ").concat(JSON.stringify(e.taskFeedback)));let a=await t.props.actions.completeReviewAssignment({...t.props.query,taskId:e.taskId},i,e,s);if(null==a?void 0:a.trainingAttempt)return t.setState({feedback:a.trainingAttempt})},this.completeReviewAssignment=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g().noop,[i]=t.props.batch.assignments,n="".concat(i.attemptId,":").concat(i.attemptVersion);if(t.isDoubleSubmit(n))return;ti.Z.log("Complete Review Assignment for: ".concat(i.attemptId," with TaskFeedback: ").concat(JSON.stringify(e.taskFeedback)));let a=await t.props.actions.completeReviewAssignment(t.props.query,i,e,s);if(null==a?void 0:a.trainingAttempt)return t.setState({feedback:a.trainingAttempt});t.completedTaskCount++},this.onExit=async()=>{this.setState({isFetching:!0}),await this.props.actions.onExit(this.props.query,this.props.assignments),this.setState({isExitingTask:!0,isFetching:!1})},this.completeTaskLevelVideoReview=async e=>{let t=this.getCurrentAssignments();await this.props.actions.completeReviewAssignments(this.props.query,t,e),this.completedTaskCount++},this.getFeedbackComponent=(e,t)=>e===L.TaskType.NamedEntityRecognition?(0,n.jsx)(ei.Z,{...t}):e===L.TaskType.TextCollection?(0,n.jsx)(tr.Z,{...t}):e===L.TaskType.DocumentTranscription?(0,n.jsx)(to.Z,{...t}):e===L.TaskType.Chat||e===L.TaskType.ChatExperimental||e===L.TaskType.ChatV2?(0,n.jsx)(es.Z,{...t}):(0,n.jsx)(et.Z,{...t})}};function FakeSensorFusionTask(e){if(a.useEffect(()=>{let t="",s=Object.fromEntries(new URLSearchParams(window.location.search).entries());e.task_id&&"subtask"!==e.assignmentType?t=(0,X.vI)({...s,taskId:e.task_id}):e.id&&(t=(0,X.vI)({...s,sceneId:e.id})),t&&(window.location.href=t)},[]),e.currentAuditWorkId){let t=Object.fromEntries(new URLSearchParams(window.location.search).entries()),s=(0,X.vI)({...t,sceneId:e.currentAuditWorkId});return(0,n.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:"Open work in a new tab"})}return(0,n.jsx)("div",{children:"Loading lidar lite..."})}function FakeVideoCaptioningTask(e){return a.useEffect(()=>{let t=Object.fromEntries(new URLSearchParams(window.location.search).entries()),s=(0,X.PS)({...t,assignmentId:e.id});s&&(window.location.href=s)},[]),(0,n.jsx)("div",{children:"Loading video captioning tool..."})}function DataCollectionV2Task(e){let t="",s=Object.fromEntries(new URLSearchParams(window.location.search).entries());s.taskId&&(t=(0,X.pc)({taskId:s.taskId,assignmentId:e.id}));let i=e.taskInfo.taskId;return!t&&i&&(t=(0,X.pc)({taskId:i,assignmentId:e.id})),t&&(window.location.href=t),(0,n.jsx)("div",{children:"Loading data collection v2 tool..."})}var tZ=s(232463),tB=s(644470);let tM=(0,tc.ZL)({container:{height:"100%",display:"flex",flexDirection:"column"},top:e=>{let{topHeight:t}=e;return{height:t}},centerRow:{display:"flex",flex:1},left:e=>{let{leftWidth:t}=e;return{width:t}},main:{flex:1},right:e=>{let{rightWidth:t}=e;return{width:t}}});var layouts_ToolLayout=e=>{var t,s,i;let a=tM({topHeight:null!==(t=e.topHeight)&&void 0!==t?t:56,leftWidth:null!==(s=e.leftWidth)&&void 0!==s?s:56,rightWidth:null!==(i=e.rightWidth)&&void 0!==i?i:360});return(0,n.jsxs)("div",{className:a.container,children:[(0,n.jsx)("div",{className:a.top,children:e.top}),(0,n.jsxs)("div",{className:a.centerRow,children:[(0,n.jsx)("div",{className:a.left,children:e.left}),(0,n.jsx)("div",{className:a.main,children:e.main}),(0,n.jsx)("div",{className:a.right,children:e.right})]}),(0,n.jsx)("div",{})]})},tO=s(138944),logos_ScaleLogo=()=>(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M12 24L0 12H12V24Z",fill:"#DD45D3"}),(0,n.jsx)("path",{d:"M24 24L0 0H24V24Z",fill:"#943CFF"}),(0,n.jsx)("path",{d:"M6 24L0 18H6V24Z",fill:"#FD9D52"})]}),tU=s(365281);let tH=(0,tc.ZL)({container:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#943CFF19","&.remotasks":{background:"#29CD9C26"}}});var chrome_ChromeLogo=e=>{let t=tH();return(0,n.jsx)("div",{className:(0,tO.default)(t.container,{remotasks:e.remotasks}),children:e.remotasks?(0,n.jsx)(tU.Z,{}):(0,n.jsx)(logos_ScaleLogo,{})})},tV=s(792739);let tq=(0,tc.ZL)({statusBarItem:{fontSize:"11px",lineHeight:"16px",margin:"0 8px",display:"flex",justifyContent:"center",flexDirection:"column",padding:"4px 8px",borderRadius:8,cursor:"pointer","&:hover":{background:"var(--color-RemoGray05)"}},name:{fontWeight:500,display:"flex",alignItems:"center"},icon:{marginLeft:5.35,color:"var(--color-RemoGray50)"},value:{marginTop:4,color:"black",maxWidth:200,overflow:"auto"}});var chrome_StatusBarItem=e=>{let t=tq();return(0,n.jsxs)("div",{className:t.statusBarItem,children:[(0,n.jsxs)("div",{className:t.name,children:[e.name,(0,n.jsxs)("span",{className:t.icon,children:[e.icon,!e.icon&&(0,n.jsx)(tV.FontAwesomeIcon,{icon:"info-circle"})]})]}),(0,n.jsx)("div",{className:t.value,children:e.value})]})},tQ=s(832561),tW=s(105633);let tG=(0,tc.ZL)({container:{height:"100%",display:"flex"},logo:{width:56},statusBar:{display:"flex",alignItems:"center"},actionButtons:{marginLeft:"auto",display:"flex",alignItems:"center","& > *":{marginRight:16}}});var TaskerAssignment_TaskerAssignmentTop=e=>{var t,s,i;let{assignmentJson:a,assignmentActions:r}=e,o=tG(),l=g().compact([{name:"Project",value:a.projectName},{name:"Task ID",value:(0,tQ.Z)(a)?a.subtaskId:a.assignmentId},a.isReview&&{name:"Review ID",value:a.assignmentId}]),c=g().compact([{variant:"text",type:"tertiary",name:"Skip",onClick:null==r?void 0:r.skip},a.isReview&&{variant:"contained",type:"warning",name:"Fix",onClick:null==r?void 0:r.makeChanges},a.isReview&&{variant:"contained",type:"success",name:"Accept",onClick:null==r?void 0:r.accept},!a.isReview&&{variant:"contained",type:"success",name:"Submit",onClick:null==r?void 0:r.submit}]),d=g().compact([a.isReview&&{name:"Send back to queue",onClick:null==r?void 0:r.reject,style:{color:"var(--color-RemoRed)"}},{name:"Report issue",onClick:null===(t=e.interfaceManager)||void 0===t?void 0:t.toggleShowingIssueReporter,divider:!0},{name:"View instructions",onClick:null===(s=e.interfaceManager)||void 0===s?void 0:s.toggleShowingInstructions},{name:"View shortcuts",onClick:null===(i=e.interfaceManager)||void 0===i?void 0:i.toggleShowingShortcuts}]);return(0,n.jsxs)("div",{className:o.container,children:[(0,n.jsx)("div",{className:o.logo,children:(0,n.jsx)(chrome_ChromeLogo,{remotasks:!0})}),(0,n.jsx)("div",{className:o.statusBar,children:l.map(e=>(0,n.jsx)(chrome_StatusBarItem,{name:e.name,value:e.value},e.name))}),(0,n.jsxs)("div",{className:o.actionButtons,children:[c.map(e=>(0,n.jsx)(J.Yd,{onClick:e.onClick,type:e.type,variant:e.variant,children:e.name},e.name)),(0,n.jsx)(J.Qy,{children:d.map(e=>(0,n.jsx)(tW.Z,{style:e.style,divider:!!e.divider,onClick:e.onClick,children:e.name},e.name))})]})]})},TaskerAssignment_TaskerAssignment=e=>{var t;if((null===(t=e.assignmentJson)||void 0===t?void 0:t.type)!=="imageannotation")throw Error("Only imageannotation is supported");return(0,n.jsx)(layouts_ToolLayout,{top:(0,n.jsx)(TaskerAssignment_TaskerAssignmentTop,{assignmentJson:e.assignmentJson})})},tJ=s(170517),tY=s(451674),tK=s(279220),t$=s(115125),tX=s(561924),t0=s(469906),t1=s(886917),t5=s(335855),hooks_useSupplementedQueueAssignment=e=>{var t,s,i;let[n,r]=(0,a.useState)(void 0),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(void 0),[p,u]=(0,a.useState)(void 0),[m,h]=(0,a.useState)(void 0),[x,f]=(0,a.useState)(),[b,k]=(0,a.useState)(),[v,y]=(0,a.useState)(void 0),j={projectId:e?e.projectId:void 0,subtaskId:e?(0,tQ.Z)(e)?e.subtaskId:e.assignmentId:void 0};(0,tK.Z)(async()=>{if(e&&(0,t0.o)(e)){let e="internal/namedentityrecognition/project/".concat(j.projectId),t=await (0,R.ZP)(null,e);d(t.showSidebar)}},[j.projectId]),(0,tK.Z)(async()=>{if((null==e?void 0:e.assignmentId)&&(e.type===L.TaskType.ChatExperimental||e.type===L.TaskType.ChatV2)){let t="internal/chatv2/".concat(e.assignmentId,"/disableRegen"),s=await (0,R.ZP)(null,t);y(s.disableRegen)}},[null==e?void 0:e.assignmentId]),(0,tK.Z)(async()=>{if(!j.subtaskId)return;let e="internal/guided_workflow/subtask/".concat(j.subtaskId),t=await (0,R.ZP)(null,e);t&&t.enabled&&r(t.workflow)},[j.projectId,j.subtaskId]),(0,tK.Z)(async()=>{if(!j.subtaskId)return;let e="internal/multi_source_data/subtask/".concat(j.subtaskId),t=await (0,R.ZP)(null,e);t&&l(t.multiSourceMetadata)},[j.projectId,j.subtaskId]),(0,tK.Z)(async()=>{if(!j.projectId)return;let e=await (0,R.ZP)(null,"internal/ontology/".concat(j.projectId));e&&(e.ontologyHistory&&e.ontologyHistory.length>0&&f(e.ontologyHistory),k(e.ontologyInstructions))},[j.projectId]),(0,tK.Z)(async()=>{if(!j.subtaskId)return;let e="internal/initialMessage/".concat(j.subtaskId),t=await (0,R.ZP)(null,e);u(t)},[j.subtaskId]),(0,tK.Z)(async()=>{if(!j.projectId)return;let e="internal/spotter/audit_feedback?projectId=".concat(j.projectId),t=await (0,R.ZP)(null,e);h(t.spotterFeedback)},[j.projectId]);let w=(0,a.useContext)(t$.ZP),T=!g().includes(N.twoDTypes,null==e?void 0:e.type)&&(null==e?void 0:e.type)!==L.TaskType.DocumentTranscription&&(null==e?void 0:e.type)!==L.TaskType.TextCollection&&(null==e?void 0:e.type)!==L.TaskType.Chat&&(null==e?void 0:e.type)!==L.TaskType.ChatExperimental&&(null==e?void 0:e.type)!==L.TaskType.ChatV2,C=(0,_.o5)("can-leave-inline-comments",{},{shortCircuit:T})||(null==e?void 0:e.isScaleStudio),isAtLeastReviewLevel=(e,t)=>-1===e||t&&(0,tQ.Z)(t)&&t.reviewLevel>=e||t&&(0,tQ.Z)(t)&&e===N.ReviewLevel.QIRLeadAuditor&&t.reviewLevel===N.ReviewLevel.QIRLeadAuditor||t&&(0,tQ.Z)(t)&&e===N.ReviewLevel.QIRAuditor&&(t.reviewLevel===N.ReviewLevel.QIRAuditor||t.reviewLevel===N.ReviewLevel.QIRLeadAuditor),S=null==e?void 0:e.projectConfig,A=!g().isNil(S)||T,I=(0,t1.h)("internal/config/".concat(null==e?void 0:e.projectId),{shouldShortCircuit:A}),E=null!=S?S:I.response,P=null!==(t=null==E?void 0:E.spotterReviewLevel)&&void 0!==t?t:N.defaultSpotterReviewLevel,F=C||isAtLeastReviewLevel(null!==(s=null==E?void 0:E.inlineCommentsFromReview)&&void 0!==s?s:10,e)||(null==E?void 0:E.isSpotterEnabled)&&isAtLeastReviewLevel(P,e)&&(null==E?void 0:E.inlineCommentsEnabled)||!!localStorage.canLeaveInlineComments,D={loggedUserId:null==w?void 0:w._id,taskerWorkflowDefinition:n,gisMultiSourceMetadata:o,initialMessage:p,ontologyHistory:x,ontologyInstructions:b,config:E,spotterAuditFeedback:m},z=(0,_.o5)("can-reject-with-changes",{projectId:null==e?void 0:e.projectId},{shortCircuit:T}),Z=!(e&&(0,tQ.Z)(e)&&8===e.reviewLevel)&&(z||F||!!localStorage.canRejectWithChanges),B=(0,_.o5)("minimap",{projectId:null==e?void 0:e.projectId},{shortCircuit:T})||!!localStorage.minimap,M=(0,_.o5)("can-hide-resolved-and-outdated-comments",{projectId:null==e?void 0:e.projectId},{shortCircuit:T}),O=(0,_.o5)("annotation-review-checklist",{projectId:null==e?void 0:e.projectId},{shortCircuit:T})||!!localStorage.annotationReviewChecklist,U=((0,_.o5)("block-submission-on-annotation-review-checklist",{projectId:null==e?void 0:e.projectId},{shortCircuit:T})||!!localStorage.blockSubmissionOnAnnotationReviewChecklist)&&!g().includes(["R12","R10"],null==e?void 0:e.loggedUserDisplayName),H=(0,_.o5)("use-bee-autolinking",{projectId:null==e?void 0:e.projectId},{shortCircuit:T})||!!localStorage.useBeeAutolinking,V=(0,a.useMemo)(()=>{var t,s;return!!g().find(null!==(s=null===(t=null==e?void 0:e.params)||void 0===t?void 0:t.context_attachments)&&void 0!==s?s:[],e=>e.type===t5.ContextAttachmentType.GIS_PHOTOCOLOR_PNG_V1)},[null==e?void 0:e.params]),q=(0,_.o5)("populate-lint-dismissal-l12",{projectId:null==e?void 0:e.projectId},{shortCircuit:T})&&(null==e?void 0:e.reviewLevel)===12||!!localStorage.populateLintDismissal,Q=(0,_.o5)("gis-show-goat-connections",{projectId:null==e?void 0:e.projectId},{shortCircuit:T})||localStorage.gisShowGoatConnections,W=(0,_.o5)("allow-create-lane-center-with",{projectId:null==e?void 0:e.projectId},{shortCircuit:T})||localStorage.allowCreateLaneCenterWith,G=(0,tX.T)(e),J={...G,canLeaveInlineComments:F,canSeeInlineComments:!0,canRejectWithChanges:Z,canHideResolvedAndOutdatedComments:M,canAccessMinimap:B,canUseGuidedWorkflowBar:!!n,useReviewedAnnotationCheckmark:O,blockSubmissionOnAnnotationReviewChecklist:U,showSidebar:c,useBeeGisAutolinking:H,populateFalsePositiveDismissalsOnTaskLoad:q,gisShowGoatConnections:Q,canUseMultiSourceData:!!o,hasPhotocolorContext:V,allowCreateLaneCenterWith:W,disableRegen:v};if(e)return{...e,...D,featureFlags:J,isQueue:!0,projectConfig:E,reviewLevel:null!==(i=e.reviewLevel)&&void 0!==i?i:N.ReviewLevel.Attempt}},t2=s(496413);let t3="script";var TasksPage_useLogTasksPageAssignmentFeatureFlagLoadedEvent=e=>{let t=(null==e?void 0:e.loggedUserId)+"-"+(null==e?void 0:e.assignmentId),[s,i]=a.useState(JSON.parse(localStorage.getItem(t))||{count:0,key:t,featureFlags:{}});return e&&e.featureFlags&&!g().isEqual(e.featureFlags,s.featureFlags)&&((0,tn.Kz)(ta.Event.AssignmentJsonFeatureFlagsLog,{count:s.count+1,projectName:e.projectName,projectId:e.projectId,type:e.type,loggedUserId:e.loggedUserId,assignmentId:e.assignmentId,assignmentFeatureFlags:e.featureFlags}),i({count:s.count+1,key:t,featureFlags:e.featureFlags})),(0,a.useEffect)(()=>{try{localStorage.setItem(t,JSON.stringify(s))}catch(e){ti.Z.warn(e.message),localStorage.removeItem(t)}},[t,s]),s},t8=s(347785),t4=s(780892);let t6=(0,tc.ZL)(()=>({buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},buttonContainer:{position:"relative"}}));function interpolateWithJSX(e,t){let s=[e];for(let[e,i]of Object.entries(t))s=g().flatMap(s,t=>"string"==typeof t&&t.match("{".concat(e,"}"))?function(e,t,s){let i=[],n=e.split(t);for(let e=0;e<n.length-1;e++)i.push(n[e]),i.push(s);return i.push(n[n.length-1]),i}(t,"{".concat(e,"}"),i):t);return s}var RateConsent=e=>{let{currentAssignment:t,...s}=e,{t:i}=(0,t8.$G)("priceDiscovery"),a=t6(),r=t.project._id,o=t.project.permissionGroup.title,l=t.rateConsent,c=l.lowerBound,d=l.upperBound,p=l.medianTimeSpentLowerBound,u=l.medianTimeSpentUpperBound,h=l.reviewLevel,[g,x]=(0,t4.Z)(async()=>{try{return await s.actions.rejectProjectPricing(r,l)}catch(e){(0,R.vj)(e,{handleHttp:!0})}},[r,l]),[f,b]=(0,t4.Z)(async()=>{try{return await s.actions.acceptProjectPricing(r,l)}catch(e){(0,R.vj)(e,{handleHttp:!0})}},[r,l]),k=g.loading||f.loading;return(0,n.jsxs)("div",{className:"jsx-cec53ce246701d63 page",children:[(0,n.jsxs)("div",{className:"jsx-cec53ce246701d63 content",children:[(0,n.jsxs)("div",{className:"jsx-cec53ce246701d63 header",children:[o," Pay Estimate"]}),(0,n.jsxs)("div",{className:"jsx-cec53ce246701d63 prediction",children:[i("greeting"),(0,n.jsx)("br",{className:"jsx-cec53ce246701d63"}),(0,n.jsx)("br",{className:"jsx-cec53ce246701d63"}),interpolateWithJSX(i("prediction"),{reviewLevel:i(-1===h?"attempters":"reviewers"),project:(0,n.jsx)("span",{className:"jsx-cec53ce246701d63 bold",children:o}),quality:(0,n.jsx)("b",{className:"jsx-cec53ce246701d63",children:i("quality")}),range:(0,n.jsxs)("span",{className:"jsx-cec53ce246701d63 bold",children:[" ","$",c,"-",d," "]}),time:(0,n.jsxs)("span",{className:"jsx-cec53ce246701d63 bold",children:[p,"-",u]})}),(0,n.jsx)("br",{className:"jsx-cec53ce246701d63"}),(0,n.jsx)("br",{className:"jsx-cec53ce246701d63"}),interpolateWithJSX(i("question"),{project:(0,n.jsx)("span",{className:"jsx-cec53ce246701d63 bold",children:o}),temporarily:(0,n.jsx)("b",{className:"jsx-cec53ce246701d63",children:i("temporarily")})})]}),(0,n.jsxs)("div",{className:"jsx-cec53ce246701d63 warning",children:["⚠️ ",i("warning")," ⚠️ :",(0,n.jsx)("br",{className:"jsx-cec53ce246701d63"}),(0,n.jsx)("br",{className:"jsx-cec53ce246701d63"}),(0,n.jsxs)("ul",{className:"jsx-cec53ce246701d63",children:[(0,n.jsx)("li",{className:"jsx-cec53ce246701d63",children:interpolateWithJSX(i("ifyoupause"),{project:(0,n.jsx)("span",{className:"jsx-cec53ce246701d63 bold",children:o}),reject:(0,n.jsx)("b",{className:"jsx-cec53ce246701d63",children:i("option-reject")}),temporarily:(0,n.jsx)("b",{className:"jsx-cec53ce246701d63",children:i("temporarily")}),nolonger:(0,n.jsx)("b",{className:"jsx-cec53ce246701d63",children:i("nolonger")})})}),(0,n.jsx)("li",{className:"jsx-cec53ce246701d63",children:interpolateWithJSX(i("ifyouaccept"),{project:(0,n.jsx)("span",{className:"jsx-cec53ce246701d63 bold",children:o}),accept:(0,n.jsx)("b",{className:"jsx-cec53ce246701d63",children:i("option-accept")})})})]})]}),(0,n.jsxs)("div",{className:"jsx-cec53ce246701d63 button-row",children:[(0,n.jsx)(J.u,{title:i("tooltip-reject"),children:(0,n.jsxs)("div",{className:"jsx-cec53ce246701d63 "+(a.buttonContainer||""),children:[(0,n.jsx)(eI.zx,{className:"reject-button",style:{marginRight:10},type:"tertiary",onClick:x,disabled:k,children:i("option-reject")}),g.loading&&(0,n.jsx)(J.D8,{size:24,className:a.buttonProgress})]})}),(0,n.jsx)(J.u,{title:i("tooltip-accept"),children:(0,n.jsxs)("div",{className:"jsx-cec53ce246701d63 "+(a.buttonContainer||""),children:[(0,n.jsx)(eI.zx,{type:"primary",onClick:b,disabled:k,children:i("option-accept")}),f.loading&&(0,n.jsx)(J.D8,{size:24,className:a.buttonProgress})]})})]})]}),(0,n.jsx)(m(),{id:"cec53ce246701d63",children:".page.jsx-cec53ce246701d63{height:100vh;width:100vw;overflow:auto;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:var(--color-RemoGray01)}.content.jsx-cec53ce246701d63{width:80vw;max-width:1080px;margin-top:64px;-webkit-box-shadow:0px 4px 8px rgba(0,0,0,.05);-moz-box-shadow:0px 4px 8px rgba(0,0,0,.05);box-shadow:0px 4px 8px rgba(0,0,0,.05);-webkit-border-radius:var(--border-radius);-moz-border-radius:var(--border-radius);border-radius:var(--border-radius);background:white;overflow:hidden}.content.jsx-cec53ce246701d63>div.jsx-cec53ce246701d63{padding:32px}.header.jsx-cec53ce246701d63{background-color:var(--color-RemoGreen);padding:20px 32px!important;color:white;font-weight:bold;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.title.jsx-cec53ce246701d63{font-size:20px}.bold.jsx-cec53ce246701d63{color:var(--color-RemoGreen);font-weight:bold}.prediction.jsx-cec53ce246701d63{font-size:18px}.warning.jsx-cec53ce246701d63{font-size:18px}.button-row.jsx-cec53ce246701d63{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}"})]})},t7=s(723015),t9=s(225258),se=s(796959),st=s(275587),ss=s(722030),si=s(487544),sn=s(187690);let SubmissionScreen=e=>{let{taskText:t,payText:s,onReturnToDashboard:i,onContinueTasking:r,skippedTask:o,hideWaitForPayText:l,projectId:c}=e,d=(0,t$.aF)();(0,a.useEffect)(()=>{if(!o)try{(0,sn.k)({eventName:"task_submitted_".concat(c),user:d,window})}catch(e){ti.Z.error("Error triggering Sprig event:",e)}},[d,o,c]);let p=!o&&!l;return(0,n.jsx)("div",{className:"flex items-center justify-center h-[100%]",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 items-center p-4 relative",children:[(0,n.jsx)("img",{className:"w-auto h-[120px] pl-8",src:o?"/static/img/outlier/skip.svg":"/static/img/outlier/check.svg"}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-[500px] items-center",children:[(0,n.jsx)("div",{className:"my-[12px]",children:(0,n.jsx)(tP.ZT.H3,{className:"text-back",children:t})}),(0,n.jsx)("div",{className:"border-t-[1px] border-neutral-300 w-[100%]"})]}),s&&!o?(0,n.jsxs)("div",{className:"flex flex-col align-center justify-center gap-4 w-[500px] ",children:[s.map((e,t)=>0===t?(0,n.jsx)(tP.ZT.H5,{className:"text-black text-center",children:e},t):(0,n.jsx)(tP.ZT.Paragraph1,{className:"text-black text-center",children:e},t)),(0,n.jsx)("div",{className:"border-t-[1px] border-neutral-300 w-[100%]"})]}):null,(0,n.jsxs)("div",{className:"mb-4 w-[500px]",children:[o&&(0,n.jsx)("div",{className:"text-sm text-center w-[100%]",children:"To continue tasking, click the button below to proceed. Note that once a task is found the task's claim timer will begin."}),p&&(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)(tP.ZT.Paragraph1,{className:"text-neutral-500",children:"It may take a few minutes for your pay to reflect in the earnings tab"}),(0,n.jsx)("div",{className:"border-t-[1px] border-neutral-300 w-[100%]"}),(0,n.jsx)(tP.ZT.Paragraph1,{className:"text-neutral-500",children:"To start a new task on this project at the same rates, click the button below"})]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(tu.zx,{className:"w-[160px] justify-center",variant:"neutral",size:"lg",onClick:i,children:(0,n.jsx)(tP.ZT.Paragraph3,{children:"Return to dashboard"})}),(0,n.jsx)(tu.zx,{className:"w-[160px] justify-center",variant:"primary",size:"lg",onClick:r,children:(0,n.jsx)(tP.ZT.Paragraph3,{className:"text-secondary-600",children:"Continue tasking"})})]})]})})};var sa=g().flowRight(t7.ZP,t9.Z)((0,tZ.$j)(tB.K,tB.ZS)(e=>(0,n.jsx)(SubmissionScreen,{...e}))),sr=g().flowRight(t7.ZP,t9.Z)((0,tZ.$j)(tB.K,tB.ZS)(e=>{let{taskText:t,onReturnToDashboard:s,onContinueTasking:i,skippedTask:a}=e;return(0,n.jsx)("div",{className:"flex items-center justify-center h-[100%]",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 items-center p-4 relative",children:[(0,n.jsx)("img",{className:"w-auto h-[120px] pl-8",src:a?"/static/img/outlier/skip.svg":"/static/img/outlier/check.svg"}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-[500px] items-center",children:[(0,n.jsx)("div",{className:"my-[12px]",children:(0,n.jsx)(tP.ZT.H3,{className:"text-back",children:t})}),(0,n.jsx)("div",{className:"border-t-[1px] border-neutral-300 w-[100%]"})]}),(0,n.jsx)("div",{className:"mb-4 w-[500px]",children:a&&(0,n.jsx)("div",{className:"text-sm text-center w-[100%]",children:"To continue tasking, click the button below to proceed. Note that once a task is found the task's claim timer will begin."})}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(tu.zx,{className:"w-[160px] justify-center",variant:"neutral",size:"lg",onClick:s,children:(0,n.jsx)(tP.ZT.Paragraph3,{children:"Return to dashboard"})}),(0,n.jsx)(tu.zx,{className:"w-[160px] justify-center",variant:"primary",size:"lg",onClick:i,children:(0,n.jsx)(tP.ZT.Paragraph3,{className:"text-secondary-600",children:"Continue tasking"})})]})]})})})),so=s(546491),sl=s(281624),sc=s(772498),sd=s(665701);let useSeenPayRateMutation=()=>(0,l.useMutation)({mutationFn:async e=>(0,R.ZP)(null,"/internal/scaler/pay_rate_card/".concat(e,"/seen"),{method:"PUT"})}),PayRateChangeScreen=e=>{let t,{projectId:s,reviewLevel:i,user:r}=e,o=(0,l.useQueryClient)(),c=(0,x.useRouter)(),d=(0,sl.Z)(),p=(0,sc.Z)(s),u=(0,sd.z)(),m=useSeenPayRateMutation(),{data:h,isLoading:f}=(0,tJ.s)({projectId:s,reviewLevel:String(i)},void 0,{enabled:!0,refetchOnWindowFocus:!0}),{isLoading:b,data:k}=(0,_._z)("outlier-marketplace",{userId:r.id},!1),v=null==h?void 0:h.payRateInfo,y=null==h?void 0:h.earningRateData,j=(0,a.useRef)(!1),w=(0,a.useRef)(new Set);v&&k&&!j.current&&(te.c.track("View pay rate change screen",{payRateInfo:v,earningRateData:y,workerId:r.id,projectId:s,isMarketplaceUser:k}),j.current=!0);let T=(0,_.mV)("payratecard-firstSeenAt",{},{name:"payratecard-firstSeenAt",enabled:!1}),C=!1;try{var S,A;let e=JSON.parse(null!==(A=null==T?void 0:null===(S=T.payload)||void 0===S?void 0:S.value)&&void 0!==A?A:"{}");C=null==e?void 0:e.enabled,t=null==e?void 0:e.rolloutDate}catch(e){ti.Z.error("Error parsing payTrackingVariant",{error:e,payTrackingVariant:T})}(null==v?void 0:v.payRateId)&&!v.payRateFirstSeenAt&&!w.current.has(v.payRateId)&&C&&(null==v?void 0:v.payRateCreatedAt)&&t&&new Date(v.payRateCreatedAt)>new Date(t)&&(m.mutate(v.payRateId),w.current.add(v.payRateId));let goToHomepage=()=>{c.push(d("/en/expert"))},{hourlyRate:I,uncappedHourlyPayRate:N,maxHourlyPayRate:L,legacyHourlyRate:E,payRateId:P,isStrataEnabledForProject:F,isFirstTimeStrataRate:D,isStrataHourlyRateChange:z}=v||{},[Z,B]=(0,a.useState)(!1),handleAcceptPayRate=async()=>{if(!(g().isNil(s)||g().isNil(i)||g().isNil(v))){te.c.track("Accept post-task pay rate change",{workerId:r.id,projectId:s,isMarketplaceUser:k,isPayRateChange:z,isFirstTimePayRate:D,payRateId:P}),B(!0);try{await p.mutateAsync({projectId:s,reviewLevel:i,hourlyRate:I,payRateId:P}),o.invalidateQueries(["pay-rate",s]),o.invalidateQueries(["payRate",s])}catch(e){B(!1);return}}},handleRejectPayRate=async()=>{if(g().isNil(s)||g().isNil(i)||g().isNil(v))return;B(!0);let e="rejecting pay rate change pre-task";te.c.track("Reject project",{workerId:r._id,projectId:s,reason:e,normalPayRate:N,cappedPayRate:L,baseRate:I,strataEnabled:F,isPayRateChange:z,isFirstTimePayRate:D,strataHourlyRate:F?I:void 0,legacyHourlyRate:F?E:void 0,isMarketplaceUser:k,payRateId:P});try{await u.mutateAsync({projectId:s,isPaused:!1,reason:e})}catch(e){(0,R.vj)(e,{handleHttp:!0}),B(!1);return}goToHomepage()},M=!k||!D;return f||!v||b?(0,n.jsx)("div",{className:"flex justify-center h-[100vh] items-center",children:(0,n.jsx)(ss.$,{size:"sm"})}):(0,n.jsx)("div",{className:"flex items-center justify-center h-[100%]",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 items-center p-4 relative",children:[(0,n.jsx)("img",{className:"w-auto h-[120px] pl-8 mb-3",src:"/static/img/outlier/info.svg"}),(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsx)(tP.ZT.H3,{className:"text-back text-center",children:D?"Accept Current Task Pay Terms":"Updated Current Task Pay Terms"}),(0,n.jsx)(so.G_,{payRateInfo:v,isPayRateChangeScreen:!0})]}),(0,n.jsx)("div",{className:"border-t-[1px] mb-6 border-neutral-300 w-[80%]"}),(0,n.jsx)(tP.ZT.Paragraph1,{className:"text-neutral-500 text-center mb-4",children:"To start a new task on this project at the above rates, click the button below."}),(0,n.jsxs)("div",{className:"flex w-[800px] justify-center gap-2",children:[M&&(0,n.jsx)(tu.zx,{className:"w-[330px] justify-center",variant:"neutral",size:"lg",disabled:Z||p.isLoading||u.isLoading,onClick:handleRejectPayRate,children:(0,n.jsx)(tP.ZT.Paragraph3,{children:"Decline new tasks on this project"})}),(0,n.jsx)(tu.zx,{className:"w-[330px] justify-center",variant:"primary",size:"lg",disabled:Z||p.isLoading||u.isLoading,onClick:handleAcceptPayRate,children:(0,n.jsx)(tP.ZT.Paragraph3,{className:"text-secondary-600",children:"Accept task pay terms and start a task"})})]}),(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)("a",{className:"text-blue-500 cursor-pointer",onClick:goToHomepage,children:(0,n.jsx)(tP.ZT.Paragraph3,{children:(0,n.jsx)("strong",{children:"Back to homepage"})})})})]})})};var sp=g().flowRight(t7.ZP,t9.Z)((0,tZ.$j)(tB.K,tB.ZS)(e=>(0,n.jsx)(PayRateChangeScreen,{...e}))),su=s(506377),sm=s(589020),sh=s(602971);let sg=new tF.S({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),Notifications=()=>{let e=(0,x.useRouter)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(sm.f,{actionHandler:()=>{window.location.href.includes("remotasks")?e.push("/en/dashboard"):e.push("/en/expert")}}),(0,n.jsxs)(tD.aH,{client:sg,children:[(0,n.jsx)(sh.g,{}),(0,n.jsx)(su.x,{onClick:()=>{e.push({pathname:"/expert",query:e.query})}})]})]})};var sx=s(303736);let TasksPage=e=>{var t,s,i,r,d;let{assignmentJson:u,...m}=e,[h,f]=(0,a.useState)(!0),[b,v]=(0,a.useState)(!1),[j,w]=(0,a.useState)(!1),[T,C]=(0,a.useState)(""),[S,A]=(0,a.useState)(!0),[I,E]=(0,a.useState)(!1),P=(0,x.useRouter)(),D=(0,sl.Z)(),{query:z}=P,{fetchAnnouncement:Z}=(0,st.R)();(0,y.Z)(async()=>{m.actions.fetchBonuses(!0),m.actions.fetchNextAssignments(m.query),localStorage.getItem("experimentalTasksAccess")&&(f(!1),console.info("Type window.toggleExperimentalTasks() to use the new labeler"),window.toggleExperimentalTasks=()=>{f(e=>!e)})});let B=g().first(m.assignments);!u&&B&&(u=B&&(0,tY.Z)(B)),(0,a.useEffect)(()=>{if((null==B?void 0:B.type)===L.TaskType.ChatExperimental||(null==B?void 0:B.type)===L.TaskType.ChatV2){let fetchIsCalibration=async()=>{try{let e=await (0,R.ZP)(null,"internal/scaler/".concat(B._id,"/isCalibrationTask")),{isCalibration:t}=await e;w(t)}catch(e){return}};fetchIsCalibration()}},[B]),(0,a.useEffect)(()=>{if((null==B?void 0:B.type)===L.TaskType.ChatExperimental||(null==B?void 0:B.type)===L.TaskType.ChatV2){if(!B.project)return;let e="string"==typeof B.project?B.project:B.project._id,fetchInstructions=async()=>{try{let t=await (0,R.ZP)(null,"internal/scaler/".concat(e,"/instructionUrl")),{instructionUrl:s}=await t;C(s)}catch(e){return}};fetchInstructions()}},[B]),(0,a.useEffect)(()=>{if(B){var e,t,s;(0,se.a)(null==B?void 0:B.taskType,null==B?void 0:null===(e=B.project)||void 0===e?void 0:e.toString()),Z({query:{permissionGroup:null==B?void 0:null===(s=B.project)||void 0===s?void 0:null===(t=s.permissionGroup)||void 0===t?void 0:t._id,getUnreadQualityNotification:!0}})}},[B,Z,w]),(0,a.useEffect)(()=>{async function fireSeonTransaction(){seon.config({host:"seondf.com",session_id:p().v4(),audio_fingerprint:!0,canvas_fingerprint:!0,webgl_fingerprint:!0});let e=await seon.getBase64Session(),t=await (0,c.fetchApi)("/fraud/transaction",{method:"POST",headers:{"Content-Type":"application/json"},body:{actionType:"forced_seon_transaction",sessionPayload:e}}).then(c.handleErrorsAndJsonify);return t}S||I||!m.user.forceSeonTransaction||fireSeonTransaction()},[S,I,m.user]);let{data:M}=(0,l.useQuery)(["is-instructive-bm",null==B?void 0:B._id],async()=>(0,R.ZP)(null,"/internal/experts/check-instructive/".concat(B._id)),{refetchOnWindowFocus:!1,retry:!1,enabled:!!(B&&B._id)}),O=(null==B?void 0:B.type)===L.TaskType.Categorization&&hasLidarLiteBinaryScene(B),U="1"===z.forceClaim&&!(g().includes([...N.lidarTypes,L.TaskType.SensorFusion],null==B?void 0:B.type)||O)||"1"===z.skipInstructions,H=hooks_useSupplementedQueueAssignment(u),V=(null==B?void 0:B.taskType)===L.TaskType.TextCollection||(null==B?void 0:B.type)===L.TaskType.TextCollection,q=V||(null==B?void 0:B.assignmentType)!==N.AssignmentType.Course,Q=(0,_.o5)("cl-fast-submission-enabled",{projectId:null==H?void 0:H.projectId},{shortCircuit:!(null==H?void 0:H.projectId),defaultValue:!1})&&!(null==B?void 0:B.isPipelineV3HumanNode)&&V,{data:W}=(0,_._z)("precalculate-prepayment",{},!1,void 0,{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchIntervalInBackground:!1,retry:!1}),G=(null==B?void 0:B.project)&&("string"==typeof(null==B?void 0:B.project)?null==B?void 0:B.project:null==B?void 0:null===(t=B.project)||void 0===t?void 0:t._id),J=null==B?void 0:B.reviewLevel,Y=(0,_.ZP)("outlier-strata-project-opt-out",{projectId:G},!1),K=(0,_.ZP)("outlier-accept-pay-rate-changes-v2",{projectId:G},!1),$=(0,sx.o)(G,m.user._id,J),X=(0,eK.userHasPayoutJob)(m.user,!0),ee=m.user.accountType===N.AccountType.Expert||m.user.isCorporateUser,{data:et,isLoading:es}=(0,tJ.s)({projectId:G,reviewLevel:String(J)},B,{enabled:!!Y&&!!K&&X&&ee,refetchOnMount:!0,refetchInterval:e=>{if(!e)return 6e4;let{payRateInfo:t}=e,s=null==t?void 0:t.isStrataHourlyRateChange,i=null==t?void 0:t.currentAssignmentWorkStartedAt;return!!(!i&&!s)&&6e4}});(0,a.useEffect)(()=>{if(m.mobileUserAgent&&(null==H?void 0:H.projectId)&&!b){if(v(!0),!q){(0,tC.ZP)(null,"/unavailable_mobile");return}let e={worker:m.user._id,userAgent:m.mobileUserAgent,project:null==H?void 0:H.projectId,assignment:null==H?void 0:H.assignmentId};(0,tn.Kz)(tn.ju.MobileRemotasksTaskingEngagement,e).catch(e=>{console.warn("Error logging events",e)})}},[q,m.user._id,m.mobileUserAgent,H,b]),TasksPage_useLogTasksPageAssignmentFeatureFlagLoadedEvent(H);let{executeRecaptchaV3:ei}=function(e){let{siteKey:t,projectId:s}=e,i="https://www.google.com/recaptcha/api.js?render=".concat(t),[n,r]=(0,a.useState)("init"),o=(0,_.ZP)("use-recaptcha-v3",{projectId:s},!1)||localStorage.runRecaptchaV3Local;(0,t2.Z)(()=>{let e="google-recaptcha-v3";return!F.IS_FEDERAL&&o&&function(e,t,s,i,n){let a=e.getElementsByTagName(t3)[0],r=a;(r=e.createElement(t3)).id=t,r.src=s,a&&a.parentNode?a.parentNode.insertBefore(r,a):e.head.appendChild(r),r.onerror=n,r.onload=i}(document,e,i,()=>{grecaptcha.ready(function(){r("ready")})},()=>{r("error")}),()=>{(function(e,t){let s=e.getElementById(t);if(s){var i;null===(i=s.parentNode)||void 0===i||i.removeChild(s)}})(document,e),r("unmounted")}},[i,o]);let executeRecaptchaV3=async()=>{if(F.IS_FEDERAL||!o||"ready"!==n)return null;try{return await grecaptcha.execute(t,{action:"submit"})}catch(i){var e;let t=null!==(e=null==i?void 0:i.message)&&void 0!==e?e:"undefined",s="Google recatchaV3 error: ".concat(t);k().error(s,{timeout:3e3})}return null};return{executeRecaptchaV3}}({siteKey:F.RECAPTCHA_SITE_KEY,projectId:null==H?void 0:H.projectId}),en=(0,a.useCallback)(()=>{P.push(D("/en/expert"))},[D,P]),ea=(0,a.useCallback)(()=>{if(m.actions.confirmReadyForNextTask(),m.skippedTask){var e;m.actions.nextTask(m.query,(null===(e=m.userFromGetInitialProps)||void 0===e?void 0:e.qaTeamId)!==void 0)}else m.actions.fetchNextAssignmentsOnSkip(m.query)},[m.actions,m.query,m.skippedTask,null===(s=m.userFromGetInitialProps)||void 0===s?void 0:s.qaTeamId]);if(null==B?void 0:B.rateConsent)return(0,n.jsx)(RateConsent,{currentAssignment:B,...m});if(!m.readyForTasking&&!m.isExitingTask){let e;let t=!1;if($){e=m.skippedTask?"Your attempt was skipped":"Your attempt was successfully submitted";let s=null==m?void 0:null===(i=m.precalculatedPay)||void 0===i?void 0:i.payText;if(!s)return(0,n.jsx)(sr,{taskText:e,onReturnToDashboard:en,onContinueTasking:ea});(null===(r=m.precalculatedPay)||void 0===r?void 0:r.payoutAmountHundredthsOfCents)===0&&(t=!0)}else e=m.skippedTask?"Task skipped":"Task successfully submitted";if(W){let s=null==m?void 0:null===(d=m.precalculatedPay)||void 0===d?void 0:d.payText;return(0,n.jsx)(sa,{taskText:e,payText:s,onReturnToDashboard:en,onContinueTasking:ea,hideWaitForPayText:t,projectId:G,...m})}return(0,n.jsxs)("div",{className:"flex flex-col gap-4 items-center p-4 relative top-1/3",children:[(0,n.jsx)("img",{className:"w-auto h-[120px] pl-8",src:m.skippedTask?"/static/img/outlier/skip.svg":"/static/img/outlier/check.svg"}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-[500px] items-center",children:[(0,n.jsx)("div",{className:"text-lg font-bold",children:e}),(0,n.jsx)("div",{className:"text-sm",children:"To continue tasking, click the button below to proceed. Note that once a task is found the task's claim timer will begin."})]}),(0,n.jsxs)("div",{className:"space-x-8",children:[(0,n.jsx)(tu.zx,{variant:"neutral",size:"lg",onClick:en,children:"Return to dashboard"}),(0,n.jsx)(tu.zx,{variant:"primary",size:"lg",onClick:ea,children:"Continue tasking"})]})]})}if(es)return(0,n.jsx)("div",{className:"flex justify-center h-[100vh] items-center",children:(0,n.jsx)(ss.$,{size:"sm"})});let er=null==et?void 0:et.payRateInfo,eo=null==er?void 0:er.isStrataHourlyRateChange,el=!g().isNil(null==er?void 0:er.currentAssignmentWorkStartedAt);return X&&eo&&Y&&K&&!el&&ee?(0,n.jsx)(sp,{projectId:G,reviewLevel:String(J)}):h||(null==B?void 0:B.type)!=="imageannotation"?(0,n.jsxs)("div",{style:{height:"100vh"},children:[(0,n.jsx)(Notifications,{}),ee&&(0,n.jsx)(si.j,{projectId:G}),m.user.forceSeonTransaction&&(0,n.jsx)(o(),{url:N.SEON_DEVICE_FINGERPRINTING_URL,onLoad:()=>{A(!1)},onError:()=>{ti.Z.warn("Error loading SEON device fingerprinting script."),E(!0),A(!1)}}),(0,n.jsx)(Tasks,{assignmentJson:H,...m,executeRecaptchaV3:ei,fastSubmissionEnabled:Q,skipInstructions:U,isRedirecting:m.isRedirecting,isCalibration:j,instructionUrl:T,isInstructiveBM:null!=M&&M})]}):B?(0,n.jsx)(TaskerAssignment_TaskerAssignment,{assignmentJson:H}):(0,n.jsx)(scalers_NoMoreTasks,{config:m.config,query:m.query,user:m.user})};var sf=g().flowRight(t7.ZP,t9.Z)((0,tZ.$j)(tB.K,tB.ZS)(e=>(0,n.jsx)(TasksPage,{...e})))},347026:function(e,t,s){var i=s(827378),n=s(468891),a=s(335331),r=s(686677);t.Z=()=>{let e=(0,i.useContext)(a.s6),t=n.parse("");if(e){let e=(0,a.TH)(),s=(0,i.useMemo)(()=>e.search?n.parse(e.search):t,[e.search,t]);return s}let s=(0,r.useRouter)(),o=(0,i.useMemo)(()=>s.query?s.query:t,[s.query,t]);return o}},187690:function(e,t,s){s.d(t,{k:function(){return triggerSprigEvent}});let triggerSprigEvent=e=>{if(!e.user.id||!e.user.email)return;let t="localhost"===window.location.hostname?"o16ZzYntRYQr":"Yux2NnGu_wfo";if(!e.window.Sprig){e.window.Sprig=function(){s._queue.push(arguments)};let s=e.window.Sprig;s.appId=t,s._queue=[];let i=document.createElement("script");i.async=!0,i.src="https://cdn.sprig.com/shim.js?id="+s.appId;let n=document.getElementsByTagName("script")[0];n.parentNode&&n.parentNode.insertBefore(i,n)}Sprig("setUserId",e.user.id),Sprig("setEmail",e.user.email),Sprig("setAttribute","isCorporateUser",!!e.user.isCorporateUser),Sprig("track",e.eventName)}},925686:function(e,t,s){s.d(t,{P:function(){return collectAttachmentUrls}});var i=s(298784),n=s.n(i),a=s(167469);let r=[a.TaskType.LidarAnnotation,a.TaskType.LidarLinking,a.TaskType.LidarSegmentation,a.TaskType.LidarStitching,a.TaskType.SegmentAnnotation,a.TaskType.TextCollection,a.TaskType.VideoPlaybackAnnotation,a.TaskType.DocumentModel],collectAttachmentUrls=e=>n().compact(n().uniq(n().flattenDeep(e.filter(e=>!!e.params&&"text"!==e.params.attachment_type&&!n().includes(r,e.type)).map(e=>{var t,s;return[e.scale_internal_attachments,e.scale_internal_attachment,e.params.attachment,"gis_tile_png_v1"!==e.params.attachment_format?e.type!==a.TaskType.VideoAnnotation?e.params.attachments:[]:n().filter(e.params.attachments,e=>e.includes(".png")||e.includes(".jpeg")),n().map(e.params.context_attachments,e=>{let{attachment:t}=e;return t}),null===(s=e.params.hypothesis)||void 0===s?void 0:null===(t=s.annotations)||void 0===t?void 0:t.url].filter(e=>!!e)}))))},757895:function(e,t,s){s.d(t,{HR:function(){return checkAttemptMade},It:function(){return fetchProcessedResponseLLM},NX:function(){return fetchLintResponseVerdict},Ov:function(){return fetchApiLintResults},fb:function(){return fetchApiLintRules}});var i=s(352991),n=s(971599),a=s(5575),r=s(642830),o=s(271351),l=s(608139),c=s.n(l),d=s(472146);let fetchApiLintResults=async e=>{let t,{subtask:s,response:l,lintRuleNames:p,isPerTurn:u,attemptBehaviourLog:m,zEditorSelectedAnnotations:h}=e,g="project"in s?s.project._id:s.projectId,x={taskType:s.type,projectId:g,taskCustomer:"project"in s?s.project.taskCustomer:void 0,data:l,lintRuleNames:p,isPerTurn:u,attemptBehaviourLog:m,zEditorSelectedAnnotations:h},f="_id"in s?s._id:s.assignmentId;try{t=await (0,i.ZP)(null,"internal/linting/subtasks/".concat(f,"/lint"),{body:x,method:"POST",redirectOnUnauthorized:!0})}catch(t){r.Z.error("Failed to fetchApiLintResults for ".concat(f),{error:JSON.stringify(t),errorMessage:null==t?void 0:t.message,projectId:g,subtaskId:f,lintRuleNames:p,isPerTurn:u}),(0,a.dO)(t,"linter",{subtaskId:f});let e=await (0,o.V3)({feature:"should-pass-on-lint-error",querystring:c().stringify({projectId:g})});return e?[]:[new n.LintDiagnostic("linting-error",n.LintSeverity.ERROR,{message:"Error running linters. Please try again."})]}return t?(0,d.d)(t.lintResults):[]},fetchLintResponseVerdict=async e=>{try{let t=await (0,i.ZP)(null,"internal/linting/lint_response",{body:e,method:"POST",redirectOnUnauthorized:!0});return{lintResults:t.lintResults||[]}}catch(e){(0,a.dO)(e)}return{lintResults:[]}},fetchProcessedResponseLLM=async e=>{try{let t=await (0,i.ZP)(null,"internal/linting/lint_grammar_spelling",{body:e,method:"POST",redirectOnUnauthorized:!0});return t.results||[]}catch(e){(0,a.dO)(e)}return[]},fetchApiLintRules=async e=>{var t,s,n;let r;let o={taskType:e.type,projectId:"project"in e?e.project._id:e.projectId,taskCustomer:"project"in e?e.project.taskCustomer:void 0};try{let n=null!==(s=null!==(t=e._id)&&void 0!==t?t:e.subtaskId)&&void 0!==s?s:e.assignmentId;r=await (0,i.ZP)(null,"internal/linting/subtasks/".concat(n,"/rules"),{body:o,method:"POST",redirectOnUnauthorized:!0})}catch(e){throw(0,a.dO)(e),e}return null!==(n=null==r?void 0:r.lintRules)&&void 0!==n?n:[]},checkAttemptMade=async e=>{let t;try{t=await (0,i.ZP)(null,"internal/linting/check_attempt/".concat(e),{method:"POST",redirectOnUnauthorized:!0})}catch(e){return(0,a.dO)(e),!1}return t}},885752:function(e,t,s){s.d(t,{Z:function(){return BonusItem}});var i=s(824246),n=s(298784),a=s.n(n),r=s(161320),o=s.n(r);s(827378);var l=s(50682),c=s.n(l),d=s(599789),p=s(433536),u=s(946975);let isQaAccuracyBonus=e=>!!e.minAuditsPerPeriod;var m=s(628556);let BonusItemAmount=e=>{let{bonus:t}=e,s=h();if(!isQaAccuracyBonus(t)){if(t.amountPerPeriod)return(0,i.jsx)("div",{className:s.amount,children:(0,i.jsxs)(u.H1,{children:["$",(t.amountPerPeriod/1e4).toFixed(2)]})});if(t.amountPerReview)return(0,i.jsx)("div",{className:s.amount,children:(0,i.jsxs)(u.H1,{children:["$",(t.amountPerReview/1e4).toFixed(2),(0,i.jsx)("span",{className:s.label,children:" per review"})]})})}if(a().isNil(t.minAccuracy)||a().isNil(t.amountPerReview))return null;if(t.status===d.BonusStatus.Resolved)return(0,i.jsx)("div",{className:s.amount,children:(0,i.jsxs)(u.H1,{children:["$",(t.amountHundredthsOfCents/1e4).toFixed(2)]})});let n=t.progress>=t.minAccuracy?(0,m.pv)(.2,t.minAccuracy,t.progress):0,r=(0,m.JM)(n,t.amountPerReview);return(0,i.jsx)("div",{className:s.amount,children:(0,i.jsxs)(u.H1,{children:[(0,i.jsxs)("span",{className:s.label,children:["$",r.toFixed(2)]})," ($",(t.amountPerReview/1e4).toFixed(2)," max)"," ",(0,i.jsx)("span",{className:s.label,children:"per review"})]})})},h=(0,p.ZL)(e=>({amount:{margin:"12px 0",color:e.colors.green},label:{color:e.colors.gray50}})),g=(0,p.ZL)({container:{width:"280px"},thresholds:{marginTop:16,display:"grid",gridTemplateColumns:"120px auto",gridColumnGap:16,gridRowGap:2,opacity:.5}});var bonus_BonusItemTooltip=e=>{let{minAccuracy:t,amountPerReview:s,progress:n,status:a,amountHundredthsOfCents:r}=e.bonus,o=g();if(!t)return null;let l=[t,.8,.95,1],c=n<t+(1-t)*.6&&a!==d.BonusStatus.Pending&&r>0,p=!c&&n===t;return(0,i.jsxs)("div",{className:o.container,children:[p&&(0,i.jsx)("div",{children:"You didn't get randomly audited this week, so your bonus defaulted to the minimum"}),c&&(0,i.jsx)("div",{children:"You didn't receive much bonus this time because your QA audit accuracy was low"}),!p&&!c&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:(0,i.jsxs)(u.x,{medium:!0,children:["You will earn bonuses for every task if your QA audit accuracy is above"," ",Math.floor(100*t),"%"]})}),(0,i.jsx)("div",{className:o.thresholds,children:l.map(e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsxs)(u.x,{mono:!0,children:[Math.floor(100*e),"% accuracy"]})}),(0,i.jsx)("div",{children:(0,i.jsxs)(u.x,{mono:!0,children:["$",(0,m.JM)((0,m.pv)(.2,t,e),s).toFixed(2)," ","per task"]})})]}))})]})]})};let BonusStatusPill=e=>{let{bonus:t,isMissedTarget:s}=e,n=x();return s?(0,i.jsx)("div",{className:"".concat(n.bonusStatus," ").concat(n.bonusStatusMissed),children:(0,i.jsx)(u.x,{medium:!0,children:"Missed Target"})}):t.status===d.BonusStatus.Resolved&&t.amountHundredthsOfCents>0?(0,i.jsx)("div",{className:"".concat(n.bonusStatus," ").concat(n.bonusStatusPaid),children:(0,i.jsx)(u.x,{medium:!0,children:"Paid"})}):o()(t.currentPeriodEnd).isBefore()?(0,i.jsx)("div",{className:"".concat(n.bonusStatus," ").concat(n.bonusStatusFinalizing),children:(0,i.jsx)(u.x,{medium:!0,children:"Awaiting Finalization"})}):(0,i.jsx)("div",{className:"".concat(n.bonusStatus," ").concat(n.bonusStatusInProgress),children:(0,i.jsx)(u.x,{medium:!0,children:"In Progress"})})},BonusDateRange=e=>{let{bonus:t}=e,s=x();return(0,i.jsxs)("div",{className:s.dateRange,children:[o()(t.windowStart).format("MMM D")," - ",o()(t.currentPeriodEnd).format("MMM D")]})},BonusName=e=>{let{name:t,isMissedTarget:s}=e,n=x();return(0,i.jsx)("div",{className:s?n.name:"",children:(0,i.jsx)(u.x,{medium:!0,children:t})})},BonusTargets=e=>{let{bonus:t}=e,s=x(),n=!a().isNil(t.currentAccuracy)&&Math.round((Math.min(t.currentAccuracy,1)+Number.EPSILON)*100);return(0,i.jsxs)("div",{className:s.targets,children:[!isQaAccuracyBonus(t)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:"Tasks Submitted"})," ",(0,i.jsxs)("div",{children:[t.progress," / ",t.target,t.eligible?" (".concat(t.eligible," pending)"):"",t.discarded?" (".concat(t.discarded," discarded)"):""]}),t.minAvgAccuracy&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:"Average Accuracy"}),(0,i.jsxs)("div",{children:[a().isNil(t.currentAccuracy)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{style:{opacity:.25},children:"Unknown"})," /"," "]}):"".concat(n," / "),100*t.minAvgAccuracy,"%"]})]})]}),isQaAccuracyBonus(t)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:"Accuracy"}),(0,i.jsxs)("div",{children:[100*t.progress,"%"]})]}),t.minAccuracy&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:"Accuracy Threshold"}),(0,i.jsxs)("div",{children:[100*t.minAccuracy,"%"]})]})]})},x=(0,p.ZL)(e=>({container:{padding:"16px",color:e.colors.gray75,transition:"background 0.2s","&:hover":{background:e.colors.gray01}},bonusStatus:{marginBottom:8,padding:"2px 8px",borderRadius:2,display:"inline-block"},bonusStatusPaid:{background:e.colors.green,color:e.colors.white},bonusStatusMissed:{background:e.colors.gray05,color:e.colors.gray50},bonusStatusInProgress:{border:"1px solid ".concat(e.colors.gray10),color:e.colors.gray50},bonusStatusFinalizing:{border:"1px solid ".concat(e.colors.gray10)},missedTarget:{opacity:.5},dateRange:{marginBottom:8,color:e.colors.gray50},name:{paddingBottom:8},targets:{display:"grid",gridTemplateColumns:"160px auto",gridColumnGap:16,gridRowGap:8}}));var BonusItem=e=>{let t=x(),s=e.bonus.status===d.BonusStatus.Resolved&&e.bonus.amountHundredthsOfCents<=0||e.bonus.status===d.BonusStatus.Pending&&e.bonus.target>e.bonus.progress&&o()(e.bonus.currentPeriodEnd).isBefore();return(0,i.jsxs)("div",{className:t.container,"data-tip":isQaAccuracyBonus(e.bonus),"data-for":"bonusItemTooltip".concat(e.bonus._id),children:[(0,i.jsx)(BonusStatusPill,{bonus:e.bonus,isMissedTarget:s}),(0,i.jsxs)("div",{className:s?t.missedTarget:"",children:[(0,i.jsx)(BonusDateRange,{...e}),(0,i.jsx)(BonusName,{name:e.bonus.name,isMissedTarget:s}),s?"":(0,i.jsx)(BonusItemAmount,{...e}),(0,i.jsx)(BonusTargets,{...e})]}),isQaAccuracyBonus(e.bonus)&&(0,i.jsx)(c(),{id:"bonusItemTooltip".concat(e.bonus._id),children:(0,i.jsx)(bonus_BonusItemTooltip,{bonus:e.bonus})})]})}}}]);